/*! For license information please see sp-image-edit-next_en-us_044744a93760995882d2.js.LICENSE.txt */
(()=>{var e=document.currentScript;define("12e94922-76ea-4654-88ff-a149979a3d3e_1.0.0",["tslib","react","@ms/odsp-utilities-bundle","@ms/office-ui-fabric-react-bundle","@microsoft/load-themed-styles","@ms/sp-component-utilities","@ms/odsp-core-bundle","@microsoft/sp-core-library","@ms/sp-fluentui-migration-link-bundle","@ms/sp-fluentui-migration-button-bundle","@ms/sp-webpart-shared-editmode","@microsoft/sp-image-helper","@microsoft/sp-page-context","react-dom","@ms/sp-rich-image","@ms/sp-fluentui-migration-reactdom-render-bundle","@microsoft/sp-diagnostics","@microsoft/sp-lodash-subset","@ms/sp-webpart-shared","@ms/sp-a11y","@ms/sp-fluentui-v9-utilities-bundle","@ms/sp-fluentui-migration-spinner-bundle","@ms/sp-fluentui-migration-callout-bundle","@ms/sp-fluentui-migration-textfield-bundle","@ms/sp-edit-customer-promise","@ms/sp-image-shapes-read","@ms/sp-image-read","@ms/sp-image-url-cache-manager","@ms/sp-coachmark-utility","@ms/sp-advanced-image-editor","@ms/sp-image-shapes","@ms/sp-pages-core","@ms/sp-telemetry","@ms/sp-image-tools","@ms/sp-dataproviders","@ms/sp-fluentui-migration-customizer-bundle","@ms/sp-fluentui-migration-messagebar-bundle","@microsoft/sp-loader"],(t,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S,D,I,x,C,O,w,E,A,L,k,M,P,T,U,F,H,R)=>(()=>{var N,B,j,V={8054:(e,t,n)=>{"use strict";n.d(t,{U:()=>d});var a=n(5959);const i=a.createContext(void 0),r={};i.Provider;var o=n(2215);const s=(0,o.__styles)({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),c=(e,t)=>{const{title:n,primaryFill:c="currentColor",...d}=e,l={...d,title:void 0,fill:c},u=s(),f=a.useContext(i)?a.useContext(i):r;return l.className=(0,o.mergeClasses)(u.root,(null==t?void 0:t.flipInRtl)&&"rtl"===(null==f?void 0:f.textDirection)&&u.rtl,l.className),n&&(l["aria-label"]=n),l["aria-label"]||l["aria-labelledby"]?l.role="img":l["aria-hidden"]=!0,l},d=(e,t,n,i)=>{const r="1em"===t?"20":t,o=a.forwardRef((e,o)=>{const s={...c(e,{flipInRtl:null==i?void 0:i.flipInRtl}),ref:o,width:t,height:t,viewBox:`0 0 ${r} ${r}`,xmlns:"http://www.w3.org/2000/svg"};return a.createElement("svg",s,...n.map(e=>a.createElement("path",{d:e,fill:s.fill})))});return o.displayName=e,o}}
,6125:(e,t,n)=>{"use strict";function a(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>r});const r=i}
,2987:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c="undefined"!=typeof window&&void 0!==window.document,d=c?window:{},l=!(!c||!d.document.documentElement)&&"ontouchstart"in d.document.documentElement,u=!!c&&"PointerEvent"in d,f="cropper",p="all",m="crop",_="move",h="zoom",b="e",g="w",v="s",y="n",S="ne",D="nw",I="se",x="sw",C="".concat(f,"-crop"),O="".concat(f,"-disabled"),w="".concat(f,"-hidden"),E="".concat(f,"-hide"),A="".concat(f,"-invisible"),L="".concat(f,"-modal"),k="".concat(f,"-move"),M="".concat(f,"Action"),P="".concat(f,"Preview"),T="crop",U="move",F="none",H="crop",R="cropend",N="cropmove",B="cropstart",j="dblclick",V=u?"pointerdown":l?"touchstart":"mousedown",z=u?"pointermove":l?"touchmove":"mousemove",G=u?"pointerup pointercancel":l?"touchend touchcancel":"mouseup",K="ready",W="resize",q="wheel",Q="zoom",Y="image/jpeg",J=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,X=/^data:/,Z=/^data:image\/jpeg;base64,/,$=/^img|canvas$/i,ee={viewMode:0,dragMode:T,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},te=Number.isNaN||d.isNaN;function ne(e){return"number"==typeof e&&!te(e)}var ae=function(e){return e>0&&e<1/0};function ie(e){return void 0===e}function re(e){return"object"===n(e)&&null!==e}var oe=Object.prototype.hasOwnProperty;function se(e){if(!re(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&oe.call(n,"isPrototypeOf")}catch(e){return!1}}function ce(e){return"function"==typeof e}var de=Array.prototype.slice;function le(e){return Array.from?Array.from(e):de.call(e)}function ue(e,t){return e&&ce(t)&&(Array.isArray(e)||ne(e.length)?le(e).forEach(function(n,a){t.call(e,n,a,e)}):re(e)&&Object.keys(e).forEach(function(n){t.call(e,e[n],n,e)})),e}var fe=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return re(e)&&n.length>0&&n.forEach(function(t){re(t)&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e},pe=/\.\d*(?:0|9){12}\d*$/;function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return pe.test(e)?Math.round(e*t)/t:e}var _e=/^width|height|left|top|marginLeft|marginTop$/;function he(e,t){var n=e.style;ue(t,function(e,t){_e.test(t)&&ne(e)&&(e="".concat(e,"px")),n[t]=e})}function be(e,t){if(t)if(ne(e.length))ue(e,function(e){be(e,t)});else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function ge(e,t){t&&(ne(e.length)?ue(e,function(e){ge(e,t)}):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function ve(e,t,n){t&&(ne(e.length)?ue(e,function(e){ve(e,t,n)}):n?be(e,t):ge(e,t))}var ye=/([a-z\d])([A-Z])/g;function Se(e){return e.replace(ye,"$1-$2").toLowerCase()}function De(e,t){return re(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Se(t)))}function Ie(e,t,n){re(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(Se(t)),n)}var xe=/\s\s*/,Ce=function(){var e=!1;if(c){var t=!1,n=function(){},a=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});d.addEventListener("test",n,a),d.removeEventListener("test",n,a)}return e}();function Oe(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;t.trim().split(xe).forEach(function(t){if(!Ce){var r=e.listeners;r&&r[t]&&r[t][n]&&(i=r[t][n],delete r[t][n],0===Object.keys(r[t]).length&&delete r[t],0===Object.keys(r).length&&delete e.listeners)}e.removeEventListener(t,i,a)})}function we(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;t.trim().split(xe).forEach(function(t){if(a.once&&!Ce){var r=e.listeners,o=void 0===r?{}:r;i=function(){delete o[t][n],e.removeEventListener(t,i,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];n.apply(e,s)},o[t]||(o[t]={}),o[t][n]&&e.removeEventListener(t,o[t][n],a),o[t][n]=i,e.listeners=o}e.addEventListener(t,i,a)})}function Ee(e,t,n){var a;return ce(Event)&&ce(CustomEvent)?a=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}function Ae(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Le=d.location,ke=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Me(e){var t=e.match(ke);return null!==t&&(t[1]!==Le.protocol||t[2]!==Le.hostname||t[3]!==Le.port)}function Pe(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Te(e){var t=e.rotate,n=e.scaleX,a=e.scaleY,i=e.translateX,r=e.translateY,o=[];ne(i)&&0!==i&&o.push("translateX(".concat(i,"px)")),ne(r)&&0!==r&&o.push("translateY(".concat(r,"px)")),ne(t)&&0!==t&&o.push("rotate(".concat(t,"deg)")),ne(n)&&1!==n&&o.push("scaleX(".concat(n,")")),ne(a)&&1!==a&&o.push("scaleY(".concat(a,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Ue(e,n){var a=e.pageX,i=e.pageY,r={endX:a,endY:i};return n?r:t({startX:a,startY:i},r)}function Fe(e){var t=e.aspectRatio,n=e.height,a=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=ae(a),o=ae(n);if(r&&o){var s=n*t;"contain"===i&&s>a||"cover"===i&&s<a?n=a/t:a=n*t}else r?n=a/t:o&&(a=n*t);return{width:a,height:n}}function He(e,t,n,a){var i=t.aspectRatio,r=t.naturalWidth,s=t.naturalHeight,c=t.rotate,d=void 0===c?0:c,l=t.scaleX,u=void 0===l?1:l,f=t.scaleY,p=void 0===f?1:f,m=n.aspectRatio,_=n.naturalWidth,h=n.naturalHeight,b=a.fillColor,g=void 0===b?"transparent":b,v=a.imageSmoothingEnabled,y=void 0===v||v,S=a.imageSmoothingQuality,D=void 0===S?"low":S,I=a.maxWidth,x=void 0===I?1/0:I,C=a.maxHeight,O=void 0===C?1/0:C,w=a.minWidth,E=void 0===w?0:w,A=a.minHeight,L=void 0===A?0:A,k=document.createElement("canvas"),M=k.getContext("2d"),P=Fe({aspectRatio:m,width:x,height:O}),T=Fe({aspectRatio:m,width:E,height:L},"cover"),U=Math.min(P.width,Math.max(T.width,_)),F=Math.min(P.height,Math.max(T.height,h)),H=Fe({aspectRatio:i,width:x,height:O}),R=Fe({aspectRatio:i,width:E,height:L},"cover"),N=Math.min(H.width,Math.max(R.width,r)),B=Math.min(H.height,Math.max(R.height,s)),j=[-N/2,-B/2,N,B];return k.width=me(U),k.height=me(F),M.fillStyle=g,M.fillRect(0,0,U,F),M.save(),M.translate(U/2,F/2),M.rotate(d*Math.PI/180),M.scale(u,p),M.imageSmoothingEnabled=y,M.imageSmoothingQuality=D,M.drawImage.apply(M,[e].concat(o(j.map(function(e){return Math.floor(me(e))})))),M.restore(),k}var Re=String.fromCharCode,Ne=/^data:.*,/;var Be={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,a=this.cropper,i=Number(t.minContainerWidth),r=Number(t.minContainerHeight);be(a,w),ge(e,w);var o={width:Math.max(n.offsetWidth,i>=0?i:200),height:Math.max(n.offsetHeight,r>=0?r:100)};this.containerData=o,he(a,{width:o.width,height:o.height}),be(e,w),ge(a,w)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,a=Math.abs(t.rotate)%180==90,i=a?t.naturalHeight:t.naturalWidth,r=a?t.naturalWidth:t.naturalHeight,o=i/r,s=e.width,c=e.height;e.height*o>e.width?3===n?s=e.height*o:c=e.width/o:3===n?c=e.width/o:s=e.height*o;var d={aspectRatio:o,naturalWidth:i,naturalHeight:r,width:s,height:c};this.canvasData=d,this.limited=1===n||2===n,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(e.width-d.width)/2,d.top=(e.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=fe({},d)},limitCanvas:function(e,t){var n=this.options,a=this.containerData,i=this.canvasData,r=this.cropBoxData,o=n.viewMode,s=i.aspectRatio,c=this.cropped&&r;if(e){var d=Number(n.minCanvasWidth)||0,l=Number(n.minCanvasHeight)||0;o>1?(d=Math.max(d,a.width),l=Math.max(l,a.height),3===o&&(l*s>d?d=l*s:l=d/s)):o>0&&(d?d=Math.max(d,c?r.width:0):l?l=Math.max(l,c?r.height:0):c&&(d=r.width,(l=r.height)*s>d?d=l*s:l=d/s));var u=Fe({aspectRatio:s,width:d,height:l});d=u.width,l=u.height,i.minWidth=d,i.minHeight=l,i.maxWidth=1/0,i.maxHeight=1/0}if(t)if(o>(c?0:1)){var f=a.width-i.width,p=a.height-i.height;i.minLeft=Math.min(0,f),i.minTop=Math.min(0,p),i.maxLeft=Math.max(0,f),i.maxTop=Math.max(0,p),c&&this.limited&&(i.minLeft=Math.min(r.left,r.left+(r.width-i.width)),i.minTop=Math.min(r.top,r.top+(r.height-i.height)),i.maxLeft=r.left,i.maxTop=r.top,2===o&&(i.width>=a.width&&(i.minLeft=Math.min(0,f),i.maxLeft=Math.max(0,f)),i.height>=a.height&&(i.minTop=Math.min(0,p),i.maxTop=Math.max(0,p))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=a.width,i.maxTop=a.height},renderCanvas:function(e,t){var n=this.canvasData,a=this.imageData;if(t){var i=function(e){var t=e.width,n=e.height,a=e.degree;if(90==(a=Math.abs(a)%180))return{width:n,height:t};var i=a%90*Math.PI/180,r=Math.sin(i),o=Math.cos(i),s=t*o+n*r,c=t*r+n*o;return a>90?{width:c,height:s}:{width:s,height:c}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),r=i.width,o=i.height,s=n.width*(r/n.naturalWidth),c=n.height*(o/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(c-n.height)/2,n.width=s,n.height=c,n.aspectRatio=r/o,n.naturalWidth=r,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,he(this.canvas,fe({width:n.width,height:n.height},Te({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,a=n.naturalWidth*(t.width/t.naturalWidth),i=n.naturalHeight*(t.height/t.naturalHeight);fe(n,{width:a,height:i,left:(t.width-a)/2,top:(t.height-i)/2}),he(this.image,fe({width:n.width,height:n.height},Te(fe({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,a=Number(e.autoCropArea)||.8,i={width:t.width,height:t.height};n&&(t.height*n>t.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*a),i.height=Math.max(i.minHeight,i.height*a),i.left=t.left+(t.width-i.width)/2,i.top=t.top+(t.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=fe({},i)},limitCropBox:function(e,t){var n=this.options,a=this.containerData,i=this.canvasData,r=this.cropBoxData,o=this.limited,s=n.aspectRatio;if(e){var c=Number(n.minCropBoxWidth)||0,d=Number(n.minCropBoxHeight)||0,l=o?Math.min(a.width,i.width,i.width+i.left,a.width-i.left):a.width,u=o?Math.min(a.height,i.height,i.height+i.top,a.height-i.top):a.height;c=Math.min(c,a.width),d=Math.min(d,a.height),s&&(c&&d?d*s>c?d=c/s:c=d*s:c?d=c/s:d&&(c=d*s),u*s>l?u=l/s:l=u*s),r.minWidth=Math.min(c,l),r.minHeight=Math.min(d,u),r.maxWidth=l,r.maxHeight=u}t&&(o?(r.minLeft=Math.max(0,i.left),r.minTop=Math.max(0,i.top),r.maxLeft=Math.min(a.width,i.left+i.width)-r.width,r.maxTop=Math.min(a.height,i.top+i.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=a.width-r.width,r.maxTop=a.height-r.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Ie(this.face,M,n.width>=t.width&&n.height>=t.height?_:p),he(this.cropBox,fe({width:n.width,height:n.height},Te({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ee(this.element,H,this.getData())}},je={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,a=t?this.crossOriginUrl:this.url,i=e.alt||"The image to preview",r=document.createElement("img");if(t&&(r.crossOrigin=t),r.src=a,r.alt=i,this.viewBox.appendChild(r),this.viewBoxImage=r,n){var o=n;"string"==typeof n?o=e.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,ue(o,function(e){var n=document.createElement("img");Ie(e,P,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=a,n.alt=i,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)})}},resetPreview:function(){ue(this.previews,function(e){var t=De(e,P);he(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(re(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Se(t)))}(e,P)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,a=n.width,i=n.height,r=e.width,o=e.height,s=n.left-t.left-e.left,c=n.top-t.top-e.top;this.cropped&&!this.disabled&&(he(this.viewBoxImage,fe({width:r,height:o},Te(fe({translateX:-s,translateY:-c},e)))),ue(this.previews,function(t){var n=De(t,P),d=n.width,l=n.height,u=d,f=l,p=1;a&&(f=i*(p=d/a)),i&&f>l&&(u=a*(p=l/i),f=l),he(t,{width:u,height:f}),he(t.getElementsByTagName("img")[0],fe({width:r*p,height:o*p},Te(fe({translateX:-s*p,translateY:-c*p},e))))}))}},Ve={bind:function(){var e=this.element,t=this.options,n=this.cropper;ce(t.cropstart)&&we(e,B,t.cropstart),ce(t.cropmove)&&we(e,N,t.cropmove),ce(t.cropend)&&we(e,R,t.cropend),ce(t.crop)&&we(e,H,t.crop),ce(t.zoom)&&we(e,Q,t.zoom),we(n,V,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&we(n,q,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&we(n,j,this.onDblclick=this.dblclick.bind(this)),we(e.ownerDocument,z,this.onCropMove=this.cropMove.bind(this)),we(e.ownerDocument,G,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&we(window,W,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;ce(t.cropstart)&&Oe(e,B,t.cropstart),ce(t.cropmove)&&Oe(e,N,t.cropmove),ce(t.cropend)&&Oe(e,R,t.cropend),ce(t.crop)&&Oe(e,H,t.crop),ce(t.zoom)&&Oe(e,Q,t.zoom),Oe(n,V,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Oe(n,q,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Oe(n,j,this.onDblclick),Oe(e.ownerDocument,z,this.onCropMove),Oe(e.ownerDocument,G,this.onCropEnd),t.responsive&&Oe(window,W,this.onResize)}},ze={resize:function(){if(!this.disabled){var e,t,n=this.options,a=this.container,i=this.containerData,r=a.offsetWidth/i.width,o=a.offsetHeight/i.height,s=Math.abs(r-1)>Math.abs(o-1)?r:o;1!==s&&(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(ue(e,function(t,n){e[n]=t*s})),this.setCropBoxData(ue(t,function(e,n){t[n]=e*s}))))}},dblclick:function(){var e,t;this.disabled||this.options.dragMode===F||this.setDragMode((e=this.dragBox,t=C,(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)?U:T))},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ne(t)&&1!==t||ne(n)&&0!==n||e.ctrlKey))){var a,i=this.options,r=this.pointers;e.changedTouches?ue(e.changedTouches,function(e){r[e.identifier]=Ue(e)}):r[e.pointerId||0]=Ue(e),a=Object.keys(r).length>1&&i.zoomable&&i.zoomOnTouch?h:De(e.target,M),J.test(a)&&!1!==Ee(this.element,B,{originalEvent:e,action:a})&&(e.preventDefault(),this.action=a,this.cropping=!1,a===m&&(this.cropping=!0,be(this.dragBox,L)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ee(this.element,N,{originalEvent:e,action:t})&&(e.changedTouches?ue(e.changedTouches,function(e){fe(n[e.identifier]||{},Ue(e,!0))}):fe(n[e.pointerId||0]||{},Ue(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?ue(e.changedTouches,function(e){delete n[e.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ve(this.dragBox,L,this.cropped&&this.options.modal)),Ee(this.element,R,{originalEvent:e,action:t}))}}},Ge={change:function(e){var n,a=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,s=this.pointers,c=this.action,d=a.aspectRatio,l=o.left,u=o.top,f=o.width,C=o.height,O=l+f,E=u+C,A=0,L=0,k=r.width,M=r.height,P=!0;!d&&e.shiftKey&&(d=f&&C?f/C:1),this.limited&&(A=o.minLeft,L=o.minTop,k=A+Math.min(r.width,i.width,i.left+i.width),M=L+Math.min(r.height,i.height,i.top+i.height));var T=s[Object.keys(s)[0]],U={x:T.endX-T.startX,y:T.endY-T.startY},F=function(e){switch(e){case b:O+U.x>k&&(U.x=k-O);break;case g:l+U.x<A&&(U.x=A-l);break;case y:u+U.y<L&&(U.y=L-u);break;case v:E+U.y>M&&(U.y=M-E)}};switch(c){case p:l+=U.x,u+=U.y;break;case b:if(U.x>=0&&(O>=k||d&&(u<=L||E>=M))){P=!1;break}F(b),(f+=U.x)<0&&(c=g,l-=f=-f),d&&(C=f/d,u+=(o.height-C)/2);break;case y:if(U.y<=0&&(u<=L||d&&(l<=A||O>=k))){P=!1;break}F(y),C-=U.y,u+=U.y,C<0&&(c=v,u-=C=-C),d&&(f=C*d,l+=(o.width-f)/2);break;case g:if(U.x<=0&&(l<=A||d&&(u<=L||E>=M))){P=!1;break}F(g),f-=U.x,l+=U.x,f<0&&(c=b,l-=f=-f),d&&(C=f/d,u+=(o.height-C)/2);break;case v:if(U.y>=0&&(E>=M||d&&(l<=A||O>=k))){P=!1;break}F(v),(C+=U.y)<0&&(c=y,u-=C=-C),d&&(f=C*d,l+=(o.width-f)/2);break;case S:if(d){if(U.y<=0&&(u<=L||O>=k)){P=!1;break}F(y),C-=U.y,u+=U.y,f=C*d}else F(y),F(b),U.x>=0?O<k?f+=U.x:U.y<=0&&u<=L&&(P=!1):f+=U.x,U.y<=0?u>L&&(C-=U.y,u+=U.y):(C-=U.y,u+=U.y);f<0&&C<0?(c=x,u-=C=-C,l-=f=-f):f<0?(c=D,l-=f=-f):C<0&&(c=I,u-=C=-C);break;case D:if(d){if(U.y<=0&&(u<=L||l<=A)){P=!1;break}F(y),C-=U.y,u+=U.y,f=C*d,l+=o.width-f}else F(y),F(g),U.x<=0?l>A?(f-=U.x,l+=U.x):U.y<=0&&u<=L&&(P=!1):(f-=U.x,l+=U.x),U.y<=0?u>L&&(C-=U.y,u+=U.y):(C-=U.y,u+=U.y);f<0&&C<0?(c=I,u-=C=-C,l-=f=-f):f<0?(c=S,l-=f=-f):C<0&&(c=x,u-=C=-C);break;case x:if(d){if(U.x<=0&&(l<=A||E>=M)){P=!1;break}F(g),f-=U.x,l+=U.x,C=f/d}else F(v),F(g),U.x<=0?l>A?(f-=U.x,l+=U.x):U.y>=0&&E>=M&&(P=!1):(f-=U.x,l+=U.x),U.y>=0?E<M&&(C+=U.y):C+=U.y;f<0&&C<0?(c=S,u-=C=-C,l-=f=-f):f<0?(c=I,l-=f=-f):C<0&&(c=D,u-=C=-C);break;case I:if(d){if(U.x>=0&&(O>=k||E>=M)){P=!1;break}F(b),C=(f+=U.x)/d}else F(v),F(b),U.x>=0?O<k?f+=U.x:U.y>=0&&E>=M&&(P=!1):f+=U.x,U.y>=0?E<M&&(C+=U.y):C+=U.y;f<0&&C<0?(c=D,u-=C=-C,l-=f=-f):f<0?(c=x,l-=f=-f):C<0&&(c=S,u-=C=-C);break;case _:this.move(U.x,U.y),P=!1;break;case h:this.zoom(function(e){var n=t({},e),a=0;return ue(e,function(e,t){delete n[t],ue(n,function(t){var n=Math.abs(e.startX-t.startX),i=Math.abs(e.startY-t.startY),r=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+i*i),c=(Math.sqrt(r*r+o*o)-s)/s;Math.abs(c)>Math.abs(a)&&(a=c)})}),a}(s),e),P=!1;break;case m:if(!U.x||!U.y){P=!1;break}n=Ae(this.cropper),l=T.startX-n.left,u=T.startY-n.top,f=o.minWidth,C=o.minHeight,U.x>0?c=U.y>0?I:S:U.x<0&&(l-=f,c=U.y>0?x:D),U.y<0&&(u-=C),this.cropped||(ge(this.cropBox,w),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}P&&(o.width=f,o.height=C,o.left=l,o.top=u,this.action=c,this.renderCropBox()),ue(s,function(e){e.startX=e.endX,e.startY=e.endY})}},Ke={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&be(this.dragBox,L),ge(this.cropBox,w),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=fe({},this.initialImageData),this.canvasData=fe({},this.initialCanvasData),this.cropBoxData=fe({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(fe(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ge(this.dragBox,L),be(this.cropBox,w)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ue(this.previews,function(t){t.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ge(this.cropper,O)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,be(this.cropper,O)),this},destroy:function(){var e=this.element;return e.cropper?(e.cropper=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,a=n.left,i=n.top;return this.moveTo(ie(e)?e:a+Number(e),ie(t)?t:i+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,a=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(ne(e)&&(n.left=e,a=!0),ne(t)&&(n.top=t,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var a=this.options,i=this.canvasData,r=i.width,o=i.height,s=i.naturalWidth,c=i.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&a.zoomable){var d=s*e,l=c*e;if(!1===Ee(this.element,Q,{ratio:e,oldRatio:r/s,originalEvent:n}))return this;if(n){var u=this.pointers,f=Ae(this.cropper),p=u&&Object.keys(u).length?function(e){var t=0,n=0,a=0;return ue(e,function(e){var i=e.startX,r=e.startY;t+=i,n+=r,a+=1}),{pageX:t/=a,pageY:n/=a}}(u):{pageX:n.pageX,pageY:n.pageY};i.left-=(d-r)*((p.pageX-f.left-i.left)/r),i.top-=(l-o)*((p.pageY-f.top-i.top)/o)}else se(t)&&ne(t.x)&&ne(t.y)?(i.left-=(d-r)*((t.x-i.left)/r),i.top-=(l-o)*((t.y-i.top)/o)):(i.left-=(d-r)/2,i.top-=(l-o)/2);i.width=d,i.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return ne(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,ne(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(ne(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,a=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(ne(e)&&(n.scaleX=e,a=!0),ne(t)&&(n.scaleY=t,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,a=this.imageData,i=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){e={x:r.left-i.left,y:r.top-i.top,width:r.width,height:r.height};var o=a.width/a.naturalWidth;if(ue(e,function(t,n){e[n]=t/o}),t){var s=Math.round(e.y+e.height),c=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=c-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=a.rotate||0),n.scalable&&(e.scaleX=a.scaleX||1,e.scaleY=a.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,a=this.canvasData,i={};if(this.ready&&!this.disabled&&se(e)){var r=!1;t.rotatable&&ne(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,r=!0),t.scalable&&(ne(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,r=!0),ne(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;ne(e.x)&&(i.left=e.x*o+a.left),ne(e.y)&&(i.top=e.y*o+a.top),ne(e.width)&&(i.width=e.width*o),ne(e.height)&&(i.height=e.height*o),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?fe({},this.containerData):{}},getImageData:function(){return this.sized?fe({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&ue(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&se(e)&&(ne(e.left)&&(t.left=e.left),ne(e.top)&&(t.top=e.top),ne(e.width)?(t.width=e.width,t.height=e.width/n):ne(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,a=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&se(e)&&(ne(e.left)&&(a.left=e.left),ne(e.top)&&(a.top=e.top),ne(e.width)&&e.width!==a.width&&(t=!0,a.width=e.width),ne(e.height)&&e.height!==a.height&&(n=!0,a.height=e.height),i&&(t?a.height=a.width/i:n&&(a.width=a.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=He(this.image,this.imageData,t,e);if(!this.cropped)return n;var a=this.getData(),i=a.x,r=a.y,s=a.width,c=a.height,d=n.width/Math.floor(t.naturalWidth);1!==d&&(i*=d,r*=d,s*=d,c*=d);var l=s/c,u=Fe({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Fe({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=Fe({aspectRatio:l,width:e.width||(1!==d?n.width:s),height:e.height||(1!==d?n.height:c)}),m=p.width,_=p.height;m=Math.min(u.width,Math.max(f.width,m)),_=Math.min(u.height,Math.max(f.height,_));var h=document.createElement("canvas"),b=h.getContext("2d");h.width=me(m),h.height=me(_),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,m,_);var g=e.imageSmoothingEnabled,v=void 0===g||g,y=e.imageSmoothingQuality;b.imageSmoothingEnabled=v,y&&(b.imageSmoothingQuality=y);var S,D,I,x,C,O,w=n.width,E=n.height,A=i,L=r;A<=-s||A>w?(A=0,S=0,I=0,C=0):A<=0?(I=-A,A=0,C=S=Math.min(w,s+A)):A<=w&&(I=0,C=S=Math.min(s,w-A)),S<=0||L<=-c||L>E?(L=0,D=0,x=0,O=0):L<=0?(x=-L,L=0,O=D=Math.min(E,c+L)):L<=E&&(x=0,O=D=Math.min(c,E-L));var k=[A,L,S,D];if(C>0&&O>0){var M=m/s;k.push(I*M,x*M,C*M,O*M)}return b.drawImage.apply(b,[n].concat(o(k.map(function(e){return Math.floor(me(e))})))),h},setAspectRatio:function(e){var t=this.options;return this.disabled||ie(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var i=e===T,r=t.movable&&e===U;e=i||r?e:F,t.dragMode=e,Ie(n,M,e),ve(n,C,i),ve(n,k,r),t.cropBoxMovable||(Ie(a,M,e),ve(a,C,i),ve(a,k,r))}return this}},We=d.Cropper,qe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,e),!t||!$.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=fe({},ee,se(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return t=e,r=[{key:"noConflict",value:function(){return window.Cropper=We,e}},{key:"setDefaults",value:function(e){fe(ee,se(e)&&e)}}],(n=[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t.cropper){if(t.cropper=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t,n,a,i,r=this;if(e){this.url=e,this.imageData={};var o=this.element,s=this.options;if(s.rotatable||s.scalable||(s.checkOrientation=!1),s.checkOrientation&&window.ArrayBuffer)if(X.test(e))Z.test(e)?this.read((t=e.replace(Ne,""),n=atob(t),a=new ArrayBuffer(n.length),ue(i=new Uint8Array(a),function(e,t){i[t]=n.charCodeAt(t)}),a)):this.clone();else{var c=new XMLHttpRequest,d=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=d,c.onerror=d,c.ontimeout=d,c.onprogress=function(){c.getResponseHeader("content-type")!==Y&&c.abort()},c.onload=function(){r.read(c.response)},c.onloadend=function(){r.reloading=!1,r.xhr=null},s.checkCrossOrigin&&Me(e)&&o.crossOrigin&&(e=Pe(e)),c.open("GET",e,!0),c.responseType="arraybuffer",c.withCredentials="use-credentials"===o.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,a=function(e){var t,n=new DataView(e);try{var a,i,r;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,s=2;s+1<o;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){i=s;break}s+=1}if(i){var c=i+10;if("Exif"===function(e,t,n){var a="";n+=t;for(var i=t;i<n;i+=1)a+=Re(e.getUint8(i));return a}(n,i+4,4)){var d=n.getUint16(c);if(((a=18761===d)||19789===d)&&42===n.getUint16(c+2,a)){var l=n.getUint32(c+4,a);l>=8&&(r=c+l)}}}if(r){var u,f,p=n.getUint16(r,a);for(f=0;f<p;f+=1)if(u=r+12*f+2,274===n.getUint16(u,a)){u+=8,t=n.getUint16(u,a),n.setUint16(u,1,a);break}}}catch(e){t=1}return t}(e),i=0,r=1,o=1;if(a>1){this.url=function(e,t){for(var n=[],a=new Uint8Array(e);a.length>0;)n.push(Re.apply(null,le(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(n.join("")))}(e);var s=function(e){var t=0,n=1,a=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:a=-1;break;case 5:t=90,a=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:a}}(a);i=s.rotate,r=s.scaleX,o=s.scaleY}t.rotatable&&(n.rotate=i),t.scalable&&(n.scaleX=r,n.scaleY=o),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,a=t;this.options.checkCrossOrigin&&Me(t)&&(n||(n="anonymous"),a=Pe(t)),this.crossOrigin=n,this.crossOriginUrl=a;var i=document.createElement("img");n&&(i.crossOrigin=n),i.src=a||t,i.alt=e.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),be(i,E),e.parentNode.insertBefore(i,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=d.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(d.navigator.userAgent),a=function(t,n){fe(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=fe({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var i=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){a(i.width,i.height),n||r.removeChild(i)},i.src=t.src,n||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i))}else a(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,a=e.parentNode,i=document.createElement("div");i.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=i.querySelector(".".concat(f,"-container")),o=r.querySelector(".".concat(f,"-canvas")),s=r.querySelector(".".concat(f,"-drag-box")),c=r.querySelector(".".concat(f,"-crop-box")),d=c.querySelector(".".concat(f,"-face"));this.container=a,this.cropper=r,this.canvas=o,this.dragBox=s,this.cropBox=c,this.viewBox=r.querySelector(".".concat(f,"-view-box")),this.face=d,o.appendChild(n),be(e,w),a.insertBefore(r,e.nextSibling),ge(n,E),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,be(c,w),t.guides||be(c.getElementsByClassName("".concat(f,"-dashed")),w),t.center||be(c.getElementsByClassName("".concat(f,"-center")),w),t.background&&be(r,"".concat(f,"-bg")),t.highlight||be(d,A),t.cropBoxMovable&&(be(d,k),Ie(d,M,p)),t.cropBoxResizable||(be(c.getElementsByClassName("".concat(f,"-line")),w),be(c.getElementsByClassName("".concat(f,"-point")),w)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),ce(t.ready)&&we(e,K,t.ready,{once:!0}),Ee(e,K)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),ge(this.element,w)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e;var t,n,r}();return fe(qe.prototype,Be,je,Ve,ze,Ge,Ke),qe}()}
,1436:(e,t,n)=>{"use strict";var a=n(5851);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,o){if(o!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}}
,9114:(e,t,n)=>{e.exports=n(1436)()}
,5851:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}
,5172:(e,t,n)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=_(void 0);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(5959)),r=m(n(9114)),o=m(n(8398)),s=m(n(6125)),c=n(2352),d=n(6021),l=n(5547),u=m(n(5507)),f=m(n(3895)),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function m(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(this,arguments)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function D(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(_,e);var t,n,a,r,l,m=(r=_,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(l){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),C(I(t=m.call(this,e)),"onDragStart",function(e,n){if((0,f.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,d.createDraggableData)(I(t),n)))return!1;t.setState({dragging:!0,dragged:!0})}),C(I(t),"onDrag",function(e,n){if(!t.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",n);var a,i=(0,d.createDraggableData)(I(t),n),r={x:i.x,y:i.y};if(t.props.bounds){var o=r.x,s=r.y;r.x+=t.state.slackX,r.y+=t.state.slackY;var c=(2,function(e){if(Array.isArray(e))return e}(a=(0,d.getBoundPosition)(I(t),r.x,r.y))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),2!==r.length);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return r}}(a)||function(e,t){if(e){if("string"==typeof e)return v(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,2):void 0}}(a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],u=c[1];r.x=l,r.y=u,r.slackX=t.state.slackX+(o-r.x),r.slackY=t.state.slackY+(s-r.y),i.x=r.x,i.y=r.y,i.deltaX=r.x-t.state.x,i.deltaY=r.y-t.state.y}if(!1===t.props.onDrag(e,i))return!1;t.setState(r)}),C(I(t),"onDragStop",function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,d.createDraggableData)(I(t),n)))return!1;(0,f.default)("Draggable: onDragStop: %j",n);var a={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var i=t.props.position,r=i.x,o=i.y;a.x=r,a.y=o}t.setState(a)}),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:g({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=_,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,a=t.prevPropsPosition;return!n||a&&n.x===a.x&&n.y===a.y?null:((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:a}),{x:n.x,y:n.y,prevPropsPosition:g({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),a=t.defaultPosition,r=t.defaultClassName,o=t.defaultClassNameDragging,l=t.defaultClassNameDragged,f=t.position,m=t.positionOffset,_=(t.scale,function(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,p)),b={},v=null,y=!Boolean(f)||this.state.dragging,S=f||a,D={x:(0,d.canDragX)(this)&&y?this.state.x:S.x,y:(0,d.canDragY)(this)&&y?this.state.y:S.y};this.state.isElementSVG?v=(0,c.createSVGTransform)(D,m):b=(0,c.createCSSTransform)(D,m);var I=(0,s.default)(n.props.className||"",r,(C(e={},o,this.state.dragging),C(e,l,this.state.dragged),e));return i.createElement(u.default,h({},_,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(n),{className:I,style:g(g({},n.props.style),b),transform:v}))}}])&&y(t.prototype,n),a&&y(t,a),Object.defineProperty(t,"prototype",{writable:!1}),_}(i.Component);t.default=O,C(O,"displayName","Draggable"),C(O,"propTypes",g(g({},u.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),C(O,"defaultProps",g(g({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}
,5507:(e,t,n)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(void 0);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(5959)),r=u(n(9114)),o=u(n(8398)),s=n(2352),c=n(6021),d=n(5547),l=u(n(3895));function u(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function b(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={start:"touchstart",move:"touchmove",stop:"touchend"},D={start:"mousedown",move:"mousemove",stop:"mouseup"},I=D,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,a,r,d=(a=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=v(a);if(r){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(){var e;_(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return y(g(e=d.call.apply(d,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),y(g(e),"mounted",!1),y(g(e),"handleDragStart",function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof a.defaultView.Node)||e.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var i=(0,s.getTouchIdentifier)(t);e.setState({touchIdentifier:i});var r=(0,c.getControlPosition)(t,i,g(e));if(null!=r){var o=r.x,d=r.y,u=(0,c.createCoreData)(g(e),o,d);(0,l.default)("DraggableCore: handleDragStart: %j",u),(0,l.default)("calling",e.props.onStart),!1!==e.props.onStart(t,u)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(a),e.setState({dragging:!0,lastX:o,lastY:d}),(0,s.addEvent)(a,I.move,e.handleDrag),(0,s.addEvent)(a,I.stop,e.handleDragStop))}}}),y(g(e),"handleDrag",function(t){var n=(0,c.getControlPosition)(t,e.state.touchIdentifier,g(e));if(null!=n){var a=n.x,i=n.y;if(Array.isArray(e.props.grid)){var r=a-e.state.lastX,o=i-e.state.lastY,s=p((0,c.snapToGrid)(e.props.grid,r,o),2);if(r=s[0],o=s[1],!r&&!o)return;a=e.state.lastX+r,i=e.state.lastY+o}var d=(0,c.createCoreData)(g(e),a,i);if((0,l.default)("DraggableCore: handleDrag: %j",d),!1!==e.props.onDrag(t,d)&&!1!==e.mounted)e.setState({lastX:a,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(u)}}}),y(g(e),"handleDragStop",function(t){if(e.state.dragging){var n=(0,c.getControlPosition)(t,e.state.touchIdentifier,g(e));if(null!=n){var a=n.x,i=n.y;if(Array.isArray(e.props.grid)){var r=a-e.state.lastX||0,o=i-e.state.lastY||0,d=p((0,c.snapToGrid)(e.props.grid,r,o),2);r=d[0],o=d[1],a=e.state.lastX+r,i=e.state.lastY+o}var u=(0,c.createCoreData)(g(e),a,i);if(!1===e.props.onStop(t,u)||!1===e.mounted)return!1;var f=e.findDOMNode();f&&e.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(f.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",u),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),f&&((0,l.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(f.ownerDocument,I.move,e.handleDrag),(0,s.removeEvent)(f.ownerDocument,I.stop,e.handleDragStop))}}}),y(g(e),"onMouseDown",function(t){return I=D,e.handleDragStart(t)}),y(g(e),"onMouseUp",function(t){return I=D,e.handleDragStop(t)}),y(g(e),"onTouchStart",function(t){return I=S,e.handleDragStart(t)}),y(g(e),"onTouchEnd",function(t){return I=S,e.handleDragStop(t)}),e}return t=u,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,s.addEvent)(e,S.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,s.removeEvent)(t,D.move,this.handleDrag),(0,s.removeEvent)(t,S.move,this.handleDrag),(0,s.removeEvent)(t,D.stop,this.handleDragStop),(0,s.removeEvent)(t,S.stop,this.handleDragStop),(0,s.removeEvent)(e,S.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:o.default.findDOMNode(this)}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Component);t.default=x,y(x,"displayName","DraggableCore"),y(x,"propTypes",{allowAnyClick:r.default.bool,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),y(x,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})}
,3325:(e,t,n)=>{"use strict";var a=n(5172),i=a.default,r=a.DraggableCore;e.exports=i,e.exports.default=i,e.exports.DraggableCore=r}
,2352:(e,t,n)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=p,t.addEvent=function(e,t,n,a){if(e){var i=c({capture:!0},a);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},t.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&p(e.body,"react-draggable-transparent-selection")}},t.createCSSTransform=function(e,t){var n=f(e,t,"px");return d({},(0,r.browserPrefixToKey)("transform",r.default),n)},t.createSVGTransform=function(e,t){return f(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,i.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,i.findInArray)(e.changedTouches,function(e){return t===e.identifier})},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=f,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,i.int)(n.paddingTop))-(0,i.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,i.int)(n.paddingLeft))-(0,i.int)(n.paddingRight)},t.matchesSelector=u,t.matchesSelectorAndParentsTo=function(e,t,n){var a=e;do{if(u(a,t))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1},t.offsetXYFromParent=function(e,t,n){var a=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-a.left)/n,y:(e.clientY+t.scrollTop-a.top)/n}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,i.int)(n.borderTopWidth))+(0,i.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,i.int)(n.borderLeftWidth))+(0,i.int)(n.borderRightWidth)},t.removeClassName=m,t.removeEvent=function(e,t,n,a){if(e){var i=c({capture:!0},a);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&m(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var i=n(5547),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=o(void 0);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=r?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(i,s,c):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(5925));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l="";function u(e,t){return l||(l=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,i.isFunction)(e[t])})),!!(0,i.isFunction)(e[l])&&e[l](t)}function f(e,t,n){var a=e.x,i=e.y,r="translate(".concat(a).concat(n,",").concat(i).concat(n,")");if(t){var o="".concat("string"==typeof t.x?t.x:t.x+n),s="".concat("string"==typeof t.y?t.y:t.y+n);r="translate(".concat(o,", ").concat(s,")")+r}return r}function p(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function m(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}}
,5925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=a;var n=["Moz","Webkit","O","ms"];function a(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(a in r)return"";for(var o=0;o<n.length;o++)if(i(a,n[o])in r)return n[o];return""}function i(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,a=0;a<e.length;a++)n?(t+=e[a].toUpperCase(),n=!1):"-"===e[a]?n=!0:t+=e[a];return t}(e)):e}var r=a();t.default=r}
,3895:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}}
,6021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var i=e.state,o=!(0,a.isNum)(i.lastX),s=r(e);return o?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-i.lastX,deltaY:n-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var o=e.props.bounds;o="string"==typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);var s=r(e);if("string"==typeof o){var c,d=s.ownerDocument,l=d.defaultView;if(!((c="parent"===o?s.parentNode:d.querySelector(o))instanceof l.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var u=c,f=l.getComputedStyle(s),p=l.getComputedStyle(u);o={left:-s.offsetLeft+(0,a.int)(p.paddingLeft)+(0,a.int)(f.marginLeft),top:-s.offsetTop+(0,a.int)(p.paddingTop)+(0,a.int)(f.marginTop),right:(0,i.innerWidth)(u)-(0,i.outerWidth)(s)-s.offsetLeft+(0,a.int)(p.paddingRight)-(0,a.int)(f.marginRight),bottom:(0,i.innerHeight)(u)-(0,i.outerHeight)(s)-s.offsetTop+(0,a.int)(p.paddingBottom)-(0,a.int)(f.marginBottom)}}return(0,a.isNum)(o.right)&&(t=Math.min(t,o.right)),(0,a.isNum)(o.bottom)&&(n=Math.min(n,o.bottom)),(0,a.isNum)(o.left)&&(t=Math.max(t,o.left)),(0,a.isNum)(o.top)&&(n=Math.max(n,o.top)),[t,n]},t.getControlPosition=function(e,t,n){var a="number"==typeof t?(0,i.getTouch)(e,t):null;if("number"==typeof t&&!a)return null;var o=r(n),s=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,i.offsetXYFromParent)(a||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var a=n(5547),i=n(2352);function r(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}}
,5547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,a=e.length;n<a;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}}
,7051:(e,t,n)=>{"use strict";n.d(t,{Cq:()=>i,FK:()=>d,H9:()=>C,IL:()=>o,JI:()=>g,M3:()=>x,Mi:()=>r,P:()=>p,X7:()=>m,YC:()=>v,Zf:()=>I,aF:()=>D,bh:()=>E,iX:()=>f,k:()=>_,lf:()=>l,nq:()=>y,oF:()=>b,pf:()=>s,sT:()=>O,se:()=>u,tJ:()=>w,yn:()=>c,zg:()=>S,zw:()=>h});var a=n(9676);function i(){return a._SPKillSwitch.isActivated("ede72370-e88a-4e62-a193-f15658e8210b")}function r(){return a._SPKillSwitch.isActivated("34e19bc8-cf54-4e16-b149-89ecd4088194")}function o(){return a._SPKillSwitch.isActivated("7809fac8-3b0c-4d87-a8f1-ab3ac7a8f470")}function s(){return a._SPKillSwitch.isActivated("b4236a4c-723d-42cd-b08f-764cb4f2c0f1")}function c(){return a._SPKillSwitch.isActivated("90fa68ec-0bd7-4188-b227-60715490383d")}function d(){return a._SPKillSwitch.isActivated("cfdec960-464b-4eb2-b355-d611210c8136")}function l(){return a._SPKillSwitch.isActivated("bb630d2b-379b-41f9-8a91-2fbd898d2f04")}function u(){return a._SPKillSwitch.isActivated("d51c52fc-9934-49c8-9a84-e04bb5950a9c")}function f(){return a._SPKillSwitch.isActivated("a73aa8d1-e35d-405f-8b10-1606e2a49e2d")}function p(){return a._SPKillSwitch.isActivated("30e39a60-ab3d-4b36-86fe-2236236280a5")}function m(){return a._SPKillSwitch.isActivated("12643a03-636e-4e9d-a142-d3f43a1646f9")}function _(){return a._SPKillSwitch.isActivated("29b75503-7d16-438d-b8cb-d707764a98a5")}function h(){return a._SPKillSwitch.isActivated("dcb17fab-cda1-4acd-9019-650b0a02e7e0")}function b(){return a._SPKillSwitch.isActivated("d2ceafeb-2bfc-4ef9-91fa-6da02f8d497b")}function g(){return a._SPKillSwitch.isActivated("79a66fe0-5e13-4f13-8ec1-a7f9119e6ea7")}function v(){return a._SPKillSwitch.isActivated("0afa60c8-fd2b-40e4-a6ab-14361c39421b")}function y(){return a._SPKillSwitch.isActivated("26280703-79af-41f3-a93a-4c1963545ca0")}function S(){return a._SPKillSwitch.isActivated("c5942d06-5bdc-4472-8c6e-4316a26b811d")}function D(){return a._SPKillSwitch.isActivated("6f724408-fc7f-41e4-b06f-2514c953e714")}function I(){return a._SPKillSwitch.isActivated("39bd55ac-41c3-43dd-9861-4bfbacbde8d1")}function x(){return a._SPKillSwitch.isActivated("703d935d-c0dc-4a5c-812e-1307d477bb68")}function C(){return a._SPKillSwitch.isActivated("215d1cd5-38da-4f1f-8da8-d3ff1cfe4cd0")}function O(){return a._SPKillSwitch.isActivated("5cbbd14e-8869-4c13-b8b6-7a234db2a4a4")}function w(){return a._SPKillSwitch.isActivated("58adf7cd-e618-403b-8fb1-08b67c8895c9")}function E(){return a._SPKillSwitch.isActivated("b24e663e-99fe-44df-ac7c-c8ffc62b19f1")}}
,9046:(e,t,n)=>{"use strict";n.d(t,{d5:()=>s,gl:()=>r,mS:()=>c,mU:()=>o});var a=n(2141),i=n(111),r={light:"light",dark:"dark",theme1:"theme1",theme2:"theme2"};function o(e){var t,n=c().get(e);return null!==(t=null==n?void 0:n.color)&&void 0!==t?t:"#ffffff"}function s(e,t){void 0===t&&(t=1);var n=parseInt(e.substring(1,3),16),a=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return"rgba(".concat(n,", ").concat(a,", ").concat(i,", ").concat(t,")")}function c(){var e=(0,a.getTheme)().semanticColors;return new Map([[r.light,{color:"#ffffff",label:i.ob}],[r.dark,{color:"#000000",label:i.Tl}],[r.theme1,{color:e.inputBackgroundChecked,label:i.qv}],[r.theme2,{color:e.accentButtonBackground,label:i.rj}]])}}
,8491:(e,t,n)=>{"use strict";n.d(t,{A:()=>a}),n(8424).loadStyles('.bj_e_eb846f79,.bk_e_eb846f79{background-color:"[theme:neutralLighterAlt, default: #faf9f8]";border-radius:4px;height:435px;width:290px}[dir=ltr] .bj_e_eb846f79,[dir=ltr] .bk_e_eb846f79{padding-left:16px}[dir=ltr] .bj_e_eb846f79,[dir=ltr] .bk_e_eb846f79,[dir=rtl] .bj_e_eb846f79,[dir=rtl] .bk_e_eb846f79{padding-right:16px}[dir=rtl] .bj_e_eb846f79,[dir=rtl] .bk_e_eb846f79{padding-left:16px}.bk_e_eb846f79{height:105px}.bl_e_eb846f79{padding-top:20px}.bm_e_eb846f79{height:28px;padding-bottom:20px}.bm_e_eb846f79.bn_e_eb846f79{align-items:center;display:flex}.bo_e_eb846f79{color:"[theme:neutralPrimary, default: #323130]";margin-top:15px;position:absolute;top:0}[dir=ltr] .bo_e_eb846f79{right:0}[dir=rtl] .bo_e_eb846f79{left:0}.bp_e_eb846f79{color:"[theme:neutralPrimary, default: #323130]";font-size:14px;font-weight:600;padding-bottom:16px;padding-top:0}.bq_e_eb846f79,.br_e_eb846f79{background-color:"[theme:neutralLighterAlt, default: #faf9f8]"}.bs_e_eb846f79{color:"[theme:neutralPrimary, default: #323130]"}[dir=ltr] .bs_e_eb846f79{margin-right:4px}[dir=rtl] .bs_e_eb846f79{margin-left:4px}.bt_e_eb846f79{width:50px}.bu_e_eb846f79{height:395px;position:relative;width:100%}.bg_e_eb846f79{left:50%;margin:0;position:absolute;top:50%;transform:translate(-50%,-50%)}',!0);const a={root:"bj_e_eb846f79",rootWithSimplifiedControls:"bk_e_eb846f79",main:"bl_e_eb846f79",menuOptions:"bm_e_eb846f79",colorPicker:"bn_e_eb846f79",cancel:"bo_e_eb846f79",sectionLabel:"bp_e_eb846f79",beak:"bq_e_eb846f79",item:"br_e_eb846f79",toggleButton:"bs_e_eb846f79",fontDropdownContainer:"bt_e_eb846f79",spinnerRoot:"bu_e_eb846f79",spinner:"bg_e_eb846f79"}}
,8424:e=>{"use strict";e.exports=r},9676:e=>{"use strict";e.exports=c},2207:e=>{"use strict";e.exports=b},4949:e=>{"use strict";e.exports=f},8414:e=>{"use strict";e.exports=R},529:e=>{"use strict";e.exports=g},7408:e=>{"use strict";e.exports=p},8698:e=>{"use strict";e.exports=s},9939:e=>{"use strict";e.exports=a},2141:e=>{"use strict";e.exports=i},2193:e=>{"use strict";e.exports=y},4967:e=>{"use strict";e.exports=L},1241:e=>{"use strict";e.exports=A},9773:e=>{"use strict";e.exports=o},5493:e=>{"use strict";e.exports=U},5952:e=>{"use strict";e.exports=C},8926:e=>{"use strict";e.exports=l},1048:e=>{"use strict";e.exports=I},7331:e=>{"use strict";e.exports=F},8118:e=>{"use strict";e.exports=d},1374:e=>{"use strict";e.exports=H},7976:e=>{"use strict";e.exports=h},4779:e=>{"use strict";e.exports=D},8327:e=>{"use strict";e.exports=x},2215:e=>{"use strict";e.exports=S},1621:e=>{"use strict";e.exports=w},4527:e=>{"use strict";e.exports=k},254:e=>{"use strict";e.exports=O},9664:e=>{"use strict";e.exports=T},1879:e=>{"use strict";e.exports=E},6461:e=>{"use strict";e.exports=M},5491:e=>{"use strict";e.exports=_},9408:e=>{"use strict";e.exports=P},4014:e=>{"use strict";e.exports=v},9146:e=>{"use strict";e.exports=u},5959:e=>{"use strict";e.exports=n},8398:e=>{"use strict";e.exports=m},280:e=>{"use strict";e.exports=t},111:e=>{"use strict";e.exports=JSON.parse('{"wL":"","OL":"","Yg":"","yU":"","hL":"","SN":"","NP":"{0}","HU":"{0} ","oU":"","pR":"","b9":"{0} {1}","ob":"","Tl":"","qv":"","rj":"","Z_":"","HO":"{0} {1} ","s5":" Escape ","bB":"","ar":"","$n":"Text overlay at position at {0} and {1}"}')}
},z={};function G(e){var t=z[e];if(void 0!==t)return t.exports;var n=z[e]={exports:{}};return V[e].call(n.exports,n,n.exports,G),n.exports}G.m=V,G.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return G.d(t,{a:t}),t},G.d=(e,t)=>{for(var n in t)G.o(t,n)&&!G.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},G.f={},G.e=e=>Promise.all(Object.keys(G.f).reduce((t,n)=>(G.f[n](e,t),t),[])),G.u=e=>"chunk."+(791===e?"sp-image-webparts-overlay-edit-menu":e)+"_none_"+{649:"6d2e2b07a01101d38261",791:"63d6b8269cde29f83d40"}[e]+".js",G.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),N={},B="12e94922-76ea-4654-88ff-a149979a3d3e_1.0.0:",G.l=(e,t,n,a)=>{if(N[e])N[e].push(t);else{var i,r;if(void 0!==n)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var c=o[s];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==B+n){i=c;break}}i||(r=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,G.nc&&i.setAttribute("nonce",G.nc),i.setAttribute("data-webpack",B+n),i.src=e,0!==i.src.indexOf(window.location.origin+"/")&&(i.crossOrigin="anonymous")),N[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(l);var a=N[e];if(delete N[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(e=>e(n)),t)return t(n)},l=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),r&&document.head.appendChild(i)}},G.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},j=e?e.src:"",G.p=j.slice(0,j.lastIndexOf("/")+1),G.f.compat=(e,t)=>{for(var n=function(e){return{649:[{i:"17ce0976-e69a-4355-be84-89b69a74717d",v:"0.3.28",m:9816}],791:[{i:"33c5a798-8532-4741-888a-d0a7734036b5",v:"0.1.0",m:2076},{i:"72ec0651-8a26-441c-87f2-77ec66884ca3",v:"0.1.0",m:7533},{i:"ffe5c101-373a-4bd2-bebb-13082852bab0",v:"0.1.0",m:8738},{i:"215395c1-25f7-42ff-967c-8832aff2ab33",v:"0.1.0",m:6961}]}[e]||[]}(e),a=0;a<n.length;a++)G.m[n[a].m]||(e=>{t.push(K.SPComponentLoader.loadComponentById(e.i,e.v).then(t=>{G.m[e.m]=e=>e.exports=t}))})(n[a])};var K=G(8414);(()=>{var e={59:0};G.f.j=(t,n)=>{var a=G.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((n,i)=>a=e[t]=[n,i]);n.push(a[2]=i);var r=G.p+G.u(t),o=new Error;G.l(r,n=>{if(G.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,i,[r,o,s]=n,c=0;if(r.some(t=>0!==e[t])){for(a in o)G.o(o,a)&&(G.m[a]=o[a]);s&&s(G)}for(t&&t(n);c<r.length;c++)i=r[c],G.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self["webpackJsonp_12e94922-76ea-4654-88ff-a149979a3d3e_1.0.0"]=self["webpackJsonp_12e94922-76ea-4654-88ff-a149979a3d3e_1.0.0"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var W={};return(()=>{"use strict";G.r(W),G.d(W,{AspectRatioOptions:()=>Ee,AutoFitOverlayTextField:()=>De,CropperJs:()=>S,FULL_IMAGE_WIDTH:()=>O,ImageCropperFactory:()=>D,ImageEdit:()=>Lt,ImageEditContext:()=>Je,ImageEditDependencyContext:()=>ut,ImageEditMode:()=>Ae,ImageEditStylesContext:()=>ge,ImageTopAction:()=>Yt,ImageWebPartOverlayTextField:()=>Xe,LocalFileUpload:()=>yt,PreloadImageHelper:()=>L,ResizeController:()=>we,SPImageCropper:()=>q,_getSvgForAlignment:()=>Jt,_getSvgForAlignmentTitleButton:()=>Xt,_getSvgForAspectRatioDropdown:()=>en,_getSvgForImageShapes:()=>$t,_getSvgForToolbar:()=>Zt,addVersionToFileName:()=>Re,altTextToolTip:()=>g,aspectRatioMap:()=>ft,dropOverlay:()=>Le,getFileNameFromUrl:()=>Ne,isHubbleStockImage:()=>Ve,setEditModeCustomerPromiseHandlerInfo:()=>Me,useClickOutside:()=>Ie});var e=G(280),t=G(5959),n=G(9939),a=G(2141),i=G(8118),r=G(8926),o=G(8424);(0,o.loadStyles)([{rawString:".ms-odsp-screenReaderAlert{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}"}]);const s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n.read=function(e,t){if(e){var a=document.createTextNode(e);n._getDedicatedDomNode(t||1).appendChild(a)}},n._getDedicatedDomNode=function(e){n._alertNode&&document.body.removeChild(n._alertNode);var t=document.createElement("div");switch(t.setAttribute("data-automation-id","screen-reader-alert-static"),t.classList.add("ms-odsp-screenReaderAlert"),e){case 1:t.setAttribute("aria-live","polite");break;case 2:t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive")}return document.body.appendChild(t),n._alertNode=t,n._alertNode},n.prototype.componentDidMount=function(){n.read(this.props.message,this.props.readingMode)},n.prototype.componentDidUpdate=function(e){e.message===this.props.message&&e.indicator===this.props.indicator||n.read(this.props.message,this.props.readingMode)},n.prototype.render=function(){return!1},n}(t.PureComponent);var c=G(9773),d=G(8698);const l=JSON.parse('{"zl":": {0}","PG":": {0}","uY":"","mm":"","JX":"","r7":"","PI":"{0} {1}","X0":" Enter ","Ln":" Enter ","a":"","vM":"","i1":"?"}');o.loadStyles('.a_a_eb846f79{display:inline;margin:8px;position:absolute;top:2px}.a_a_eb846f79 .b_a_eb846f79{background-color:#ffdd65;box-shadow:0 3.2px 7.2px 0 rgba(0,0,0,.132),0 .6px 1.8px 0 rgba(0,0,0,.108);position:absolute;top:0}[dir=ltr] .a_a_eb846f79 .b_a_eb846f79{left:0}[dir=rtl] .a_a_eb846f79 .b_a_eb846f79{right:0}.a_a_eb846f79 .b_a_eb846f79.c_a_eb846f79{background-color:"[theme:neutralLight, default: #edebe9]"}.a_a_eb846f79 .b_a_eb846f79:focus{outline:none}.a_a_eb846f79 .e_a_eb846f79{background-color:"[theme:warningBackground, default: #fff4ce]";color:"[theme:neutralPrimary, default: #323130]"}.a_a_eb846f79 .e_a_eb846f79.c_a_eb846f79{background-color:"[theme:neutralLighter, default: #f3f2f1]"}.a_a_eb846f79 .f_a_eb846f79{background-color:"[theme:white, default: #ffffff]";box-shadow:0 3.2px 7.2px 0 rgba(0,0,0,.132),0 .6px 1.8px 0 rgba(0,0,0,.108);box-sizing:border-box;color:"[theme:neutralPrimary, default: #323130]";font-size:12px;overflow:hidden;padding:7px 8px 8px;position:relative;transition:scrollText 1s ease}[dir=ltr] .a_a_eb846f79 .f_a_eb846f79{margin-left:32px}[dir=rtl] .a_a_eb846f79 .f_a_eb846f79{margin-right:32px}@keyframes j_a_eb846f79{0%{height:32px;visibility:hidden;width:0}to{height:auto;visibility:visible;width:calc(100% - 32px)}}.a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79{color:"[theme:blue, default: #0078d4]";font-size:12px;margin:0}[dir=ltr] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79{padding-left:4px}[dir=ltr] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79,[dir=rtl] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79{padding-right:4px}[dir=rtl] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79{padding-left:4px}.a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79:first-of-type{text-transform:capitalize}[dir=ltr] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79:first-of-type{padding-left:4px}[dir=rtl] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79:first-of-type{padding-right:4px}[dir=ltr] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79:last-of-type{padding-right:0}[dir=rtl] .a_a_eb846f79 .f_a_eb846f79 .g_a_eb846f79:last-of-type{padding-left:0}.h_a_eb846f79 .f_a_eb846f79{overflow:hidden;padding:8px 0;width:0}[data-clean-canvas] .i_a_eb846f79{top:35px}',!0);const u="g_a_eb846f79";var f=G(9676);function p(){return f._SPKillSwitch.isActivated("ef03a197-d4cf-43c0-b0c6-ec835222d7e8")}function m(){return f._SPKillSwitch.isActivated("e3427875-0a7d-41dc-b590-3b49c76897ab")}function _(){return f._SPKillSwitch.isActivated("dcc8a067-9d75-4254-8ffb-a5a91569416e")}function h(){return f._SPKillSwitch.isActivated("0a046c73-f393-4b17-b80c-8b589685f7aa")}function b(){return f._SPKillSwitch.isActivated("2bcef8a9-5cf3-46a5-af97-da8fdb5313e3")}const g=function(o){function p(e){var t=o.call(this,e)||this;return t._isFocusIn=!1,t._metadataGetter=new c.RemoteWebFileGetter(t.props.serviceScope),t._handleAltTextVerify=function(e,n){e.stopPropagation(),e.preventDefault(),t.props.onAltTextVerify(n)},t._handleAltTextChange=function(e){t._handleAltTextVerify(e,!0)},t._handleAltTextKeep=function(e){t._handleAltTextVerify(e,!1)},t._handleContainerFocus=function(){t._setAutoCollapse(!1),t._isFocusIn||(t._isFocusIn=!0,t.setState({isFullMessage:!0}))},t._handleContainerBlur=function(e){t._altTextContainer&&!t._altTextContainer.contains(e.nativeEvent.relatedTarget)&&(t._isFocusIn=!1,t._setAutoCollapse(!0))},t._handleIconClick=function(e){t.setState(function(e){var n=!e.isFullMessage;return m()?c.ScreenReaderAlert.read(n?t._getIconButtonAriaLabel(e.altText,e.confidence):l.Ln):s.read(n?t._getIconButtonAriaLabel(e.altText,e.confidence):l.Ln),{isFullMessage:n}})},t.state={altText:void 0,confidence:void 0,isFullMessage:!0,isMultiline:!1},t._getMetadata(t.props.imageUrl),t}return(0,e.__extends)(p,o),p.prototype.UNSAFE_componentWillReceiveProps=function(e){e.imageUrl!==this.props.imageUrl&&this._getMetadata(e.imageUrl)},p.prototype.render=function(){var e,n,o=this.state,s=o.altText,c=o.isFullMessage,d=o.confidence;if(f._SPKillSwitch.isActivated("514a34de-e6f7-45f7-aa40-25d2f237227e")||!s)return t.createElement(t.Fragment,null);var p=void 0!==d&&d>=.95,m=!p&&t.createElement(i.Link,{className:u,onClick:this._handleAltTextKeep,"aria-label":l.r7},l.JX),_=this.props.pinToRight;return t.createElement("div",{className:(0,a.css)("a_a_eb846f79","i_a_eb846f79",(e={},e.h_a_eb846f79=!c,e)),style:{left:(0,a.getRTL)()||_?void 0:this.props.offset,right:(0,a.getRTL)()?this.props.offset:_?0:void 0},ref:this._resolveRef("_altTextContainer"),onFocus:this._handleContainerFocus,onBlur:this._handleContainerBlur},t.createElement(a.FocusZone,{isCircularNavigation:!0},t.createElement(r.IconButton,{ariaDescription:this._getIconButtonAriaLabel(s,d),className:(0,a.css)("b_a_eb846f79","e_a_eb846f79",(n={},n.c_a_eb846f79=p,n)),iconProps:{iconName:"info"},onMouseDown:this._handleIconClick}),t.createElement("div",{className:"f_a_eb846f79"},t.createElement("span",null,this._getAltTextString(s,d)),!p&&l.vM,t.createElement(i.Link,{className:u,onClick:this._handleAltTextChange,"aria-label":l.mm},l.uY),!p&&l.a,m,!p&&l.i1)))},p.prototype._getAltTextString=function(e,t){var a=void 0!==t&&t>=.95?l.zl:l.PG;return n.StringHelper.format(a,e)},p.prototype._getIconButtonAriaLabel=function(e,t){return n.StringHelper.format(l.PI,this._getAltTextString(e,t),l.X0)},p.prototype._setAutoCollapse=function(e){var t=this;e?this._messageTimer=this._async.setTimeout(function(){t.setState({isFullMessage:!1})},5e3):void 0!==this._messageTimer&&this._async.clearTimeout(this._messageTimer)},p.prototype._getMetadata=function(e){var t=this,a=new d.SPResourcePath(e).domain?e:n.Uri.concatenate(window.location.origin,e);this._metadataGetter.getImageFileDataByUrl(a,!0).then(function(e){e&&e.imageCaption&&t.setState({altText:e.imageCaption.caption,confidence:e.imageCaption.confidence}),t.props.onMetadataReceived(e),t._setAutoCollapse(!0)}).catch(function(e){t.props.onMetadataError(e)})},p}(a.BaseComponent);var v=G(2987),y=G.n(v);o.loadStyles('/*!\n * Cropper.js v1.5.13\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2022-11-20T05:30:43.444Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-ms-user-select:none;user-select:none}.cropper-container img{backface-visibility:hidden;display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}',!0);var S=function(){function t(n,a,i){this._exifOrientation=i,this._cropper=new(y())(n,(0,e.__assign)((0,e.__assign)({},t._defaultOptions),this._convertImageCropOptions(a)))}return Object.defineProperty(t.prototype,"_rotate",{get:function(){switch(this._exifOrientation){default:return 0;case 3:return 180;case 6:return 90;case 8:return-90}},enumerable:!1,configurable:!0}),t.prototype.getImageCropData=function(e){void 0===e&&(e=!0);var t=this._cropper.getData(e);return{x:t.x,y:t.y,width:t.width,height:t.height,fixAspectRatio:this._fixAspectRatio}},t.prototype.setImageCropData=function(e){var t=this._convertImageCropData(e);this._cropper.setData(t)},t.prototype.setAspectRatio=function(e){this._cropper.setAspectRatio(e),this._fixAspectRatio=e>0},t.prototype.zoom=function(e){this._cropper.zoom(e)},t.prototype.dispose=function(){this._cropper.destroy()},t.prototype._convertImageCropData=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,rotate:this._rotate,scaleX:1,scaleY:1}},t.prototype._convertImageCropOptions=function(e){return{aspectRatio:e.aspectRatio,data:this._convertImageCropData(e.data),cropend:e.onCropEnd,cropBoxResizable:e.cropBoxResizable}},t._defaultOptions={autoCropArea:1,cropBoxMovable:!0,dragMode:"none",zoomable:!1,guides:!1,toggleDragModeOnDblclick:!1,viewMode:1},t}(),D=function(){function e(){}return e.createCropper=function(e,t,n){return new S(e,t,n)},e}(),I=G(9146),x=G(4949),C=G(7408),O=2560,w=G(8398),E=G(7976),A=G(5491),L=function(){function n(){}return n.loadImage=function(e,t){return void 0===t&&(t=void 0),new Promise(function(n,a){var i=new Image;i.onload=function(e){n(i)},i.onerror=function(e){a(e)},i.src=e,t&&(i.crossOrigin=t)})},n.readImageRatio=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,n.loadImage(t)];case 1:return[2,(a=e.sent()).naturalWidth/a.naturalHeight]}})})},n.loadThumbnailImage=function(n){return new Promise(function(a,i){var r=document.createElement("div");n.disableBlobRevoke=!0,E.render(t.createElement(A.SPImg,(0,e.__assign)((0,e.__assign)({},n),{onImageLoad:function(e){a(null==e?void 0:e.target),w.unmountComponentAtNode(r)},onImageLoadFailure:function(e,t){"stockImage"===e&&(i(e),w.unmountComponentAtNode(r))},renderedInDetachedDOM:!0})),r)})},n.readThumbnailImageRatio=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,n.loadThumbnailImage(t)];case 1:return[2,(a=e.sent()).naturalWidth/a.naturalHeight]}})})},n}();const k=JSON.parse('{"wA":"","lx":"...","zh":"...","FB":"","QN":"","m7":"","cH":"","cG":" Ctrl+ Shift+","DZ":"","o_":" {2}  {3} {0}  {1}","Vq":"","mw":"","Cb":"","Lu":"()","DF":"","KI":"{0}","V$":"","HM":"","xW":" {0}  {1}%","QS":" {0} ","yl":" {0} ","pY":"","ly":"","x1":"","wi":"","zV":"","Hg":""}');o.loadStyles('.p_c_eb846f79{height:auto;position:relative;text-align:left}.p_c_eb846f79,.p_c_eb846f79.q_c_eb846f79 img{max-height:100%;max-width:100%}.p_c_eb846f79.q_c_eb846f79.r_c_eb846f79{margin:0 auto}.p_c_eb846f79.q_c_eb846f79.r_c_eb846f79 img{box-sizing:border-box;width:100%}.p_c_eb846f79 input{height:.1px;opacity:0;overflow:hidden;position:absolute;width:.1px;z-index:-1}.p_c_eb846f79 .s_c_eb846f79{position:absolute;top:-48px;transition:all .3s ease-out;z-index:1}[dir=ltr] .p_c_eb846f79 .s_c_eb846f79{left:-8px}[dir=rtl] .p_c_eb846f79 .s_c_eb846f79{right:-8px}.p_c_eb846f79 .t_c_eb846f79 svg{height:16px;width:16px}.p_c_eb846f79 .t_c_eb846f79 .themeableSvgPath{fill:"[theme:bodyBackground, default: #ffffff]"}.p_c_eb846f79 .t_c_eb846f79 .u_c_eb846f79{display:block;left:68px;position:absolute;transition:1s;width:34px;z-index:2}.v_c_eb846f79{height:100%;overflow:hidden;text-align:left;width:100%}[dir=ltr] .w_c_eb846f79{margin-right:8px}[dir=rtl] .w_c_eb846f79{margin-left:8px}.x_c_eb846f79{height:100%;text-align:left;width:100%}.x_c_eb846f79::-moz-focus-inner{border:0}.x_c_eb846f79{outline:transparent;position:relative}.ms-Fabric.is-focusVisible .x_c_eb846f79:focus:after,.x_c_eb846f79.ms-Fabric.is-focusVisible:focus:after{background:initial;border:1px solid "[theme:neutralsecondary, default: #605e5c]";border-radius:inherit;content:"";inset:0;opacity:1;pointer-events:none;position:absolute;z-index:auto}.x_c_eb846f79 .y_c_eb846f79{-ms-user-select:none;user-select:none}.x_c_eb846f79.z_c_eb846f79 .y_c_eb846f79{transition:opacity .3s ease}.p_c_eb846f79.q_c_eb846f79{margin:0 auto}.aa_c_eb846f79,.ab_c_eb846f79{z-index:2}.aa_c_eb846f79::-moz-focus-inner,.ab_c_eb846f79::-moz-focus-inner{border:0}.aa_c_eb846f79,.ab_c_eb846f79{outline:transparent;position:relative}.aa_c_eb846f79.ms-Fabric.is-focusVisible:focus:after,.ab_c_eb846f79.ms-Fabric.is-focusVisible:focus:after,.ms-Fabric.is-focusVisible .aa_c_eb846f79:focus:after,.ms-Fabric.is-focusVisible .ab_c_eb846f79:focus:after{background:initial;border:1px solid "[theme:neutralsecondary, default: #605e5c]";border-radius:inherit;content:"";inset:0;opacity:1;pointer-events:none;position:absolute;z-index:auto}.aa_c_eb846f79.y_c_eb846f79,.ab_c_eb846f79.y_c_eb846f79{overflow:visible}.aa_c_eb846f79 img,.ab_c_eb846f79 img{max-width:100%}.ab_c_eb846f79 .cropper-crop-box:focus{outline:none}.ab_c_eb846f79 .cropper-point{background-color:"[theme:bodyBackground, default: #ffffff]";height:12px;opacity:.75;width:12px}.ab_c_eb846f79 .point-se{height:12px!important;width:12px!important}.aa_c_eb846f79 .cropper-line,.aa_c_eb846f79 .cropper-point{display:none}.ac_c_eb846f79{opacity:1!important}.y_c_eb846f79{margin:0 auto;max-width:100%;overflow:hidden;width:100%}.y_c_eb846f79 .ae_c_eb846f79{min-height:100px}.y_c_eb846f79 .ae_c_eb846f79 .af_c_eb846f79{background-color:"[theme:blackTranslucent40, default: rgba(0,0,0,.4)]";padding:10px;position:absolute;text-align:center;top:50%;transform:translate(-50%,-50%)}[dir=ltr] .y_c_eb846f79 .ae_c_eb846f79 .af_c_eb846f79{left:50%}[dir=rtl] .y_c_eb846f79 .ae_c_eb846f79 .af_c_eb846f79{right:50%}.y_c_eb846f79 .ae_c_eb846f79 .af_c_eb846f79 .ag_c_eb846f79{animation:ah_c_eb846f79 2s linear infinite;color:#fff;display:block;font-size:48px;margin:8px 0}@keyframes ah_c_eb846f79{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.y_c_eb846f79 .ai_c_eb846f79{opacity:.5}.y_c_eb846f79 .aj_c_eb846f79{opacity:1}.y_c_eb846f79 .aj_c_eb846f79.ak_c_eb846f79{display:none}.y_c_eb846f79 img{display:block;margin:0 auto;position:relative}.y_c_eb846f79 img:not([src]){display:none}.y_c_eb846f79.al_c_eb846f79 img{margin:0}.am_c_eb846f79{height:100%;width:100%}.am_c_eb846f79 img.an_c_eb846f79{object-fit:fill}.am_c_eb846f79 img.ao_c_eb846f79{object-fit:contain}.am_c_eb846f79 img.ap_c_eb846f79{object-fit:cover}.am_c_eb846f79 img.aq_c_eb846f79{height:auto;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:100%}.am_c_eb846f79 img.ar_c_eb846f79{object-fit:scale-down}.am_c_eb846f79 img.as_c_eb846f79{object-fit:none}.at_c_eb846f79{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.au_c_eb846f79{margin-left:-15px;margin-right:-15px}.av_c_eb846f79{align-items:center;display:flex;flex-direction:column;max-width:300px;padding:10px}.g_c_eb846f79{margin-top:10px}[dir=ltr] .aw_c_eb846f79{float:right}[dir=rtl] .aw_c_eb846f79{float:left}.ax_c_eb846f79{background:transparent!important}.ay_c_eb846f79{text-decoration:underline!important}.ay_c_eb846f79:hover{text-decoration:none!important}.az_c_eb846f79{background-color:"[theme:themeDarker, default: #004578]";height:100%;opacity:.8;pointer-events:none;position:absolute;text-align:center;width:100%;z-index:3}.ba_c_eb846f79{color:"[theme:white, default: #ffffff]";position:absolute;transform:translate(-50%,-50%)}.ba_c_eb846f79.bb_c_eb846f79{font-size:68px;top:calc(50% - 20px)}.ba_c_eb846f79.bc_c_eb846f79{display:inline-block;font-size:18px;top:calc(50% + 20px)}.be_c_eb846f79:hover{cursor:pointer}[data-clean-canvas] .bf_c_eb846f79{top:0}[dir=ltr] [data-clean-canvas] .bf_c_eb846f79{left:8px}[dir=rtl] [data-clean-canvas] .bf_c_eb846f79{right:8px}.bg_c_eb846f79{top:50%}.bh_c_eb846f79{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.bi_c_eb846f79{display:block;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis}',!0);const M="y_c_eb846f79",P="ba_c_eb846f79";var T=G(7051);function U(){return f._SPFlight.isEnabled(1342)}function F(){return 1===f._SPExperiment.getVariantAndLogExposure(90087)||f._SPFlight.isEnabled(1440)}function H(){return 1===f._SPExperiment.getVariantAndLogExposure(90087)||F()&&f._SPFlight.isEnabled(1443)}function R(){return 1===f._SPExperiment.getVariantAndLogExposure(90087)||F()&&f._SPFlight.isEnabled(1562)}function N(){return!f._SPKillSwitch.isActivated("6ead3e03-e978-40de-8d02-3f60e73e9efd")&&f._SPFlight.isEnabled(61279)}function B(){return!(0,T.zw)()&&j()}function j(){return!(0,T.oF)()&&f._SPFlight.isEnabled(61540)}function V(){return!f._SPKillSwitch.isActivated("a7dccc6c-02a8-4a93-8c70-843e69ec243c")&&f._SPFlight.isEnabled(61738)}function z(){return f._SPFlight.isEnabled(60808)||1===f._SPExperiment.getVariantAndLogExposure(90301)}function K(){return f._SPFlight.isEnabled(62320)}const q=function(i){function r(e){var t=i.call(this,e)||this;t._onCropEnd=function(){var e,n=t._cropController.getImageCropData(),a=t._convertCropDataToImageData(n);t.props.onCropComplete(a,!1),null===(e=t._imageCropWrapper)||void 0===e||e.focus()},t._handleClick=function(e){var n=e.target||document.activeElement;(t.props.workingAreaRef&&t.props.workingAreaRef.current||t._imageCropWrapper).contains(n)||t._previewCrop()},t._previewCrop=function(){var e=t._cropController.getImageCropData(),n=t._convertCropDataToImageData(e);t.props.onCropComplete(n,!0)},t._onImageAreaBlur=function(e){if(t.state.isImageLoaded){var n=e.nativeEvent;t._imageCropWrapper.contains(n.relatedTarget||document.activeElement)||t._previewCrop()}},t._handleKeyDown=function(e){if(t.state.isImageLoaded){var n;if(9===e.keyCode&&(e.stopPropagation(),e.preventDefault(),e.currentTarget.isSameNode(e.target)||t._imageCropWrapper.focus()),e.shiftKey)switch(n=t._cropController.getImageCropData(!1),e.keyCode){case 37:n.x+=5,n.width-=10,t._cropKeyPressed=!0;break;case 38:n.y-=5,n.height+=10,t._cropKeyPressed=!0;break;case 39:n.x-=5,n.width+=10,t._cropKeyPressed=!0;break;case 40:n.y+=5,n.height-=10,t._cropKeyPressed=!0}else if(e.ctrlKey)switch(n=t._cropController.getImageCropData(!1),e.keyCode){case 37:n.x-=5,t._cropKeyPressed=!0;break;case 38:n.y-=5,t._cropKeyPressed=!0;break;case 39:n.x+=5,t._cropKeyPressed=!0;break;case 40:n.y+=5,t._cropKeyPressed=!0}t._cropKeyPressed&&(e.stopPropagation(),e.preventDefault(),t._cropController.setImageCropData(n))}},t._handleKeyUp=function(e){if(t.state.isImageLoaded&&t._cropKeyPressed){var a=t._cropController.getImageCropData(),i=t._convertCropDataToImageData(a);t.props.onCropComplete(i,!1),t._cropKeyPressed=!1,m()?c.ScreenReaderAlert.read(n.StringHelper.format(k.o_,a.x,a.y,a.width,a.height),c.ReadingMode.ReadImmediately):s.read(n.StringHelper.format(k.o_,a.x,a.y,a.width,a.height),2)}};var a=e.imageData.cropData&&e.imageData.cropData.fixAspectRatio?e.imageData.cropData.width/e.imageData.cropData.height:NaN;return t.state={showAspectRatioToolbar:!1,isAspectHorizontal:a>1,aspectRatio:e.aspectRatio||a,isFreeCrop:isNaN(a),cropperMessage:void 0,isImageLoaded:!1},document.addEventListener("click",t._handleClick),t}return(0,e.__extends)(r,i),r.getDerivedStateFromProps=function(t,n){return(0,e.__assign)((0,e.__assign)({},n),{aspectRatio:t.aspectRatio,isFreeCrop:Boolean(void 0===t.aspectRatio||isNaN(t.aspectRatio))})},r.prototype.render=function(){var e=(0,a.css)(M,this.state.isFreeCrop?"ab_c_eb846f79":"aa_c_eb846f79");return this.props.imageData.imageUrl?t.createElement("div",{className:e,role:"region",tabIndex:0,ref:this._resolveRef("_imageCropWrapper"),"aria-label":k.cG,onBlur:this._onImageAreaBlur,onKeyDown:this._handleKeyDown,onKeyUp:this._handleKeyUp,"data-automation-id":"imageCropWrapper"},t.createElement("img",{style:{opacity:0},className:(0,a.mergeStyles)({height:this._imageHeight,width:this._imageWidth}),src:this._properlyRotatedImageUrl,ref:this._resolveRef("_image"),"data-sp-originalimgsrc":this.props.imageData.imageUrl,alt:this.props.imageData.altText,onLoad:this._handleImageLoad,onError:this._handleImageError})):void 0},r.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},r.prototype.componentDidUpdate=function(e,t){this.state.aspectRatio!==t.aspectRatio&&this._cropController.setAspectRatio(this.state.aspectRatio)},Object.defineProperty(r.prototype,"_properlyRotatedImageUrl",{get:function(){var e=this.props,t=e.imageData,n=e.serviceScope,a=c.ExtensionHelper.getExtension(new d.SPResourcePath(t.imageUrl))||"",i=void 0!==t.imageNaturalWidth&&t.imageNaturalWidth>O;if(void 0===t.imageNaturalWidth&&(i=!0),i){var r=new x._SPResourcePath(t.imageUrl);return c.DefaultImageHelper.isStockImage(r)?c.DefaultImageHelper.getDefaultImage(r):t.imageUrl}var o=c.ThumbnailUrlGenerator.getThumbnailUrl({absoluteUrl:n.consume(C.PageContext.serviceKey).web.absoluteUrl,fileType:a,spResource:t.imageUrl,siteId:t.siteId,webId:t.webId,uniqueId:t.uniqueId,width:O,callerId:"ImageWebPartEditCrop"});return i?this.props.imageData.imageUrl:o},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_imageWidth",{get:function(){if(this.props.containerWidth&&this.props.imageData.imageNaturalWidth&&this.props.imageData.imageNaturalHeight){if(this.props.isFullWidth)return"".concat(this.props.containerWidth,"px");var e=Math.min(this.props.containerWidth/this.props.imageData.imageNaturalWidth,1);return Math.round(e*this.props.imageData.imageNaturalWidth)+"px"}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_imageHeight",{get:function(){if(this.props.containerWidth&&this.props.imageData.imageNaturalWidth&&this.props.imageData.imageNaturalHeight){if(this.props.isFullWidth){var e=this.props.imageData.imageNaturalHeight*this.props.containerWidth/this.props.imageData.imageNaturalWidth;return"".concat(e,"px")}var t=Math.min(this.props.containerWidth/this.props.imageData.imageNaturalWidth,1);return Math.round(t*this.props.imageData.imageNaturalHeight)+"px"}},enumerable:!1,configurable:!0}),r.prototype._handleImageLoad=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,n,a,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,I.convertDataUriToArrayBuffer)(this._image.src)];case 1:return t=e.sent(),n=this,[4,(0,I.calculateExifOrientation)(t)];case 2:return n._exifOrientation=e.sent(),this.setState({isImageLoaded:!0}),a=this._imageToCropperData(this.props.imageData),i={data:a,aspectRatio:this.state.aspectRatio,cropBoxResizable:!0,onCropEnd:this._onCropEnd},this.props.onCropperImageLoad(),this._setCropperOptions(i),this._imageCropWrapper.focus(),this._imageCropWrapper.style.opacity="1",this._image.removeAttribute("width"),this._image.removeAttribute("height"),[2]}})})},r.prototype._handleImageError=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return t=this.props.imageData,n=this._image,[4,L.loadThumbnailImage({imageData:{imageUrl:t.imageUrl,siteId:t.siteId,webId:t.webId,listId:t.listId,uniqueId:t.uniqueId},serviceScope:this.props.serviceScope,thumbnailWidth:O,callerId:"ImageWebPartEditCrop",getDefaultImage:c.DefaultImageHelper.getDefaultImage})];case 1:return n.src=e.sent().src,[2]}})})},r.prototype._setCropperOptions=function(e){this._cropController=D.createCropper(this._image,e,this._exifOrientation)},r.prototype._convertCropDataToImageData=function(t){var n=(0,e.__assign)({},this.props.imageData);return n.imageNaturalWidth&&n.imageNaturalHeight||(n.imageNaturalWidth=this._image.naturalWidth,n.imageNaturalHeight=this._image.naturalHeight),n.cropData=t,n.cropData.fixAspectRatio=B()?void 0:!this.state.isFreeCrop,n},r.prototype._imageToCropperData=function(t){return(0,e.__assign)({},t.cropData)},(0,e.__decorate)([a.autobind],r.prototype,"_handleImageLoad",null),(0,e.__decorate)([a.autobind],r.prototype,"_handleImageError",null),r}(a.BaseComponent);var Q=G(8054);const Y=(0,Q.U)("Options20Regular","20",["M14.95 5a2.5 2.5 0 0 0-4.9 0H2.5a.5.5 0 0 0 0 1h7.55a2.5 2.5 0 0 0 4.9 0h2.55a.5.5 0 0 0 0-1h-2.55ZM12.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm-2.55 7a2.5 2.5 0 0 0-4.9 0H2.5a.5.5 0 0 0 0 1h2.55a2.5 2.5 0 0 0 4.9 0h7.55a.5.5 0 0 0 0-1H9.95ZM7.5 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"]);var J=G(8327),X=G(2207),Z=G(529),$=G(4014),ee=G(3325),te=G.n(ee);const ne=(0,Q.U)("ReOrderDotsVerticalFilled","1em",["M6.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM8 14.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM13.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM15 9.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM13.5 16a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"]);var ae=G(2193),ie=G(9046);o.loadStyles('.k_b_eb846f79{background-color:"[theme:neutralLighterAlt, default: #faf9f8]";border-radius:50px;border-style:none;color:"[theme:neutralPrimary, default: #323130]";height:32px;position:absolute;top:-16px;width:32px;z-index:1}.k_b_eb846f79:hover{background-color:"[theme:neutralLighter, default: #f3f2f1]";color:"[theme:themePrimary, default: #0078d4]";cursor:pointer}.l_b_eb846f79{font-size:16px;font-weight:600;padding-top:3px}.m_b_eb846f79{background-color:transparent;border-style:none;cursor:move;padding-left:0;padding-right:0;position:absolute;width:auto;z-index:1}.n_b_eb846f79 .m_b_eb846f79{opacity:0}.n_b_eb846f79:focus-within .m_b_eb846f79{opacity:1}.n_b_eb846f79.o_b_eb846f79:hover .m_b_eb846f79{opacity:1}',!0);const re="l_b_eb846f79",oe="n_b_eb846f79";var se=G(111);function ce(n){var i=n.topBound,r=n.rightBound,o=n.overlayTextStyles,s=n.dragHandleOffset,c=n.initialFontSize,d=n.onChangeStyle,l=n.children,u=.75*c,p=t.useState({x:0,y:0}),m=p[0],_=p[1],h=function(t){_(t);var n=0,a=0;if(r&&(n=t.x/r),i&&(a=t.y/i),d){var s=(0,e.__assign)((0,e.__assign)({},o),{position:{offsetX:n,offsetY:a}});d(s)}};t.useLayoutEffect(function(){var e=o.position?{x:o.position.offsetX*r,y:o.position.offsetY*i}:{x:0,y:0};(0,T.nq)()?h(e):e.x===m.x&&e.y===m.y||h(e)},[r,i,(0,T.nq)()?null:o.position]);var b={top:i,right:r,bottom:0,left:0};return t.createElement(te(),{handle:"button",bounds:b,onStop:function(e,t){m.x===t.x&&m.y===t.y||(h({x:t.x,y:t.y}),X._EngagementLogger.logEvent("ImageWebPart.OverlayText.ChangePosition"))},onStart:1===f._SPExperiment.getVariantAndLogExposure(90309)||f._SPFlight.isEnabled(1185)?function(e,t){e.stopPropagation()}:void 0,position:m},t.createElement("div",{className:(0,T.YC)()?oe:(0,a.mergeStyles)(oe,"o_b_eb846f79")},t.createElement("button",{title:(0,T.YC)()?void 0:se.ar,"aria-label":(0,T.YC)()?se.ar:void 0,onKeyDown:function(e){if("ArrowLeft"===e.code||"ArrowRight"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code){e.preventDefault();var t=0,n=0;switch(e.code){case"ArrowLeft":m.x>0&&(t=-5);break;case"ArrowRight":m.x<r&&(t=5);break;case"ArrowUp":m.y>i&&(n=-5);break;case"ArrowDown":m.y<0&&(n=5)}var a=m.x,o=m.y;h({x:a+t,y:o+n})}},onKeyUp:function(e){"ArrowLeft"!==e.code&&"ArrowRight"!==e.code&&"ArrowUp"!==e.code&&"ArrowDown"!==e.code||(e.preventDefault(),ae.ScreenReader.alert("TextOverlayPosition",f.Text.format(se.$n,m.x.toFixed(0),m.y.toFixed(0))))},style:{height:u,top:(s-u)/2,color:H()?(0,ie.mU)(o.textColor):"#fff"},className:"m_b_eb846f79"},t.createElement(ne,{fontSize:u})),l))}var de=G(1048),le=G(8491),ue=G(4779),fe=t.lazy(function(){return Promise.all([G.e(649),G.e(791)]).then(G.bind(G,2314)).then(function(e){return{default:e.OverlayTextEditMenu}})});function pe(n){return t.createElement(t.Suspense,{fallback:t.createElement("div",{className:le.A.spinnerRoot},t.createElement(ue.Spinner,{size:a.SpinnerSize.large,className:le.A.spinner}))},t.createElement(fe,(0,e.__assign)({},n)))}function me(e){var n=e.target,i=e.overlayTextStyles,r=e.initialFontSize,o=e.enableAdvancedOverlayControls,s=e.onDismiss,c=e.onChangeStyle;return t.createElement("div",{"data-automation-id":"image-web-part-text-overlay-menu"},t.createElement(de.FocusTrapCallout,{target:n,directionalHint:a.DirectionalHint.rightCenter,isBeakVisible:!0,onDismiss:s,focusTrapProps:{isClickableOutsideFocusTrap:!0},styles:_e(!!o),ariaLabel:se.s5},t.createElement(pe,{initialFontSize:r,onDismiss:s,overlayTextStyles:i,enableAdvancedOverlayControls:o,onChangeStyle:c})))}function _e(e){return{root:e?le.A.root:le.A.rootWithSimplifiedControls,container:{},calloutMain:le.A.main,beakCurtain:{},beak:le.A.beak}}var he=G(2215),be={16:"fontSize16",20:"fontSize20",24:"fontSize24",28:"fontSize28",32:"fontSize32"},ge=t.createContext((0,he.makeStyles)({})),ve=(0,he.makeStyles)({root:{display:"contents"}});function ye(n){var a=n.children,i=n.v8Styles,r=n.hostWidth,o=t.useContext(ge)().overlayTextEdit,s=(null==i?void 0:i.fontSize)?be[null==i?void 0:i.fontSize]:void 0;s||(s=r<=1024?"fontSizeSmall":"fontSizeLarge");var c=ve();return t.createElement("div",(0,e.__assign)({className:(0,he.mergeClasses)(s,o,c.root,!!(null==i?void 0:i.isBold)&&"boldText",!!(null==i?void 0:i.isItalic)&&"italicText")},(0,T.P)()?{}:{"data-is-visible":!0}),a)}var Se,De=function(n){function i(e){var r=n.call(this,e)||this;return r._overlayTextWrapperRef=t.createRef(),r._overlayTextWrapperMutableRef=t.createRef(),r._editButtonRef=t.createRef(),r._handleClick=function(e){e.stopPropagation()},r._renderEditButton=function(){var e=r.props,n=e.fontSize,o=e.padding,s=e.overlayTextStyles,c=e.onChangeStyle,d=e.enableAdvancedOverlayControls,l=r.state.textFieldWidth,u=(0,a.getRTL)(),p=i._isSafari?l-16+o.right:l-16,m=u?{right:"".concat(p,"px")}:{left:"".concat(p,"px")};return t.createElement("div",null,t.createElement("button",{"aria-haspopup":!0,className:"k_b_eb846f79","aria-label":se.wL,onClick:r._handleEditButtonOnClick,ref:r._editButtonRef,style:m},f._SPKillSwitch.isActivated("4712fe5a-9c49-4267-a228-876aef2e8ce2")||!z()||f._SPKillSwitch.isActivated("a3f45048-0db5-4b7c-9a9a-e3183d216c4d")?t.createElement(a.FontIcon,{className:re,iconName:"Edit"}):t.createElement(Y,{className:re})),r.state.isContextualMenuVisible&&s&&c&&t.createElement(me,{target:r._editButtonRef,initialFontSize:n,onDismiss:r._handleDismiss,overlayTextStyles:s,enableAdvancedOverlayControls:d,onChangeStyle:c}))},r._handleTextChanged=function(e,t){void 0===t&&(t="");var n=r.props,a=n.maximumCharacters,i=n.onChangeText;if(a){t.length>a&&(t=t.substr(0,a));var o=/\n/g;(t.match(o)||[]).length>=a&&(t=t.replace(o," "))}i&&i(t)},r._handleFocus=function(){r._initialValue=r.props.text},r._handleBlur=function(){var e;r._initialValue!==r.props.text&&r.props.qosPrefix&&(e=0===r.props.text.length?"Clear":0===r._initialValue.length?"Add":"Edit",X._EngagementLogger.logEventWithLogEntry(new X._LogEntry(r.props.qosPrefix,"OverlayText",X._LogType.Event,{action:e,length:r.props.text.length.toString()})))},r._handleEditButtonOnClick=function(){r.setState({isContextualMenuVisible:!0})},r._handleDismiss=function(){r.setState({isContextualMenuVisible:!1})},r.state={textFieldWidth:0,textFieldHeight:0,isContextualMenuVisible:!1},r}return(0,e.__extends)(i,n),i.prototype.render=function(){var e=this.props,n=e.hostWidth,i=e.hostHeight,r=e.alignment,o=e.fontSize,s=e.padding,c=e.enableAdvancedEditing,d=e.overlayTextStyles,l=e.onChangeStyle,u=e.enableDragging,f=e.text,p=e.supportColorCustomizations,m=n-s.left-s.right,_=1.5*o,h=_+s.top+s.bottom;if(m<=0)return!1;var b=H()&&(null==d?void 0:d.textColor)?(0,ie.mU)(d.textColor):"#fff",g={fontSize:H()&&(null==d?void 0:d.fontSize)?d.fontSize:o,padding:"".concat(s.top,"px ").concat(s.right,"px ").concat(s.bottom,"px ").concat(s.left,"px"),maxWidth:n,fontWeight:H()&&(null==d?void 0:d.isBold)?"bold":"600",color:p?b:void 0,lineHeight:_,minHeight:h,fontStyle:H()&&(null==d?void 0:d.isItalic)?"italic":void 0},v=(0,a.mergeStyleSets)({overlayTextContainer:{display:"flex",justifyContent:"Center"===r?"center":"Left"===r?"unset":"flex-end"}}),y=0,S=0;return R()&&i&&u&&(y=-1*(i-this.state.textFieldHeight),S=n-this.state.textFieldWidth),R()&&c&&d&&l&&u?t.createElement(ce,{rightBound:S,topBound:y,overlayTextStyles:d,dragHandleOffset:this.state.textFieldHeight,initialFontSize:o,onChangeStyle:l},t.createElement("div",{className:v.overlayTextContainer},this._renderEditModeView(f,g))):t.createElement("div",{className:v.overlayTextContainer},this._renderEditModeView(f,g))},i.prototype.componentDidUpdate=function(e,t){(!(0,Z.isEqual)(e,this.props)||!(0,Z.isEqual)(t,this.state))&&this._updateTextFieldSizeBasedOnDisplayWidth()},i.prototype.componentDidMount=function(){this._updateTextFieldSizeBasedOnDisplayWidth()},Object.defineProperty(i.prototype,"_isMultiline",{get:function(){return"SquareHeight"===this.props.heightOption||"NoLimit"===this.props.heightOption},enumerable:!1,configurable:!0}),i.prototype._updateTextFieldSizeBasedOnDisplayWidth=function(){var e=this;requestAnimationFrame(function(){var t=R()?e._overlayTextWrapperMutableRef:e._overlayTextWrapperRef,n=t.current?t.current.scrollWidth:0,a=t.current?e._textFieldHeight(t.current):0;n===e.state.textFieldWidth&&a===e.state.textFieldHeight||(e.setState({textFieldWidth:n,textFieldHeight:a}),e.props.onChangeSize&&e.props.onChangeSize(n,a))})},i.prototype._textFieldHeight=function(e){if(e){var t=1.5*this.props.fontSize;return t*((e.scrollHeight-this.props.padding.top-this.props.padding.bottom)/t)+this.props.padding.top+this.props.padding.bottom}return 0},i.prototype._renderEditModeView=function(n,r){var o=this.props,s=o.hostWidth,c=o.placeholder,d=o.fontSize,l=o.padding,u=o.overlayTextStyles,f=o.supportColorCustomizations,p=o.positionTextOverlayAboveImage,m=this.state,_=m.textFieldWidth,h=m.textFieldHeight,b=H()&&(null==u?void 0:u.textBoxColor)?(0,ie.d5)((0,ie.mU)(u.textBoxColor),u.textBoxOpacity):"rgba(0,0,0,0.54)",g=H()&&(null==u?void 0:u.textColor)?(0,ie.mU)(u.textColor):"#fff",v=(0,a.mergeStyleSets)({textField:{width:i._isIE||i._isSafari?_+2+l.right:_+2,maxWidth:s,height:h,selectors:{"& div":{backgroundColor:"transparent"},"& .fui-Textarea, .fui-Input":(0,e.__assign)({},(0,T.aF)()?{}:{backgroundColor:"transparent"}),"input[type=text], textarea":(0,e.__assign)((0,e.__assign)({margin:"0 auto",backgroundColor:f?b:void 0,height:h,overflow:"hidden",borderRadius:"4px"},r),N()&&r.lineHeight?{lineHeight:"".concat(r.lineHeight,"px !important")}:{}),"input[type=text]::placeholder, textarea::placeholder":(0,e.__assign)({fontSize:H()&&(null==u?void 0:u.fontSize)?u.fontSize:d,fontWeight:H()&&(null==u?void 0:u.isBold)?"bold":"600",color:f?g:void 0,fontStyle:H()&&(null==u?void 0:u.isItalic)?"italic":void 0},N()&&r.lineHeight?{lineHeight:"".concat(r.lineHeight,"px !important")}:{})}}}),y=0!==_&&t.createElement(J.TextField,{borderless:!0,multiline:this._isMultiline,resizable:!1,ariaLabel:c,className:v.textField,styles:p?{fieldGroup:{minHeight:"auto"}}:void 0,placeholder:c,value:n,onChange:this._handleTextChanged,onFocus:this._handleFocus,onBlur:this._handleBlur,onClick:this._handleClick,"data-automation-id":"image-overlay-text",id:N()?"imageOverlayTextEdit":void 0}),S=N()?t.createElement(ye,{v8Styles:u,hostWidth:s},y):y;return t.createElement(t.Fragment,null,this._renderViewModeView(n||c,r,!1),S,H()&&this.props.enableAdvancedEditing&&this._renderEditButton())},i.prototype._renderViewModeView=function(n,r,o){var s=this;void 0===o&&(o=!0);var c,d=this.props,l=d.heightOption,u=d.padding,f=d.overlayTextStyles,p=d.hostWidth,m=this.state.textFieldWidth,_=r.lineHeight,h=1;if(0!==_&&"SquareHeight"===l){var b=r.minHeight;m>b&&(b=m),h=Math.floor((b-u.top-u.bottom)/_),c=(0,$.truncateText)(h,_)}else"NoLimit"===l&&(h=-1);"\n"===n.slice(-1)&&(n+=" ");var g=(0,a.mergeStyleSets)({overlayTextWrapper:(0,e.__assign)({backgroundColor:H()&&(null==f?void 0:f.textBoxColor)?(0,ie.d5)((0,ie.mU)(f.textBoxColor),f.textBoxOpacity):"rgba(0,0,0,0.54)",whiteSpace:this._isMultiline?"pre-wrap":"pre",wordWrap:i._isIE&&this._isMultiline?"break-word":void 0,overflow:i._isIE&&this._isMultiline?"hidden":void 0,wordBreak:this._isMultiline?"break-word":"unset",zIndex:o?1:0,position:o?"unset":"absolute",opacity:o?1:0,boxSizing:"border-box",borderRadius:"4px"},r),overlayText:c}),v=(0,e.__assign)((0,e.__assign)({},(0,T.JI)()?{}:{fontStyle:r.fontStyle}),{fontSize:r.fontSize,fontWeight:r.fontWeight,lineHeight:"".concat(r.lineHeight,"px"),color:r.color}),y=t.createElement($.LessText,{className:"",text:n,lines:h,style:v,autoShowTitle:!1,id:(0,T.JI)()?void 0:"imageOverlayTextEdit"});return(0,T.JI)()||(y=t.createElement(ye,{v8Styles:f,hostWidth:p},y)),t.createElement("div",{className:g.overlayTextWrapper,ref:R()?function(e){s._overlayTextWrapperMutableRef.current=e,s.props.elementRef&&(s.props.elementRef.current=e)}:this._overlayTextWrapperRef,"data-automation-id":"overlay-text-wrapper"},y)},i._browser=f._BrowserDetection.getBrowserInformation().browser,i._isIE=i._browser===f._Browser.IE,i._isSafari=i._browser===f._Browser.Safari,i}(t.Component);function Ie(e,n,a){void 0===a&&(a=!0);var i=t.useCallback(function(t){var a=t.target||document.activeElement;e.some(function(e){var t;return!!(null===(t=e.current)||void 0===t?void 0:t.contains(a))})||n()},[n,e]);t.useEffect(function(){return a&&document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[a,i])}!function(e){e.None="None",e.TopLeft="TopLeft",e.TopRight="TopRight",e.BottomLeft="BottomLeft",e.BottomRight="BottomRight"}(Se||(Se={}));var xe=(0,a.memoizeFunction)(function(t,n){var i=t?"nesw-resize":"nwse-resize",r=t?"nwse-resize":"nesw-resize",o=(0,a.getTheme)(),s={height:"12px",width:"12px",border:"1px solid ".concat(o.palette.themePrimary),background:o.palette.white,position:"absolute",borderRadius:"20%"},c=n?"0":"-6px",d=(0,e.__assign)((0,e.__assign)({},s),{top:c,left:c,cursor:i}),l=(0,e.__assign)((0,e.__assign)({},s),{top:c,right:c,cursor:r}),u=(0,e.__assign)((0,e.__assign)({},s),{bottom:c,left:c,cursor:r}),f=(0,e.__assign)((0,e.__assign)({},s),{bottom:c,right:c,cursor:i});return(0,a.mergeStyleSets)({resizeController:{position:"relative",width:0,height:0,margin:"auto",outline:"none",zIndex:n?"1":void 0},resizeButtonTopLeft:t?l:d,resizeButtonTopRight:t?d:l,resizeButtonBottomLeft:t?f:u,resizeButtonBottomRight:t?u:f})}),Ce=(0,a.mergeStyles)({selectors:{"body *":{cursor:"nwse-resize !important"}}}),Oe=(0,a.mergeStyles)({selectors:{"body *":{cursor:"nesw-resize !important"}}});function we(e){var n=e.alignment,i=e.isFullWidth,r=e.maximumWidth,o=e.initialHeight,d=e.initialWidth,l=e.onResize,u=e.onResizeComplete,p=e.resizeBorderOffsets,_=Math.min(r,d),h=t.useState(_),b=h[0],g=h[1],v=t.useState(Se.None),y=v[0],S=v[1],D=t.useState({x:0,y:0,resizeDesiredWidth:_}),I=D[0],x=D[1];t.useEffect(function(){m()?c.ScreenReaderAlert.read(k.HM,c.ReadingMode.ReadImmediately):s.read(k.HM,2)},[]);var C=t.useRef(null),O=t.useRef((0,Z.debounce)(function(e,t){m()?c.ScreenReaderAlert.read(f.Text.format(k.xW,e,Math.round(100*t)),c.ReadingMode.ReadImmediately):s.read(f.Text.format(k.xW,e,Math.round(100*t)),2)},500)),w=function(e){O.current(b,b/r),l({width:e,height:o/d*e})};Ie([C],function(){u({width:b,height:o/d*b})});var E=b,A=o/d*b,L=t.useRef(),M=t.useRef();t.useEffect(function(){return L.current=(0,Z.throttle)(function(e){return M.current&&M.current(e)},16),function(){var e;null===(e=L.current)||void 0===e||e.cancel(),L.current=void 0,document.body.classList.remove(Oe,Ce)}},[]),t.useEffect(function(){M.current=function(e){if(y!==Se.None){var t=E/A,a=e.pageX-I.x,i=e.pageY-I.y,o="Center"===n?2:1,s=!(y===Se.TopRight&&a<=0&&i>=0||y===Se.TopLeft&&a>=0&&i>=0||y===Se.BottomLeft&&a>=0&&i<=0||y===Se.BottomRight&&a<=0&&i<=0),c=I.resizeDesiredWidth+(s?1:-1)*Math.abs(a)*o,d=c/t,l=void 0;d>=1&&c>=1&&c<=r?l=c:d<1||c<1?l=t>1?1*t:1:c>r&&(l=r),g(l),w(l),e.stopPropagation()}};var e=function(e){S(Se.None),document.body.classList.remove(Oe,Ce)};return L.current&&window.addEventListener("mousemove",L.current,!0),window.addEventListener("mouseup",e),function(){L.current&&window.removeEventListener("mousemove",L.current),window.removeEventListener("mouseup",e),M.current=void 0}}),t.useEffect(function(){var e=function(e){if(!("ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.shiftKey)){var t=0;switch(e.keyCode){case a.KeyCodes.left:t=-1;break;case a.KeyCodes.right:t=1}var n=b+t,i=n*o/d,l=void 0;if(i>=1&&n>=1&&n<=r)l=n;else if(i<1||n<1){m()?c.ScreenReaderAlert.read(f.Text.format(k.QS,1),c.ReadingMode.ReadImmediately):s.read(f.Text.format(k.QS,1),2);var u=E/A;l=u>1?1*u:1}else n>r&&(m()?c.ScreenReaderAlert.read(f.Text.format(k.yl,r),c.ReadingMode.ReadImmediately):s.read(f.Text.format(k.yl,r),2),l=r);g(l),w(l)}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}});var P={top:-((null==p?void 0:p.top)?A+(null==p?void 0:p.top):A),bottom:(null==p?void 0:p.bottom)?A+(null==p?void 0:p.bottom):A,left:-((null==p?void 0:p.left)?(E+(null==p?void 0:p.left))/2:E/2),right:(null==p?void 0:p.right)?(E+(null==p?void 0:p.right))/2:E/2},T=(0,a.mergeStyles)({height:A,width:E,border:"1px solid ".concat((0,a.getTheme)().palette.themePrimary),position:"absolute",top:"".concat(P.top,"px"),left:"".concat(P.left,"px"),boxSizing:"border-box"});function U(e){return function(t){switch(x({x:t.pageX,y:t.pageY,resizeDesiredWidth:b}),S(e),e){case Se.BottomRight:case Se.TopLeft:document.body.classList.add(Ce);break;case Se.BottomLeft:case Se.TopRight:document.body.classList.add(Oe)}}}var F=xe((0,a.getRTL)(),i);return t.createElement("div",{className:F.resizeController,ref:C},t.createElement("div",{className:T},t.createElement("div",{className:F.resizeButtonTopLeft,"data-automation-id":"ResizeControllerTopLeftButton",role:"presentation",onMouseDown:U(Se.TopLeft)}),t.createElement("div",{className:F.resizeButtonTopRight,"data-automation-id":"ResizeControllerTopRightButton",role:"presentation",onMouseDown:U(Se.TopRight)}),t.createElement("div",{className:F.resizeButtonBottomLeft,"data-automation-id":"ResizeControllerBottomLeftButton",role:"presentation",onMouseDown:U(Se.BottomLeft)}),t.createElement("div",{className:F.resizeButtonBottomRight,"data-automation-id":"ResizeControllerBottomRightButton",role:"presentation",onMouseDown:U(Se.BottomRight)})))}var Ee,Ae={None:"None",Crop:"Crop",CropAspectRatio:"CropAspectRatio",Resize:"Resize",AdvancedEditor:"AdvancedEditor",Shape:"Shape"};!function(e){e.Freeform="Freeform",e.Square="1:1",e.Aspect23="2:3",e.Aspect32="3:2",e.Aspect169="16:9",e.Aspect916="9:16",e.Aspect43="4:3",e.Aspect34="3:4"}(Ee||(Ee={}));var Le=t.createElement("div",{className:"az_c_eb846f79"},t.createElement(a.Icon,{className:(0,a.css)(P,"bb_c_eb846f79"),iconName:"Photo2"}),t.createElement("p",{className:(0,a.css)(P,"bc_c_eb846f79")},k.pY)),ke=G(5952);function Me(e,t){return{errorModuleName:e,logFailure:t.consume(ke._EditModeCustomerPromiseHandler.serviceKey).logFailure,veto:"Page Edit Asset Handling Failure"}}function Pe(e){return"CanvasWebPartHost.Amplify.EmailEndpoint"===e}function Te(e){return"CanvasWebPartHost.Amplify.TeamsEndpoint"===e}function Ue(e){return"CanvasWebPartHost.Amplify.EngageEndpoint"===e}function Fe(e){return Te(e)||Ue(e)}function He(e){return Pe(e)||Te(e)||Ue(e)}function Re(e,t){var n=Date.now().toString(),a=c.ExtensionHelper.getExtension(e);return e.replace(RegExp(".".concat(a),"i"),"_".concat(n,".").concat(t&&t!==a?t:a))}function Ne(e,t,n,a){void 0===t&&(t=!1);var i=new RegExp("^(?:[a-z]+:)?//","i"),r=e.replace(/\/$/,""),o="";if(!(o=i.test(r)?new URL(r).pathname.split("/").pop():r.split("/").pop()))throw new Error("Could not parse file name from url: ".concat(e));var s=c.ExtensionHelper.getExtension(o),d=n?"-".concat(n):"";return"".concat(I.SPFileHandler.replaceSpecialCharacters(t?Re(o,a):a&&a!==s?o.replace(RegExp("\\.".concat(s,"$"),"i"),"".concat(d,".").concat(a)):o))}function Be(e){return e?Ve(e)?c.ImageSourceType.HubbleStockURI:c.ImageSourceType.sharepointURI:c.ImageSourceType.none}function je(e,t,n,a){return!e||p()||B()?{}:{croppedWidth:t,croppedHeight:n,croppedDisplayWidth:null==a?void 0:a.croppedDisplaySize.width,croppedDisplayHeight:null==a?void 0:a.croppedDisplaySize.height}}function Ve(e){return x._ThumbnailUrlGenerator.getThumbnailProvider(e)===x._ThumbnailProviderType.HubbleStock}function ze(e){return He(e)}function Ge(e){return!He(e)}function Ke(e){return!Fe(e)}function We(e){return!Fe(e)}function qe(e){return Te(e)}function Qe(e){return Fe(e)}function Ye(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,a,i,r,o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return(n=f._BrowserDetection.getBrowserInformation()).browser===f._Browser.Firefox||(n.browser===f._Browser.Chrome||n.browser===f._Browser.EdgeChromium)&&n.browserVersion&&n.browserVersion.greaterThan(f.Version.parse("81.0.0.0"))?[2,Promise.resolve(!1)]:[3,1];case 1:a=new X._QosMonitor("ImageWebpart.GetImageRotation"),e.label=2;case 2:return e.trys.push([2,5,,6]),[4,(0,I.convertDataUriToArrayBuffer)(t.src)];case 3:return i=e.sent(),[4,(0,I.calculateExifOrientation)(i)];case 4:return r=e.sent(),a.writeSuccess(),[2,Boolean(r&&-1!==I.rotatedExifOrientation.indexOf(r))];case 5:return o=e.sent(),a.writeUnexpectedFailure("Unexpected",o),[2,!1];case 6:return[2]}})})}var Je=t.createContext({});function Xe(n){var i,r,o,s,c,d=t.useRef(),l=t.useContext(Je).hostType;n.hostWidth<=1024?(s=20,o=16,c={top:8,bottom:8,left:16,right:16}):(s=28,o=32,c={top:18,bottom:18,left:24,right:24}),Ke(l)||(o=0,c=(0,e.__assign)((0,e.__assign)({},c),{left:0}));var u=function(e){return Pe(e)||Te(e)}((null===(r=null===(i=n.webPartContext)||void 0===i?void 0:i.host)||void 0===r?void 0:r.hostType)||l)?(0,a.mergeStyles)({margin:o,marginLeft:0,maxWidth:"100%",width:"100%",zIndex:1}):(0,a.mergeStyles)({margin:o,position:"absolute",bottom:0,maxWidth:"100%",width:"100%",left:n.offset,zIndex:1}),p=(0,a.mergeStyles)({margin:o,position:"absolute",bottom:0,maxWidth:"100%",width:"100%",left:n.offset,zIndex:1},n.styles);return t.createElement("div",{className:(0,T.zg)()?u:p,"data-automation-id":"image-webpart-text-overlay"},t.createElement(De,{text:n.text||"",hostWidth:n.hostWidth-2*o,hostHeight:n.hostHeight?n.hostHeight-2*o:void 0,onChangeText:n.onChangeText,onChangeStyle:n.onChangeStyle,overlayTextStyles:n.overlayTextStyles,placeholder:f.Text.format(k.KI,48),heightOption:"NoLimit",alignment:"Left",fontSize:s,padding:c,maximumCharacters:48,qosPrefix:n.qosPrefix,key:n.hostWidth-2*o,enableAdvancedEditing:F(),enableAdvancedOverlayControls:Ke(l),supportColorCustomizations:We(l),positionTextOverlayAboveImage:ze(l),enableDragging:n.enableDragging,elementRef:d}))}var Ze,$e=G(7331),et=G(1374),tt=function(e){var t=e.variantTheme;return t?{root:{color:t.semanticColors.bodyText+" !important",selectors:{textarea:{color:t.semanticColors.bodyText},"textarea::placeholder":{color:t.semanticColors.bodySubtext}}}}:{root:void 0}};!function(e){e[e.Documents=1]="Documents",e[e.Images=2]="Images",e[e.Pages=3]="Pages",e[e.Videos=4]="Videos",e[e.Audios=5]="Audios",e[e.Models=6]="Models",e[e.BasicDocuments=7]="BasicDocuments",e[e.Transcripts=8]="Transcripts",e[e.VideosWithWebm=9]="VideosWithWebm",e[e.BackgroundImages=10]="BackgroundImages"}(Ze||(Ze={}));var nt=G(254),at=G(1621),it=G(1879),rt=G(1241),ot=G(4967),st=G(4527),ct="ImageWebPartEdit",dt={cropper:ot.AdvancedCropper,resizer:we,shape:nt.ImageShapesDeprecated,qosPrefix:ct},lt={cropper:ot.AdvancedCropper,resizer:we,shape:nt.ImageShapesDeprecated,shapeEdit:st.ImageShapesEditRef,qosPrefix:ct},ut=V()?t.createContext(lt):t.createContext(dt),ft=new Map([[16/9,"16:9"],[4/3,"4:3"],[2/3,"2:3"],[1.5,"3:2"],[1,"1:1"],[9/16,"9:16"],[0,"Freeform"],[void 0,"Freeform"]]),pt="ImageWebPartEdit";function mt(e){return"RTEInlineImageCK5Edit"!==e}var _t=t.forwardRef(function(n,i){var r,o,d,l,u,p,_,b=this,g=n.containerWidth,v=n.currentMode,y=n.imageData,S=n.isFullWidth,D=n.isFlexibleControl,I=n.onEditComplete,C=n.onRenderComplete,O=n.onEditModeChange,w=n.onImageLoad,E=n.onImageLoadFailed,P=n.serviceScope,U=n.callerId,F=n.isOverlayTextEnabled,R=n.updateTextOverlayDisplay,N=n.saveAdvancedImageEdit,z=n.saveShapeEdit,G=n.cacheBusterEntry,K=t.useState(void 0),W=K[0],q=K[1],Q=t.useState(y),Y=Q[0],J=Q[1],Z=t.useState(void 0),$=Z[0],ee=Z[1],te=t.useState(!1),ne=te[0],ae=te[1],ie=t.useContext(Je).hostType,re=B()&&(null==G?void 0:G.imageSizeData)?(0,A.getDisplaySizeFromAdvancedImageEditorSizeData)(G.imageSizeData,g,D):(0,A.getDisplaySizeFromImageData)(Y,g,D),oe=re.displayHeight,se=re.displayWidth,ce=t.useState({height:oe,width:se}),de=ce[0],le=ce[1],ue=t.useRef(null),fe=t.useRef(null),pe=t.useRef(null),me=t.useRef(null),_e=t.useRef(null),he=t.useRef(null),be=t.useRef(!1),ge="ImageEditorNext",ve=!S&&!function(e){return Fe(e)}(ie),ye=t.useContext(ut),Se=ye.resizer,De=ye.cropper,Ie=ye.shape,xe=ye.shapeEdit,Ce={height:oe,width:se},Oe=("cdn"===W||"vroom"===W||"vroomCrossGeo"===W||"optimalStaticImage"===W)&&(0,A.isCropDataValid)(Y.cropData,Y.imageNaturalHeight,Y.imageNaturalWidth),we=X._LogSource.create("ImageEditor"),Ee=(0,e.__assign)((0,e.__assign)({},y),{webPartContext:void 0});t.useEffect(function(){if(J(y),ae(!0),B())if(null==G?void 0:G.imageSizeData){var e=(0,A.getDisplaySizeFromAdvancedImageEditorSizeData)(G.imageSizeData,g,D),t=e.displayHeight,n=e.displayWidth;le({height:t,width:n})}else le({height:oe,width:se});return function(){ae(!1)}},[JSON.stringify(Ee),S,g,G]);var Le=(0,A.useFullImageSrc)(pt,P,y,c.DefaultImageHelper.getDefaultImage,j()&&G?G.cacheBuster:Y.cacheBuster);t.useMemo(function(){var e;(null===(e=Y.advancedImageEditorData)||void 0===e?void 0:e.isAdvancedEdited)&&ne&&Le&&L.loadImage(Le).catch(function(){})},[ne,Le,null===(r=Y.advancedImageEditorData)||void 0===r?void 0:r.isAdvancedEdited]);var ke=function(e){O&&O(e)},Pe=function(){ke(Ae.Crop),ee(void 0)},He=function(){ke(Ae.AdvancedEditor)},Re=function(){I((0,e.__assign)((0,e.__assign)({},y),{isAspectRatioLockedOnLoad:!1})),ke(Ae.Resize),me.current&&me.current.focus(),fe.current&&fe.current.focus()},Ne=function(){v!==Ae.Crop&&v!==Ae.CropAspectRatio||!ue.current?v!==Ae.Resize&&v!==Ae.Shape||I(y):ue.current._onCropEnd(),ke(Ae.None),m()?c.ScreenReaderAlert.read(k.x1,c.ReadingMode.ReadImmediately):s.read(k.x1,2)},Be=function(e){y.aspectRatioOnLoad&&X._EngagementLogger.logEventWithLogEntry(new X._LogEntry("ImageEditor","AspectRatioChange.Click",X._LogType.Event,{aspectRatioOnLoad:y.aspectRatioOnLoad.toString(),newAspectRatio:ft.get(e)})),ke(Ae.CropAspectRatio),ee(e)},je=function(){v!==Ae.Crop&&v!==Ae.CropAspectRatio||!ue.current||ue.current._onCropEnd();var t=Boolean(y.aspectRatioOnLoad),n=y.advancedImageEditorData,a=!!(null==n?void 0:n.isAdvancedEdited),i=a&&(null==n?void 0:n.originalSourceUrl)?n.originalSourceUrl:y.imageUrl,r=a&&(null==n?void 0:n.originalUniqueId)?n.originalUniqueId:y.uniqueId,o=a&&(null==n?void 0:n.originalListId)?n.originalListId:y.listId,d=a&&(null==n?void 0:n.originalWebId)?n.originalWebId:y.webId,l=a&&(null==n?void 0:n.originalSiteId)?n.originalSiteId:y.siteId,u=a&&(null==n?void 0:n.originalHeight)?n.originalHeight:y.imageNaturalHeight,f=a&&(null==n?void 0:n.originalWidth)?n.originalWidth:y.imageNaturalWidth,p=(0,e.__assign)((0,e.__assign)({},y),{cropData:void 0,resizeCoefficient:void 0,resizeDesiredWidth:void 0,isAspectRatioLockedOnLoad:t,imageUrl:i,uniqueId:r,listId:o,webId:d,siteId:l,imageNaturalHeight:u,imageNaturalWidth:f,advancedImageEditorData:void 0,cacheBuster:void 0,imageShape:void 0,imageShapeData:void 0});I(p),ke(Ae.None),m()?c.ScreenReaderAlert.read(k.ly,c.ReadingMode.ReadImmediately):s.read(k.ly,2)},Ve=function(t){I((0,e.__assign)((0,e.__assign)({},y),{alignment:t}))},Ge=function(t){X._EngagementLogger.logEventWithLogEntry(new X._LogEntry("ImageShapes","ImageShapeChange.Click",X._LogType.Event,{callerId:U,newImageShape:t})),V()?t===nt.ImageShape.Default?(ke(Ae.None),I((0,e.__assign)((0,e.__assign)({},y),{imageShape:t,imageShapeData:void 0}))):(ke(Ae.Shape),I((0,e.__assign)((0,e.__assign)({},y),{imageShape:t}))):(t===nt.ImageShape.Default?ke(Ae.None):ke(Ae.Shape),I((0,e.__assign)((0,e.__assign)({},y),{imageShape:t})))};t.useImperativeHandle(i,function(){return{handleCropClick:Pe,handleResizeClick:Re,handleSaveClick:Ne,handleRatioChange:Be,handleAlignmentChange:Ve,handleReset:je,handleImageShapesChange:Ge,handleAdvancedEditorClick:He}});var Ke=B()&&(null==G?void 0:G.imageSizeData)?(0,A.getImageSizeStylesFromAdvancedImageEditorSizeData)(G.imageSizeData,g,!1,D):(0,A.getImageSizeStyles)(Y,g,h()?!Oe:!be.current,D),We=Ke[0],Qe=Ke[1],Ye=Boolean(y.imageShape)&&y.imageShape!==nt.ImageShape.Default&&(1===f._SPExperiment.getVariantAndLogExposure(90094)||f._SPFlight.isEnabled(1863)&&(1===f._SPExperiment.getVariantAndLogExposure(90088)||f._SPFlight.isEnabled(1404))),Xe=mt(U)?{opacity:0}:{};Qe&&parseInt(Qe,10)>se&&(Xe.width="".concat(se,"px"));var Ze={top:Ye?3.5:0},$e=void 0,et=void 0,tt=function(e){return Te(e)?630:void 0}(ie),ot=function(e){return Te(e)?250:Ue(e)?800:void 0}(ie);if(tt||ot){var st=function(e,t,n,a){var i=e,r=t,o=e/t;return n&&e>n&&(r=(i=n)/o),a&&r>a&&(i=(r=a)*o),{newWidth:i,newHeight:r}}(se,oe,tt,ot);$e=st.newWidth,et=st.newHeight}var ct=!qe(ie),dt=(0,c.disabledImageContextMenuInlineStyles)(Y.contentProvider);return dt&&X._TraceLogger.logVerbose(we,c.DISABLE_IMAGE_CONTEXT_MENU_MESSAGE),t.createElement("div",{ref:pe},v!==Ae.Crop&&v!==Ae.CropAspectRatio&&v!==Ae.Shape&&!Ye&&t.createElement("div",{onClick:function(e){ve&&v===Ae.None&&!e.shiftKey&&ke(Ae.Resize)},className:(0,a.mergeStyles)({outline:"none"}),tabIndex:0,onKeyDown:function(e){ve&&"Enter"===e.key&&ke(Ae.Resize)},role:v===Ae.None&&ve?"button":"none","aria-label":v===Ae.None&&ve?k.V$:"",ref:me},t.createElement("div",{className:(0,a.css)(M,qe(ie)?"al_c_eb846f79":void 0),ref:_e,style:Xe},t.createElement(A.SPImg,{"data-sp-originalimgsrc":Y.imageUrl,key:Y.imageUrl,serviceScope:P,imageData:Y,width:tt||ot?"".concat($e,"px"):B()?de.width:Qe,height:tt||ot?"".concat(et,"px"):void 0,callerId:U||pt,alt:y.isDecorative?"":y.altText,getDefaultImage:c.DefaultImageHelper.getDefaultImage,onImageLoad:function(e,t){_e.current&&(_e.current.style.opacity="1"),h()||(be.current=("cdn"===t||"vroom"===t||"vroomCrossGeo"===t||"optimalStaticImage"===t)&&(0,A.isCropDataValid)(Y.cropData,Y.imageNaturalHeight,Y.imageNaturalWidth)),q(t),w&&w(),(null==he?void 0:he.current)&&P.consume(rt.CoachmarkUtility.serviceKey).attachCoachmark({positioningContainerProps:{directionalHint:a.DirectionalHint.topLeftEdge,directionalHintForRTL:a.DirectionalHint.topRightEdge,className:"ac_c_eb846f79"},localStorageKey:"DismissedImageEditControlCoachmark",featureGroupKey:"imageFPSCoachmark",target:null==he?void 0:he.current,content:k.Lu,teachingBubbleProps:{headline:k.DZ,hasCondensedHeadline:!0,primaryButtonProps:{target:"_blank",text:k.DF,href:"https://go.microsoft.com/fwlink/?linkid=2042231&clcid=0x409"}}}).catch(function(e){return X._TraceLogger.logError(we,e,"AttachCoachmark")}),function(){if((null==he?void 0:he.current)&&_e.current){var e=he.current,t=_e.current;if((h()?Oe:be.current)||void 0===g||void 0===Y.cropData)t.style.width="",t.style.height="",e.style.left="",e.style.top="",e.style.maxWidth="100%";else{t.style.width=se+"px",t.style.height=oe+"px";var n=se/Y.cropData.width;e.style.left=-Math.round(Y.cropData.x*n)+"px",e.style.top=-Math.round(Y.cropData.y*n)+"px",e.style.maxWidth=""}}}()},onImageLoadFailure:E,thumbnailWidth:(0,T.sT)()?g:Math.max(x.CACHE_BREAKPOINT_S,g),imgRef:function(e){return he.current=e},cacheBuster:j()&&G?G.cacheBuster:Y.cacheBuster,displayMode:f.DisplayMode.Edit,style:dt}),H()&&F&&!ze(ie)&&t.createElement(at.ImageOverlay,{style:{backgroundColor:null===(o=y.overlayTextStyles)||void 0===o?void 0:o.overlayColor,opacity:null===(d=y.overlayTextStyles)||void 0===d?void 0:d.overlayTransparency,width:Qe,height:We}}))),(v===Ae.Shape||Ye)&&(Ie||xe)&&t.createElement("div",{onClick:function(e){ve&&!e.shiftKey&&ke(Ae.Resize)},onKeyDown:function(e){!ve||"Enter"!==e.key&&" "!==e.key||ke(Ae.Resize)},role:"button","aria-label":v===Ae.Shape?k.V$:"",ref:fe},t.createElement("div",{className:(0,a.css)(M),ref:_e},V()&&xe&&t.createElement(xe,{imageData:Y,previouslySavedShape:null===(l=y.imageShapeData)||void 0===l?void 0:l.imageShape,callerId:U||pt,thumbnailWidth:(0,T.sT)()?se:Math.max(x.CACHE_BREAKPOINT_S,se),imageTransformData:null===(u=Y.imageShapeData)||void 0===u?void 0:u.imageTransformData,serviceScope:P,getDefaultImage:c.DefaultImageHelper.getDefaultImage,imageShape:Y.imageShape,isShapeCentered:ct,width:tt||ot?$e:B()?de.width:se,height:tt||ot?et:B()?de.height:oe,handleSave:function(t,n,a,i,r){return(0,e.__awaiter)(b,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return z(t,n,a,i,r),[2]})})},onRenderComplete:C,onImageShapesComplete:function(){ke(Ae.None)},onImageLoad:w,onImageLoadFailure:E,cacheBuster:j()&&G?G.cacheBuster:void 0}),!V()&&Ie&&t.createElement(Ie,{imageData:Y,callerId:U||pt,thumbnailWidth:(0,T.sT)()?g:Math.max(x.CACHE_BREAKPOINT_S,g),serviceScope:P,getDefaultImage:c.DefaultImageHelper.getDefaultImage,imageShape:Y.imageShape,width:B()?de.width:se,height:B()?de.height:oe,onRenderComplete:C,onImageShapesComplete:function(){ke(Ae.None)},onImageLoad:w,onImageLoadFailure:E,cacheBuster:j()&&G?G.cacheBuster:void 0}),H()&&F&&t.createElement(at.ImageOverlay,{style:{backgroundColor:null===(p=y.overlayTextStyles)||void 0===p?void 0:p.overlayColor,opacity:null===(_=y.overlayTextStyles)||void 0===_?void 0:_.overlayTransparency,width:B()?de.width:Qe}}))),v===Ae.Resize&&Se&&!D?t.createElement("div",{style:{position:"relative"}},t.createElement(Se,{initialHeight:oe,initialWidth:se,isFullWidth:S,alignment:Y.alignment||"Center",maximumWidth:g,resizeBorderOffsets:Ze,onResize:function(t){R&&R(!1),J((0,e.__assign)((0,e.__assign)({},Y),{resizeDesiredWidth:B()&&(null==G?void 0:G.imageSizeData)?void 0:t.width,resizeCoefficient:B()&&(null==G?void 0:G.imageSizeData)?void 0:t.width/g})),le({height:t.height,width:t.width})},onResizeComplete:function(t){var n;if(ke(Ae.None),R&&R(!0),y.uniqueId&&(null==G?void 0:G.imageSizeData)){var a=(0,e.__assign)((0,e.__assign)({},G.imageSizeData),{resizeDesiredWidth:t.width,croppedDisplayWidth:t.width,croppedDisplayHeight:t.height,resizeCoefficient:t.width/g}),i="RefreshCacheBuster",r=new X._QosMonitor("Resizer.".concat(i),!1);try{n=(0,it._refreshCacheBuster)(y.uniqueId,a),r.writeSuccess()}catch(e){throw r.writeUnexpectedFailure("Resizer.".concat(i,".UploadFailure"),e),e}}I((0,e.__assign)((0,e.__assign)({},Y),{resizeDesiredWidth:B()&&(null==G?void 0:G.imageSizeData)?void 0:t.width,resizeCoefficient:B()&&(null==G?void 0:G.imageSizeData)?void 0:t.width/g}),n)}})):t.createElement(t.Fragment,null),v!==Ae.Crop&&v!==Ae.CropAspectRatio||!De?t.createElement(t.Fragment,null):t.createElement(t.Fragment,null,t.createElement(De,{callerId:U||pt,serviceScope:P,workingAreaRef:pe,imageData:Y,onCropComplete:function(t,n){!function(e,t){var n="CompleteAdvancedInlineCrop",a=Me("Image Webpart ".concat(n," Failure"),P),i=new X._QosMonitorShareFailureWithCP("".concat(ge,".").concat(n),!0,[a]);try{N(t,e.width,e.height,!1),i.writeSuccess()}catch(e){throw i.writeUnexpectedFailure("".concat(ge,".").concat(n,".UploadFailure"),e),e}}(t,n),X._EngagementLogger.logEventWithLogEntry(new X._LogEntry("AdvancedCropper","AspectRatioSave.Click",X._LogType.Event,{newAspectRatio:ft.get($)})),ke(Ae.None),I((0,e.__assign)((0,e.__assign)({},Y),{isAspectRatioLockedOnLoad:!(!B()||!(null==G?void 0:G.imageSizeData))&&void 0,cropData:void 0}))},componentSize:B()?{height:oe,width:se}:Ce,aspectRatio:$,cacheBuster:j()&&G?G.cacheBuster:void 0})))}),ht=function(e,t,n){return{".ms-Fabric--isFocusVisible &:focus::after":{border:"1px solid ".concat(e),borderRadius:t,inset:"0",outline:"2px solid ".concat(n)}}};function bt(t){var n=t.theme,i=t.primary;return(0,a.concatStyleSets)(function(e){return{root:{paddingLeft:"12px",paddingRight:"12px",borderRadius:e.effects.roundedCorner4}}}(n),i?function(t){var n=t.effects,a=t.palette,i=t.semanticColors;return{root:(0,e.__assign)((0,e.__assign)({backgroundColor:i.primaryButtonBackground,borderColor:i.primaryButtonBorder,color:i.primaryButtonText},ht(a.white,n.roundedCorner4,i.focusBorder)),{".ms-Fabric--isFocusVisible &:focus":{"@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)":{outline:"2px solid buttontext"}}}),rootHovered:{backgroundColor:i.primaryButtonBackgroundHovered,borderColor:i.primaryButtonBackgroundHovered,color:i.primaryButtonTextHovered},rootPressed:{backgroundColor:i.primaryButtonBackgroundPressed,borderColor:i.primaryButtonBackgroundPressed,color:i.primaryButtonTextPressed},rootDisabled:{backgroundColor:i.primaryButtonBackgroundDisabled,borderColor:i.primaryButtonBackgroundDisabled,color:i.primaryButtonTextDisabled}}}(n):function(t){var n=t.effects,a=t.palette,i=t.semanticColors;return{root:(0,e.__assign)({borderColor:i.buttonBorder,color:i.buttonText},ht("transparent",n.roundedCorner4,i.focusBorder)),rootHovered:{backgroundColor:i.buttonBackgroundHovered,borderColor:a.neutralTertiaryAlt,color:i.buttonTextHovered},rootPressed:{backgroundColor:i.buttonBackgroundPressed,borderColor:a.neutralTertiary,color:i.buttonTextPressed},rootDisabled:{backgroundColor:i.buttonBackgroundDisabled,borderColor:i.buttonBorderDisabled,color:i.buttonTextDisabled}}}(n))}var gt=G(6461),vt=G(9408),yt=function(e){var t,n=new I.SPFileHandler({serviceScope:e.serviceScope,qosPrefix:e.QosTag}),a=!1,i=function(e){var t=k.zV;return e.returnValue=t,t},r=function(n,r){if(window.removeEventListener("beforeunload",i),t&&t.naturalHeight&&t.naturalWidth){var o=t;Ye(o).then(function(e){a=e}).catch(function(e){a=!1}).then(function(){var t=a?o.naturalHeight:o.naturalWidth,i=a?o.naturalWidth:o.naturalHeight;e.onUploadComplete(n,r,t,i)})}else e.onUploadComplete(n,r)},o=function(t){window.removeEventListener("beforeunload",i),e.onUploadError&&e.onUploadError(t,e.externalFile?e.externalFile.src:void 0)},s=function(){return Math.floor(4294967296*Math.random()).toString()},d=function(t){var a=new vt._QosMonitor(e.QosTag);try{var d="",l=s(),u="src"in t;if(t instanceof File&&I.SPFileHandler.validateFileType(t,c.spConstants.imageExtensions))d="".concat(l,"-").concat(I.SPFileHandler.replaceSpecialCharacters(t.name));else if(t instanceof Blob&&n.validateMimeType(t,c.spConstants.imageExtensions))d="".concat(l,".").concat(t.type.split("/").pop());else{if(!u||!I.SPFileHandler.validateFileType(t.src,c.spConstants.imageExtensions))return o(new Error(k.Hg)),void a.writeExpectedFailure("InvalidFileType");t=t,d="".concat(l,"-").concat(I.SPFileHandler.replaceSpecialCharacters(t.name))}window.addEventListener("beforeunload",i),(t instanceof File||t instanceof Blob?n.uploadLocalFile(t,d):n.uploadExternalFile(t.src,d)).then(function(e){(0,T.H9)()?r(e,t instanceof File?t.name:void 0):r(e,t instanceof File?d||t.name:void 0),a.writeSuccess()}).catch(function(e){a.writeUnexpectedFailure("UploadPromise",e),o(e)})}catch(e){a.writeUnexpectedFailure("CatchAll",e),o(e)}},l=function(){var t=e.externalFile,a=e.imageUrl,l=e.localFile,u=e.pageContext;t?d(t):a&&c.UrlUtility.isValidURL(a)&&!c.UrlUtility.isVanityUrl(a,u)?function(t){var a=new vt._QosMonitor(e.QosTag);try{var c=t.lastIndexOf("/"),d=t.substring(c+1),l=s()+I.SPFileHandler.replaceSpecialCharacters(d);window.addEventListener("beforeunload",i),n.uploadExternalFile(t,l).then(function(e){r(e,l),a.writeSuccess()}).catch(function(e){a.writeUnexpectedFailure("UploadPromise",e),o(e)})}catch(e){a.writeUnexpectedFailure("CatchAll",e),o(e)}}(a):l&&d(l)};(0,T.bh)()?e.localFile?n.readFile(e.localFile).then(function(e){L.loadImage(e).then(function(e){t=(0,T.se)()?void 0:e,l()}).catch(function(e){o(e)})}).catch(function(e){X._TraceLogger.logError(X._LogSource.create("LocalFileUpload"),e,"UploadLocalFile"),o(e)}):e.externalFile&&L.loadImage(e.externalFile.src).then(function(e){t=(0,T.se)()?void 0:e,l()}).catch(function(e){X._TraceLogger.logError(X._LogSource.create("LocalFileUpload"),e,"UploadExternalFile"),o(e)}):l()},St=G(9664),Dt=function(e){var t=e.pageContext,n=e.serviceScope,a=e.localFile,i=e.blobFile,r=e.externalFile,o=e.stateImageUrl,s=e.propsImageUrl,c=e.onUploadStart,d=e.onUploadComplete,l=e.onUploadError;return function(){var e=i||a,u=r&&Ve(r.src)?void 0:r,f=(0,T.FK)()?s:e||u?void 0:o;(e||u)&&(c(),yt({serviceScope:n,pageContext:t,localFile:e,externalFile:u,imageUrl:f,QosTag:"ImageUpload",onUploadComplete:d,onUploadError:l}))}};function It(e,t){var n=t.web.absoluteUrl,a=f.UrlUtilities.isAbsoluteUrl(n)?new d.Uri(n).getLeftPart(d.UriPartial.authority):window.location.origin;e.includes("-my")?e.replace("-my","")===a?X._EngagementLogger.logEvent("ImageWebPart.OneDriveUpload.SameGeo"):X._EngagementLogger.logEvent("ImageWebPart.OneDriveUpload.DifferentGeo"):e===a?X._EngagementLogger.logEvent("ImageWebPart.Upload.SameGeo"):X._EngagementLogger.logEvent("ImageWebPart.Upload.DifferentGeo")}var xt,Ct=G(5493),Ot=function(t){var a=t.selectedItem,i=t.serviceScope,r=t.getSPFileHandler,o=t.onUploadStart,s=t.onUploadComplete,c=t.onUploadError,d=(0,I.getSharePointImageUrl)(a),l="";try{l=Ne(d,!0)}catch(e){l=a.UniqueId}var u=K();return function(){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var t,p,m,_,h,g,v,y,S,D,I,x,O,w,E;return(0,e.__generator)(this,function(A){switch(A.label){case 0:o(),t=a.SiteId,p=a.ListId,m=a.UniqueId,_=new X._QosMonitor("ImageWebPart.CopyImageV2"),A.label=1;case 1:return A.trys.push([1,9,,10]),h=function(t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,a,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:n=new X._QosMonitor("ImageWebPart.LoadOriginalImage"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,L.loadImage(t)];case 2:return a=e.sent(),n.writeSuccess(),[2,a];case 3:throw i=e.sent(),n.writeUnexpectedFailure("Failed to download original image"),i;case 4:return[2]}})})},g=function(t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,a,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:n=new X._QosMonitor("ImageWebPart.UploadCrossSiteImage"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r().uploadExternalFile(t.replace(/&/g,encodeURIComponent("&")),l,!0)];case 2:return a=e.sent(),n.writeSuccess(),[2,a];case 3:throw i=e.sent(),n.writeUnexpectedFailure("Failed to upload image"),i;case 4:return[2]}})})},v=f.UrlUtilities.isAbsoluteUrl(d)?new n.Uri(d).getLeftPart(n.UriPartial.authority):window.location.origin,y=void 0,u?(S=a.ServerAbsoluteUrl||a.Link,[4,r().moveCopyExternalFileToSiteAssets({fileAbsoluteUrl:S,fileName:l,sharepointId:a.SiteId,listItemUniqueId:a.UniqueId,siteAbsoluteUrl:a.SiteUrl})]):[3,3];case 2:return y=A.sent(),[3,6];case 3:return[4,(0,Ct.getItemWithAadHttpClient)(i,v,t,p,m)];case 4:return D=A.sent(),I=D["@content.downloadUrl"],[4,g(I)];case 5:y=A.sent(),A.label=6;case 6:return b()||(x=i.consume(C.PageContext.serviceKey),It(v,x)),[4,h(y.serverRelativeUrl)];case 7:return O=A.sent(),_.writeSuccess(),[4,Ye(O)];case 8:return w=A.sent(),s(y,l,w?O.naturalHeight:O.naturalWidth,w?O.naturalWidth:O.naturalHeight),[3,10];case 9:return E=A.sent(),_.writeUnexpectedFailure("Copy image V2 failed",E),c(E,d),[3,10];case 10:return[2]}})})}};function wt(t){var n,a,i,r,o=t.successResponse,s=t.persistedState,c=t.stateImageUrl,l=t.propsImageUrl,u=t.pageContext,p=t.serviceScope,m=t.blobFile,_=t.getSPFileHandler,h=t.setImageData,g=t.onUploadStart,v=t.onUploadComplete,y=t.onUploadError,S=function(){},D=null===(n=o.localFilesPickedToUpload)||void 0===n?void 0:n[0],x=null===(a=o.externalImagesPickedToUpload)||void 0===a?void 0:a[0];if(D||x)S=(null==x?void 0:x.src)&&Ve(x.src)?function(t){var n=t.stockImage,a=t.persistedState,i=t.setImageData,r=t.onUploadStart,o=t.onUploadError;return function(){(0,T.pf)()||r(),i((0,e.__assign)((0,e.__assign)({},a),{imageUrl:n.src,fileName:n.name,advancedImageEditorData:{isAdvancedEdited:!1},contentProvider:n.contentProvider})).catch(function(e){(0,T.Cq)()||o(e,void 0)})}}({stockImage:x,persistedState:s,setImageData:h,onUploadStart:g,onUploadError:y}):Dt({stateImageUrl:c,propsImageUrl:l,pageContext:u,serviceScope:p,blobFile:m,localFile:null==D?void 0:D.file,externalFile:x,onUploadStart:g,onUploadComplete:v,onUploadError:y});else if(null===(r=null===(i=o.selectedItems)||void 0===i?void 0:i[0])||void 0===r?void 0:r.Link){var C=o.selectedItems[0];S=(K()?C.ShouldCopySelectedFileToSiteAssetFolder:(0,I.isExternalSharePointAsset)(u,C))?Ot({selectedItem:C,serviceScope:p,getSPFileHandler:_,onUploadStart:g,onUploadComplete:v,onUploadError:y}):function(t){var n=t.selectedItem,a=t.persistedState,i=t.setImageData,r=t.onUploadStart,o=t.onUploadError,s=t.pageContext,c=(0,I.getSharePointImageUrl)(n);return b()||It(f.UrlUtilities.isAbsoluteUrl(c)?new d.Uri(c).getLeftPart(d.UriPartial.authority):window.location.origin,s),function(){r(),i((0,e.__assign)((0,e.__assign)({},a),{imageUrl:c,listId:n.ListId,siteId:n.SiteId,webId:n.WebId,uniqueId:n.UniqueId,fileName:(0,T.IL)()?void 0:Ne(c),advancedImageEditorData:{isAdvancedEdited:!1}})).catch(function(e){(0,T.Cq)()||o(e,void 0)})}}({selectedItem:C,persistedState:s,setImageData:h,onUploadStart:g,onUploadError:y,pageContext:u})}S()}!function(e){e[e.None=0]="None",e[e.Uploading=1]="Uploading",e[e.Downloading=2]="Downloading",e[e.Completed=3]="Completed"}(xt||(xt={}));var Et=(0,a.classNamesFunction)(),At="ImageEdit";const Lt=function(r){function o(i){var o,d,l,u,_,h=r.call(this,i)||this;return h.isDisposed=!1,h._ref=t.createRef(),h._eventListenersAdded=!1,h._imageEditControlRef=t.createRef(),h.openAdvancedEditor=function(){X._EngagementLogger.logEvent("AdvancedEditor.OpenButton.Click"),h.setState({mode:Ae.AdvancedEditor})},h.closeAdvancedEditor=function(){h.setState({mode:Ae.None})},h.saveAdvancedImageEdit=function(t,n,a,i){var r,o,d,l=i?"SaveAdvancedImageEditOriginal":"SaveAdvancedImageEditCopy",u=Me("Image Webpart ".concat(l," Failure"),h.props.serviceScope),p=new X._QosMonitorShareFailureWithCP("".concat(At,".").concat(l),!1,[u]),_=(0,e.__assign)({},h.state.imageData),b=_.fileName,g=_.imageUrl,v=_.uniqueId,y=_.listId,S=_.webId,D=_.siteId,I=_.advancedImageEditorData,x=B()&&(null===(r=h.state.cacheBusterEntry)||void 0===r?void 0:r.imageSizeData)?null===(o=h.state.cacheBusterEntry)||void 0===o?void 0:o.imageSizeData:h.state.imageData,C=x.imageNaturalWidth,O=x.imageNaturalHeight,w=x.resizeCoefficient,E=x.resizeDesiredWidth,L=C!==n||O!==a,M=L?(0,A.calculateCroppedImageSizeForDisplayContainer)(B()&&(null===(d=h.state.cacheBusterEntry)||void 0===d?void 0:d.imageSizeData)?h.state.cacheBusterEntry.imageSizeData:h.state.imageData,{width:n,height:a},h.props.containerWidth):void 0,P=b&&c.ExtensionHelper.getExtension(b)?b:Ne(g),U=I&&I.isAdvancedEdited&&I.originalFileName?Re(I.originalFileName):Ne(g,!0),F=void 0,H=(null==I?void 0:I.isAdvancedEdited)?(0,e.__assign)((0,e.__assign)({},I),je(L,n,a,M)):(0,e.__assign)({isAdvancedEdited:!0,originalSourceUrl:g,originalUniqueId:v,originalFileName:P,originalHeight:h.state.imageData.imageNaturalHeight,originalWidth:h.state.imageData.imageNaturalWidth,originalListId:y,originalWebId:S,originalSiteId:D},je(L,n,a,M)),R=i&&(null==I?void 0:I.isAdvancedEdited)?P:U;h.setState({loadingPhase:xt.Uploading}),h._ensureFileHandler().uploadLocalFile(t,R).then(function(e){var t;if(j()){if(e.uniqueId){var i=(0,it._getCacheBusterEntry)(e.uniqueId),r=(0,A.calculateCroppedImageSizeForDisplayContainer)((null==i?void 0:i.imageSizeData)||h.state.imageData,{width:n,height:a},h.props.containerWidth),o={imageNaturalWidth:n,imageNaturalHeight:a,croppedDisplayWidth:L?null==M?void 0:M.croppedDisplaySize.width:B()?null==r?void 0:r.croppedDisplaySize.width:void 0,croppedDisplayHeight:L?null==M?void 0:M.croppedDisplaySize.height:B()?null==r?void 0:r.croppedDisplaySize.height:void 0,resizeCoefficient:L?null==M?void 0:M.croppedResizeCoefficient:B()&&(null===(t=null==i?void 0:i.imageSizeData)||void 0===t?void 0:t.resizeCoefficient)?null==r?void 0:r.croppedResizeCoefficient:void 0,resizeDesiredWidth:L?null==M?void 0:M.croppedDisplaySize.width:E},d="RefreshCacheBuster",l=new X._QosMonitor("SaveAdvancedImageEdit.".concat(d),!1);try{var u=(0,it._refreshCacheBuster)(e.uniqueId,o);l.writeSuccess(),h.setState({cacheBusterEntry:u})}catch(e){l.writeUnexpectedFailure("".concat(At,".").concat(d,".RefreshFailure"),e)}}}else F=f.Guid.newGuid().toString();h._onUploadComplete(e,R,B()?void 0:n,B()?void 0:a,B()?void 0:L?null==M?void 0:M.croppedResizeCoefficient:w,B()?void 0:L?null==M?void 0:M.croppedDisplaySize.width:E,H,j()?void 0:F,!(0,T.bh)()),p.writeSuccess(),m()?c.ScreenReaderAlert.read(k.wi,c.ReadingMode.ReadImmediately):s.read(k.wi,2)}).catch(function(e){throw h.setState({loadingPhase:xt.Completed}),p.writeUnexpectedFailure("".concat(At,".").concat(l,".UploadFailure"),e),e})},h.saveShapeEdit=function(t,n,a,i,r){var o,s="SaveShapeEdit",d=Me("Image Webpart ".concat(s," Failure"),h.props.serviceScope),l=new X._QosMonitorShareFailureWithCP("".concat(At,".").concat(s),!1,[d]),u=(0,e.__assign)({},h.state.imageData),p=u.fileName,m=u.imageUrl,_=(null===(o=h.state.imageData.imageShapeData)||void 0===o?void 0:o.version)||Date.now().toString(),b=p?c.ExtensionHelper.getExtension(p):void 0,g=p&&b?!f._SPKillSwitch.isActivated("8f281f08-35a5-4ebc-8674-19c421e195dc")&&r&&r!==b?p.replace(RegExp("\\.".concat(b,"$"),"i"),"-".concat(_,".").concat(r)):p:Ne(m,!1,_,r),v="shape-".concat(g);h._ensureFileHandler().uploadLocalFile(t,v).then(function(t){var r=(0,e.__assign)((0,e.__assign)({},h.state.imageData),{imageShapeData:{imageShape:h.state.imageData.imageShape,version:_,savedImageShape:(0,e.__assign)((0,e.__assign)({},t),{siteId:h._pageContext.site.id.toString(),webId:h._pageContext.web.id.toString()}),width:n,height:a,imageTransformData:i}});h._onEditComplete(r),l.writeSuccess()}).catch(function(e){throw l.writeUnexpectedFailure("".concat(At,".").concat(s,".UploadFailure"),e),e})},h.openFilePicker=function(){U()?h.setState({showFilePicker:!0}):(h._ensurePickerMonitor(),h._ensureFilePicker().then(function(e){h.state.imageData.imageUrl?X._EngagementLogger.logEvent("ImageWebPart.ImageUrl","Change"):X._EngagementLogger.logEvent("ImageWebPart.ImageUrl","Add"),e.open()}).catch(function(e){throw h._imagePickerMonitor&&h._imagePickerMonitor.writeUnexpectedFailure("FilePickerFailure",e),e}))},h.handleDataPaste=function(e,t){var n,a;if(null===(n=e.clipboardData)||void 0===n?void 0:n.items){e.stopPropagation();var i="ClipboardDataPasted",r=e.clipboardData.items,o="text/html";t||(t=e.clipboardData.getData(o));var s=(null===(a=(new DOMParser).parseFromString(t||"",o).querySelector("img"))||void 0===a?void 0:a.src)||"";c.UrlUtility.isValidURL(s)&&!c.UrlUtility.isVanityUrl(s,h._pageContext)?h._handleNewDataTransferItems(r,i,s):h._handleNewDataTransferItems(r,i)}},h.handleDataDrop=function(e){var t;if(null===(t=e.dataTransfer)||void 0===t?void 0:t.items){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.items;h._handleNewDataTransferItems(n,"DataTransferDropped")}},h._updateTextOverlayDisplay=function(e){h.setState({showTextOverlay:e})},h._handleNewDataTransferItems=function(e,t,n){if(e instanceof DataTransferItemList)for(var a=function(a){if("file"===e[a].kind&&e[a].type.match("^image/")){var i=e[a].getAsFile();if(i){h.setState({loadingPhase:xt.Uploading});var r=Date.now().toString(),o=Me("Image Webpart EditControl ".concat(t," Failure"),h.props.serviceScope),s=new X._QosMonitorShareFailureWithCP("".concat(At,".").concat(t),!0,[o]);if(n){var c=(0,T.IL)()?function(e){var t=Date.now().toString(),n=e.lastIndexOf("/"),a=e.substring(n+1);return t+I.SPFileHandler.replaceSpecialCharacters(a)}(n):Ne(n,!0);h._ensureFileHandler().uploadExternalFile(n,c).then(function(e){h._onUploadComplete(e,c),s.writeSuccess()}).catch(function(e){h.setState({loadingPhase:xt.Completed}),s.writeUnexpectedFailure("".concat(At,".").concat(t,".UploadFailure"),e)})}else{var d=r+I.SPFileHandler.replaceSpecialCharacters(i.name);h._ensureFileHandler().uploadLocalFile(i,d).then(function(e){h._onUploadComplete(e,d),s.writeSuccess()}).catch(function(e){h.setState({loadingPhase:xt.Completed}),s.writeUnexpectedFailure("".concat(At,".").concat(t,".UploadFailure"),e)})}return{value:void 0}}}},i=0;i<e.length;i++){var r=a(i);if("object"==typeof r)return r.value}},h._handleOverlayTextChange=function(e){h.props.onOverlayTextChanged&&h.props.onOverlayTextChanged(e)},h._handleOverlayTextStyleChanged=function(e){h.props.onOverlayTextStyleChanged&&h.props.onOverlayTextStyleChanged(e)},h._handleImageLoaded=function(){h.setState({loadingPhase:xt.Completed}),h.props.onImageLoad&&h.props.onImageLoad()},h._handleImageLoadFailed=function(e){h.setState({loadingPhase:xt.Completed}),h.props.onImageLoadFailure&&h.props.onImageLoadFailure(e)},h._ensureFilePicker=function(){if(!h._filePickerPromise){var e={onSelect:(0,T.Zf)()?h._onFileSelectedOld:h._onFileSelected,onCancel:h._onFileCanceled,selectionMode:a.SelectionMode.single,itemTypes:new Set([Ze.Images]),callerName:"ImageWebPart",disableStockAssets:h.props.disableStockAssets,exclusionList:h._buildExclusionList(),enableExternalAssetCopyToPageAssetFolder:K()};h._filePickerPromise=I.FilePickerLoader.load(h.props.serviceScope,e)}return h._filePickerPromise},h._ensurePickerMonitor=function(){h._imagePickerMonitor=void 0;var e=Me("Image Webpart FilePicker Failure",h.props.serviceScope);h._imagePickerMonitor=new X._QosMonitorShareFailureWithCP("ImageWebPart.FilePicker",!1,[e])},h._handleUploadStart=function(){h.setState({loadingPhase:xt.Uploading})},h._onFileSelected=function(e){h._clearError(),wt({persistedState:{alignment:h.state.imageData.alignment,overlayText:h.props.imageData.overlayText,overlayTextStyles:h.props.imageData.overlayTextStyles,imageShape:(0,T.M3)()?void 0:h.state.imageData.imageShape},successResponse:e,stateImageUrl:h.state.imageData.imageUrl,propsImageUrl:h.props.imageData.imageUrl,pageContext:h._pageContext,serviceScope:h.props.serviceScope,blobFile:h.props.imageBlob,getSPFileHandler:h._ensureFileHandler,setImageData:h._updateImageDimensionsFromFullImage,onUploadStart:h._handleUploadStart,onUploadComplete:h._onUploadComplete,onUploadError:h._onUploadError}),h._imagePickerMonitor&&h._imagePickerMonitor.writeSuccess({action:"Select"}),m()?c.ScreenReaderAlert.read(k.Cb,c.ReadingMode.ReadImmediately):s.read(k.Cb,2),X._EngagementLogger.logEvent("ImageWebPart.OpenFilePicker","Select"),(0,T.iX)()||f._SPEventManager.instance.raiseEvent("recordSurveyEvent",{name:"ImageEditUsage"})},h._onFileSelectedOld=function(e){var t,a;if(h._clearError(),e&&(e.localFilesPickedToUpload&&e.localFilesPickedToUpload.length>0&&e.localFilesPickedToUpload[0]||e.externalImagesPickedToUpload&&e.externalImagesPickedToUpload.length>0&&e.externalImagesPickedToUpload[0]))if((0,T.pf)()||h.setState({loadingPhase:xt.Uploading}),(null===(a=null===(t=e.externalImagesPickedToUpload)||void 0===t?void 0:t[0])||void 0===a?void 0:a.src)&&Ve(e.externalImagesPickedToUpload[0].src)){var i={alignment:h.state.imageData.alignment,imageUrl:e.externalImagesPickedToUpload[0].src,fileName:e.externalImagesPickedToUpload[0].name,advancedImageEditorData:{isAdvancedEdited:!1},overlayText:h.props.imageData.overlayText,overlayTextStyles:h.props.imageData.overlayTextStyles};h._updateImageDimensionsFromFullImage(i).catch(function(e){(0,T.Cq)()||h._onUploadError(e,void 0)})}else h.setState({loadingPhase:xt.Uploading}),h._localFilePreview(e);else if(e&&e.selectedItems&&e.selectedItems.length>0&&e.selectedItems[0]&&e.selectedItems[0].Link){h.setState({loadingPhase:xt.Uploading});var r=e.selectedItems[0],o=r.ServerAbsoluteUrl||r.Link,d=new n.Uri(o),l=d.getAuthority()===window.location.host?d.getPath():o;f._SPFlight.isEnabled(61766)&&r.SiteId&&r.WebId&&r.ListId&&r.UniqueId&&(h._pageContext.site.id.toString()!==f.Guid.parse(r.SiteId).toString()||h._pageContext.web.id.toString()!==f.Guid.parse(r.WebId).toString())?Ot({selectedItem:r,serviceScope:h.props.serviceScope,getSPFileHandler:h._ensureFileHandler,onUploadStart:h._handleUploadStart,onUploadComplete:h._onUploadComplete,onUploadError:h._onUploadError}):(i={alignment:h.state.imageData.alignment,imageUrl:l,listId:r.ListId,siteId:r.SiteId,webId:r.WebId,uniqueId:r.UniqueId,fileName:(0,T.IL)()?void 0:Ne(l),overlayText:h.props.imageData.overlayText,overlayTextStyles:h.props.imageData.overlayTextStyles,advancedImageEditorData:{isAdvancedEdited:!1}},h._updateImageDimensionsFromFullImage(i).catch(function(e){(0,T.Cq)()||h._onUploadError(e,void 0)}))}h._imagePickerMonitor&&h._imagePickerMonitor.writeSuccess({action:"Select"}),m()?c.ScreenReaderAlert.read(k.Cb,c.ReadingMode.ReadImmediately):s.read(k.Cb,2),X._EngagementLogger.logEvent("ImageWebPart.OpenFilePicker","Select"),(0,T.iX)()||f._SPEventManager.instance.raiseEvent("recordSurveyEvent",{name:"ImageEditUsage"})},h._onFileCanceled=function(){h._imagePickerMonitor&&h._imagePickerMonitor.writeSuccess({action:"Cancel"}),X._EngagementLogger.logEvent("ImageWebPart.OpenFilePicker","Cancel"),h.props.onFilePickerCancel&&h.props.onFilePickerCancel()},h._proactiveThumbnailCdnSeed=function(e,t){var a,i=h._pageContext,r=St.CdnService.createFromServiceScope(h.props.serviceScope,null===(a=null==i?void 0:i.web)||void 0===a?void 0:a.absoluteUrl);void 0!==r&&(r.getCdnURLForItem(e).then(function(e){if(e&&e.CdnUrl){var t={};t[e.ItemUrl]=e.CdnUrl,n.SPAlternativeUrls.updateMap(t)}}).catch(function(e){X._TraceLogger.logError(X._LogSource.create(At),e,"ProactiveThumbnailSeeding")}),r.seedImageBreakpointsIntoCdn(e,null!=t?t:0))},h._onUploadComplete=function(e,t,n,a,i,r,o,s,c){var d=h._pageContext,l=h.state.imageData.alignment,u=h.state.imageData.imageShape,f={alignment:l,imageNaturalWidth:B()&&(null==o?void 0:o.isAdvancedEdited)?h.props.imageData.imageNaturalWidth:n,imageNaturalHeight:B()&&(null==o?void 0:o.isAdvancedEdited)?h.props.imageData.imageNaturalHeight:a,imageUrl:e.serverRelativeUrl,listId:e.listId,siteId:d.site&&d.site.id&&d.site.id.toString(),webId:d.web&&d.web.id&&d.web.id.toString(),uniqueId:e.uniqueId,fileName:t,advancedImageEditorData:o,overlayText:(0,T.yn)()?void 0:h.props.imageData.overlayText,overlayTextStyles:(0,T.yn)()?void 0:h.props.imageData.overlayTextStyles,resizeCoefficient:B()&&h.state.cacheBusterEntry?void 0:p()||null!=i?i:1,resizeDesiredWidth:B()&&h.state.cacheBusterEntry?void 0:r,cacheBuster:j()?void 0:s,imageShape:u};((0,T.bh)()||c)&&h._proactiveThumbnailCdnSeed(e.serverRelativeUrl,null!=n?n:0),h._onEditComplete(f)},h._onUploadError=function(e,t){h.setState({imageSourceType:c.ImageSourceType.none,loadingPhase:xt.None}),h._handleUploadError&&h._handleUploadError(e,t)},h._onEditComplete=function(t){var n=void 0!==t.imageNaturalWidth&&void 0!==t.imageNaturalHeight,a=(0,e.__assign)((0,e.__assign)({},t),{captionText:t.captionText||h.props.imageData.captionText});if(n){var i=Math.max(h.state.loadingPhase,xt.Downloading),r=h.props.onEditComplete;r&&r(a),h.setState({imageData:a,imageSourceType:c.ImageSourceType.sharepointURI,loadingPhase:i})}else h._updateImageDimensionsFromFullImage(a).catch(function(e){(0,T.Cq)()||h._onUploadError(e,void 0)})},h._updateImageDimensionsFromFullImage=function(t,n){return void 0===n&&(n={}),(0,e.__awaiter)(h,void 0,void 0,function(){var a,i,r,o,s,d,l,u;return(0,e.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),a=Math.max(this.state.loadingPhase,xt.Downloading),t.imageNaturalHeight&&t.imageNaturalWidth?(i=n.caption,r=n.confidence,this.setState(function(e){return{candidateAltText:i||e.candidateAltText,candidateAltTextConfidence:r||e.candidateAltTextConfidence,imageData:t,imageSourceType:c.ImageSourceType.sharepointURI,loadingPhase:a}}),[2]):[4,L.loadImage(t.imageUrl)];case 1:return[4,Ye(o=f.sent())];case 2:return s=f.sent(),d=(0,e.__assign)((0,e.__assign)({},t),{imageNaturalHeight:s?o.naturalWidth:o.naturalHeight,imageNaturalWidth:s?o.naturalHeight:o.naturalWidth}),(0,T.bh)()||this._proactiveThumbnailCdnSeed(t.imageUrl,null!==(u=o.naturalWidth)&&void 0!==u?u:0),this._onEditComplete(d),[3,4];case 3:throw l=f.sent(),X._TraceLogger.logError(X._LogSource.create(At),l,"UpdateImageDimensionsFromFullImage"),new Error(k.Vq);case 4:return[2]}})})},h._ensureFileHandler=function(){return h._spFileHandler||(h._spFileHandler=new I.SPFileHandler({serviceScope:h.props.serviceScope,qosPrefix:At})),h._spFileHandler},h._clearError=function(){(h.state.uploadError||h.state.uploadErrorSrc)&&h.setState({uploadError:void 0,uploadErrorSrc:void 0})},h._handleCaptionTextChange=function(e){h.props.onCaptionTextChange&&h.props.onCaptionTextChange(e)},h._handleUploadError=function(e,t){h.setState({uploadError:e,uploadErrorSrc:t})},h._handleClickSourceSite=function(){var e=new X._LogEntry("Image","ErrorMessageSourceSiteLink.Click",X._LogType.Event);X._EngagementLogger.logEventWithLogEntry(e)},h._handleDrop=function(e){h.setState({isDragging:!1}),h._imageEditControlRef.current&&h.handleDataDrop(e)},h._handleDragOver=function(e){var t;if((null===(t=e.dataTransfer)||void 0===t?void 0:t.items)instanceof DataTransferItemList)for(var n=e.dataTransfer.items,a=0;a<n.length;a++)if("file"===n[a].kind&&n[a].type.match("^image/"))return e.preventDefault(),void(h.state.isDragging||h.setState({isDragging:!0}))},h._handleDragLeave=function(e){e.preventDefault(),h.state.isDragging&&h.setState({isDragging:!1})},h._handleCacheBusterChangedRemotely=function(e){e.key===h.props.imageData.uniqueId&&h.setState({cacheBusterEntry:e.value})},h._addDragAndDropListeners=function(){h._ref.current&&(h._eventListenersAdded=!0,h._ref.current.addEventListener("drop",h._handleDrop),h._ref.current.addEventListener("dragover",h._handleDragOver),h._ref.current.addEventListener("dragleave",h._handleDragLeave))},h._removeDragAndDropListeners=function(){h._ref.current&&(h._eventListenersAdded=!1,h._ref.current.removeEventListener("drop",h._handleDrop),h._ref.current.removeEventListener("dragover",h._handleDragOver),h._ref.current.removeEventListener("dragleave",h._handleDragLeave))},h.isDisposed=!1,h.componentId="17462473-3045-4835-b14e-3b1547691e91",h.instanceId=f._SPFlight.isEnabled(61343)&&i.instanceId||f.Guid.newGuid().toString(),h.props.serviceScope.whenFinished(function(){h._pageContext=h.props.serviceScope.consume(C.PageContext.serviceKey)}),null===(d=(o=h.props).forwardRef)||void 0===d||d.call(o,{openAdvancedEditor:h.openAdvancedEditor,openFilePicker:h.openFilePicker,handleDataPaste:h.handleDataPaste}),h.state={uploadError:void 0,isDragging:!1,candidateAltText:"",candidateAltTextConfidence:0,imageData:h.props.imageData,imageSourceType:Be(h.props.imageData.imageUrl||(null===(l=h.props.externalLink)||void 0===l?void 0:l.link)||""),loadingPhase:h.props.imageData.imageUrl||(null===(u=h.props.externalLink)||void 0===u?void 0:u.link)?xt.Downloading:xt.None,mode:Ae.None,showFilePicker:!1,showTextOverlay:!0,cacheBusterEntry:j()&&(null===(_=h.props.imageData.advancedImageEditorData)||void 0===_?void 0:_.isAdvancedEdited)?(0,it._getCacheBusterEntry)(h.props.imageData.uniqueId):void 0},h.dispose=function(){h.isDisposed=!0,f._SPEventManager.instance.unregisterEvent("IMAGE_URL_CACHE_BUSTER_MAP_CHANGED_REMOTELY",h,h._handleCacheBusterChangedRemotely)},(0,c.isControlHostCommunicatorForCoAuthEnabled)()&&h.props.serviceScope.whenFinished(function(){var e=i.serviceScope.consume(c.ControlHostCommunicatorEdit.serviceKey);h._unsubscribeDisposeEvent=e.on("disposed",function(){return h.setState({showFilePicker:!1})})}),h}return(0,e.__extends)(o,r),o.getDerivedStateFromProps=function(t,n){return(0,e.__assign)((0,e.__assign)({},n),{imageData:(0,e.__assign)((0,e.__assign)({},n.imageData),t.imageData),imageSourceType:Be(t.imageData.imageUrl),loadingPhase:t.imageData.imageUrl||n.loadingPhase!==xt.Completed?n.loadingPhase:xt.None})},o.prototype.componentDidMount=function(){var e;this._addDragAndDropListeners(),f._SPEventManager.instance.registerEvent("IMAGE_URL_CACHE_BUSTER_MAP_CHANGED_REMOTELY",this,this._handleCacheBusterChangedRemotely),this.props.imageBlob instanceof Blob?(this.setState({loadingPhase:xt.Uploading}),(0,T.Zf)()?this._localFilePreview():Dt({pageContext:this._pageContext,serviceScope:this.props.serviceScope,blobFile:this.props.imageBlob,stateImageUrl:this.state.imageData.imageUrl,propsImageUrl:this.props.imageData.imageUrl,onUploadStart:this._handleUploadStart,onUploadComplete:this._onUploadComplete,onUploadError:this._onUploadError})()):!(0,T.lf)()&&(null===(e=this.props.externalLink)||void 0===e?void 0:e.link)?function(e){var t,n,a=e.externalLink,i=e.pageContext,r=e.serviceScope,o=e.getSPFileHandler,s=e.setImageData,c=e.onUploadStart,d=e.onUploadComplete,l=e.onUploadError,u=Ve(a.link),p=(0,T.IL)()?a.link:Ne(a.link),m=(n={listId:a.listId,siteId:a.siteId,webId:a.webId,imageUrl:a.link,uniqueId:a.uniqueId,siteUrl:K()?a.siteUrl||"":void 0,fileName:p}).uniqueId&&n.siteId&&n.webId&&n.listId?{UniqueId:n.uniqueId,SiteId:n.siteId,WebId:n.webId,ListId:n.listId,FileName:n.fileName,Link:n.imageUrl,SiteUrl:K()?n.siteUrl:void 0}:void 0;wt({successResponse:{externalImagesPickedToUpload:u?[{src:a.link,name:p,id:null!==(t=a.uniqueId)&&void 0!==t?t:f.Guid.newGuid().toString(),contentProvider:a.contentProvider}]:[],selectedItems:u||!m?[]:[m]},persistedState:{alignment:void 0,overlayText:void 0,overlayTextStyles:void 0,imageShape:void 0},pageContext:i,serviceScope:r,stateImageUrl:a.link,propsImageUrl:a.link,getSPFileHandler:o,setImageData:s,onUploadStart:c,onUploadComplete:d,onUploadError:l})}({externalLink:this.props.externalLink,pageContext:this._pageContext,serviceScope:this.props.serviceScope,onUploadStart:this._handleUploadStart,setImageData:this._updateImageDimensionsFromFullImage,onUploadError:this._onUploadError,getSPFileHandler:this._ensureFileHandler,onUploadComplete:this._onUploadComplete}):this.props.renderedFromPersistedData||this.openFilePicker()},o.prototype.componentDidUpdate=function(){this.state.isDragging||this._eventListenersAdded||this._addDragAndDropListeners()},o.prototype.componentWillUnmount=function(){var e;this._eventListenersAdded&&this._removeDragAndDropListeners(),null===(e=this._unsubscribeDisposeEvent)||void 0===e||e.call(this)},o.prototype.render=function(){var e,n,i,r,o=!(this.props.isCaptionHidden||this.props.isFullWidth||this.state.uploadError),s=(0,a.css)(this._classNames&&this._classNames.root),c=o&&t.createElement($.CaptionElement,{useFigCaptionTag:!0,type:$.CaptionElementType.Caption,className:s,text:this.props.imageData.captionText,isEditMode:!0,onChange:this._handleCaptionTextChange,onHeightChange:this.props.onCaptionHeightChange,alignPosition:!(0,T.zg)()&&(r=null===(e=this.context)||void 0===e?void 0:e.hostType,Fe(r))?$.CaptionElementAlignPosition.PageDirection:void 0,placeholder:k.cH,moduleName:"ImageWebPart",allowResponsiveCaptionHeight:this.props.allowResponsiveCaptionHeight}),d=(0,a.mergeStyles)({display:"flex",flexDirection:"Left"===this.props.imageData.alignment?"row":"row-reverse",justifyContent:"Center"===this.props.imageData.alignment?"center":"unset",height:"100%",width:"100%"}),l=t.createElement(t.Fragment,null,this._imageEditController,c,!!this.state.uploadError&&this._errorMessageBar),u=(0,a.mergeStyles)({height:"100%",width:"",flexGrow:!(0,T.zg)()&&Qe(null===(n=this.context)||void 0===n?void 0:n.hostType)?1:void 0,maxWidth:!(0,T.zg)()&&Qe(null===(i=this.context)||void 0===i?void 0:i.hostType)?"100%":void 0,margin:0}),f=(0,a.mergeStyles)(d,(0,a.css)("p_c_eb846f79"));return t.createElement("div",{className:f,"data-automation-id":"imageEdit",ref:this._ref},this.state.isDragging&&Le,t.createElement("figure",{className:u},l))},Object.defineProperty(o.prototype,"_classNames",{get:function(){return Boolean(this.props.emphasisTheme)&&Et(tt,{variantTheme:this.props.emphasisTheme})},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_imageEditController",{get:function(){var n,i,r,o,s=this,d=this.props,l=d.toolBarActionCallbacks,u=d.callerId,f=d.containerWidth,p=d.isFullWidth,m=d.serviceScope,h=d.isOverlayTextEnabled,b=d.skipDownloadingSpinner,g=this.state,v=g.imageSourceType,y=g.loadingPhase,S=g.mode,D=g.showTextOverlay,x=this._isEditView,C=y===xt.Downloading&&Boolean(this.state.imageData.imageShape)&&this.state.imageData.imageShape!==nt.ImageShape.Default,O=(_()?y===xt.Completed||C:y===xt.Completed)&&Boolean(h)&&(Ae.None===S||Ae.Shape===S||Ae.Resize===S)&&D,w=Boolean(!(0,T.zg)()&&Fe(null===(i=this.context)||void 0===i?void 0:i.hostType)&&this.state.imageData.linkUrl&&y===xt.Completed),E=!(y===xt.None||y===xt.Completed||b&&y===xt.Downloading||_()&&C),A=x&&y!==xt.Uploading&&t.createElement(_t,{ref:l,callerId:u,imageData:this.state.imageData,containerWidth:f,currentMode:S,isFullWidth:Boolean(p),isFlexibleControl:this.props.isFlexibleControl,serviceScope:m,onEditComplete:function(e,t){t?s.setState({imageData:e,cacheBusterEntry:t}):s.setState({imageData:e}),s.props.onEditComplete&&s.props.onEditComplete(e)},updateImageData:this._updateImageData,onRenderComplete:this.props.onLazyTimeout,onImageLoadFailed:this._handleImageLoadFailed,onImageLoad:this._handleImageLoaded,onEditModeChange:function(e){return s.setState({mode:e})},updateTextOverlayDisplay:S===Ae.Resize?this._updateTextOverlayDisplay:void 0,isOverlayTextEnabled:h,saveAdvancedImageEdit:this.saveAdvancedImageEdit,saveShapeEdit:this.saveShapeEdit,cacheBusterEntry:j()&&(null===(r=this.state.imageData.advancedImageEditorData)||void 0===r?void 0:r.isAdvancedEdited)?(0,it._getCacheBusterEntry)(this.state.imageData.uniqueId):void 0});return t.createElement("div",{ref:this._imageEditControlRef,style:{height:E?"".concat(this._getReservedHeight(),"px"):void 0}},t.createElement("div",{"aria-label":x?k.DZ:void 0,className:(0,a.css)("x_c_eb846f79",(n={},n.z_c_eb846f79=mt(u),n.bg_c_eb846f79=!B()&&E,n)),"data-automation-id":x?"imageEditPreview":"imageEditFrame","data-sp-a11y-checker-user-fixable":!0},v===c.ImageSourceType.none&&y===xt.None&&this._placeHolder,E&&t.createElement(ue.Spinner,{size:a.SpinnerSize.large,label:y===xt.Uploading?k.lx:k.zh,className:B()?"bh_c_eb846f79":void 0}),O&&this._overlayTextField,w&&this._renderLink,A),U()&&this.state.showFilePicker&&t.createElement(I.SPFilePickerHostLoader,{serviceScope:m,show:this.state.showFilePicker,app:"SPPages",scenario:"SPImageEdit",siteUrl:this._pageContext.site.absoluteUrl,enableStockImagesTabs:["Stickers","Illustrations"],handleCancel:function(){return(0,e.__awaiter)(s,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return this._onFileCanceled(),this.setState({showFilePicker:!1}),[2]})})},handlePick:function(t){return(0,e.__awaiter)(s,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return(0,T.Zf)()?this._onFileSelectedOld(t):this._onFileSelected(t),this.setState({showFilePicker:!1}),[2]})})},useCustomRecentPivot:!0}),this.state.mode===Ae.AdvancedEditor&&t.createElement(ot.AdvancedEditor,{callerId:u||"ImageEdit",serviceScope:m,imageData:this.state.imageData,isOpen:this.state.mode===Ae.AdvancedEditor,handleClose:this.closeAdvancedEditor,handleSave:this.saveAdvancedImageEdit,cacheBuster:j()?null===(o=this.state.cacheBusterEntry)||void 0===o?void 0:o.cacheBuster:this.state.imageData.cacheBuster}))},enumerable:!1,configurable:!0}),o.prototype._getReservedHeight=function(){return(0,A.getDisplaySizeFromImageData)(this.state.imageData,this.props.containerWidth,this.props.isFlexibleControl).displayHeight||326},o.prototype._updateImageData=function(e){this.setState({imageData:e})},Object.defineProperty(o.prototype,"_isEditView",{get:function(){var e=this.state,t=e.imageSourceType,n=e.loadingPhase;return!(t===c.ImageSourceType.none&&n!==xt.Uploading)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_placeHolder",{get:function(){if(!this.props.hidePlaceholder){var e,n=this.props.imageData.roundedCorner,i=!z()||!f._SPFlight.isEnabled(62215)&&1!==f._SPExperiment.getVariantAndLogExposure(90078)||(0,T.tJ)()?k.FB:k.QN,r=k.wA;this.props.isAspectRatioLockedOnLoad&&this.props.aspectRatioOnLoad&&(e=Math.round(this.props.containerWidth/this.props.aspectRatioOnLoad));var o=t.createElement($.Placeholder,{icon:"Photo2",iconText:k.m7,description:i,buttonLabel:r,onAdd:this.openFilePicker,webpartWidth:this.props.containerWidth,placeholderHeight:e,contentClassName:(0,a.mergeStyles)({width:this.props.containerWidth,borderRadius:n,overflow:n?"hidden":"unset"})});if(f._SPFlight.isEnabled(60803)||f._SPFlight.isEnabled(60804)){var s={DefaultButton:{styles:bt}};o=t.createElement(t.Fragment,null,t.createElement($e.Customizer,{scopedSettings:s},o))}return o}},enumerable:!1,configurable:!0}),o.prototype._localFilePreview=function(e){var t=this.props.imageBlob||e&&e.localFilesPickedToUpload&&e.localFilesPickedToUpload.length>0&&e.localFilesPickedToUpload[0]&&e.localFilesPickedToUpload[0].file||void 0,n=e&&e.externalImagesPickedToUpload&&e.externalImagesPickedToUpload.length>0&&e.externalImagesPickedToUpload[0]||void 0;n&&Ve(n.src)&&(n=void 0);var a=(0,T.FK)()?this.props.imageData.imageUrl:t||n?void 0:this.state.imageData.imageUrl;(t||n)&&yt({serviceScope:this.props.serviceScope,pageContext:this._pageContext,localFile:t,externalFile:n,imageUrl:a,QosTag:"ImageUpload",onUploadComplete:this._onUploadComplete,onUploadError:this._onUploadError})},Object.defineProperty(o.prototype,"_renderLink",{get:function(){return t.createElement("div",{className:"bi_c_eb846f79"},t.createElement(i.Link,{href:this.state.imageData.linkUrl,target:"_blank",rel:"noopener noreferrer"},this.state.imageData.linkUrl))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_overlayTextField",{get:function(){var e,n=null===(e=this.context)||void 0===e?void 0:e.hostType,a=this.state.imageData,i=(0,A.getDisplaySizeFromImageData)(a,this.props.containerWidth,this.props.isFlexibleControl),r=i.displayWidth,o=i.displayHeight;return t.createElement(Xe,{text:a.overlayText,overlayTextStyles:a.overlayTextStyles,onChangeText:this._handleOverlayTextChange,onChangeStyle:this._handleOverlayTextStyleChanged,offset:0,hostWidth:r,hostHeight:o,qosPrefix:"ImageWebPart",styles:!(0,T.zg)()&&ze(n)?{marginLeft:0,position:"relative"}:void 0,enableDragging:!!(0,T.zg)()||Ge(n),webPartContext:(0,T.zg)()?this.props.webPartContext:void 0})},enumerable:!1,configurable:!0}),o.prototype._buildExclusionList=function(){var e=new Set;return!(0,T.Mi)()&&gt._ScribeUtilities.isScribeHosted(Number(this._pageContext.legacyPageContext.webTemplate))&&(e.add(1),e.add(2),e.add(3),e.add(5)),e},Object.defineProperty(o.prototype,"_errorMessageBar",{get:function(){var e;return e=this.state.uploadErrorSrc?t.createElement("span",null,k.Vq,t.createElement("br",null),t.createElement(i.Link,{className:"ay_c_eb846f79",href:this.state.uploadErrorSrc,onClick:this._handleClickSourceSite,target:"_blank"},k.mw)):this.state.uploadError?t.createElement("span",null,this.state.uploadError.message):void 0,t.createElement(et.MessageBar,{className:"ax_c_eb846f79",messageBarType:a.MessageBarType.error},e)},enumerable:!1,configurable:!0}),o.contextType=Je,o}(t.Component),kt=(0,Q.U)("AlignCenterVertical20Regular","20",["M10.5 18a.5.5 0 0 1-.5-.5V16H8a2 2 0 0 1-2-2v-1c0-1.1.9-2 2-2h2V9H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4V2.5a.5.5 0 0 1 1 0V4h4a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-4v2h2a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-2v1.5a.5.5 0 0 1-.5.5ZM6 5a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6Zm2 7a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1H8Z"]),Mt=(0,Q.U)("AlignCenterVertical24Regular","24",["M11.25 21.25V20h-2.5c-1.24 0-2.25-1-2.25-2.25v-2.5c0-1.24 1-2.25 2.25-2.25h2.5v-2h-4.5C5.51 11 4.5 10 4.5 8.75v-2.5C4.5 5.01 5.5 4 6.75 4h4.5V2.75a.75.75 0 0 1 1.5 0V4h4.5c1.24 0 2.25 1 2.25 2.25v2.5c0 1.24-1 2.25-2.25 2.25h-4.5v2h2.5c1.24 0 2.25 1 2.25 2.25v2.5c0 1.24-1 2.25-2.25 2.25h-2.5v1.25a.75.75 0 0 1-1.5 0Zm4-2.75c.41 0 .75-.34.75-.75v-2.5a.75.75 0 0 0-.75-.75h-6.5a.75.75 0 0 0-.75.75v2.5c0 .41.34.75.75.75h6.5Zm2-9c.41 0 .75-.34.75-.75v-2.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v2.5c0 .41.34.75.75.75h10.5Z"]),Pt=(0,Q.U)("AlignLeft20Regular","20",["M3.5 2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 1 0v-15a.5.5 0 0 0-.5-.5ZM7 11a2 2 0 0 0-2 2v1c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H7Zm-1 2a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-1ZM5 6c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6Zm2-1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H7Z"]),Tt=(0,Q.U)("AlignLeft24Regular","24",["M3 2.75a.75.75 0 0 1 1.5 0v18.5a.75.75 0 0 1-1.5 0V2.75ZM8.25 4C7.01 4 6 5 6 6.25v2.5C6 9.99 7 11 8.25 11h10.5C19.99 11 21 10 21 8.75v-2.5C21 5.01 20 4 18.75 4H8.25ZM7.5 6.25c0-.41.34-.75.75-.75h10.5c.41 0 .75.34.75.75v2.5c0 .41-.34.75-.75.75H8.25a.75.75 0 0 1-.75-.75v-2.5ZM8.25 13C7.01 13 6 14 6 15.25v2.5C6 18.99 7 20 8.25 20h7c1.24 0 2.25-1 2.25-2.25v-2.5c0-1.24-1-2.25-2.25-2.25h-7Zm-.75 2.25c0-.41.34-.75.75-.75h7c.41 0 .75.34.75.75v2.5c0 .41-.34.75-.75.75h-7a.75.75 0 0 1-.75-.75v-2.5Z"]),Ut=(0,Q.U)("AlignRight20Regular","20",["M16.5 2c.28 0 .5.22.5.5v15a.5.5 0 0 1-1 0v-15c0-.28.22-.5.5-.5ZM13 11a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-1c0-1.1.9-2 2-2h5Zm1 2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-1Zm1-7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v1c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V6Zm-2-1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h8Z"]),Ft=(0,Q.U)("AlignRight24Regular","24",["M21 2.75a.75.75 0 0 0-1.5 0v18.5a.75.75 0 0 0 1.5 0V2.75ZM15.75 4C16.99 4 18 5 18 6.25v2.5C18 9.99 17 11 15.75 11H5.25C4.01 11 3 10 3 8.75v-2.5C3 5.01 4 4 5.25 4h10.5Zm.75 2.25a.75.75 0 0 0-.75-.75H5.25a.75.75 0 0 0-.75.75v2.5c0 .41.34.75.75.75h10.5c.41 0 .75-.34.75-.75v-2.5ZM15.75 13c1.24 0 2.25 1 2.25 2.25v2.5c0 1.24-1 2.25-2.25 2.25h-7c-1.24 0-2.25-1-2.25-2.25v-2.5c0-1.24 1-2.25 2.25-2.25h7Zm.75 2.25a.75.75 0 0 0-.75-.75h-7a.75.75 0 0 0-.75.75v2.5c0 .41.34.75.75.75h7c.41 0 .75-.34.75-.75v-2.5Z"]),Ht=(0,Q.U)("Hexagon20Regular","20",["M6.83 4a.5.5 0 0 0-.44.25l-3.17 5.5a.5.5 0 0 0 0 .5l3.17 5.5a.5.5 0 0 0 .44.25h6.35a.5.5 0 0 0 .43-.25l3.17-5.5a.5.5 0 0 0 0-.5l-3.17-5.5a.5.5 0 0 0-.43-.25H6.83Zm-1.3-.25A1.5 1.5 0 0 1 6.83 3h6.35c.53 0 1.03.29 1.3.75l3.17 5.5a1.5 1.5 0 0 1 0 1.5l-3.17 5.5a1.5 1.5 0 0 1-1.3.75H6.83a1.5 1.5 0 0 1-1.3-.75l-3.18-5.5a1.5 1.5 0 0 1 0-1.5l3.18-5.5Z"]),Rt=(0,Q.U)("ImageAltText24Regular","24",["M1 3c0-1.1.9-2 2-2h7a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3Zm2.5 1a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-6Zm0 3a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-6Zm.5 5h1.5v6.75c0 .2.04.4.1.6l5.83-5.7a2.25 2.25 0 0 1 3.02-.12l.12.11 5.83 5.7c.06-.18.1-.38.1-.59V7.25c0-.97-.78-1.75-1.75-1.75H13V4h5.75C20.55 4 22 5.46 22 7.25v11.5c0 1.8-1.46 3.25-3.25 3.25H7.25A3.25 3.25 0 0 1 4 18.75V12Zm15.33 8.4-5.8-5.69a.75.75 0 0 0-.97-.07l-.08.07-5.81 5.7c.18.06.38.09.58.09h11.5c.2 0 .4-.03.58-.1ZM16.25 7.5a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm0 1.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"]),Nt=(0,Q.U)("ImageEdit24Regular","24",["M21 6.25C21 4.45 19.54 3 17.75 3H6.25A3.25 3.25 0 0 0 3 6.25v11.5C3 19.55 4.45 21 6.25 21h4.91l.36-1.42.02-.08H6.25c-.2 0-.4-.04-.58-.1l5.8-5.69.09-.07c.29-.2.7-.19.96.07l2.08 2.04 1.06-1.06-2.09-2.05-.13-.11a2.25 2.25 0 0 0-3.01.11l-5.83 5.7c-.06-.18-.1-.38-.1-.6V6.26c0-.97.78-1.75 1.75-1.75h11.5c.97 0 1.75.78 1.75 1.75v4.98c.48-.19 1-.26 1.5-.22V6.25Zm-3.5 2.5a2.25 2.25 0 1 0-4.5 0 2.25 2.25 0 0 0 4.5 0Zm-3 0a.75.75 0 1 1 1.5 0 .75.75 0 0 1-1.5 0Zm4.6 3.92-5.9 5.9c-.35.34-.6.78-.71 1.25l-.46 1.83c-.2.8.52 1.52 1.32 1.32l1.83-.46c.47-.12.9-.36 1.25-.7l5.9-5.9a2.29 2.29 0 0 0-3.23-3.24Z"]),Bt=(0,Q.U)("RectangleLandscape20Regular","20",["M2 7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V7Zm3-2a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5Z"]),jt=(0,Q.U)("ResizeImage24Regular","24",["M11 2.75a.75.75 0 0 0-.75-.75h-5A3.25 3.25 0 0 0 2 5.25v5a.75.75 0 0 0 1.5 0v-5c0-.97.78-1.75 1.75-1.75h5c.41 0 .75-.34.75-.75ZM13.75 2a.75.75 0 0 0 0 1.5h5c.97 0 1.75.78 1.75 1.75v5a.75.75 0 0 0 1.5 0v-5C22 3.45 20.54 2 18.75 2h-5Zm0 20a.75.75 0 0 1 0-1.5h5c.97 0 1.75-.78 1.75-1.75v-5a.75.75 0 0 1 1.5 0v5c0 1.8-1.46 3.25-3.25 3.25h-5ZM4 12a3 3 0 0 0-3 3v5c0 .56.15 1.08.42 1.52l3.49-3.49c.88-.88 2.3-.88 3.18 0l3.5 3.5c.26-.45.41-.97.41-1.53v-5a3 3 0 0 0-3-3H4Zm0 11c-.56 0-1.08-.15-1.52-.42l3.49-3.49c.3-.3.77-.3 1.06 0l3.5 3.5c-.45.26-.97.41-1.53.41H4Zm5-7a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"]),Vt=(0,Q.U)("Shapes20Regular","20",["M7.5 3a4.5 4.5 0 0 0-.5 8.97v1A5.5 5.5 0 1 1 12.98 7h-1A4.5 4.5 0 0 0 7.5 3Zm3 5A2.5 2.5 0 0 0 8 10.5v5a2.5 2.5 0 0 0 2.5 2.5h5a2.5 2.5 0 0 0 2.5-2.5v-5A2.5 2.5 0 0 0 15.5 8h-5ZM9 10.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5h-5A1.5 1.5 0 0 1 9 15.5v-5Z"]),zt=(0,Q.U)("TriangleUp20Regular","20",["M8.68 2.79a1.5 1.5 0 0 1 2.64 0l6.5 12a1.5 1.5 0 0 1-1.32 2.2h-13a1.5 1.5 0 0 1-1.32-2.2l6.5-12Zm1.76.47a.5.5 0 0 0-.88 0l-6.5 12a.5.5 0 0 0 .44.74h13a.5.5 0 0 0 .44-.74l-6.5-12Z"]),Gt=(0,Q.U)("WindowEdit20Regular","20",["M6 3a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h3.22l.21-.84.04-.16H6a2 2 0 0 1-2-2V7h12v2.23c.32-.14.66-.21 1-.23V6a3 3 0 0 0-3-3H6ZM4 6c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2H4Zm6.98 9.38 4.83-4.83a1.87 1.87 0 1 1 2.64 2.64l-4.83 4.83a2.2 2.2 0 0 1-1.02.58l-1.5.37a.89.89 0 0 1-1.07-1.07l.37-1.5c.1-.39.3-.74.58-1.02Z"]),Kt=(0,Q.U)("ArrowReset24Regular","24",["M6.78 2.72c.3.3.3.77 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75.75.75 0 0 1 1.5 0 6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5c.3-.3.77-.3 1.06 0Z"],{flipInRtl:!0}),Wt=(0,Q.U)("Circle20Regular","20",["M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z"]),qt=(0,Q.U)("Square24Regular","24",["M3 6.25C3 4.45 4.46 3 6.25 3h11.5C19.55 3 21 4.46 21 6.25v11.5c0 1.8-1.46 3.25-3.25 3.25H6.25A3.25 3.25 0 0 1 3 17.75V6.25ZM6.25 4.5c-.97 0-1.75.78-1.75 1.75v11.5c0 .97.78 1.75 1.75 1.75h11.5c.97 0 1.75-.78 1.75-1.75V6.25c0-.97-.78-1.75-1.75-1.75H6.25Z"]),Qt=(0,Q.U)("TeardropBottomRight20Regular","20",["M2 10a8 8 0 1 1 16 0v6a2 2 0 0 1-2 2h-6a8 8 0 0 1-8-8Zm8-7a7 7 0 0 0 0 14h6a1 1 0 0 0 1-1v-6a7 7 0 0 0-7-7Z"]);var Yt;function Jt(e){switch(e){case"AlignCenter":return t.createElement(Mt,null);case"AlignRight":return t.createElement(Ft,null);case"AlignLeft":return t.createElement(Tt,null)}}function Xt(e){switch(e){case"Center":return t.createElement(kt,null);case"Right":return t.createElement(Ut,null);case"Left":return t.createElement(Pt,null)}return t.createElement(kt,null)}function Zt(e){switch(e){case Yt.TextOverlay:return t.createElement(Rt,null);case Yt.Resize:return t.createElement(jt,null);case Yt.FilePicker:return t.createElement(Nt,null);case Yt.AdvancedEditing:return t.createElement(Gt,null);case Yt.Reset:return t.createElement(Kt,null)}}function $t(e){switch(e){case nt.ImageShape.Default:return t.createElement(Bt,null);case nt.ImageShape.Circle:return t.createElement(Wt,null);case nt.ImageShape.Triangle:return t.createElement(zt,null);case nt.ImageShape.Square:return t.createElement(qt,null);case nt.ImageShape.Hexagon:return t.createElement(Ht,null);case nt.ImageShape.Pebble:return nt.pebble20Regular;case nt.ImageShape.Teardrop:return t.createElement(Qt,null);default:return t.createElement(Vt,null)}}function en(e,n,a){switch(e){default:return t.createElement("svg",{width:n,height:a,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{className:"themeableSvgFill",d:"M16 12V13.0078H12.9922V16H12V13.0078H2.99219V4H0V3.00781H2.99219V0H4V3.00781H12.2891L15.1406 0.148438L15.8516 0.851562L12.9922 3.71094V12H16ZM4 4V11.2891L11.2891 4H4ZM12 12V4.71094L4.71094 12H12Z"}));case"1:1":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 14 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{className:"themeableSvgFill",d:"M14 0V14H0V0H14ZM13 1H1V13H13V1Z"}));case"2:3":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("rect",{className:"themeableSvgStroke",stroke:"currentColor",x:"0.5",y:"0.5",width:"9",height:"15"}));case"3:2":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 16 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("rect",{className:"themeableSvgStroke",stroke:"currentColor",x:"0.5",y:"0.5",width:"15",height:"9"}));case"3:4":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("rect",{className:"themeableSvgStroke",stroke:"currentColor",x:"0.5",y:"0.5",width:"11",height:"15"}));case"4:3":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{className:"themeableSvgStroke",d:"M0.5 0.5H15.5V10C15.5 10.8284 14.8284 11.5 14 11.5H2C1.17157 11.5 0.5 10.8284 0.5 10V0.5Z",stroke:"currentColor"}));case"16:9":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 16 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("rect",{className:"themeableSvgStroke",stroke:"currentColor",x:"0.5",y:"0.5",width:"15",height:"8"}));case"9:16":return t.createElement("svg",{width:n,height:a,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("rect",{className:"themeableSvgStroke",stroke:"currentColor",x:"0.5",y:"0.5",width:"8",height:"15"}))}}!function(e){e.TextOverlay="textOverlay",e.FilePicker="filePicker",e.Resize="resize",e.AspectRatio="aspectRatio",e.Alignment="alignment",e.Reset="reset",e.Save="save",e.AdvancedEditing="advancedEditing",e.Shapes="shapes"}(Yt||(Yt={}))})(),W})())})();
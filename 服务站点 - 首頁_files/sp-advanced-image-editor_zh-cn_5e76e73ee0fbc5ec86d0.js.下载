/*! For license information please see sp-advanced-image-editor_en-us_c7e10dca5d27642762c7.js.LICENSE.txt */
(()=>{var e=document.currentScript;define("444abf08-e4b4-4d65-b726-5a576c37e469_0.1.0",["tslib","react","@ms/office-ui-fabric-react-bundle","react-dom","@microsoft/load-themed-styles","@ms/uifabric-styling-bundle","@microsoft/sp-diagnostics","@ms/sp-component-utilities","@microsoft/sp-lodash-subset","@microsoft/sp-core-library","@ms/sp-edit-customer-promise","@ms/sp-rich-image","@ms/sp-fluentui-migration-dialog-bundle","@ms/sp-fluentui-migration-button-bundle","@ms/sp-fluentui-migration-modal-bundle"],(t,n,a,i,r,o,s,c,d,l,u,f,p,m,_)=>(()=>{var h,b,g,v,y,S={1948:(e,t,n)=>{"use strict";function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[K]}function r(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===W}(e)||Array.isArray(e)||!!e[G]||!!(null===(t=e.constructor)||void 0===t?void 0:t[G])||u(e)||f(e))}function o(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:q)(e).forEach(function(a){n&&"symbol"==typeof a||t(a,e[a],e)}):e.forEach(function(n,a){return t(a,n,e)})}function s(e){var t=e[K];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:u(e)?2:f(e)?3:0}function c(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t,n){var a=s(e);2===a?e.set(t,n):3===a?e.add(n):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function u(e){return B&&e instanceof Map}function f(e){return j&&e instanceof Set}function p(e){return e.o||e.t}function m(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Q(e);delete t[K];for(var n=q(t),a=0;a<n.length;a++){var i=n[a],r=t[i];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[i]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function _(e,t){return void 0===t&&(t=!1),b(e)||i(e)||!r(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),t&&o(e,function(e,t){return _(t,!0)},!0)),e}function h(){a(2)}function b(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function g(e){var t=Y[e];return t||a(18,e),t}function v(){return R}function y(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){D(e),e.p.forEach(x),e.p=null}function D(e){e===R&&(R=e.l)}function I(e){return R={p:[],l:R,h:e,m:!0,_:0}}function x(e){var t=e[K];0===t.i||1===t.i?t.j():t.O=!0}function C(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||g("ES5").S(t,e,i),i?(n[K].P&&(S(t),a(4)),r(e)&&(e=O(t,e),t.l||E(t,e)),t.u&&g("Patches").M(n[K].t,e,t.u,t.s)):e=O(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==z?e:void 0}function O(e,t,n){if(b(t))return t;var a=t[K];if(!a)return o(t,function(i,r){return w(e,a,t,i,r,n)},!0),t;if(a.A!==e)return t;if(!a.P)return E(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var i=4===a.i||5===a.i?a.o=m(a.k):a.o,r=i,s=!1;3===a.i&&(r=new Set(i),i.clear(),s=!0),o(r,function(t,r){return w(e,a,i,t,r,n,s)}),E(e,i,!1),n&&e.u&&g("Patches").N(a,n,e.u,e.s)}return a.o}function w(e,t,n,a,o,s,l){if(i(o)){var u=O(e,o,s&&t&&3!==t.i&&!c(t.R,a)?s.concat(a):void 0);if(d(n,a,u),!i(u))return;e.m=!1}else l&&n.add(o);if(r(o)&&!b(o)){if(!e.h.D&&e._<1)return;O(e,o),t&&t.A.l||E(e,o)}}function E(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&_(t,n)}function A(e,t){var n=e[K];return(n?p(n):e)[t]}function L(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function k(e){e.P||(e.P=!0,e.l&&k(e.l))}function M(e){e.o||(e.o=m(e.t))}function P(e,t,n){var a=u(t)?g("MapSet").F(t,n):f(t)?g("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),a={i:n?1:0,A:t?t.A:v(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=a,r=J;n&&(i=[a],r=X);var o=Proxy.revocable(i,r),s=o.revoke,c=o.proxy;return a.k=c,a.j=s,c}(t,n):g("ES5").J(t,n);return(n?n.A:v()).p.push(a),a}function T(e){return i(e)||a(22,e),function e(t){if(!r(t))return t;var n,a=t[K],i=s(t);if(a){if(!a.P&&(a.i<4||!g("ES5").K(a)))return a.t;a.I=!0,n=U(t,i),a.I=!1}else n=U(t,i);return o(n,function(t,i){a&&function(e,t){return 2===s(e)?e.get(t):e[t]}(a.t,t)===i||d(n,t,e(i))}),3===i?new Set(n):n}(e)}function U(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return m(e)}function F(){function e(e,t){var n=r[e];return n?n.enumerable=t:r[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[K];return J.get(t,e)},set:function(t){var n=this[K];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][K];if(!i.P)switch(i.i){case 5:a(i)&&k(i);break;case 4:n(i)&&k(i)}}}function n(e){for(var t=e.t,n=e.k,a=q(n),i=a.length-1;i>=0;i--){var r=a[i];if(r!==K){var o=t[r];if(void 0===o&&!c(t,r))return!0;var s=n[r],d=s&&s[K];if(d?d.t!==o:!l(s,o))return!0}}var u=!!t[K];return a.length!==q(t).length+(u?0:1)}function a(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var a=0;a<t.length;a++)if(!t.hasOwnProperty(a))return!0;return!1}var r={};!function(e,t){Y.ES5||(Y.ES5=t)}(0,{J:function(t,n){var a=Array.isArray(t),i=function(t,n){if(t){for(var a=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(a,""+i,e(i,!0));return a}var r=Q(n);delete r[K];for(var o=q(r),s=0;s<o.length;s++){var c=o[s];r[c]=e(c,t||!!r[c].enumerable)}return Object.create(Object.getPrototypeOf(n),r)}(a,t),r={i:a?5:4,A:n?n.A:v(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,K,{value:r,writable:!0}),i},S:function(e,n,r){r?i(n)&&n[K].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[K];if(n){var i=n.t,r=n.k,s=n.R,d=n.i;if(4===d)o(r,function(t){t!==K&&(void 0!==i[t]||c(i,t)?s[t]||e(r[t]):(s[t]=!0,k(n)))}),o(i,function(e){void 0!==r[e]||c(r,e)||(s[e]=!1,k(n))});else if(5===d){if(a(n)&&(k(n),s.length=!0),r.length<i.length)for(var l=r.length;l<i.length;l++)s[l]=!1;else for(var u=i.length;u<r.length;u++)s[u]=!0;for(var f=Math.min(r.length,i.length),p=0;p<f;p++)r.hasOwnProperty(p)||(s[p]=!0),void 0===s[p]&&e(r[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):a(e)}})}n.d(t,{Oy:()=>te,Vx:()=>i,bF:()=>F,e6:()=>r,gs:()=>T});var H,R,N="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,j="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,z=N?Symbol.for("immer-nothing"):((H={})["immer-nothing"]=!0,H),G=N?Symbol.for("immer-draftable"):"__$immer_draftable",K=N?Symbol.for("immer-state"):"__$immer_state",W=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Q=Object.getOwnPropertyDescriptors||function(e){var t={};return q(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Y={},J={get:function(e,t){if(t===K)return e;var n=p(e);if(!c(n,t))return function(e,t,n){var a,i=L(t,n);return i?"value"in i?i.value:null===(a=i.get)||void 0===a?void 0:a.call(e.k):void 0}(e,n,t);var a=n[t];return e.I||!r(a)?a:a===A(e.t,t)?(M(e),e.o[t]=P(e.A.h,a,e)):a},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var a=L(p(e),t);if(null==a?void 0:a.set)return a.set.call(e.k,n),!0;if(!e.P){var i=A(p(e),t),r=null==i?void 0:i[K];if(r&&r.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(l(n,i)&&(void 0!==n||c(e.t,t)))return!0;M(e),k(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==A(e.t,t)||t in e.t?(e.R[t]=!1,M(e),k(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){a(12)}},X={};o(J,function(e,t){X[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),X.deleteProperty=function(e,t){return X.set.call(this,e,t,void 0)},X.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var Z=function(){function e(e){var t=this;this.g=V,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=o);for(var a=arguments.length,i=Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];return s.produce(e,function(e){var a;return(a=n).call.apply(a,[t,e].concat(i))})}}var c;if("function"!=typeof n&&a(6),void 0!==i&&"function"!=typeof i&&a(7),r(e)){var d=I(t),l=P(t,e,void 0),u=!0;try{c=n(l),u=!1}finally{u?S(d):D(d)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then(function(e){return y(d,i),C(e,d)},function(e){throw S(d),e}):(y(d,i),C(c,d))}if(!e||"object"!=typeof e){if(void 0===(c=n(e))&&(c=e),c===z&&(c=void 0),t.D&&_(c,!0),i){var f=[],p=[];g("Patches").M(e,c,f,p),i(f,p)}return c}a(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var a=arguments.length,i=Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var a,i,r=t.produce(e,n,function(e,t){a=e,i=t});return"undefined"!=typeof Promise&&r instanceof Promise?r.then(function(e){return[e,a,i]}):[r,a,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){r(e)||a(8),i(e)&&(e=T(e));var t=I(this),n=P(this,e,void 0);return n[K].C=!0,D(t),n},t.finishDraft=function(e,t){var n=(e&&e[K]).A;return y(n,t),C(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!V&&a(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));var r=g("Patches").$;return i(e)?r(e,t):this.produce(e,function(e){return r(e,t)})},e}(),$=new Z,ee=$.produce;$.produceWithPatches.bind($),$.setAutoFreeze.bind($),$.setUseProxies.bind($),$.applyPatches.bind($),$.createDraft.bind($),$.finishDraft.bind($);const te=ee}
,8042:(e,t,n)=>{"use strict";n.d(t,{ES:()=>u,h0:()=>f,bB:()=>l,Ks:()=>d,IG:()=>p,XG:()=>c,bC:()=>i});var a={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],91:"OS",93:"ContextMenu",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},i={};for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];if("string"==typeof o)i[o]=Number(r);else for(var s=0;s<o.length;s++)i[o[s]]=Number(r)}var c=i[" "],d=(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i["~"],i["`"],i["!"],i["@"],i["#"],i["%"],i["^"],i["&"],i["+"]),l=i["-"],u=i["="],f=(i["/"],i["*"],i[","],i["."],i[":"],i[";"],i["|"],i["\\"],i["?"],i["'"],i['"'],i["{"],i["}"],i["("],i[")"],i["<"],i[">"],i["["]),p=i["]"];i.ArrowDown,i.ArrowLeft,i.ArrowRight,i.ArrowUp,i.End,i.Enter,i.Home,i.PageDown,i.PageUp,i.Tab}
,6078:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var a=n(5959);function i(e){var t=a.useRef();return void 0===t.current&&(t.current={value:"function"==typeof e?e():e}),t.current.value}}
,9349:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var a=n(5959),i=n(6078);function r(e,t,n){var r=a.useState(t),o=r[0],s=r[1],c=(0,i.d)(void 0!==e),d=c?e:o,l=a.useRef(d),u=a.useRef(n);a.useEffect(function(){l.current=d,u.current=n});var f=(0,i.d)(function(){return function(e,t){var n="function"==typeof e?e(l.current):e;u.current&&u.current(t,n),c||s(n)}});return[d,f]}}
,7864:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var a=n(5959),i=n(350);function r(e,t){var n=a.useRef(t);return n.current||(n.current=(0,i.getId)(e)),n.current}}
,7195:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(280),i=n(5959);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.useCallback(function(t){n.current=t;for(var a=0,i=e;a<i.length;a++){var r=i[a];"function"==typeof r?r(t):r&&(r.current=t)}},(0,a.__spreadArray)([],e,!0));return n}}
,5168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(5959);function i(e){var t=(0,a.useRef)();return(0,a.useEffect)(function(){t.current=e}),t.current}}
,386:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var a=n(5959),i=n(6078),r=function(){var e=(0,i.d)({});return a.useEffect(function(){return function(){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];clearTimeout(a)}}},[e]),(0,i.d)({setTimeout:function(t,n){var a=setTimeout(t,n);return e[a]=1,a},clearTimeout:function(t){delete e[t],clearTimeout(t)}})}}
,9248:(e,t,n)=>{"use strict";n.d(t,{XY:()=>o,Z0:()=>i,mx:()=>r});var a=n(5959),i=a.createContext({window:"object"==typeof window?window:void 0}),r=function(){return a.useContext(i).window},o=function(){var e;return null===(e=a.useContext(i).window)||void 0===e?void 0:e.document}}
,4459:(e,t,n)=>{"use strict";n.d(t,{JM:()=>d,U5:()=>K,$G:()=>W,vj:()=>l,DB:()=>se,gi:()=>o,Al:()=>i,zc:()=>m});var a=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.toString=function(){return"{W: ".concat(this.width,", H: ").concat(this.height,"}")},e.prototype.getClassName=function(){return"Size"},e.prototype.getHashCode=function(){return 397*(0|this.width)^(0|this.height)},e.prototype.copyFrom=function(e){this.width=e.width,this.height=e.height},e.prototype.copyFromFloats=function(e,t){return this.width=e,this.height=t,this},e.prototype.set=function(e,t){return this.copyFromFloats(e,t)},e.prototype.multiplyByFloats=function(t,n){return new e(this.width*t,this.height*n)},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.equals=function(e){return!!e&&this.width===e.width&&this.height===e.height},Object.defineProperty(e.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),e.Zero=function(){return new e(0,0)},e.prototype.add=function(t){return new e(this.width+t.width,this.height+t.height)},e.prototype.subtract=function(t){return new e(this.width-t.width,this.height-t.height)},e.Lerp=function(t,n,a){return new e(t.width+(n.width-t.width)*a,t.height+(n.height-t.height)*a)},e}(),i=function(){function e(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=a.Zero(),this._cachedBaseSize=a.Zero(),this._initialSamplingMode=2,this._texture=e,this._texture&&(this._engine=this._texture.getEngine())}return Object.defineProperty(e.prototype,"wrapU",{get:function(){return this._wrapU},set:function(e){this._wrapU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapV",{get:function(){return this._wrapV},set:function(e){this._wrapV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinatesMode",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCube",{get:function(){return!!this._texture&&this._texture.isCube},set:function(e){this._texture&&(this._texture.isCube=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is3D",{get:function(){return!!this._texture&&this._texture.is3D},set:function(e){this._texture&&(this._texture.is3D=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is2DArray",{get:function(){return!!this._texture&&this._texture.is2DArray},set:function(e){this._texture&&(this._texture.is2DArray=e)},enumerable:!1,configurable:!0}),e.prototype.getClassName=function(){return"ThinTexture"},e.prototype.isReady=function(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady},e.prototype.delayLoad=function(){},e.prototype.getInternalTexture=function(){return this._texture},e.prototype.getSize=function(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize},e.prototype.getBaseSize=function(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)},Object.defineProperty(e.prototype,"samplingMode",{get:function(){return this._texture?this._texture.samplingMode:this._initialSamplingMode},enumerable:!1,configurable:!0}),e.prototype.updateSamplingMode=function(e){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture)},e.prototype.releaseInternalTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null)},e.prototype.dispose=function(){this._texture&&(this.releaseInternalTexture(),this._engine=null)},e}(),r=n(280),o=function(e){function t(t,n,a){var i=e.call(this,null)||this;return i._renderTarget=null,i._engine=t,i._renderTargetOptions=a,i.resize(n),i}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:!1,configurable:!0}),t.prototype.resize=function(e){var t;null===(t=this._renderTarget)||void 0===t||t.dispose(),this._renderTarget=null,this._texture=null,this._size=e,this._engine&&(this._renderTarget=this._engine.createRenderTargetTexture(this._size,this._renderTargetOptions)),this._texture=this.renderTarget.texture},t.prototype.getInternalTexture=function(){return this._texture},t.prototype.getClassName=function(){return"ThinRenderTargetTexture"},t.prototype.dispose=function(e){var t;void 0===e&&(e=!1),null===(t=this._renderTarget)||void 0===t||t.dispose(!0),this._renderTarget=null,e||this.dispose()},t}(i),s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=function(){function e(){}return e.ALPHA_COMBINE=2,e.TEXTURE_CLAMP_ADDRESSMODE=0,e.TEXTURE_DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,e.TEXTUREFORMAT_LUMINANCE=1,e.TEXTUREFORMAT_RGB=4,e.TEXTUREFORMAT_RGBA=5,e.TEXTUREFORMAT_RED=6,e.TEXTURETYPE_UNSIGNED_BYTE=0,e.TEXTURE_TRILINEAR_SAMPLINGMODE=3,e.MATERIAL_LineListDrawMode=4,e.MATERIAL_LineLoopDrawMode=5,e}(),l=function(e){function t(n,a){var i=e.call(this,null)||this;return a=c(c({},t.DefaultOptions),a),i._generateMipMaps=a.generateMipMaps,i._samplingMode=a.samplingMode,i._engine=a.engine,i.element=n,i.anisotropicFilteringLevel=1,i._createInternalTexture(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._createInternalTexture=function(){var e,t;e=this.element.width,t=this.element.height;var n=this._engine;n&&(this._texture=n.createDynamicTexture(e,t,this._generateMipMaps,this._samplingMode)),this.update()},t.prototype.update=function(){var e=this._engine;if(null!=this._texture&&null!=e){var t=this.element;e.updateDynamicTexture(this._texture,t,!0,!1)}},t.DefaultOptions={generateMipMaps:!1,samplingMode:d.TEXTURE_TRILINEAR_SAMPLINGMODE,engine:null},t}(i),u=function(){function e(){this.references=0,this.capacity=0,this.is32Bits=!1,this.uniqueId=e._Counter++}return Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return null},enumerable:!1,configurable:!0}),e._Counter=0,e}(),f=function(){function e(){}return e.Slice=function(e,t,n){return e.slice?e.slice(t,n):Array.prototype.slice.call(e,t,n)},e.SliceToArray=function(e,t,n){return Array.isArray(e)?e.slice(t,n):Array.prototype.slice.call(e,t,n)},e}(),p=function(){function e(e,t,n,a,i,r,o,s){void 0===a&&(a=0),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),this._isAlreadyOwned=!1,e.getScene?this._engine=e.getScene().getEngine():this._engine=e,this._updatable=n,this._instanced=r,this._divisor=s||1,t instanceof u?(this._data=null,this._buffer=t):(this._data=t,this._buffer=null),this.byteStride=o?a:a*Float32Array.BYTES_PER_ELEMENT,i||this.create()}return e.prototype.createVertexBuffer=function(e,t,n,a,i,r,o){void 0===r&&(r=!1);var s=r?t:t*Float32Array.BYTES_PER_ELEMENT,c=a?r?a:a*Float32Array.BYTES_PER_ELEMENT:this.byteStride;return new m(this._engine,this,e,this._updatable,!0,c,void 0===i?this._instanced:i,s,n,void 0,void 0,!0,this._divisor||o)},e.prototype.isUpdatable=function(){return this._updatable},e.prototype.getData=function(){return this._data},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStrideSize=function(){return this.byteStride/Float32Array.BYTES_PER_ELEMENT},e.prototype.create=function(e){void 0===e&&(e=null),!e&&this._buffer||(e=e||this._data)&&(this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e),this._data=e):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(e),this._data=e):this._buffer=this._engine.createVertexBuffer(e))},e.prototype._rebuild=function(){this._buffer=null,this.create(this._data)},e.prototype.update=function(e){this.create(e)},e.prototype.updateDirectly=function(e,t,n,a){void 0===a&&(a=!1),this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e,a?t:t*Float32Array.BYTES_PER_ELEMENT,n?n*this.byteStride:void 0),this._data=0===t&&void 0===n?e:null)},e.prototype._increaseReferences=function(){this._buffer&&(this._isAlreadyOwned?this._buffer.references++:this._isAlreadyOwned=!0)},e.prototype.dispose=function(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null,this._data=null)},e}(),m=function(){function e(t,n,a,i,r,o,s,c,d,l,u,f,m,_){if(void 0===u&&(u=!1),void 0===f&&(f=!1),void 0===m&&(m=1),void 0===_&&(_=!1),n instanceof p?(this._buffer=n,this._ownsBuffer=_):(this._buffer=new p(t,n,i,o,r,s,f),this._ownsBuffer=!0),this.uniqueId=e._Counter++,this._kind=a,null==l){var h=this.getData();this.type=e.FLOAT,h instanceof Int8Array?this.type=e.BYTE:h instanceof Uint8Array?this.type=e.UNSIGNED_BYTE:h instanceof Int16Array?this.type=e.SHORT:h instanceof Uint16Array?this.type=e.UNSIGNED_SHORT:h instanceof Int32Array?this.type=e.INT:h instanceof Uint32Array&&(this.type=e.UNSIGNED_INT)}else this.type=l;var b=e.GetTypeByteLength(this.type);f?(this._size=d||(o?o/b:e.DeduceStride(a)),this.byteStride=o||this._buffer.byteStride||this._size*b,this.byteOffset=c||0):(this._size=d||o||e.DeduceStride(a),this.byteStride=o?o*b:this._buffer.byteStride||this._size*b,this.byteOffset=(c||0)*b),this.normalized=u,this._instanced=void 0!==s&&s,this._instanceDivisor=s?m:0,this._computeHashCode()}return Object.defineProperty(e.prototype,"instanceDivisor",{get:function(){return this._instanceDivisor},set:function(e){this._instanceDivisor=e,this._instanced=0!=e,this._computeHashCode()},enumerable:!1,configurable:!0}),e.prototype._computeHashCode=function(){this.hashCode=(this.type-5120<<0)+((this.normalized?1:0)<<3)+(this._size<<4)+((this._instanced?1:0)<<6)+(this.byteStride<<12)},e.prototype._rebuild=function(){this._buffer&&this._buffer._rebuild()},e.prototype.getKind=function(){return this._kind},e.prototype.isUpdatable=function(){return this._buffer.isUpdatable()},e.prototype.getData=function(){return this._buffer.getData()},e.prototype.getFloatData=function(t,n){var a=this.getData();if(!a)return null;var i=this.getSize()*e.GetTypeByteLength(this.type),r=t*this.getSize();if(this.type!==e.FLOAT||this.byteStride!==i){var o=new Float32Array(r);return this.forEach(r,function(e,t){return o[t]=e}),o}if(!(a instanceof Array||a instanceof Float32Array)||0!==this.byteOffset||a.length!==r){if(a instanceof Array){var s=this.byteOffset/4;return f.Slice(a,s,s+r)}if(a instanceof ArrayBuffer)return new Float32Array(a,this.byteOffset,r);if(s=a.byteOffset+this.byteOffset,n){var c=new Float32Array(r),d=new Float32Array(a.buffer,s,r);return c.set(d),c}var l=s%4;return l&&(s=Math.max(0,s-l)),new Float32Array(a.buffer,s,r)}return n?f.Slice(a):a},e.prototype.getBuffer=function(){return this._buffer.getBuffer()},e.prototype.getStrideSize=function(){return this.byteStride/e.GetTypeByteLength(this.type)},e.prototype.getOffset=function(){return this.byteOffset/e.GetTypeByteLength(this.type)},e.prototype.getSize=function(t){return void 0===t&&(t=!1),t?this._size*e.GetTypeByteLength(this.type):this._size},e.prototype.getIsInstanced=function(){return this._instanced},e.prototype.getInstanceDivisor=function(){return this._instanceDivisor},e.prototype.create=function(e){this._buffer.create(e)},e.prototype.update=function(e){this._buffer.update(e)},e.prototype.updateDirectly=function(e,t,n){void 0===n&&(n=!1),this._buffer.updateDirectly(e,t,void 0,n)},e.prototype.dispose=function(){this._ownsBuffer&&this._buffer.dispose()},e.prototype.forEach=function(t,n){e.ForEach(this._buffer.getData(),this.byteOffset,this.byteStride,this._size,this.type,t,this.normalized,n)},e.DeduceStride=function(t){switch(t){case e.UVKind:case e.UV2Kind:case e.UV3Kind:case e.UV4Kind:case e.UV5Kind:case e.UV6Kind:return 2;case e.NormalKind:case e.PositionKind:return 3;case e.ColorKind:case e.MatricesIndicesKind:case e.MatricesIndicesExtraKind:case e.MatricesWeightsKind:case e.MatricesWeightsExtraKind:case e.TangentKind:return 4;default:throw new Error("Invalid kind '"+t+"'")}},e.GetTypeByteLength=function(t){switch(t){case e.BYTE:case e.UNSIGNED_BYTE:return 1;case e.SHORT:case e.UNSIGNED_SHORT:return 2;case e.INT:case e.UNSIGNED_INT:case e.FLOAT:return 4;default:throw new Error("Invalid type '".concat(t,"'"))}},e.ForEach=function(t,n,a,i,r,o,s,c){if(t instanceof Array)for(var d=n/4,l=a/4,u=0;u<o;u+=i){for(var f=0;f<i;f++)c(t[d+f],u+f);d+=l}else{var p=t instanceof ArrayBuffer?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),m=e.GetTypeByteLength(r);for(u=0;u<o;u+=i){var _=n;for(f=0;f<i;f++)c(e._GetFloatValue(p,r,_,s),u+f),_+=m;n+=a}}},e._GetFloatValue=function(t,n,a,i){switch(n){case e.BYTE:var r=t.getInt8(a);return i&&(r=Math.max(r/127,-1)),r;case e.UNSIGNED_BYTE:return r=t.getUint8(a),i&&(r/=255),r;case e.SHORT:return r=t.getInt16(a,!0),i&&(r=Math.max(r/32767,-1)),r;case e.UNSIGNED_SHORT:return r=t.getUint16(a,!0),i&&(r/=65535),r;case e.INT:return t.getInt32(a,!0);case e.UNSIGNED_INT:return t.getUint32(a,!0);case e.FLOAT:return t.getFloat32(a,!0);default:throw new Error("Invalid component type ".concat(n))}},e._Counter=0,e.BYTE=5120,e.UNSIGNED_BYTE=5121,e.SHORT=5122,e.UNSIGNED_SHORT=5123,e.INT=5124,e.UNSIGNED_INT=5125,e.FLOAT=5126,e.PositionKind="position",e.NormalKind="normal",e.TangentKind="tangent",e.UVKind="uv",e.UV2Kind="uv2",e.UV3Kind="uv3",e.UV4Kind="uv4",e.UV5Kind="uv5",e.UV6Kind="uv6",e.ColorKind="color",e.ColorInstanceKind="instanceColor",e.MatricesIndicesKind="matricesIndices",e.MatricesWeightsKind="matricesWeights",e.MatricesIndicesExtraKind="matricesIndicesExtra",e.MatricesWeightsExtraKind="matricesWeightsExtra",e}(),_=function(){function e(e,t,n,a){this.x=e,this.y=t,this.width=n,this.height=a}return e.prototype.toGlobal=function(t,n){return new e(this.x*t,this.y*n,this.width*t,this.height*n)},e.prototype.toGlobalToRef=function(e,t,n){return n.x=this.x*e,n.y=this.y*t,n.width=this.width*e,n.height=this.height*t,this},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e}(),h=function(){function e(e,t,n,a){void 0===t&&(t=!1),this.initialize(e,t,n,a)}return e.prototype.initialize=function(e,t,n,a){return void 0===t&&(t=!1),this.mask=e,this.skipNextObservers=t,this.target=n,this.currentTarget=a,this},e}(),b=function(e,t,n){void 0===n&&(n=null),this.callback=e,this.mask=t,this.scope=n,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1},g=(function(){function e(){}e.prototype.dispose=function(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null},e.Watch=function(t,n,a,i){void 0===a&&(a=-1),void 0===i&&(i=null);var r=new e;r._observers=new Array,r._observables=t;for(var o=0,s=t;o<s.length;o++){var c=s[o].add(n,a,!1,i);c&&r._observers.push(c)}return r}}(),function(){function e(e){this._observers=new Array,this._eventState=new h(0),e&&(this._onObserverAdded=e)}return e.FromPromise=function(t,n){var a=new e;return t.then(function(e){a.notifyObservers(e)}).catch(function(e){if(!n)throw e;n.notifyObservers(e)}),a},Object.defineProperty(e.prototype,"observers",{get:function(){return this._observers},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t,n,a,i){if(void 0===t&&(t=-1),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===i&&(i=!1),!e)return null;var r=new b(e,t,a);return r.unregisterOnNextCall=i,n?this._observers.unshift(r):this._observers.push(r),this._onObserverAdded&&this._onObserverAdded(r),r},e.prototype.addOnce=function(e){return this.add(e,void 0,void 0,void 0,!0)},e.prototype.remove=function(e){return!!e&&-1!==this._observers.indexOf(e)&&(this._deferUnregister(e),!0)},e.prototype.removeCallback=function(e,t){for(var n=0;n<this._observers.length;n++){var a=this._observers[n];if(!(a._willBeUnregistered||a.callback!==e||t&&t!==a.scope))return this._deferUnregister(a),!0}return!1},e.prototype._deferUnregister=function(e){var t=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(function(){t._remove(e)},0)},e.prototype._remove=function(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)},e.prototype.makeObserverTopPriority=function(e){this._remove(e),this._observers.unshift(e)},e.prototype.makeObserverBottomPriority=function(e){this._remove(e),this._observers.push(e)},e.prototype.notifyObservers=function(e,t,n,a,i){if(void 0===t&&(t=-1),!this._observers.length)return!0;var r=this._eventState;r.mask=t,r.target=n,r.currentTarget=a,r.skipNextObservers=!1,r.lastReturnValue=e,r.userInfo=i;for(var o=0,s=this._observers;o<s.length;o++){var c=s[o];if(!c._willBeUnregistered&&(c.mask&t&&(c.scope?r.lastReturnValue=c.callback.apply(c.scope,[e,r]):r.lastReturnValue=c.callback(e,r),c.unregisterOnNextCall&&this._deferUnregister(c)),r.skipNextObservers))return!1}return!0},e.prototype.notifyObserversWithPromise=function(e,t,n,a,i){var r=this;void 0===t&&(t=-1);var o=Promise.resolve(e);if(!this._observers.length)return o;var s=this._eventState;return s.mask=t,s.target=n,s.currentTarget=a,s.skipNextObservers=!1,s.userInfo=i,this._observers.forEach(function(n){s.skipNextObservers||n._willBeUnregistered||n.mask&t&&(o=n.scope?o.then(function(t){return s.lastReturnValue=t,n.callback.apply(n.scope,[e,s])}):o.then(function(t){return s.lastReturnValue=t,n.callback(e,s)}),n.unregisterOnNextCall&&r._deferUnregister(n))}),o.then(function(){return e})},e.prototype.notifyObserver=function(e,t,n){if(void 0===n&&(n=-1),!e._willBeUnregistered){var a=this._eventState;a.mask=n,a.skipNextObservers=!1,e.callback(t,a),e.unregisterOnNextCall&&this._deferUnregister(e)}},e.prototype.hasObservers=function(){return this._observers.length>0},e.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},e.prototype.clone=function(){var t=new e;return t._observers=this._observers.slice(0),t},e.prototype.hasSpecificMask=function(e){void 0===e&&(e=-1);for(var t=0,n=this._observers;t<n.length;t++){var a=n[t];if(a.mask&e||a.mask===e)return!0}return!1},e}());function v(){return"undefined"!=typeof window}function y(){return"undefined"!=typeof navigator}function S(){return"undefined"!=typeof document}function D(e){for(var t="",n=e.firstChild;n;)3===n.nodeType&&(t+=n.textContent),n=n.nextSibling;return t}var I,x={IsWindowObjectExist:v,IsNavigatorAvailable:y,IsDocumentAvailable:S,GetDOMTextContent:D},C=function(){function e(){}return e._CheckLimit=function(t,n){var a=e._LogLimitOutputs[t];return a?a.current++:(a={limit:n,current:1},e._LogLimitOutputs[t]=a),a.current<=a.limit},e._GenerateLimitMessage=function(t,n){var a=e._LogLimitOutputs[t];if(a&&e.MessageLimitReached&&a.current===a.limit)switch(n){case 0:e.Log(e.MessageLimitReached.replace(/%LIMIT%/g,""+a.limit).replace(/%TYPE%/g,"log"));break;case 1:e.Warn(e.MessageLimitReached.replace(/%LIMIT%/g,""+a.limit).replace(/%TYPE%/g,"warning"));break;case 2:e.Error(e.MessageLimitReached.replace(/%LIMIT%/g,""+a.limit).replace(/%TYPE%/g,"error"))}},e._AddLogEntry=function(t){e._LogCache=t+e._LogCache,e.OnNewCacheEntry&&e.OnNewCacheEntry(t)},e._FormatMessage=function(e){var t=function(e){return e<10?"0"+e:""+e},n=new Date;return"["+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())+"]: "+e},e._LogDisabled=function(e,t){},e._LogEnabled=function(t,n){if(void 0===n||e._CheckLimit(t,n)){var a=e._FormatMessage(t);console.log("BJS - "+a);var i="<div style='color:white'>"+a+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,0)}},e._WarnDisabled=function(e,t){},e._WarnEnabled=function(t,n){if(void 0===n||e._CheckLimit(t,n)){var a=e._FormatMessage(t);console.warn("BJS - "+a);var i="<div style='color:orange'>"+t+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,1)}},e._ErrorDisabled=function(e,t){},e._ErrorEnabled=function(t,n){if(void 0===n||e._CheckLimit(t,n)){var a=e._FormatMessage(t);e.errorsCount++,console.error("BJS - "+a);var i="<div style='color:red'>"+a+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,2)}},Object.defineProperty(e,"LogCache",{get:function(){return e._LogCache},enumerable:!1,configurable:!0}),e.ClearLogCache=function(){e._LogCache="",e._LogLimitOutputs={},e.errorsCount=0},Object.defineProperty(e,"LogLevels",{set:function(t){(t&e.MessageLogLevel)===e.MessageLogLevel?e.Log=e._LogEnabled:e.Log=e._LogDisabled,(t&e.WarningLogLevel)===e.WarningLogLevel?e.Warn=e._WarnEnabled:e.Warn=e._WarnDisabled,(t&e.ErrorLogLevel)===e.ErrorLogLevel?e.Error=e._ErrorEnabled:e.Error=e._ErrorDisabled},enumerable:!1,configurable:!0}),e.NoneLogLevel=0,e.MessageLogLevel=1,e.WarningLogLevel=2,e.ErrorLogLevel=4,e.AllLogLevel=7,e.MessageLimitReached="Too many %TYPE%s (%LIMIT%), no more %TYPE%s will be reported for this message.",e._LogCache="",e._LogLimitOutputs={},e.errorsCount=0,e.Log=e._LogEnabled,e.Warn=e._WarnEnabled,e.Error=e._ErrorEnabled,e}(),O=function(e,t){return!!e&&0===e.indexOf(t)},w=function(e){return atob(e)},E=function(){function e(){this.children=[]}return e.prototype.isValid=function(e){return!0},e.prototype.process=function(e,t){var n="";if(this.line){var a=this.line,i=t.processor;i&&(i.lineProcessor&&(a=i.lineProcessor(a,t.isFragment,t.processingContext)),i.attributeProcessor&&O(this.line,"attribute")?a=i.attributeProcessor(this.line,e,t.processingContext):i.varyingProcessor&&O(this.line,"varying")?a=i.varyingProcessor(this.line,t.isFragment,e,t.processingContext):i.uniformProcessor&&i.uniformRegexp&&i.uniformRegexp.test(this.line)?t.lookForClosingBracketForUniformBuffer||(a=i.uniformProcessor(this.line,t.isFragment,e,t.processingContext)):i.uniformBufferProcessor&&i.uniformBufferRegexp&&i.uniformBufferRegexp.test(this.line)?t.lookForClosingBracketForUniformBuffer||(a=i.uniformBufferProcessor(this.line,t.isFragment,t.processingContext),t.lookForClosingBracketForUniformBuffer=!0):i.textureProcessor&&i.textureRegexp&&i.textureRegexp.test(this.line)?a=i.textureProcessor(this.line,t.isFragment,e,t.processingContext):(i.uniformProcessor||i.uniformBufferProcessor)&&O(this.line,"uniform")&&!t.lookForClosingBracketForUniformBuffer&&(/uniform\s+(?:(?:highp)?|(?:lowp)?)\s*(\S+)\s+(\S+)\s*;/.test(this.line)?i.uniformProcessor&&(a=i.uniformProcessor(this.line,t.isFragment,e,t.processingContext)):i.uniformBufferProcessor&&(a=i.uniformBufferProcessor(this.line,t.isFragment,t.processingContext),t.lookForClosingBracketForUniformBuffer=!0)),t.lookForClosingBracketForUniformBuffer&&-1!==this.line.indexOf("}")&&(t.lookForClosingBracketForUniformBuffer=!1,i.endOfUniformBufferProcessor&&(a=i.endOfUniformBufferProcessor(this.line,t.isFragment,t.processingContext)))),n+=a+"\r\n"}return this.children.forEach(function(a){n+=a.process(e,t)}),this.additionalDefineKey&&(e[this.additionalDefineKey]=this.additionalDefineValue||"true"),n},e}(),A=function(){function e(){}return Object.defineProperty(e.prototype,"currentLine",{get:function(){return this._lines[this.lineIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canRead",{get:function(){return this.lineIndex<this._lines.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lines",{set:function(e){this._lines=[];for(var t=0,n=e;t<n.length;t++){var a=n[t];if("#"!==a[0])for(var i=a.split(";"),r=0;r<i.length;r++){var o=i[r];(o=o.trim())&&this._lines.push(o+(r!==i.length-1?";":""))}else this._lines.push(a)}},enumerable:!1,configurable:!0}),e}(),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.process=function(e,t){for(var n=0;n<this.children.length;n++){var a=this.children[n];if(a.isValid(e))return a.process(e,t)}return""},t}(E),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.isValid=function(e){return this.testExpression.isTrue(e)},t}(E),M=function(){function e(){}return e.prototype.isTrue=function(e){return!0},e.postfixToInfix=function(t){for(var n=[],a=0,i=t;a<i.length;a++){var r=i[a];if(void 0===e._OperatorPriority[r])n.push(r);else{var o=n[n.length-1],s=n[n.length-2];n.length-=2,n.push("(".concat(s).concat(r).concat(o,")"))}}return n[n.length-1]},e.infixToPostfix=function(t){for(var n=[],a=-1,i=function(){""!==(d=d.trim())&&(n.push(d),d="")},r=function(t){a<e._Stack.length-1&&(e._Stack[++a]=t)},o=function(){return e._Stack[a]},s=function(){return-1===a?"!!INVALID EXPRESSION!!":e._Stack[a--]},c=0,d="";c<t.length;){var l=t.charAt(c),u=c<t.length-1?t.substr(c,2):"";if("("===l)d="",r(l);else if(")"===l){for(i();-1!==a&&"("!==o();)n.push(s());s()}else if(e._OperatorPriority[u]>1){for(i();-1!==a&&e._OperatorPriority[o()]>=e._OperatorPriority[u];)n.push(s());r(u),c++}else d+=l;c++}for(i();-1!==a;)"("===o()?s():n.push(s());return n},e._OperatorPriority={")":0,"(":1,"||":2,"&&":3},e._Stack=["","","","","","","","","","","","","","","","","","","",""],e}(),P=function(e){function t(t,n){void 0===n&&(n=!1);var a=e.call(this)||this;return a.define=t,a.not=n,a}return(0,r.__extends)(t,e),t.prototype.isTrue=function(e){var t=void 0!==e[this.define];return this.not&&(t=!t),t},t}(M),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.isTrue=function(e){return this.leftOperand.isTrue(e)||this.rightOperand.isTrue(e)},t}(M),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.isTrue=function(e){return this.leftOperand.isTrue(e)&&this.rightOperand.isTrue(e)},t}(M),F=function(e){function t(t,n,a){var i=e.call(this)||this;return i.define=t,i.operand=n,i.testValue=a,i}return(0,r.__extends)(t,e),t.prototype.isTrue=function(e){var t=e[this.define];void 0===t&&(t=this.define);var n=!1,a=parseInt(t),i=parseInt(this.testValue);switch(this.operand){case">":n=a>i;break;case"<":n=a<i;break;case"<=":n=a<=i;break;case">=":n=a>=i;break;case"==":n=a===i}return n},t}(M);function H(e){return"".concat(e," needs to be imported before as it contains a side-effect required by your code.")}!function(e){e[e.GLSL=0]="GLSL",e[e.WGSL=1]="WGSL"}(I||(I={}));var R=/defined\s*?\((.+?)\)/g,N=/defined\s*?\[(.+?)\]/g,B=function(){function e(){}return e.Initialize=function(e){e.processor&&e.processor.initializeShaders&&e.processor.initializeShaders(e.processingContext)},e.Process=function(e,t,n,a){var i,r=this;(null===(i=t.processor)||void 0===i?void 0:i.preProcessShaderCode)&&(e=t.processor.preProcessShaderCode(e,t.isFragment)),this._ProcessIncludes(e,t,function(e){t.processCodeAfterIncludes&&(e=t.processCodeAfterIncludes(t.isFragment?"fragment":"vertex",e));var i=r._ProcessShaderConversion(e,t,a);n(i)})},e.PreProcess=function(e,t,n,a){var i,r=this;(null===(i=t.processor)||void 0===i?void 0:i.preProcessShaderCode)&&(e=t.processor.preProcessShaderCode(e,t.isFragment)),this._ProcessIncludes(e,t,function(e){t.processCodeAfterIncludes&&(e=t.processCodeAfterIncludes(t.isFragment?"fragment":"vertex",e));var i=r._ApplyPreProcessing(e,t,a);n(i)})},e.Finalize=function(e,t,n){return n.processor&&n.processor.finalizeShaders?n.processor.finalizeShaders(e,t,n.processingContext):{vertexCode:e,fragmentCode:t}},e._ProcessPrecision=function(e,t){var n;if(null===(n=t.processor)||void 0===n?void 0:n.noPrecision)return e;var a=t.shouldUseHighPrecisionShader;return-1===e.indexOf("precision highp float")?e=a?"precision highp float;\n"+e:"precision mediump float;\n"+e:a||(e=e.replace("precision highp float","precision mediump float")),e},e._ExtractOperation=function(e){var t=/defined\((.+)\)/.exec(e);if(t&&t.length)return new P(t[1].trim(),"!"===e[0]);for(var n="",a=0,i=0,r=["==",">=","<=","<",">"];i<r.length&&(n=r[i],!((a=e.indexOf(n))>-1));i++);if(-1===a)return new P(e);var o=e.substring(0,a).trim(),s=e.substring(a+n.length).trim();return new F(o,n,s)},e._BuildSubExpression=function(e){e=e.replace(R,"defined[$1]");for(var t=[],n=0,a=M.infixToPostfix(e);n<a.length;n++){var i=a[n];if("||"!==i&&"&&"!==i)t.push(i);else if(t.length>=2){var r=t[t.length-1],o=t[t.length-2];t.length-=2;var s="&&"==i?new U:new T;"string"==typeof r&&(r=r.replace(N,"defined($1)")),"string"==typeof o&&(o=o.replace(N,"defined($1)")),s.leftOperand="string"==typeof o?this._ExtractOperation(o):o,s.rightOperand="string"==typeof r?this._ExtractOperation(r):r,t.push(s)}}var c=t[t.length-1];return"string"==typeof c&&(c=c.replace(N,"defined($1)")),"string"==typeof c?this._ExtractOperation(c):c},e._BuildExpression=function(e,t){var n=new k,a=e.substring(0,t),i=e.substring(t);return i=i.substring(0,(i.indexOf("//")+1||i.length+1)-1).trim(),n.testExpression="#ifdef"===a?new P(i):"#ifndef"===a?new P(i,!0):this._BuildSubExpression(i),n},e._MoveCursorWithinIf=function(e,t,n){for(var a=e.currentLine;this._MoveCursor(e,n);){var i=(a=e.currentLine).substring(0,5).toLowerCase();if("#else"===i){var r=new E;return t.children.push(r),void this._MoveCursor(e,r)}if("#elif"===i){var o=this._BuildExpression(a,5);t.children.push(o),n=o}}},e._MoveCursor=function(e,t){for(;e.canRead;){e.lineIndex++;var n=e.currentLine,a=/(#ifdef)|(#else)|(#elif)|(#endif)|(#ifndef)|(#if)/.exec(n);if(a&&a.length)switch(a[0]){case"#ifdef":var i=new L;t.children.push(i);var r=this._BuildExpression(n,6);i.children.push(r),this._MoveCursorWithinIf(e,i,r);break;case"#else":case"#elif":return!0;case"#endif":return!1;case"#ifndef":i=new L,t.children.push(i),r=this._BuildExpression(n,7),i.children.push(r),this._MoveCursorWithinIf(e,i,r);break;case"#if":i=new L,r=this._BuildExpression(n,3),t.children.push(i),i.children.push(r),this._MoveCursorWithinIf(e,i,r)}else{var o=new E;if(o.line=n,t.children.push(o),"#"===n[0]&&"d"===n[1]){var s=n.replace(";","").split(" ");o.additionalDefineKey=s[1],3===s.length&&(o.additionalDefineValue=s[2])}}}return!1},e._EvaluatePreProcessors=function(e,t,n){var a=new E,i=new A;return i.lineIndex=-1,i.lines=e.split("\n"),this._MoveCursor(i,a),a.process(t,n)},e._PreparePreProcessors=function(e,t){for(var n,a={},i=0,r=e.defines;i<r.length;i++){var o=r[i].replace("#define","").replace(";","").trim().split(" ");a[o[0]]=o.length>1?o[1]:""}return(null===(n=e.processor)||void 0===n?void 0:n.shaderLanguage)===I.GLSL&&(a.GL_ES="true"),a.__VERSION__=e.version,a[e.platformName]="true",t._getGlobalDefines(a),a},e._ProcessShaderConversion=function(e,t,n){var a=this._ProcessPrecision(e,t);if(!t.processor)return a;if(t.processor.shaderLanguage===I.GLSL&&-1!==a.indexOf("#version 3"))return a.replace("#version 300 es","");var i=t.defines,r=this._PreparePreProcessors(t,n);return t.processor.preProcessor&&(a=t.processor.preProcessor(a,i,t.isFragment,t.processingContext)),a=this._EvaluatePreProcessors(a,r,t),t.processor.postProcessor&&(a=t.processor.postProcessor(a,i,t.isFragment,t.processingContext,n)),n._features.needShaderCodeInlining&&(a=n.inlineShaderCode(a)),a},e._ApplyPreProcessing=function(e,t,n){var a,i,r=e,o=t.defines,s=this._PreparePreProcessors(t,n);return(null===(a=t.processor)||void 0===a?void 0:a.preProcessor)&&(r=t.processor.preProcessor(r,o,t.isFragment,t.processingContext)),r=this._EvaluatePreProcessors(r,s,t),(null===(i=t.processor)||void 0===i?void 0:i.postProcessor)&&(r=t.processor.postProcessor(r,o,t.isFragment,t.processingContext,n)),n._features.needShaderCodeInlining&&(r=n.inlineShaderCode(r)),r},e._ProcessIncludes=function(t,n,a){for(var i=this,r=/#include\s?<(.+)>(\((.*)\))*(\[(.*)\])*/g,o=r.exec(t),s=new String(t),c=!1,d=function(){var d=o[1];if(-1!==d.indexOf("__decl__")&&(d=d.replace(/__decl__/,""),n.supportsUniformBuffers&&(d=(d=d.replace(/Vertex/,"Ubo")).replace(/Fragment/,"Ubo")),d+="Declaration"),!n.includesShadersStore[d]){var l=n.shadersRepository+"ShadersInclude/"+d+".fx";return e._FileToolsLoadFile(l,function(e){n.includesShadersStore[d]=e,i._ProcessIncludes(s,n,a)}),{value:void 0}}var u=n.includesShadersStore[d];if(o[2])for(var f=o[3].split(","),p=0;p<f.length;p+=2){var m=new RegExp(f[p],"g"),_=f[p+1];u=u.replace(m,_)}if(o[4]){var h=o[5];if(-1!==h.indexOf("..")){var b=h.split(".."),g=parseInt(b[0]),v=parseInt(b[1]),y=u.slice(0);u="",isNaN(v)&&(v=n.indexParameters[b[1]]);for(var S=g;S<v;S++)n.supportsUniformBuffers||(y=y.replace(/light\{X\}.(\w*)/g,function(e,t){return t+"{X}"})),u+=y.replace(/\{X\}/g,S.toString())+"\n"}else n.supportsUniformBuffers||(u=u.replace(/light\{X\}.(\w*)/g,function(e,t){return t+"{X}"})),u=u.replace(/\{X\}/g,h)}s=s.replace(o[0],u),c=c||u.indexOf("#include<")>=0||u.indexOf("#include <")>=0,o=r.exec(t)};null!=o;){var l=d();if("object"==typeof l)return l.value}c?this._ProcessIncludes(s.toString(),n,a):a(s)},e._FileToolsLoadFile=function(e,t,n,a,i,r){throw H("FileTools")},e}(),j=function(){function e(){}return e.GetShadersRepository=function(t){return void 0===t&&(t=I.GLSL),t===I.GLSL?e.ShadersRepository:e.ShadersRepositoryWGSL},e.GetShadersStore=function(t){return void 0===t&&(t=I.GLSL),t===I.GLSL?e.ShadersStore:e.ShadersStoreWGSL},e.GetIncludesShadersStore=function(t){return void 0===t&&(t=I.GLSL),t===I.GLSL?e.IncludesShadersStore:e.IncludesShadersStoreWGSL},e.ShadersRepository="src/Shaders/",e.ShadersStore={},e.IncludesShadersStore={},e.ShadersRepositoryWGSL="src/ShadersWGSL/",e.ShadersStoreWGSL={},e.IncludesShadersStoreWGSL={},e}(),V=function(){function e(t,n,a,i,r,o,s,c,d,l,u,f){void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===c&&(c=null),void 0===d&&(d=null),void 0===u&&(u=""),void 0===f&&(f=I.GLSL);var p,m,_,h=this;this.name=null,this.defines="",this.onCompiled=null,this.onError=null,this.onBind=null,this.uniqueId=0,this.onCompileObservable=new g,this.onErrorObservable=new g,this._onBindObservable=null,this._wasPreviouslyReady=!1,this._bonesComputationForcedToCPU=!1,this._uniformBuffersNames={},this._multiTarget=!1,this._samplers={},this._isReady=!1,this._compilationError="",this._allFallbacksProcessed=!1,this._uniforms={},this._key="",this._fallbacks=null,this._vertexSourceCodeOverride="",this._fragmentSourceCodeOverride="",this._transformFeedbackVaryings=null,this._pipelineContext=null,this._vertexSourceCode="",this._fragmentSourceCode="",this._rawVertexSourceCode="",this._rawFragmentSourceCode="",this.name=t,this._key=u;var b,y,S=void 0,D=null;if(n.attributes){var x=n;if(this._engine=a,this._attributesNames=x.attributes,this._uniformsNames=x.uniformsNames.concat(x.samplers),this._samplerList=x.samplers.slice(),this.defines=x.defines,this.onError=x.onError,this.onCompiled=x.onCompiled,this._fallbacks=x.fallbacks,this._indexParameters=x.indexParameters,this._transformFeedbackVaryings=x.transformFeedbackVaryings||null,this._multiTarget=!!x.multiTarget,this._shaderLanguage=null!==(p=x.shaderLanguage)&&void 0!==p?p:I.GLSL,x.uniformBuffersNames){this._uniformBuffersNamesList=x.uniformBuffersNames.slice();for(var C=0;C<x.uniformBuffersNames.length;C++)this._uniformBuffersNames[x.uniformBuffersNames[C]]=C}D=null!==(m=x.processFinalCode)&&void 0!==m?m:null,S=null!==(_=x.processCodeAfterIncludes)&&void 0!==_?_:void 0}else this._engine=r,this.defines=null==o?"":o,this._uniformsNames=a.concat(i),this._samplerList=i?i.slice():[],this._attributesNames=n,this._uniformBuffersNamesList=[],this._shaderLanguage=f,this.onError=d,this.onCompiled=c,this._indexParameters=l,this._fallbacks=s;this._attributeLocationByName={},this.uniqueId=e._UniqueIdSeed++;var O=v()?this._engine.getHostDocument():null;t.vertexSource?b="source:"+t.vertexSource:t.vertexElement?(b=O?O.getElementById(t.vertexElement):null)||(b=t.vertexElement):b=t.vertex||t,t.fragmentSource?y="source:"+t.fragmentSource:t.fragmentElement?(y=O?O.getElementById(t.fragmentElement):null)||(y=t.fragmentElement):y=t.fragment||t,this._processingContext=this._engine._getShaderProcessingContext(this._shaderLanguage);var w={defines:this.defines.split("\n"),indexParameters:this._indexParameters,isFragment:!1,shouldUseHighPrecisionShader:this._engine._shouldUseHighPrecisionShader,processor:this._engine._getShaderProcessor(this._shaderLanguage),supportsUniformBuffers:this._engine.supportsUniformBuffers,shadersRepository:j.GetShadersRepository(this._shaderLanguage),includesShadersStore:j.GetIncludesShadersStore(this._shaderLanguage),version:(100*this._engine.version).toString(),platformName:this._engine.shaderPlatformName,processingContext:this._processingContext,isNDCHalfZRange:this._engine.isNDCHalfZRange,useReverseDepthBuffer:this._engine.useReverseDepthBuffer,processCodeAfterIncludes:S},E=[void 0,void 0],A=function(){if(E[0]&&E[1]){w.isFragment=!0;var e=E[0],n=E[1];B.Process(n,w,function(n){D&&(n=D("fragment",n));var a=B.Finalize(e,n,w);h._useFinalCode(a.vertexCode,a.fragmentCode,t)},h._engine)}};this._loadShader(b,"Vertex","",function(e){B.Initialize(w),B.Process(e,w,function(t){h._rawVertexSourceCode=e,D&&(t=D("vertex",t)),E[0]=t,A()},h._engine)}),this._loadShader(y,"Fragment","Pixel",function(e){h._rawFragmentSourceCode=e,E[1]=e,A()})}return Object.defineProperty(e,"ShadersRepository",{get:function(){return j.ShadersRepository},set:function(e){j.ShadersRepository=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new g),this._onBindObservable},enumerable:!1,configurable:!0}),e.prototype._useFinalCode=function(e,t,n){if(n){var a=n.vertexElement||n.vertex||n.spectorName||n,i=n.fragmentElement||n.fragment||n.spectorName||n;this._vertexSourceCode=(this._shaderLanguage===I.WGSL?"//":"")+"#define SHADER_NAME vertex:"+a+"\n"+e,this._fragmentSourceCode=(this._shaderLanguage===I.WGSL?"//":"")+"#define SHADER_NAME fragment:"+i+"\n"+t}else this._vertexSourceCode=e,this._fragmentSourceCode=t;this._prepareEffect()},Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),e.prototype.isReady=function(){try{return this._isReadyInternal()}catch(e){return!1}},e.prototype._isReadyInternal=function(){return!!this._isReady||!!this._pipelineContext&&this._pipelineContext.isReady},e.prototype.getEngine=function(){return this._engine},e.prototype.getPipelineContext=function(){return this._pipelineContext},e.prototype.getAttributesNames=function(){return this._attributesNames},e.prototype.getAttributeLocation=function(e){return this._attributes[e]},e.prototype.getAttributeLocationByName=function(e){return this._attributeLocationByName[e]},e.prototype.getAttributesCount=function(){return this._attributes.length},e.prototype.getUniformIndex=function(e){return this._uniformsNames.indexOf(e)},e.prototype.getUniform=function(e){return this._uniforms[e]},e.prototype.getSamplers=function(){return this._samplerList},e.prototype.getUniformNames=function(){return this._uniformsNames},e.prototype.getUniformBuffersNames=function(){return this._uniformBuffersNamesList},e.prototype.getIndexParameters=function(){return this._indexParameters},e.prototype.getCompilationError=function(){return this._compilationError},e.prototype.allFallbacksProcessed=function(){return this._allFallbacksProcessed},e.prototype.executeWhenCompiled=function(e){var t=this;this.isReady()?e(this):(this.onCompileObservable.add(function(t){e(t)}),this._pipelineContext&&!this._pipelineContext.isAsync||setTimeout(function(){t._checkIsReady(null)},16))},e.prototype._checkIsReady=function(e){var t=this;try{if(this._isReadyInternal())return}catch(t){return void this._processCompilationErrors(t,e)}setTimeout(function(){t._checkIsReady(e)},16)},e.prototype._loadShader=function(e,t,n,a){if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)a(D(e));else if("source:"!==e.substr(0,7))if("base64:"!==e.substr(0,7)){var i,r=j.GetShadersStore(this._shaderLanguage);r[e+t+"Shader"]?a(r[e+t+"Shader"]):n&&r[e+n+"Shader"]?a(r[e+n+"Shader"]):(i="."===e[0]||"/"===e[0]||e.indexOf("http")>-1?e:j.GetShadersRepository(this._shaderLanguage)+e,this._engine._loadFile(i+"."+t.toLowerCase()+".fx",a))}else a(window.atob(e.substr(7)));else a(e.substr(7))},Object.defineProperty(e.prototype,"vertexSourceCode",{get:function(){var e,t;return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._vertexSourceCodeOverride:null!==(t=null===(e=this._pipelineContext)||void 0===e?void 0:e._getVertexShaderCode())&&void 0!==t?t:this._vertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragmentSourceCode",{get:function(){var e,t;return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._fragmentSourceCodeOverride:null!==(t=null===(e=this._pipelineContext)||void 0===e?void 0:e._getFragmentShaderCode())&&void 0!==t?t:this._fragmentSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawVertexSourceCode",{get:function(){return this._rawVertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawFragmentSourceCode",{get:function(){return this._rawFragmentSourceCode},enumerable:!1,configurable:!0}),e.prototype._rebuildProgram=function(e,t,n,a){var i=this;this._isReady=!1,this._vertexSourceCodeOverride=e,this._fragmentSourceCodeOverride=t,this.onError=function(e,t){a&&a(t)},this.onCompiled=function(){var e=i.getEngine().scenes;if(e)for(var t=0;t<e.length;t++)e[t].markAllMaterialsAsDirty(63);i._pipelineContext._handlesSpectorRebuildCallback(n)},this._fallbacks=null,this._prepareEffect()},e.prototype._prepareEffect=function(){var e=this,t=this._attributesNames,n=this.defines,a=this._pipelineContext;this._isReady=!1;try{var i=this._engine;this._pipelineContext=i.createPipelineContext(this._processingContext),this._pipelineContext._name=this._key;var r=this._rebuildProgram.bind(this);this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?i._preparePipelineContext(this._pipelineContext,this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,!0,this._rawVertexSourceCode,this._rawFragmentSourceCode,r,null,this._transformFeedbackVaryings,this._key):i._preparePipelineContext(this._pipelineContext,this._vertexSourceCode,this._fragmentSourceCode,!1,this._rawVertexSourceCode,this._rawFragmentSourceCode,r,n,this._transformFeedbackVaryings,this._key),i._executeWhenRenderingStateIsCompiled(this._pipelineContext,function(){if(e._attributes=[],e._pipelineContext._fillEffectInformation(e,e._uniformBuffersNames,e._uniformsNames,e._uniforms,e._samplerList,e._samplers,t,e._attributes),t)for(var n=0;n<t.length;n++){var r=t[n];e._attributeLocationByName[r]=e._attributes[n]}i.bindSamplers(e),e._compilationError="",e._isReady=!0,e.onCompiled&&e.onCompiled(e),e.onCompileObservable.notifyObservers(e),e.onCompileObservable.clear(),e._fallbacks&&e._fallbacks.unBindMesh(),a&&e.getEngine()._deletePipelineContext(a)}),this._pipelineContext.isAsync&&this._checkIsReady(a)}catch(e){this._processCompilationErrors(e,a)}},e.prototype._getShaderCodeAndErrorLine=function(e,t,n){var a=n?/FRAGMENT SHADER ERROR: 0:(\d+?):/:/VERTEX SHADER ERROR: 0:(\d+?):/,i=null;if(t&&e){var r=t.match(a);if(r&&2===r.length){var o=parseInt(r[1]),s=e.split("\n",-1);s.length>=o&&(i="Offending line [".concat(o,"] in ").concat(n?"fragment":"vertex"," code: ").concat(s[o-1]))}}return[e,i]},e.prototype._processCompilationErrors=function(t,n){var a,i,r,o,s;void 0===n&&(n=null),this._compilationError=t.message;var c=this._attributesNames,d=this._fallbacks;if(C.Error("Unable to compile effect:"),C.Error("Uniforms: "+this._uniformsNames.map(function(e){return" "+e})),C.Error("Attributes: "+c.map(function(e){return" "+e})),C.Error("Defines:\r\n"+this.defines),e.LogShaderCodeOnCompilationError){var l=null,u=null,f=null;(null===(r=this._pipelineContext)||void 0===r?void 0:r._getVertexShaderCode())&&(f=(a=this._getShaderCodeAndErrorLine(this._pipelineContext._getVertexShaderCode(),this._compilationError,!1))[0],l=a[1],f&&(C.Error("Vertex code:"),C.Error(f))),(null===(o=this._pipelineContext)||void 0===o?void 0:o._getFragmentShaderCode())&&(f=(i=this._getShaderCodeAndErrorLine(null===(s=this._pipelineContext)||void 0===s?void 0:s._getFragmentShaderCode(),this._compilationError,!0))[0],u=i[1],f&&(C.Error("Fragment code:"),C.Error(f))),l&&C.Error(l),u&&C.Error(u)}C.Error("Error: "+this._compilationError),n&&(this._pipelineContext=n,this._isReady=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this)),d?(this._pipelineContext=null,d.hasMoreFallbacks?(this._allFallbacksProcessed=!1,C.Error("Trying next fallback."),this.defines=d.reduce(this.defines,this),this._prepareEffect()):(this._allFallbacksProcessed=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this),this.onErrorObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh())):this._allFallbacksProcessed=!0},Object.defineProperty(e.prototype,"isSupported",{get:function(){return""===this._compilationError},enumerable:!1,configurable:!0}),e.prototype._bindTexture=function(e,t){this._engine._bindTexture(this._samplers[e],t,e)},e.prototype.setTexture=function(e,t){this._engine.setTexture(this._samplers[e],this._uniforms[e],t,e)},e.prototype.setDepthStencilTexture=function(e,t){this._engine.setDepthStencilTexture(this._samplers[e],this._uniforms[e],t,e)},e.prototype.setTextureArray=function(e,t){var n=e+"Ex";if(-1===this._samplerList.indexOf(n+"0")){for(var a=this._samplerList.indexOf(e),i=1;i<t.length;i++){var r=n+(i-1).toString();this._samplerList.splice(a+i,0,r)}for(var o=0,s=0,c=this._samplerList;s<c.length;s++){var d=c[s];this._samplers[d]=o,o+=1}}this._engine.setTextureArray(this._samplers[e],this._uniforms[e],t,e)},e.prototype.setTextureFromPostProcess=function(e,t){this._engine.setTextureFromPostProcess(this._samplers[e],t,e)},e.prototype.setTextureFromPostProcessOutput=function(e,t){this._engine.setTextureFromPostProcessOutput(this._samplers[e],t,e)},e.prototype.bindUniformBuffer=function(t,n){var a=this._uniformBuffersNames[n];void 0===a||e._BaseCache[a]===t&&this._engine._features.useUBOBindingCache||(e._BaseCache[a]=t,this._engine.bindUniformBufferBase(t,a,n))},e.prototype.bindUniformBlock=function(e,t){this._engine.bindUniformBlock(this._pipelineContext,e,t)},e.prototype.setInt=function(e,t){return this._pipelineContext.setInt(e,t),this},e.prototype.setInt2=function(e,t,n){return this._pipelineContext.setInt2(e,t,n),this},e.prototype.setInt3=function(e,t,n,a){return this._pipelineContext.setInt3(e,t,n,a),this},e.prototype.setInt4=function(e,t,n,a,i){return this._pipelineContext.setInt4(e,t,n,a,i),this},e.prototype.setIntArray=function(e,t){return this._pipelineContext.setIntArray(e,t),this},e.prototype.setIntArray2=function(e,t){return this._pipelineContext.setIntArray2(e,t),this},e.prototype.setIntArray3=function(e,t){return this._pipelineContext.setIntArray3(e,t),this},e.prototype.setIntArray4=function(e,t){return this._pipelineContext.setIntArray4(e,t),this},e.prototype.setFloatArray=function(e,t){return this._pipelineContext.setArray(e,t),this},e.prototype.setFloatArray2=function(e,t){return this._pipelineContext.setArray2(e,t),this},e.prototype.setFloatArray3=function(e,t){return this._pipelineContext.setArray3(e,t),this},e.prototype.setFloatArray4=function(e,t){return this._pipelineContext.setArray4(e,t),this},e.prototype.setArray=function(e,t){return this._pipelineContext.setArray(e,t),this},e.prototype.setArray2=function(e,t){return this._pipelineContext.setArray2(e,t),this},e.prototype.setArray3=function(e,t){return this._pipelineContext.setArray3(e,t),this},e.prototype.setArray4=function(e,t){return this._pipelineContext.setArray4(e,t),this},e.prototype.setMatrices=function(e,t){return this._pipelineContext.setMatrices(e,t),this},e.prototype.setMatrix=function(e,t){return this._pipelineContext.setMatrix(e,t),this},e.prototype.setMatrix3x3=function(e,t){return this._pipelineContext.setMatrix3x3(e,t),this},e.prototype.setMatrix2x2=function(e,t){return this._pipelineContext.setMatrix2x2(e,t),this},e.prototype.setFloat=function(e,t){return this._pipelineContext.setFloat(e,t),this},e.prototype.setBool=function(e,t){return this._pipelineContext.setInt(e,t?1:0),this},e.prototype.setVector2=function(e,t){return this._pipelineContext.setVector2(e,t),this},e.prototype.setFloat2=function(e,t,n){return this._pipelineContext.setFloat2(e,t,n),this},e.prototype.setVector3=function(e,t){return this._pipelineContext.setVector3(e,t),this},e.prototype.setFloat3=function(e,t,n,a){return this._pipelineContext.setFloat3(e,t,n,a),this},e.prototype.setVector4=function(e,t){return this._pipelineContext.setVector4(e,t),this},e.prototype.setFloat4=function(e,t,n,a,i){return this._pipelineContext.setFloat4(e,t,n,a,i),this},e.prototype.setColor3=function(e,t){return this._pipelineContext.setColor3(e,t),this},e.prototype.setColor4=function(e,t,n){return this._pipelineContext.setColor4(e,t,n),this},e.prototype.setDirectColor4=function(e,t){return this._pipelineContext.setDirectColor4(e,t),this},e.prototype.dispose=function(){this._pipelineContext&&this._pipelineContext.dispose(),this._engine._releaseEffect(this)},e.RegisterShader=function(e,t,n,a){void 0===a&&(a=I.GLSL),t&&(j.GetShadersStore(a)["".concat(e,"PixelShader")]=t),n&&(j.GetShadersStore(a)["".concat(e,"VertexShader")]=n)},e.ResetCache=function(){e._BaseCache={}},e.LogShaderCodeOnCompilationError=!0,e._UniqueIdSeed=0,e._BaseCache={},e.ShadersStore=j.ShadersStore,e.IncludesShadersStore=j.IncludesShadersStore,e}(),z=function(){function e(e,t){void 0===t&&(t=!0),this.effect=null,this.defines=null,this.drawContext=e.createDrawContext(),t&&(this.materialContext=e.createMaterialContext())}return e.IsWrapper=function(e){return void 0===e.getPipelineContext},e.GetEffect=function(e){return void 0===e.getPipelineContext?e.effect:e},e.prototype.setEffect=function(e,t,n){var a;void 0===n&&(n=!0),this.effect=e,void 0!==t&&(this.defines=t),n&&(null===(a=this.drawContext)||void 0===a||a.reset())},e.prototype.dispose=function(){var e;null===(e=this.drawContext)||void 0===e||e.dispose()},e}();j.ShadersStore.postprocessVertexShader="attribute vec2 position;\nuniform vec2 scale;\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\nvUV=(position*madd+madd)*scale;\ngl_Position=vec4(position,0.0,1.0);\n#define CUSTOM_VERTEX_MAIN_END\n}";var G,K=function(){function e(t,n){var a;void 0===n&&(n=e._DefaultOptions);var i=this;this._engine=t,this._fullscreenViewport=new _(0,0,1,1),n=(0,r.__assign)((0,r.__assign)({},e._DefaultOptions),n),this._vertexBuffers=((a={})[m.PositionKind]=new m(t,n.positions,m.PositionKind,!1,!1,2),a),this._indexBuffer=t.createIndexBuffer(n.indices),this._onContextRestoredObserver=t.onContextRestoredObservable.add(function(){for(var e in i._indexBuffer=t.createIndexBuffer(n.indices),i._vertexBuffers)i._vertexBuffers[e]._rebuild()})}return e.prototype.setViewport=function(e){void 0===e&&(e=this._fullscreenViewport),this._engine.setViewport(e)},e.prototype.bindBuffers=function(e){this._engine.bindBuffers(this._vertexBuffers,this._indexBuffer,e)},e.prototype.applyEffectWrapper=function(e){this._engine.depthCullingState.depthTest=!1,this._engine.stencilState.stencilTest=!1,this._engine.enableEffect(e._drawWrapper),this.bindBuffers(e.effect),e.onApplyObservable.notifyObservers({})},e.prototype.restoreStates=function(){this._engine.depthCullingState.depthTest=!0,this._engine.stencilState.stencilTest=!0},e.prototype.draw=function(){this._engine.drawElementsType(0,0,6)},e.prototype._isRenderTargetTexture=function(e){return void 0!==e.renderTarget},e.prototype.render=function(e,t){if(void 0===t&&(t=null),e.effect.isReady()){this.setViewport();var n=null===t?null:this._isRenderTargetTexture(t)?t.renderTarget:t;n&&this._engine.bindFramebuffer(n),this.applyEffectWrapper(e),this.draw(),n&&this._engine.unBindFramebuffer(n),this.restoreStates()}},e.prototype.dispose=function(){var e=this._vertexBuffers[m.PositionKind];e&&(e.dispose(),delete this._vertexBuffers[m.PositionKind]),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._onContextRestoredObserver&&(this._engine.onContextRestoredObservable.remove(this._onContextRestoredObserver),this._onContextRestoredObserver=null)},e._DefaultOptions={positions:[1,1,-1,1,-1,-1,1,-1],indices:[0,1,2,0,2,3]},e}(),W=function(){function e(e){var t,n=this;this.onApplyObservable=new g;var a=e.uniformNames||[];e.vertexShader?t={fragmentSource:e.fragmentShader,vertexSource:e.vertexShader,spectorName:e.name||"effectWrapper"}:(a.push("scale"),t={fragmentSource:e.fragmentShader,vertex:"postprocess",spectorName:e.name||"effectWrapper"},this.onApplyObservable.add(function(){n.effect.setFloat2("scale",1,1)}));var i=e.defines?e.defines.join("\n"):"";this._drawWrapper=new z(e.engine),e.useShaderStore?(t.fragment=t.fragmentSource,t.vertex||(t.vertex=t.vertexSource),delete t.fragmentSource,delete t.vertexSource,this.effect=e.engine.createEffect(t,e.attributeNames||["position"],a,e.samplerNames,i,void 0,e.onCompiled,void 0,void 0,e.shaderLanguage)):(this.effect=new V(t,e.attributeNames||["position"],a,e.samplerNames,e.engine,i,void 0,e.onCompiled,void 0,void 0,void 0,e.shaderLanguage),this._onContextRestoredObserver=e.engine.onContextRestoredObservable.add(function(){n.effect._pipelineContext=null,n.effect._wasPreviouslyReady=!1,n.effect._prepareEffect()}))}return Object.defineProperty(e.prototype,"effect",{get:function(){return this._drawWrapper.effect},set:function(e){this._drawWrapper.effect=e},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._onContextRestoredObserver&&(this.effect.getEngine().onContextRestoredObservable.remove(this._onContextRestoredObserver),this._onContextRestoredObserver=null),this.effect.dispose()},e}(),q=function(){function e(){}return Object.defineProperty(e,"LastCreatedEngine",{get:function(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LastCreatedScene",{get:function(){return this._LastCreatedScene},enumerable:!1,configurable:!0}),e.Instances=new Array,e._LastCreatedScene=null,e.UseFallbackTexture=!0,e.FallbackTexture="",e}(),Q=function(){function e(e){void 0===e&&(e=!0),this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,e&&this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset!==e&&(this._zOffset=e,this._isZOffsetDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zOffsetUnits",{get:function(){return this._zOffsetUnits},set:function(e){this._zOffsetUnits!==e&&(this._zOffsetUnits=e,this._isZOffsetDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cullFace",{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,this._isCullFaceDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cull",{get:function(){return this._cull},set:function(e){this._cull!==e&&(this._cull=e,this._isCullDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthFunc",{get:function(){return this._depthFunc},set:function(e){this._depthFunc!==e&&(this._depthFunc=e,this._isDepthFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return this._depthMask},set:function(e){this._depthMask!==e&&(this._depthMask=e,this._isDepthMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return this._depthTest},set:function(e){this._depthTest!==e&&(this._depthTest=e,this._isDepthTestDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frontFace",{get:function(){return this._frontFace},set:function(e){this._frontFace!==e&&(this._frontFace=e,this._isFrontFaceDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1},e.prototype.apply=function(e){this.isDirty&&(this._isCullDirty&&(this.cull?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(e.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(e.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(e.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.zOffset,this.zOffsetUnits)):e.disable(e.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(e.frontFace(this.frontFace),this._isFrontFaceDirty=!1))},e}(),Y=function(){function e(){this.reset()}return e.prototype.reset=function(){this.enabled=!1,this.mask=255,this.func=e.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=e.KEEP,this.opDepthFail=e.KEEP,this.opStencilDepthPass=e.REPLACE},Object.defineProperty(e.prototype,"stencilFunc",{get:function(){return this.func},set:function(e){this.func=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncRef",{get:function(){return this.funcRef},set:function(e){this.funcRef=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncMask",{get:function(){return this.funcMask},set:function(e){this.funcMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilFail",{get:function(){return this.opStencilFail},set:function(e){this.opStencilFail=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpDepthFail",{get:function(){return this.opDepthFail},set:function(e){this.opDepthFail=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilDepthPass",{get:function(){return this.opStencilDepthPass},set:function(e){this.opStencilDepthPass=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilMask",{get:function(){return this.mask},set:function(e){this.mask=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilTest",{get:function(){return this.enabled},set:function(e){this.enabled=e},enumerable:!1,configurable:!0}),e.ALWAYS=519,e.KEEP=7680,e.REPLACE=7681,e}(),J=function(){function e(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaBlend",{get:function(){return this._alphaBlend},set:function(e){this._alphaBlend!==e&&(this._alphaBlend=e,this._isAlphaBlendDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.setAlphaBlendConstants=function(e,t,n,a){this._blendConstants[0]===e&&this._blendConstants[1]===t&&this._blendConstants[2]===n&&this._blendConstants[3]===a||(this._blendConstants[0]=e,this._blendConstants[1]=t,this._blendConstants[2]=n,this._blendConstants[3]=a,this._isBlendConstantsDirty=!0)},e.prototype.setAlphaBlendFunctionParameters=function(e,t,n,a){this._blendFunctionParameters[0]===e&&this._blendFunctionParameters[1]===t&&this._blendFunctionParameters[2]===n&&this._blendFunctionParameters[3]===a||(this._blendFunctionParameters[0]=e,this._blendFunctionParameters[1]=t,this._blendFunctionParameters[2]=n,this._blendFunctionParameters[3]=a,this._isBlendFunctionParametersDirty=!0)},e.prototype.setAlphaEquationParameters=function(e,t){this._blendEquationParameters[0]===e&&this._blendEquationParameters[1]===t||(this._blendEquationParameters[0]=e,this._blendEquationParameters[1]=t,this._isBlendEquationParametersDirty=!0)},e.prototype.reset=function(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1},e.prototype.apply=function(e){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?e.enable(e.BLEND):e.disable(e.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(e.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(e.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(e.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))},e}(),X=function(){function e(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}return Object.defineProperty(e.prototype,"wrapU",{get:function(){return this._cachedWrapU},set:function(e){this._cachedWrapU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapV",{get:function(){return this._cachedWrapV},set:function(e){this._cachedWrapV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapR",{get:function(){return this._cachedWrapR},set:function(e){this._cachedWrapR=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anisotropicFilteringLevel",{get:function(){return this._cachedAnisotropicFilteringLevel},set:function(e){this._cachedAnisotropicFilteringLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"comparisonFunction",{get:function(){return this._comparisonFunction},set:function(e){this._comparisonFunction=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useMipMaps",{get:function(){return this._useMipMaps},set:function(e){this._useMipMaps=e},enumerable:!1,configurable:!0}),e.prototype.setParameters=function(e,t,n,a,i,r){return void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===a&&(a=1),void 0===i&&(i=2),void 0===r&&(r=0),this._cachedWrapU=e,this._cachedWrapV=t,this._cachedWrapR=n,this._cachedAnisotropicFilteringLevel=a,this.samplingMode=i,this._comparisonFunction=r,this},e.prototype.compareSampler=function(e){return this._cachedWrapU===e._cachedWrapU&&this._cachedWrapV===e._cachedWrapV&&this._cachedWrapR===e._cachedWrapR&&this._cachedAnisotropicFilteringLevel===e._cachedAnisotropicFilteringLevel&&this.samplingMode===e.samplingMode&&this._comparisonFunction===e._comparisonFunction&&this._useMipMaps===e._useMipMaps},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Url=1]="Url",e[e.Temp=2]="Temp",e[e.Raw=3]="Raw",e[e.Dynamic=4]="Dynamic",e[e.RenderTarget=5]="RenderTarget",e[e.MultiRenderTarget=6]="MultiRenderTarget",e[e.Cube=7]="Cube",e[e.CubeRaw=8]="CubeRaw",e[e.CubePrefiltered=9]="CubePrefiltered",e[e.Raw3D=10]="Raw3D",e[e.Raw2DArray=11]="Raw2DArray",e[e.DepthStencil=12]="DepthStencil",e[e.CubeRawRGBD=13]="CubeRawRGBD",e[e.Depth=14]="Depth"}(G||(G={}));var Z=function(e){function t(n,a,i){void 0===i&&(i=!1);var r=e.call(this)||this;return r.isReady=!1,r.isCube=!1,r.is3D=!1,r.is2DArray=!1,r.isMultiview=!1,r.url="",r.generateMipMaps=!1,r.samples=0,r.type=-1,r.format=-1,r.onLoadedObservable=new g,r.onErrorObservable=new g,r.onRebuildCallback=null,r.width=0,r.height=0,r.depth=0,r.baseWidth=0,r.baseHeight=0,r.baseDepth=0,r.invertY=!1,r._invertVScale=!1,r._associatedChannel=-1,r._source=G.Unknown,r._buffer=null,r._bufferView=null,r._bufferViewArray=null,r._bufferViewArrayArray=null,r._size=0,r._extension="",r._files=null,r._workingCanvas=null,r._workingContext=null,r._cachedCoordinatesMode=null,r._isDisabled=!1,r._compression=null,r._sphericalPolynomial=null,r._sphericalPolynomialPromise=null,r._sphericalPolynomialComputed=!1,r._lodGenerationScale=0,r._lodGenerationOffset=0,r._useSRGBBuffer=!1,r._lodTextureHigh=null,r._lodTextureMid=null,r._lodTextureLow=null,r._isRGBD=!1,r._linearSpecularLOD=!1,r._irradianceTexture=null,r._hardwareTexture=null,r._maxLodLevel=null,r._references=1,r._gammaSpace=null,r._engine=n,r._source=a,r._uniqueId=t._Counter++,i||(r._hardwareTexture=n._createHardwareTexture()),r}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"useMipMaps",{get:function(){return this.generateMipMaps},set:function(e){this.generateMipMaps=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniqueId",{get:function(){return this._uniqueId},enumerable:!1,configurable:!0}),t.prototype.getEngine=function(){return this._engine},Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),t.prototype.incrementReferences=function(){this._references++},t.prototype.updateSize=function(e,t,n){void 0===n&&(n=1),this._engine.updateTextureDimensions(this,e,t,n),this.width=e,this.height=t,this.depth=n,this.baseWidth=e,this.baseHeight=t,this.baseDepth=n,this._size=e*t*n},t.prototype._rebuild=function(){var e,t=this;if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){var n=this.onRebuildCallback(this),a=function(e){e._swapAndDie(t,!1),t.isReady=n.isReady};n.isAsync?n.proxy.then(a):a(n.proxy)}else{var i;switch(this.source){case G.Temp:break;case G.Url:return void(i=this._engine.createTexture(null!==(e=this._originalUrl)&&void 0!==e?e:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,function(){i._swapAndDie(t,!1),t.isReady=!0},null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case G.Raw:(i=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type))._swapAndDie(this,!1),this.isReady=!0;break;case G.Raw3D:(i=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type))._swapAndDie(this,!1),this.isReady=!0;break;case G.Raw2DArray:(i=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type))._swapAndDie(this,!1),this.isReady=!0;break;case G.Dynamic:(i=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode))._swapAndDie(this,!1),this._engine.updateDynamicTexture(this,this._engine.getRenderingCanvas(),this.invertY,void 0,void 0,!0);break;case G.Cube:return void(i=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,function(){i._swapAndDie(t,!1),t.isReady=!0},null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer));case G.CubeRaw:(i=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this,!1),this.isReady=!0;break;case G.CubeRawRGBD:return;case G.CubePrefiltered:return void((i=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,function(e){e&&e._swapAndDie(t,!1),t.isReady=!0},null,this.format,this._extension))._sphericalPolynomial=this._sphericalPolynomial)}}},t.prototype._swapAndDie=function(e,t){var n;void 0===t&&(t=!0),null===(n=this._hardwareTexture)||void 0===n||n.setUsage(e._source,this.generateMipMaps,this.isCube,this.width,this.height),e._hardwareTexture=this._hardwareTexture,t&&(e._isRGBD=this._isRGBD),this._lodTextureHigh&&(e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(e._lodTextureLow&&e._lodTextureLow.dispose(),e._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(e._irradianceTexture&&e._irradianceTexture.dispose(),e._irradianceTexture=this._irradianceTexture);var a=this._engine.getLoadedTexturesCache(),i=a.indexOf(this);-1!==i&&a.splice(i,1),-1===(i=a.indexOf(e))&&a.push(e)},t.prototype.dispose=function(){this._references--,this.onLoadedObservable.clear(),this.onErrorObservable.clear(),0===this._references&&(this._engine._releaseTexture(this),this._hardwareTexture=null)},t._Counter=0,t}(X),$=function(){function e(){this.shaderLanguage=I.GLSL}return e.prototype.postProcessor=function(e,t,n,a,i){return i.getCaps().drawBuffersExtension||(e=e.replace(/#extension.+GL_EXT_draw_buffers.+(enable|require)/g,"")),e},e}(),ee=function(){function e(){this.shaderLanguage=I.GLSL}return e.prototype.attributeProcessor=function(e){return e.replace("attribute","in")},e.prototype.varyingProcessor=function(e,t){return e.replace("varying",t?"in":"out")},e.prototype.postProcessor=function(e,t,n){var a=-1!==e.search(/#extension.+GL_EXT_draw_buffers.+require/);if(e=(e=e.replace(/#extension.+(GL_OVR_multiview2|GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g,"")).replace(/texture2D\s*\(/g,"texture("),n)e=(e=(e=(e=(e=(e=(e=e.replace(/texture2DLodEXT\s*\(/g,"textureLod(")).replace(/textureCubeLodEXT\s*\(/g,"textureLod(")).replace(/textureCube\s*\(/g,"texture(")).replace(/gl_FragDepthEXT/g,"gl_FragDepth")).replace(/gl_FragColor/g,"glFragColor")).replace(/gl_FragData/g,"glFragData")).replace(/void\s+?main\s*\(/g,(a?"":"out vec4 glFragColor;\n")+"void main(");else if(-1!==t.indexOf("#define MULTIVIEW"))return"#extension GL_OVR_multiview2 : require\nlayout (num_views = 2) in;\n"+e;return e},e}(),te=function(e){function t(t){var n=e.call(this)||this;return n._buffer=t,n}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(u),ne=function(){function e(){this._valueCache={},this.vertexCompilationError=null,this.fragmentCompilationError=null,this.programLinkError=null,this.programValidationError=null}return Object.defineProperty(e.prototype,"isAsync",{get:function(){return this.isParallelCompiled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return!!this.program&&(!this.isParallelCompiled||this.engine._isRenderingStateCompiled(this))},enumerable:!1,configurable:!0}),e.prototype._handlesSpectorRebuildCallback=function(e){e&&this.program&&e(this.program)},e.prototype._fillEffectInformation=function(e,t,n,a,i,r,o,s){var c,d=this.engine;if(d.supportsUniformBuffers)for(var l in t)e.bindUniformBlock(l,t[l]);for(this.engine.getUniforms(this,n).forEach(function(e,t){a[n[t]]=e}),this._uniforms=a,c=0;c<i.length;c++)null==e.getUniform(i[c])&&(i.splice(c,1),c--);i.forEach(function(e,t){r[e]=t});for(var u=0,f=d.getAttributes(this,o);u<f.length;u++){var p=f[u];s.push(p)}},e.prototype.dispose=function(){this._uniforms={}},e.prototype._cacheMatrix=function(e,t){var n=this._valueCache[e],a=t.updateFlag;return(void 0===n||n!==a)&&(this._valueCache[e]=a,!0)},e.prototype._cacheFloat2=function(e,t,n){var a=this._valueCache[e];if(!a||2!==a.length)return a=[t,n],this._valueCache[e]=a,!0;var i=!1;return a[0]!==t&&(a[0]=t,i=!0),a[1]!==n&&(a[1]=n,i=!0),i},e.prototype._cacheFloat3=function(e,t,n,a){var i=this._valueCache[e];if(!i||3!==i.length)return i=[t,n,a],this._valueCache[e]=i,!0;var r=!1;return i[0]!==t&&(i[0]=t,r=!0),i[1]!==n&&(i[1]=n,r=!0),i[2]!==a&&(i[2]=a,r=!0),r},e.prototype._cacheFloat4=function(e,t,n,a,i){var r=this._valueCache[e];if(!r||4!==r.length)return r=[t,n,a,i],this._valueCache[e]=r,!0;var o=!1;return r[0]!==t&&(r[0]=t,o=!0),r[1]!==n&&(r[1]=n,o=!0),r[2]!==a&&(r[2]=a,o=!0),r[3]!==i&&(r[3]=i,o=!0),o},e.prototype.setInt=function(e,t){var n=this._valueCache[e];void 0!==n&&n===t||this.engine.setInt(this._uniforms[e],t)&&(this._valueCache[e]=t)},e.prototype.setInt2=function(e,t,n){this._cacheFloat2(e,t,n)&&(this.engine.setInt2(this._uniforms[e],t,n)||(this._valueCache[e]=null))},e.prototype.setInt3=function(e,t,n,a){this._cacheFloat3(e,t,n,a)&&(this.engine.setInt3(this._uniforms[e],t,n,a)||(this._valueCache[e]=null))},e.prototype.setInt4=function(e,t,n,a,i){this._cacheFloat4(e,t,n,a,i)&&(this.engine.setInt4(this._uniforms[e],t,n,a,i)||(this._valueCache[e]=null))},e.prototype.setIntArray=function(e,t){this._valueCache[e]=null,this.engine.setIntArray(this._uniforms[e],t)},e.prototype.setIntArray2=function(e,t){this._valueCache[e]=null,this.engine.setIntArray2(this._uniforms[e],t)},e.prototype.setIntArray3=function(e,t){this._valueCache[e]=null,this.engine.setIntArray3(this._uniforms[e],t)},e.prototype.setIntArray4=function(e,t){this._valueCache[e]=null,this.engine.setIntArray4(this._uniforms[e],t)},e.prototype.setArray=function(e,t){this._valueCache[e]=null,this.engine.setArray(this._uniforms[e],t)},e.prototype.setArray2=function(e,t){this._valueCache[e]=null,this.engine.setArray2(this._uniforms[e],t)},e.prototype.setArray3=function(e,t){this._valueCache[e]=null,this.engine.setArray3(this._uniforms[e],t)},e.prototype.setArray4=function(e,t){this._valueCache[e]=null,this.engine.setArray4(this._uniforms[e],t)},e.prototype.setMatrices=function(e,t){t&&(this._valueCache[e]=null,this.engine.setMatrices(this._uniforms[e],t))},e.prototype.setMatrix=function(e,t){this._cacheMatrix(e,t)&&(this.engine.setMatrices(this._uniforms[e],t.toArray())||(this._valueCache[e]=null))},e.prototype.setMatrix3x3=function(e,t){this._valueCache[e]=null,this.engine.setMatrix3x3(this._uniforms[e],t)},e.prototype.setMatrix2x2=function(e,t){this._valueCache[e]=null,this.engine.setMatrix2x2(this._uniforms[e],t)},e.prototype.setFloat=function(e,t){var n=this._valueCache[e];void 0!==n&&n===t||this.engine.setFloat(this._uniforms[e],t)&&(this._valueCache[e]=t)},e.prototype.setVector2=function(e,t){this._cacheFloat2(e,t.x,t.y)&&(this.engine.setFloat2(this._uniforms[e],t.x,t.y)||(this._valueCache[e]=null))},e.prototype.setFloat2=function(e,t,n){this._cacheFloat2(e,t,n)&&(this.engine.setFloat2(this._uniforms[e],t,n)||(this._valueCache[e]=null))},e.prototype.setVector3=function(e,t){this._cacheFloat3(e,t.x,t.y,t.z)&&(this.engine.setFloat3(this._uniforms[e],t.x,t.y,t.z)||(this._valueCache[e]=null))},e.prototype.setFloat3=function(e,t,n,a){this._cacheFloat3(e,t,n,a)&&(this.engine.setFloat3(this._uniforms[e],t,n,a)||(this._valueCache[e]=null))},e.prototype.setVector4=function(e,t){this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&(this.engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)||(this._valueCache[e]=null))},e.prototype.setFloat4=function(e,t,n,a,i){this._cacheFloat4(e,t,n,a,i)&&(this.engine.setFloat4(this._uniforms[e],t,n,a,i)||(this._valueCache[e]=null))},e.prototype.setColor3=function(e,t){this._cacheFloat3(e,t.r,t.g,t.b)&&(this.engine.setFloat3(this._uniforms[e],t.r,t.g,t.b)||(this._valueCache[e]=null))},e.prototype.setColor4=function(e,t,n){this._cacheFloat4(e,t.r,t.g,t.b,n)&&(this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,n)||(this._valueCache[e]=null))},e.prototype.setDirectColor4=function(e,t){this._cacheFloat4(e,t.r,t.g,t.b,t.a)&&(this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,t.a)||(this._valueCache[e]=null))},e.prototype._getVertexShaderCode=function(){return this.vertexShader?this.engine._getShaderSource(this.vertexShader):null},e.prototype._getFragmentShaderCode=function(){return this.fragmentShader?this.engine._getShaderSource(this.fragmentShader):null},e}(),ae=function(){function e(){}return e.SetMatrixPrecision=function(t){if(e.MatrixTrackPrecisionChange=!1,t&&!e.MatrixUse64Bits&&e.MatrixTrackedMatrices)for(var n=0;n<e.MatrixTrackedMatrices.length;++n){var a=e.MatrixTrackedMatrices[n],i=a._m;a._m=new Array(16);for(var r=0;r<16;++r)a._m[r]=i[r]}e.MatrixUse64Bits=t,e.MatrixCurrentType=e.MatrixUse64Bits?Array:Float32Array,e.MatrixTrackedMatrices=null},e.MatrixUse64Bits=!1,e.MatrixTrackPrecisionChange=!0,e.MatrixCurrentType=Float32Array,e.MatrixTrackedMatrices=[],e}(),ie=function(){function e(e,t){if(void 0===e&&(e=null),this._MSAARenderBuffer=null,this._context=t,!e&&!(e=t.createTexture()))throw new Error("Unable to create webGL texture");this.set(e)}return Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return this._webGLTexture},enumerable:!1,configurable:!0}),e.prototype.setUsage=function(){},e.prototype.set=function(e){this._webGLTexture=e},e.prototype.reset=function(){this._webGLTexture=null,this._MSAARenderBuffer=null},e.prototype.release=function(){this._MSAARenderBuffer&&(this._context.deleteRenderbuffer(this._MSAARenderBuffer),this._MSAARenderBuffer=null),this._webGLTexture&&this._context.deleteTexture(this._webGLTexture),this.reset()},e}(),re=function(){function e(e){void 0===e&&(e=!0),this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,e&&this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"func",{get:function(){return this._func},set:function(e){this._func!==e&&(this._func=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"funcRef",{get:function(){return this._funcRef},set:function(e){this._funcRef!==e&&(this._funcRef=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"funcMask",{get:function(){return this._funcMask},set:function(e){this._funcMask!==e&&(this._funcMask=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opStencilFail",{get:function(){return this._opStencilFail},set:function(e){this._opStencilFail!==e&&(this._opStencilFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opDepthFail",{get:function(){return this._opDepthFail},set:function(e){this._opDepthFail!==e&&(this._opDepthFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opStencilDepthPass",{get:function(){return this._opStencilDepthPass},set:function(e){this._opStencilDepthPass!==e&&(this._opStencilDepthPass=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask!==e&&(this._mask=e,this._isStencilMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this._isStencilTestDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){var e;this.stencilMaterial=void 0,null===(e=this.stencilGlobal)||void 0===e||e.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0},e.prototype.apply=function(e){var t;if(e){var n=!this.useStencilGlobalOnly&&!!(null===(t=this.stencilMaterial)||void 0===t?void 0:t.enabled);this.enabled=n?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=n?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=n?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=n?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=n?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=n?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=n?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=n?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(e.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(e.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(e.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}},e}(),oe=function(){},se=function(){function e(t,n,a,i){var r=this;this._name="WebGL",this.forcePOTTextures=!1,this.isFullscreen=!1,this.cullBackFaces=null,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this.validateShaderPrograms=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this.disableUniformBuffers=!1,this.onDisposeObservable=new g,this._frameId=0,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._webGLVersion=1,this._windowIsBackground=!1,this._highPrecisionShadersAllowed=!0,this._badOS=!1,this._badDesktopOS=!1,this._renderingQueueLaunched=!1,this._activeRenderLoops=new Array,this.onContextLostObservable=new g,this.onContextRestoredObservable=new g,this._contextWasLost=!1,this._doNotHandleContextLost=!1,this.disableVertexArrayObjects=!1,this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new Q,this._stencilStateComposer=new re,this._stencilState=new Y,this._alphaState=new J,this._alphaMode=1,this._alphaEquation=0,this._internalTexturesCache=new Array,this._renderTargetWrapperCache=new Array,this._activeChannel=0,this._currentTextureChannel=-1,this._boundTexturesCache={},this._compiledEffects={},this._vertexAttribArraysEnabled=[],this._uintIndicesCurrentlySet=!1,this._currentBoundBuffer=new Array,this._currentFramebuffer=null,this._dummyFramebuffer=null,this._currentBufferPointers=new Array,this._currentInstanceLocations=new Array,this._currentInstanceBuffers=new Array,this._vaoRecordInProgress=!1,this._mustWipeVertexAttributes=!1,this._nextFreeTextureSlots=new Array,this._maxSimultaneousTextures=0,this._activeRequests=new Array,this._adaptToDeviceRatio=!1,this._transformTextureUrl=null,this.hostInformation={isMobile:!1},this.premultipliedAlpha=!0,this.onBeforeTextureInitObservable=new g,this._isWebGPU=!1,this._snapshotRenderingMode=0,this._viewportCached={x:0,y:0,z:0,w:0},this._unpackFlipYCached=null,this.enableUnpackFlipYCached=!0,this._boundUniforms={};var o=null;if(a=a||{},this._creationOptions=a,this._adaptToDeviceRatio=null!=i&&i,this._stencilStateComposer.stencilGlobal=this._stencilState,ae.SetMatrixPrecision(!!a.useHighPrecisionMatrix),t){if(i=i||a.adaptToDeviceRatio||!1,t.getContext){if(o=t,this._renderingCanvas=o,void 0!==n&&(a.antialias=n),void 0===a.deterministicLockstep&&(a.deterministicLockstep=!1),void 0===a.lockstepMaxSteps&&(a.lockstepMaxSteps=4),void 0===a.timeStep&&(a.timeStep=1/60),void 0===a.preserveDrawingBuffer&&(a.preserveDrawingBuffer=!1),void 0===a.audioEngine&&(a.audioEngine=!0),void 0!==a.audioEngineOptions&&void 0!==a.audioEngineOptions.audioContext&&(this._audioContext=a.audioEngineOptions.audioContext),void 0!==a.audioEngineOptions&&void 0!==a.audioEngineOptions.audioDestination&&(this._audioDestination=a.audioEngineOptions.audioDestination),void 0===a.stencil&&(a.stencil=!0),!1===a.premultipliedAlpha&&(this.premultipliedAlpha=!1),void 0===a.xrCompatible&&(a.xrCompatible=!0),this._doNotHandleContextLost=!!a.doNotHandleContextLost,navigator&&navigator.userAgent){this._checkForMobile=function(){var e=navigator.userAgent;r.hostInformation.isMobile=-1!==e.indexOf("Mobile")||-1!==e.indexOf("Mac")&&S()&&"ontouchend"in document},this._checkForMobile(),v()&&window.addEventListener("resize",this._checkForMobile);for(var s=navigator.userAgent,c=0,d=e.ExceptionList;c<d.length;c++){var l=d[c],u=l.key,f=l.targets;if(new RegExp(u).test(s)){if(l.capture&&l.captureConstraint){var p=l.capture,m=l.captureConstraint,_=new RegExp(p).exec(s);if(_&&_.length>0&&parseInt(_[_.length-1])>=m)continue}for(var h=0,b=f;h<b.length;h++)switch(b[h]){case"uniformBuffer":this.disableUniformBuffers=!0;break;case"vao":this.disableVertexArrayObjects=!0}}}}if(this._doNotHandleContextLost||(this._onContextLost=function(e){e.preventDefault(),r._contextWasLost=!0,C.Warn("WebGL context lost."),r.onContextLostObservable.notifyObservers(r)},this._onContextRestored=function(){r._restoreEngineAfterContextLost(r._initGLContext.bind(r))},o.addEventListener("webglcontextlost",this._onContextLost,!1),o.addEventListener("webglcontextrestored",this._onContextRestored,!1),a.powerPreference="high-performance"),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this._badDesktopOS&&(a.xrCompatible=!1),!a.disableWebGL2Support)try{this._gl=o.getContext("webgl2",a)||o.getContext("experimental-webgl2",a),this._gl&&(this._webGLVersion=2,this._shaderPlatformName="WEBGL2",this._gl.deleteQuery||(this._webGLVersion=1,this._shaderPlatformName="WEBGL1"))}catch(e){}if(!this._gl){if(!o)throw new Error("The provided canvas is null or undefined.");try{this._gl=o.getContext("webgl",a)||o.getContext("experimental-webgl",a)}catch(e){throw new Error("WebGL not supported")}}if(!this._gl)throw new Error("WebGL not supported")}else{this._gl=t,this._renderingCanvas=this._gl.canvas,this._gl.renderbufferStorageMultisample?(this._webGLVersion=2,this._shaderPlatformName="WEBGL2"):this._shaderPlatformName="WEBGL1";var y=this._gl.getContextAttributes();y&&(a.stencil=y.stencil)}this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),void 0!==a.useHighPrecisionFloats&&(this._highPrecisionShadersAllowed=a.useHighPrecisionFloats);var D=v()&&window.devicePixelRatio||1,I=a.limitDeviceRatio||D;this._hardwareScalingLevel=i?1/Math.min(I,D):1,this.resize(),this._isStencilEnable=!!a.stencil,this._initGLContext(),this._initFeatures();for(var x=0;x<this._caps.maxVertexAttribs;x++)this._currentBufferPointers[x]=new oe;this._shaderProcessor=this.webGLVersion>1?new ee:new $,this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent);var O="Babylon.js v".concat(e.Version);console.log(O+" - ".concat(this.description)),this._renderingCanvas&&this._renderingCanvas.setAttribute&&this._renderingCanvas.setAttribute("data-engine",O)}}return Object.defineProperty(e,"NpmPackage",{get:function(){return"babylonjs@5.0.4"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Version",{get:function(){return"5.0.4"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){var e=this.name+this.webGLVersion;return this._caps.parallelShaderCompile&&(e+=" - Parallel shader compilation"),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._webGLVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ShadersRepository",{get:function(){return V.ShadersRepository},set:function(e){V.ShadersRepository=e},enumerable:!1,configurable:!0}),e.prototype._getShaderProcessor=function(e){return this._shaderProcessor},Object.defineProperty(e.prototype,"useReverseDepthBuffer",{get:function(){return this._useReverseDepthBuffer},set:function(e){e!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=e,this._depthCullingState.depthFunc=e?518:515)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameId",{get:function(){return this._frameId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsUniformBuffers",{get:function(){return this.webGLVersion>1&&!this.disableUniformBuffers},enumerable:!1,configurable:!0}),e.prototype.getCreationOptions=function(){return this._creationOptions},Object.defineProperty(e.prototype,"_shouldUseHighPrecisionShader",{get:function(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needPOTTextures",{get:function(){return this._webGLVersion<2||this.forcePOTTextures},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeRenderLoops",{get:function(){return this._activeRenderLoops},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doNotHandleContextLost",{get:function(){return this._doNotHandleContextLost},set:function(e){this._doNotHandleContextLost=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_supportsHardwareTextureRescaling",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"framebufferDimensionsObject",{set:function(e){this._framebufferDimensionsObject=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentViewport",{get:function(){return this._cachedViewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyTexture",{get:function(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyTexture3D",{get:function(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyTexture2DArray",{get:function(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyCubeTexture",{get:function(){if(!this._emptyCubeTexture){var e=new Uint8Array(4),t=[e,e,e,e,e,e];this._emptyCubeTexture=this.createRawCubeTexture(t,1,5,0,!1,!1,1)}return this._emptyCubeTexture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWebGPU",{get:function(){return this._isWebGPU},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shaderPlatformName",{get:function(){return this._shaderPlatformName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"snapshotRendering",{get:function(){return!1},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"snapshotRenderingMode",{get:function(){return this._snapshotRenderingMode},set:function(e){this._snapshotRenderingMode=e},enumerable:!1,configurable:!0}),e.prototype.snapshotRenderingReset=function(){this.snapshotRendering=!1},e._CreateCanvas=function(e,t){if("undefined"==typeof document)return new OffscreenCanvas(e,t);var n=document.createElement("canvas");return n.width=e,n.height=t,n},e.prototype.createCanvas=function(t,n){return e._CreateCanvas(t,n)},e.prototype.createCanvasImage=function(){return document.createElement("img")},e.prototype._restoreEngineAfterContextLost=function(e){var t=this;setTimeout(function(){return(0,r.__awaiter)(t,void 0,void 0,function(){var t,n,a,i,o;return(0,r.__generator)(this,function(r){switch(r.label){case 0:return this._dummyFramebuffer=null,t=this._depthCullingState.depthTest,n=this._depthCullingState.depthFunc,a=this._depthCullingState.depthMask,i=this._stencilState.stencilTest,[4,e()];case 1:return r.sent(),this._rebuildEffects(),null===(o=this._rebuildComputeEffects)||void 0===o||o.call(this),this._rebuildInternalTextures(),this._rebuildRenderTargetWrappers(),this._rebuildBuffers(),this.wipeCaches(!0),this._depthCullingState.depthTest=t,this._depthCullingState.depthFunc=n,this._depthCullingState.depthMask=a,this._stencilState.stencilTest=i,C.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1,[2]}})})},0)},e.prototype._sharedInit=function(e,t,n){this._renderingCanvas=e},e.prototype._getShaderProcessingContext=function(e){return null},e.prototype._rebuildInternalTextures=function(){for(var e=0,t=this._internalTexturesCache.slice();e<t.length;e++)t[e]._rebuild()},e.prototype._rebuildRenderTargetWrappers=function(){for(var e=0,t=this._renderTargetWrapperCache.slice();e<t.length;e++)t[e]._rebuild()},e.prototype._rebuildEffects=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e];t._pipelineContext=null,t._wasPreviouslyReady=!1,t._prepareEffect()}V.ResetCache()},e.prototype.areAllEffectsReady=function(){for(var e in this._compiledEffects)if(!this._compiledEffects[e].isReady())return!1;return!0},e.prototype._rebuildBuffers=function(){for(var e=0,t=this._uniformBuffers;e<t.length;e++)t[e]._rebuild();for(var n=0,a=this._storageBuffers;n<a.length;n++)a[n]._rebuild()},e.prototype._initGLContext=function(){this._caps={maxTexturesImageUnits:this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),maxCombinedTexturesImageUnits:this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),maxVertexTextureImageUnits:this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureSize:this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),maxSamples:this._webGLVersion>1?this._gl.getParameter(this._gl.MAX_SAMPLES):1,maxCubemapTextureSize:this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),maxRenderTextureSize:this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),maxVertexAttribs:this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),maxVaryingVectors:this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),maxFragmentUniformVectors:this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),maxVertexUniformVectors:this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),parallelShaderCompile:this._gl.getExtension("KHR_parallel_shader_compile")||void 0,standardDerivatives:this._webGLVersion>1||null!==this._gl.getExtension("OES_standard_derivatives"),maxAnisotropy:1,astc:this._gl.getExtension("WEBGL_compressed_texture_astc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"),bptc:this._gl.getExtension("EXT_texture_compression_bptc")||this._gl.getExtension("WEBKIT_EXT_texture_compression_bptc"),s3tc:this._gl.getExtension("WEBGL_compressed_texture_s3tc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),s3tc_srgb:this._gl.getExtension("WEBGL_compressed_texture_s3tc_srgb")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc_srgb"),pvrtc:this._gl.getExtension("WEBGL_compressed_texture_pvrtc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:this._gl.getExtension("WEBGL_compressed_texture_etc1")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),etc2:this._gl.getExtension("WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBGL_compressed_texture_es3_0"),textureAnisotropicFilterExtension:this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"),uintIndices:this._webGLVersion>1||null!==this._gl.getExtension("OES_element_index_uint"),fragmentDepthSupported:this._webGLVersion>1||null!==this._gl.getExtension("EXT_frag_depth"),highPrecisionShaderSupported:!1,timerQuery:this._gl.getExtension("EXT_disjoint_timer_query_webgl2")||this._gl.getExtension("EXT_disjoint_timer_query"),supportOcclusionQuery:this._webGLVersion>1,canUseTimestampForTimerQuery:!1,drawBuffersExtension:!1,maxMSAASamples:1,colorBufferFloat:!!(this._webGLVersion>1&&this._gl.getExtension("EXT_color_buffer_float")),textureFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_float")),textureHalfFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_half_float")),textureHalfFloatRender:!1,textureFloatLinearFiltering:!1,textureFloatRender:!1,textureHalfFloatLinearFiltering:!1,vertexArrayObject:!1,instancedArrays:!1,textureLOD:!!(this._webGLVersion>1||this._gl.getExtension("EXT_shader_texture_lod")),blendMinMax:!1,multiview:this._gl.getExtension("OVR_multiview2"),oculusMultiview:this._gl.getExtension("OCULUS_multiview"),depthTextureExtension:!1,canUseGLInstanceID:this._webGLVersion>1,canUseGLVertexID:this._webGLVersion>1,supportComputeShaders:!1,supportSRGBBuffers:!1,supportTransformFeedbacks:this._webGLVersion>1,textureMaxLevel:this._webGLVersion>1},this._glVersion=this._gl.getParameter(this._gl.VERSION);var e=this._gl.getExtension("WEBGL_debug_renderer_info");if(null!=e&&(this._glRenderer=this._gl.getParameter(e.UNMASKED_RENDERER_WEBGL),this._glVendor=this._gl.getParameter(e.UNMASKED_VENDOR_WEBGL)),this._glVendor||(this._glVendor=this._gl.getParameter(this._gl.VENDOR)||"Unknown vendor"),this._glRenderer||(this._glRenderer=this._gl.getParameter(this._gl.RENDERER)||"Unknown renderer"),36193!==this._gl.HALF_FLOAT_OES&&(this._gl.HALF_FLOAT_OES=36193),34842!==this._gl.RGBA16F&&(this._gl.RGBA16F=34842),34836!==this._gl.RGBA32F&&(this._gl.RGBA32F=34836),35056!==this._gl.DEPTH24_STENCIL8&&(this._gl.DEPTH24_STENCIL8=35056),this._caps.timerQuery&&(1===this._webGLVersion&&(this._gl.getQuery=this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)),this._caps.canUseTimestampForTimerQuery=this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT,this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)>0),this._caps.maxAnisotropy=this._caps.textureAnisotropicFilterExtension?this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this._caps.textureFloatLinearFiltering=!(!this._caps.textureFloat||!this._gl.getExtension("OES_texture_float_linear")),this._caps.textureFloatRender=!(!this._caps.textureFloat||!this._canRenderToFloatFramebuffer()),this._caps.textureHalfFloatLinearFiltering=!!(this._webGLVersion>1||this._caps.textureHalfFloat&&this._gl.getExtension("OES_texture_half_float_linear")),this._caps.astc&&(this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR),this._caps.bptc&&(this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT),this._caps.s3tc_srgb&&(this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),this._webGLVersion>1&&5131!==this._gl.HALF_FLOAT_OES&&(this._gl.HALF_FLOAT_OES=5131),this._caps.textureHalfFloatRender=this._caps.textureHalfFloat&&this._canRenderToHalfFloatFramebuffer(),this._webGLVersion>1)this._caps.drawBuffersExtension=!0,this._caps.maxMSAASamples=this._gl.getParameter(this._gl.MAX_SAMPLES);else{var t=this._gl.getExtension("WEBGL_draw_buffers");if(null!==t){this._caps.drawBuffersExtension=!0,this._gl.drawBuffers=t.drawBuffersWEBGL.bind(t),this._gl.DRAW_FRAMEBUFFER=this._gl.FRAMEBUFFER;for(var n=0;n<16;n++)this._gl["COLOR_ATTACHMENT"+n+"_WEBGL"]=t["COLOR_ATTACHMENT"+n+"_WEBGL"]}}if(this._webGLVersion>1)this._caps.depthTextureExtension=!0;else{var a=this._gl.getExtension("WEBGL_depth_texture");null!=a&&(this._caps.depthTextureExtension=!0,this._gl.UNSIGNED_INT_24_8=a.UNSIGNED_INT_24_8_WEBGL)}if(this.disableVertexArrayObjects)this._caps.vertexArrayObject=!1;else if(this._webGLVersion>1)this._caps.vertexArrayObject=!0;else{var i=this._gl.getExtension("OES_vertex_array_object");null!=i&&(this._caps.vertexArrayObject=!0,this._gl.createVertexArray=i.createVertexArrayOES.bind(i),this._gl.bindVertexArray=i.bindVertexArrayOES.bind(i),this._gl.deleteVertexArray=i.deleteVertexArrayOES.bind(i))}if(this._webGLVersion>1)this._caps.instancedArrays=!0;else{var r=this._gl.getExtension("ANGLE_instanced_arrays");null!=r?(this._caps.instancedArrays=!0,this._gl.drawArraysInstanced=r.drawArraysInstancedANGLE.bind(r),this._gl.drawElementsInstanced=r.drawElementsInstancedANGLE.bind(r),this._gl.vertexAttribDivisor=r.vertexAttribDivisorANGLE.bind(r)):this._caps.instancedArrays=!1}if(this._gl.getShaderPrecisionFormat){var o=this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER,this._gl.HIGH_FLOAT),s=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);o&&s&&(this._caps.highPrecisionShaderSupported=0!==o.precision&&0!==s.precision)}if(this._webGLVersion>1)this._caps.blendMinMax=!0;else{var c=this._gl.getExtension("EXT_blend_minmax");null!=c&&(this._caps.blendMinMax=!0,this._gl.MAX=c.MAX_EXT,this._gl.MIN=c.MIN_EXT)}if(!this._caps.supportSRGBBuffers){if(this._webGLVersion>1)this._caps.supportSRGBBuffers=!0;else{var d=this._gl.getExtension("EXT_sRGB");null!=d&&(this._caps.supportSRGBBuffers=!0,this._gl.SRGB=d.SRGB_EXT,this._gl.SRGB8=d.SRGB_ALPHA_EXT,this._gl.SRGB8_ALPHA8=d.SRGB_ALPHA_EXT)}this._caps.supportSRGBBuffers=this._caps.supportSRGBBuffers&&!(!this._creationOptions||!this._creationOptions.forceSRGBBufferSupportState)}this._depthCullingState.depthTest=!0,this._depthCullingState.depthFunc=this._gl.LEQUAL,this._depthCullingState.depthMask=!0,this._maxSimultaneousTextures=this._caps.maxCombinedTexturesImageUnits;for(var l=0;l<this._maxSimultaneousTextures;l++)this._nextFreeTextureSlots.push(l)},e.prototype._initFeatures=function(){this._features={forceBitmapOverHTMLImageElement:!1,supportRenderAndCopyToLodForFloatTextures:1!==this._webGLVersion,supportDepthStencilTexture:1!==this._webGLVersion,supportShadowSamplers:1!==this._webGLVersion,uniformBufferHardCheckMatrix:!1,allowTexturePrefiltering:1!==this._webGLVersion,trackUbosInFrame:!1,checkUbosContentBeforeUpload:!1,supportCSM:1!==this._webGLVersion,basisNeedsPOT:1===this._webGLVersion,support3DTextures:1!==this._webGLVersion,needTypeSuffixInShaderConstants:1!==this._webGLVersion,supportMSAA:1!==this._webGLVersion,supportSSAO2:1!==this._webGLVersion,supportExtendedTextureFormats:1!==this._webGLVersion,supportSwitchCaseInShader:1!==this._webGLVersion,supportSyncTextureRead:!0,needsInvertingBitmap:!0,useUBOBindingCache:!0,needShaderCodeInlining:!1,needToAlwaysBindUniformBuffers:!1,supportRenderPasses:!1,_collectUbosUpdatedInFrame:!1}},Object.defineProperty(e.prototype,"webGLVersion",{get:function(){return this._webGLVersion},enumerable:!1,configurable:!0}),e.prototype.getClassName=function(){return"ThinEngine"},Object.defineProperty(e.prototype,"isStencilEnable",{get:function(){return this._isStencilEnable},enumerable:!1,configurable:!0}),e.prototype._prepareWorkingCanvas=function(){if(!this._workingCanvas){this._workingCanvas=this.createCanvas(1,1);var e=this._workingCanvas.getContext("2d");e&&(this._workingContext=e)}},e.prototype.resetTextureCache=function(){for(var e in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,e)&&(this._boundTexturesCache[e]=null);this._currentTextureChannel=-1},e.prototype.getInfo=function(){return this.getGlInfo()},e.prototype.getGlInfo=function(){return{vendor:this._glVendor,renderer:this._glRenderer,version:this._glVersion}},e.prototype.setHardwareScalingLevel=function(e){this._hardwareScalingLevel=e,this.resize()},e.prototype.getHardwareScalingLevel=function(){return this._hardwareScalingLevel},e.prototype.getLoadedTexturesCache=function(){return this._internalTexturesCache},e.prototype.getCaps=function(){return this._caps},e.prototype.stopRenderLoop=function(e){if(e){var t=this._activeRenderLoops.indexOf(e);t>=0&&this._activeRenderLoops.splice(t,1)}else this._activeRenderLoops=[]},e.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;if(!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e){this.beginFrame();for(var t=0;t<this._activeRenderLoops.length;t++)(0,this._activeRenderLoops[t])();this.endFrame()}}this._activeRenderLoops.length>0?this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()):this._renderingQueueLaunched=!1},e.prototype.getRenderingCanvas=function(){return this._renderingCanvas},e.prototype.getAudioContext=function(){return this._audioContext},e.prototype.getAudioDestination=function(){return this._audioDestination},e.prototype.getHostWindow=function(){return v()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null},e.prototype.getRenderWidth=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.width:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferWidth:this._gl.drawingBufferWidth},e.prototype.getRenderHeight=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.height:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferHeight:this._gl.drawingBufferHeight},e.prototype._queueNewFrame=function(t,n){return e.QueueNewFrame(t,n)},e.prototype.runRenderLoop=function(e){-1===this._activeRenderLoops.indexOf(e)&&(this._activeRenderLoops.push(e),this._renderingQueueLaunched||(this._renderingQueueLaunched=!0,this._boundRenderFunction=this._renderLoop.bind(this),this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))},e.prototype.clear=function(e,t,n,a){void 0===a&&(a=!1);var i=this.stencilStateComposer.useStencilGlobalOnly;this.stencilStateComposer.useStencilGlobalOnly=!0,this.applyStates(),this.stencilStateComposer.useStencilGlobalOnly=i;var r=0;t&&e&&(this._gl.clearColor(e.r,e.g,e.b,void 0!==e.a?e.a:1),r|=this._gl.COLOR_BUFFER_BIT),n&&(this.useReverseDepthBuffer?(this._depthCullingState.depthFunc=this._gl.GEQUAL,this._gl.clearDepth(0)):this._gl.clearDepth(1),r|=this._gl.DEPTH_BUFFER_BIT),a&&(this._gl.clearStencil(0),r|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(r)},e.prototype._viewport=function(e,t,n,a){e===this._viewportCached.x&&t===this._viewportCached.y&&n===this._viewportCached.z&&a===this._viewportCached.w||(this._viewportCached.x=e,this._viewportCached.y=t,this._viewportCached.z=n,this._viewportCached.w=a,this._gl.viewport(e,t,n,a))},e.prototype.setViewport=function(e,t,n){var a=t||this.getRenderWidth(),i=n||this.getRenderHeight(),r=e.x||0,o=e.y||0;this._cachedViewport=e,this._viewport(r*a,o*i,a*e.width,i*e.height)},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){this._badOS&&this.flushFramebuffer(),this._frameId++},e.prototype.resize=function(e){var t,n;if(void 0===e&&(e=!1),this._adaptToDeviceRatio){var a=v()&&window.devicePixelRatio||1,i=this._creationOptions.limitDeviceRatio||a;this._hardwareScalingLevel=this._adaptToDeviceRatio?1/Math.min(i,a):1}v()?(t=this._renderingCanvas?this._renderingCanvas.clientWidth||this._renderingCanvas.width:window.innerWidth,n=this._renderingCanvas?this._renderingCanvas.clientHeight||this._renderingCanvas.height:window.innerHeight):(t=this._renderingCanvas?this._renderingCanvas.width:100,n=this._renderingCanvas?this._renderingCanvas.height:100),this.setSize(t/this._hardwareScalingLevel,n/this._hardwareScalingLevel,e)},e.prototype.setSize=function(e,t,n){return void 0===n&&(n=!1),!(!this._renderingCanvas||(e|=0,t|=0,!n&&this._renderingCanvas.width===e&&this._renderingCanvas.height===t||(this._renderingCanvas.width=e,this._renderingCanvas.height=t,0)))},e.prototype.bindFramebuffer=function(e,t,n,a,i,r,o){var s,c,d,l,u;void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0);var f=e;this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=e,this._bindUnboundFramebuffer(f._MSAAFramebuffer?f._MSAAFramebuffer:f._framebuffer);var p=this._gl;e.is2DArray?p.framebufferTextureLayer(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,null===(s=e.texture._hardwareTexture)||void 0===s?void 0:s.underlyingResource,r,o):e.isCube&&p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+t,null===(c=e.texture._hardwareTexture)||void 0===c?void 0:c.underlyingResource,r);var m=e._depthStencilTexture;if(m){var _=e._depthStencilTextureWithStencil?p.DEPTH_STENCIL_ATTACHMENT:p.DEPTH_ATTACHMENT;e.is2DArray?p.framebufferTextureLayer(p.FRAMEBUFFER,_,null===(d=m._hardwareTexture)||void 0===d?void 0:d.underlyingResource,r,o):e.isCube?p.framebufferTexture2D(p.FRAMEBUFFER,_,p.TEXTURE_CUBE_MAP_POSITIVE_X+t,null===(l=m._hardwareTexture)||void 0===l?void 0:l.underlyingResource,r):p.framebufferTexture2D(p.FRAMEBUFFER,_,p.TEXTURE_2D,null===(u=m._hardwareTexture)||void 0===u?void 0:u.underlyingResource,r)}this._cachedViewport&&!i?this.setViewport(this._cachedViewport,n,a):(n||(n=e.width,r&&(n/=Math.pow(2,r))),a||(a=e.height,r&&(a/=Math.pow(2,r))),this._viewport(0,0,n,a)),this.wipeCaches()},e.prototype.setState=function(e,t,n,a,i,r,o){var s,c;void 0===t&&(t=0),void 0===a&&(a=!1),void 0===o&&(o=0),(this._depthCullingState.cull!==e||n)&&(this._depthCullingState.cull=e);var d=null===(c=null!==(s=this.cullBackFaces)&&void 0!==s?s:i)||void 0===c||c?this._gl.BACK:this._gl.FRONT;(this._depthCullingState.cullFace!==d||n)&&(this._depthCullingState.cullFace=d),this.setZOffset(t),this.setZOffsetUnits(o);var l=a?this._gl.CW:this._gl.CCW;(this._depthCullingState.frontFace!==l||n)&&(this._depthCullingState.frontFace=l),this._stencilStateComposer.stencilMaterial=r},e.prototype.setZOffset=function(e){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-e:e},e.prototype.getZOffset=function(){var e=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-e:e},e.prototype.setZOffsetUnits=function(e){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-e:e},e.prototype.getZOffsetUnits=function(){var e=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-e:e},e.prototype._bindUnboundFramebuffer=function(e){this._currentFramebuffer!==e&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e),this._currentFramebuffer=e)},e.prototype._currentFrameBufferIsDefaultFrameBuffer=function(){return null===this._currentFramebuffer},e.prototype.generateMipmaps=function(e){this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0),this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)},e.prototype.unBindFramebuffer=function(e,t,n){var a;void 0===t&&(t=!1);var i=e;this._currentRenderTarget=null;var r=this._gl;if(i._MSAAFramebuffer){if(e.isMulti)return void this.unBindMultiColorAttachmentFramebuffer(e,t,n);r.bindFramebuffer(r.READ_FRAMEBUFFER,i._MSAAFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i._framebuffer),r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,r.COLOR_BUFFER_BIT,r.NEAREST)}!(null===(a=e.texture)||void 0===a?void 0:a.generateMipMaps)||t||e.isCube||this.generateMipmaps(e.texture),n&&(i._MSAAFramebuffer&&this._bindUnboundFramebuffer(i._framebuffer),n()),this._bindUnboundFramebuffer(null)},e.prototype.flushFramebuffer=function(){this._gl.flush()},e.prototype.restoreDefaultFramebuffer=function(){this._currentRenderTarget?this.unBindFramebuffer(this._currentRenderTarget):this._bindUnboundFramebuffer(null),this._cachedViewport&&this.setViewport(this._cachedViewport),this.wipeCaches()},e.prototype._resetVertexBufferBinding=function(){this.bindArrayBuffer(null),this._cachedVertexBuffers=null},e.prototype.createVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.STATIC_DRAW)},e.prototype._createVertexBuffer=function(e,t){var n=this._gl.createBuffer();if(!n)throw new Error("Unable to create vertex buffer");var a=new te(n);return this.bindArrayBuffer(a),e instanceof Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),t):this._gl.bufferData(this._gl.ARRAY_BUFFER,e,t),this._resetVertexBufferBinding(),a.references=1,a},e.prototype.createDynamicVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.DYNAMIC_DRAW)},e.prototype._resetIndexBufferBinding=function(){this.bindIndexBuffer(null),this._cachedIndexBuffer=null},e.prototype.createIndexBuffer=function(e,t){var n=this._gl.createBuffer(),a=new te(n);if(!n)throw new Error("Unable to create index buffer");this.bindIndexBuffer(a);var i=this._normalizeIndexData(e);return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,i,t?this._gl.DYNAMIC_DRAW:this._gl.STATIC_DRAW),this._resetIndexBufferBinding(),a.references=1,a.is32Bits=4===i.BYTES_PER_ELEMENT,a},e.prototype._normalizeIndexData=function(e){if(2===e.BYTES_PER_ELEMENT)return e;if(this._caps.uintIndices){if(e instanceof Uint32Array)return e;for(var t=0;t<e.length;t++)if(e[t]>=65535)return new Uint32Array(e);return new Uint16Array(e)}return new Uint16Array(e)},e.prototype.bindArrayBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this._bindBuffer(e,this._gl.ARRAY_BUFFER)},e.prototype.bindUniformBlock=function(e,t,n){var a=e.program,i=this._gl.getUniformBlockIndex(a,t);this._gl.uniformBlockBinding(a,i,n)},e.prototype.bindIndexBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this._bindBuffer(e,this._gl.ELEMENT_ARRAY_BUFFER)},e.prototype._bindBuffer=function(e,t){(this._vaoRecordInProgress||this._currentBoundBuffer[t]!==e)&&(this._gl.bindBuffer(t,e?e.underlyingResource:null),this._currentBoundBuffer[t]=e)},e.prototype.updateArrayBuffer=function(e){this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e)},e.prototype._vertexAttribPointer=function(e,t,n,a,i,r,o){var s=this._currentBufferPointers[t];if(s){var c=!1;s.active?(s.buffer!==e&&(s.buffer=e,c=!0),s.size!==n&&(s.size=n,c=!0),s.type!==a&&(s.type=a,c=!0),s.normalized!==i&&(s.normalized=i,c=!0),s.stride!==r&&(s.stride=r,c=!0),s.offset!==o&&(s.offset=o,c=!0)):(c=!0,s.active=!0,s.index=t,s.size=n,s.type=a,s.normalized=i,s.stride=r,s.offset=o,s.buffer=e),(c||this._vaoRecordInProgress)&&(this.bindArrayBuffer(e),this._gl.vertexAttribPointer(t,n,a,i,r,o))}},e.prototype._bindIndexBufferWithCache=function(e){null!=e&&this._cachedIndexBuffer!==e&&(this._cachedIndexBuffer=e,this.bindIndexBuffer(e),this._uintIndicesCurrentlySet=e.is32Bits)},e.prototype._bindVertexBuffersAttributes=function(e,t,n){var a=t.getAttributesNames();this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var i=0;i<a.length;i++){var r=t.getAttributeLocation(i);if(r>=0){var o=a[i],s=null;if(n&&(s=n[o]),s||(s=e[o]),!s)continue;this._gl.enableVertexAttribArray(r),this._vaoRecordInProgress||(this._vertexAttribArraysEnabled[r]=!0);var c=s.getBuffer();c&&(this._vertexAttribPointer(c,r,s.getSize(),s.type,s.normalized,s.byteStride,s.byteOffset),s.getIsInstanced()&&(this._gl.vertexAttribDivisor(r,s.getInstanceDivisor()),this._vaoRecordInProgress||(this._currentInstanceLocations.push(r),this._currentInstanceBuffers.push(c))))}}},e.prototype.recordVertexArrayObject=function(e,t,n,a){var i=this._gl.createVertexArray();return this._vaoRecordInProgress=!0,this._gl.bindVertexArray(i),this._mustWipeVertexAttributes=!0,this._bindVertexBuffersAttributes(e,n,a),this.bindIndexBuffer(t),this._vaoRecordInProgress=!1,this._gl.bindVertexArray(null),i},e.prototype.bindVertexArrayObject=function(e,t){this._cachedVertexArrayObject!==e&&(this._cachedVertexArrayObject=e,this._gl.bindVertexArray(e),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._uintIndicesCurrentlySet=null!=t&&t.is32Bits,this._mustWipeVertexAttributes=!0)},e.prototype.bindBuffersDirectly=function(e,t,n,a,i){if(this._cachedVertexBuffers!==e||this._cachedEffectForVertexBuffers!==i){this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=i;var r=i.getAttributesCount();this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var o=0,s=0;s<r;s++)if(s<n.length){var c=i.getAttributeLocation(s);c>=0&&(this._gl.enableVertexAttribArray(c),this._vertexAttribArraysEnabled[c]=!0,this._vertexAttribPointer(e,c,n[s],this._gl.FLOAT,!1,a,o)),o+=4*n[s]}}this._bindIndexBufferWithCache(t)},e.prototype._unbindVertexArrayObject=function(){this._cachedVertexArrayObject&&(this._cachedVertexArrayObject=null,this._gl.bindVertexArray(null))},e.prototype.bindBuffers=function(e,t,n,a){this._cachedVertexBuffers===e&&this._cachedEffectForVertexBuffers===n||(this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=n,this._bindVertexBuffersAttributes(e,n,a)),this._bindIndexBufferWithCache(t)},e.prototype.unbindInstanceAttributes=function(){for(var e,t=0,n=this._currentInstanceLocations.length;t<n;t++){var a=this._currentInstanceBuffers[t];e!=a&&a.references&&(e=a,this.bindArrayBuffer(a));var i=this._currentInstanceLocations[t];this._gl.vertexAttribDivisor(i,0)}this._currentInstanceBuffers.length=0,this._currentInstanceLocations.length=0},e.prototype.releaseVertexArrayObject=function(e){this._gl.deleteVertexArray(e)},e.prototype._releaseBuffer=function(e){return e.references--,0===e.references&&(this._deleteBuffer(e),!0)},e.prototype._deleteBuffer=function(e){this._gl.deleteBuffer(e.underlyingResource)},e.prototype.updateAndBindInstancesBuffer=function(e,t,n){if(this.bindArrayBuffer(e),t&&this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t),void 0!==n[0].index)this.bindInstancesBuffer(e,n,!0);else for(var a=0;a<4;a++){var i=n[a];this._vertexAttribArraysEnabled[i]||(this._gl.enableVertexAttribArray(i),this._vertexAttribArraysEnabled[i]=!0),this._vertexAttribPointer(e,i,4,this._gl.FLOAT,!1,64,16*a),this._gl.vertexAttribDivisor(i,1),this._currentInstanceLocations.push(i),this._currentInstanceBuffers.push(e)}},e.prototype.bindInstancesBuffer=function(e,t,n){void 0===n&&(n=!0),this.bindArrayBuffer(e);var a=0;if(n)for(var i=0;i<t.length;i++)a+=4*(r=t[i]).attributeSize;for(i=0;i<t.length;i++){var r;void 0===(r=t[i]).index&&(r.index=this._currentEffect.getAttributeLocationByName(r.attributeName)),r.index<0||(this._vertexAttribArraysEnabled[r.index]||(this._gl.enableVertexAttribArray(r.index),this._vertexAttribArraysEnabled[r.index]=!0),this._vertexAttribPointer(e,r.index,r.attributeSize,r.attributeType||this._gl.FLOAT,r.normalized||!1,a,r.offset),this._gl.vertexAttribDivisor(r.index,void 0===r.divisor?1:r.divisor),this._currentInstanceLocations.push(r.index),this._currentInstanceBuffers.push(e))}},e.prototype.disableInstanceAttributeByName=function(e){if(this._currentEffect){var t=this._currentEffect.getAttributeLocationByName(e);this.disableInstanceAttribute(t)}},e.prototype.disableInstanceAttribute=function(e){for(var t,n=!1;-1!==(t=this._currentInstanceLocations.indexOf(e));)this._currentInstanceLocations.splice(t,1),this._currentInstanceBuffers.splice(t,1),n=!0,t=this._currentInstanceLocations.indexOf(e);n&&(this._gl.vertexAttribDivisor(e,0),this.disableAttributeByIndex(e))},e.prototype.disableAttributeByIndex=function(e){this._gl.disableVertexAttribArray(e),this._vertexAttribArraysEnabled[e]=!1,this._currentBufferPointers[e].active=!1},e.prototype.draw=function(e,t,n,a){this.drawElementsType(e?0:1,t,n,a)},e.prototype.drawPointClouds=function(e,t,n){this.drawArraysType(2,e,t,n)},e.prototype.drawUnIndexed=function(e,t,n,a){this.drawArraysType(e?0:1,t,n,a)},e.prototype.drawElementsType=function(e,t,n,a){this.applyStates(),this._reportDrawCall();var i=this._drawMode(e),r=this._uintIndicesCurrentlySet?this._gl.UNSIGNED_INT:this._gl.UNSIGNED_SHORT,o=this._uintIndicesCurrentlySet?4:2;a?this._gl.drawElementsInstanced(i,n,r,t*o,a):this._gl.drawElements(i,n,r,t*o)},e.prototype.drawArraysType=function(e,t,n,a){this.applyStates(),this._reportDrawCall();var i=this._drawMode(e);a?this._gl.drawArraysInstanced(i,t,n,a):this._gl.drawArrays(i,t,n)},e.prototype._drawMode=function(e){switch(e){default:return this._gl.TRIANGLES;case 2:case 3:return this._gl.POINTS;case 1:case 4:return this._gl.LINES;case 5:return this._gl.LINE_LOOP;case 6:return this._gl.LINE_STRIP;case 7:return this._gl.TRIANGLE_STRIP;case 8:return this._gl.TRIANGLE_FAN}},e.prototype._reportDrawCall=function(){},e.prototype._releaseEffect=function(e){if(this._compiledEffects[e._key]){delete this._compiledEffects[e._key];var t=e.getPipelineContext();t&&this._deletePipelineContext(t)}},e.prototype._deletePipelineContext=function(e){var t=e;t&&t.program&&(t.program.__SPECTOR_rebuildProgram=null,this._gl.deleteProgram(t.program))},e.prototype._getGlobalDefines=function(e){if(e)return this.isNDCHalfZRange?e.IS_NDC_HALF_ZRANGE="":delete e.IS_NDC_HALF_ZRANGE,void(this.useReverseDepthBuffer?e.USE_REVERSE_DEPTHBUFFER="":delete e.USE_REVERSE_DEPTHBUFFER);var t="";return this.isNDCHalfZRange&&(t+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(t&&(t+="\n"),t+="#define USE_REVERSE_DEPTHBUFFER"),t},e.prototype.createEffect=function(e,t,n,a,i,r,o,s,c,d){var l;void 0===d&&(d=I.GLSL);var u=e.vertexElement||e.vertex||e.vertexToken||e.vertexSource||e,f=e.fragmentElement||e.fragment||e.fragmentToken||e.fragmentSource||e,p=this._getGlobalDefines(),m=null!==(l=null!=i?i:t.defines)&&void 0!==l?l:"";p&&(m+=p);var _=u+"+"+f+"@"+m;if(this._compiledEffects[_]){var h=this._compiledEffects[_];return o&&h.isReady()&&o(h),h}var b=new V(e,t,n,a,this,i,r,o,s,c,_,d);return this._compiledEffects[_]=b,b},e._ConcatenateShader=function(e,t,n){return void 0===n&&(n=""),n+(t?t+"\n":"")+e},e.prototype._compileShader=function(t,n,a,i){return this._compileRawShader(e._ConcatenateShader(t,a,i),n)},e.prototype._compileRawShader=function(e,t){var n=this._gl,a=n.createShader("vertex"===t?n.VERTEX_SHADER:n.FRAGMENT_SHADER);if(!a){for(var i=n.NO_ERROR,r=n.NO_ERROR;(r=n.getError())!==n.NO_ERROR;)i=r;throw new Error("Something went wrong while creating a gl ".concat(t," shader object. gl error=").concat(i,", gl isContextLost=").concat(n.isContextLost(),", _contextWasLost=").concat(this._contextWasLost))}return n.shaderSource(a,e),n.compileShader(a),a},e.prototype._getShaderSource=function(e){return this._gl.getShaderSource(e)},e.prototype.createRawShaderProgram=function(e,t,n,a,i){void 0===i&&(i=null),a=a||this._gl;var r=this._compileRawShader(t,"vertex"),o=this._compileRawShader(n,"fragment");return this._createShaderProgram(e,r,o,a,i)},e.prototype.createShaderProgram=function(e,t,n,a,i,r){void 0===r&&(r=null),i=i||this._gl;var o=this._webGLVersion>1?"#version 300 es\n#define WEBGL2 \n":"",s=this._compileShader(t,"vertex",a,o),c=this._compileShader(n,"fragment",a,o);return this._createShaderProgram(e,s,c,i,r)},e.prototype.inlineShaderCode=function(e){return e},e.prototype.createPipelineContext=function(e){var t=new ne;return t.engine=this,this._caps.parallelShaderCompile&&(t.isParallelCompiled=!0),t},e.prototype.createMaterialContext=function(){},e.prototype.createDrawContext=function(){},e.prototype._createShaderProgram=function(e,t,n,a,i){void 0===i&&(i=null);var r=a.createProgram();if(e.program=r,!r)throw new Error("Unable to create program");return a.attachShader(r,t),a.attachShader(r,n),a.linkProgram(r),e.context=a,e.vertexShader=t,e.fragmentShader=n,e.isParallelCompiled||this._finalizePipelineContext(e),r},e.prototype._finalizePipelineContext=function(e){var t=e.context,n=e.vertexShader,a=e.fragmentShader,i=e.program;if(!t.getProgramParameter(i,t.LINK_STATUS)){var r,o;if(!this._gl.getShaderParameter(n,this._gl.COMPILE_STATUS)&&(r=this._gl.getShaderInfoLog(n)))throw e.vertexCompilationError=r,new Error("VERTEX SHADER "+r);if(!this._gl.getShaderParameter(a,this._gl.COMPILE_STATUS)&&(r=this._gl.getShaderInfoLog(a)))throw e.fragmentCompilationError=r,new Error("FRAGMENT SHADER "+r);if(o=t.getProgramInfoLog(i))throw e.programLinkError=o,new Error(o)}if(this.validateShaderPrograms&&(t.validateProgram(i),!t.getProgramParameter(i,t.VALIDATE_STATUS)&&(o=t.getProgramInfoLog(i))))throw e.programValidationError=o,new Error(o);t.deleteShader(n),t.deleteShader(a),e.vertexShader=void 0,e.fragmentShader=void 0,e.onCompiled&&(e.onCompiled(),e.onCompiled=void 0)},e.prototype._preparePipelineContext=function(e,t,n,a,i,r,o,s,c,d){var l=e;l.program=a?this.createRawShaderProgram(l,t,n,void 0,c):this.createShaderProgram(l,t,n,s,void 0,c),l.program.__SPECTOR_rebuildProgram=o},e.prototype._isRenderingStateCompiled=function(e){var t=e;return!!this._gl.getProgramParameter(t.program,this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)&&(this._finalizePipelineContext(t),!0)},e.prototype._executeWhenRenderingStateIsCompiled=function(e,t){var n=e;if(n.isParallelCompiled){var a=n.onCompiled;n.onCompiled=a?function(){a(),t()}:t}else t()},e.prototype.getUniforms=function(e,t){for(var n=new Array,a=e,i=0;i<t.length;i++)n.push(this._gl.getUniformLocation(a.program,t[i]));return n},e.prototype.getAttributes=function(e,t){for(var n=[],a=e,i=0;i<t.length;i++)try{n.push(this._gl.getAttribLocation(a.program,t[i]))}catch(e){n.push(-1)}return n},e.prototype.enableEffect=function(e){(e=null!==e&&z.IsWrapper(e)?e.effect:e)&&e!==this._currentEffect&&(this._stencilStateComposer.stencilMaterial=void 0,e=e,this.bindSamplers(e),this._currentEffect=e,e.onBind&&e.onBind(e),e._onBindObservable&&e._onBindObservable.notifyObservers(e))},e.prototype.setInt=function(e,t){return!!e&&(this._gl.uniform1i(e,t),!0)},e.prototype.setInt2=function(e,t,n){return!!e&&(this._gl.uniform2i(e,t,n),!0)},e.prototype.setInt3=function(e,t,n,a){return!!e&&(this._gl.uniform3i(e,t,n,a),!0)},e.prototype.setInt4=function(e,t,n,a,i){return!!e&&(this._gl.uniform4i(e,t,n,a,i),!0)},e.prototype.setIntArray=function(e,t){return!!e&&(this._gl.uniform1iv(e,t),!0)},e.prototype.setIntArray2=function(e,t){return!(!e||t.length%2!=0||(this._gl.uniform2iv(e,t),0))},e.prototype.setIntArray3=function(e,t){return!(!e||t.length%3!=0||(this._gl.uniform3iv(e,t),0))},e.prototype.setIntArray4=function(e,t){return!(!e||t.length%4!=0||(this._gl.uniform4iv(e,t),0))},e.prototype.setArray=function(e,t){return!(!e||t.length<1||(this._gl.uniform1fv(e,t),0))},e.prototype.setArray2=function(e,t){return!(!e||t.length%2!=0||(this._gl.uniform2fv(e,t),0))},e.prototype.setArray3=function(e,t){return!(!e||t.length%3!=0||(this._gl.uniform3fv(e,t),0))},e.prototype.setArray4=function(e,t){return!(!e||t.length%4!=0||(this._gl.uniform4fv(e,t),0))},e.prototype.setMatrices=function(e,t){return!!e&&(this._gl.uniformMatrix4fv(e,!1,t),!0)},e.prototype.setMatrix3x3=function(e,t){return!!e&&(this._gl.uniformMatrix3fv(e,!1,t),!0)},e.prototype.setMatrix2x2=function(e,t){return!!e&&(this._gl.uniformMatrix2fv(e,!1,t),!0)},e.prototype.setFloat=function(e,t){return!!e&&(this._gl.uniform1f(e,t),!0)},e.prototype.setFloat2=function(e,t,n){return!!e&&(this._gl.uniform2f(e,t,n),!0)},e.prototype.setFloat3=function(e,t,n,a){return!!e&&(this._gl.uniform3f(e,t,n,a),!0)},e.prototype.setFloat4=function(e,t,n,a,i){return!!e&&(this._gl.uniform4f(e,t,n,a,i),!0)},e.prototype.applyStates=function(){if(this._depthCullingState.apply(this._gl),this._stencilStateComposer.apply(this._gl),this._alphaState.apply(this._gl),this._colorWriteChanged){this._colorWriteChanged=!1;var e=this._colorWrite;this._gl.colorMask(e,e,e,e)}},e.prototype.setColorWrite=function(e){e!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=e)},e.prototype.getColorWrite=function(){return this._colorWrite},Object.defineProperty(e.prototype,"depthCullingState",{get:function(){return this._depthCullingState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaState",{get:function(){return this._alphaState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilState",{get:function(){return this._stencilState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stencilStateComposer",{get:function(){return this._stencilStateComposer},enumerable:!1,configurable:!0}),e.prototype.clearInternalTexturesCache=function(){this._internalTexturesCache=[]},e.prototype.wipeCaches=function(e){this.preventCacheWipeBetweenFrames&&!e||(this._currentEffect=null,this._viewportCached.x=0,this._viewportCached.y=0,this._viewportCached.z=0,this._viewportCached.w=0,this._unbindVertexArrayObject(),e&&(this._currentProgram=null,this.resetTextureCache(),this._stencilStateComposer.reset(),this._depthCullingState.reset(),this._depthCullingState.depthFunc=this._gl.LEQUAL,this._alphaState.reset(),this._alphaMode=1,this._alphaEquation=0,this._colorWrite=!0,this._colorWriteChanged=!0,this._unpackFlipYCached=null,this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),this._mustWipeVertexAttributes=!0,this.unbindAllAttributes()),this._resetVertexBufferBinding(),this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null,this.bindIndexBuffer(null))},e.prototype._getSamplingParameters=function(e,t){var n=this._gl,a=n.NEAREST,i=n.NEAREST;switch(e){case 11:a=n.LINEAR,i=t?n.LINEAR_MIPMAP_NEAREST:n.LINEAR;break;case 3:a=n.LINEAR,i=t?n.LINEAR_MIPMAP_LINEAR:n.LINEAR;break;case 8:a=n.NEAREST,i=t?n.NEAREST_MIPMAP_LINEAR:n.NEAREST;break;case 4:a=n.NEAREST,i=t?n.NEAREST_MIPMAP_NEAREST:n.NEAREST;break;case 5:a=n.NEAREST,i=t?n.LINEAR_MIPMAP_NEAREST:n.LINEAR;break;case 6:a=n.NEAREST,i=t?n.LINEAR_MIPMAP_LINEAR:n.LINEAR;break;case 7:a=n.NEAREST,i=n.LINEAR;break;case 1:a=n.NEAREST,i=n.NEAREST;break;case 9:a=n.LINEAR,i=t?n.NEAREST_MIPMAP_NEAREST:n.NEAREST;break;case 10:a=n.LINEAR,i=t?n.NEAREST_MIPMAP_LINEAR:n.NEAREST;break;case 2:a=n.LINEAR,i=n.LINEAR;break;case 12:a=n.LINEAR,i=n.NEAREST}return{min:i,mag:a}},e.prototype._createTexture=function(){var e=this._gl.createTexture();if(!e)throw new Error("Unable to create texture");return e},e.prototype._createHardwareTexture=function(){return new ie(this._createTexture(),this._gl)},e.prototype._createInternalTexture=function(e,t,n,a){void 0===n&&(n=!0),void 0===a&&(a=G.Unknown);var i={};void 0!==t&&"object"==typeof t?(i.generateMipMaps=t.generateMipMaps,i.type=void 0===t.type?0:t.type,i.samplingMode=void 0===t.samplingMode?3:t.samplingMode,i.format=void 0===t.format?5:t.format):(i.generateMipMaps=t,i.type=0,i.samplingMode=3,i.format=5),(1!==i.type||this._caps.textureFloatLinearFiltering)&&(2!==i.type||this._caps.textureHalfFloatLinearFiltering)||(i.samplingMode=1),1!==i.type||this._caps.textureFloat||(i.type=0,C.Warn("Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE"));var r=this._gl,o=new Z(this,a),s=e.width||e,c=e.height||e,d=e.layers||0,l=this._getSamplingParameters(i.samplingMode,!!i.generateMipMaps),u=0!==d?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D,f=this._getRGBABufferInternalSizedFormat(i.type,i.format),p=this._getInternalFormat(i.format),m=this._getWebGLTextureType(i.type);return this._bindTextureDirectly(u,o),0!==d?(o.is2DArray=!0,r.texImage3D(u,0,f,s,c,d,0,p,m,null)):r.texImage2D(u,0,f,s,c,0,p,m,null),r.texParameteri(u,r.TEXTURE_MAG_FILTER,l.mag),r.texParameteri(u,r.TEXTURE_MIN_FILTER,l.min),r.texParameteri(u,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(u,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i.generateMipMaps&&this._gl.generateMipmap(u),this._bindTextureDirectly(u,null),o.baseWidth=s,o.baseHeight=c,o.width=s,o.height=c,o.depth=d,o.isReady=!0,o.samples=1,o.generateMipMaps=!!i.generateMipMaps,o.samplingMode=i.samplingMode,o.type=i.type,o.format=i.format,this._internalTexturesCache.push(o),o},e.prototype._getUseSRGBBuffer=function(e,t){return e&&this._caps.supportSRGBBuffers&&(this.webGLVersion>1||this.isWebGPU||t)},e.prototype._createTextureBase=function(t,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h){var b=this;void 0===r&&(r=3),void 0===o&&(o=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===u&&(u=null),void 0===f&&(f=null),void 0===p&&(p=null);var g="data:"===(t=t||"").substr(0,5),v="blob:"===t.substr(0,5),y=g&&-1!==t.indexOf(";base64,"),S=u||new Z(this,G.Url),D=t;!this._transformTextureUrl||y||u||l||(t=this._transformTextureUrl(t)),D!==t&&(S._originalUrl=D);var I=t.lastIndexOf("."),x=p||(I>-1?t.substring(I).toLowerCase():""),O=null;x.indexOf("?")>-1&&(x=x.split("?")[0]);for(var w=0,E=e._TextureLoaders;w<E.length;w++){var A=E[w];if(A.canLoad(x,m)){O=A;break}}i&&i._addPendingData(S),S.url=t,S.generateMipMaps=!n,S.samplingMode=r,S.invertY=a,S._useSRGBBuffer=this._getUseSRGBBuffer(!!h,n),this._doNotHandleContextLost||(S._buffer=l);var L=null;o&&!u&&(L=S.onLoadedObservable.add(o)),u||this._internalTexturesCache.push(S);var k=function(e,a){i&&i._removePendingData(S),t===D?(L&&S.onLoadedObservable.remove(L),q.UseFallbackTexture&&b._createTextureBase(q.FallbackTexture,n,S.invertY,i,r,null,s,c,d,l,S),e=(e||"Unknown error")+(q.UseFallbackTexture?" - Fallback texture was used":""),S.onErrorObservable.notifyObservers({message:e,exception:a}),s&&s(e,a)):(C.Warn("Failed to load ".concat(t,", falling back to ").concat(D)),b._createTextureBase(D,n,S.invertY,i,r,o,s,c,d,l,S,f,p,m,_,h))};if(O){var M=function(e){O.loadData(e,S,function(e,t,n,a,o,s){s?k("TextureLoader failed to load data"):c(S,x,i,{width:e,height:t},S.invertY,!n,a,function(){return o(),!1},r)},_)};l?l instanceof ArrayBuffer?M(new Uint8Array(l)):ArrayBuffer.isView(l)?M(l):s&&s("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(t,function(e){return M(new Uint8Array(e))},void 0,i?i.offlineProvider:void 0,!0,function(e,t){k("Unable to load "+(e&&e.responseURL,t))})}else{var P=function(e){v&&!b._doNotHandleContextLost&&(S._buffer=e),c(S,x,i,e,S.invertY,n,!1,d,r)};!g||y?l&&("string"==typeof l.decoding||l.close)?P(l):e._FileToolsLoadImage(t,P,k,i?i.offlineProvider:null,m,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0):"string"==typeof l||l instanceof ArrayBuffer||ArrayBuffer.isView(l)||l instanceof Blob?e._FileToolsLoadImage(l,P,k,i?i.offlineProvider:null,m,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0):l&&P(l)}return S},e.prototype.createTexture=function(e,t,n,a,i,r,o,s,c,d,l,u,f,p,m){var _=this;return void 0===i&&(i=3),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===c&&(c=null),void 0===d&&(d=null),void 0===l&&(l=null),this._createTextureBase(e,t,n,a,i,r,o,this._prepareWebGLTexture.bind(this),function(e,t,n,i,r,o){var s=_._gl,c=n.width===e&&n.height===t,l=d?_._getInternalFormat(d,r._useSRGBBuffer):".jpg"!==i||r._useSRGBBuffer?r._useSRGBBuffer?s.SRGB8_ALPHA8:s.RGBA:s.RGB,u=d?_._getInternalFormat(d):".jpg"!==i||r._useSRGBBuffer?s.RGBA:s.RGB;if(r._useSRGBBuffer&&1===_.webGLVersion&&(u=l),c)return s.texImage2D(s.TEXTURE_2D,0,l,u,s.UNSIGNED_BYTE,n),!1;var f=_._caps.maxTextureSize;if(n.width>f||n.height>f||!_._supportsHardwareTextureRescaling)return _._prepareWorkingCanvas(),!(!_._workingCanvas||!_._workingContext||(_._workingCanvas.width=e,_._workingCanvas.height=t,_._workingContext.drawImage(n,0,0,n.width,n.height,0,0,e,t),s.texImage2D(s.TEXTURE_2D,0,l,u,s.UNSIGNED_BYTE,_._workingCanvas),r.width=e,r.height=t,1));var p=new Z(_,G.Temp);return _._bindTextureDirectly(s.TEXTURE_2D,p,!0),s.texImage2D(s.TEXTURE_2D,0,l,u,s.UNSIGNED_BYTE,n),_._rescaleTexture(p,r,a,l,function(){_._releaseTexture(p),_._bindTextureDirectly(s.TEXTURE_2D,r,!0),o()}),!0},s,c,d,l,u,f,m)},e._FileToolsLoadImage=function(e,t,n,a,i,r){throw H("FileTools")},e.prototype._rescaleTexture=function(e,t,n,a,i){},e.prototype.createRawTexture=function(e,t,n,a,i,r,o,s,c){throw void 0===s&&(s=null),void 0===c&&(c=0),H("Engine.RawTexture")},e.prototype.createRawCubeTexture=function(e,t,n,a,i,r,o,s){throw void 0===s&&(s=null),H("Engine.RawTexture")},e.prototype.createRawTexture3D=function(e,t,n,a,i,r,o,s,c,d){throw void 0===c&&(c=null),void 0===d&&(d=0),H("Engine.RawTexture")},e.prototype.createRawTexture2DArray=function(e,t,n,a,i,r,o,s,c,d){throw void 0===c&&(c=null),void 0===d&&(d=0),H("Engine.RawTexture")},e.prototype._unpackFlipY=function(e){this._unpackFlipYCached!==e&&(this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,e?1:0),this.enableUnpackFlipYCached&&(this._unpackFlipYCached=e))},e.prototype._getUnpackAlignement=function(){return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT)},e.prototype._getTextureTarget=function(e){return e.isCube?this._gl.TEXTURE_CUBE_MAP:e.is3D?this._gl.TEXTURE_3D:e.is2DArray||e.isMultiview?this._gl.TEXTURE_2D_ARRAY:this._gl.TEXTURE_2D},e.prototype.updateTextureSamplingMode=function(e,t,n){void 0===n&&(n=!1);var a=this._getTextureTarget(t),i=this._getSamplingParameters(e,t.generateMipMaps||n);this._setTextureParameterInteger(a,this._gl.TEXTURE_MAG_FILTER,i.mag,t),this._setTextureParameterInteger(a,this._gl.TEXTURE_MIN_FILTER,i.min),n&&(t.generateMipMaps=!0,this._gl.generateMipmap(a)),this._bindTextureDirectly(a,null),t.samplingMode=e},e.prototype.updateTextureDimensions=function(e,t,n,a){void 0===a&&(a=1)},e.prototype.updateTextureWrappingMode=function(e,t,n,a){void 0===n&&(n=null),void 0===a&&(a=null);var i=this._getTextureTarget(e);null!==t&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(t),e),e._cachedWrapU=t),null!==n&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(n),e),e._cachedWrapV=n),(e.is2DArray||e.is3D)&&null!==a&&(this._setTextureParameterInteger(i,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(a),e),e._cachedWrapR=a),this._bindTextureDirectly(i,null)},e.prototype._setupDepthStencilTexture=function(e,t,n,a,i,r){void 0===r&&(r=1);var o=t.width||t,s=t.height||t,c=t.layers||0;e.baseWidth=o,e.baseHeight=s,e.width=o,e.height=s,e.is2DArray=c>0,e.depth=c,e.isReady=!0,e.samples=r,e.generateMipMaps=!1,e.samplingMode=a?2:1,e.type=0,e._comparisonFunction=i;var d=this._gl,l=this._getTextureTarget(e),u=this._getSamplingParameters(e.samplingMode,!1);d.texParameteri(l,d.TEXTURE_MAG_FILTER,u.mag),d.texParameteri(l,d.TEXTURE_MIN_FILTER,u.min),d.texParameteri(l,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(l,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),0===i?(d.texParameteri(l,d.TEXTURE_COMPARE_FUNC,515),d.texParameteri(l,d.TEXTURE_COMPARE_MODE,d.NONE)):(d.texParameteri(l,d.TEXTURE_COMPARE_FUNC,i),d.texParameteri(l,d.TEXTURE_COMPARE_MODE,d.COMPARE_REF_TO_TEXTURE))},e.prototype._uploadCompressedDataToTextureDirectly=function(e,t,n,a,i,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var s=this._gl,c=s.TEXTURE_2D;if(e.isCube&&(c=s.TEXTURE_CUBE_MAP_POSITIVE_X+r),e._useSRGBBuffer)switch(t){case 36492:t=s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;break;case 37808:t=s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;break;case 33776:this._caps.s3tc_srgb?t=s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:e._useSRGBBuffer=!1;break;case 33779:this._caps.s3tc_srgb?t=s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:e._useSRGBBuffer=!1;break;default:e._useSRGBBuffer=!1}this._gl.compressedTexImage2D(c,o,t,n,a,0,i)},e.prototype._uploadDataToTextureDirectly=function(e,t,n,a,i,r){void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=!1);var o=this._gl,s=this._getWebGLTextureType(e.type),c=this._getInternalFormat(e.format),d=void 0===i?this._getRGBABufferInternalSizedFormat(e.type,e.format,e._useSRGBBuffer):this._getInternalFormat(i,e._useSRGBBuffer);this._unpackFlipY(e.invertY);var l=o.TEXTURE_2D;e.isCube&&(l=o.TEXTURE_CUBE_MAP_POSITIVE_X+n);var u=Math.round(Math.log(e.width)*Math.LOG2E),f=Math.round(Math.log(e.height)*Math.LOG2E),p=r?e.width:Math.pow(2,Math.max(u-a,0)),m=r?e.height:Math.pow(2,Math.max(f-a,0));o.texImage2D(l,a,d,p,m,0,c,s,t)},e.prototype.updateTextureData=function(e,t,n,a,i,r,o,s,c){void 0===o&&(o=0),void 0===s&&(s=0),void 0===c&&(c=!1);var d=this._gl,l=this._getWebGLTextureType(e.type),u=this._getInternalFormat(e.format);this._unpackFlipY(e.invertY);var f=d.TEXTURE_2D;e.isCube&&(f=d.TEXTURE_CUBE_MAP_POSITIVE_X+o),this._bindTextureDirectly(f,e,!0),d.texSubImage2D(f,s,n,a,i,r,u,l,t),c&&this._gl.generateMipmap(f),this._bindTextureDirectly(f,null)},e.prototype._uploadArrayBufferViewToTexture=function(e,t,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var i=this._gl,r=e.isCube?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D;this._bindTextureDirectly(r,e,!0),this._uploadDataToTextureDirectly(e,t,n,a),this._bindTextureDirectly(r,null,!0)},e.prototype._prepareWebGLTextureContinuation=function(e,t,n,a,i){var r=this._gl;if(r){var o=this._getSamplingParameters(i,!n);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,o.mag),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,o.min),n||a||r.generateMipmap(r.TEXTURE_2D),this._bindTextureDirectly(r.TEXTURE_2D,null),t&&t._removePendingData(e),e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear()}},e.prototype._prepareWebGLTexture=function(t,n,a,i,r,o,s,c,d){var l=this;void 0===d&&(d=3);var u=this.getCaps().maxTextureSize,f=Math.min(u,this.needPOTTextures?e.GetExponentOfTwo(i.width,u):i.width),p=Math.min(u,this.needPOTTextures?e.GetExponentOfTwo(i.height,u):i.height),m=this._gl;m&&(t._hardwareTexture?(this._bindTextureDirectly(m.TEXTURE_2D,t,!0),this._unpackFlipY(void 0===r||!!r),t.baseWidth=i.width,t.baseHeight=i.height,t.width=f,t.height=p,t.isReady=!0,c(f,p,i,n,t,function(){l._prepareWebGLTextureContinuation(t,a,o,s,d)})||this._prepareWebGLTextureContinuation(t,a,o,s,d)):a&&a._removePendingData(t))},e.prototype._setupFramebufferDepthAttachments=function(e,t,n,a,i){void 0===i&&(i=1);var r=this._gl;if(e&&t)return this._createRenderBuffer(n,a,i,r.DEPTH_STENCIL,r.DEPTH24_STENCIL8,r.DEPTH_STENCIL_ATTACHMENT);if(t){var o=r.DEPTH_COMPONENT16;return this._webGLVersion>1&&(o=r.DEPTH_COMPONENT32F),this._createRenderBuffer(n,a,i,o,o,r.DEPTH_ATTACHMENT)}return e?this._createRenderBuffer(n,a,i,r.STENCIL_INDEX8,r.STENCIL_INDEX8,r.STENCIL_ATTACHMENT):null},e.prototype._createRenderBuffer=function(e,t,n,a,i,r,o){void 0===o&&(o=!0);var s=this._gl,c=s.createRenderbuffer();return s.bindRenderbuffer(s.RENDERBUFFER,c),n>1&&s.renderbufferStorageMultisample?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,i,e,t):s.renderbufferStorage(s.RENDERBUFFER,a,e,t),s.framebufferRenderbuffer(s.FRAMEBUFFER,r,s.RENDERBUFFER,c),o&&s.bindRenderbuffer(s.RENDERBUFFER,null),c},e.prototype._releaseTexture=function(e){var t;this._deleteTexture(null===(t=e._hardwareTexture)||void 0===t?void 0:t.underlyingResource),this.unbindAllTextures();var n=this._internalTexturesCache.indexOf(e);-1!==n&&this._internalTexturesCache.splice(n,1),e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureLow&&e._lodTextureLow.dispose(),e._irradianceTexture&&e._irradianceTexture.dispose()},e.prototype._releaseRenderTargetWrapper=function(e){var t=this._renderTargetWrapperCache.indexOf(e);-1!==t&&this._renderTargetWrapperCache.splice(t,1)},e.prototype._deleteTexture=function(e){e&&this._gl.deleteTexture(e)},e.prototype._setProgram=function(e){this._currentProgram!==e&&(this._gl.useProgram(e),this._currentProgram=e)},e.prototype.bindSamplers=function(e){var t=e.getPipelineContext();this._setProgram(t.program);for(var n=e.getSamplers(),a=0;a<n.length;a++){var i=e.getUniform(n[a]);i&&(this._boundUniforms[a]=i)}this._currentEffect=null},e.prototype._activateCurrentTexture=function(){this._currentTextureChannel!==this._activeChannel&&(this._gl.activeTexture(this._gl.TEXTURE0+this._activeChannel),this._currentTextureChannel=this._activeChannel)},e.prototype._bindTextureDirectly=function(e,t,n,a){var i,r;void 0===n&&(n=!1),void 0===a&&(a=!1);var o=!1,s=t&&t._associatedChannel>-1;if(n&&s&&(this._activeChannel=t._associatedChannel),this._boundTexturesCache[this._activeChannel]!==t||a){if(this._activateCurrentTexture(),t&&t.isMultiview)throw console.error(e,t),"_bindTextureDirectly called with a multiview texture!";this._gl.bindTexture(e,null!==(r=null===(i=null==t?void 0:t._hardwareTexture)||void 0===i?void 0:i.underlyingResource)&&void 0!==r?r:null),this._boundTexturesCache[this._activeChannel]=t,t&&(t._associatedChannel=this._activeChannel)}else n&&(o=!0,this._activateCurrentTexture());return s&&!n&&this._bindSamplerUniformToChannel(t._associatedChannel,this._activeChannel),o},e.prototype._bindTexture=function(e,t,n){if(void 0!==e){t&&(t._associatedChannel=e),this._activeChannel=e;var a=t?this._getTextureTarget(t):this._gl.TEXTURE_2D;this._bindTextureDirectly(a,t)}},e.prototype.unbindAllTextures=function(){for(var e=0;e<this._maxSimultaneousTextures;e++)this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))},e.prototype.setTexture=function(e,t,n,a){void 0!==e&&(t&&(this._boundUniforms[e]=t),this._setTexture(e,n))},e.prototype._bindSamplerUniformToChannel=function(e,t){var n=this._boundUniforms[e];n&&n._currentState!==t&&(this._gl.uniform1i(n,t),n._currentState=t)},e.prototype._getTextureWrapMode=function(e){switch(e){case 1:return this._gl.REPEAT;case 0:return this._gl.CLAMP_TO_EDGE;case 2:return this._gl.MIRRORED_REPEAT}return this._gl.REPEAT},e.prototype._setTexture=function(e,t,n,a,i){if(void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===i&&(i=""),!t)return null!=this._boundTexturesCache[e]&&(this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))),!1;if(t.video)this._activeChannel=e,t.update();else if(4===t.delayLoadState)return t.delayLoad(),!1;var r;r=a?t.depthStencilTexture:t.isReady()?t.getInternalTexture():t.isCube?this.emptyCubeTexture:t.is3D?this.emptyTexture3D:t.is2DArray?this.emptyTexture2DArray:this.emptyTexture,!n&&r&&(r._associatedChannel=e);var o=!0;this._boundTexturesCache[e]===r&&(n||this._bindSamplerUniformToChannel(r._associatedChannel,e),o=!1),this._activeChannel=e;var s=this._getTextureTarget(r);if(o&&this._bindTextureDirectly(s,r,n),r&&!r.isMultiview){if(r.isCube&&r._cachedCoordinatesMode!==t.coordinatesMode){r._cachedCoordinatesMode=t.coordinatesMode;var c=3!==t.coordinatesMode&&5!==t.coordinatesMode?1:0;t.wrapU=c,t.wrapV=c}r._cachedWrapU!==t.wrapU&&(r._cachedWrapU=t.wrapU,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(t.wrapU),r)),r._cachedWrapV!==t.wrapV&&(r._cachedWrapV=t.wrapV,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(t.wrapV),r)),r.is3D&&r._cachedWrapR!==t.wrapR&&(r._cachedWrapR=t.wrapR,this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(t.wrapR),r)),this._setAnisotropicLevel(s,r,t.anisotropicFilteringLevel)}return!0},e.prototype.setTextureArray=function(e,t,n,a){if(void 0!==e&&t){this._textureUnits&&this._textureUnits.length===n.length||(this._textureUnits=new Int32Array(n.length));for(var i=0;i<n.length;i++){var r=n[i].getInternalTexture();r?(this._textureUnits[i]=e+i,r._associatedChannel=e+i):this._textureUnits[i]=-1}this._gl.uniform1iv(t,this._textureUnits);for(var o=0;o<n.length;o++)this._setTexture(this._textureUnits[o],n[o],!0)}},e.prototype._setAnisotropicLevel=function(e,t,n){var a=this._caps.textureAnisotropicFilterExtension;11!==t.samplingMode&&3!==t.samplingMode&&2!==t.samplingMode&&(n=1),a&&t._cachedAnisotropicFilteringLevel!==n&&(this._setTextureParameterFloat(e,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n,this._caps.maxAnisotropy),t),t._cachedAnisotropicFilteringLevel=n)},e.prototype._setTextureParameterFloat=function(e,t,n,a){this._bindTextureDirectly(e,a,!0,!0),this._gl.texParameterf(e,t,n)},e.prototype._setTextureParameterInteger=function(e,t,n,a){a&&this._bindTextureDirectly(e,a,!0,!0),this._gl.texParameteri(e,t,n)},e.prototype.unbindAllAttributes=function(){if(this._mustWipeVertexAttributes){this._mustWipeVertexAttributes=!1;for(var e=0;e<this._caps.maxVertexAttribs;e++)this.disableAttributeByIndex(e)}else{e=0;for(var t=this._vertexAttribArraysEnabled.length;e<t;e++)e>=this._caps.maxVertexAttribs||!this._vertexAttribArraysEnabled[e]||this.disableAttributeByIndex(e)}},e.prototype.releaseEffects=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e].getPipelineContext();this._deletePipelineContext(t)}this._compiledEffects={}},e.prototype.dispose=function(){var e;this.stopRenderLoop(),this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._dummyFramebuffer&&this._gl.deleteFramebuffer(this._dummyFramebuffer),this.releaseEffects(),null===(e=this.releaseComputeEffects)||void 0===e||e.call(this),this.unbindAllAttributes(),this._boundUniforms=[],v()&&this._renderingCanvas&&(this._doNotHandleContextLost||(this._renderingCanvas.removeEventListener("webglcontextlost",this._onContextLost),this._renderingCanvas.removeEventListener("webglcontextrestored",this._onContextRestored)),window.removeEventListener("resize",this._checkForMobile)),this._workingCanvas=null,this._workingContext=null,this._currentBufferPointers=[],this._renderingCanvas=null,this._currentProgram=null,this._boundRenderFunction=null,V.ResetCache();for(var t=0,n=this._activeRequests;t<n.length;t++)n[t].abort();this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},e.prototype.attachContextLostEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextlost",e,!1)},e.prototype.attachContextRestoredEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextrestored",e,!1)},e.prototype.getError=function(){return this._gl.getError()},e.prototype._canRenderToFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(1)},e.prototype._canRenderToHalfFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(2)},e.prototype._canRenderToFramebuffer=function(e){for(var t=this._gl;t.getError()!==t.NO_ERROR;);var n=!0,a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(e),1,1,0,t.RGBA,this._getWebGLTextureType(e),null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);var r=t.checkFramebufferStatus(t.FRAMEBUFFER);if((n=(n=n&&r===t.FRAMEBUFFER_COMPLETE)&&t.getError()===t.NO_ERROR)&&(t.clear(t.COLOR_BUFFER_BIT),n=n&&t.getError()===t.NO_ERROR),n){t.bindFramebuffer(t.FRAMEBUFFER,null);var o=t.RGBA,s=t.UNSIGNED_BYTE,c=new Uint8Array(4);t.readPixels(0,0,1,1,o,s,c),n=n&&t.getError()===t.NO_ERROR}for(t.deleteTexture(a),t.deleteFramebuffer(i),t.bindFramebuffer(t.FRAMEBUFFER,null);!n&&t.getError()!==t.NO_ERROR;);return n},e.prototype._getWebGLTextureType=function(e){if(1===this._webGLVersion){switch(e){case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT_OES;case 0:return this._gl.UNSIGNED_BYTE;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5}return this._gl.UNSIGNED_BYTE}switch(e){case 3:return this._gl.BYTE;case 0:return this._gl.UNSIGNED_BYTE;case 4:return this._gl.SHORT;case 5:return this._gl.UNSIGNED_SHORT;case 6:return this._gl.INT;case 7:return this._gl.UNSIGNED_INT;case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5;case 11:return this._gl.UNSIGNED_INT_2_10_10_10_REV;case 12:return this._gl.UNSIGNED_INT_24_8;case 13:return this._gl.UNSIGNED_INT_10F_11F_11F_REV;case 14:return this._gl.UNSIGNED_INT_5_9_9_9_REV;case 15:return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV}return this._gl.UNSIGNED_BYTE},e.prototype._getInternalFormat=function(e,t){void 0===t&&(t=!1);var n=t?this._gl.SRGB8_ALPHA8:this._gl.RGBA;switch(e){case 0:n=this._gl.ALPHA;break;case 1:n=this._gl.LUMINANCE;break;case 2:n=this._gl.LUMINANCE_ALPHA;break;case 6:n=this._gl.RED;break;case 7:n=this._gl.RG;break;case 4:n=t?this._gl.SRGB:this._gl.RGB;break;case 5:n=t?this._gl.SRGB8_ALPHA8:this._gl.RGBA}if(this._webGLVersion>1)switch(e){case 8:n=this._gl.RED_INTEGER;break;case 9:n=this._gl.RG_INTEGER;break;case 10:n=this._gl.RGB_INTEGER;break;case 11:n=this._gl.RGBA_INTEGER}return n},e.prototype._getRGBABufferInternalSizedFormat=function(e,t,n){if(void 0===n&&(n=!1),1===this._webGLVersion){if(void 0!==t)switch(t){case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;case 4:return n?this._gl.SRGB:this._gl.RGB}return this._gl.RGBA}switch(e){case 3:switch(t){case 6:return this._gl.R8_SNORM;case 7:return this._gl.RG8_SNORM;case 4:return this._gl.RGB8_SNORM;case 8:return this._gl.R8I;case 9:return this._gl.RG8I;case 10:return this._gl.RGB8I;case 11:return this._gl.RGBA8I;default:return this._gl.RGBA8_SNORM}case 0:switch(t){case 6:return this._gl.R8;case 7:return this._gl.RG8;case 4:return n?this._gl.SRGB8:this._gl.RGB8;case 5:return n?this._gl.SRGB8_ALPHA8:this._gl.RGBA8;case 8:return this._gl.R8UI;case 9:return this._gl.RG8UI;case 10:return this._gl.RGB8UI;case 11:return this._gl.RGBA8UI;case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;default:return this._gl.RGBA8}case 4:switch(t){case 8:return this._gl.R16I;case 9:return this._gl.RG16I;case 10:return this._gl.RGB16I;default:return this._gl.RGBA16I}case 5:switch(t){case 8:return this._gl.R16UI;case 9:return this._gl.RG16UI;case 10:return this._gl.RGB16UI;default:return this._gl.RGBA16UI}case 6:switch(t){case 8:return this._gl.R32I;case 9:return this._gl.RG32I;case 10:return this._gl.RGB32I;default:return this._gl.RGBA32I}case 7:switch(t){case 8:return this._gl.R32UI;case 9:return this._gl.RG32UI;case 10:return this._gl.RGB32UI;default:return this._gl.RGBA32UI}case 1:switch(t){case 6:return this._gl.R32F;case 7:return this._gl.RG32F;case 4:return this._gl.RGB32F;default:return this._gl.RGBA32F}case 2:switch(t){case 6:return this._gl.R16F;case 7:return this._gl.RG16F;case 4:return this._gl.RGB16F;default:return this._gl.RGBA16F}case 10:return this._gl.RGB565;case 13:return this._gl.R11F_G11F_B10F;case 14:return this._gl.RGB9_E5;case 8:return this._gl.RGBA4;case 9:return this._gl.RGB5_A1;case 11:return 11===t?this._gl.RGB10_A2UI:this._gl.RGB10_A2}return n?this._gl.SRGB8_ALPHA8:this._gl.RGBA8},e.prototype._getRGBAMultiSampleBufferFormat=function(e){return 1===e?this._gl.RGBA32F:2===e?this._gl.RGBA16F:this._gl.RGBA8},e.prototype._loadFile=function(t,n,a,i,r,o){var s=this,c=e._FileToolsLoadFile(t,n,a,i,r,o);return this._activeRequests.push(c),c.onCompleteObservable.add(function(e){s._activeRequests.splice(s._activeRequests.indexOf(e),1)}),c},e._FileToolsLoadFile=function(e,t,n,a,i,r){throw H("FileTools")},e.prototype.readPixels=function(e,t,n,a,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var o=i?4:3,s=i?this._gl.RGBA:this._gl.RGB,c=new Uint8Array(a*n*o);return r&&this.flushFramebuffer(),this._gl.readPixels(e,t,n,a,s,this._gl.UNSIGNED_BYTE,c),Promise.resolve(c)},Object.defineProperty(e,"IsSupportedAsync",{get:function(){return Promise.resolve(this.isSupported())},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IsSupported",{get:function(){return this.isSupported()},enumerable:!1,configurable:!0}),e.isSupported=function(){if(null!==this._HasMajorPerformanceCaveat)return!this._HasMajorPerformanceCaveat;if(null===this._IsSupported)try{var e=this._CreateCanvas(1,1),t=e.getContext("webgl")||e.getContext("experimental-webgl");this._IsSupported=null!=t&&!!window.WebGLRenderingContext}catch(e){this._IsSupported=!1}return this._IsSupported},Object.defineProperty(e,"HasMajorPerformanceCaveat",{get:function(){if(null===this._HasMajorPerformanceCaveat)try{var e=this._CreateCanvas(1,1),t=e.getContext("webgl",{failIfMajorPerformanceCaveat:!0})||e.getContext("experimental-webgl",{failIfMajorPerformanceCaveat:!0});this._HasMajorPerformanceCaveat=!t}catch(e){this._HasMajorPerformanceCaveat=!1}return this._HasMajorPerformanceCaveat},enumerable:!1,configurable:!0}),e.CeilingPOT=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},e.FloorPOT=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)-(e>>1)},e.NearestPOT=function(t){var n=e.CeilingPOT(t),a=e.FloorPOT(t);return n-t>t-a?a:n},e.GetExponentOfTwo=function(t,n,a){var i;switch(void 0===a&&(a=2),a){case 1:i=e.FloorPOT(t);break;case 2:i=e.NearestPOT(t);break;default:i=e.CeilingPOT(t)}return Math.min(i,n)},e.QueueNewFrame=function(e,t){return v()?(t||(t=window),t.requestPostAnimationFrame?t.requestPostAnimationFrame(e):t.requestAnimationFrame?t.requestAnimationFrame(e):t.msRequestAnimationFrame?t.msRequestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.mozRequestAnimationFrame?t.mozRequestAnimationFrame(e):t.oRequestAnimationFrame?t.oRequestAnimationFrame(e):window.setTimeout(e,16)):"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,16)},e.prototype.getHostDocument=function(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:document},e.ExceptionList=[{key:"Chrome/63.0",capture:"63\\.0\\.3239\\.(\\d+)",captureConstraint:108,targets:["uniformBuffer"]},{key:"Firefox/58",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Firefox/59",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Chrome/72.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/73.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/74.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/71",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/72",capture:null,captureConstraint:null,targets:["vao"]}],e._TextureLoaders=[],e.CollisionsEpsilon=.001,e._IsSupported=null,e._HasMajorPerformanceCaveat=null,e}(),ce=function(e,t){return e?e.getClassName&&"Mesh"===e.getClassName()?null:e.getClassName&&"SubMesh"===e.getClassName()?e.clone(t):e.clone?e.clone():null:null},de=function(){function e(){}return e.DeepCopy=function(e,t,n,a){for(var i=function(e){var t=[];do{Object.getOwnPropertyNames(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}while(e=Object.getPrototypeOf(e));return t}(e),r=0,o=i;r<o.length;r++){var s=o[r];if(("_"!==s[0]||a&&-1!==a.indexOf(s))&&(p="Observable",!(-1!==(f=s).indexOf(p,f.length-p.length)||n&&-1!==n.indexOf(s)))){var c=e[s],d=typeof c;if("function"!==d)try{if("object"===d)if(c instanceof Array){if(t[s]=[],c.length>0)if("object"==typeof c[0])for(var l=0;l<c.length;l++){var u=ce(c[l],t);-1===t[s].indexOf(u)&&t[s].push(u)}else t[s]=c.slice(0)}else t[s]=ce(c,t);else t[s]=c}catch(e){C.Warn(e.message)}}}var f,p},e}(),le=function(){function e(){}return Object.defineProperty(e,"Now",{get:function(){return x.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0}),e}(),ue=function(){function e(){this._xhr="undefined"!=typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest}return e.prototype._injectCustomRequestHeaders=function(){for(var t in e.CustomRequestHeaders){var n=e.CustomRequestHeaders[t];n&&this._xhr.setRequestHeader(t,n)}},Object.defineProperty(e.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(e){this._xhr.onprogress=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this._xhr.response},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(e){this._xhr.responseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._xhr.timeout},set:function(e){this._xhr.timeout=e},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t,n){this._xhr.addEventListener(e,t,n)},e.prototype.removeEventListener=function(e,t,n){this._xhr.removeEventListener(e,t,n)},e.prototype.abort=function(){this._xhr.abort()},e.prototype.send=function(t){e.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(t)},e.prototype.open=function(t,n){for(var a=0,i=e.CustomRequestModifiers;a<i.length;a++)(0,i[a])(this._xhr,n);return n=(n=n.replace("file:http:","http:")).replace("file:https:","https:"),this._xhr.open(t,n,!0)},e.prototype.setRequestHeader=function(e,t){this._xhr.setRequestHeader(e,t)},e.prototype.getResponseHeader=function(e){return this._xhr.getResponseHeader(e)},e.CustomRequestHeaders={},e.CustomRequestModifiers=new Array,e}(),fe=function(){function e(){}return e.FilesToLoad={},e}(),pe=function(){function e(){}return e.ExponentialBackoff=function(e,t){return void 0===e&&(e=3),void 0===t&&(t=500),function(n,a,i){return 0!==a.status||i>=e||-1!==n.indexOf("file:")?-1:Math.pow(2,i)*t}},e}(),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t._setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t}(Error),_e=function(e){function t(n,a,i){var r=e.call(this,n)||this;return r.errorCode=a,r.innerError=i,r.name="RuntimeError",me._setPrototypeOf(r,t.prototype),r}return(0,r.__extends)(t,e),t}(me),he=function(){function e(){}return e.SetImmediate=function(e){v()&&window.setImmediate?window.setImmediate(e):setTimeout(e,1)},e}(),be=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i),ge=function(e){function t(n,a){var i=e.call(this,n,4e3)||this;return i.name="LoadFileError",me._setPrototypeOf(i,t.prototype),a instanceof ue?i.request=a:i.file=a,i}return(0,r.__extends)(t,e),t}(_e),ve=function(e){function t(n,a){var i=e.call(this,n,4001)||this;return i.request=a,i.name="RequestFileError",me._setPrototypeOf(i,t.prototype),i}return(0,r.__extends)(t,e),t}(_e),ye=function(e){function t(n,a){var i=e.call(this,n,4002)||this;return i.file=a,i.name="ReadFileError",me._setPrototypeOf(i,t.prototype),i}return(0,r.__extends)(t,e),t}(_e),Se={DefaultRetryStrategy:pe.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:function(e){return e}},De=function(e){return e.replace(/#/gm,"%23")},Ie=function(e,t){if((!e||0!==e.indexOf("data:"))&&Se.CorsBehavior)if("string"==typeof Se.CorsBehavior||Se.CorsBehavior instanceof String)t.crossOrigin=Se.CorsBehavior;else{var n=Se.CorsBehavior(e);n&&(t.crossOrigin=n)}},xe=function(e,t,n,a,i,o){var s,c;void 0===i&&(i="");var d=!1;e instanceof ArrayBuffer||ArrayBuffer.isView(e)?"undefined"!=typeof Blob?(c=URL.createObjectURL(new Blob([e],{type:i})),d=!0):c="data:".concat(i,";base64,")+function(e){for(var t,n,a,i,r,o,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",l=0,u=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);l<u.length;)i=(t=u[l++])>>2,r=(3&t)<<4|(n=l<u.length?u[l++]:Number.NaN)>>4,o=(15&n)<<2|(a=l<u.length?u[l++]:Number.NaN)>>6,s=63&a,isNaN(n)?o=s=64:isNaN(a)&&(s=64),d+=c.charAt(i)+c.charAt(r)+c.charAt(o)+c.charAt(s);return d}(e):e instanceof Blob?(c=URL.createObjectURL(e),d=!0):(c=De(e),c=Se.PreprocessUrl(e));var l=q.LastCreatedEngine,u=function(t){if(n){var a=c||e.toString();n("Error while trying to load image: ".concat(0===a.indexOf("http")||a.length<=128?a:a.slice(0,128)+"..."),t)}};if("undefined"==typeof Image||null!==(s=null==l?void 0:l._features.forceBitmapOverHTMLImageElement)&&void 0!==s&&s)return Oe(c,function(a){l.createImageBitmap(new Blob([a],{type:i}),(0,r.__assign)({premultiplyAlpha:"none"},o)).then(function(e){t(e),d&&URL.revokeObjectURL(c)}).catch(function(t){n&&n("Error while trying to load image: "+e,t)})},void 0,a||void 0,!0,function(e,t){u(t)}),null;var f=new Image;Ie(c,f);var p=function(){f.removeEventListener("load",p),f.removeEventListener("error",m),t(f),d&&f.src&&URL.revokeObjectURL(f.src)},m=function(e){f.removeEventListener("load",p),f.removeEventListener("error",m),u(e),d&&f.src&&URL.revokeObjectURL(f.src)};f.addEventListener("load",p),f.addEventListener("error",m);var _=function(){f.src=c};if("blob:"!==c.substr(0,5)&&"data:"!==c.substr(0,5)&&a&&a.enableTexturesOffline)a.open(function(){a&&a.loadImage(c,f)},_);else{if(-1!==c.indexOf("file:")){var h=decodeURIComponent(c.substring(5).toLowerCase());if(fe.FilesToLoad[h]){try{var b=void 0;try{b=URL.createObjectURL(fe.FilesToLoad[h])}catch(e){b=URL.createObjectURL(fe.FilesToLoad[h])}f.src=b,d=!0}catch(e){f.src=""}return f}}_()}return f},Ce=function(e,t,n,a,i){var r=new FileReader,o={onCompleteObservable:new g,abort:function(){return r.abort()}};return r.onloadend=function(){return o.onCompleteObservable.notifyObservers(o)},i&&(r.onerror=function(){i(new ye("Unable to read ".concat(e.name),e))}),r.onload=function(e){t(e.target.result)},n&&(r.onprogress=n),a?r.readAsArrayBuffer(e):r.readAsText(e),o},Oe=function(e,t,n,a,i,r,o){if(e.name)return Ce(e,t,n,i,r?function(e){r(void 0,e)}:void 0);var s=e;if(-1!==s.indexOf("file:")){var c=decodeURIComponent(s.substring(5).toLowerCase());0===c.indexOf("./")&&(c=c.substring(2));var d=fe.FilesToLoad[c];if(d)return Ce(d,t,n,i,r?function(e){return r(void 0,new ge(e.message,e.file))}:void 0)}if(Ae(s)){var l={onCompleteObservable:new g,abort:function(){return function(){}}};try{t(i?Le(s):Pe(s))}catch(e){r?r(void 0,e):C.Error(e.message||"Failed to parse the Data URL")}return he.SetImmediate(function(){l.onCompleteObservable.notifyObservers(l)}),l}return we(s,function(e,n){t(e,n?n.responseURL:void 0)},n,a,i,r?function(e){r(e.request,new ge(e.message,e.request))}:void 0,o)},we=function(e,t,n,a,i,r,o){e=De(e),e=Se.PreprocessUrl(e);var s=Se.BaseUrl+e,c=!1,d={onCompleteObservable:new g,abort:function(){return c=!0}},l=function(){var e,a=new ue,l=null,u=function(){a&&(n&&a.removeEventListener("progress",n),e&&a.removeEventListener("readystatechange",e),a.removeEventListener("loadend",f))},f=function(){u(),d.onCompleteObservable.notifyObservers(d),d.onCompleteObservable.clear(),n=void 0,e=null,f=null,r=void 0,o=void 0,t=void 0};d.abort=function(){c=!0,f&&f(),a&&a.readyState!==(XMLHttpRequest.DONE||4)&&a.abort(),null!==l&&(clearTimeout(l),l=null),a=null};var p=function(e){var t=e.message||"Unknown error";r&&a?r(new ve(t,a)):C.Error(t)},m=function(d){if(a){if(a.open("GET",s),o)try{o(a)}catch(e){return void p(e)}i&&(a.responseType="arraybuffer"),n&&a.addEventListener("progress",n),f&&a.addEventListener("loadend",f),e=function(){if(!c&&a&&a.readyState===(XMLHttpRequest.DONE||4)){if(e&&a.removeEventListener("readystatechange",e),a.status>=200&&a.status<300||0===a.status&&(!v()||Ee())){try{t&&t(i?a.response:a.responseText,a)}catch(e){p(e)}return}var n=Se.DefaultRetryStrategy;if(n){var o=n(s,a,d);if(-1!==o)return u(),a=new ue,void(l=setTimeout(function(){return m(d+1)},o))}var f=new ve("Error status: "+a.status+" "+a.statusText+" - Unable to load "+s,a);r&&r(f)}},a.addEventListener("readystatechange",e),a.send()}};m(0)};if(a&&a.enableSceneOffline){var u=function(e){e&&e.status>400?r&&r(e):l()};a.open(function(){a&&a.loadFile(Se.BaseUrl+e,function(e){!c&&t&&t(e),d.onCompleteObservable.notifyObservers(d)},n?function(e){!c&&n&&n(e)}:void 0,u,i)},u)}else l();return d},Ee=function(){return"undefined"!=typeof location&&"file:"===location.protocol},Ae=function(e){return be.test(e)};function Le(e){return function(e){for(var t=w(e),n=t.length,a=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a.buffer}(e.split(",")[1])}var ke,Me,Pe=function(e){return w(e.split(",")[1])};se._FileToolsLoadImage=xe,se._FileToolsLoadFile=Oe,B._FileToolsLoadFile=Oe,function(e,t,n,a,i,r,o,s,c,d){ke={DecodeBase64UrlToBinary:e,DecodeBase64UrlToString:t,DefaultRetryStrategy:n.DefaultRetryStrategy,BaseUrl:n.BaseUrl,CorsBehavior:n.CorsBehavior,PreprocessUrl:n.PreprocessUrl,IsBase64DataUrl:a,IsFileURL:i,LoadFile:r,LoadImage:o,ReadFile:s,RequestFile:c,SetCorsBehavior:d},Object.defineProperty(ke,"DefaultRetryStrategy",{get:function(){return n.DefaultRetryStrategy},set:function(e){n.DefaultRetryStrategy=e}}),Object.defineProperty(ke,"BaseUrl",{get:function(){return n.BaseUrl},set:function(e){n.BaseUrl=e}}),Object.defineProperty(ke,"PreprocessUrl",{get:function(){return n.PreprocessUrl},set:function(e){n.PreprocessUrl=e}}),Object.defineProperty(ke,"CorsBehavior",{get:function(){return n.CorsBehavior},set:function(e){n.CorsBehavior=e}})}(Le,Pe,Se,Ae,Ee,Oe,xe,Ce,we,Ie),function(e){e[e.Pending=0]="Pending",e[e.Fulfilled=1]="Fulfilled",e[e.Rejected=2]="Rejected"}(Me||(Me={}));var Te=function(){this.count=0,this.target=0,this.results=[]},Ue=function(){function e(e){var t=this;if(this._state=Me.Pending,this._children=new Array,this._rejectWasConsumed=!1,e)try{e(function(e){t._resolve(e)},function(e){t._reject(e)})}catch(e){this._reject(e)}}return Object.defineProperty(e.prototype,"_result",{get:function(){return this._resultValue},set:function(e){this._resultValue=e,this._parent&&void 0===this._parent._result&&(this._parent._result=e)},enumerable:!1,configurable:!0}),e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.then=function(t,n){var a=this,i=new e;return i._onFulfilled=t,i._onRejected=n,this._children.push(i),i._parent=this,this._state!==Me.Pending&&setTimeout(function(){a._state===Me.Fulfilled||a._rejectWasConsumed?i._resolve(a._result):i._reject(a._reason)}),i},e.prototype._moveChildren=function(e){var t,n=this;if((t=this._children).push.apply(t,e.splice(0,e.length)),this._children.forEach(function(e){e._parent=n}),this._state===Me.Fulfilled)for(var a=0,i=this._children;a<i.length;a++)i[a]._resolve(this._result);else if(this._state===Me.Rejected)for(var r=0,o=this._children;r<o.length;r++)o[r]._reject(this._reason)},e.prototype._resolve=function(e){try{this._state=Me.Fulfilled;var t=null;if(this._onFulfilled&&(t=this._onFulfilled(e)),null!=t)if(void 0!==t._state){var n=t;n._parent=this,n._moveChildren(this._children),e=n._result}else e=t;this._result=e;for(var a=0,i=this._children;a<i.length;a++)i[a]._resolve(e);this._children.length=0,delete this._onFulfilled,delete this._onRejected}catch(e){this._reject(e,!0)}},e.prototype._reject=function(e,t){if(void 0===t&&(t=!1),this._state=Me.Rejected,this._reason=e,this._onRejected&&!t)try{this._onRejected(e),this._rejectWasConsumed=!0}catch(t){e=t}for(var n=0,a=this._children;n<a.length;n++){var i=a[n];this._rejectWasConsumed?i._resolve(null):i._reject(e)}this._children.length=0,delete this._onFulfilled,delete this._onRejected},e.resolve=function(t){var n=new e;return n._resolve(t),n},e._RegisterForFulfillment=function(e,t,n){e.then(function(e){return t.results[n]=e,t.count++,t.count===t.target&&t.rootPromise._resolve(t.results),null},function(e){t.rootPromise._state!==Me.Rejected&&t.rootPromise._reject(e)})},e.all=function(t){var n=new e,a=new Te;if(a.target=t.length,a.rootPromise=n,t.length)for(var i=0;i<t.length;i++)e._RegisterForFulfillment(t[i],a,i);else n._resolve([]);return n},e.race=function(t){var n=new e;if(t.length)for(var a=0,i=t;a<i.length;a++)i[a].then(function(e){return n&&(n._resolve(e),n=null),null},function(e){n&&(n._reject(e),n=null)});return n},e}(),Fe=function(){function e(){}return e.Apply=function(e){void 0===e&&(e=!1),(e||"undefined"==typeof Promise)&&(window.Promise=Ue)},e}(),He={},Re=function(){function e(){}return e.Instantiate=function(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];var t=He[e];if(t)return t;C.Warn(e+" not found, you may have missed an import.");for(var n=e.split("."),a=window||this,i=0,r=n.length;i<r;i++)a=a[n[i]];return"function"!=typeof a?null:a},e.RegisteredExternalClasses={},e}(),Ne=function(){function e(){}return Object.defineProperty(e,"BaseUrl",{get:function(){return Se.BaseUrl},set:function(e){Se.BaseUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultRetryStrategy",{get:function(){return Se.DefaultRetryStrategy},set:function(e){Se.DefaultRetryStrategy=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CorsBehavior",{get:function(){return Se.CorsBehavior},set:function(e){Se.CorsBehavior=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UseFallbackTexture",{get:function(){return q.UseFallbackTexture},set:function(e){q.UseFallbackTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RegisteredExternalClasses",{get:function(){return Re.RegisteredExternalClasses},set:function(e){Re.RegisteredExternalClasses=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"fallbackTexture",{get:function(){return q.FallbackTexture},set:function(e){q.FallbackTexture=e},enumerable:!1,configurable:!0}),e.FetchToRef=function(e,t,n,a,i,r){var o=4*((Math.abs(e)*n%n|0)+(Math.abs(t)*a%a|0)*n);r.r=i[o]/255,r.g=i[o+1]/255,r.b=i[o+2]/255,r.a=i[o+3]/255},e.Mix=function(e,t,n){return e*(1-n)+t*n},e.Instantiate=function(e){return Re.Instantiate(e)},e.Slice=function(e,t,n){return f.Slice(e,t,n)},e.SliceToArray=function(e,t,n){return f.SliceToArray(e,t,n)},e.SetImmediate=function(e){he.SetImmediate(e)},e.IsExponentOfTwo=function(e){var t=1;do{t*=2}while(t<e);return t===e},e.FloatRound=function(t){return Math.fround?Math.fround(t):(e._TmpFloatArray[0]=t,e._TmpFloatArray[0])},e.GetFilename=function(e){var t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)},e.GetFolderPath=function(e,t){void 0===t&&(t=!1);var n=e.lastIndexOf("/");return n<0?t?e:"":e.substring(0,n+1)},e.ToDegrees=function(e){return 180*e/Math.PI},e.ToRadians=function(e){return e*Math.PI/180},e.MakeArray=function(e,t){return!0===t||void 0!==e&&null!=e?Array.isArray(e)?e:[e]:null},e.GetPointerPrefix=function(e){var t="pointer";return v()&&!window.PointerEvent&&(t="mouse"),!e._badDesktopOS||e._badOS||document&&"ontouchend"in document||(t="mouse"),t},e.SetCorsBehavior=function(e,t){Ie(e,t)},e.CleanUrl=function(e){return e.replace(/#/gm,"%23")},Object.defineProperty(e,"PreprocessUrl",{get:function(){return Se.PreprocessUrl},set:function(e){Se.PreprocessUrl=e},enumerable:!1,configurable:!0}),e.LoadImage=function(e,t,n,a,i,r){return xe(e,t,n,a,i,r)},e.LoadFile=function(e,t,n,a,i,r){return Oe(e,t,n,a,i,r)},e.LoadFileAsync=function(e,t){return void 0===t&&(t=!0),new Promise(function(n,a){Oe(e,function(e){n(e)},void 0,void 0,t,function(e,t){a(t)})})},e.LoadScript=function(e,t,n,a){if(v()){var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",e),a&&(r.id=a),r.onload=function(){t&&t()},r.onerror=function(t){n&&n("Unable to load script '".concat(e,"'"),t)},i.appendChild(r)}},e.LoadScriptAsync=function(e){var t=this;return new Promise(function(n,a){t.LoadScript(e,function(){n()},function(e,t){a(t)})})},e.ReadFileAsDataURL=function(e,t,n){var a=new FileReader,i={onCompleteObservable:new g,abort:function(){return a.abort()}};return a.onloadend=function(){i.onCompleteObservable.notifyObservers(i)},a.onload=function(e){t(e.target.result)},a.onprogress=n,a.readAsDataURL(e),i},e.ReadFile=function(e,t,n,a,i){return Ce(e,t,n,a,i)},e.FileAsURL=function(e){var t=new Blob([e]);return(window.URL||window.webkitURL).createObjectURL(t)},e.Format=function(e,t){return void 0===t&&(t=2),e.toFixed(t)},e.DeepCopy=function(e,t,n,a){de.DeepCopy(e,t,n,a)},e.IsEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},e.RegisterTopRootEvents=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.addEventListener(a.name,a.handler,!1);try{window.parent&&window.parent.addEventListener(a.name,a.handler,!1)}catch(e){}}},e.UnregisterTopRootEvents=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.removeEventListener(a.name,a.handler);try{e.parent&&e.parent.removeEventListener(a.name,a.handler)}catch(e){}}},e.DumpFramebuffer=function(t,n,a,i,o,s){return void 0===o&&(o="image/png"),(0,r.__awaiter)(this,void 0,void 0,function(){var c,d;return(0,r.__generator)(this,function(r){switch(r.label){case 0:return[4,a.readPixels(0,0,t,n)];case 1:return c=r.sent(),d=new Uint8Array(c.buffer),e.DumpData(t,n,d,i,o,s,!0),[2]}})})},e.DumpData=function(t,n,a,i,r,o,s,c,d){void 0===r&&(r="image/png"),void 0===s&&(s=!1),void 0===c&&(c=!1),e._ScreenshotCanvas||(e._ScreenshotCanvas=document.createElement("canvas")),e._ScreenshotCanvas.width=t,e._ScreenshotCanvas.height=n;var l=e._ScreenshotCanvas.getContext("2d");if(l){if(a instanceof Float32Array){for(var u=new Uint8Array(a.length),f=a.length;f--;){var p=a[f];u[f]=p<0?0:p>1?1:Math.round(255*p)}a=u}var m=l.createImageData(t,n);m.data.set(a),l.putImageData(m,0,0);var _=e._ScreenshotCanvas;if(s){var h=document.createElement("canvas");h.width=t,h.height=n;var b=h.getContext("2d");if(!b)return;b.translate(0,n),b.scale(1,-1),b.drawImage(e._ScreenshotCanvas,0,0),_=h}c?e.ToBlob(_,function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;i&&i(t)},t.readAsArrayBuffer(e)},r,d):e.EncodeScreenshotCanvasData(i,r,o,_,d)}},e.DumpDataAsync=function(t,n,a,i,r,o,s,c){return void 0===i&&(i="image/png"),void 0===o&&(o=!1),void 0===s&&(s=!1),new Promise(function(d){e.DumpData(t,n,a,function(e){return d(e)},i,r,o,s,c)})},e.ToBlob=function(e,t,n,a){void 0===n&&(n="image/png"),e.toBlob||(e.toBlob=function(e,t,n){var a=this;setTimeout(function(){for(var i=atob(a.toDataURL(t,n).split(",")[1]),r=i.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=i.charCodeAt(s);e(new Blob([o]))})}),e.toBlob(function(e){t(e)},n,a)},e.EncodeScreenshotCanvasData=function(t,n,a,i,r){void 0===n&&(n="image/png"),t?t((null!=i?i:e._ScreenshotCanvas).toDataURL(n,r)):this.ToBlob(null!=i?i:e._ScreenshotCanvas,function(t){if("download"in document.createElement("a")){if(!a){var n=new Date,i=(n.getFullYear()+"-"+(n.getMonth()+1)).slice(2)+"-"+n.getDate()+"_"+n.getHours()+"-"+("0"+n.getMinutes()).slice(-2);a="screenshot_"+i+".png"}e.Download(t,a)}else if(t){var r=URL.createObjectURL(t),o=window.open("");if(!o)return;var s=o.document.createElement("img");s.onload=function(){URL.revokeObjectURL(r)},s.src=r,o.document.body.appendChild(s)}},n,r)},e.Download=function(e,t){if(navigator&&navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=window.URL.createObjectURL(e),a=document.createElement("a");document.body.appendChild(a),a.style.display="none",a.href=n,a.download=t,a.addEventListener("click",function(){a.parentElement&&a.parentElement.removeChild(a)}),a.click(),window.URL.revokeObjectURL(n)}},e.BackCompatCameraNoPreventDefault=function(e){return"boolean"==typeof e[0]?e[0]:"boolean"==typeof e[1]&&e[1]},e.CreateScreenshot=function(e,t,n,a,i){throw void 0===i&&(i="image/png"),H("ScreenshotTools")},e.CreateScreenshotAsync=function(e,t,n,a){throw void 0===a&&(a="image/png"),H("ScreenshotTools")},e.CreateScreenshotUsingRenderTarget=function(e,t,n,a,i,r,o,s){throw void 0===i&&(i="image/png"),void 0===r&&(r=1),void 0===o&&(o=!1),H("ScreenshotTools")},e.CreateScreenshotUsingRenderTargetAsync=function(e,t,n,a,i,r,o){throw void 0===a&&(a="image/png"),void 0===i&&(i=1),void 0===r&&(r=!1),H("ScreenshotTools")},e.RandomId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.IsBase64=function(e){return Ae(e)},e.DecodeBase64=function(e){return Le(e)},Object.defineProperty(e,"errorsCount",{get:function(){return C.errorsCount},enumerable:!1,configurable:!0}),e.Log=function(e){C.Log(e)},e.Warn=function(e){C.Warn(e)},e.Error=function(e){C.Error(e)},Object.defineProperty(e,"LogCache",{get:function(){return C.LogCache},enumerable:!1,configurable:!0}),e.ClearLogCache=function(){C.ClearLogCache()},Object.defineProperty(e,"LogLevels",{set:function(e){C.LogLevels=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PerformanceLogLevel",{set:function(t){return(t&e.PerformanceUserMarkLogLevel)===e.PerformanceUserMarkLogLevel?(e.StartPerformanceCounter=e._StartUserMark,void(e.EndPerformanceCounter=e._EndUserMark)):(t&e.PerformanceConsoleLogLevel)===e.PerformanceConsoleLogLevel?(e.StartPerformanceCounter=e._StartPerformanceConsole,void(e.EndPerformanceCounter=e._EndPerformanceConsole)):(e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,void(e.EndPerformanceCounter=e._EndPerformanceCounterDisabled))},enumerable:!1,configurable:!0}),e._StartPerformanceCounterDisabled=function(e,t){},e._EndPerformanceCounterDisabled=function(e,t){},e._StartUserMark=function(t,n){if(void 0===n&&(n=!0),!e._Performance){if(!v())return;e._Performance=window.performance}n&&e._Performance.mark&&e._Performance.mark(t+"-Begin")},e._EndUserMark=function(t,n){void 0===n&&(n=!0),n&&e._Performance.mark&&(e._Performance.mark(t+"-End"),e._Performance.measure(t,t+"-Begin",t+"-End"))},e._StartPerformanceConsole=function(t,n){void 0===n&&(n=!0),n&&(e._StartUserMark(t,n),console.time&&console.time(t))},e._EndPerformanceConsole=function(t,n){void 0===n&&(n=!0),n&&(e._EndUserMark(t,n),console.timeEnd(t))},Object.defineProperty(e,"Now",{get:function(){return le.Now},enumerable:!1,configurable:!0}),e.GetClassName=function(e,t){void 0===t&&(t=!1);var n=null;return!t&&e.getClassName?n=e.getClassName():(e instanceof Object&&(n=(t?e:Object.getPrototypeOf(e)).constructor.__bjsclassName__),n||(n=typeof e)),n},e.First=function(e,t){for(var n=0,a=e;n<a.length;n++){var i=a[n];if(t(i))return i}return null},e.getFullClassName=function(e,t){void 0===t&&(t=!1);var n=null,a=null;if(!t&&e.getClassName)n=e.getClassName();else{if(e instanceof Object){var i=t?e:Object.getPrototypeOf(e);n=i.constructor.__bjsclassName__,a=i.constructor.__bjsmoduleName__}n||(n=typeof e)}return n?(null!=a?a+".":"")+n:null},e.DelayAsync=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},e.IsSafari=function(){return!!y()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},e.UseCustomRequestHeaders=!1,e.CustomRequestHeaders=ue.CustomRequestHeaders,e._TmpFloatArray=new Float32Array(1),e.GetDOMTextContent=D,e.GetAbsoluteUrl="object"==typeof document?function(e){var t=document.createElement("a");return t.href=e,t.href}:"function"==typeof URL&&"object"==typeof location?function(e){return new URL(e,location.origin).href}:function(){throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},e.NoneLogLevel=C.NoneLogLevel,e.MessageLogLevel=C.MessageLogLevel,e.WarningLogLevel=C.WarningLogLevel,e.ErrorLogLevel=C.ErrorLogLevel,e.AllLogLevel=C.AllLogLevel,e.IsWindowObjectExist=v,e.PerformanceNoneLogLevel=0,e.PerformanceUserMarkLogLevel=1,e.PerformanceConsoleLogLevel=2,e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,e.EndPerformanceCounter=e._EndPerformanceCounterDisabled,e}();function Be(e,t,n,a){var i,r=1;1===a?i=new Float32Array(t*n*4):2===a?(i=new Uint16Array(t*n*4),r=15360):i=7===a?new Uint32Array(t*n*4):new Uint8Array(t*n*4);for(var o=0;o<t;o++)for(var s=0;s<n;s++){var c=3*(s*t+o),d=4*(s*t+o);i[d+0]=e[c+0],i[d+1]=e[c+1],i[d+2]=e[c+2],i[d+3]=r}return i}function je(e){return function(t,n,a,i,r,o,s,c,d,l){void 0===d&&(d=null),void 0===l&&(l=0);var u=e?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D_ARRAY,f=e?G.Raw3D:G.Raw2DArray,p=new Z(this,f);p.baseWidth=n,p.baseHeight=a,p.baseDepth=i,p.width=n,p.height=a,p.depth=i,p.format=r,p.type=l,p.generateMipMaps=o,p.samplingMode=c,e?p.is3D=!0:p.is2DArray=!0,this._doNotHandleContextLost||(p._bufferView=t),e?this.updateRawTexture3D(p,t,r,s,d,l):this.updateRawTexture2DArray(p,t,r,s,d,l),this._bindTextureDirectly(u,p,!0);var m=this._getSamplingParameters(c,o);return this._gl.texParameteri(u,this._gl.TEXTURE_MAG_FILTER,m.mag),this._gl.texParameteri(u,this._gl.TEXTURE_MIN_FILTER,m.min),o&&this._gl.generateMipmap(u),this._bindTextureDirectly(u,null),this._internalTexturesCache.push(p),p}}function Ve(e){return function(t,n,a,i,r,o){void 0===r&&(r=null),void 0===o&&(o=0);var s=e?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D_ARRAY,c=this._getWebGLTextureType(o),d=this._getInternalFormat(a),l=this._getRGBABufferInternalSizedFormat(o,a);this._bindTextureDirectly(s,t,!0),this._unpackFlipY(void 0===i||!!i),this._doNotHandleContextLost||(t._bufferView=n,t.format=a,t.invertY=i,t._compression=r),t.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),r&&n?this._gl.compressedTexImage3D(s,0,this.getCaps().s3tc[r],t.width,t.height,t.depth,0,n):this._gl.texImage3D(s,0,l,t.width,t.height,t.depth,0,d,c,n),t.generateMipMaps&&this._gl.generateMipmap(s),this._bindTextureDirectly(s,null),t.isReady=!0}}!function(){function e(e,t,n,a){void 0===a&&(a=0),this.iterations=e,this.index=a-1,this._done=!1,this._fn=t,this._successCallback=n}e.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},e.prototype.breakLoop=function(){this._done=!0,this._successCallback()},e.Run=function(t,n,a,i){void 0===i&&(i=0);var r=new e(t,n,a,i);return r.executeNext(),r},e.SyncAsyncForLoop=function(t,n,a,i,r,o){return void 0===o&&(o=0),e.Run(Math.ceil(t/n),function(e){r&&r()?e.breakLoop():setTimeout(function(){for(var i=0;i<n;++i){var o=e.index*n+i;if(o>=t)break;if(a(o),r&&r()){e.breakLoop();break}}e.executeNext()},o)},i)}}(),q.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z",Fe.Apply(),se.prototype.updateRawTexture=function(e,t,n,a,i,r){if(void 0===i&&(i=null),void 0===r&&(r=0),e){var o=this._getRGBABufferInternalSizedFormat(r,n),s=this._getInternalFormat(n),c=this._getWebGLTextureType(r);this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0),this._unpackFlipY(void 0===a||!!a),this._doNotHandleContextLost||(e._bufferView=t,e.format=n,e.type=r,e.invertY=a,e._compression=i),e.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),i&&t?this._gl.compressedTexImage2D(this._gl.TEXTURE_2D,0,this.getCaps().s3tc[i],e.width,e.height,0,t):this._gl.texImage2D(this._gl.TEXTURE_2D,0,o,e.width,e.height,0,s,c,t),e.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),e.isReady=!0}},se.prototype.createRawTexture=function(e,t,n,a,i,r,o,s,c,d){void 0===s&&(s=null),void 0===c&&(c=0),void 0===d&&(d=0);var l=new Z(this,G.Raw);l.baseWidth=t,l.baseHeight=n,l.width=t,l.height=n,l.format=a,l.generateMipMaps=i,l.samplingMode=o,l.invertY=r,l._compression=s,l.type=c,this._doNotHandleContextLost||(l._bufferView=e),this.updateRawTexture(l,e,a,r,s,c),this._bindTextureDirectly(this._gl.TEXTURE_2D,l,!0);var u=this._getSamplingParameters(o,i);return this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,u.mag),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,u.min),i&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._internalTexturesCache.push(l),l},se.prototype.createRawCubeTexture=function(e,t,n,a,i,r,o,s){void 0===s&&(s=null);var c=this._gl,d=new Z(this,G.CubeRaw);d.isCube=!0,d.format=n,d.type=a,this._doNotHandleContextLost||(d._bufferViewArray=e);var l=this._getWebGLTextureType(a),u=this._getInternalFormat(n);u===c.RGB&&(u=c.RGBA),l!==c.FLOAT||this._caps.textureFloatLinearFiltering?l!==this._gl.HALF_FLOAT_OES||this._caps.textureHalfFloatLinearFiltering?l!==c.FLOAT||this._caps.textureFloatRender?l!==c.HALF_FLOAT||this._caps.colorBufferFloat||(i=!1,C.Warn("Render to half float textures is not supported. Mipmap generation forced to false.")):(i=!1,C.Warn("Render to float textures is not supported. Mipmap generation forced to false.")):(i=!1,o=1,C.Warn("Half float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively.")):(i=!1,o=1,C.Warn("Float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively."));var f=t,p=f;d.width=f,d.height=p,!this.needPOTTextures||Ne.IsExponentOfTwo(d.width)&&Ne.IsExponentOfTwo(d.height)||(i=!1),e&&this.updateRawCubeTexture(d,e,n,a,r,s),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,d,!0),e&&i&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP);var m=this._getSamplingParameters(o,i);return c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,m.mag),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,m.min),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),this._bindTextureDirectly(c.TEXTURE_CUBE_MAP,null),d.generateMipMaps=i,d.samplingMode=o,d},se.prototype.updateRawCubeTexture=function(e,t,n,a,i,r,o){void 0===r&&(r=null),void 0===o&&(o=0),e._bufferViewArray=t,e.format=n,e.type=a,e.invertY=i,e._compression=r;var s=this._gl,c=this._getWebGLTextureType(a),d=this._getInternalFormat(n),l=this._getRGBABufferInternalSizedFormat(a),u=!1;d===s.RGB&&(d=s.RGBA,u=!0),this._bindTextureDirectly(s.TEXTURE_CUBE_MAP,e,!0),this._unpackFlipY(void 0===i||!!i),e.width%4!=0&&s.pixelStorei(s.UNPACK_ALIGNMENT,1);for(var f=0;f<6;f++){var p=t[f];r?s.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,o,this.getCaps().s3tc[r],e.width,e.height,0,p):(u&&(p=Be(p,e.width,e.height,a)),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+f,o,l,e.width,e.height,0,d,c,p))}(!this.needPOTTextures||Ne.IsExponentOfTwo(e.width)&&Ne.IsExponentOfTwo(e.height))&&e.generateMipMaps&&0===o&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),e.isReady=!0},se.prototype.createRawCubeTextureFromUrl=function(e,t,n,a,i,r,o,s,c,d,l,u){var f=this;void 0===c&&(c=null),void 0===d&&(d=null),void 0===l&&(l=3),void 0===u&&(u=!1);var p=this._gl,m=this.createRawCubeTexture(null,n,a,i,!r,u,l,null);return null==t||t._addPendingData(m),m.url=e,this._internalTexturesCache.push(m),this._loadFile(e,function(e){!function(e){var n=m.width,r=o(e);if(r){if(s){var d=f._getWebGLTextureType(i),l=f._getInternalFormat(a),_=f._getRGBABufferInternalSizedFormat(i),h=!1;l===p.RGB&&(l=p.RGBA,h=!0),f._bindTextureDirectly(p.TEXTURE_CUBE_MAP,m,!0),f._unpackFlipY(!1);for(var b=s(r),g=0;g<b.length;g++)for(var v=n>>g,y=0;y<6;y++){var S=b[g][y];h&&(S=Be(S,v,v,i)),p.texImage2D(y,g,_,v,v,0,l,d,S)}f._bindTextureDirectly(p.TEXTURE_CUBE_MAP,null)}else f.updateRawCubeTexture(m,r,a,i,u);m.isReady=!0,null==t||t._removePendingData(m),c&&c()}}(e)},void 0,null==t?void 0:t.offlineProvider,!0,function(e,n){null==t||t._removePendingData(m),d&&e&&d(e.status+" "+e.statusText,n)}),m},se.prototype.createRawTexture2DArray=je(!1),se.prototype.createRawTexture3D=je(!0),se.prototype.updateRawTexture2DArray=Ve(!1),se.prototype.updateRawTexture3D=Ve(!0),se.prototype.setAlphaConstants=function(e,t,n,a){this._alphaState.setAlphaBlendConstants(e,t,n,a)},se.prototype.setAlphaMode=function(e,t){if(void 0===t&&(t=!1),this._alphaMode!==e){switch(e){case 0:this._alphaState.alphaBlend=!1;break;case 7:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 8:case 14:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 2:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 6:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 1:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 3:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 4:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR,this._gl.ZERO,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 5:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 9:this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR,this._gl.CONSTANT_ALPHA,this._gl.ONE_MINUS_CONSTANT_ALPHA),this._alphaState.alphaBlend=!0;break;case 10:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 11:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 12:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 13:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE_MINUS_DST_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 15:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 16:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 17:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0}t||(this.depthCullingState.depthMask=0===e),this._alphaMode=e}},se.prototype.getAlphaMode=function(){return this._alphaMode},se.prototype.setAlphaEquation=function(e){if(this._alphaEquation!==e){switch(e){case 0:this._alphaState.setAlphaEquationParameters(32774,32774);break;case 1:this._alphaState.setAlphaEquationParameters(32778,32778);break;case 2:this._alphaState.setAlphaEquationParameters(32779,32779);break;case 3:this._alphaState.setAlphaEquationParameters(32776,32776);break;case 4:this._alphaState.setAlphaEquationParameters(32775,32775);break;case 5:this._alphaState.setAlphaEquationParameters(32775,32774)}this._alphaEquation=e}},se.prototype.getAlphaEquation=function(){return this._alphaEquation},se.prototype.updateDynamicIndexBuffer=function(e,t,n){var a;void 0===n&&(n=0),this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER]=null,this.bindIndexBuffer(e),a=t instanceof Uint16Array||t instanceof Uint32Array?t:e.is32Bits?new Uint32Array(t):new Uint16Array(t),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,a,this._gl.DYNAMIC_DRAW),this._resetIndexBufferBinding()},se.prototype.updateDynamicVertexBuffer=function(e,t,n,a){this.bindArrayBuffer(e),void 0===n&&(n=0);var i=t.byteLength||t.length;void 0===a||a>=i&&0===n?t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,n,new Float32Array(t)):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,n,t):t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,new Float32Array(t).subarray(n,n+a)):(t=t instanceof ArrayBuffer?new Uint8Array(t,n,a):new Uint8Array(t.buffer,t.byteOffset+n,a),this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t)),this._resetVertexBufferBinding()},se.prototype.createDynamicTexture=function(e,t,n,a){var i=new Z(this,G.Dynamic);return i.baseWidth=e,i.baseHeight=t,n&&(e=this.needPOTTextures?se.GetExponentOfTwo(e,this._caps.maxTextureSize):e,t=this.needPOTTextures?se.GetExponentOfTwo(t,this._caps.maxTextureSize):t),i.width=e,i.height=t,i.isReady=!1,i.generateMipMaps=n,i.samplingMode=a,this.updateTextureSamplingMode(a,i),this._internalTexturesCache.push(i),i},se.prototype.updateDynamicTexture=function(e,t,n,a,i,r,o){if(void 0===a&&(a=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),e){var s=this._gl,c=s.TEXTURE_2D,d=this._bindTextureDirectly(c,e,!0,r);this._unpackFlipY(void 0===n?e.invertY:n),a&&s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);var l=this._getWebGLTextureType(e.type),u=this._getInternalFormat(i||e.format),f=this._getRGBABufferInternalSizedFormat(e.type,u);s.texImage2D(c,0,f,u,l,t),e.generateMipMaps&&s.generateMipmap(c),d||this._bindTextureDirectly(c,null),a&&s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.isReady=!0}},se.prototype._readTexturePixelsSync=function(e,t,n,a,i,r,o,s,c,d){var l,u;void 0===a&&(a=-1),void 0===i&&(i=0),void 0===r&&(r=null),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===c&&(c=0),void 0===d&&(d=0);var f=this._gl;if(!f)throw new Error("Engine does not have gl rendering context.");if(!this._dummyFramebuffer){var p=f.createFramebuffer();if(!p)throw new Error("Unable to create dummy framebuffer");this._dummyFramebuffer=p}f.bindFramebuffer(f.FRAMEBUFFER,this._dummyFramebuffer),a>-1?f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+a,null===(l=e._hardwareTexture)||void 0===l?void 0:l.underlyingResource,i):f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,null===(u=e._hardwareTexture)||void 0===u?void 0:u.underlyingResource,i);var m=void 0!==e.type?this._getWebGLTextureType(e.type):f.UNSIGNED_BYTE;return s?r||(r=function(e,t,n,a){switch(void 0===n&&(n=!1),e){case 3:return ArrayBuffer,new Int8Array(t);case 0:return ArrayBuffer,new Uint8Array(t);case 4:return t instanceof ArrayBuffer?new Int16Array(t):new Int16Array(n?t/2:t);case 5:case 8:case 9:case 10:case 2:return t instanceof ArrayBuffer?new Uint16Array(t):new Uint16Array(n?t/2:t);case 6:return t instanceof ArrayBuffer?new Int32Array(t):new Int32Array(n?t/4:t);case 7:case 11:case 12:case 13:case 14:case 15:return t instanceof ArrayBuffer?new Uint32Array(t):new Uint32Array(n?t/4:t);case 1:return t instanceof ArrayBuffer?new Float32Array(t):new Float32Array(n?t/4:t)}return ArrayBuffer,new Uint8Array(t)}(e.type,4*t*n)):m===f.UNSIGNED_BYTE?(r||(r=new Uint8Array(4*t*n)),m=f.UNSIGNED_BYTE):(r||(r=new Float32Array(4*t*n)),m=f.FLOAT),o&&this.flushFramebuffer(),f.readPixels(c,d,t,n,f.RGBA,m,r),f.bindFramebuffer(f.FRAMEBUFFER,this._currentFramebuffer),r},se.prototype._readTexturePixels=function(e,t,n,a,i,r,o,s,c,d){return void 0===a&&(a=-1),void 0===i&&(i=0),void 0===r&&(r=null),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===c&&(c=0),void 0===d&&(d=0),Promise.resolve(this._readTexturePixelsSync(e,t,n,a,i,r,o,s,c,d))};var ze=function(e){function t(t,n,a,i,r){var o=e.call(this,t,n,a,i)||this;return o._framebuffer=null,o._depthStencilBuffer=null,o._MSAAFramebuffer=null,o._colorTextureArray=null,o._depthStencilTextureArray=null,o._context=r,o}return(0,r.__extends)(t,e),t.prototype._cloneRenderTargetWrapper=function(){var t=null;return this._colorTextureArray&&this._depthStencilTextureArray?(t=this._engine.createMultiviewRenderTargetTexture(this.width,this.height)).texture.isReady=!0:t=e.prototype._cloneRenderTargetWrapper.call(this),t},t.prototype._swapRenderTargetWrapper=function(t){e.prototype._swapRenderTargetWrapper.call(this,t),t._framebuffer=this._framebuffer,t._depthStencilBuffer=this._depthStencilBuffer,t._MSAAFramebuffer=this._MSAAFramebuffer,t._colorTextureArray=this._colorTextureArray,t._depthStencilTextureArray=this._depthStencilTextureArray,this._framebuffer=this._depthStencilBuffer=this._MSAAFramebuffer=this._colorTextureArray=this._depthStencilTextureArray=null},t.prototype._shareDepth=function(t){e.prototype._shareDepth.call(this,t);var n=this._context,a=this._depthStencilBuffer,i=t._framebuffer;t._depthStencilBuffer&&n.deleteRenderbuffer(t._depthStencilBuffer),t._depthStencilBuffer=this._depthStencilBuffer,this._engine._bindUnboundFramebuffer(i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,a),this._engine._bindUnboundFramebuffer(null)},t.prototype._bindTextureRenderTarget=function(e,t,n,a){if(void 0===t&&(t=0),void 0===n&&(n=-1),void 0===a&&(a=0),e._hardwareTexture){var i=this._context,r=this._framebuffer,o=this._engine._currentFramebuffer;this._engine._bindUnboundFramebuffer(r);var s=i[this._engine.webGLVersion>1?"COLOR_ATTACHMENT"+t:"COLOR_ATTACHMENT"+t+"_WEBGL"],c=-1!==n?i.TEXTURE_CUBE_MAP_POSITIVE_X+n:i.TEXTURE_2D;i.framebufferTexture2D(i.FRAMEBUFFER,s,c,e._hardwareTexture.underlyingResource,a),this._engine._bindUnboundFramebuffer(o)}},t.prototype.setTexture=function(t,n,a){void 0===n&&(n=0),void 0===a&&(a=!0),e.prototype.setTexture.call(this,t,n,a),this._bindTextureRenderTarget(t,n)},t.prototype.dispose=function(t){void 0===t&&(t=!1);var n=this._context;t||(this._colorTextureArray&&(this._context.deleteTexture(this._colorTextureArray),this._colorTextureArray=null),this._depthStencilTextureArray&&(this._context.deleteTexture(this._depthStencilTextureArray),this._depthStencilTextureArray=null)),this._framebuffer&&(n.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._depthStencilBuffer&&(n.deleteRenderbuffer(this._depthStencilBuffer),this._depthStencilBuffer=null),this._MSAAFramebuffer&&(n.deleteFramebuffer(this._MSAAFramebuffer),this._MSAAFramebuffer=null),e.prototype.dispose.call(this,t)},t}(function(){function e(e,t,n,a){this._textures=null,this._attachments=null,this._generateStencilBuffer=!1,this._generateDepthBuffer=!1,this._depthStencilTextureWithStencil=!1,this._isMulti=e,this._isCube=t,this._size=n,this._engine=a,this._depthStencilTexture=null}return Object.defineProperty(e.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthStencilTextureWithStencil",{get:function(){return this._depthStencilTextureWithStencil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCube",{get:function(){return this._isCube},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMulti",{get:function(){return this._isMulti},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"is2DArray",{get:function(){return this.layers>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._size.width||this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._size.height||this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layers",{get:function(){return this._size.layers||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){var e,t;return null!==(t=null===(e=this._textures)||void 0===e?void 0:e[0])&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"samples",{get:function(){var e,t;return null!==(t=null===(e=this.texture)||void 0===e?void 0:e.samples)&&void 0!==t?t:1},enumerable:!1,configurable:!0}),e.prototype.setSamples=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=!1),this.samples!==e||n?this._isMulti?this._engine.updateMultipleRenderTargetTextureSampleCount(this,e,t):this._engine.updateRenderTargetTextureSampleCount(this,e):e},e.prototype.setTextures=function(e){Array.isArray(e)?this._textures=e:this._textures=e?[e]:null},e.prototype.setTexture=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0),this._textures||(this._textures=[]),this._textures[t]&&n&&this._textures[t].dispose(),this._textures[t]=e},e.prototype.createDepthStencilTexture=function(e,t,n,a,i){var r;return void 0===e&&(e=0),void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===a&&(a=1),void 0===i&&(i=14),null===(r=this._depthStencilTexture)||void 0===r||r.dispose(),this._depthStencilTextureWithStencil=n,this._depthStencilTexture=this._engine.createDepthStencilTexture(this._size,{bilinearFiltering:t,comparisonFunction:e,generateStencil:n,isCube:this._isCube,samples:a,depthTextureFormat:i},this),this._depthStencilTexture},e.prototype._shareDepth=function(e){this._depthStencilTexture&&(e._depthStencilTexture&&e._depthStencilTexture.dispose(),e._depthStencilTexture=this._depthStencilTexture,this._depthStencilTexture.incrementReferences())},e.prototype._swapAndDie=function(e){this.texture&&this.texture._swapAndDie(e),this._textures=null,this.dispose(!0)},e.prototype._cloneRenderTargetWrapper=function(){var e,t,n,a,i,r,o=null;if(this._isMulti){var s=this.textures;if(s&&s.length>0){var c=!1,d=s.length,l=s[s.length-1]._source;l!==G.Depth&&l!==G.DepthStencil||(c=!0,d--);for(var u=[],f=[],p=0;p<d;++p){var m=s[p];u.push(m.samplingMode),f.push(m.type)}var _={samplingModes:u,generateMipMaps:s[0].generateMipMaps,generateDepthBuffer:this._generateDepthBuffer,generateStencilBuffer:this._generateStencilBuffer,generateDepthTexture:c,types:f,textureCount:d},h={width:this.width,height:this.height};o=this._engine.createMultipleRenderTarget(h,_)}}else{var b={};b.generateDepthBuffer=this._generateDepthBuffer,b.generateMipMaps=null!==(t=null===(e=this.texture)||void 0===e?void 0:e.generateMipMaps)&&void 0!==t&&t,b.generateStencilBuffer=this._generateStencilBuffer,b.samplingMode=null===(n=this.texture)||void 0===n?void 0:n.samplingMode,b.type=null===(a=this.texture)||void 0===a?void 0:a.type,b.format=null===(i=this.texture)||void 0===i?void 0:i.format,this.isCube?o=this._engine.createRenderTargetCubeTexture(this.width,b):(h={width:this.width,height:this.height,layers:this.is2DArray?null===(r=this.texture)||void 0===r?void 0:r.depth:void 0},o=this._engine.createRenderTargetTexture(h,b)),o.texture.isReady=!0}return o},e.prototype._swapRenderTargetWrapper=function(e){if(this._textures&&e._textures)for(var t=0;t<this._textures.length;++t)this._textures[t]._swapAndDie(e._textures[t],!1),e._textures[t].isReady=!0;this._depthStencilTexture&&e._depthStencilTexture&&(this._depthStencilTexture._swapAndDie(e._depthStencilTexture),e._depthStencilTexture.isReady=!0),this._textures=null,this._depthStencilTexture=null},e.prototype._rebuild=function(){var e=this._cloneRenderTargetWrapper();if(e){if(this._depthStencilTexture){var t=this._depthStencilTexture.samplingMode,n=2===t||3===t||11===t;e.createDepthStencilTexture(this._depthStencilTexture._comparisonFunction,n,this._depthStencilTextureWithStencil,this._depthStencilTexture.samples)}this.samples>1&&e.setSamples(this.samples),e._swapRenderTargetWrapper(this),e.dispose()}},e.prototype.releaseTextures=function(){var e,t;if(this._textures)for(var n=0;null!==(t=n<(null===(e=this._textures)||void 0===e?void 0:e.length))&&void 0!==t&&t;++n)this._textures[n].dispose();this._textures=null},e.prototype.dispose=function(e){var t;void 0===e&&(e=!1),e||(null===(t=this._depthStencilTexture)||void 0===t||t.dispose(),this._depthStencilTexture=null,this.releaseTextures()),this._engine._releaseRenderTargetWrapper(this)},e}());se.prototype._createHardwareRenderTargetWrapper=function(e,t,n){var a=new ze(e,t,n,this,this._gl);return this._renderTargetWrapperCache.push(a),a},se.prototype.createRenderTargetTexture=function(e,t){var n=this._createHardwareRenderTargetWrapper(!1,!1,e),a={};void 0!==t&&"object"==typeof t?(a.generateDepthBuffer=!!t.generateDepthBuffer,a.generateStencilBuffer=!!t.generateStencilBuffer):(a.generateDepthBuffer=!0,a.generateStencilBuffer=!1);var i=this._createInternalTexture(e,t,!0,G.RenderTarget),r=e.width||e,o=e.height||e,s=this._currentFramebuffer,c=this._gl,d=c.createFramebuffer();return this._bindUnboundFramebuffer(d),n._depthStencilBuffer=this._setupFramebufferDepthAttachments(!!a.generateStencilBuffer,a.generateDepthBuffer,r,o),i.is2DArray||c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i._hardwareTexture.underlyingResource,0),this._bindUnboundFramebuffer(s),n._framebuffer=d,n._generateDepthBuffer=a.generateDepthBuffer,n._generateStencilBuffer=!!a.generateStencilBuffer,n.setTextures(i),n},se.prototype.createDepthStencilTexture=function(e,t,n){if(t.isCube){var a=e.width||e;return this._createDepthStencilCubeTexture(a,t,n)}return this._createDepthStencilTexture(e,t,n)},se.prototype._createDepthStencilTexture=function(e,t,n){var a=this._gl,i=e.layers||0,o=0!==i?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D,s=new Z(this,G.DepthStencil);if(!this._caps.depthTextureExtension)return C.Error("Depth texture is not supported by your browser or hardware."),s;var c=(0,r.__assign)({bilinearFiltering:!1,comparisonFunction:0,generateStencil:!1},t);this._bindTextureDirectly(o,s,!0),this._setupDepthStencilTexture(s,e,c.generateStencil,0!==c.comparisonFunction&&c.bilinearFiltering,c.comparisonFunction),s.format=c.generateStencil?13:16,n._depthStencilTexture=s,n._depthStencilTextureWithStencil=c.generateStencil;var d=c.generateStencil?a.UNSIGNED_INT_24_8:a.UNSIGNED_INT,l=c.generateStencil?a.DEPTH_STENCIL:a.DEPTH_COMPONENT,u=l;return this.webGLVersion>1&&(u=c.generateStencil?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT24),s.is2DArray?a.texImage3D(o,0,u,s.width,s.height,i,0,l,d,null):a.texImage2D(o,0,u,s.width,s.height,0,l,d,null),this._bindTextureDirectly(o,null),this._internalTexturesCache.push(s),s},se.prototype.updateRenderTargetTextureSampleCount=function(e,t){if(this.webGLVersion<2||!e||!e.texture)return 1;if(e.samples===t)return t;var n=this._gl;t=Math.min(t,this.getCaps().maxMSAASamples),e._depthStencilBuffer&&(n.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(n.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null);var a=e.texture._hardwareTexture;if(a._MSAARenderBuffer&&(n.deleteRenderbuffer(a._MSAARenderBuffer),a._MSAARenderBuffer=null),t>1&&n.renderbufferStorageMultisample){var i=n.createFramebuffer();if(!i)throw new Error("Unable to create multi sampled framebuffer");e._MSAAFramebuffer=i,this._bindUnboundFramebuffer(e._MSAAFramebuffer);var r=this._createRenderBuffer(e.texture.width,e.texture.height,t,-1,this._getRGBAMultiSampleBufferFormat(e.texture.type),n.COLOR_ATTACHMENT0,!1);if(!r)throw new Error("Unable to create multi sampled framebuffer");a._MSAARenderBuffer=r}else this._bindUnboundFramebuffer(e._framebuffer);return e.texture.samples=t,e._depthStencilBuffer=this._setupFramebufferDepthAttachments(e._generateStencilBuffer,e._generateDepthBuffer,e.texture.width,e.texture.height,t),this._bindUnboundFramebuffer(null),t}}
,9332:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var a=n(5959),i=n.n(a)().createElement("span",{style:{display:"flex",borderRadius:"999px",background:"linear-gradient(301deg, #7C9FF9 17.72%, #D884FF 82.65%)",justifyContent:"center",alignItems:"center",width:"19px",height:"14px",color:"#000000",padding:"1px 4px 3px 4px",fontSize:"12px",lineHeight:"10px",fontWeight:"400"}},"AI")}
,5161:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var a=n(5959),i=n.n(a),r=n(8886);(0,n(8424).loadStyles)([{rawString:".bodyContainer_a6c31b3d{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:24px 0}.bodyContainer_a6c31b3d .rowContainer_a6c31b3d{width:100%}.bodyContainer_a6c31b3d .row_a6c31b3d{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.bodyContainer_a6c31b3d .lastRowWithFewerItems_a6c31b3d{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}"}]);var o=(0,a.memo)(function(e){var t=e.tiles,n=e.size,o=e.getHasActiveTileInRow,s=e.ariaLabel,c=e.title,d=e.actionsComponent,l=e.header,u=e.footer,f=e.children,p=e.numOfTilesPerRow,m=e.setNumOfTilesPerRow,_=e.styles,h=e.tileRefs;(0,a.useLayoutEffect)(function(){for(var e,t,n,a=0;a<h.length;a++){var i=null===(t=null===(e=h[a])||void 0===e?void 0:e.current)||void 0===t?void 0:t.getBoundingClientRect();if(n&&i&&n.top<i.top)return void m(a);n=i}m(h.length)},[m,h]);var b=t.map(function(e,t){return i().createElement("div",{ref:h[t],key:e.name,style:null==_?void 0:_.tile},e.element)}).reduce(function(e,t){return p&&e[e.length-1].length&&e[e.length-1].length===p&&e.push([]),e[e.length-1].push(t),e},[[]]).map(function(e,t,n){var a=n.length-1===t&&e.length!==n[0].length;return i().createElement("div",{key:t,className:"rowContainer_a6c31b3d"},i().createElement("div",{className:"".concat("row_a6c31b3d"," ").concat(a?"lastRowWithFewerItems_a6c31b3d":""),style:null==_?void 0:_.row},e),o(e)&&d&&d)});return i().createElement(r.e,{size:n,styles:_,header:l,footer:u},f,i().createElement("section",{"aria-label":s,role:"group"},i().createElement("div",{className:"bodyContainer_a6c31b3d",style:null==_?void 0:_.bodyContainer,role:"listbox",title:c},b)))})}
,8996:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var a=n(5959),i=n.n(a),r=function(){return r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},o=i().lazy(function(){return n.e(653).then(n.bind(n,7653))}),s=function(e){return i().createElement(a.Suspense,{fallback:null},i().createElement(o,r({},e)))}}
,6777:(e,t,n)=>{"use strict";n.d(t,{X:()=>c});var a=n(5959),i=n.n(a);(0,n(8424).loadStyles)([{rawString:".headerContainer_dcc7c160{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:42px;margin:25px 0 6px 0}.headerContainer_dcc7c160 .name_dcc7c160{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-margin-end:auto;margin-inline-end:auto;width:100%}.headerContainer_dcc7c160 .name_dcc7c160 .childrenWrapper_dcc7c160{margin-left:auto}"}]);var r=n(2744),o=n(2141),s=n(8214),c=function(e){var t=e.iconName,n=e.label,c=e.styles,d=e.children,l=(0,r.D)().palette.neutralPrimary,u=(0,a.useMemo)(function(){var e={root:{fill:l,fontSize:"16px",height:"16px",width:"16px",lineHeight:"16px",marginRight:"8px"}};return(0,o.concatStyleSets)(e,null==c?void 0:c.icon)},[l,null==c?void 0:c.icon]);return i().createElement("div",{style:null==c?void 0:c.container,"aria-hidden":!0},i().createElement("div",{className:"headerContainer_dcc7c160"},i().createElement("span",{className:"name_dcc7c160"},!!t&&i().createElement(s.Icon,{iconName:t,styles:u}),!!n&&n,!!d&&i().createElement("div",{className:"childrenWrapper_dcc7c160"},d))))};c.displayName="SectionHeader"}
,8575:(e,t,n)=>{"use strict";n.d(t,{RS:()=>r,pw:()=>o});var a=n(9467);function i(e){return[{localizedName:e.markup_colorDarkYellow,hexColor:a.Mk},{localizedName:e.markup_colorLightOrange,hexColor:a.FY},{localizedName:e.markup_colorOrange,hexColor:a.U8},{localizedName:e.markup_colorRed,hexColor:a.Tw},{localizedName:e.markup_colorDarkPurple,hexColor:a.eJ},{localizedName:e.markup_colorPurple,hexColor:a.aO},{localizedName:e.markup_colorMagenta,hexColor:a.JA},{localizedName:e.markup_colorDarkRed,hexColor:a.sl},{localizedName:e.markup_colorLightBlue,hexColor:a.Ef},{localizedName:e.markup_colorBlue,hexColor:a.Nf},{localizedName:e.markup_colorDarkBlue,hexColor:a.VD},{localizedName:e.markup_colorLightGreen,hexColor:a.Uy},{localizedName:e.markup_colorGreen,hexColor:a.Mj},{localizedName:e.markup_colorLightGray,hexColor:a.zs},{localizedName:e.markup_colorGray,hexColor:a.yM},{localizedName:e.markup_colorBlack,hexColor:a.e9}]}function r(e){return i(e).map(function(e,t){var n=++t;return{index:n,id:n.toString(),label:e.localizedName,color:e.hexColor}})}function o(e,t){var n=i(e).find(function(e){return e.hexColor.toLowerCase()===t.toLowerCase()});if(!n)throw new Error("No matching color option for hex value ".concat(t));return n.localizedName}}
,8372:(e,t,n)=>{"use strict";n.d(t,{Fc:()=>r,K4:()=>l,Vi:()=>o,tl:()=>c,z5:()=>s,zn:()=>d});var a=n(2141),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e,t){var n=null!=t?t:{},r=n.colorCellSize,o=n.colorCellSVGRadius,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(n,["colorCellSize","colorCellSVGRadius"]),c={colorCell:{padding:"0px",borderRadius:"50%",height:"auto",width:"auto"},colorCellSVG:{border:"1px solid transparent","&:hover":{backgroundColor:e.palette.neutralQuaternary,borderRadius:"50%"},"&:active":{backgroundColor:e.palette.neutralQuaternaryAlt,borderRadius:"50%"}},colorCellSVGCircle:{strokeOpacity:"0.3",stroke:e.palette.black},colorCellSelected:{backgroundColor:e.palette.neutralQuaternaryAlt,border:"1px solid "+e.palette.neutralTertiary,borderRadius:"50%"}};return i(i({},(0,a.concatStyleSets)(c,s)),{colorCellSize:null!=r?r:30,colorCellSVGRadius:null!=o?o:12})}function o(e){return{padding:"0 16px",minHeight:"170px",height:e?"auto":"217px",display:"inline-flex",flexDirection:"column",justifyContent:"space-evenly",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.14), 0px 0px 2px rgba(0, 0, 0, 0.12)"}}var s=function(e){return{display:e?"none":"block"}},c=4,d=8,l={root:{margin:"0px",padding:"0px"},tableCell:{padding:"0px",height:"40px",width:"40px",textAlign:"center",button:{margin:"0px"}}}}
,358:(e,t,n)=>{"use strict";n.d(t,{s:()=>b});var a=n(5959),i=n.n(a),r=n(7864),o=n(5647),s=n(920),c=(0,a.memo)(function(e){var t=e.styles,n="EraserIcon",a=(0,r.B)(n),c=(0,r.B)(n),d=(0,r.B)(n),l=(0,r.B)(n),u=(0,r.B)(n),f=(0,r.B)(n),p=(0,r.B)(n),m=(0,r.B)(n),_=(0,r.B)(n),h=(0,r.B)(n),b=(0,r.B)(n);return i().createElement("svg",{className:s.g4,width:o.St.width+"px",height:o.St.height+"px",viewBox:o.UP,fill:o.Fl,style:t},i().createElement("g",{clipPath:"url(#".concat(b,")")},i().createElement("g",{opacity:"0.3",filter:"url(#".concat(a,")")},i().createElement("path",{d:"M69.2524 93V39H26.0524V93H69.2524Z",fill:"black"})),i().createElement("path",{d:"M71.6523 117V29.4C71.6523 26.749 69.5033 24.6 66.8523 24.6H28.4523C25.8014 24.6 23.6523 26.749 23.6523 29.4V117H71.6523Z",fill:"url(#".concat(p,")")}),i().createElement("path",{d:"M71.6523 117V29.4C71.6523 26.749 69.5033 24.6 66.8523 24.6H28.4523C25.8014 24.6 23.6523 26.749 23.6523 29.4V117H71.6523Z",fill:"url(#".concat(m,")")}),i().createElement("g",{opacity:"0.3",filter:"url(#".concat(c,")")},i().createElement("path",{d:"M71.6523 117V29.4C71.6523 26.749 69.5033 24.6 66.8523 24.6H28.4523C25.8014 24.6 23.6523 26.749 23.6523 29.4V117H71.6523Z",fill:"black",fillOpacity:"0.01"})),i().createElement("g",{filter:"url(#".concat(d,")")},i().createElement("path",{d:"M71.6523 117V29.4C71.6523 26.749 69.5033 24.6 66.8523 24.6H28.4523C25.8014 24.6 23.6523 26.749 23.6523 29.4V117H71.6523Z",fill:"black",fillOpacity:"0.01"})),i().createElement("g",{filter:"url(#".concat(l,")")},i().createElement("path",{d:"M71.6523 117V29.4C71.6523 26.749 69.5033 24.6 66.8523 24.6H28.4523C25.8014 24.6 23.6523 26.749 23.6523 29.4V117H71.6523Z",fill:"black",fillOpacity:"0.01"})),i().createElement("path",{opacity:"0.08",d:"M23.6523 29.4C23.6523 26.749 25.8014 24.6 28.4523 24.6H66.8523C69.5033 24.6 71.6523 26.749 71.6523 29.4V53.4H23.6523V29.4Z",fill:"black"}),i().createElement("path",{d:"M28.4523 12.6C28.4523 7.29807 32.7504 3 38.0523 3H57.2523C62.5543 3 66.8523 7.29807 66.8523 12.6V24.6H28.4523V12.6Z",fill:"url(#".concat(_,")")}),i().createElement("path",{d:"M28.7523 12.6C28.7523 7.46376 32.9161 3.3 38.0523 3.3H57.2523C62.3886 3.3 66.5523 7.46375 66.5523 12.6V24.3H28.7523V12.6Z",stroke:"url(#".concat(h,")"),strokeOpacity:"0.16",strokeWidth:"0.6"}),i().createElement("g",{opacity:"0.6",filter:"url(#".concat(u,")")},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M57.2524 10.8H42.8524V7.19998H57.2524C60.8974 7.19998 63.8523 10.1549 63.8523 13.8V24.6H60.2523V13.8C60.2523 12.1431 58.9092 10.8 57.2524 10.8Z",fill:"white"})),i().createElement("path",{opacity:"0.12",fillRule:"evenodd",clipRule:"evenodd",d:"M71.6523 54.6H23.6523V53.4H71.6523V54.6Z",fill:"white"}),i().createElement("g",{opacity:"0.1",filter:"url(#".concat(f,")")},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55.818 111V36.6H58.218V111H55.818Z",fill:"white"}))),i().createElement("defs",null,i().createElement("filter",{id:a,x:"18.8524",y:"31.8",width:"57.6",height:"68.4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6",result:"effect1_foregroundBlur"})),i().createElement("filter",{id:c,x:"23.6523",y:"24.6",width:"56.4",height:"92.4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i().createElement("feOffset",{dx:"8.4"}),i().createElement("feGaussianBlur",{stdDeviation:"4.8"}),i().createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),i().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.2 0 0 0 0 0.2 0 0 0 0 0.2 0 0 0 1 0"}),i().createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow"})),i().createElement("filter",{id:d,x:"23.6523",y:"24.6",width:"50.4",height:"92.4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i().createElement("feOffset",{dx:"2.4"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6"}),i().createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),i().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.225634 0"}),i().createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow"})),i().createElement("filter",{id:l,x:"23.6523",y:"24.6",width:"49.2",height:"92.4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i().createElement("feOffset",{dx:"1.2"}),i().createElement("feGaussianBlur",{stdDeviation:"4.2"}),i().createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),i().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),i().createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow"})),i().createElement("filter",{id:u,x:"30.8524",y:"-4.80002",width:"45",height:"41.4",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"6",result:"effect1_foregroundBlur"})),i().createElement("filter",{id:f,x:"46.218",y:"27",width:"21.6",height:"93.6",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"4.8",result:"effect1_foregroundBlur"})),i().createElement("linearGradient",{id:p,x1:"27.2523",y1:"39.6",x2:"71.191",y2:"44.1024",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"0.792969",stopColor:"#605A5D"})),i().createElement("linearGradient",{id:m,x1:"28.4523",y1:"45.6",x2:"47.4937",y2:"47.3382",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"1",stopColor:"#605A5D",stopOpacity:"0"})),i().createElement("linearGradient",{id:_,x1:"47.6523",y1:"3",x2:"47.6523",y2:"24.6",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#EA9FAA"}),i().createElement("stop",{offset:"1",stopColor:"#FA7E90"})),i().createElement("linearGradient",{id:h,x1:"47.6523",y1:"3",x2:"47.6523",y2:"24.6",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"white"}),i().createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),i().createElement("clipPath",{id:b},i().createElement("rect",{width:"96",height:"126",fill:"white",transform:"translate(-0.347656 -9)"}))))}),d=n(784),l=(0,a.memo)(function(e){var t=e.styles,n=e.inkBrushColor,a="InkPenIcon",c=(0,r.B)(a),d=(0,r.B)(a),l=(0,r.B)(a),u=(0,r.B)(a),f=(0,r.B)(a),p=(0,r.B)(a),m=(0,r.B)(a);return i().createElement("svg",{className:s.g4,width:o.St.width+"px",height:o.St.height+"px",viewBox:o.UP,fill:o.Fl,style:t},i().createElement("g",{clipPath:"url(#".concat(c,")")},i().createElement("g",{opacity:"0.4",filter:"url(#".concat(d,")")},i().createElement("path",{d:"M69.6 116V60.8H26.4V116H69.6Z",fill:"black"})),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.0003 3.1998C43.5003 3.1998 40.8003 17.5998 40.8003 17.5998H55.2003C55.2003 17.5998 52.5003 3.1998 48.0003 3.1998ZM25.9449 60.7998H70.0551C71.346 68.851 72 77.0143 72 85.2142V116H24V85.2142C24 77.0143 24.6539 68.851 25.9449 60.7998Z",fill:n}),i().createElement("path",{d:"M41.5543 17.6H54.4456C55.6388 17.6 56.725 18.2883 57.2345 19.3672C63.456 32.5422 67.7611 46.4942 70.055 60.8H25.9449C28.2388 46.4942 32.5439 32.5422 38.7654 19.3672C39.2749 18.2882 40.3611 17.6 41.5543 17.6Z",fill:"url(#".concat(u,")")}),i().createElement("path",{d:"M41.5543 17.6H54.4456C55.6388 17.6 56.725 18.2883 57.2345 19.3672C63.456 32.5422 67.7611 46.4942 70.055 60.8H25.9449C28.2388 46.4942 32.5439 32.5422 38.7654 19.3672C39.2749 18.2882 40.3611 17.6 41.5543 17.6Z",fill:"url(#".concat(f,")")}),i().createElement("path",{opacity:"0.2",d:"M70.0551 60.8L25.9449 60.8C24.6539 68.8512 24 77.0145 24 85.2144V116H72V85.2144C72 77.0145 71.346 68.8512 70.0551 60.8Z",fill:"url(#".concat(p,")")}),i().createElement("path",{opacity:"0.12",d:"M25.9448 60.8H70.0549C70.119 61.1997 70.1815 61.5997 70.2425 62H25.7572C25.8182 61.5997 25.8807 61.1997 25.9448 60.8Z",fill:"white"}),i().createElement("path",{opacity:"0.32",d:"M40.8 17.6C40.8 17.6 43.5 3.2 48 3.2C52.5 3.2 55.2 17.6 55.2 17.6H40.8Z",fill:"url(#".concat(m,")")}),i().createElement("g",{opacity:"0.4",filter:"url(#".concat(l,")")},i().createElement("path",{d:"M49.1994 21.2C49.1994 21.2 61.8773 51.2 61.8773 72.5941C61.8773 78.807 61.8773 126.104 61.8773 126.104",stroke:"white",strokeWidth:"1.2"}))),i().createElement("defs",null,i().createElement("filter",{id:d,x:"19.2",y:"53.6",width:"57.6",height:"69.6",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6",result:"effect1_foregroundBlur"})),i().createElement("filter",{id:l,x:"41.4468",y:"13.7669",width:"28.2305",height:"119.537",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6",result:"effect1_foregroundBlur"})),i().createElement("linearGradient",{id:u,x1:"27.6002",y1:"35.6",x2:"70.8002",y2:"48.8",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"0.792969",stopColor:"#605A5D"})),i().createElement("linearGradient",{id:f,x1:"28.8002",y1:"42.8",x2:"46.8002",y2:"47.6",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"1",stopColor:"#605A5D",stopOpacity:"0"})),i().createElement("linearGradient",{id:p,x1:"24",y1:"70.4",x2:"58.8",y2:"70.4",gradientUnits:"userSpaceOnUse"},i().createElement("stop",null),i().createElement("stop",{offset:"1",stopOpacity:"0"})),i().createElement("linearGradient",{id:m,x1:"56",y1:"3.2",x2:"48",y2:"17.6",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"white"}),i().createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),i().createElement("clipPath",{id:c},i().createElement("rect",{width:"96",height:"120",fill:"white"}))))}),u=(0,a.memo)(function(e){var t=e.styles,n=e.inkBrushColor,a="HighlighterIcon",c=(0,r.B)(a),d=(0,r.B)(a),l=(0,r.B)(a),u=(0,r.B)(a),f=(0,r.B)(a),p=(0,r.B)(a),m=(0,r.B)(a),_=(0,r.B)(a),h=(0,r.B)(a),b=(0,r.B)(a);return i().createElement("svg",{className:s.g4,width:o.St.width+"px",height:o.St.height+"px",viewBox:o.UP,fill:o.Fl,style:t},i().createElement("g",{clipPath:"url(#".concat(c,")")},i().createElement("g",{opacity:"0.4",filter:"url(#".concat(d,")")},i().createElement("path",{d:"M76.8 117V59.4H19.2V117H76.8Z",fill:"black"})),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.8 42.6L30.7255 25.2699C30.9956 22.8391 33.0504 21 35.4962 21H60.5038C62.9496 21 65.0043 22.8391 65.2744 25.2699L67.2 42.6L73.7956 47.8765C77.2115 50.6092 79.2 54.7465 79.2 59.121V95.4H16.8V59.121C16.8 54.7465 18.7885 50.6092 22.2044 47.8765L28.8 42.6Z",fill:"url(#".concat(f,")")}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.8 42.6L30.7255 25.2699C30.9956 22.8391 33.0504 21 35.4962 21H60.5038C62.9496 21 65.0043 22.8391 65.2744 25.2699L67.2 42.6L73.7956 47.8765C77.2115 50.6092 79.2 54.7465 79.2 59.121V95.4H16.8V59.121C16.8 54.7465 18.7885 50.6092 22.2044 47.8765L28.8 42.6Z",fill:"url(#".concat(p,")")}),i().createElement("g",{opacity:"0.2",filter:"url(#".concat(l,")")},i().createElement("path",{d:"M55.2002 27L60.2197 57.3868L73.2 63V117",stroke:"white",strokeWidth:"1.2"})),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36 21.0002V12.6002C36 11.062 36.9773 9.6937 38.4324 9.19482L56.8216 2.88996C58.3794 2.35587 60 3.51345 60 5.16022V21.0002H36ZM79.2 61.8002H16.8V117H79.2V61.8002Z",fill:n}),i().createElement("rect",{opacity:"0.2",x:"16.8",y:"61.8",width:"26.4",height:"55.2",fill:"url(#".concat(m,")")}),i().createElement("rect",{opacity:"0.06",width:"26.4",height:"55.2",transform:"matrix(-1 0 0 1 79.2 61.8)",fill:"url(#".concat(_,")")}),i().createElement("path",{opacity:"0.3",d:"M36 12.6V21H60V5.15999C60 3.51321 58.3794 2.35563 56.8216 2.88972L38.4324 9.19458C36.9773 9.69347 36 11.0618 36 12.6Z",fill:"url(#".concat(h,")")}),i().createElement("path",{d:"M59.7 20.7H36.3V12.6C36.3 11.1899 37.1959 9.93568 38.5297 9.47837L56.9189 3.1735C58.282 2.70617 59.7 3.71906 59.7 5.15999V20.7Z",stroke:"url(#".concat(b,")"),strokeOpacity:"0.3",strokeWidth:"0.6"}),i().createElement("g",{opacity:"0.4",filter:"url(#".concat(u,")")},i().createElement("path",{d:"M73.2 117V59.4",stroke:"white",strokeWidth:"1.2"})),i().createElement("line",{opacity:"0.12",x1:"16.8",y1:"62.4",x2:"79.2",y2:"62.4",stroke:"white",strokeWidth:"1.2"})),i().createElement("defs",null,i().createElement("filter",{id:d,x:"12",y:"52.2",width:"72",height:"72",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6",result:"effect1_foregroundBlur"})),i().createElement("filter",{id:l,x:"47.4082",y:"19.7022",width:"33.5918",height:"104.498",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"3.6",result:"effect1_foregroundBlur"})),i().createElement("filter",{id:u,x:"63",y:"49.8",width:"20.4",height:"76.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i().createElement("feGaussianBlur",{stdDeviation:"4.8",result:"effect1_foregroundBlur"})),i().createElement("linearGradient",{id:f,x1:"17.4",y1:"36.5",x2:"72.6093",y2:"65.8856",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"0.792969",stopColor:"#605A5D"})),i().createElement("linearGradient",{id:p,x1:"19.2",y1:"42.7",x2:"44.1733",y2:"55.8611",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#333333"}),i().createElement("stop",{offset:"1",stopColor:"#605A5D",stopOpacity:"0"})),i().createElement("linearGradient",{id:m,x1:"16.8",y1:"78.7846",x2:"35.94",y2:"78.7846",gradientUnits:"userSpaceOnUse"},i().createElement("stop",null),i().createElement("stop",{offset:"1",stopOpacity:"0"})),i().createElement("linearGradient",{id:_,x1:"-9.02706e-08",y1:"16.9846",x2:"19.14",y2:"16.9846",gradientUnits:"userSpaceOnUse"},i().createElement("stop",null),i().createElement("stop",{offset:"1",stopOpacity:"0"})),i().createElement("linearGradient",{id:h,x1:"44.9143",y1:"-1.25961",x2:"47.3195",y2:"23.1916",gradientUnits:"userSpaceOnUse"},i().createElement("stop",null),i().createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),i().createElement("linearGradient",{id:b,x1:"48",y1:"-1.25961",x2:"48",y2:"18.774",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"white"}),i().createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),i().createElement("clipPath",{id:c},i().createElement("rect",{width:"96",height:"120",fill:"white",transform:"translate(0 -3)"}))))}),f=n(2744),p=n(2141),m=(0,a.memo)(function(e){var t=e.enabled,n=e.enabledColor,a=e.disabledColor,r=e.styles,o=(0,f.D)(),s=null!=n?n:o.palette.black,c=null!=a?a:o.palette.neutralTertiary,d=(0,p.mergeStyles)({fill:t?s:c}),l="0 0 ".concat(24," ").concat(24);return i().createElement("svg",{width:24,height:24,viewBox:l,fill:"none",style:r},i().createElement("g",{className:d},i().createElement("path",{d:"M2 6.75C2 5.23122 3.23122 4 4.75 4L19.25 4C20.7688 4 22 5.23122 22 6.75V12.5356L21.1991 11.7347C20.9899 11.5255 20.7529 11.3612 20.5 11.2416V6.75C20.5 6.05964 19.9404 5.5 19.25 5.5L4.75 5.5C4.05964 5.5 3.5 6.05964 3.5 6.75L3.5 17.25C3.5 17.9404 4.05964 18.5 4.75 18.5H12.0149C12.0319 19.0338 12.2189 19.5632 12.576 20H4.75C3.23122 20 2 18.7688 2 17.25L2 6.75Z"}),i().createElement("path",{d:"M20.4919 12.4418C19.9062 11.856 18.9564 11.856 18.3706 12.4417L15.26 15.5524L19.4671 19.7595L22.5777 16.6489C23.1635 16.0631 23.1635 15.1133 22.5777 14.5275L20.4919 12.4418Z"}),i().createElement("path",{d:"M13.453 17.3593L14.5529 16.2595L18.76 20.4666L17.6601 21.5665C17.0743 22.1522 16.1246 22.1522 15.5388 21.5665L13.453 19.4807C12.8672 18.8949 12.8672 17.9451 13.453 17.3593Z"})))}),_=n(8214),h=function(){return h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)},b={activeInkBrushId:"pen1",brushes:[{inkBrushId:"pen1",getIcon:function(e){var t;return i().createElement(l,{styles:null==e?void 0:e.styles,inkBrushColor:null!==(t=null==e?void 0:e.inkBrushColor)&&void 0!==t?t:d.M.pen1.htmlColor})}},{inkBrushId:"pen2",getIcon:function(e){var t;return i().createElement(l,{styles:null==e?void 0:e.styles,inkBrushColor:null!==(t=null==e?void 0:e.inkBrushColor)&&void 0!==t?t:d.M.pen2.htmlColor})}},{inkBrushId:"highlighter",getIcon:function(e){var t;return i().createElement(u,{styles:null==e?void 0:e.styles,inkBrushColor:null!==(t=null==e?void 0:e.inkBrushColor)&&void 0!==t?t:d.M.highlighter.htmlColor})}}],eraser:{getIcon:function(e){return i().createElement(c,{styles:null==e?void 0:e.styles})}},text:{getIcon:function(){return i().createElement(_.Icon,{iconName:"HalfAlpha",styles:{root:{fontSize:21}}})}},clearAllMarkup:{getIcon:function(e){return i().createElement(m,h({},e))}}}}
,2162:(e,t,n)=>{"use strict";n.d(t,{Oy:()=>a}),(0,n(8424).loadStyles)([{rawString:".toolbar_eac3cb17{border-radius:8px 8px 0 0;padding:0 16px;-webkit-box-shadow:0 4px 8px rgba(0,0,0,.14),0 0 2px rgba(0,0,0,.12);box-shadow:0 4px 8px rgba(0,0,0,.14),0 0 2px rgba(0,0,0,.12);display:-webkit-box;display:-ms-flexbox;display:flex;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;pointer-events:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:100;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.toolbar_eac3cb17 .focusZone_eac3cb17{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (max-width:578px) and (orientation:landscape){.toolbar_eac3cb17 .focusZone_eac3cb17{width:100%}}@media screen and (max-width:578px) and (orientation:landscape){.toolbar_eac3cb17 span{width:100%}}.markupToolbarTooltip_eac3cb17{border:none;border-radius:4px;padding:6px}.toolbarButton_eac3cb17 .toolbarIcon_eac3cb17{-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;-webkit-transition:-webkit-transition .15s ease-in-out;transition:-webkit-transition .15s ease-in-out;transition:transition .15s ease-in-out;transition:transition .15s ease-in-out,-webkit-transition .15s ease-in-out}"}]);const a={toolbar:"toolbar_eac3cb17",focusZone:"focusZone_eac3cb17",markupToolbarTooltip:"markupToolbarTooltip_eac3cb17",toolbarButton:"toolbarButton_eac3cb17",toolbarIcon:"toolbarIcon_eac3cb17"}}
,978:(e,t,n)=>{"use strict";n.d(t,{q:()=>p});var a=n(5959),i=n.n(a),r=n(2162),o=n(7864),s=n(2141),c=n(2744),d=n(8801),l=n(5647),u=n(6885),f={Left:s.DirectionalHint.rightCenter,Right:s.DirectionalHint.leftCenter,Bottom:s.DirectionalHint.topCenter,Inline:s.DirectionalHint.topCenter},p=(0,a.memo)(function(e){var t=e.iconComponent,n=e.onClick,p=e.onFocus,m=e.tooltipContent,_=e.ariaLabel,h=e.ariaDescription,b=e.isToolActive,g=e.buttonId,v=e.disabled,y=e.markupToolbarToolsStyles,S=e.markupToolbarButtonStyles,D=e.arrowModeIconProps,I=e.cursor,x=e.text,C=(0,c.D)(),O=(0,a.useContext)(u.B_),w=O.markupToolbarStyles,E=(0,O.getMarkupToolbarPosition)(w),A=(0,d.Q)(C,y),L=A.toolbarButton,k=A.activeToolbarIcon,M=A.toolbarIcon,P=A.activeSVGIcon,T=A.SVGIcon,U=A.toolbarIconDisabled,F=A.toolbarTooltip,H=(0,s.mergeStyles)(L),R=(0,s.mergeStyles)(F),N=(0,s.mergeStyles)(M,b&&k,T,b&&P,r.Oy.toolbarIcon,v&&U),B=(0,o.B)("tooltip"),j={gapSpace:15,beakWidth:12,styles:{beak:{background:C.palette.neutralLight},beakCurtain:{background:C.palette.neutralLight},calloutMain:{background:C.palette.neutralLight}}},V=(0,a.useMemo)(function(){var e={root:{backgroundColor:"inherit",border:"none",height:l.St.height+"px",margin:"0",minWidth:l.St.width+"px",overflow:"hidden",padding:"0",width:l.St.width+"px",alignSelf:"center"},rootHovered:{backgroundColor:"inherit"},rootPressed:{backgroundColor:"inherit"},rootDisabled:{backgroundColor:"inherit"},screenReaderText:{visibility:"hidden"}};return(0,s.concatStyleSets)(e,S)},[S]),z=i().createElement(s.DefaultButton,{id:g,text:x,styles:V,className:(0,s.css)(H,r.Oy.toolbarButton),onClick:n,onFocus:p,role:"option","aria-checked":b,ariaLabel:_,ariaDescription:h,disabled:v,iconProps:D,style:{cursor:I}},i().createElement("span",{"aria-hidden":!0,className:N,role:"presentation"},t));return v||"none"===I||!m?z:i().createElement(s.TooltipHost,{content:m,id:B,directionalHint:f[E],calloutProps:j,delay:s.TooltipDelay.long,className:(0,s.css)(R,r.Oy.markupToolbarTooltip),tooltipProps:{styles:{subText:{fontWeight:600,textAlign:"center"}}}},z)})}
,2154:(e,t,n)=>{"use strict";n.d(t,{M:()=>_});var a=n(5959),i=n.n(a),r=n(6885),o=n(978),s=n(8801),c=n(2744),d=n(2422),l=n(3665),u=n(5468),f=function(){return f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},p=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},m=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},_=(0,a.memo)(function(e){var t=this,n=e.confirmationDialogHostId,_=e.confirmationDialogType,h=e.enableClearAllMarkup,b=e.showTooltip,g=e.styles,v=e.clearAllMarkupContent,y=e.text,S=e.setAriaAnnouncement,D=e.getIcon,I=(0,a.useContext)(r.B_),x=I.localizationStrings,C=I.onClearAllMarkupConfirmationDialog,O=(0,a.useContext)(l.u).enableUndoRedo,w=(0,c.D)(),E=(0,s.C)(w,null==g?void 0:g.markupToolbarTools),A=(0,u.J)(C),L=A.showConfirmationDialog,k=A.onConfirmInDialog,M=A.onCancelInDialog,P=A.isHavanaConfirmDialogVisible,T={contentTitle:x.markup_clearAllMarkupDialogTitle,contentSubText:x.markup_clearAllMarkupDialogSubText,closeButtonAriaLabel:x.markup_clearAllMarkupDialogCloseButtonAriaLabel,confirmText:x.markup_clearAllMarkupDialogConfirmButtonText,confirmAriaLabel:x.markup_clearAllMarkupDialogConfirmButtonAriaLabel,cancelText:x.markup_clearAllMarkupDialogCancelButtonText,cancelAriaLabel:x.markup_clearAllMarkupDialogCancelButtonAriaLabel};return i().createElement(i().Fragment,null,i().createElement(o.q,{text:y,markupToolbarToolsStyles:E,markupToolbarButtonStyles:null==g?void 0:g.markupToolbarButton,iconComponent:D(f({enabled:h},null==g?void 0:g.clearAllMarkupIcon)),onClick:function(){return p(t,void 0,void 0,function(){return m(this,function(e){return O?[2,new Promise(function(e){v(),S(x.markup_clearedAllMarkupAriaLive),e()})]:[2,p(t,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,L().then(function(e){"confirmed"===e&&(v(),S(x.markup_clearedAllMarkupAriaLive))}).catch(function(e){})];case 1:return e.sent(),[2]}})})]})})},tooltipContent:b?x.markup_markupToolbarClearAllMarkupTooltip:void 0,ariaLabel:x.markup_markupToolbarClearAllMarkupAriaLabel,isToolActive:!1,disabled:!h}),h&&!O&&i().createElement(d.K,{onConfirm:k,onCancel:M,isVisible:P,hostId:n,dialogType:_,styles:null==g?void 0:g.confirmationDialog,dialogStrings:T}))})}
,8801:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,Q:()=>o});var a=n(2141),i=n(920),r=n(5647);function o(e,t){var n,o,s,c,d={toolbarButton:{},activeToolbarIcon:{backgroundColor:e.palette.neutralTertiaryAlt},toolbarIcon:{width:r.fS,height:r.fS,"&:hover":(n={backgroundColor:e.palette.neutralTertiaryAlt},n[".".concat(i.g4)]={top:"-4px"},n),"&:active":(o={backgroundColor:e.palette.neutralTertiaryAlt},o[".".concat(i.g4)]={top:"-4px"},o)},toolbarIconDisabled:{"&:hover":{backgroundColor:"transparent"},"&:active":{backgroundColor:"transparent"}},activeSVGIcon:(s={},s[".".concat(i.g4)]={top:"-4px"},s),SVGIcon:(c={},c[".".concat(i.g4)]={top:"5px",position:"absolute",transition:"top 0.05s ease-in-out"},c),toolbarTooltip:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.14), 0px 0px 2px rgba(0, 0, 0, 0.12)"}};return(0,a.concatStyleSets)(d,t)}function s(e,t){var n={toolbarButton:{},activeToolbarIcon:{backgroundColor:e.palette.neutralQuaternaryAlt},toolbarIcon:{width:r.fS,height:r.fS,"&:active":{backgroundColor:e.palette.neutralQuaternaryAlt},"&:hover":{backgroundColor:e.palette.neutralLight}},toolbarIconDisabled:{"&:hover":{backgroundColor:"transparent"},"&:active":{backgroundColor:"transparent"}},activeSVGIcon:{},SVGIcon:{},toolbarTooltip:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.14), 0px 0px 2px rgba(0, 0, 0, 0.12)"}};return(0,a.concatStyleSets)(n,t)}}
,5647:(e,t,n)=>{"use strict";n.d(t,{Fl:()=>r,St:()=>a,UP:()=>i,fS:()=>o});var a={width:48,height:56},i="0 0 96 108",r="none",o="40px"}
,1574:(e,t,n)=>{"use strict";n.d(t,{f:()=>p});var a=n(5959),i=n.n(a),r=n(8424);(0,r.loadStyles)([{rawString:".sliderHeaderContainer_41c53db8{position:relative;height:42px;font-size:14px;line-height:42px;letter-spacing:0}"}]),(0,r.loadStyles)([{rawString:".headerContainer_4fb5e918{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.headerContainer_4fb5e918 .name_4fb5e918{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-margin-end:auto;margin-inline-end:auto}"}]);var o=n(8214),s=n(2744),c=n(2141),d=function(e){var t=e.value,n=e.valueFormatter,r=e.label,d=e.iconName,l=e.iconComponent,u=e.styles,f=(0,s.D)().palette.neutralPrimary,p=(0,a.useMemo)(function(){var e={root:{fill:f,fontSize:"16px",height:"16px",width:"16px",lineHeight:"16px",marginRight:"8px"}};return(0,c.concatStyleSets)(e,null==u?void 0:u.icon)},[f,null==u?void 0:u.icon]);return i().createElement("div",{className:"headerContainer_4fb5e918"},i().createElement("span",{className:"name_4fb5e918"},!!d&&i().createElement(o.Icon,{iconName:d,styles:p}),!!l&&l,!!r&&i().createElement("span",{style:null==u?void 0:u.label},r)),i().createElement("span",{style:null==u?void 0:u.valueText},n?n(t):t))};(0,r.loadStyles)([{rawString:".valueWrapper_d2c0a781{position:absolute}"}]);var l=n(5385),u=function(e){var t,n,r=e.value,o=e.maxValue,d=e.minValue,u=e.valueFormatter,f=e.styles,p=e.shouldShow,m=(0,a.useRef)(null),_=(0,s.D)(),h=(0,a.useMemo)(function(){var e=(0,c.getRTL)(_),t=function(e,t,n){return 100*(0,l.W4)(t,n,e)}(r,d,o);return e?{right:"".concat(t,"%"),transform:"translate(50%)"}:{left:"".concat(t,"%"),transform:"translate(-50%)"}},[r,o,d,_]);return t=m,n=!p,(0,a.useEffect)(function(){var e=t.current;if(e){if(n){var a=setTimeout(function(){e.hidden=!0},3e3);return function(){clearTimeout(a)}}e.hidden=!1}},[n,t,3e3]),i().createElement("span",{className:(0,c.mergeStyles)("valueWrapper_d2c0a781",f),style:h,ref:m,"data-test-id":"slider-value"},u?u(r):r)},f=function(){return f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},p=(0,a.forwardRef)(function(e,t){var n=e.layout,a=e.headerProps,r=e.styles,o="Labeled"===n,s=(0,c.mergeStyles)("sliderHeaderContainer_41c53db8",null==r?void 0:r.containerClassName);return i().createElement("div",{className:s,style:null==r?void 0:r.container,ref:t,"aria-hidden":!0},o?i().createElement(d,f({},a,{styles:null==r?void 0:r.labelValueHeader})):i().createElement(u,f({},a,{styles:null==r?void 0:r.valueHeader})))});p.displayName="SliderHeader"}
,8886:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var a=n(2141),i=n(5959),r=n.n(i);(0,n(8424).loadStyles)([{rawString:".actionsPaneContainer_94e1fbab{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.actionsPaneBody_94e1fbab{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow-y:auto;padding-left:16px;padding-right:16px}"}]);var o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=(0,i.memo)(function(e){var t=e.header,n=e.children,i=e.footer,s=e.size,c=e.containerId,d=e.styles,l=void 0===d?{}:d;return r().createElement("div",{id:c,className:(0,a.mergeStyles)("actionsPaneContainer_94e1fbab",l.container,o({},s))},t&&r().createElement("div",{className:(0,a.mergeStyles)(l.header)},t),r().createElement("div",{className:(0,a.mergeStyles)("actionsPaneBody_94e1fbab",l.body)},n),i&&r().createElement("div",{className:(0,a.mergeStyles)(l.footer)},i))})}
,1323:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var a=n(2744),i=n(5959),r=n(2522),o=function(e){var t=e.header,n=e.children,o=(0,a.D)(),s=i.useMemo(function(){return function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},header:{padding:"0 16px",backgroundColor:(0,r.g)(e)?"#363636":e.palette.neutralLight,height:"42px",display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between"}}}(o)},[o]);return i.createElement("div",{style:s.root},i.createElement("div",{style:s.header},t),i.createElement(i.Fragment,null,n))}}
,3680:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,U:()=>o});var a=function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function i(e,t){return{activeSection:{backgroundColor:e.palette.neutralPrimary},container:{},inactiveSection:{backgroundColor:e.palette.neutralTertiaryAlt},line:{},lineContainer:{},root:a({},t?{opacity:.6,pointerEvents:"none"}:{}),slideBox:{touchAction:"none",margin:"0px -12px",padding:"0px 12px","&:hover":{".ms-Slider-active":{backgroundColor:e.palette.neutralPrimary},".ms-Slider-inactive":{backgroundColor:e.palette.neutralTertiaryAlt},".ms-Slider-thumb":{border:"none"}},"&:active":{".ms-Slider-active":{backgroundColor:e.palette.neutralPrimary},".ms-Slider-inactive":{backgroundColor:e.palette.neutralTertiaryAlt},".ms-Slider-thumb":{border:"none"}}},thumb:{border:"none",background:e.palette.neutralPrimary},titleLabel:{visibility:"hidden"},valueLabel:{},zeroTick:{display:"none"}}}var r={lineHeight:"14px",textAlign:"center",wordBreak:"break-word",wordWrap:"break-word",maxWidth:"80%"};function o(e,t){return t?{container:{color:e.palette.neutralTertiary},labelValueHeader:{valueText:{color:e.palette.neutralTertiary},icon:{root:{fill:e.palette.neutralTertiary}},label:a({},r)}}:{labelValueHeader:{label:a({},r)}}}}
,2422:(e,t,n)=>{"use strict";n.d(t,{K:()=>u});var a=n(5959),i=n.n(a),r=n(3443),o=n(144),s=n(2313),c=n(2141),d=n(2744),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},u=(0,a.memo)(function(e){var t=e.isVisible,n=e.dialogStrings,u=e.hostId,f=e.dialogType,p=void 0===f?r.h.normal:f,m=e.dialogIsBlocking,_=e.styles,h=e.onConfirm,b=e.onCancel,g=e.onDismiss,v=e.areButtonsDisabled,y=(0,d.D)(),S=(0,a.useMemo)(function(){var e={dialog:{main:{backgroundColor:y.palette.neutralLighterAlt}}};return{dialog:(0,c.concatStyleSets)(e.dialog,null==_?void 0:_.dialog),dialogContent:(0,c.concatStyleSets)(e.dialogContent,null==_?void 0:_.dialogContent),dialogFooter:(0,c.concatStyleSets)(e.dialogFooter,null==_?void 0:_.dialogFooter),confirmButton:(0,c.concatStyleSets)(e.confirmButton,null==_?void 0:_.confirmButton),cancelButton:(0,c.concatStyleSets)(e.cancelButton,null==_?void 0:_.cancelButton)}},[_,y]),D=(0,a.useMemo)(function(){return{type:p,title:n.contentTitle,closeButtonAriaLabel:n.closeButtonAriaLabel,subText:n.contentSubText,styles:S.dialogContent}},[n,p,S]);return i().createElement(o.l,{hidden:!t,onDismiss:g,dialogContentProps:D,modalProps:l({styles:S.dialog,isBlocking:m},u&&{layerProps:{hostId:u,styles:null==_?void 0:_.layer}})},i().createElement(s.E,{styles:S.dialogFooter},i().createElement(c.PrimaryButton,{"data-test-id":"reset-confirm",onClick:h,text:n.confirmText,ariaLabel:n.confirmAriaLabel,styles:S.confirmButton,disabled:v}),i().createElement(c.DefaultButton,{onClick:b,text:n.cancelText,ariaLabel:n.cancelAriaLabel,styles:S.cancelButton,disabled:v})))})}
,4409:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var a=n(5959),i=n.n(a)().createContext({canvasContextIsValid:!1,numTexturesLoaded:0})}
,3629:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var a=(0,n(5959).createContext)({isOnline:!1,msaStatus:"SignedOut",onMSALogin:function(){},onMSALogout:function(){},onMSABlocked:function(){},onMSABanned:function(){},onDismissHostError:function(){},hostError:void 0})}
,4977:(e,t,n)=>{"use strict";n.d(t,{M:()=>a});var a=(0,n(5959).createContext)({showLoadingSpinner:function(){}})}
,6865:(e,t,n)=>{"use strict";n.d(t,{Dj:()=>s,PH:()=>o});var a=n(5959),i=n.n(a),r=(0,a.createContext)(function(e){}),o=i().memo(function(e){var t=e.onError,n=e.children;return i().createElement(r.Provider,{value:t},n)});function s(){return(0,a.useContext)(r)}}
,3665:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var a=(0,n(5959).createContext)({enableAdjustments:!1,experimental_enableSharpness:!1,enableFilters:!1,enableAutoEnhance:!1,enableMarkup:!1,enabledRetouchModes:[],experimental_enableInPaintingDevUi:!1,enableUndoRedo:!1,enableMarkupText:!1,enableBackground:!1,experimental_enableAIRelighting:!1,disableWebGL2Support:!1,experimental_enableStylizer:!1,experimental_enableStylizerDevUi:!1,experimental_enableResize:!1,experimental_enableResizeUndoRedo:!1})}
,5384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(5959),i=n(2397),r=(0,a.createContext)({image:(0,i.$o)(),isExpectingThumbnailThenFullImage:!1,setImage:function(e){},setImageLayer:function(){},offscreenRenderer:null,setOffscreenRenderer:function(){}})}
,3082:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var a=(0,n(5959).createContext)({invokeInPaintingAction:void 0,invokeInPaintingActionWithAlgorithmParameters:void 0})}
,2978:(e,t,n)=>{"use strict";n.d(t,{x:()=>o,u:()=>r});var a=n(5959),i=n(1985),r=function(e){var t=e.strings,n=e.locales;return{strings:t,localizeNumber:function(e){return(0,i.$4)(e,n)},localizeNumberDecimalSeparatorOnly:function(e,t){return(0,i.N7)(e,n,t)},delocalizeNumberDecimalSeparatorOnly:function(e){return(0,i.gv)(e,n)},getDecimalSeparator:function(){return(0,i.kI)(n)},isPercentSignLeading:function(){return(0,i.at)(n)},localizePercentage:function(e,t){return(0,i.RC)(e,n,t)}}},o=(0,a.createContext)(r({strings:{adjustment_light:"Light",adjustment_color:"Color",adjustment_lightAriaLandmark:"Light Adjustments",adjustment_colorAriaLandmark:"Color Adjustments",adjustment_brightness:"Brightness",adjustment_exposure:"Exposure",adjustment_contrast:"Contrast",adjustment_highlights:"Highlights",adjustment_shadows:"Shadows",adjustment_saturation:"Saturation",adjustment_temperature:"Warmth",adjustment_tint:"Tint",adjustment_vignette:"Vignette",adjustment_sharpness:"Sharpness",adjustment_mobileChangedAriaLive:"{0} value at {1}. Swipe down then up to access the respective value slider.",adjustment_sliderChangedAriaLive:"{0} value at {1}",adjustment_sliderAriaLabelFormatString:"{0}.{1}",adjustment_sliderTooltip:" Drag on slider or use arrow keys to change {0} value",adjustment_tileMobileTooltip:"Double tap to select then swipe down then up to select respective value slider",adjustment_tileMobileAriaLabel:"{0} value at {1}",adjustment_panelLabel:"Adjustments",aspectRatio_listTitle:"Aspect ratios",aspectRatio_freeform:"Free",aspectRatio_freeformAriaLabel:"Free aspect ratio",aspectRatio_original:"Original",aspectRatio_originalAriaLabel:"Original aspect ratio",aspectRatio_square:"Square",aspectRatio_squareAriaLabel:"Square aspect ratio",aspectRatio_ratioLabelFormatString:"{0} : {1}",aspectRatio_ratioAriaLabelFormatString:"{0} by {1} aspect ratio",aspectRatio_tooltip:"Click or select Enter to see more aspect ratio options",aspectRatio_changedAriaLive:"Changed to {0}",flip_portrait:"Flip to portrait",flip_portraitAriaLabel:"Flip to portrait",flip_landscape:"Flip to landscape",flip_landscapeAriaLabel:"Flip to landscape",aspectRatio_panelLabel:"Aspect Ratio",aspectRatio_landscapePanelLabel:"Landscape",aspectRatio_portraitPanelLabel:"Portrait",autoEnhance_name:"Auto Enhance",autoEnhance_appliedAriaLive:"Applied auto enhance with {0} intensity",autoEnhance_removedAriaLive:"Removed auto enhance",autoEnhance_intensitySliderHeader:"Intensity",autoEnhance_intensitySliderAriaLabel:"Auto Enhance intensity",autoEnhance_appliedTooltip:"Auto Enhance is applied to the image",autoEnhance_notAppliedTooltip:"Auto enhance is not applied to the image",crop_topLeftCornerAriaLabel:"Top left crop handle. Corner pixel position is {0} from the left {1} from the top.",crop_topRightCornerAriaLabel:"Top right crop handle. Corner pixel position is {0} from the left {1} from the top.",crop_bottomLeftCornerAriaLabel:"Bottom left crop handle. Corner pixel position is {0} from the left {1} from the top.",crop_bottomRightCornerAriaLabel:"Bottom right crop handle. Corner pixel position is {0} from the left {1} from the top.",crop_cornerTooltip:"Drag handle or use arrow keys to crop the image",crop_rectangleAriaLabel:"Drag the image or use the arrow keys to move image in crop region",crop_rectangleTooltip:"Drag the image or use the arrow keys to move image in crop region",crop_rectanglePositionAriaLive:"Left {0} Top {1} pixels",crop_rectangleCannotMoveInCurrentDirectionAriaLive:"Left {0} Top {1} pixels. Cannot move any further in current direction.",crop_panelLabel:"Crop and Rotate",editor_viewingOriginal:"Viewing Original",editor_viewingOriginalAriaLive:"Viewing original image",editor_zoomPercentAriaLive:"{0} percent zoom",editor_imageDimensionLabelFormatString:"{0} x {1}",editor_imageDimensionAriaLabelFormatString:"{0} by {1} pixels",editor_imageDimensionAriaLive:"Dimension is {0} by {1} pixels",editor_imageDimensionWithAspectRatioAriaLive:"{2} to {3} aspect ratio; dimension is {0} by {1} pixels",editor_title:"Image Editor",filter_listTitle:"Filters",filter_intensitySliderHeader:"Intensity",filter_intensitySliderAriaLabelFormatString:"{0} intensity.{1}",filter_nameOriginal:"Original",filter_nameBurn:"Burn",filter_nameBw:"B&W",filter_nameBwAriaLabel:"Black and White",filter_nameBwCool:"B&W Cool",filter_nameBwCoolAriaLabel:"Black and White Cool",filter_nameBwHighContrast:"B&W High Contrast",filter_nameBwHighContrastAriaLabel:"Black and White High Contrast",filter_nameBwWarm:"B&W Warm",filter_nameBwWarmAriaLabel:"Black and White Warm",filter_nameCoolLight:"Cool Light",filter_nameCalm:"Calm",filter_nameDramaticCool:"Dramatic Cool",filter_nameFilm:"Film",filter_nameGolden:"Golden",filter_namePunch:"Punch",filter_nameRadiate:"Radiate",filter_nameVintage:"Vintage",filter_nameVividCool:"Vivid Cool",filter_nameWarmContrast:"Warm Contrast",filter_changedAriaLive:"{0} filter has been applied",filter_changedAriaLiveWithIntensity:"{0} filter at {1} percent intensity has been applied",filter_mobileChangedAriaLive:"{0} filter has been applied. Swipe down then up to access the respective value slider.",filter_mobileChangedAriaLiveWithIntensity:"{0} filter at {1} percent intensity has been applied. Swipe down then up to access the respective value slider.",filter_filtersAriaLandmark:"Filters",filter_sliderTooltip:" Drag on slider or use arrow keys to change {0} value",filter_tileMobileTooltip:"Double tap to select then swipe down then up to select respective value slider",filter_tileAriaLabel:"{0} filter is in focus but not selected. {1} filter is currently selected at value of {2}",filter_tileAriaLabelWhenOriginalFilterIsSelected:"{0} filter is in focus but not selected. Original filter currently selected",filter_activeTileAriaLabel:"{0} filter is currently selected at value of {1}.",filter_activeOriginalFilterAriaLabel:"Original is selected",filter_showAllButtonText:"Show all",filter_hideButtonText:"Hide",footer_done:"Done",nonCrop_imageTooltip:"Click and hold or double tap and hold to view the original image",nonCrop_imageAriaLabelWithEdits:"Click and hold on image to view the original image. Alternatively, double tap on image then hold to view the original image",nonCrop_imageAriaLabelWithoutEdits:"No adjustments have been made or filter applied to the image",nonCrop_panViewPositionAriaLive:"Left {0} Top {1} pixels",nonCrop_imagePanAriaLabel:"Use arrow keys to pan the image. You may need to zoom in first.",pivot_crop:"Crop",pivot_adjustment:"Adjustment",pivot_filter:"Filter",pivot_markup:"Markup",pivot_retouch:"Retouch",pivot_erase:"Erase",pivot_inpaint:"Dev in-painting",pivot_background:"Background",pivot_relight:"Relight",pivot_focalpoint:"Focal point",pivot_stylizer:"Restyle image",pivot_resize:"Super resolution",pivot_cropAriaDescription:"Crop, rotate, and flip the image.",pivot_adjustmentAriaDescription:"Adjust the image light and color values.",pivot_filterAriaDescription:"Apply a filter to the image.",pivot_markupAriaDescription:"Annotate the image.",pivot_retouchAriaDescription:"Erase areas of the image.",pivot_backgroundAriaDescription:"Background blur, remove, or replace.",pivot_relightAriaDescription:"Apply AI lighting to the image.",pivot_focalpointAriaDescription:"Set the focal point of the image.",pivot_stylizerAriaDescription:"Restyle the image using AI.",pivot_resizeAriaDescription:"Enhance and upscale the image using AI.",rotate_left90:"Rotate image 90 degrees counter-clockwise",rotate_left90AriaLabel:"Rotate counter-clockwise",rotate_left90FinishedAriaLive:"Rotated 90 degrees counter-clockwise",rotate_right90:"Rotate image 90 degrees clockwise",rotate_right90AriaLabel:"Rotate clockwise",rotate_right90FinishedAriaLive:"Rotated 90 degrees clockwise",rotate_sliderAriaLabel:"Manual rotate",rotate_degree:"",rotate_sliderTooltip:"Drag or use arrow keys to rotate the image",flip_horizontal:"Flip image horizontally",flip_horizontalAriaLabel:"Flip image horizontally",flip_horizontalFinishedAriaLive:"Flipped image horizontally",flip_vertical:"Flip image vertically",flip_verticalAriaLabel:"Flip image vertically",flip_verticalFinishedAriaLive:"Flipped image vertically",toolbar_imageSaveMenu:"Save",toolbar_imageSaveMenuTooltip:"Save options for your image",toolbar_imageSave:"Save",toolbar_imageSaveAriaLabel:"Save",toolbar_saveMenuSplitButtonAriaLabel:"More save options",toolbar_imageSaveTooltip:"Image will be overwritten with the latest edits",toolbar_imageSaveTransparencyWarningTooltip:"This will save your image with a white background",toolbar_imageSaveAsCopy:"Save as copy",toolbar_imageSaveAsCopyAriaLabel:"Save as copy",toolbar_imageSaveAsCopyTooltip:"Create a new image with the applied edits",toolbar_imageSaveAsCopyTransparencyTooltip:"Use .png format to preserve background removal",toolbar_imageCopyToClipboard:"Copy to clipboard",toolbar_imageCopyToClipboardAriaLabel:"Copy to clipboard",toolbar_imageCopyToClipboardTooltip:"Copy the image to clipboard",toolbar_imageReset:"Reset",toolbar_imageResetTooltip:"Reset all edits performed on the image",toolbar_imageResetAriaLabel:"Reset",toolbar_imageResetFinishedAriaLive:"Image edits were reset",toolbar_resetConfirmDialogContentTitle:"Reset image?",toolbar_resetConfirmDialogContentSubText:"This will remove all edits made to this image.",toolbar_resetConfirmDialogCloseButtonAriaLabel:"Close",toolbar_resetConfirmDialogConfirmText:"Reset",toolbar_resetConfirmDialogConfirmAriaLabel:"Reset",toolbar_resetConfirmDialogCancelText:"Cancel",toolbar_resetConfirmDialogCancelAriaLabel:"Cancel",toolbar_zoomLevelAriaLabel:"Zoom level",toolbar_zoomInTooltip:"Zoom into the image",toolbar_zoomInAriaLabel:"Zoom in",toolbar_zoomOutTooltip:"Zoom out of the image",toolbar_zoomOutAriaLabel:"Zoom out",toolbar_done:"Done",toolbar_doneAriaLabel:"Done",toolbar_doneTooltip:"Done",toolbar_cancel:"Cancel",toolbar_cancelAriaLabel:"Cancel",toolbar_cancelTooltip:"Cancel all edits and return to previous screen",toolbar_fitToViewTooltip:"Fit to window",toolbar_viewActualSizeTooltip:"Actual size",toolbar_undo:"Undo",toolbar_undoAriaLabel:"Undo (Ctrl + Z)",toolbar_redo:"Redo",toolbar_redoAriaLabel:"Redo (Ctrl + Y)",undoRedo_colorAdjustmentsAriaLive:"{0} {1} color adjustment",undoRedo_autoEnhanceAriaLive:"{0} auto enhance",undoRedo_filterAriaLive:"{0} {1} filter",undoRedo_markupInkContentAriaLive:"{0} ink stroke",undoRedo_markupEraseContentAriaLive:"{0} erase ink stroke",undoRedo_markupClearAllMarkupContentAriaLive:"{0} clear all markup",undoRedo_transformCropAriaLive:"{0} cropping operation on the image",undoRedo_transformAspectRatioAriaLive:"{0} aspect ratio change on the image",undoRedo_transformMirrorImageAriaLive:"{0} flip",undoRedo_transformRotationAriaLive:"{0} rotation",undoRedo_spotFixAriaLive:"{0} a spot fix",undoRedo_maskBrushAriaLive:"{0} a mask brush",undoRedo_blurAriaLive:"{0} a blur",undoRedo_imageBackgroundAriaLive:"{0} an image background",undoRedo_focalPointAriaLive:"{0} the focal point",undoRedo_previewSuperResolutionAriaLive:"{0} the super resolution preview",undoRedo_appliedSuperResolutionAriaLive:"{0} the super resolution",spotFix_toastText:" Tap on a spot or blemish to fix it.",spotFix_calloutHeaderText:"Spot fix",spotFix_calloutMainText:"Left mouse click or tap on a spot or blemish to fix it. To navigate around the image hold right mouse click then drag.",spotFix_header:"Spot fix",spotFix_sizeSliderTooltip:"Drag on slider or use arrow keys to change size",spotFix_sizeSliderHeader:"Size",spotFix_sizeSliderAriaLabel:"Spot fix size",spotFix_sizeChangedAriaAnnouncement:"Spot fix size is at {0}",magicErase_GenerativeEraseLabel:"Generative Erase",magicErase_autoApplyLabel:"Auto apply",magicErase_autoApplyToggleOn:"On",magicErase_autoApplyToggleOff:"Off",magicErase_autoApplyToggleAriaLabel:"Auto apply",magicErase_autoApplyToggleAriaDescriptionWhenOn:"Remove area after each brush stroke. Disable auto apply to show brush tool options.",magicErase_autoApplyToggleAriaDescriptionWhenOff:"Use erase button to remove the area. Enable auto apply to hide brush tool options.",magicErase_maskBrushPickerAddToSelectionAriaLabel:"Add mask",magicErase_maskBrushPickerAddToSelectionAriaDescription:"Brush areas of the photo to add mask to the erase operation.",magicErase_maskBrushPickerRemoveFromSelectionAriaLabel:"Remove mask",magicErase_maskBrushPickerRemoveFromSelectionAriaDescription:"Brush areas of the photo to remove masks from the erase operation.",magicErase_maskBrushPickerEraseText:"Erase",magicErase_maskBrushPickerEraseAriaDescription:"Select to erase the brushed areas.",magicErase_maskBrushPickerClearText:"Clear",magicErase_maskBrushPickerClearAriaDescription:"Select to clear all selected areas.",magicErase_notificationMagicEraseStillProcessing:"Erasing area or object in the selection...",magicErase_notificationMagicEraseProcessingCompleted:"Area or object erased.",magicErase_toastDismissButtonAriaLabel:"Dismiss notification message.",magicErase_notificationMagicEraseProcessingFailed:"An error occurred. Please try again later.",magicErase_canvasAriaLabelWithNoPreviousEraseOperation:"Original photo in view. Select areas on the photo to remove.",magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOn:"Unapplied selected area in view. Erase is being applied.",magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOff:"Unapplied selected areas in view. Select more areas on the photo to remove. Select the erase button to erase the selected areas from the photo.",magicErase_canvasAriaLabelWithAppliedBrushedMasks:"Applied erased area in view. Select more areas on the photo to remove.",background_resetButtonText:"Reset background",background_resetButtonAriaLabel:"Reset background",background_resetButtonTooltip:"Reset the background to its original state",background_resetButtonAriaDescription:"Select to reset the background to its original state",background_blurIntensitySliderLabel:"Blur intensity",background_blurIntensitySliderArialLabel:"Blur intensity",background_blurIntensitySliderChangedAriaAnnouncementFormat:"Blur intensity is at {0}",background_blurIntensitySliderTitle:" Drag on slider or use arrow keys to change the blur intensity value",background_notificationBackgroundSegmentationCompleted:"Success! We found the background of your image and selected it for you.",background_notificationBackgroundSegmentationProcessing:"Finding the background of the image...",background_ariaAnnounceSegmentationProcessing:"Please wait a moment while we are finding the background of this image for you.",background_backgroundSegmentationFailed:"We're sorry, we couldn't find the background of your image. You can use the brush tool to select the area where you'd like to apply the chosen background effect.",background_backgroundSegmentationFailedDismissButtonAriaLabel:"We're sorry, background detection is currently unavailable. You can try again later, or use the brush tool to select the area where you'd like to apply the chosen background effect. Press enter key to dismiss this notification message",background_notificationBackgroundBlurProcessing:"Applying background blur on the image...",background_ariaAnnounceSegmentationCompletion:"Success! We found the background of your image and selected it for you. Select either blur, remove, or replace option to view the new background.",background_segmentationCompleteToastDismissButtonAriaLabel:"Dismiss found background message",background_segmentationCompleteToastDismissButtonAriaDescription:"The background of this image is found and selected for you. Press enter key to dismiss this notification message",background_blurTitleText:"Blur",background_blurTitleAriaLabelWhenOptionIsSelected:"Blur background",background_blurTitleAriaLabelWhenOptionIsNotSelected:"Blur background, Press enter to apply the new background and to access more options",background_blurTitleTooltip:"Blur the selected background area",background_removeTitleText:"Remove",background_removeTitleAriaLabelWhenOptionIsSelected:"Remove background",background_removeTitleAriaLabelWhenOptionIsNotSelected:"Remove background, Press enter to remove the current background",background_removeTitleTooltip:"Remove the selected background area",background_replaceTitleText:"Replace",background_replaceColorPickerAriaLabel:"Color picker, {0} {1} {2} {3} {4} {5} selected, Press right and left arrow keys to adjust the color saturation and up and down arrow keys to adjust the color brightness",background_replaceColorPickerChangedAriaAnnouncementFormat:"Replaced background color has changed to {0} {1} {2} {3} {4} {5} selected",background_replaceColorPickerSliderAriaLabel:"Hue slider thumb, Press right and left arrow keys to adjust the color hue ",background_replaceTitleAriaLabelWhenOptionIsSelected:"Replace background",background_replaceTitleAriaLabelWhenOptionIsNotSelected:"Replace background, Press enter to replace the background with a color and to access more options",background_replaceTitleTooltip:"Replace the selected background area",background_ariaAnnounceAppliedReset:"Reverted background image to original",background_canvasAriaLabelWhenNoBackgroundOption:"original background in view",background_canvasAriaLabelWhenBackgroundOptionApplied:"applied background in view",premium_previewFeatureLabel:"Preview",maskBrushPicker_addToSelection:"Add mask",maskBrushPicker_addToSelectionAriaLabel:"Add mask brush",maskBrushPicker_addToSelectionAriaDescription:"Select areas of the image that will be affected by the background operation",maskBrushPicker_removeFromSelection:"Remove mask",maskBrushPicker_removeFromSelectionAriaLabel:"Remove mask brush",maskBrushPicker_removeFromSelectionAriaDescription:"Select areas of the image to restore regions affected by the background operation",maskBrushPicker_size:"Brush size",maskBrushPicker_sizeChangedAriaAnnouncement:"Brush size has changed to {0}",maskBrushPicker_sizeAriaLabel:"Brush size",maskBrushPicker_sizeAriaDescription:"Drag on slider or use arrow keys to change the brush size",maskBrushPicker_softness:"Brush softness",maskBrushPicker_ariaAnnounceSoftnessChanged:"Brush softness has changed to {0}",maskBrushPicker_softnessAriaLabel:"Brush softness",maskBrushPicker_softnessAriaDescription:"Drag on slider or use arrow keys to change the brush softness",maskBrushPicker_title:"Background brush tool",maskBrushPicker_showSelectionToggleAriaLabelWhenOn:"Background brush tool, Press enter to disable the brush tool and hide all tool options",maskBrushPicker_showSelectionToggleAriaLabelWhenOff:"Background brush tool, Press enter to enable the brush tool and access to the tool options",maskBrushPicker_showSelectionToggleOn:"On",maskBrushPicker_showSelectionToggleOff:"Off",maskBrushPicker_showSelectionToggleTooltip:"Background brush tool",maskBrushPicker_ariaAnnounceShowSelectionIsOff:"The selected background area is now hidden and brush pointer is disabled.",maskBrushPicker_ariaAnnounceShowSelectionIsOn:"The selected background area is now indicated with the gradient color semi-transparent layer on the image. You can begin using the brush pointer to alter the selected area.",maskBrushPicker_ariaAnnounceAreaPainted:"Added new brushed region",maskBrushPicker_ariaAnnounceAreaErased:"Removed brushed region",maskBrushPicker_ariaAnnounceAdditiveBrushSelected:"Painting on image will add to selected area.",maskBrushPicker_ariaAnnounceSubtractiveBrushSelected:"Painting on image with brush pointer will remove selection area.",maskBrushPicker_additiveOrSubtractiveToggleAriaLabel:"Selection brush tool select or deselect mode",maskBrushPicker_additiveOrSubtractiveToggleAriaDescription:"Press enter to switch the selection brush tool to {0}",colorPicker_redLabel:"Red",colorPicker_greenLabel:"Green",colorPicker_blueLabel:"Blue",colorPicker_hexLabel:"Hex",focalPoint_handleAriaLabel:"Focal point handle",focalPoint_handleDescription:"Drag handle or use arrow keys to set a focal point",focalPoint_positionFormatString:"Focal point set at {0} percent from left and {1} percent from top.",focalPoint_previewTitle:"Preview",focalPoint_previewDescription:"See how the focal point affects the way your readers view your image across different screen sizes and aspect ratios.",focalPoint_previewAspectRatioFormatString:"{0}:{1}",focalPoint_previewImageAltFormatString:"Shows how the image will be viewed for the {0} to {1} aspect ratio.",magicErase_calloutHeaderText:"Remove distractions",magicErase_calloutMainText:"Brush over the entire area you want removed from your photo. This feature uses AI to infill the removed area and may not be perfect or what you expect. If you find the results to be unexpected, please send us feedback.",magicErase_calloutSendFeedbackLinkText:"Send feedback",stylizerTextPrompt_title:"Describe what style you'd like to apply",stylizerTextPrompt_placeholder:"Try 'An abstract expressionist art style, characterized by spontaneous, gestural brushwork'",stylizerTextPrompt_example:"An abstract expressionist art style, characterized by spontaneous, gestural brushwork",stylizerTextPrompt_wordsCount:"{0} / 70 words",stylizerTeachingTip_title:"How Restyle image works",stylizerTeachingTip_mainTextWithSendFeedbackLink:"Restyle image is powered by an AI system that generates realistic images based on your text description and creative vision. It may create things you don't expectif you find a creation to be offensive, please %HL%send us feedback.%HL%",stylizerTeachingTip_MicrosoftServicesAgreementAndThirdPartyLinks:"By using Restyle image, you agree that you are responsible for compliance with our Code of Conduct in the %HL%Microsoft Services Agreement%HL% and these %HL%Third-Party Apps and Services%HL% terms.",networkOffline_title:"No internet connection",networkOffline_description:"To use this tool, make sure you are connected to the internet.",networkOfflineImage_alt:"An icon for displaying network offline status",msaSignedOut_title:"Microsoft account is required",msaSignedOut_description:"Transform your photos using AI. Sign in with your Microsoft account to get started.",msaSignedOut_learnMore:"When you're signed in, Microsoft will collect information about your interaction with Restyle image for AI safety and security purposes. %HL%Learn more%HL%",msaBlocked_title:"Microsoft account blocked",msaBlocked_description:"You've been blocked from this service because of inappropriate usage. %HL%Learn more%HL%",msaBlockedImage_alt:"An icon for displaying MSA blocked status",msaBanned_title:"Microsoft account banned",msaBanned_description:"You've been banned from this service because of inappropriate usage. %HL%Click here%HL% to submit an appeal.",msaBannedImage_alt:"An icon for displaying MSA banned status",loginButton_title:"Sign in",loginImage_alt:"An icon for displaying MSA signed out status",loginButton_ariaAnnouncement:"Microsoft account sign-in button",stylizerTextPrompt_buttonAriaLabel:"Submit",restyleDropdown_allLabel:"Restyle all",restyleDropdown_backgroundOnlyLabel:"Background only",restyleDropdown_foregroundOnlyLabel:"Foreground only",restyleDropdown_ariaLabel:"Restyle options",creativitySlider_calloutHeaderText:"How Creativity Works",creativitySlider_calloutMainText:"A lower creativity value creates an image closer to your original drawing. A higher value increased AI input on the generated image.",creativitySlider_calloutButtonAriaLabel:"Click to learn about how creativity works",creativitySlider_label:"Creativity",downloadModel_title:"AI model required",downloadModel_description:"An AI model is required to use this feature. Download the latest AI model in Microsoft Store.",downloadModel_button:"Download",downloadModel_buttonAriaLabel:"Download AI model",downloadModel_imageAlt:"An icon for displaying AI model download status",initializeModel_title:"Preparing the AI model",initializeModel_description:"This might take a few minutes.",initializeModel_imageAlt:"An icon for displaying AI model initialization status",stylizer_modelFailureDescription:"There was an issue setting up the AI model. Please try again later.",stylizer_modelFailureImageAlt:"An icon for displaying AI model failure",stylizer_modelFailureTitle:"Something went wrong",foregroundDisabledAlert_title:"This style is applied to the background only",foregroundDisabledAlert_description:"We can only apply this style to the background of the image to prevent AI from distorting facial features in images.",faceDetectionTeachingTip_title:"How AI uses face detection",faceDetectionTeachingTip_mainText:"We use face detection AI technology to analyze your photos for better results. Your privacy and security are important to us.",faceDetectionTeachingTip_LearnMoreLinkText:"Learn more about AI and face detection",faceDetectionTeachingTip_DismissLinkText:"Dismiss",contentWarning_title:"Content warning",contentWarning_description:"Could not generate high-quality content. Please change your description and try again.",stylizer_titleBarTeachingTipTitle:"Restyle your images",stylizer_titleBarTeachingTipDescription:"Customize your image effortlessly by applying suggested unique styles, or by describing your own style.",stylizer_titleBarTeachingTipButtonText:"Try now",stylizer_msaSignedInReminderWithLearnMoreLink:"You're signed in, Microsoft will collect information about your interaction with Restyle image for AI safety and security purposes. %HL%Learn more%HL%",stylizer_genericErrorTitle:"Something's wrong on our end.",stylizer_genericErrorDescription:"Please try again later.",stylizer_harmfulInputTitle:"Content warning",stylizer_harmfulInputDescription:"Could not generate high-quality content. Choose a different photo and try again.",stylizer_harmfulOutputTitle:"Content warning",stylizer_harmfulOutputDescription:"Could not generate high-quality content. Please change your photo and/or description and try again.",stylizer_notificationDismissButtonAriaLabel:"Dismiss notification message.",stylizer_presetsNameFantasy:"Fantasy",stylizer_presetsNameAnime:"Anime",stylizer_presetsNameCyberpunk:"Cyberpunk",stylizer_presetsNameSurrealism:"Surrealism",stylizer_presetsNameImpressionist:"Impressionist",stylizer_presetsNameRenaissance:"Renaissance",stylizer_presetsNameWatercolor:"Watercolor",stylizer_presetsNamePapercraft:"Papercraft",stylizer_presetsNamePixelArt:"Pixel Art",stylizer_presetsPromptFantasy:"Apply Fantasy art style, mystical look and feel.",stylizer_presetsPromptAnime:"Apply a Japanese Anime art style with simplified backgrounds, bold colors and vibrant personalities. Incorporate typical Anime features, such as speed lines for action and dramatic lighting to highlight emotions.",stylizer_presetsPromptSurrealism:"Apply a surrealist style and with a look and feel of dreamlike scenes and ideas, reflecting both the unconscious mind to express itself with elements of whimsy, and a balance of logic and illogical undertones, with analogous darker color palette, paired with warm pastel colors, playful patterns.",stylizer_presetsPromptImpressionist:"Apply an impressionism art style, characterized by small, thin yet visible brushstrokes. Depicts the passage of time and accurate depiction of light in its changing qualities. Incorporate a natural color palette of blues, greens and warm sun or clear night.",stylizer_presetsPromptCyberpunk:"Apply a cyberpunk style with neon glowing edges, characterized by casting a surreal glow over a night time scene, incorporating a sense futuristic science fiction elements, virtual reality, and grit.",stylizer_presetsPromptRenaissance:"Apply a Renaissance art style, dramatic lighting like chiaroscuro, sfumato, capturing the opulence of classical.",stylizer_presetsPromptWatercolor:"Apply a watercolor style, characterized by its transparent and luminous quality, delicate washes, blending colors to achieve gradients, subtle transitions, a sense of depth, fluidity.",stylizer_presetsPromptPapercraft:"Apply a paper cut out style and with a look and feel of retro and contemporary elements, reflecting both nostalgia and modern sensibilities. incorporates elements of whimsy, and a balance of masculine and feminist undertones, with analogous pink color palette, paired with warm vibrant and pastel colors, playful patterns.",stylizer_presetsPromptPixelArt:"Apply a pixel art style with highly impressionistic shapes yet a bit abstract, using limited colours, use bold analogous and complimentary colors. Use a grid structure with retro aesthetics reminiscent of older video game graphics and it's blocky appearance.",stylizer_presetPromptProcessing:"Applying {0} style on the image",stylizer_presetPromptProcessed:"{0} style has been applied",stylizer_presetsChangedAriaLive:"{0} style has been applied",stylizer_presetsTileAriaLabel:"{0} style is in focus but not selected. {1} style is currently selected",stylizer_presetsTileAriaLabelWhenNoneSelected:"{0} style is in focus but not selected",stylizer_presetsActiveTileAriaLabel:"{0} style is currently selected",stylizer_presetsGroupAriaLabel:"Styles",notification_dismissButtonAriaLabel:"Dismiss notification message.",resize_upscaleSliderAriaLabel:"Scale factor for upscaling the image",resize_upscaleSliderTooltip:"Slide to change the scale factor",resize_scaleLabel:"Scale",resize_scaleTeachingTipTitle:"Pick the best scale for your image",resize_scaleTeachingTipMainText:"Smaller upscales are great for everyday use, while higher upscales are ideal for large-format printing. Options may be limited for images that are already very large.",resize_upscaleSliderResizeFactorLabel:"{0}x",resize_upscaleSliderAriaValueText:"{0}x. New image size will be {1} by {2} pixels",resize_upscaleSlider1xAriaValueText:"1x. No image upscale.",resize_currentImageLabel:"Current:",resize_newImageLabel:"New:",resize_teachingTipTitle:"How super resolution works",resize_teachingTipMainText:"Super resolution is a feature that makes low-resolution images clearer and more detailed. It uses advanced AI technology to enhance and enlarge images, giving you high-quality results from lower-quality originals. Perfect for printing large photos or improving old pictures.",resize_teachingTipSendFeedbackLink:"Send feedback",resize_learnMoreLink:"Learn more",resize_applyButton:"Apply",resize_applyButtonAriaLabel:"Apply super resolution",resize_cancelButton:"Cancel",resize_cancelButtonAriaLabel:"Cancel the current upscale process",resize_cancelAriaLive:"Canceled the upscale. Scale factor is reset back to 1x with current image size of {0} by {1} pixels",resize_discardButton:"Discard",resize_discardButtonAriaLabel:"Discard the super resolution result",resize_discardAriaLive:"Discarded the upscaled image. Scale factor is reset back to 1x with current image size of {0} by {1} pixels",resize_imageTooBigWarning:"This image is too large for super resolution. Try cropping it or using a smaller image.",resize_applyUpscaleConfirmDialogContentTitle:"Apply super resolution before proceeding?",resize_applyUpscaleConfirmDialogContentSubText:"Your super resolution and all previous edits will be applied. You can still undo them later.",resize_applyUpscaleConfirmDialogCloseButtonAriaLabel:"Close",resize_applyUpscaleConfirmDialogConfirmText:"Apply",resize_applyUpscaleConfirmDialogConfirmAriaLabel:"Apply super resolution and all previous edits",resize_applyUpscaleConfirmDialogCancelText:"Discard",resize_applyUpscaleConfirmDialogCancelAriaLabel:"Discard super resolution and proceed without applying",resize_notificationUpscaleInProgress:"Image enhancement and upscaling in progress...",resize_notificationUpscaleSuccessfullyCompletedFormatString:"Success! We have enhanced and upscaled your image to {0} by {1} pixels",resize_notificationUpscaleFailed:"There was an error upscaling your image. Please try again.",resize_splitterAriaLabel:"Use arrow keys to compare the before and after images side by side",resize_splitterTooltip:"Use arrow keys to move the comparison splitter",resize_splitterMovedAriaLive:"Moved splitter to position {0}",resize_splitterCannotMoveFurtherAriaLive:"Cannot move splitter any further"},locales:void 0}))}
,6885:(e,t,n)=>{"use strict";n.d(t,{B_:()=>s,BU:()=>o});var a=n(5959),i=n(358),r=function(){throw new Error("Error: Components must be wrapped in a MarkupProvider")},o={},s=(0,a.createContext)({enableMarkup:!1,Canvas:r,canvasMethods:o,setCanvasMethods:function(){},InkCanvasInteraction:r,inkConfigurations:{Pen:{cssThicknesses:[1,2,3,4,5,6],minSliderValue:1},Highlighter:{cssThicknesses:[1,2,3,4,5,6],minSliderValue:1}},localizationStrings:{markup_markupToolbarPenTooltip:"Pen",markup_markupToolbarPenAriaLabel:"Pen",markup_markupToolbarPenAriaDescription:"Select and drag on image to add an ink stroke. Select this button again to change ink properties.",markup_markupToolbarEraserTooltip:"Remove markup",markup_markupToolbarEraserAriaLabel:"Remove markup",markup_markupToolbarEraserAriaDescription:"Select and drag over markup to remove it.",markup_markupToolbarHighlighterTooltip:"Highlighter",markup_markupToolbarHighlighterAriaLabel:"Highlighter",markup_markupToolbarHighlighterAriaDescription:"Select and drag on image to add an ink stroke. Select this button again to change ink properties.",markup_markupToolbarClearAllMarkupTooltip:"Clear all markup",markup_markupToolbarClearAllMarkupAriaLabel:"Clear all markup",markup_markupToolbarThickness:"Thickness",markup_clearAllMarkupDialogCloseButtonAriaLabel:"Close",markup_clearAllMarkupDialogTitle:"Clear all markup?",markup_clearAllMarkupDialogSubText:"All markup applied to the image will be permanently removed.",markup_clearAllMarkupDialogConfirmButtonText:"Confirm",markup_clearAllMarkupDialogConfirmButtonAriaLabel:"Confirm",markup_clearAllMarkupDialogCancelButtonText:"Cancel",markup_clearAllMarkupDialogCancelButtonAriaLabel:"Cancel",markup_markupToolbarBrushFormatString:"{0}: {1}, {2}: {3}, {4}",markup_markupToolbarBrushFormatWithArrowModeString:"{0}: {1}, {2}: {3}, {4} with {5}",markup_markupToolbarTooltipChangeInkProperties:"Select again to change ink properties.",markup_inkThicknessSliderHeaderLabel:"Stroke Thickness",markup_inkThicknessSliderAriaLabel:"Slider to pick the thickness of the selected brush.",markup_addedInkStrokeAriaLive:"Added an ink stroke to image, {0}, {1}, thickness {2}",markup_removedInkStrokesAriaLive:"Removed {0} out of {1} ink strokes",markup_clearedAllMarkupAriaLive:"Cleared all markup",markup_inkPenThicknessSliderAriaLabel:"Pen thickness.",markup_inkHighlighterThicknessSliderAriaLabel:"Highlighter thickness.",markup_inkThicknessSliderTitle:"Drag on slider or use arrow keys to change stroke thickness",markup_markupToolbarAriaLandmark:"Markup Toolbar",markup_colorDarkYellow:"Dark Yellow",markup_colorLightOrange:"Light Orange",markup_colorOrange:"Orange",markup_colorRed:"Red",markup_colorDarkPurple:"Dark Purple",markup_colorPurple:"Purple",markup_colorMagenta:"Magenta",markup_colorDarkRed:"Dark Red",markup_colorLightBlue:"Light Blue",markup_colorBlue:"Blue",markup_colorDarkBlue:"Dark Blue",markup_colorLightGreen:"Light Green",markup_colorGreen:"Green",markup_colorLightGray:"Light Gray",markup_colorGray:"Gray",markup_colorBlack:"Black",markup_colorTableAriaLabel:"Colors",markup_noArrowButtonText:"No Arrow",markup_straightNoArrowButtonTooltip:"Plain straight line",markup_straightNoArrowButtonAriaLabel:"Create a plain straight line",markup_singleArrowButtonText:"Single Arrow",markup_straightSingleArrowButtonTooltip:"Straight line with arrow",markup_straightSingleArrowButtonAriaLabel:"Create a straight line with an arrow at one end",markup_doubleArrowButtonText:"Double Arrow",markup_straightDoubleArrowButtonTooltip:"Straight Line with double arrows",markup_straightDoubleArrowButtonAriaLabel:"Create a straight line with arrows at both ends",markup_freehandNoArrowButtonTooltip:"Plain freehand line",markup_freehandNoArrowButtonAriaLabel:"Create a plain line by freehand",markup_freehandSingleArrowButtonTooltip:"Freehand line with arrow",markup_freehandSingleArrowButtonAriaLabel:"Create a freehand line with an arrow at one end",markup_freehandDoubleArrowButtonTooltip:"Freehand Line with double arrows",markup_freehandDoubleArrowButtonAriaLabel:"Create a freehand line with arrows at both ends",markup_markupToolbarNoArrowTip:"no arrow",markup_markupToolbarSingleArrowTip:"arrow end",markup_markupToolbarDoubleArrowTip:"double arrow ends",markup_strokeShapeCalloutHeaderText:"Straight line",markup_strokeShapeCalloutMainText:"Activate and draw straight-line fast by holding Shift while left mouse click and drag.",markup_strokeShapeToastText:"Hold at end of a stroke to convert into a straight line.",markup_freehandLine:"Freehand line",markup_straightLine:"Straight line",markup_textboxDefaultContent:"Type something",markup_textBoxInvalidInputTypeErrorMessage:"This is not a valid number.",markup_textBoxInvalidInputRangeErrorMessage:"The number must be between {0} and {1}.",markup_panelLabel:"Markup"},scriptsToLoadJSBundles:[],markupToolsConfigurations:i.s,getMarkupToolbarPosition:function(){return"Bottom"},markupToolbarStyles:void 0,enableStraightLineMarkup:!1,enableArrowhead:!1,showWetCanvas:!1,setShowWetCanvas:function(){},wetCanvasIsReady:!1,setWetCanvasIsReady:function(){},onClearAllMarkupConfirmationDialog:void 0,isStrokeShapeCalloutEnabled:!1,enableMarkupKeyboarding:!1})}
,7933:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var a=(0,n(5959).createContext)({onLinkClicked:function(e){throw new Error("OpenLinkProvider not found")}})}
,1908:(e,t,n)=>{"use strict";n.d(t,{X:()=>s,A:()=>o});var a=n(5959),i=n.n(a),r=function(){function e(){this._needsRender=!1,this._isRendering=!1,this._renderers=new Map}return e.prototype.register=function(e,t,n){this._renderers.set(e,{func:t,zIndex:n}),this._needsRender=!0},e.prototype.unregister=function(e){this._renderers.delete(e),this._needsRender=!0},e.prototype.requestRender=function(){this._needsRender=!0},e.prototype.startRendering=function(){this._isRendering||(this._isRendering=!0,this._renderNextFrame())},e.prototype.stopRendering=function(){this._isRendering=!1},e.prototype.renderNow=function(){this._render()},e.prototype._render=function(){var e=[];this._renderers.forEach(function(t){e.push(t)}),e.sort(function(e,t){return e.zIndex-t.zIndex}),e.forEach(function(e){return e.func()})},e.prototype._renderNextFrame=function(){var e=this;this._isRendering&&(this._needsRender&&(this._render(),this._needsRender=!1),window.requestAnimationFrame(function(){e._renderNextFrame()}))},e}(),o=(0,a.createContext)({renderList:new r}),s=i().memo(function(e){var t=(0,a.useMemo)(function(){return{renderList:new r}},[]);return(0,a.useEffect)(function(){return t.renderList.startRendering(),function(){t.renderList.stopRendering()}},[t]),i().createElement(o.Provider,{value:t},e.children)})}
,1519:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var a=(0,n(5959).createContext)({imageCreationExtensionState:"Unavailable",onDownloadImageCreationExtension:function(){},doesImageContainFaces:void 0,stylizerPivotTeachingTipState:"alreadyShown",onStylizerPivotTeachingTipDismissed:function(){},setStylizerPivotTeachingTipState:function(e){}})}
,7112:(e,t,n)=>{"use strict";n.d(t,{F:()=>c,t:()=>l});var a=n(5959),i=n.n(a),r=function(){function e(e){this._algorithmsById=new Map,this._algorithmUiSettingsByAlgorithmId=new Map,this._errorToUserFacingMessageConvertersByAlgorithmId=new Map,this._texturePatchContentMonitor=e}return e.prototype.register=function(e){this._algorithmsById.set(e.id,e),e.onRegister&&e.onRegister(this._texturePatchContentMonitor)},e.prototype.ensureRegistered=function(e){this._algorithmsById.has(e.id)||this.register(e)},e.prototype.registerUisForAlgorithm=function(e,t){t.forEach(function(e){if(!e.uiComponent.displayName)throw new Error("Algorithm uiComponents must have a displayName")}),this._algorithmUiSettingsByAlgorithmId.set(e,t)},e.prototype.registerErrorToUserFacingMessageConverterForAlgorithmId=function(e,t){this._errorToUserFacingMessageConvertersByAlgorithmId.set(e,t)},e.prototype.setDefaultAlgorithm=function(e){this._defaultAlgorithmId=e},e.prototype.getDefaultTexturePatchAlgorithmParameters=function(){if(void 0===this._defaultAlgorithmId)throw new Error("No default algorithm registered! call setDefaultAlgorithm first.");return this.getDefaultParamsForAlgorithmId(this._defaultAlgorithmId)},e.prototype.getProcessorFunctionForAlgorithm=function(e){return this.getAlgorithmOrThrow(e).texturePatchProcessorFunction},e.prototype.getDefaultParamsForAlgorithmId=function(e){return this.getAlgorithmOrThrow({algorithmId:e}).getDefaultParams()},e.prototype.getConfigurationUiForComponentName=function(e){return this.getAlgorithmUis().find(function(t){return t.uiComponent.displayName===e})},e.prototype.getAlgorithmIdForUiComponentName=function(e){var t=void 0;if(this._algorithmUiSettingsByAlgorithmId.forEach(function(n,a){n.find(function(t){return t.uiComponent.displayName===e})&&(t=a)}),!t)throw new Error("No algorithm found for uiComponentName: "+e);return t},e.prototype.canExecuteAlgorithm=function(e){var t=this.getAlgorithmOrThrow(e);return!t.canExecuteWithParams||t.canExecuteWithParams(e)},e.prototype.getConfigurationUisForAlgorithm=function(e){return this._algorithmUiSettingsByAlgorithmId.get(e.algorithmId)},e.prototype.getRegisteredAlgorithmIds=function(){return Array.from(this._algorithmsById.keys())},e.prototype.getAlgorithmUis=function(){var e=this,t=[];return this.getRegisteredAlgorithmIds().forEach(function(n){var a=e._algorithmsById.get(n);if(!a)throw new Error("No algorithm found for id: "+n);var i=e.getConfigurationUisForAlgorithm(e.getDefaultParamsForAlgorithmId(a.id));i&&t.push.apply(t,i)}),t},e.prototype.getErrorToUserFacingMessageConverterForAlgorithmId=function(e){return this._errorToUserFacingMessageConvertersByAlgorithmId.get(e)},e.prototype.clearRegisteredUis=function(){this._algorithmUiSettingsByAlgorithmId.clear(),this._defaultAlgorithmId=void 0},e.prototype.getAlgorithmOrThrow=function(e){var t=this._algorithmsById.get(e.algorithmId);if(t)return t;throw new Error("No algorithm found for id: "+e.algorithmId)},e}(),o=["spotFix","magicErase","backgroundSegmentation","stylizer","objectSegmentation","depth"],s=n(4556),c=(0,a.createContext)({getTexturePatchAlgorithmRegistry:function(){throw new Error("getTexturePatchAlgorithmRegistry not implemented")},getAlgorithmForRole:function(){throw new Error("getAlgorithmForRoleOrDefault not implemented")}}),d={spotFix:null,magicErase:null,backgroundSegmentation:null,stylizer:null,objectSegmentation:null,depth:null},l=i().memo(function(e){var t=e.texturePatchAlgorithmsByRole,n=void 0===t?d:t,l=e.children,u=(0,s.C)(),f=(0,a.useMemo)(function(){var e=new r(u);return function(e,t){o.forEach(function(n){var a=t[n];a&&e.ensureRegistered(a)})}(e,n),{getTexturePatchAlgorithmRegistry:function(){return e},getAlgorithmForRole:function(e){return n[e]}}},[n,u]);return i().createElement(c.Provider,{value:f},l)})}
,8662:(e,t,n)=>{"use strict";n.d(t,{O:()=>c,K:()=>d});var a=n(5959),i=n.n(a),r=n(2891),o=n(8638),s=function(){function e(){var e=this;this.layerToCallbackMap=new Map,r.N.forEach(function(t){e.layerToCallbackMap.set(t,new o.J)})}return e.prototype.cleanUp=function(){this.layerToCallbackMap.forEach(function(e){e.removeAllListeners()})},e.prototype.subscribeToHashChanges=function(e,t){var n=this.layerToCallbackMap.get(e);n&&n.addListener(t)},e.prototype.unsubscribeFromHashChanges=function(e,t){var n=this.layerToCallbackMap.get(e);n&&n.removeListener(t)},e.prototype.notifyContentHashChanged=function(e,t,n,a){var i=this.layerToCallbackMap.get(e);i&&i.notifyListeners({contentHash:t,image:n,textureManager:a})},e}(),c=(0,a.createContext)({getTexturePatchContentMonitor:function(){throw new Error("getTexturePatchContentMonitor not implemented")}}),d=i().memo(function(e){var t=e.children,n=(0,a.useMemo)(function(){var e=new s;return{getTexturePatchContentMonitor:function(){return e}}},[]);return i().createElement(c.Provider,{value:n},t)})}
,1200:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var a=n(5959),i=n(5384),r=n(2397);function o(){var e=(0,a.useContext)(i.Z).image;return(0,r.hc)(e.main)}}
,7515:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var a=n(5959),i=n(3665);function r(){var e=(0,a.useContext)(i.u).enabledRetouchModes;return 1===e.length&&"spotFix"===e[0]}}
,697:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var a=n(5959),i=n(7112);function r(e){var t=(0,a.useContext)(i.F).getAlgorithmForRole(e);if(null===t)throw new Error("".concat(e," algorithm is missing"));return t}}
,7123:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var a=n(5959),i=n(7112);function r(){return(0,a.useContext)(i.F).getTexturePatchAlgorithmRegistry()}}
,4556:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var a=n(5959),i=n(8662);function r(){return(0,a.useContext)(i.O).getTexturePatchContentMonitor()}}
,9758:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,y:()=>c});var a=n(2327),i=n(8114),r=n(4996),o=n(6527),s="SecondaryOverlayShader",c=function(){function e(){this._overlayAlpha=1}return e.prototype.setOverlayAlpha=function(e){this._overlayAlpha=e},e.prototype.getOverlayAlpha=function(){return this._overlayAlpha},e.prototype.getName=function(){return s},e.prototype.getUniformNames=function(e){return[e(r.k.overlayTextureAlpha)]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return e(" //SecondaryOverlay effect---\n    ".concat((0,a.A)("overlay"),"\n    uniform float ").concat(r.k.overlayTextureAlpha,";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=r.k.overlayTextureAlpha,n=(0,o.B)("overlay");return e("//SecondaryOverlay effect---\n    ".concat((0,i.J)("overlay"),"\n    {\n      if(").concat(t," > 0.){\n        vec4 overlayColor = ").concat(n,";\n        if(overlayColor.a > 0.){\n          float overlayBlendedAlpha = overlayColor.a + gl_FragColor.a * (1. - overlayColor.a);\n          vec4 overlayBlendedColor = vec4((overlayColor.rgb * overlayColor.a + gl_FragColor.rgb * gl_FragColor.a * (1. - overlayColor.a)) / overlayBlendedAlpha, overlayBlendedAlpha);\n          gl_FragColor = mix(gl_FragColor, overlayBlendedColor, ").concat(t,"*overlayTextureAlphaOverride);\n        }\n      }\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(r.k.overlayTextureAlpha),this._overlayAlpha)},e}()}
,4996:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var a={mainTextureSampler:"textureSampler",singleTileMainTextureSampler:"textureSamplerSingleTile",singleTilePreSharpenTextureSampler:"textureSamplerSingleTilePreSharpen",singleTileTempTextureSampler:"textureSamplerSingleTileTemp",singleTileBackgroundTextureSampler:"textureSamplerSingleTileBackground",uv:"uv",singleTileTextureUvTransform:"usingleTileTextureUvTransform",screenPixelPos:"uScreenPixelPos",transform:"uTransform",transformInverse:"uTransformInverse",renderTargetSize:"uRenderTargetSize",colorOverrideLevel:"uColorOverrideLevel",colorOverride:"uColorOverride",overlayTextureSampler:"secondaryOverlayTextureSampler",overlayTextureAlpha:"uOverlayTextureAlpha",backgroundMaskTextureSampler:"uBackgroundMaskTextureSampler",eraseMaskTextureSampler:"uEraseMaskTextureSampler",depthMapTextureSampler:"uDepthMapTextureSampler",isRenderingForExport:"uIsRenderingForExport",originalTextureSampler:"originalTextureSampler",subTexturePixelSize:"uSubTexturePixelSize",fullTexturePixelSize:"uFullTexturePixelSize",objectSegmentationPreviewTextureSampler:"objectSegmentationPreviewTextureSampler",sharpness:"uSharpness"}}
,2327:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(8277);function i(e){return"\n#ifndef ".concat((0,a.T)(e),"\n  #define ").concat((0,a.T)(e),"\n#endif\n")}}
,8114:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var a=n(6527),i=n(8277),r=n(3785),o=n(4996),s=n(6038);function c(e,t,n){var c=o.k.uv,d="".concat(e.toUpperCase(),"_TEXTURE_VALUE_DEFINED"),l=(0,s.S)(e,!!t),u=n?"sampleTextureOrSampleFakeMipMaps":"texture2D";return"\n#ifdef ".concat((0,i.T)(e),"\n  #ifndef ").concat(d,"\n    ").concat(l?"float":"vec4"," ").concat((0,a.B)(e)," = ").concat(u,"(").concat((0,r.X)(e),", ").concat(c,".xy)").concat(l?".r":"",";\n  #endif\n#else\n  #ifndef ").concat(d,"\n  ").concat(l?"float":"vec4"," ").concat((0,a.B)(e)," = ").concat(l?"1.":"vec4(1.)",";\n  #endif\n#endif\n#define ").concat(d,"\n")}}
,8277:(e,t,n)=>{"use strict";n.d(t,{T:()=>r});var a=n(9051),i={main:a.gt,singleTileMain:a.oc,singleTilePreSharpen:a.ic,singleTileTemp:a.jN,singleTileBackground:a.wb,overlay:a.Ue,backgroundMask:a.mX,eraseMask:a.Th,depth:a.mx,original:a.nT,objectSegmentationPreview:a.Jz};function r(e){return i[e]}}
,3785:(e,t,n)=>{"use strict";n.d(t,{X:()=>r});var a=n(4996),i={main:a.k.mainTextureSampler,singleTileMain:a.k.singleTileMainTextureSampler,singleTilePreSharpen:a.k.singleTilePreSharpenTextureSampler,singleTileTemp:a.k.singleTileTempTextureSampler,singleTileBackground:a.k.singleTileBackgroundTextureSampler,overlay:a.k.overlayTextureSampler,backgroundMask:a.k.backgroundMaskTextureSampler,eraseMask:a.k.eraseMaskTextureSampler,depth:a.k.depthMapTextureSampler,original:a.k.originalTextureSampler,objectSegmentationPreview:a.k.objectSegmentationPreviewTextureSampler};function r(e){return i[e]}}
,6527:(e,t,n)=>{"use strict";function a(e){return e+"TextureColor"}n.d(t,{B:()=>a})}
,6038:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});var a=n(8156),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},r=(0,a.C)(!1),o=i(i({},(0,a.C)(!1)),{backgroundMask:!0,eraseMask:!0,depth:!0,objectSegmentationPreview:!0});function s(e,t){return t?o[e]:r[e]}}
,9051:(e,t,n)=>{"use strict";n.d(t,{DO:()=>p,Jz:()=>_,Th:()=>l,Ue:()=>c,gt:()=>a,ic:()=>i,jN:()=>o,mX:()=>d,mx:()=>u,nT:()=>f,oc:()=>r,v$:()=>m,wb:()=>s});var a="ENABLE_MAIN_TEXTURE",i="ENABLE_SINGLE_TILE_PRE_SHARPEN_TEXTURE",r="ENABLE_SINGLE_TILE_MAIN_TEXTURE",o="ENABLE_SINGLE_TILE_TEMP_TEXTURE",s="ENABLE_SINGLE_TILE_BACKGROUND_TEXTURE",c="ENABLE_OVERLAY_LAYER",d="ENABLE_BACKGROUND_MASK_LAYER",l="ENABLE_ERASE_MASK_LAYER",u="ENABLE_DEPTH_LAYER",f="ENABLE_ORIGINAL_LAYER",p="DISABLE_INITIAL_MAIN_TEXTURE_SAMPLING",m="ENABLE_FAKE_MIP_MAPS_EFFECT",_="ENABLE_SEGMENTATION_PREVIEW_LAYER"}
,7799:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var a=n(5959),i=n(4409);function r(){var e=(0,a.useContext)(i.M).engine;return 2===(null==e?void 0:e.webGLVersion)}}
,5468:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var a=n(5959),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},r={onConfirmInDialog:function(){},onCancelInDialog:function(){},isHavanaConfirmDialogVisible:!1},o=function(e){var t=(0,a.useState)(r),n=t[0],o=t[1],s=function(){o(r)},c=(0,a.useCallback)(function(){return e?e():new Promise(function(e,t){o({onConfirmInDialog:function(){e("confirmed"),s()},onCancelInDialog:function(){e("canceled"),s()},isHavanaConfirmDialogVisible:!0})})},[e]);return i(i({},n),{showConfirmationDialog:c})}}
,2115:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var a=n(5959),i=function(e){var t=e.enterCondition,n=e.exitCondition,i=e.reverseEnterCondition,r=e.reverseExitCondition,o=e.elmBeforeEnter,s=e.elmAfterEnter,c=e.elmBeforeExit,d=e.elmAfterExit,l=(0,a.useRef)(null);(0,a.useEffect)(function(){var e=function(e){var a;t&&"Tab"===e.key&&!1===e.shiftKey&&null!==document.activeElement?(e.preventDefault(),l.current=document.activeElement,null==s||s.focus()):n&&"Tab"===e.key&&!1===e.shiftKey&&document.activeElement===c?(e.preventDefault(),d&&d.focus()):i&&"Tab"===e.key&&!0===e.shiftKey&&document.activeElement===d?(e.preventDefault(),null==c||c.focus()):r&&"Tab"===e.key&&!0===e.shiftKey&&document.activeElement===s&&(e.preventDefault(),l.current?null===(a=l.current)||void 0===a||a.focus():null==o||o.focus())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[o,s,d,c,t,n,i,r])}}
,8426:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var a=n(5959);function i(){return(0,a.useReducer)(function(e){return e+1},0)[1]}}
,1042:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var a=n(5959),i=n(697);function r(e,t){var n=(0,i.V)(t).id;return(0,a.useMemo)(function(){return e.some(function(e){return e.algorithmParameters.algorithmId===n})},[e,n])}}
,8028:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var a=n(5959),i=n(697);function r(e){var t=(0,i.V)("magicErase").id,n=(0,i.V)("spotFix").id;return(0,a.useMemo)(function(){return e.some(function(e){var a=e.algorithmParameters.algorithmId;return a===t||a===n})},[e,t,n])}}
,9345:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var a=n(5959),i=n(9680);function r(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r="center");var o=(0,a.useState)(e.indexOf(t)),s=o[0],c=o[1],d=(0,a.useCallback)(function(t){var a=0,o=n>0?Math.ceil(e.length/n):1,d=n>0?Math.ceil((s+1)/n):1,l=e.length-n*(o-1),u=Math.floor((n-l)/2);switch(t.key){case"ArrowLeft":a=-1;break;case"ArrowRight":a=1;break;case"ArrowDown":"center"===r&&d===o-1&&l<n?(a=n-u,n>0&&s%n<u&&(a+=u-s%n)):a=n;break;case"ArrowUp":a="center"===r&&d===o&&l<n?-n+u:-n;break;default:a=0}a&&(t.preventDefault(),c((0,i.q)(s+a,0,e.length-1)))},[s,e,n,r]);return{keyboardFocusedIndex:s,setKeyboardFocusedIndex:c,onKeyDown:d}}}
,1780:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var a=n(5959),i=function(e){var t=e.numRepeatsToSwitchToFast,n=e.keyboardEventTarget,i=e.handleKeyboardDown,r=e.isFastDirectionKey,o=e.handleKeyboardUp,s=(0,a.useRef)(new Map);(0,a.useEffect)(function(){if(n){var e=function(e){if(e instanceof KeyboardEvent){var n=s.current.get(e.key)||0;s.current.set(e.key,n),r(e)?i(e,"SuperFast"):n<t?(s.current.set(e.key,n+1),i(e,"Slow")):i(e,"Fast")}},a=function(e){e instanceof KeyboardEvent&&(s.current.set(e.key,0),null==o||o(e))};return n.addEventListener("keydown",e),n.addEventListener("keyup",a),function(){n.removeEventListener("keydown",e),n.removeEventListener("keyup",a)}}},[n,s,t,r,i,o])}}
,1284:(e,t,n)=>{"use strict";n.d(t,{H:()=>c});var a=n(5959),i=n(5384),r=n(2397),o=n(4409),s=n(8426);function c(e){var t=(0,a.useContext)(o.M).textureManager,n=(0,a.useContext)(i.Z).image,c=n&&(0,r.l_)(n)?n[e]:null,d=c&&(null==t?void 0:t.getAlreadyLoadedTexture(c)),l=(0,s.V)();return(0,a.useEffect)(function(){if(c&&!d&&t){var e=function(){l()},n=t.getTextureId(c);return t.registerTextureLoadedCallback(n,e),function(){t.unRegisterTextureLoadedCallback(n,e)}}},[c,d,t,e,l]),!!d}}
,7400:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});var a=n(5959);function i(e,t,n){(0,a.useEffect)(function(){var a=function(a){(null==t?void 0:t.includes(a.target))||(null==n?void 0:n.some(function(e){return e.contains(a.target)}))||e()};return document.addEventListener("keydown",a),document.addEventListener("pointerdown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("keydown",a),document.removeEventListener("pointerdown",a),document.removeEventListener("touchstart",a)}},[e,t,n])}}
,450:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var a=n(5959);function i(e){var t=(0,a.useRef)(e);t.current=e,(0,a.useEffect)(function(){return function(){return t.current()}},[])}}
,9006:(e,t,n)=>{"use strict";n.d(t,{R:()=>p});var a=n(5959),i=n(3440),r=n(8384),o=n(7291);function s(e){return"touch"===e.pointerType||(0,i.eK)(e,i.L8)}function c(e){return(0,i.eK)(e,i.wy)}function d(e){return(0,i.eK)(e,i.kn)}function l(e,t,n,a,i,r,o,s,c,d){var l,f;f=function(){return u(e,t,n,i,r,o,s,c,d)},(l=a).current&&window.cancelAnimationFrame(l.current),l.current=window.requestAnimationFrame(f)}function u(e,t,n,a,i,s,c,d,l){a({pointerPhysicalPixelPos:(0,o.s)({x:e.clientX,y:e.clientY},n,t),isPrimaryButtonDownOrTouchDown:i,isMiddleButtonDown:s,isRightButtonDown:c,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,isTouch:"touch"===d,pointerId:l,inputType:(0,r.M3)(e)})}var f=function(){},p=function(e){var t=e.htmlElement,n=e.cssToPhysicalPixelRatio,i=void 0===n?1:n,r=e.onPointerDown,o=void 0===r?f:r,p=e.onPointerMove,m=void 0===p?f:p,_=e.onPointerUp,h=void 0===_?f:_,b=e.onPointerEnter,g=void 0===b?f:b,v=e.onPointerLeave,y=void 0===v?f:v,S=e.onClick,D=void 0===S?f:S,I=e.onUnmount,x=e.isPointerInteractionEnabled,C=void 0===x||x,O=(0,a.useRef)(),w=(0,a.useRef)(new Set),E=(0,a.useRef)();(0,a.useEffect)(function(){if(t){var e=function(e){try{w.current.delete(e),t.releasePointerCapture(e)}catch(e){}},n=function(e){return e.isPrimary||"touch"===e.pointerType},a=function(e){if(n(e)){var a=s(e);s(e)&&(r=e.pointerId,t.setPointerCapture(r),w.current.add(r)),u(e,i,t,o,a,c(e),d(e),e.pointerType,e.pointerId)}var r},r=function(e){n(e)&&l(e,i,t,O,m,s(e),c(e),d(e),e.pointerType,e.pointerId)},f=function(a,r){n(a)&&(r||(e(a.pointerId),u(a,i,t,D,!1,!1,!1,a.pointerType,a.pointerId)),u(a,i,t,h,!1,!1,!1,a.pointerType,a.pointerId))},p=function(e){f(e,!1)},_=function(e){f(e,!0)},b=function(e){e.isPrimary&&"touch"!==e.pointerType&&l(e,i,t,E,g,s(e),c(e),d(e),e.pointerType,e.pointerId)},v=function(e){e.isPrimary&&"touch"!==e.pointerType&&l(e,i,t,E,y,s(e),c(e),d(e),e.pointerType,e.pointerId)};if(!C)return;return t.addEventListener("pointerdown",a),t.addEventListener("pointermove",r),t.addEventListener("pointerup",p),t.addEventListener("lostpointercapture",_),t.addEventListener("pointerenter",b),t.addEventListener("pointerleave",v),function(){t.removeEventListener("pointerdown",a),t.removeEventListener("pointermove",r),t.removeEventListener("pointerup",p),t.removeEventListener("lostpointercapture",_),t.removeEventListener("pointerenter",b),t.removeEventListener("pointerleave",v),function(){for(var t=0,n=Array.from(w.current);t<n.length;t++){var a=n[t];e(a)}}(),null==I||I()}}},[o,m,h,g,y,D,t,i,C,I])}}
,1767:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=n(5959);function i(e,t,n){(0,a.useEffect)(function(){var a=n||window.ResizeObserver;if(a&&e){var i=new a(t);return i.observe(e),function(){i.disconnect()}}},[n,e,t])}}
,1109:(e,t,n)=>{"use strict";n.d(t,{w:()=>m});var a=n(5959),i=n.n(a),r=n(9450);(0,n(8424).loadStyles)([{rawString:".imageTileContainer_0dda01c9{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:8px;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}.imageTileContainer_0dda01c9 .tile_0dda01c9{position:relative;background-color:transparent;background-size:cover;background-repeat:no-repeat;background-position:center;height:100%;width:100%;border-radius:3px;margin:8px 0}.imageTileContainer_0dda01c9 .tile_0dda01c9 .background_0dda01c9{position:absolute;top:0;height:100%;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:0;font-size:23px;border-radius:3px}.imageTileContainer_0dda01c9 .tile_0dda01c9 .ms-Tile-aboveNameplate{margin:0}.imageTileContainer_0dda01c9 .tile_0dda01c9 .ms-Tile-aboveNameplate>*{-webkit-box-pack:inherit;-ms-flex-pack:inherit;justify-content:inherit;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.imageTileContainer_0dda01c9 .tileName_0dda01c9{font-size:12px;line-height:14px;text-align:center;word-break:break-word;word-wrap:break-word;pointer-events:auto}.tileIcon_0dda01c9{fill:white;width:24px;height:24px}.ms-Fabric--isFocusHidden .imageTileContainer_0dda01c9 .ms-Tile-link{outline:0;height:100%}.ms-Fabric--isFocusVisible .imageTileContainer_0dda01c9 .ms-Tile-link:focus{outline-color:inherit;outline-width:1px;outline-style:solid}"}]);var o=n(5325),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(e){return{width:"100%",height:"100%",backgroundColor:e.palette.neutralQuaternary,activeBackgroundOverride:{opacity:1}}}function d(e,t,n,a){return s(s(s(s({},a),e&&(null==a?void 0:a.highlightImageOverride)),t&&(null==a?void 0:a.activeImageOverride)),n&&(null==a?void 0:a.disabledImageOverride))}var l=n(2744),u=n(8214),f=n(2141),p=function(){return p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},m=(0,a.forwardRef)(function(e,t){var n=e.image,s=e.iconName,m=e.tileSize,_=e.imageTileStyles,h=e.name,b=e.ariaLabel,g=e.ariaSelected,v=e.isHighlighted,y=e.isActive,S=e.isDisabled,D=void 0!==S&&S,I=e.role,x=void 0===I?"option":I,C=e.tabIndex,O=void 0===C?0:C,w=e.tileWrapperRef,E=e.onClick,A=e.onKeyDown,L=e.onFocus,k=e.onBlur,M=e.title,P=e.onRenderForeground,T=e.showTooltipOnTileDisplayText,U=void 0!==T&&T,F=(0,l.D)(),H=(0,a.useState)(null),R=H[0],N=H[1],B=(0,a.useCallback)(function(e){E(h,e)},[h,E]);(0,a.useLayoutEffect)(function(){R&&(R.tabIndex=O,R.setAttribute("role",x),R.setAttribute("aria-selected",String(g)))},[g,R,x,O]),(0,a.useImperativeHandle)(t,function(){return{focus:function(){return null==R?void 0:R.focus()}}},[R]);var j=(0,a.useMemo)(function(){return i().createElement(i().Fragment,null,i().createElement("div",{className:"background_0dda01c9",style:(0,o.Ze)(v,y,D,p(p({},c(F)),null==_?void 0:_.background))},i().createElement(u.FontIcon,{iconName:s,className:"tileIcon_0dda01c9",style:null==_?void 0:_.icon})),!n&&i().createElement(f.Shimmer,{theme:F,shimmerElements:[{type:f.ShimmerElementType.line,width:m,height:m}]}))},[v,y,D,F,_,s,n,m]),V=(0,a.useMemo)(function(){return i().createElement("span",{className:"tileName_0dda01c9",style:(0,o.N2)(y,D,null==_?void 0:_.name),"aria-hidden":"true",onClick:D?void 0:B,title:U?M:void 0},h)},[null==_?void 0:_.name,y,D,h,B,U,M]);return i().createElement("div",{className:(0,f.mergeStyles)("imageTileContainer_0dda01c9",null==_?void 0:_.containerClassName),style:null==_?void 0:_.container,ref:w,"data-test-id":n?"image-tile-image-loaded":"image-tile-image-loading"},i().createElement(r.kA,{style:p({backgroundImage:"url(".concat(n,")"),outlineColor:F.palette.neutralDark,width:m,height:m},d(v,y,D,null==_?void 0:_.image)),className:"tile_0dda01c9",foreground:P,background:j,ariaLabel:b,linkRef:N,onKeyDown:A,onFocus:L,onBlur:k,"data-test-id":"imageTile-".concat(h),onClick:D?void 0:B,title:M}),V)})}
,3989:(e,t,n)=>{"use strict";n.d(t,{r:()=>m});var a=n(8633),i=n(5959),r=n.n(i),o=n(9006),s=n(4729),c=n(4521),d=n(1451),l=n(9573),u=n(1780),f=n(2744),p=n(7240),m=(0,i.forwardRef)(function(e,t){var n=e.cursor,m=e.cssToPhysicalPixelRatio,_=e.onPointerDown,h=e.onPointerMove,b=e.onPointerUp,g=e.onPointerEnter,v=e.onPointerLeave,y=e.onClick,S=e.onWheel,D=e.onTouchDown,I=e.onTouchMove,x=e.onTouchUp,C=e.onDoubleTap,O=e.onUnmount,w=e.panView,E=e.panViewTopLeftCornerFromCropOrigin,A=e.setAriaAnnouncementScenario,L=e.isCanvasHidden,k=void 0!==L&&L,M=e.title,P=e.tabIndex,T=e.role,U=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["cursor","cssToPhysicalPixelRatio","onPointerDown","onPointerMove","onPointerUp","onPointerEnter","onPointerLeave","onClick","onWheel","onTouchDown","onTouchMove","onTouchUp","onDoubleTap","onUnmount","panView","panViewTopLeftCornerFromCropOrigin","setAriaAnnouncementScenario","isCanvasHidden","title","tabIndex","role"]),F=(0,i.useState)(null),H=F[0],R=F[1],N=(0,f.D)();return(0,i.useEffect)(function(){(0,p.n)(t,H)},[t,H]),(0,o.R)({htmlElement:H,cssToPhysicalPixelRatio:m,onPointerDown:_,onPointerMove:h,onPointerUp:b,onPointerEnter:g,onPointerLeave:v,onClick:y,onUnmount:O}),(0,c.y)(m,H,D,I,x,C),(0,s.O)(m,H,S),(0,d.s)(H),function(e,t,n,a){var r=(0,i.useCallback)(function(e,i){if(!e.ctrlKey&&(0,l.qb)(e)){e.stopPropagation(),e.preventDefault();var r=(0,l.SG)(e.key);t({direction:r,adjustmentCanvasShiftingValue:(0,l.DC)(i)}),a({type:"PanView",panViewTopLeftCornerFromCropOrigin:n})}},[t,a,n]);(0,u.V)({numRepeatsToSwitchToFast:l.QD,keyboardEventTarget:e,handleKeyboardDown:r,isFastDirectionKey:l.K8})}(H,w,E,A),r().createElement("div",{ref:R,className:a.A.nonCropUI,style:{cursor:n,outlineColor:N.palette.neutralDark},"data-is-focusable":!0,title:M,role:null!=T?T:"img",tabIndex:null!=P?P:0,"aria-label":U["aria-label"],"data-test-id":"nonCrop_canvas","aria-hidden":k})});m.displayName="PanZoomCanvasUIInteraction"}
,4661:(e,t,n)=>{"use strict";n.d(t,{R:()=>p,k:()=>m});var a=n(5959),i=n(252),r=n(1519),o=n(2744),s=n(2141),c=n(8712),d=n(2978),l=n(1843),u=n(2115),f=n(7933),p="https://go.microsoft.com/fwlink/p/?LinkId=2272738&ocid=cmm526y85hu",m=function(e,t,n){var m,_,h=(0,a.useContext)(r.U),b=h.stylizerPivotTeachingTipState,g=h.onStylizerPivotTeachingTipDismissed,v=h.setStylizerPivotTeachingTipState,y=(0,a.useContext)(f.G).onLinkClicked,S=(0,a.useMemo)(function(){return e===i.vs},[e]),D=a.useRef(null),I=a.useRef(null);(0,u.U)({enterCondition:S&&!!(null==n?void 0:n.contains(document.activeElement))&&"showing"===b,exitCondition:S&&"showing"===b,reverseEnterCondition:S&&"showing"===b,reverseExitCondition:S&&"showing"===b,elmBeforeEnter:t,elmAfterEnter:null!==(m=D.current)&&void 0!==m?m:void 0,elmBeforeExit:null!==(_=I.current)&&void 0!==_?_:void 0,elmAfterExit:document.querySelector('[data-test-id="save-options"]')});var x=(0,o.D)(),C=(0,a.useMemo)(function(){return(0,l.k)(x)},[x]),O=(0,a.useContext)(d.x).strings,w=a.useCallback(function(){g()},[g]),E=(0,a.useMemo)(function(){return S?a.createElement(c.O,{calloutHeaderText:O.faceDetectionTeachingTip_title,calloutMainText:O.faceDetectionTeachingTip_mainText,target:t,styles:C,calloutVisibilityState:b,setCalloutVisibilityState:v,directionalHint:s.DirectionalHint.topAutoEdge,showCalloutOnMount:!1,role:"dialog",gapSpace:5,onDismiss:w,showDismissButton:!0,dismissButtonPosition:"top",dismissButtonRef:D,setInitialFocus:!0,dismissButtonText:O.faceDetectionTeachingTip_DismissLinkText,customCalloutChild:a.createElement(s.Stack,{style:{marginTop:"16px"},tokens:{childrenGap:16}},a.createElement(s.Link,{ref:I,onClick:function(){return y(p)},role:"link",styles:{root:{"&:focus-visible":{outline:"auto"}}}},O.faceDetectionTeachingTip_LearnMoreLinkText))}):null},[S,O.faceDetectionTeachingTip_title,O.faceDetectionTeachingTip_mainText,O.faceDetectionTeachingTip_LearnMoreLinkText,O.faceDetectionTeachingTip_DismissLinkText,t,C,b,v,w,y]);return{shouldShowTeachingTip:S,stylizerTeachingTip:E}}}
,8633:(e,t,n)=>{"use strict";n.d(t,{A:()=>a}),(0,n(8424).loadStyles)([{rawString:".ms-Fabric--isFocusVisible .nonCropUI_cef8bc5b:focus{visibility:visible;outline-width:3px;outline-style:solid;outline-offset:-3px}.ms-Fabric--isFocusHidden .nonCropUI_cef8bc5b{outline:0}.nonCropUI_cef8bc5b{position:absolute;width:100%;height:100%;top:0}"}]);const a={"ms-Fabric--isFocusVisible":"ms-Fabric--isFocusVisible",nonCropUI:"nonCropUI_cef8bc5b","ms-Fabric--isFocusHidden":"ms-Fabric--isFocusHidden"}}
,8712:(e,t,n)=>{"use strict";n.d(t,{O:()=>d});var a=n(2141),i=n(2744),r=n(547),o=n(5959),s=n.n(o),c=n(9752),d=(0,o.memo)(function(e){var t=e.calloutVisibilityState,n=e.setCalloutVisibilityState,d=e.target,l=e.styles,u=e.directionalHint,f=void 0===u?a.DirectionalHint.leftTopEdge:u,p=e.calloutHeaderText,m=e.calloutMainText,_=e.gapSpace,h=void 0===_?20:_,b=e.showDismissButton,g=e.dismissButtonPosition,v=void 0===g?"bottom":g,y=e.dismissButtonRef,S=e.showCalloutOnMount,D=void 0===S||S,I=e.dismissButtonText,x=e.dismissButtonAriaLabel,C=e.customCalloutChild,O=e.setCalloutRef,w=e.role,E=e.setInitialFocus,A=e.onDismiss,L=(0,i.D)(),k=(0,a.getRTL)(L);(0,o.useEffect)(function(){"notShown"===t&&d&&D&&n("showing")},[n,t,d,D]);var M=(0,o.useCallback)(function(){n("alreadyShown"),null==A||A()},[n,A]),P=(0,o.useMemo)(function(){return(0,a.mergeStyleSets)(null==l?void 0:l.calloutMain,(0,c.r)(L))},[l,L]);return"showing"===t&&d?s().createElement(a.Callout,{target:d,directionalHint:f,gapSpace:h,backgroundColor:L.palette.neutralLighter,alignTargetEdge:!0,styles:P,ref:O,role:w,setInitialFocus:E},b&&"top"===v&&s().createElement("div",{style:{position:"absolute",right:k?void 0:0,left:k?0:void 0}},s().createElement(a.IconButton,{onClick:M,elementRef:y,iconProps:{iconName:"Cancel"},styles:null==l?void 0:l.calloutDismissIcon,ariaLabel:x,title:I})),s().createElement(r.E,{block:!0,style:null==l?void 0:l.calloutHeader},p),s().createElement(r.E,{block:!0,style:null==l?void 0:l.calloutContent},m),C,b&&"bottom"===v&&s().createElement(a.DefaultButton,{onClick:M,elementRef:y,text:I,styles:null==l?void 0:l.calloutDismissButton,ariaLabel:x})):null})}
,6329:(e,t,n)=>{"use strict";function a(e){return{root:{fontSize:"14px",color:e.palette.themePrimary,"&:hover":{color:e.palette.themePrimary,textDecoration:"underline"},"&:active":{color:e.palette.themePrimary},"&:focus-visible":{outline:"auto"},userSelect:"none"}}}n.d(t,{l:()=>a})}
,786:(e,t,n)=>{"use strict";n.d(t,{YB:()=>d,wf:()=>c});var a=n(5959),i=n.n(a),r=n(8273),o=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},s=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},c=i().createContext(void 0),d=(0,r.Ng)(function(e){return{texturePatches:e.texturePatch.texturePatchInfos,removedTexturePatches:e.texturePatch.removedTexturePatchInfos,texturePatchChoices:e.texturePatch.texturePatchChoices}},{})(function(e){var t=e.shouldCreateSessionCache,r=e.texturePatches,d=e.removedTexturePatches,l=e.texturePatchChoices,u=e.disableTexturePatchIndexedDbStorage,f=e.children,p=(0,a.useState)(void 0),m=p[0],_=p[1];return(0,a.useLayoutEffect)(function(){var e=!0;return!m&&t&&o(void 0,void 0,void 0,function(){var t;return s(this,function(a){switch(a.label){case 0:return[4,n.e(55).then(n.bind(n,3055))];case 1:return[4,(0,a.sent().createTexturePatchCache)(u?1/0:void 0)];case 2:return t=a.sent(),e&&_(t),[2]}})}),function(){e=!1}},[m,t,u]),(0,a.useEffect)(function(){var e,t;if(m){var n=function(e){return e.map(function(e){return e.idValue})},a=n(r).concat(n(d),null!==(t=null===(e=null==l?void 0:l.choices)||void 0===e?void 0:e.map(function(e){return e.idValue}))&&void 0!==t?t:[]);o(void 0,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,m.removeAllBut(a)];case 1:return e.sent(),[2]}})})}},[r,d,l,m]),(0,a.useEffect)(function(){var e=function(){return o(void 0,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,null==m?void 0:m.destroy()];case 1:return e.sent(),[2]}})})};return window.addEventListener("beforeunload",e),function(){e(),window.removeEventListener("beforeunload",e)}},[m]),i().createElement(c.Provider,{value:m},f)})}
,797:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var a=n(5959),i=n(786),r=function(){return(0,a.useContext)(i.wf)}}
,3869:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var a=n(5959),i=n(1767);function r(e,t,n){var r=t||{width:0,height:0},o=(0,a.useState)(r),s=o[0],c=o[1],d=(0,a.useCallback)(function(e){var t=e[0].contentRect,n=t.width,a=t.height;c({width:n,height:a})},[c]);return(0,a.useLayoutEffect)(function(){if(e){var t=e.offsetWidth,n=e.offsetHeight;c({width:t,height:n})}},[e]),(0,i.w)(e,d,n),s}}
,1451:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var a=n(5959);function i(e){(0,a.useEffect)(function(){if(e){var t=function(e){return e.preventDefault(),!1};return e.addEventListener("contextmenu",t),function(){return e.removeEventListener("contextmenu",t)}}},[e])}}
,4729:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var a=n(5959),i=n(7291);function r(e,t,n){(0,a.useEffect)(function(){var a=function(a){if(t){var r=(0,i.s)({x:a.clientX,y:a.clientY},t,e);a.cancelable&&(a.preventDefault(),n&&n({mousePhysicalPixelPos:r,deltaY:a.deltaY,deltaMode:a.deltaMode,ctrlKey:a.ctrlKey}))}};return t&&t.addEventListener("wheel",a,{passive:!1}),function(){t&&t.removeEventListener("wheel",a)}},[t,n,e])}}
,4521:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var a=n(5959),i=n(7291),r=n(4779),o=n.n(r);function s(e,t,n,r,s,c){var d=(0,a.useMemo)(function(){return t?new(o())(t,{recognizers:[[o().Pinch],[o().Tap,{taps:2,event:"doubletap"}]],touchAction:"compute"}):null},[t]);(0,a.useEffect)(function(){if(t&&d){var a=function(a){n&&n({center:(0,i.s)(a.center,t,e),scale:a.scale})},o=function(n){r&&r({center:(0,i.s)(n.center,t,e),scale:n.scale})},l=function(n){s&&s({center:(0,i.s)(n.center,t,e),scale:n.scale})},u=function(n){c&&c({center:(0,i.s)(n.center,t,e),scale:n.scale})};return d.on("pinchstart",a),d.on("pinchmove",o),d.on("pinchend",l),d.on("doubletap",u),function(){d.off("pinchstart",a),d.off("pinchmove",o),d.off("pinchend",l),d.off("doubletap",u)}}},[t,n,r,s,c,e,d])}}
,8055:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var a=n(9758);function i(e){return e.getEffects().find(function(e){return e.getName()===a.A})}}
,7512:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var a=n(8055),i=function(e,t){var n=void 0,i=(0,a.v)(e);return i&&(n=i.getOverlayAlpha(),i.setOverlayAlpha(t)),function(){i&&i.setOverlayAlpha(null!=n?n:0)}}}
,6918:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var a=n(3996),i=n(6387),r=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},o=(0,a.Rz)([i.A],function(e){return r(r([],e.texturePatchRequests,!0),e.pendingTexturePatchRequests,!0)})}
,6600:(e,t,n)=>{"use strict";n.d(t,{Jl:()=>r,OZ:()=>c,SP:()=>o,XU:()=>s,ki:()=>i});var a=n(3080),i=function(e){return e.brushCursor.mouseCursorIsActive},r=function(e){return e.brushCursor.radiusIsChanging},o=function(e){return e.brushCursor.shouldShowCursorAtCenter},s=function(e){return e.brushCursor.brushByActivity[e.brushCursor.currentActivityKey].maskBrushRadiusInScreenPixels};function c(e){if(e.brushCursor.mouseCursorIsActive)return e.brushCursor.cursorScreenPosition;var t=e.brushCursor,n=t.radiusIsChanging;return t.shouldShowCursorAtCenter||n?(0,a.f1)(e.transformTools.view.viewportPixelSize,.5):e.brushCursor.cursorScreenPosition}}
,1321:(e,t,n)=>{"use strict";n.d(t,{Jz:()=>u,M1:()=>l,O1:()=>f,Po:()=>d,W9:()=>c});var a=n(3996),i=n(512),r=n(5206),o=n(3080),s=n(3118),c=(0,a.Rz)([s.un],function(e){var t=(0,o.Rd)((0,r.NV)(e));return{width:t.x,height:t.y}}),d=(0,a.Rz)([c],function(e){return e.width}),l=(0,a.Rz)([c],function(e){return e.height}),u=(0,a.Rz)([c],function(e){return Math.max(e.width,e.height)}),f=(0,a.Rz)([s.un,s.jO],function(e,t){return(0,r.GM)((0,i.XG)(t,e))})}
,9404:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var a=n(3996),i=n(512),r=n(5206),o=n(3118),s=(0,a.Rz)([o.A,o.jO,o.hx,o.Hp],function(e,t,n,a){return(0,r.GM)((0,i.XG)((0,i.W3)(1/a),n||t,e))})}
,7194:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var a=n(3996),i=n(512),r=n(3118),o=(0,a.Rz)([r.jO],function(e){return(0,i.JD)(e)})}
,2639:(e,t,n)=>{"use strict";n.d(t,{g:()=>_});var a=n(3996),i=n(512),r=n(6426),o=n(458),s=n(7216),c=n(1815),d=n(451),l=n(3118),u=n(1165),f=n(9578),p=n(8073),m=n(252),_=(0,a.Rz)([l.Qg,l.Kk,l.jO,d.T,l.On,l.ki,u.u,l.wX,l.ZS,l.gO,f.D,p._o],function(e,t,n,a,d,l,u,f,p,_,h,b){if(h)return"none";switch(e){case r.I.selectingFirstCorner:var g=(0,i.iE)((0,i.XG)(n,a)),v=(0,i.So)(g,l);return(0,c.Ah)(t,v)?"crosshair":"not-allowed";case r.I.selectingSecondCorner:return"crosshair";case r.I.draggingView:return"grabbing";case r.I.disabled:return _===s.m.fitCropRectInView?b===m.NF?"default":"pointer":d?"grabbing":"grab";case r.I.usingNineSliceCropHandles:default:return function(e,t,n,a){switch(e){case o.Q.TopLeft:case o.Q.BottomRight:return"nwse-resize";case o.Q.BottomLeft:case o.Q.TopRight:return"nesw-resize";case o.Q.SideLeft:case o.Q.SideRight:return"ew-resize";case o.Q.TopCenter:case o.Q.BottomCenter:return"ns-resize";case o.Q.Center:default:return n||a?t?"grabbing":"grab":"default"}}(f,d,u,p)}})}
,8073:(e,t,n)=>{"use strict";n.d(t,{SA:()=>r,_o:()=>a,di:()=>o,gu:()=>c,hI:()=>s,sg:()=>i});var a=function(e){return e.uiState.activeEditorActivity},i=function(e){return e.uiState.isViewingOriginal},r=function(e){return e.uiState.markupUiState.activeMarkupToolType},o=function(e){return e.uiState.markupUiState.inkBrushes},s=function(e){return e.uiState.markupUiState.activeInkBrushId},c=function(e){return e.uiState.waitingForMarkupOverlayTexture}}
,6387:(e,t,n)=>{"use strict";function a(e){return e.texturePatch}n.d(t,{A:()=>a})}
,7395:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var a=n(3996),i=n(4393),r=n(7760),o=(0,a.Rz)([i.tq],function(e){return e.some(function(e){return e.algorithmParameters.algorithmId===r.u})})}
,3385:(e,t,n)=>{"use strict";n.d(t,{BA:()=>c,Bi:()=>r,_S:()=>d,_w:()=>s,jG:()=>o,yi:()=>i});var a=n(7186),i=function(e){return e.imageBackground.activeBackgroundUiMode===a.V.InitializationStarted};function r(e){return e.imageBackground}function o(e){return e.imageBackground.backgroundType}var s=function(e){var t=e.imageBackground.backgroundsByType.BlurredBackground;if("BlurredBackground"!==t.type)throw new Error("BlurredBackground in state is wrong type");return t},c=function(e){return e.imageBackground.backgroundsByType[e.imageBackground.backgroundType]},d=function(e){return e.imageBackground.backgroundsByType}}
,451:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,b:()=>c});var a=n(3996),i=n(512),r=n(5206),o=n(3118),s=(0,a.Rz)([o.NX],function(e){return(0,i.rJ)(e)}),c=(0,a.Rz)([s],function(e){return(0,r.vX)(e)})}
,9578:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var a=n(3996),i=n(1047),r=n(6600),o=n(1989),s=(0,a.Rz)([r.ki,r.Jl,i.d,r.SP,o.TG,o.Kd],function(e,t,n,a,i,r){return!!t||!r&&!n&&"circleBrush"===i&&(e||a)})}
,1165:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var a=n(3996),i=n(3044),r=n(451),o=n(3118),s=(0,a.Rz)([o.ki,o.jO,r.T],function(e,t,n){return(0,i.WZ)(e,t,n)})}
,8666:(e,t,n)=>{"use strict";n.d(t,{ED:()=>i,Rm:()=>r,yr:()=>o});var a=function(e){return e.maskBrushOptions.maskBrushOptionsByActivity[e.maskBrushOptions.currentActivityKey]},i=function(e){return a(e).mode},r=function(e){return a(e).opacity},o=function(e){return a(e).softness}}
,1989:(e,t,n)=>{"use strict";n.d(t,{Kd:()=>l,TG:()=>s,e8:()=>d,et:()=>r,j6:()=>u,qv:()=>c,to:()=>o});var a=n(1626),i=n(699),r=function(e){return e.maskingUi.maskingUiByActivity[e.maskingUi.currentActivityKey]},o=function(e){return r(e).maskParameters},s=function(e){return r(e).maskInteractionMode},c=function(e){return r(e).selectedUvPositions},d=function(e){return r(e).maskOpacity},l=function(e){return r(e).maskingDisabled},u=function(e){var t=o(e);if(t.maskType===a.D.FromLayer&&(0,i.b)(t.layerToUseAsMask))return t.layerToUseAsMask}}
,7471:(e,t,n)=>{"use strict";n.d(t,{M:()=>s});var a=n(3996),i=n(512),r=n(3080),o=n(3118),s=(0,a.Rz)([o.jO,o.un],function(e,t){var n=(0,i.XG)(e,t),a=(0,i.tM)(n),o=(0,r.f1)(a,-1);return(0,r.si)(o)})}
,1047:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var a=n(3996),i=n(3118),r=(0,a.Rz)([i.On,i.tw],function(e,t){return e?t:0}),o=(0,a.Rz)([r],function(e){return e>10})}
,7728:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,Y:()=>i});var a=function(e){return e.texturePatchAlgorithmUI.texturePatchAlgorithmUIParametersByActivity[e.texturePatchAlgorithmUI.currentActivityKey].applyOnPointerUp},i=function(e){return e.texturePatchAlgorithmUI.texturePatchAlgorithmUIParametersByActivity[e.texturePatchAlgorithmUI.currentActivityKey].algorithmParameters}}
,4393:(e,t,n)=>{"use strict";function a(e){return e.texturePatch.texturePatchInfos}function i(e){return e.texturePatch.removedTexturePatchInfos}function r(e){return e.texturePatch.texturePatchRequests}function o(e){return e.texturePatch.pendingTexturePatchRequests}n.d(t,{T2:()=>r,jG:()=>i,p9:()=>a,tq:()=>o})}
,6935:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var a=n(3996),i=n(4393),r=n(3118),o=(0,a.Rz)([i.p9,r.Qi],function(e,t){return t?e:[]})}
,3118:(e,t,n)=>{"use strict";n.d(t,{$E:()=>F,A:()=>d,FD:()=>m,FE:()=>c,H1:()=>C,Hp:()=>I,II:()=>T,Ik:()=>u,Kk:()=>f,Ku:()=>_,NC:()=>w,NX:()=>x,On:()=>k,Px:()=>M,Qg:()=>l,Qi:()=>O,ZS:()=>v,aR:()=>S,ag:()=>r,bV:()=>o,fX:()=>g,g0:()=>H,gO:()=>y,hx:()=>P,jO:()=>b,ki:()=>A,q5:()=>D,sM:()=>E,t7:()=>U,tw:()=>L,un:()=>s,wX:()=>p});var a=n(9081),i=n(3235),r=function(e){return e.transformTools},o=function(e){return(0,i.I)((0,a.W)(e.transformTools.image.originalPixelSize),e.transformTools.userDefinedDefaults)},s=function(e){return e.transformTools.cropInteraction.uvToWorld},c=function(e){return e.transformTools.cropInteraction.enableZoomToCrop},d=function(e){return e.transformTools.animations.crop.animatedMatrix||s(e)},l=function(e){return e.transformTools.cropInteraction.mode},u=function(e){return e.transformTools.cropInteraction.mode},f=function(e){return e.transformTools.cropInteraction.shouldConstrainInImage},p=function(e){return e.transformTools.cropInteraction.activeHandleIndex},m=function(e){return e.transformTools.cropInteraction.aspectRatio},_=function(e){return e.transformTools.cropInteraction.aspectRatiosList},h=function(e){return e.transformTools.cropInteraction.shouldInvertOriginalAspectRatio},b=function(e){return e.transformTools.view.worldToView},g=function(e){return e.transformTools.view.viewportPixelSize},v=function(e){return e.transformTools.view.allowDraggingView},y=function(e){return e.transformTools.view.viewFitting.mode},S=function(e){return e.transformTools.view.viewFitting.marginCssPixels},D=function(e){return e.transformTools.view.enableZoomToView},I=function(e){return e.transformTools.device.pixelRatio},x=function(e){return e.transformTools.image._preciseUvToWorld},C=function(e){return!!e.transformTools.image.loadedPixelSize},O=function(e){return e.transformTools.image.loadedPixelSize},w=function(e){return e.transformTools.image.originalPixelSize},E=function(e){return e.transformTools.image.exifOrientation},A=function(e){return e.transformTools.pointer.movePos},L=function(e){return e.transformTools.pointer.maxDragDistance},k=function(e){return e.transformTools.pointer.pointerDowns.length>0},M=function(e){return k(e)||!!e.transformTools.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown},P=function(e){return e.transformTools.animations.worldToView.animatedMatrix},T=function(e){return e.transformTools.animations.image.animatedMatrix},U=function(e){return e.transformTools.animations.gridLineVisibility.numGridLines},F=function(e){return e.transformTools.animations.transitionToViewingOriginal.isActive},H=function(e){return{imageMatrix:x(e),cropMatrix:s(e),originalImageSize:w(e),aspectRatio:m(e),shouldInvertOriginalAspectRatio:h(e),undoRedoStack:e.transformTools.undoRedoStack}}}
,529:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var a=n(3996),i=n(9739),r=n(3118),o=(0,a.Rz)([r.NC,r.sM],function(e,t){return(0,i.q1)(t)?{x:e.y,y:e.x}:e})}
,7192:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var a=n(3996),i=n(512),r=n(451),o=n(3118),s=(0,a.Rz)([r.T,o.jO,o.hx,o.II],function(e,t,n,a){var r=n||t,o=a||e;return(0,i.XG)(r,o)})}
,753:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var a=n(3996),i=n(5966),r=n(3118),o=n(7192),s=(0,a.Rz)([o.h,r.sM],function(e,t){return(0,i.A)(t,e)})}
,9752:(e,t,n)=>{"use strict";function a(e){return{root:{borderRadius:"7px",wordBreak:"break-word",border:"1px solid ".concat(e.palette.neutralTertiaryAlt)},beak:{},calloutMain:{borderRadius:"7px"},beakCurtain:{borderRadius:"7px"},container:{}}}n.d(t,{r:()=>a})}
,1785:(e,t,n)=>{"use strict";n.d(t,{$7:()=>o,VS:()=>s});var a=function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},i={width:8,height:9},r={width:8,height:11},o=4;function s(e){var t=function(e){return{fontSize:"0px",position:"absolute",zIndex:1,margin:"2px",color:e.palette.neutralDark,fill:e.palette.neutralDark}}(e);return{singleArrow:{root:a(a(a({},t),i),{top:8,right:o})},doubleArrow:{root:a(a(a({},t),r),{top:8,right:o})}}}}
,907:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var a=n(2141),i=n(2522),r=".".concat(a.ButtonGlobalClassNames.msButtonIcon);function o(e,t){switch(t){case"info":return e?"rgba(96, 205, 255, 1)":"rgba(0, 95, 183, 1)";case"warning":return e?"#FCE100":"#9D5D00"}}function s(e,t){switch(t){case"info":return e?"rgba(255, 255, 255, 0.03)":"#d9d9d9";case"warning":return e?"#443519":"#FFF4CE"}}function c(e,t){var n,a=(0,i.g)(e),c=a?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 0.9)";return{icon:{color:o(a,t)},content:{lineHeight:"20px"},root:{background:s(a,t),width:"auto",borderRadius:"7px",color:c,backdropFilter:"blur(120px)",marginBottom:"16px"},dismissal:(n={},n[r]={color:e.palette.black},n),innerText:{lineHeight:"20px"}}}}
,1843:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var a=n(2522);function i(e){var t=(0,a.g)(e)?"#282828":"#F3F2F1";return{calloutMain:{beak:{backgroundColor:t},beakCurtain:{backgroundColor:t},calloutMain:{backgroundColor:t},root:{maxWidth:"320px",padding:"9px 12px 11px 12px",lineHeight:"20px"}},calloutHeader:{fontWeight:600,marginBottom:"12px"},calloutDismissIcon:{root:{color:e.palette.black,width:"16px",height:"16px"}}}}}
,920:(e,t,n)=>{"use strict";n.d(t,{g4:()=>a});var a="inkTool"}
,5325:(e,t,n)=>{"use strict";n.d(t,{hP:()=>g,KM:()=>h,N2:()=>_,Ze:()=>m});var a,i=n(2141),r=n(360),o=n(252),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=s(s({},(0,r.eW)(0)),{top:56,bottom:206});(a={})[o.I8]={top:80,left:24,right:24,bottom:149},a[o.lm]=c,a[o.qO]=c,a[o.Xc]=c,a[o.Y4]=c,(0,i.concatStyleSets)({container:{borderRadius:"4px",overflow:"hidden"},body:{display:"flex",flexDirection:"column"},footer:{margin:"8px 16px"}},{body:{position:"relative",justifyContent:"flex-end",alignItems:"center"}});var d,l,u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},f=u(u({},(0,r.eW)(0)),{top:56,bottom:174});(d={})[o.I8]={top:80,left:24,right:24,bottom:149},d[o.lm]=f,d[o.Xc]=f,d[o.Y4]=f,d[o.qO]=f,(l={})[o.I8]=u(u({},(0,r.eW)(24)),{top:40}),l[o.lm]=(0,r.eW)(0),l[o.Xc]=(0,r.eW)(0),l[o.Y4]=u(u({},(0,r.eW)(0)),{left:12,right:12}),l[o.qO]=(0,r.eW)(0);var p=function(){return p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};function m(e,t,n,a){return p(p(p(p({},a),e&&a.highlightBackgroundOverride),t&&a.activeBackgroundOverride),n&&a.disabledBackgroundOverride)}function _(e,t,n){return p(p(p({},n),e&&p(p({},b),null==n?void 0:n.activeNameOverride)),t&&(null==n?void 0:n.disabledNameOverride))}function h(e,t){return p(p({},t),e&&(null==t?void 0:t.activeIconOverride))}var b={fontWeight:"bold"};function g(e){var t=function(e){return{background:{width:"48px",height:"48px",activeBackgroundOverride:{backgroundColor:e.palette.neutralQuaternary},highlightBackgroundOverride:{backgroundColor:e.palette.themeLighter},outlineColor:e.palette.neutralDark},icon:{fontSize:"20px",width:"20px",height:"20px",color:e.palette.neutralPrimaryAlt,fill:e.palette.neutralPrimaryAlt},name:{marginTop:"6px",activeNameOverride:{color:e.palette.black},padding:"0 5px",textAlign:"center",wordBreak:"break-word",wordWrap:"break-word"}}}(e);return p({},t)}}
,3783:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var a=n(2744),i=n(2141),r=n(5959),o=n.n(r),s=n(8712),c=n(1843),d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},l=function(e){var t=e.calloutVisibilityState,n=e.setCalloutVisibilityState,l=(e.children,e.target),u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["calloutVisibilityState","setCalloutVisibilityState","children","target"]),f=(0,a.D)(),p=(0,c.k)(f),m=o().useState(null),_=m[0],h=m[1],b=(0,r.useCallback)(function(){"showing"===t&&n("alreadyShown")},[t,n]);return(0,r.useEffect)(function(){var e=function(e){var t=l.current,n=(null==_?void 0:_.contains(e.target))||(null==t?void 0:t.contains(e.target));("pointerup"===e.type&&!n||"keyup"===e.type&&"Escape"===e.key&&n)&&b()};return document.addEventListener("keyup",e),document.addEventListener("pointerup",e),function(){document.removeEventListener("keyup",e),document.removeEventListener("pointerup",e)}},[_,b,l]),o().createElement(s.O,d({setCalloutRef:h},u,{styles:p,target:l,calloutVisibilityState:t,setCalloutVisibilityState:n,directionalHint:i.DirectionalHint.bottomAutoEdge,gapSpace:0,showCalloutOnMount:!1,role:"alertdialog"}))};l.displayName="TeachingTip"}
,4937:(e,t,n)=>{"use strict";n.d(t,{d:()=>_});var a=n(7417),i=null,r=n(9381),o=n(9075),s=n(1870),c=n(1188),d=n(8631),l=n(5767),u=n(1352),f=n(2271),p=function(){return p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},m=n(3063),_={id:m.j,texturePatchProcessorFunction:function(e,t,m,_,h,b,g){var v=this,y=(0,l.v)(3,!0),S=(0,d.$)(y,m,_,b,g),D=S.sourceLayer,I=S.maskPixelBytes,x=S.sampleRectInImage,C=S.layerToPatch;return new Promise(function(e,t){(function(){return e=this,void 0,a=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(e){try{return null!==i?[2,i]:[2,i=new Promise(function(e,t){n.e(968).then(n.bind(n,4968)).then(function(n){var a=new(0,n.default);a.onmessage=function(n){n.data.wasmLoaded?e(a):t('unexpected message from worker. "wasmLoaded" was not present in the message.')},a.postMessage({initiateWasm:!0})}).catch(t)})]}catch(e){throw new Error("Failed to load worker: ".concat(e))}return[2]})},new((t=void 0)||(t=Promise))(function(n,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var a;e.done?n(e.value):(a=e.value,a instanceof t?a:new t(function(e){e(a)})).then(r,o)}s((a=a.apply(e,[])).next())});var e,t,a})().then(function(n){if(n){var i=t,d=(0,f.D)(D,C,_,b.getTextureBytes,x),l=d.sourcePixelBytes,m=d.originalPixelBytes,h=function(e,t){if(!t)throw new Error("original bytes not set");var n=new Uint8ClampedArray(t.bytes.length);n.set(t.bytes);for(var a=(0,s.x)(e.format),i=(0,o.O)(e.format),c=(0,s.x)(t.format),d=(0,o.O)(t.format),l=0,u=i;u<n.length;u+=a){var f=e.bytes[u]!==r.wp;n[l*c+d]=f?0:255,l++}return n}(I,l),g=p(p({},S),{bytesWithAlpha0inAreasToFix:h});n.onmessage=function(n){return r=v,void 0,d=function(){var r,s,d,l,f,p,h,g;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(v){return function(e){return"number"==typeof e.id&&void 0!==e.maskBoundsRectInImage&&void 0!==e.outputPixelBytes.bytes&&void 0!==e.outputPixelBytes.format}(r=n.data)?(d=(s=r).outputPixelBytes,l=S.maskPixelBytes,f=(0,u.O)(d,m.format),p=(0,o.O)(f.format),h=function(e){f.bytes[e+p]=m.bytes[e+p]},(0,c.m)(f,m,l,"none",h),g=(0,a.l)(s,_,m,b,i),e([g])):t("unhandled message from worker!"),[2]})},new((s=void 0)||(s=Promise))(function(e,t){function n(e){try{i(d.next(e))}catch(e){t(e)}}function a(e){try{i(d.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s(function(e){e(i)})).then(n,a)}i((d=d.apply(r,[])).next())});var r,s,d},n.postMessage(g)}else t("could not obtain worker")}).catch(t)})},getDefaultParams:function(){return{algorithmId:m.j,serializedParams:"",layerToPatch:"main",layerToClear:"eraseMask"}}}}
,1188:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var a=n(5385),i=n(9381),r=n(9075),o=n(1870);function s(e,t,n,s,c){if(e.format!==t.format)throw new Error("target and source bytes need the same format when blending");for(var d=(0,o.x)(e.format),l=(0,o.x)(n.format),u=(0,r.O)(n.format),f=e.bytes.length/d,p=0;p<f;p++){var m=p*d,_=p*l+u,h=n.bytes[_];if(null==c||c(m),"max"===s&&(e.bytes[p]=Math.max(e.bytes[p],t.bytes[p])),h!==i.xt)for(var b=h/255,g=0;g<d;g++){var v=m+g;e.bytes[v]=Math.round((0,a.Ec)(t.bytes[v],e.bytes[v],b))}}}}
,7417:(e,t,n)=>{"use strict";n.d(t,{l:()=>h});var a=n(2397),i=n(4295),r=n(1870),o=n(553),s=n(9075),c=n(3534),d=n(8874);function l(e,t){var n=(0,d.kR)(e,t);if(n)return(0,c.w)(n,t)}var u=n(8008),f=n(9191),p=function(){return p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};function m(e,t,n,a,c,d,m,_){var h,b,g,v,y=p(p({},n),{top:n.top-a.top,left:n.left-a.left}),S=(0,i.R)(d,a.width,y),D=(0,i.R)(c,a.width,y);_&&(h=y,function(e){var t=e.bytes,n=e.format,a=n===o.A.RGBA;if(!a&&n!==o.A.RGB)throw new Error("getNumberOfBlackPixelsInPixelBytes does not support PixelFormats without RGB");for(var i=(0,r.x)(n),c=a?(0,s.O)(n):void 0,d=0,l=0;l<t.length;l+=i){var u=t[l],f=t[l+1],p=t[l+2];void 0!==c&&0===t[l+c]||u+f+p===0&&d++}return d}(D)>=(g=(b=h).width)*(v=b.height)-v-g+1&&(_(a),D.bytes.set(S.bytes)));var I=t.getAlreadyLoadedTextureOrThrow(e).parts.map(function(e,t){return function(e,t,n,a,r,o){var s=l(e,n);if(s&&(0,u.I)(s)){var c=l(n,e);if(!c||!(0,u.I)(c))throw new Error("textureRectInTexturePatchRect not found!");var d=(0,i.R)(r,e.width,c),p=(0,i.R)(o,e.width,c);return(0,f.Y)({updatedSubPixels:p,originalSubPixels:d,layer:t,subTextureIndex:a,textureRectInFullImage:n,texturePatchRectInFullImage:e,texturePatchRectInTextureRect:s,textureRectInTexturePatchRect:c})}}(n,m,e.rect,t,S,D)}),x=I.reduce(function(e,t){return void 0!==t&&e.push(t),e},[]);if(0===x.length)throw new Error("no patch parts created in createSingleTexturePatchesFromTexturePatchResponse");return x}var _=n(3853);function h(e,t,n,i,r){var o=e.id,s=e.maskBoundsRectInImage,c=e.sampleRectInImage,d=e.outputPixelBytes,l=e.layerToPatch,u=(0,_.n)(l,t);if(!d)throw new Error("no layer was patched!");return{parts:m(u,i,s,c,d,n,l,r),id:o,imageId:(0,a.hc)(t.main)}}}
,6439:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var a=n(3853);function i(e,t,n,i){return n((0,a.n)(e,t),i)}}
,3853:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var a=n(699);function i(e,t){if((0,a.b)(e)){var n=t[e];if(!n)throw new Error("Layer image not set for layer: "+e);return n}return e.dynamicLayerId}}
,1306:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var a=n(3198),i=n(8847);function r(e,t){var n=e.filter(function(e){return(0,i.n)(e.algorithmParameters.layerToPatch,t)}).map(function(e){return e.pixelBoundsRectInFullImage});return(0,a.r)(n)}}
,5767:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var a=n(9413),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e,t){return function(n,r){var o=i({},r),s=Math.max(r.width,r.height),c=t?s:r.width,d=t?s:r.height;return(0,a.Y)(o,n,Math.round(e*c),Math.round(e*d))}}}
,2271:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var a=n(6439);function i(e,t,n,i,r){var o=(0,a.f)(e,n,i,r);return e===t?{sourcePixelBytes:o,originalPixelBytes:o}:{sourcePixelBytes:o,originalPixelBytes:(0,a.f)(t,n,i,r)}}}
,8631:(e,t,n)=>{"use strict";n.d(t,{$:()=>x});var a=n(1626),i=n(8874),r=n(2261),o=n(7893);function s(e,t,n){var a=Math.min(Math.max((n-e)/(t-e),0),1);return a*a*(3-2*a)}var c=n(9381),d=n(9075),l=n(1870);function u(e,t,n,a,i){var r=function(e,t,n,a){var i=(0,l.x)(e.format),r=(0,d.O)(e.format),o=n.width/2,u=t.width,f=(1-a)*o,p=f*f,m=n.left-t.left+o-.5,_=n.top-t.top+o-.5,h=m-o,b=_-o,g=m+o,v=_+o,y=o*o,S=new Uint8ClampedArray(e.bytes.length);S.set(e.bytes);for(var D=e.bytes.length/i,I=r,x=0;x<D;x++,I+=i){S[I]=c.wp;var C=x%u;if(!(C<h||C>g)){var O=Math.floor(x/u);if(!(O<b||O>v)){var w=C-m,E=O-_,A=w*w+E*E;if(A<y)if(A<p)S[I]=c.xt;else{var L=s(0,o-f,Math.sqrt(A)-f),k=c.xt-Math.round(c.xt*L);S[I]=k}}}}return{bytes:S,format:e.format}}(t.getTextureBytes(e,n),n,a,i);return r}var f=n(8008),p=n(3853);function m(e,t,n,s,c,d,l,m,_){if(s.maskType!==a.D.CircleMask)throw new Error("only circle masks are supported");if(!t)throw new Error("image not defined");var h=(0,o.b)(t),b=(0,r.K)(s.rectUvToImageUv,h),g=(0,i.kR)(b,h);if(!g||!(0,f.I)(g))throw new Error("No intersection rectangle. It is recommended to check this before creating a request.");var v=d(h,b);return{id:e,maskBoundsRectInImage:b,sampleRectInImage:v,maskPixelBytes:u((0,p.n)(c,t),n,v,b,s.softness),maskType:s.maskType,layerToPatch:c,sourceLayer:null!=m?m:c}}var _=n(553);function h(e,t,n,i,r,s,d,u,f){var m=i.maskType;if(m!==a.D.FullImageMask)throw new Error("only full image masks are supported");if(!t)throw new Error("image not defined");var h=(0,o.b)(t),b=(0,p.n)(r,t),g=n.getTextureSize(b),v=_.A.RGBA,y=(0,l.x)(v);return{id:e,maskBoundsRectInImage:h,sampleRectInImage:h,maskPixelBytes:{bytes:new Uint8ClampedArray(g.x*g.y*y).fill(c.xt),format:v},maskType:m,layerToPatch:r,sourceLayer:null!=u?u:r}}var b=n(1306);function g(e,t,n,i,r,s,u,f,m){if(i.maskType!==a.D.FromLayer)throw new Error("only MaskType.FromLayer is supported");if(!t)throw new Error("image not defined");var _,h=(0,o.b)(t),g=i.layerToUseAsMask,v=(0,p.n)(g,t);if(void 0===(_=m||("backgroundMask"!==g&&"eraseMask"!==g||i.shouldInvertMask?function(e,t,n,a){return function(e,t,n){for(var a=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=e.bytes,c=e.format,u=(0,l.x)(c),f=(0,d.O)(c),p=t*u,m=f;m<s.length;m+=u)if(s[m]!==n){var _=Math.floor(m/p),h=(m-f)/u%t;a=Math.min(a,h),i=Math.max(i,h),r=Math.min(r,_),o=Math.max(o,_)}if(a!==Number.MAX_VALUE)return{top:r,left:a,width:i-a+1,height:o-r+1}}(e.getTextureBytes(t,n),n.width,a?c.xt:c.wp)}(n,v,h,i.shouldInvertMask):(0,b.y)(u,g))))throw new Error("could not find mask layer bounds.");var y=s(h,_),S=n.getTextureBytes(v,y);return i.shouldInvertMask&&function(e){for(var t=(0,l.x)(e.format),n=(0,d.O)(e.format);n<e.bytes.length;n+=t)e.bytes[n]=255-e.bytes[n]}(S),{id:e,maskBoundsRectInImage:_,sampleRectInImage:y,maskPixelBytes:S,maskType:i.maskType,layerToPatch:r,sourceLayer:null!=f?f:r}}var v=n(8650);function y(e,t,n,s,d,l,u,m,_){if(s.maskType!==a.D.PillShapedMask)throw new Error("only circle masks are supported");if(!t)throw new Error("image not defined");var h=(0,o.b)(t),b=(0,r.K)(s.rectUvToImageUv,h),g=(0,i.kR)(b,h);if(!g||!(0,f.I)(g))throw new Error("No intersection rectangle. It is recommended to check this before creating a request.");var y=l(h,b),S=(0,p.n)(d,t),D=function(e,t,n,a,i){if(0!==c.wp)throw new Error("MASKED_BYTE must be 0");var r={bytes:new Uint8ClampedArray(t.bytes.length),format:t.format};return(0,v.K)(e,r,n,a,i,c.xt),r}(h,n.getTextureBytes(S,y),y,s.rectUvToImageUv,s.softness);return{id:e,maskBoundsRectInImage:b,sampleRectInImage:y,maskPixelBytes:D,maskType:s.maskType,layerToPatch:d,sourceLayer:null!=m?m:d}}var S=n(512),D=n(3080);function I(e,t,n,u,m,_,h,b,g){if(u.maskType!==a.D.RectangleMask)throw new Error("only rectangle masks are supported");if(!t)throw new Error("image not defined");var v=(0,o.b)(t),y=(0,r.K)(u.rectUvToImageUv,v),I=(0,i.kR)(y,v);if(!I||!(0,f.I)(I))throw new Error("No intersection rectangle. It is recommended to check this before creating a request.");var x=_(v,y),C=(0,p.n)(m,t),O=function(e,t,n,a,i){var r=(0,l.x)(t.format),o=(0,d.O)(t.format),u=n.width,f=new Uint8ClampedArray(t.bytes.length);f.set(t.bytes);for(var p=t.bytes.length/r,m=(0,S.iE)(a),_={x:e.width,y:e.height},h=(0,D.AI)(_,(0,S.So)(a,{x:0,y:0})),b=(0,D.AI)(_,(0,S.So)(a,{x:1,y:0})),g=(0,D.AI)(_,(0,S.So)(a,{x:0,y:1})),v=(0,D.Gl)(h,b)/(0,D.Gl)(h,g),y=0;y<p;y++){var I=y%u+.5,x=Math.floor(y/u)+.5,C=(I+n.left)/e.width,O=(x+n.top)/e.height,w=(0,S.So)(m,{x:C,y:O}),E=y*r+o;if(w.x>=0&&w.x<=1&&w.y>=0&&w.y<=1){if(f[E]=c.xt,i>0){var A=w,L={x:1,y:1/v},k=.5*Math.min(L.x,L.y)*i,M={x:A.x*L.x,y:A.y*L.y},P=0,T=k,U=k,F=L.y-k,H=L.x-k;if(M.x<U)if(M.y<T){var R={x:U,y:T};P=(0,D.Gl)(R,M)}else if(M.y>F){var N={x:U,y:F};P=(0,D.Gl)(N,M)}else P=U-M.x;else if(M.x>H)if(M.y<T){var B={x:H,y:T};P=(0,D.Gl)(B,M)}else if(M.y>F){var j={x:H,y:F};P=(0,D.Gl)(j,M)}else P=M.x-H;else M.y<T?P=T-M.y:M.y>F&&(P=M.y-F);var V=1-s(0,k,P);f[E]=Math.round(V*c.xt)}}else f[E]=c.wp}return{bytes:f,format:t.format}}(v,n.getTextureBytes(C,x),x,u.rectUvToImageUv,u.softness);return{id:e,maskBoundsRectInImage:y,sampleRectInImage:x,maskType:u.maskType,layerToPatch:m,maskPixelBytes:O,sourceLayer:null!=b?b:m}}function x(e,t,n,i,r,o){var s,c,d=t.idValue,l=t.maskParameters;return(s=l.maskType,((c={})[a.D.CircleMask]=m,c[a.D.RectangleMask]=I,c[a.D.FromLayer]=g,c[a.D.PillShapedMask]=y,c[a.D.FullImageMask]=h,c)[s])(d,n,i,l,t.algorithmParameters.layerToPatch,e,r,t.algorithmParameters.sourceLayer,o)}}
,8650:(e,t,n)=>{"use strict";n.d(t,{K:()=>d});var a=n(512),i=n(9075),r=n(1870);function o(e,t){return e*e+t*t}function s(e,t,n){var a=(n-e)/(t-e);return a*a*(3-2*a)}var c=n(5385);function d(e,t,n,d,l,u){for(var f,p,m,_=(0,r.x)(t.format),h=(0,i.O)(t.format),b=n.width,g=t.bytes,v=t.bytes.length/_,y=(f=d,p={x:e.width,y:e.height},m=(0,a.XG)((0,a.W3)(p.x,p.y),f),(0,a.XW)(m)),S=.5/y,D=1-S,I=.5*(1-l),x=(0,a.cQ)(n.left+.5,n.top+.5),C=(0,a.W3)(1/e.width,1/e.height),O=(0,a.iE)(d),w=(0,a.XG)(O,C,x),E=h,A=0;A<v;A++,E+=_){var L=A%b,k=Math.floor(A/b),M=(0,a.So)(w,{x:L,y:k});if(M.x>=0&&M.x<=1&&M.y>=0&&M.y<=1){var P=void 0;if(M.x<S){var T=o((M.x-S)*y,M.y-.5);if(T>.25)continue;P=T}else if(M.x>D){var U=o((M.x-D)*y,M.y-.5);if(U>.25)continue;P=U}if(l>0){var F=(void 0===P?Math.abs(M.y-.5):Math.sqrt(P))-I;if(F>0){var H=s(0,.5-I,F);g[E]=(0,c.Ec)(u,g[E],H)}else g[E]=u}else g[E]=u}}}}
,2397:(e,t,n)=>{"use strict";n.d(t,{$o:()=>y,BK:()=>f,F8:()=>u,M3:()=>c,YG:()=>g,YT:()=>h,_k:()=>m,hc:()=>b,l_:()=>p,mR:()=>v,n7:()=>S,ny:()=>l,r9:()=>_,tt:()=>d});var a=n(9657),i=n(2187),r=n(553),o=n(1870),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(e){return e.sourceImageKind}function d(e,t,n,i,s){if(void 0===n&&(n=r.A.RGBA),void 0===s&&(s=""),!(0,a.F)(e)||!(0,a.F)(t))throw new Error("Dimensions of ("+e+","+t+") are not integers. ImageBytes cannot be created.");if(e<1||t<1)throw new RangeError("Dimensions of ("+e+","+t+") must be non-negative. ImageBytes cannot be created.");if(i&&!v(e,t,n,i))throw new Error("Given byte array length is invalid. ImageBytes cannot be created.");var c;try{c=null!=i?i:new Uint8ClampedArray(e*t*(0,o.x)(n))}catch(n){if(n instanceof RangeError)throw new RangeError("Byte array length for ".concat(e," x ").concat(t," image is too big. ImageBytes cannot be created. ").concat(n.message));throw n}return{bytes:c,width:e,height:t,format:n,id:s}}function l(e){return!!e.bytes}function u(e){return!!e.texture}function f(e){return!!e.canvasMethods}function p(e){return null!==e&&void 0!==e.main}function m(e){return s(s({},e),{overlay:null})}function _(e){return l(e)?"".concat(e.id):e instanceof HTMLImageElement?"".concat(e.id||e.src):"".concat(e.id)}function h(e){return e?_(e):null}function b(e){return e?_(e):""}function g(e){return e?e.main:null}function v(e,t,n,i){return!(!(0,a.F)(e)||!(0,a.F)(t))&&i.byteLength===e*t*(0,o.x)(n)}function y(){return s(s({},(0,i.W)()),{sourceImageKind:"NoImage"})}function S(e,t){return s(s({},(0,i.W)()),{main:e,sourceImageKind:t})}}
,2187:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var a=n(3494);function i(){return(0,a.I)(null)}}
,3494:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var a=n(2891);function i(e){var t={};return a.N.forEach(function(n){t[n]=e}),t}}
,8156:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});var a=n(2891);function i(e){var t={};return a.N.forEach(function(n){t[n]=e}),t}}
,4860:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var a=(0,n(5959).createContext)({combinedUndoRedoCoordinator:void 0})}
,9481:(e,t,n)=>{"use strict";function a(e,t){var n=t.cssThicknesses,a=n[e],i=n[Math.round(n.length/2)];return-1===a?i:a}function i(e,t){var n=t.cssThicknesses,a=n.indexOf(e),i=Math.round(n.length/2);return-1===a?i:a}function r(e){return function(t){var n;return e.minSliderValue+t*(null!==(n=e.step)&&void 0!==n?n:1)}}n.d(t,{Fm:()=>a,pZ:()=>i,qP:()=>r})}
,3324:(e,t,n)=>{"use strict";function a(e,t){var n=2*e/t;return Math.max(1,Math.round(n))/2*t}n.d(t,{Y:()=>a})}
,8520:(e,t,n)=>{"use strict";function a(e,t,n){var a=function(e,t,n){if(e.length!==t*n*4)throw new Error("unexpected byte length");var a=document.createElement("canvas");a.width=t,a.height=n;var i=a.getContext("2d");if(!i)throw new Error("could not get canvas context");var r=i.createImageData(t,n),o=0,s=0,c=0;for(c=0;c<t*n;c++)r.data[s]=e[o],r.data[s+1]=e[o+1],r.data[s+2]=e[o+2],r.data[s+3]=e[o+3],o+=4,s+=4;return i.putImageData(r,0,0),a}(e,t,n);return a.toDataURL("png")}n.d(t,{W:()=>a})}
,1352:(e,t,n)=>{"use strict";n.d(t,{O:()=>o});var a=n(553),i=n(9075),r=n(1870);function o(e,t){var n=e.bytes,o=e.format;if(o===t)return e;var s=(0,r.x)(o),c=(0,r.x)(t),d=e.bytes.length/s,l=new Uint8ClampedArray(d*(0,r.x)(t));if(o!==a.A.RGBA||t!==a.A.A)throw new Error("unsupported format conversion: ".concat(o," to ").concat(t,". Currently this function only supports converting from RGBA to A format."));for(var u=(0,i.O)(o),f=0,p=0,m=0;m<d;m++){var _=n[f+u];l[p]=_,f+=s,p+=c}return{bytes:l,format:t}}}
,706:(e,t,n)=>{"use strict";function a(e,t){return"".concat(e,"-").concat(t)}n.d(t,{Y:()=>a})}
,7422:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var a=n(3494),i=n(9845),r=function(){return r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function o(e){var t=(0,i.t)(e);return r(r({},(0,a.I)(t)),{depth:!1})}}
,4295:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var a=n(1870);function i(e,t,n){for(var i=(0,a.x)(e.format),r=new Uint8ClampedArray(n.width*n.height*i),o=(t-n.width)*i,s=n.width*i,c=0,d=(n.top*t+n.left)*i;c<r.length;)r.set(e.bytes.subarray(d,d+s),c),c+=s,d+=s+o;return{bytes:r,format:e.format}}}
,4376:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,_:()=>r});var a=n(9739),i=n(2397);function r(e){return o(e.main)}function o(e){return null==e?a.Hf:((0,i.ny)(e)||(0,i.BK)(e))&&e.orientation||a.Hf}}
,6083:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var a=n(3080),i=n(9142),r=n(7197);function o(e){var t=(0,i.y)(e);return t&&(0,r.u)(e)&&(t=(0,a.X8)(t)),t}}
,7893:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var a=n(9142);function i(e){var t=(0,a.y)(e);if(!t)throw new Error("unOrientedSize not defined");return{top:0,left:0,width:t.x,height:t.y}}}
,9142:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});var a=n(2397);function i(e){var t=(0,a.YG)(e);if(t)return{x:t.width,y:t.height}}}
,7197:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,u:()=>r});var a=n(9739),i=n(4376);function r(e){var t=(0,i._)(e);return(0,a.q1)(t)}function o(e){var t=(0,i.A)(e);return(0,a.q1)(t)}}
,5451:(e,t,n)=>{"use strict";n.d(t,{r:()=>r}),n(3080);var a=n(7592),i=n(2397);function r(e){var t=(0,i.M3)(e);switch(t){case"NoImage":case"Thumbnail":return!1;case"FullSize":case"Resized":return!0;default:throw new a.x(t)}}n(6083)}
,7291:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,s:()=>i});var a=n(3080);function i(e,t,n){var a=t.getBoundingClientRect();return{x:Math.floor((e.x-a.left)*n),y:Math.floor((e.y-a.top)*n)}}function r(e,t,n){if(e){var i={x:e.offsetLeft*n,y:e.offsetTop*n};return(0,a.Tf)(t,i)}return t}}
,9191:(e,t,n)=>{"use strict";function a(e){for(var t="",n=e.byteLength,a=0;a<n;a++)t+=String.fromCharCode(e[a]);return window.btoa(t)}n.d(t,{Y:()=>u});var i=n(8520),r=n(7422),o=n(1870),s=n(699),c=n(9845);function d(e,t,n,a,i,d){var l=t.parts[i].texture;if(!l)throw new Error("texturePart missing");!function(e,t,n,a,i){var r=e.getInternalTexture();if(!r)throw new Error("could not get internal texture!");var s=function(e,t,n,a){var i=t*(0,o.x)(e.format),r=Math.floor((i+a-1)/a)*a,s=r*(n-1)+i;if(s!==e.bytes.length){for(var c=new Uint8ClampedArray(s),d=0;d<n;d++)c.set(e.bytes.subarray(d*i,(d+1)*i),d*r);return c}return e.bytes}(n,a.width,a.height,t._gl.getParameter(t._gl.UNPACK_ALIGNMENT));t.updateTextureData(r,new Uint8Array(s.buffer,s.byteOffset,s.byteLength),a.left,a.top,a.width,a.height,void 0,void 0,i)}(l,e,n,d,(0,s.b)(a)?!!(0,r.W)(e)[a]:(0,c.t)(e))}var l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function u(e){var t=e.updatedSubPixels,n=e.originalSubPixels,r=e.layer,o=e.subTextureIndex,s=e.textureRectInFullImage,c=e.texturePatchRectInFullImage,u=e.texturePatchRectInTextureRect,f=e.textureRectInTexturePatchRect;return{getPreviewDataUri:function(){return(0,i.W)(t.bytes,u.width,u.height)},getPreviewImageSize:function(){return{x:u.width,y:u.height}},getRectInFullImage:function(){return l({},c)},layer:r,apply:function(e,n){d(e,n,t,r,o,u)},remove:function(e,t){d(e,t,n,r,o,u)},flatten:function(){return{updatedSubPixels:t,originalSubPixels:n,layer:r,subTextureIndex:o,textureRectInFullImage:s,texturePatchRectInFullImage:c,texturePatchRectInTextureRect:u,textureRectInTexturePatchRect:f}},serialize:function(){return{updatedSubPixelsDataUri:a(t.bytes),originalSubPixelsDataUri:a(n.bytes),updatedFormat:t.format,originalFormat:n.format,layer:r,subTextureIndex:o,textureRectInFullImage:s,texturePatchRectInFullImage:c,texturePatchRectInTextureRect:u,textureRectInTexturePatchRect:f}},getSizeOfStoredPixelsInBytes:function(){return t.bytes.length+n.bytes.length}}}}
,4592:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var a=n(8847);function i(e,t,n){return e.some(function(e){return(0,a.n)(e.algorithmParameters.layerToPatch,t)&&(!n||-1!==n.indexOf(e.algorithmParameters.algorithmId))})}}
,9845:(e,t,n)=>{"use strict";function a(e){return 2===(null==e?void 0:e.webGLVersion)}n.d(t,{t:()=>a})}
,3883:(e,t,n)=>{"use strict";var a;n.d(t,{x:()=>a}),function(e){e.NoArrow="NoArrow",e.SingleArrow="SingleArrow",e.DoubleArrow="DoubleArrow"}(a||(a={}))}
,4220:(e,t,n)=>{"use strict";var a;n.d(t,{y:()=>a}),function(e){e.FreeHand="FreeHand",e.StraightLine="StraightLine"}(a||(a={}))}
,8874:(e,t,n)=>{"use strict";n.d(t,{Lj:()=>m,N8:()=>p,Of:()=>f,QX:()=>_,Vv:()=>l,_N:()=>c,hs:()=>s,iz:()=>h,kR:()=>u,n4:()=>r,xC:()=>o,xo:()=>b,yR:()=>d});var a=n(4139),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e){return{top:Math.round(e.top),left:Math.round(e.left),width:Math.round(Math.max(1,e.width)),height:Math.round(Math.max(1,e.height))}}function o(e,t){return{top:Math.round(e.top),left:Math.round(e.left),width:t?Math.ceil(Math.max(1,e.width)):Math.floor(Math.max(1,e.width)),height:t?Math.ceil(Math.max(1,e.height)):Math.floor(Math.max(1,e.height))}}var s={top:0,left:0,width:1,height:1};function c(e,t){return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height}function d(e,t){return c({x:e.left,y:e.top},t)&&c({x:e.left+e.width,y:e.top+e.height},t)}function l(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function u(e,t){var n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.max(e.top,t.top),r=Math.min(e.top+e.height,t.top+t.height);if(a>=n&&r>=i)return{left:n,top:i,width:a-n,height:r-i}}function f(e,t,n){return{height:e.height/n*2,top:2*-e.top/n+1,width:e.width/t*2,left:e.left/t*2-1}}function p(e,t,n){return void 0===n?e.top===t.top&&e.left===t.left&&e.width===t.width&&e.height===t.height:(0,a.L)(e.top,n)===(0,a.L)(t.top,n)&&(0,a.L)(e.left,n)===(0,a.L)(t.left,n)&&(0,a.L)(e.width,n)===(0,a.L)(t.width,n)&&(0,a.L)(e.height,n)===(0,a.L)(t.height,n)}function m(e,t,n){return void 0===n?e.width===t.width&&e.height===t.height:(0,a.L)(e.width,n)===(0,a.L)(t.width,n)&&(0,a.L)(e.height,n)===(0,a.L)(t.height,n)}function _(e,t){return e.width<t.width||e.height<t.height}function h(e,t,n){return i(i({},e),{top:e.top+t,left:e.left+n})}function b(e,t,n){return e.width>=t&&e.height>=(void 0===n?t:n)}}
,5687:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,H:()=>r});var a=n(512);function i(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=e.rotation;return(0,a.XG)((0,a.cQ)(i,r),(0,a.yE)(o),(0,a.W3)(t,n))}function r(e){var t=e[0]*e[4]-e[1]*e[3]<0?-1:1,n=(0,a.tM)(e),i=n.x,r=n.y;return{width:Math.hypot(e[0],e[3])*t,height:Math.hypot(e[1],e[4]),rotation:(0,a.eo)(e),x:i,y:r}}}
,5206:(e,t,n)=>{"use strict";n.d(t,{FN:()=>c,GM:()=>r,Ml:()=>l,NV:()=>o,qq:()=>i,vX:()=>s,yq:()=>d});var a=n(512);function i(e){var t=(0,a.W3)(e.width,e.height);return(0,a.XG)((0,a.cQ)(e.left,e.top),t)}function r(e){var t=(0,a.ti)(e),n=Math.min.apply(Math,t.map(function(e){return e.x})),i=Math.min.apply(Math,t.map(function(e){return e.y}));return{left:n,top:i,width:Math.max.apply(Math,t.map(function(e){return e.x}))-n,height:Math.max.apply(Math,t.map(function(e){return e.y}))-i}}function o(e){var t=r(e);return{x:t.width,y:t.height}}function s(e){var t=(0,a.eo)(e);return o((0,a.XG)((0,a.yE)(-t),e))}function c(e){return(0,a.So)(e,{x:.5,y:.5})}function d(e,t,n){var i=c(t);return(0,a.XG)((0,a.b$)(e,i.x,i.y),n)}function l(e){return i(function(e){var t=c(e),n=r(e);return{top:t.y-n.width/2,left:t.x-n.height/2,width:n.height,height:n.width}}(e))}}
,7340:(e,t,n)=>{"use strict";n.d(t,{H:()=>a,YM:()=>i,yK:()=>r});var a=180/Math.PI;function i(e){return e>180?e-=360:e<=-180&&(e+=360),e}function r(e,t){var n=i(t)-i(e);return n>180?n-=360:n<-180&&(n+=360),n}}
,9829:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var a=n(8451),i=function(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(null==e||null==t)return!1;if("boolean"==typeof e||"string"==typeof e)return e===t;if("number"==typeof e&&"number"==typeof t)return(0,a.J)(e,t,n);for(var r=Object.keys(e),o=Object.keys(t),s=r.concat(o.filter(function(e){return!r.includes(e)})),c=0;c<s.length;c++){var d=s[c];if(!i(e[d],t[d],n))return!1}return!0}}
,8451:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var a=n(4139);function i(e,t,n){return 0===(0,a.L)(t-e,n)}}
,9680:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var a=function(e,t,n){return Math.min(Math.max(e,t),n)}}
,5966:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(9739),i=n(512);function r(e,t){return void 0===e&&(e=a.Hf),(0,i.XG)(t,(0,a.zb)(e))}}
,3745:(e,t,n)=>{"use strict";n.d(t,{O3:()=>s,Rg:()=>c,Ri:()=>u,Sh:()=>o,ag:()=>r,gQ:()=>f,rw:()=>d,xt:()=>p});var a=n(512),i=n(1946),r=function(e,t,n,a,i,r){var o=c(e,t,n,a);return f(o,i,r)},o=function(e,t,n,a,i,r){var o=u(e,i,r);return s(o,t,n,a)},s=function(e,t,n,i){var r=(0,a.iE)(t),o=d(e,i),s={x:o.x*n,y:o.y*n};return(0,a.So)(r,s)},c=function(e,t,n,i){var r=(0,a.So)(t,e),o={x:r.x/n,y:r.y/n};return l(o,i)},d=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},l=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},u=function(e,t,n){return{x:.01*e.x*t,y:.01*e.y*n}},f=function(e,t,n){return{x:e.x/t*100,y:e.y/n*100}},p=function(e,t,n){var r=(0,a.So)(t,e),o=(0,a.So)((0,a.iE)(n),r);return(0,i.P)(o.x,0,1)||(0,i.P)(o.y,0,1)?{x:.5,y:.5}:o}}
,9739:(e,t,n)=>{"use strict";n.d(t,{Hf:()=>o,To:()=>l,lY:()=>d,q1:()=>u,zb:()=>c});var a=n(7340),i=n(512),r=n(5687),o=1,s=new Map([[1,{angle:0,mirror:!1}],[2,{angle:0,mirror:!0}],[3,{angle:180,mirror:!1}],[4,{angle:180,mirror:!0}],[5,{angle:-90,mirror:!0}],[6,{angle:90,mirror:!1}],[7,{angle:90,mirror:!0}],[8,{angle:-90,mirror:!1}]]);function c(e,t,n){void 0===t&&(t={x:1,y:1}),void 0===n&&(n=t);var a=s.get(e),r=a.angle,o=a.mirror,c=(0,i.XG)((0,i.yE)(r),o?(0,i.a1)():(0,i.yz)(),(0,i.W3)(t.x,t.y)),d=(0,i.So)(c,{x:0,y:0}),l=(0,i.So)(c,{x:n.x,y:0}),u=(0,i.So)(c,{x:n.x,y:n.y}),f=(0,i.So)(c,{x:0,y:n.y}),p=Math.min(d.x,l.x,u.x,f.x),m=Math.min(d.y,l.y,u.y,f.y);return(0,i.XG)((0,i.cQ)(-p,-m),c)}function d(e){var t=Math.sign(e.width)!==Math.sign(e.height),n=(0,a.YM)(e.rotation),i=void 0;return s.forEach(function(e,r){e.mirror===t&&Math.abs((0,a.yK)(n,e.angle))<2e-4&&(i=r)}),i}function l(e,t){var n=c(e),a=c(t);return d((0,r.H)((0,i.XG)(a,n)))}function u(e){var t=s.get(e).angle;return 90===Math.abs(t)}}
,9413:(e,t,n)=>{"use strict";function a(e){if(e.max<e.min)throw new Error("bounds.max < bounds.min");return e.max-e.min}n.d(t,{Y:()=>s});var i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e,t,n){var r=i({},e),o=Math.max(0,n-a(r)),s=Math.floor(o/2);r.min-=s,r.max+=s,r.max+=o%2;var c=!1;r.min<t.min&&(r.min=t.min,c=!0);var d=!1;if(r.max>t.max&&(r.max=t.max,d=!0),d===c)return r;var l=n-a(r);return c?r.max=Math.min(r.max+l,t.max):r.min=Math.max(r.min-l,t.min),r}function o(e){return{x:{min:e.left,max:e.left+e.width},y:{min:e.top,max:e.top+e.height}}}function s(e,t,n,a){var i,s=o(e),c=o(t);return{top:(i={x:r(s.x,c.x,n),y:r(s.y,c.y,a)}).y.min,left:i.x.min,width:i.x.max-i.x.min,height:i.y.max-i.y.min}}}
,3198:(e,t,n)=>{"use strict";function a(e){if(0!==e.length){for(var t,n,a,i,r,o=e[0],s=1;s<e.length;s++)t=o,n=e[s],a=Math.min(t.left,n.left),i=Math.max(t.left+t.width,n.left+n.width),o={left:a,top:r=Math.min(t.top,n.top),width:i-a,height:Math.max(t.top+t.height,n.top+n.height)-r};return o}}n.d(t,{r:()=>a})}
,2293:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});var a=n(512),i=n(3080);function r(e,t){if(e[0]&&e[1]){if((0,i.CN)(e[0],e[1]))return;var n=(0,a.So)(t,e[0]),r=(0,a.So)(t,e[1]),o=Math.min(n.y,r.y),s=Math.min(n.x,r.x),c=Math.max(n.y,r.y);return{top:o,left:s,width:Math.max(n.x,r.x)-s,height:c-o}}}}
,4891:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var a=n(2293),i=n(512),r=n(5206);function o(e,t){var n=(0,a.J)(e,t);if(n&&n.width>0&&n.height>0){var o=(0,r.qq)(n);return(0,i.XG)((0,i.iE)(t),o)}}}
,3534:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function i(e,t){return a(a({},e),{left:e.left-t.left,top:e.top-t.top})}}
,9657:(e,t,n)=>{"use strict";function a(e){return(0|e)===e}n.d(t,{F:()=>a})}
,8008:(e,t,n)=>{"use strict";function a(e){return!!e&&e.width>=1&&e.height>=1}n.d(t,{I:()=>a})}
,5385:(e,t,n)=>{"use strict";function a(e,t,n){return e*(1-n)+t*n}function i(e,t,n){var a=(n-e)/(t-e);return Math.min(Math.max(a,0),1)}function r(e,t){return function(n){return a(e,t,n)}}n.d(t,{Ec:()=>a,W4:()=>i,lv:()=>r})}
,512:(e,t,n)=>{"use strict";n.d(t,{Ab:()=>U,C9:()=>V,J:()=>E,JD:()=>L,JH:()=>x,Ls:()=>j,OG:()=>O,OW:()=>_,Oj:()=>R,Rl:()=>l,So:()=>D,St:()=>s,TI:()=>B,Vt:()=>N,W3:()=>u,X$:()=>k,XG:()=>A,XW:()=>z,Xv:()=>C,a1:()=>d,b$:()=>b,cQ:()=>p,eo:()=>g,fh:()=>y,iE:()=>S,jh:()=>F,mi:()=>M,p1:()=>f,rJ:()=>m,rt:()=>P,tM:()=>H,ti:()=>w,tq:()=>I,v7:()=>T,yE:()=>h,yz:()=>c});var a=n(3080),i=n(5385),r=n(7340),o=n(8451);function s(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function c(){return[1,0,0,0,1,0]}function d(e){return void 0===e&&(e=0),[-1,0,2*e,0,1,0]}function l(e){return void 0===e&&(e=0),[1,0,0,0,-1,2*e]}function u(e,t){return void 0===t&&(t=e),[e,0,0,0,t,0]}function f(e,t,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),[e,0,(e-1)*-n,0,t,(t-1)*-a]}function p(e,t){return[1,0,e,0,1,t]}function m(e){return[e[0],e[1],Math.round(e[2]),e[3],e[4],Math.round(e[5])]}function _(e){return[Math.round(e[0]),Math.round(e[1]),Math.round(e[2]),Math.round(e[3]),Math.round(e[4]),Math.round(e[5])]}function h(e){var t=e*Math.PI/180,n=Math.cos(t),a=Math.sin(t);return[n,-a,0,a,n,0]}function b(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),A(p(t,n),h(e),p(-t,-n))}function g(e){return(0,r.YM)(Math.atan2(e[4],e[1])*r.H-90)}function v(e){return e[0]*e[4]-e[1]*e[3]}function y(e){return 0!==v(e)}function S(e){var t=v(e);if(0===t)throw new RangeError("Invalid Matrix: determinant is zero");var n=1/t,a=e[0],i=e[1],r=e[2],o=e[3],s=e[4],c=e[5];return[s*n,-i*n,(i*c-r*s)*n,-o*n,a*n,(r*o-a*c)*n]}function D(e,t){return{x:t.x*e[0]+t.y*e[1]+e[2],y:t.x*e[3]+t.y*e[4]+e[5]}}function I(e){return{x:e[0],y:e[3]}}function x(e){return{x:e[1],y:e[4]}}function C(e){return(0,a.sF)(I(e))}function O(e){return(0,a.sF)(x(e))}function w(e){return[{x:e[2],y:e[5]},{x:e[0]+e[2],y:e[3]+e[5]},{x:e[0]+e[1]+e[2],y:e[3]+e[4]+e[5]},{x:e[1]+e[2],y:e[4]+e[5]}]}function E(e,t){return D(S(e),t)}function A(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduceRight(function(e,t){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]},[1,0,0,0,1,0])}function L(e){return k(e,1,1)}function k(e,t,n){if(0===t)throw new RangeError("Width cannot be 0");if(0===n)throw new RangeError("Height cannot be 0");var a=v(e=A(u(1/t,1/n),e));return Math.sqrt(Math.abs(a))}function M(e,t,n,a,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var o=k(e,n,a);if(0===o)throw new RangeError("Invalid Matrix");var s=t/o;return f(s,s,i,r)}function P(e,t,n){return e.every(function(e,a){return(0,o.J)(e,t[a],n)})}function T(e,t){return e.every(function(e,n){return e===t[n]})}function U(e,t,n){return[(0,i.Ec)(e[0],t[0],n),(0,i.Ec)(e[1],t[1],n),(0,i.Ec)(e[2],t[2],n),(0,i.Ec)(e[3],t[3],n),(0,i.Ec)(e[4],t[4],n),(0,i.Ec)(e[5],t[5],n)]}function F(e,t){var n=g(e);return A(b(n,0,0),u(t.x,t.y),b(-n,0,0),e)}function H(e){return{x:e[2],y:e[5]}}function R(e,t){var n=I(e),i=x(e),r=H(e),o=C(e),s=O(e),c=(0,a.dR)(n),d=(c+2*t)/c,l=(0,a.f1)(n,d),u=(0,a.dR)(i),f=(u+2*t)/u,p=(0,a.f1)(i,f),m=(0,a.wp)(r,(0,a.Tf)((0,a.f1)(o,t),(0,a.f1)(s,t)));return[l.x,p.x,m.x,l.y,p.y,m.y]}function N(e){if(6!==e.length)throw new TypeError("Invalid number array: must contain 6 elements");return[e[0],e[1],e[2],e[3],e[4],e[5]]}function B(e){return[e[0],e[3],e[1],e[4],e[2],e[5]]}function j(e){return[e[0],e[2],e[4],e[1],e[3],e[5]]}function V(e,t,n){return[e.x,t.x,n.x,e.y,t.y,n.y]}function z(e){return(0,a.dR)(I(e))/(0,a.dR)(x(e))}}
,2827:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var a=n(512);function i(e,t,n){var i=t(n);return(0,a.XG)(i,e)}}
,9024:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(9680),i=n(5385);function r(e,t){t=(0,a.q)(t,0,1),t*=e.length-1;var n=Math.floor(t),r=Math.ceil(t);if(t===n)return e[n];var o=e[n],s=e[r];return(0,i.Ec)(o,s,(0,i.W4)(n,r,t))}}
,1946:(e,t,n)=>{"use strict";n.d(t,{P:()=>a,r:()=>i});var a=function(e,t,n){return t<n?e<t||e>n:e<n||e>t},i=function(e,t){return a(e.x,t.left,t.right)||a(e.y,t.top,t.bottom)}}
,7830:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(512),i=n(3080);function r(e,t,n,r){var o=e,s=t,c=n,d=r,l=(0,i.wp)(s,o),u=(0,i.wp)(c,d),f=(0,i.wp)(c,o),p=[l.x,u.x,0,l.y,u.y,0];if((0,a.fh)(p)){var m=(0,a.J)(p,f),_=m.x,h=m.y;if(h>=0&&h<=1&&_>0)return _}}}
,4139:(e,t,n)=>{"use strict";function a(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n+0}function i(e){return-Math.round(-e)}n.d(t,{L:()=>a,e:()=>i})}
,9885:(e,t,n)=>{"use strict";function a(e,t,n){var a=n.width/t.width,i=n.height/t.height,r=Math.max(a,i),o={left:0,top:0,width:n.width,height:n.height};return{imageTransform:{width:e.width*r,height:e.height*r,x:o.width-(o.width/2+r*t.width/2)-t.left*r+e.x*r,y:o.height-(o.height/2+r*t.height/2)-t.top*r+e.y*r,rotation:e.rotation},cropRectangle:o}}n.d(t,{R:()=>a})}
,3080:(e,t,n)=>{"use strict";n.d(t,{AI:()=>g,CN:()=>v,Fw:()=>d,Gl:()=>D,Id:()=>r,Nz:()=>I,Rd:()=>m,Tf:()=>c,Ws:()=>h,X8:()=>S,bp:()=>C,dR:()=>s,f1:()=>f,lU:()=>x,ln:()=>y,mW:()=>p,nF:()=>o,sF:()=>u,si:()=>_,wp:()=>l,y8:()=>b});var a=n(7340),i=n(4139),r={x:0,y:0};function o(e,t){return e.x*t.x+e.y*t.y}function s(e){return Math.hypot(e.x,e.y)}function c(e,t){return{x:e.x+t.x,y:e.y+t.y}}function d(e){return e.reduce(function(e,t){return c(e,t)},r)}function l(e,t){return{x:e.x-t.x,y:e.y-t.y}}function u(e){var t=s(e);if(0===t)throw new RangeError("Invalid Vector: Vector length is 0");return{x:e.x/t,y:e.y/t}}function f(e,t){return{x:e.x*t,y:e.y*t}}function p(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function m(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function _(e){return{x:(0,i.L)(e.x,0),y:(0,i.L)(e.y,0)}}function h(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function b(e,t){if(0===t.x||0===t.y)throw new RangeError("Invalid divisor vector.  Elements must be non-zero.");return{x:e.x/t.x,y:e.y/t.y}}function g(e,t){return{x:e.x*t.x,y:e.y*t.y}}function v(e,t){return e.x===t.x&&e.y===t.y}function y(e){return e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1}function S(e){return{x:e.y,y:e.x}}function D(e,t){return s(l(e,t))}function I(e,t,n){return D(e,t)<=n}function x(e,t){var n=t/a.H,i=Math.cos(n),r=Math.sin(n),o=e.x,s=e.y;return{x:i*o-r*s,y:r*o+i*s}}function C(e,t){if(!v(e,t))return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI-90}}
,6039:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,T:()=>i});var a=Object.freeze({width:0,height:0}),i={ariaAnnouncementMessage:void 0,ariaAnnouncementScenario:void 0}}
,4584:(e,t,n)=>{"use strict";n.d(t,{rb:()=>d,r9:()=>s,Ac:()=>c});var a,i=n(9397),r=n(6039),o=(0,i.X0)({name:"AriaAnnouncementState",initialState:r.T,reducers:{setAriaAnnouncement:function(e,t){!function(e,t){var n;e.ariaAnnouncementMessage=e.ariaAnnouncementMessage===(n=t)?n+"":n}(e,t.payload)},setAriaAnnouncementScenario:function(e,t){!function(e,t){e.ariaAnnouncementScenario=t}(e,t.payload)}}}),s=(a=o.actions).setAriaAnnouncement,c=a.setAriaAnnouncementScenario,d=o.reducer}
,5378:(e,t,n)=>{"use strict";n.d(t,{U8:()=>_,Bo:()=>m,ZS:()=>f,jV:()=>l,Zs:()=>u,J:()=>p});var a,i=n(9397),r=n(5854),o=n(3298),s=n(3080),c={currentActivityKey:n(252).cF,cursorScreenPosition:s.Id,mouseCursorIsActive:!1,shouldShowCursorAtCenter:!1,radiusIsChanging:!1,brushByActivity:{Crop:{maskBrushRadiusInScreenPixels:17.5},Adjustment:{maskBrushRadiusInScreenPixels:17.5},Filter:{maskBrushRadiusInScreenPixels:17.5},Markup:{maskBrushRadiusInScreenPixels:17.5},Retouch:{maskBrushRadiusInScreenPixels:30},InPaint:{maskBrushRadiusInScreenPixels:17.5},Background:{maskBrushRadiusInScreenPixels:17.5},Relight:{maskBrushRadiusInScreenPixels:17.5},FocalPoint:{maskBrushRadiusInScreenPixels:17.5},Stylizer:{maskBrushRadiusInScreenPixels:17.5},SuperResolution:{maskBrushRadiusInScreenPixels:17.5}}},d=(0,i.X0)({name:"brushCursor",initialState:c,reducers:{setBrushRadiusInScreenPixels:function(e,t){e.brushByActivity[e.currentActivityKey].maskBrushRadiusInScreenPixels=t.payload},setBrushRadiusIsChanging:function(e,t){e.radiusIsChanging=t.payload},setBrushCursorScreenPosition:function(e,t){e.cursorScreenPosition=t.payload,e.mouseCursorIsActive=!0},setShouldShowBrushCursorAtCenter:function(e,t){e.shouldShowCursorAtCenter=t.payload},setBrushCursorMouseIsActive:function(e,t){e.mouseCursorIsActive=t.payload}},extraReducers:function(e){e.addCase(r.Ls,function(e,t){e.mouseCursorIsActive=!0}),e.addCase(r.Kd,function(e,t){e.cursorScreenPosition=t.payload.pointerPhysicalPixelPos,e.mouseCursorIsActive=!0}),e.addCase(r.w$,function(e,t){e.mouseCursorIsActive=!1}),e.addCase(o.Ax,function(e,t){e.mouseCursorIsActive=!1,e.currentActivityKey=t.payload})}}),l=(a=d.actions).setBrushRadiusInScreenPixels,u=a.setBrushRadiusIsChanging,f=a.setBrushCursorScreenPosition,p=a.setShouldShowBrushCursorAtCenter,m=a.setBrushCursorMouseIsActive,_=d.reducer}
,3193:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var a,i=n(7766),r=((a={})[i.F.Brightness]="colorAdjustmentBrightness",a[i.F.Exposure]="colorAdjustmentExposure",a[i.F.Contrast]="colorAdjustmentContrast",a[i.F.Highlights]="colorAdjustmentHighlights",a[i.F.Shadows]="colorAdjustmentShadows",a[i.F.Saturation]="colorAdjustmentSaturation",a[i.F.Temperature]="colorAdjustmentTemperature",a[i.F.Tint]="colorAdjustmentTint",a[i.F.Vignette]="colorAdjustmentVignette",a[i.F.Sharpness]="colorAdjustmentSharpness",a)}
,1249:(e,t,n)=>{"use strict";n.d(t,{FT:()=>S,tZ:()=>y});var a=n(9397),i=n(5854),r=n(8085);function o(e){return void 0!==e.baseAdjustments}var s=n(5459),c={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),o(t.undoPayload)?Object.assign(e,t.undoPayload):(0,s.I)(e.baseAdjustments,e.adjustmentsByDynamicLayer,t.undoPayload.dynamicLayerId)[t.undoPayload.adjustmentKey]=t.undoPayload.adjustmentValue},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),o(t.redoPayload)?Object.assign(e,t.redoPayload):(0,s.I)(e.baseAdjustments,e.adjustmentsByDynamicLayer,t.redoPayload.dynamicLayerId)[t.redoPayload.adjustmentKey]=t.redoPayload.adjustmentValue},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},d=n(2506),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function u(e,t){return t?l(l({},e),t):e}var f,p=n(4107),m=n(8696),_=n(3193),h=n(404),b=n(1006),g=function(){return g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},v=(0,a.X0)({name:"colorAdjustments",initialState:d.$O,reducers:{setAdjustmentValue:function(e,t){!function(e,t){var n=(0,s.I)(e.baseAdjustments,e.adjustmentsByDynamicLayer,t.payload.dynamicLayerId);if(e.undoPayload||(e.undoPayload={adjustmentKey:t.payload.adjustmentKey,dynamicLayerId:t.payload.dynamicLayerId,adjustmentValue:n[t.payload.adjustmentKey]},e.disableUndoRedoOverride=!0),n[t.payload.adjustmentKey]=t.payload.adjustmentValue,t.payload.isUndoRedoable){var a={adjustmentKey:t.payload.adjustmentKey,dynamicLayerId:t.payload.dynamicLayerId,adjustmentValue:t.payload.adjustmentValue};if((0,m.G)(e.undoPayload,a)){var i=(0,r.Ey)(_.w[t.payload.adjustmentKey],e.undoPayload,a,p.Z.KeepAll);e.undoRedoStack.undoStack.push(i)}e.undoPayload=void 0,e.disableUndoRedoOverride=!1}}(e,t)},setAllAdjustments:function(e,t){return u(e,t.payload)},setAdjustmentVersion:function(e,t){e.version=t.payload},setMaskLevel:function(e,t){e.maskLevel=t.payload}},extraReducers:function(e){e.addCase(i.gP,function(e,t){(0,b.s)(e,t.payload,"replaceImageColorAdjustments",function(e){Object.assign(e,d.Qj)})}).addCase(i.Cj,function(e,t){return g({},d.$O)}).addCase(i.x2,function(e,t){return u(e,t.payload.adjustments)}).addCase(h.EP,function(e,t){e.adjustmentsByDynamicLayer[t.payload.layerId]=(0,d.AK)()}).addCase(h.qJ,function(e,t){delete e.adjustmentsByDynamicLayer[t.payload],e.selectedDynamicLayerId===t.payload&&(e.selectedDynamicLayerId=d.$O.selectedDynamicLayerId)}).addCase(h.FY,function(e,t){e.selectedDynamicLayerId=t.payload}),(0,r.h$)(e,c)}}),y=(f=v.actions).setAdjustmentValue,S=(f.setAllAdjustments,f.setAdjustmentVersion,f.setMaskLevel,v.reducer)}
,2506:(e,t,n)=>{"use strict";n.d(t,{$O:()=>l,AK:()=>o,MK:()=>s,Qj:()=>d});var a=n(9710),i=n(5009),r=function(){return r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function o(){var e={};return(0,a.hV)().forEach(function(t){e[t]=a.pS}),e}function s(e){var t={};return Object.keys(e).forEach(function(e){t[e]=o()}),r(r({},c),{adjustmentsByDynamicLayer:t})}var c={version:i.A.Latest,maskLevel:0,baseAdjustments:o(),adjustmentsByDynamicLayer:{},selectedDynamicLayerId:void 0},d=r(r({},c),{disableUndoRedoOverride:void 0,undoPayload:void 0}),l=r(r({},d),{undoRedoStack:{undoStack:[],redoStack:[],id:"colorAdjustmentUndoRedoStack"}})}
,5854:(e,t,n)=>{"use strict";n.d(t,{Cj:()=>d,Kd:()=>o,Ls:()=>s,UI:()=>r,fy:()=>i,gP:()=>f,k6:()=>u,w$:()=>c,x2:()=>l});var a=n(9397),i=(0,a.qP)("edit/handlePointerDown"),r=(0,a.qP)("edit/handlePointerUp"),o=(0,a.qP)("edit/handlePointerMove"),s=(0,a.qP)("edit/handlePointerEnter"),c=(0,a.qP)("edit/handlePointerLeave"),d=(0,a.qP)("edit/resetEdits"),l=(0,a.qP)("edit/setEdits"),u=(0,a.qP)("edit/requestTexturePatch"),f=(0,a.qP)("edit/replaceImage")}
,404:(e,t,n)=>{"use strict";n.d(t,{EP:()=>c,l7:()=>u,qJ:()=>d,FY:()=>l});var a,i=n(9397),r={selectedLayerId:void 0,layers:[]},o=n(5854),s=(0,i.X0)({name:"dynamicLayers",initialState:r,reducers:{addDynamicLayer:function(e,t){e.layers.push(t.payload)},removeDynamicLayer:function(e,t){var n=e.layers.findIndex(function(e){return e.layerId===t.payload});if(!(n>=0))throw new Error("Dynamic layer the be removed was not found");e.layers.splice(n)},setSelectedDynamicLayer:function(e,t){e.selectedLayerId=t.payload}},extraReducers:function(e){e.addCase(o.Cj,function(e,t){return r})}}),c=(a=s.actions).addDynamicLayer,d=a.removeDynamicLayer,l=a.setSelectedDynamicLayer,u=s.reducer}
,784:(e,t,n)=>{"use strict";n.d(t,{M:()=>s,R:()=>c});var a=n(3883),i=n(4220),r=n(2759),o=n(9467),s={pen1:{thicknessInCssPixels:4,htmlColor:o.Nf,inkType:r.p.Pen,strokeShape:{arrowMode:a.x.NoArrow,lineMode:i.y.FreeHand}},pen2:{thicknessInCssPixels:4,htmlColor:o.e9,inkType:r.p.Pen,strokeShape:{arrowMode:a.x.NoArrow,lineMode:i.y.FreeHand}},highlighter:{thicknessInCssPixels:16,htmlColor:o.Mk,inkType:r.p.Highlighter,strokeShape:{arrowMode:a.x.NoArrow,lineMode:i.y.FreeHand}}},c=Object.keys(s)[0]}
,3298:(e,t,n)=>{"use strict";n.d(t,{ys:()=>F,P_:()=>q,SG:()=>R,xp:()=>h,eI:()=>Q,IO:()=>D,Rh:()=>B,fS:()=>y,Il:()=>H,Cc:()=>E,Bp:()=>v,Ax:()=>S,O:()=>A,uZ:()=>M,ek:()=>P,Sh:()=>x,RS:()=>W,Yc:()=>k,t4:()=>z,_j:()=>L,iy:()=>j,aQ:()=>O,tl:()=>V,$D:()=>G,D4:()=>N,cb:()=>C,Uk:()=>g,IE:()=>T,Oo:()=>U,mv:()=>K,QP:()=>w,id:()=>I});var a,i=n(9397),r=n(1443),o=n(252),s=n(5854),c=n(1249),d=n(3080),l=n(3883),u=n(6899),f=n(784),p={activeInkBrushId:f.R,inkBrushes:f.M,activeMarkupToolType:u.Mu,previousActiveMarkupToolType:void 0,showInkStylePicker:!1,strokeShapeTipVisibilityState:"notShown",markupCursorScreenPosition:{x:0,y:0},isKeyboardInputActive:!1,linePreviewCoords:{startPoint:void 0,endPoint:void 0}},m=n(4795),_=function(){return _=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)},h={showAspectRatioOptions:!1,activeAdjustmentKey:void 0,activeEditorActivity:o.cF,activeEditorActivityInputType:"",nextEditorActivity:void 0,waitingForActiveEditorActivityToComplete:!1,waitingForMarkupOverlayTexture:!1,shouldWaitForEditorActivityToComplete:!1,numberOfResets:0,isViewingOriginal:!1,markupUiState:p,magicEraseUiState:{magicEraseTeachingTipVisibilityState:"notShown"},stylizerProcessingStatus:m.V,userFacingErrorMessages:[],initialBackgroundTypeToApply:void 0,hasInitialBackgroundTypeBeenApplied:!1},b=(0,i.X0)({name:"EditorUiState",initialState:h,reducers:{setShowAspectRatioOptions:function(e,t){e.showAspectRatioOptions=t.payload},setActiveAdjustment:function(e,t){e.activeAdjustmentKey=t.payload},prepareEditorActivityChange:function(e,t){var n=t.payload,a=n.nextEditorActivity,i=n.inputType;a&&e.activeEditorActivity!==a&&(e.shouldWaitForEditorActivityToComplete&&(e.waitingForActiveEditorActivityToComplete=!0),e.nextEditorActivity=a,(0,r.xE)(),(0,r.rS)(e.nextEditorActivity)),i&&(e.activeEditorActivityInputType=i)},cancelEditorActivityChange:function(e){var t=e.nextEditorActivity;e.waitingForActiveEditorActivityToComplete=!1,e.nextEditorActivity=void 0,(0,r.Px)(),(0,r.G0)(t)},setActiveEditorActivity:function(e,t){if(t.telemetry){var n=(0,r.wy)();n&&t.payload&&t.telemetry.logEditorActivityChangePrepareTimeEvent({fromEditorActivityName:e.activeEditorActivity,prepareTimeInMs:n,toEditorActivityName:t.payload})}t.payload&&(e.activeEditorActivity=t.payload,e.isViewingOriginal=!1,e.nextEditorActivity=void 0,t.payload!==o.qO&&"showing"===e.markupUiState.strokeShapeTipVisibilityState&&(e.markupUiState.strokeShapeTipVisibilityState="alreadyShown"))},handleOverlayTextureLoaded:function(e,t){e.waitingForActiveEditorActivityToComplete=!1,e.waitingForMarkupOverlayTexture=!1,e.shouldWaitForEditorActivityToComplete=!1},setWaitingForMarkupOverlayTexture:function(e,t){e.waitingForMarkupOverlayTexture=t.payload},setDoneWaitingForActiveEditorActivityToComplete:function(e){e.waitingForActiveEditorActivityToComplete=!1,e.shouldWaitForEditorActivityToComplete=!1},setShouldWaitForEditorActivityToComplete:function(e,t){e.shouldWaitForEditorActivityToComplete=t.payload},setIsViewingOriginal:function(e,t){e.isViewingOriginal=t.payload},setActiveMarkupInkBrushId:function(e,t){e.markupUiState.activeInkBrushId=t.payload},setInkBrushes:function(e,t){e.markupUiState.inkBrushes=t.payload},setInkBrush:function(e,t){!function(e,t,n){e.markupUiState.inkBrushes[n]=t}(e,t.payload.inkBrush,t.payload.id);var n=t.payload.inkBrush,a=n.htmlColor,i=n.inkType,r=n.thicknessInCssPixels,o=n.strokeShape,s=o.lineMode,c=o.arrowMode,d=void 0===c?l.x.NoArrow:c;t.telemetry&&t.telemetry.logInkBrushUpdateEvent({color:a,inkType:i,thicknessInCssPixels:r,lineMode:s,arrowMode:d})},setInkBrushVisibility:function(e,t){e.markupUiState.inkBrushes[t.payload.inkBrushId].isInkBrushvisible=t.payload.isInkBrushVisible},setActiveMarkupToolType:function(e,t){e.markupUiState.previousActiveMarkupToolType=e.markupUiState.activeMarkupToolType,e.markupUiState.activeMarkupToolType=t.payload,t.telemetry&&t.telemetry.logMarkupToolSelectEvent({activeMarkupToolType:t.payload})},setActiveMarkupToolTypeWithoutTelemetry:function(e,t){e.markupUiState.previousActiveMarkupToolType=e.markupUiState.activeMarkupToolType,e.markupUiState.activeMarkupToolType=t.payload},setShowInkStylePicker:function(e,t){e.markupUiState.showInkStylePicker=t.payload},setUiState:function(e,t){return _(_({},e),t.payload)},resetUiState:function(e,t){return _(_({},h),{magicEraseUiState:_(_({},h.magicEraseUiState),{magicEraseTeachingTipVisibilityState:e.magicEraseUiState.magicEraseTeachingTipVisibilityState})})},setStrokeShapeTipVisibilityState:function(e,t){e.markupUiState.strokeShapeTipVisibilityState=t.payload},addUserFacingMessage:function(e,t){e.userFacingErrorMessages.push(t.payload)},removeUserFacingMessage:function(e,t){e.userFacingErrorMessages=e.userFacingErrorMessages.filter(function(e){return e.id!==t.payload})},clearUserFacingMessages:function(e){e.userFacingErrorMessages=[]},setMarkupCursorScreenPosition:function(e,t){e.markupUiState.markupCursorScreenPosition=t.payload},moveMarkupCursorScreenPositionBy:function(e,t){e.markupUiState.isKeyboardInputActive=!0;var n=t.payload;e.markupUiState.markupCursorScreenPosition=(0,d.Tf)(e.markupUiState.markupCursorScreenPosition,_({x:0,y:0},n))},setIsKeyboardInputActive:function(e,t){e.markupUiState.isKeyboardInputActive=t.payload},setLinePreviewCoords:function(e,t){e.markupUiState.linePreviewCoords=t.payload},setMagicEraseTeachingTipVisibilityState:function(e,t){e.magicEraseUiState.magicEraseTeachingTipVisibilityState=t.payload},setStylizerProcessingStatus:function(e,t){e.stylizerProcessingStatus=t.payload},setInitialBackgroundTypeHasBeenApplied:function(e,t){e.hasInitialBackgroundTypeBeenApplied=!0}},extraReducers:function(e){e.addCase(s.Cj,function(e,t){e.numberOfResets+=1}).addCase(s.fy,function(e,t){!t.payload.isPrimaryButtonDownOrTouchDown||e.activeEditorActivity!==o.lm&&e.activeEditorActivity!==o.Xc&&e.activeEditorActivity!==o.co||(e.isViewingOriginal=!0)}).addCase(s.UI,function(e,t){e.isViewingOriginal=!1}).addCase(c.tZ,function(e,t){e.activeEditorActivity===o.qO&&(e.activeEditorActivity=o.lm)})}}),g=(a=b.actions).setShowAspectRatioOptions,v=a.setActiveAdjustment,y=a.prepareEditorActivityChange,S=a.setActiveEditorActivity,D=a.handleOverlayTextureLoaded,I=a.setWaitingForMarkupOverlayTexture,x=a.setDoneWaitingForActiveEditorActivityToComplete,C=a.setShouldWaitForEditorActivityToComplete,O=a.setIsViewingOriginal,w=a.setUiState,E=a.resetUiState,A=a.setActiveMarkupInkBrushId,L=a.setInkBrushes,k=a.setInkBrush,M=a.setActiveMarkupToolType,P=a.setActiveMarkupToolTypeWithoutTelemetry,T=a.setShowInkStylePicker,U=a.setStrokeShapeTipVisibilityState,F=a.addUserFacingMessage,H=a.removeUserFacingMessage,R=a.clearUserFacingMessages,N=a.setMarkupCursorScreenPosition,B=a.moveMarkupCursorScreenPositionBy,j=a.setIsKeyboardInputActive,V=a.setLinePreviewCoords,z=a.setInkBrushVisibility,G=a.setMagicEraseTeachingTipVisibilityState,K=a.setStylizerProcessingStatus,W=a.setInitialBackgroundTypeHasBeenApplied,q=a.cancelEditorActivityChange,Q=b.reducer}
,4795:(e,t,n)=>{"use strict";var a;n.d(t,{V:()=>i,o:()=>a}),function(e){e.HarmfulInput="HarmfulInput",e.HarmfulOutput="HarmfulOutput",e.UnknownError="UnknownError",e.UnsafePrompt="UnsafePrompt"}(a||(a={}));var i="notProcessing"}
,6981:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var a={focalPointUvPosition:void 0,initialFocalPointUvPosition:void 0,undoRedoStack:{undoStack:[],redoStack:[],id:"focalPointUndoRedoStack"},undoPayload:void 0}}
,2953:(e,t,n)=>{"use strict";n.d(t,{JN:()=>_,e5:()=>p,yy:()=>m});var a,i=n(9397),r=n(6981),o=n(8696),s=n(8085),c=n(8914),d=n(4107),l=n(5854),u={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),e.focalPointUvPosition=t.undoPayload.focalPointUvPosition},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),e.focalPointUvPosition=t.redoPayload.focalPointUvPosition},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},f=(0,i.X0)({name:"focalPoint",initialState:r.G,reducers:{setFocalPoint:function(e,t){!function(e,t){var n=t.payload.focalPointUvPosition;e.undoPayload||(e.undoPayload={focalPointUvPosition:e.focalPointUvPosition});var a={focalPointUvPosition:n};if(e.focalPointUvPosition=n?{x:n.x,y:n.y}:e.focalPointUvPosition,(0,o.G)(e.undoPayload,a)&&t.payload.isUndoRedoable){var i=(0,s.Ey)(c.L,e.undoPayload,a,d.Z.KeepAll);e.undoRedoStack.undoStack.push(i),e.undoPayload=void 0}}(e,t)},setInitialFocalPoint:function(e,t){e.initialFocalPointUvPosition=t.payload.initialFocalPointUvPosition,e.focalPointUvPosition=t.payload.initialFocalPointUvPosition}},extraReducers:function(e){e.addCase(l.Cj,function(e,t){e.focalPointUvPosition=e.initialFocalPointUvPosition,e.undoRedoStack=r.G.undoRedoStack}).addCase(l.x2,function(e,t){var n=t.payload.focalPoint,a=n.focalPointUvPosition,i=n.undoRedoStack;a&&(e.focalPointUvPosition=a),i&&(e.undoRedoStack=i)}),(0,s.h$)(e,u)}}),p=(a=f.actions).setFocalPoint,m=a.setInitialFocalPoint,_=f.reducer}
,8914:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var a="focalPoint"}
,8708:(e,t,n)=>{"use strict";n.d(t,{c0:()=>s,gR:()=>i,h1:()=>o,y2:()=>r,zh:()=>a});var a=.01171875,i=10,r=0,o=1,s=.5}
,3239:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var a=n(5011),i=n(7186),r=n(8708),o={backgroundsByType:{OriginalBackground:{type:"OriginalBackground"},ColorRGBABackground:{type:"ColorRGBABackground",color:a.Yn},TransparentBackground:{type:"TransparentBackground"},BlurredBackground:{type:"BlurredBackground",blurLevel:r.c0}},backgroundType:"OriginalBackground",activeBackgroundUiMode:i.V.Uninitialized,undoRedoStack:{undoStack:[],redoStack:[],id:"imageBackgroundUndoRedoStack"},backgroundOptionsTeachingTipVisibilityState:"notShown",hasBackgroundTypeBeenChangedThisActivitySession:!1}}
,3852:(e,t,n)=>{"use strict";n.d(t,{gG:()=>S,yK:()=>y,U3:()=>g,_z:()=>v});var a=n(9397),i=n(3239),r=n(8085),o=n(5854);function s(e,t){e.backgroundType=t.type,e.backgroundsByType[e.backgroundType]=t}var c={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),s(e,t.undoPayload)},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),s(e,t.redoPayload)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},d=n(4107),l=n(4826);function u(e){var t=e.backgroundType;return e.backgroundsByType[t]}var f=n(4698);function p(e,t){var n=function(e){var t;return null===(t=(0,f.PV)(e.undoRedoStack.undoStack))||void 0===t?void 0:t.redoPayload}(e)||u(e);!function(e,t){e.backgroundsByType[t.background.type]=t.background,e.backgroundType=t.background.type}(e,t);var a=u(e);if(!function(e,t){if(e.type!==t.type)return!1;var n,a;switch(e.type){case"BlurredBackground":if("BlurredBackground"!==e.type)throw new Error("types not matched");if("BlurredBackground"!==t.type)throw new Error("types not matched");return e.blurLevel===t.blurLevel;case"ColorRGBABackground":if("ColorRGBABackground"!==e.type)throw new Error("types not matched");if("ColorRGBABackground"!==t.type)throw new Error("types not matched");return(n=e.color)===(a=t.color)||!(!n||!a)&&n.every(function(e,t){return e===a[t]});case"OriginalBackground":case"TransparentBackground":return!0}}(n,a)&&t.isUndoable){var i=(0,r.Ey)(l.h,n,a,d.Z.KeepAll,t.undoRedoGroupId);e.undoRedoStack.undoStack.push(i)}}var m,_=n(3298),h=n(1006),b=(0,a.X0)({name:"imageBackground",initialState:i.I,reducers:{setBackground:function(e,t){p(e,t.payload)},setBackgroundType:function(e,t){p(e,{background:e.backgroundsByType[t.payload],isUndoable:!0}),e.hasBackgroundTypeBeenChangedThisActivitySession=!0},setActiveBackgroundUiMode:function(e,t){e.activeBackgroundUiMode=t.payload},setBackgroundOptionsTeachingTipVisibilityState:function(e,t){e.backgroundOptionsTeachingTipVisibilityState=t.payload}},extraReducers:function(e){e.addCase(o.Cj,function(e,t){return i.I}),e.addCase(o.x2,function(e,t){return t.payload.imageBackground}),e.addCase(_.Ax,function(e,t){e.hasBackgroundTypeBeenChangedThisActivitySession=!1}),e.addCase(o.gP,function(e,t){(0,h.s)(e,t.payload,"replaceImageBackground",function(e){i.I.undoRedoStack,i.I.backgroundOptionsTeachingTipVisibilityState,i.I.hasBackgroundTypeBeenChangedThisActivitySession,i.I.backgroundsByType;var t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(i.I,["undoRedoStack","backgroundOptionsTeachingTipVisibilityState","hasBackgroundTypeBeenChangedThisActivitySession","backgroundsByType"]);Object.assign(e,t)},function(e){return u(e)})}),(0,r.h$)(e,c)}}),g=(m=b.actions).setBackground,v=m.setBackgroundType,y=m.setActiveBackgroundUiMode,S=(m.setBackgroundOptionsTeachingTipVisibilityState,b.reducer)}
,4826:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var a="background"}
,1006:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});var a=n(4107),i=n(8085),r=n(1948);function o(e){var t=(0,r.gs)(e);return t.undoRedoStack,function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(t,["undoRedoStack"])}function s(e,t,n,r,s){void 0===s&&(s=o);var c=s(e);r(e);var d=s(e),l=(0,i.Ey)(n,c,d,a.Z.KeepAll,t.undoGroupId);e.undoRedoStack.undoStack.push(l)}}
,3615:(e,t,n)=>{"use strict";n.d(t,{gB:()=>p,mL:()=>u,w3:()=>f});var a,i=n(9397),r=n(5854),o=n(3298),s=n(7186),c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d={activeAlgorithmUiComponentName:void 0,activeAlgorithmUiMode:s.V.Uninitialized},l=(0,i.X0)({name:"inPaintingUi",initialState:d,reducers:{setActiveAlgorithmUi:function(e,t){e.activeAlgorithmUiComponentName=t.payload},setActiveAlgorithmUiMode:function(e,t){e.activeAlgorithmUiMode=t.payload}},extraReducers:function(e){e.addCase(r.Cj,function(e,t){return c({},d)}).addCase(o.Ax,function(e,t){e.activeAlgorithmUiMode=s.V.Uninitialized})}}),u=(a=l.actions).setActiveAlgorithmUi,f=a.setActiveAlgorithmUiMode,p=l.reducer}
,4021:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var a=(0,n(9397).qP)("MarkupSlice/updateMarkupContent",function(e,t){return void 0===t&&(t=!0),{payload:{content:e,isUndoRedoable:t}}})}
,9467:(e,t,n)=>{"use strict";n.d(t,{Ef:()=>u,FY:()=>i,J$:()=>v,JA:()=>d,Mj:()=>_,Mk:()=>a,Nf:()=>f,Tw:()=>o,U8:()=>r,Uy:()=>m,VD:()=>p,aO:()=>c,e9:()=>g,eJ:()=>s,sl:()=>l,yM:()=>b,zs:()=>h});var a="#fed430",i="#fbae17",r="#f36323",o="#e3182d",s="#5b318d",c="#914bb8",d="#cf1278",l="#c10051",u="#3eccfd",f="#0078d7",p="#0051ba",m="#7ec400",_="#00b44b",h="#ebebeb",b="#b6b6b6",g="#1f1f1f",v=1.3}
,4857:(e,t,n)=>{"use strict";n.d(t,{kS:()=>C,JG:()=>w,$0:()=>I,Pq:()=>k,Gp:()=>O,py:()=>E,gU:()=>A,iM:()=>L});var a=n(9397),i=n(5854),r=n(4422),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=n(8085),c=n(4107);function d(e){return"markupContentItems"in e}var l=n(4907);function u(e,t){var n,a=e.markupContentItems.filter(function(e){return t.includes(e.id)});(n=e.removedMarkupContentItems).push.apply(n,a),e.markupContentItems=e.markupContentItems.filter(function(e){return!t.includes(e.id)})}var f={undoReducer:function(e,t){d(t.undoPayload)?(e.markupContentItems=t.undoPayload.markupContentItems,e.removedMarkupContentItems=t.undoPayload.removedMarkupContentItems):p(e,t.undoPayload),e.undoRedoStack.redoStack.push(t)},redoReducer:function(e,t){d(t.redoPayload)?(e.markupContentItems=t.redoPayload.markupContentItems,e.removedMarkupContentItems=t.redoPayload.removedMarkupContentItems):p(e,t.redoPayload),e.undoRedoStack.undoStack.push(t)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){},afterClearRedoStacksReducer:function(e){var t=(0,l.e)(e.undoRedoStack.undoStack.map(function(e){var t=[];if(d(e.undoPayload)){var n=e.undoPayload,a=n.markupContentItems,i=n.removedMarkupContentItems;a.forEach(function(e){return t.push(e.id)}),i.forEach(function(e){return t.push(e.id)})}else{var r=e.undoPayload,o=r.markupContentIdsToAdd,s=r.markupContentIdsToRemove;o&&t.push.apply(t,o),s&&t.push.apply(t,s)}return t}));e.removedMarkupContentItems=e.removedMarkupContentItems.filter(function(e){return null==t?void 0:t.includes(e.id)})}};function p(e,t){var n=t.markupContentIdsToAdd,a=t.markupContentIdsToRemove,i=t.contentIdToReplace,r=t.replacementContent;if(n&&function(e,t){var n,a=e.removedMarkupContentItems.filter(function(e){return t.includes(e.id)});(n=e.markupContentItems).push.apply(n,a),e.removedMarkupContentItems=e.removedMarkupContentItems.filter(function(e){return!t.includes(e.id)})}(e,n),a&&u(e,a),i&&r){var o=e.markupContentItems.findIndex(function(e){return e.id===i});o>=0&&(e.markupContentItems[o]=r)}}var m=n(6318),_=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},h=n(4230),b=n(7592);function g(e){switch(e){case h.A.InkContent:return m.I.inkContent;case h.A.TextContent:return m.I.textContent;default:throw new b.x(e)}}var v,y=n(9829),S=n(4021),D=n(1006),I={markupContentItems:[],removedMarkupContentItems:[],undoRedoStack:{undoStack:[],redoStack:[],id:"markupUndoRedoStack"}},x=(0,a.X0)({name:"MarkupSlice",initialState:I,reducers:{addMarkupContent:{reducer:function(e,t){e.markupContentItems.push(t.payload);var n=(0,s.Ey)(g(t.payload.contentType),{markupContentIdsToRemove:[t.payload.id]},{markupContentIdsToAdd:[t.payload.id]},c.Z.KeepAll);e.undoRedoStack.undoStack.push(n)},prepare:function(e){return{payload:(t=e,n=(0,r.b)(),o(o({},t),{id:n}))};var t,n}},removeMarkupContent:function(e,t){!function(e,t){var n=t.payload;u(e,n);var a=(0,s.Ey)(m.I.eraseContent,{markupContentIdsToAdd:n},{markupContentIdsToRemove:n},c.Z.KeepAll);e.undoRedoStack.undoStack.push(a)}(e,t)},clearAllMarkupContent:function(e,t){!function(e,t){var n=e.markupContentItems.map(function(e){return e.id});u(e,n),t.telemetry&&t.telemetry.logClearAllMarkupEvent({numberOfMarkupRemoved:n.length});var a=(0,s.Ey)(m.I.clearAllMarkupContent,{markupContentIdsToAdd:_([],n,!0)},{markupContentIdsToRemove:_([],n,!0)},c.Z.KeepAll);e.undoRedoStack.undoStack.push(a)}(e,t)},setActiveMarkupContentId:function(e,t){e.activeMarkupContentId=t.payload},setMarkupTextSelection:function(e,t){e.markupTextSelection=t.payload},setMarkupTextStyleAttributes:function(e,t){e.markupTextStyleAttributes=t.payload}},extraReducers:function(e){e.addCase(i.Cj,function(e,t){e.markupContentItems=I.markupContentItems,e.removedMarkupContentItems=I.removedMarkupContentItems,e.undoRedoStack=I.undoRedoStack}).addCase(i.x2,function(e,t){var n=t.payload.markup,a=n.markupContentItems,i=n.undoRedoStack;a&&(e.markupContentItems=a),i&&(e.undoRedoStack=i)}).addCase(S.L,function(e,t){var n=t.payload;!function(e,t,n){void 0===n&&(n=!0);var a=e.markupContentItems.findIndex(function(e){return e.id===t.id});if(a>=0){if((0,y.v)(e.markupContentItems[a],t,5))return;if(n){var i=(0,s.Ey)(g(t.contentType),{contentIdToReplace:t.id,replacementContent:e.markupContentItems[a]},{contentIdToReplace:t.id,replacementContent:t},c.Z.KeepAll);e.undoRedoStack.undoStack.push(i)}e.markupContentItems[a]=t}}(e,n.content,n.isUndoRedoable)}).addCase(i.gP,function(e,t){e.markupContentItems.length>0&&(0,D.s)(e,t.payload,"replaceImageMarkup",function(e){I.undoRedoStack;var t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(I,["undoRedoStack"]);Object.assign(e,t)})}),(0,s.h$)(e,f)}}),C=(v=x.actions).addMarkupContent,O=v.removeMarkupContent,w=v.clearAllMarkupContent,E=v.setActiveMarkupContentId,A=v.setMarkupTextSelection,L=v.setMarkupTextStyleAttributes,k=x.reducer}
,6318:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var a={inkContent:"markupInkContent",textContent:"markupTextContent",eraseContent:"markupEraseInkContent",clearAllMarkupContent:"markupClearAllMarkupContent"}}
,5249:(e,t,n)=>{"use strict";n.d(t,{Dm:()=>f,ZH:()=>u,oE:()=>p,vQ:()=>m});var a,i=n(9397),r=n(252),o=n(3298),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c={mode:"paint",opacity:1,softness:0},d={maskBrushOptionsByActivity:{Crop:c,Adjustment:c,Filter:c,Markup:c,Retouch:s(s({},c),{softness:.25}),InPaint:c,Background:c,Relight:c,FocalPoint:c,Stylizer:c,SuperResolution:c},currentActivityKey:r.cF},l=(0,i.X0)({name:"MaskBrushOptions",initialState:d,reducers:{setBrushMode:function(e,t){e.maskBrushOptionsByActivity[e.currentActivityKey].mode=t.payload},setBrushOpacity:function(e,t){e.maskBrushOptionsByActivity[e.currentActivityKey].opacity=t.payload},setBrushSoftness:function(e,t){e.maskBrushOptionsByActivity[e.currentActivityKey].softness=t.payload}},extraReducers:function(e){e.addCase(o.Ax,function(e,t){e.currentActivityKey=t.payload})}}),u=(a=l.actions).setBrushMode,f=a.setBrushOpacity,p=a.setBrushSoftness,m=l.reducer}
,6547:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>g,S8:()=>p,Vc:()=>b,_U:()=>v,cI:()=>_,jQ:()=>y,oX:()=>h,sT:()=>m});var a,i=n(9397),r=n(1626),o=n(5854),s=n(3298),c=n(252),d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};function l(){return{maskParameters:{maskType:r.D.FromLayer,shouldInvertMask:!1,layerToUseAsMask:"backgroundMask"},maskOpacity:0,selectedUvPositions:[],maskInteractionMode:"none",maskingDisabled:!1}}function u(){return{currentActivityKey:c.cF,maskingUiByActivity:{Crop:l(),Adjustment:l(),Filter:l(),Markup:l(),Retouch:d(d({},l()),{maskOpacity:1,maskParameters:{maskType:r.D.FromLayer,shouldInvertMask:!1,layerToUseAsMask:"eraseMask"},maskInteractionMode:"circleBrush"}),InPaint:d(d({},l()),{maskOpacity:1}),Background:l(),Relight:l(),FocalPoint:l(),Stylizer:d(d({},l()),{maskOpacity:1,maskParameters:{maskType:r.D.FullImageMask},maskInteractionMode:"none"}),SuperResolution:l()},numberOfMaskBrushStrokesMadeByUser:0}}var f=(0,i.X0)({name:"maskingUi",initialState:u(),reducers:{setMaskParameters:function(e,t){e.maskingUiByActivity[e.currentActivityKey].maskParameters=t.payload},setSelectedUvPositions:function(e,t){e.maskingUiByActivity[e.currentActivityKey].selectedUvPositions=t.payload},clearSelectedUvPositions:function(e,t){e.maskingUiByActivity[e.currentActivityKey].selectedUvPositions=[]},setMaskInteractionMode:function(e,t){e.maskingUiByActivity[e.currentActivityKey].maskInteractionMode=t.payload},setMaskOpacity:function(e,t){e.maskingUiByActivity[e.currentActivityKey].maskOpacity=t.payload},incrementNumberMaskBrushStrokesMadeByUser:function(e,t){e.numberOfMaskBrushStrokesMadeByUser=e.numberOfMaskBrushStrokesMadeByUser+1},setMaskingDisabled:function(e,t){e.maskingUiByActivity[e.currentActivityKey].maskingDisabled=t.payload}},extraReducers:function(e){e.addCase(o.Cj,function(e,t){var n=u();return n.currentActivityKey=e.currentActivityKey,d({},n)}).addCase(s.Ax,function(e,t){e.maskingUiByActivity[e.currentActivityKey].selectedUvPositions=[],e.currentActivityKey=t.payload})}}),p=(a=f.actions).setMaskParameters,m=a.setSelectedUvPositions,_=a.clearSelectedUvPositions,h=a.setMaskOpacity,b=a.setMaskInteractionMode,g=a.incrementNumberMaskBrushStrokesMadeByUser,v=a.setMaskingDisabled,y=f.reducer}
,3202:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var a={isLightApplied:!1,lightPosition:.5,lightColor:[1,.97,.95,1],relightUiMode:n(7186).V.Uninitialized,undoRedoStack:{undoStack:[],redoStack:[],id:"imageRelightUndoRedoStack"}}}
,2083:(e,t,n)=>{"use strict";n.d(t,{ro:()=>b,RI:()=>_,pk:()=>h});var a=n(9397),i=n(3202),r=n(8085),o=n(5854),s=n(4698),c=n(4107);function d(e){return{isLightApplied:e.isLightApplied,lightPosition:e.lightPosition,lightColor:e.lightColor}}var l=n(9829);function u(e,t){void 0!==t.isLightApplied&&(e.isLightApplied=t.isLightApplied),void 0!==t.lightPosition&&(e.lightPosition=t.lightPosition),t.lightColor&&(e.lightColor=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],t.lightColor,!0))}var f,p={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),u(e,t.undoPayload)},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),u(e,t.redoPayload)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},m=(0,a.X0)({name:"imageRelight",initialState:i.j,reducers:{setRelight:function(e,t){!function(e,t){var n=function(e){var t;return null===(t=(0,s.PV)(e.undoRedoStack.undoStack))||void 0===t?void 0:t.redoPayload}(e)||d(e);u(e,t);var a,i,o=d(e);if(a=n,i=o,!(0,l.v)(a,i,5)&&t.isUndoRedoable){var f=(0,r.Ey)("relight",n,o,c.Z.KeepAll,t.undoRedoGroupId);e.undoRedoStack.undoStack.push(f)}}(e,t.payload)},setRelightUiMode:function(e,t){e.relightUiMode=t.payload}},extraReducers:function(e){e.addCase(o.Cj,function(e,t){return i.j}),e.addCase(o.x2,function(e,t){return t.payload.relight}),(0,r.h$)(e,p)}}),_=(f=m.actions).setRelight,h=f.setRelightUiMode,b=m.reducer}
,5327:(e,t,n)=>{"use strict";n.d(t,{Lf:()=>r,fn:()=>o});var a,i=(0,n(9397).X0)({name:"spotFixUi",initialState:{spotFixSampleSizeFactor:3,spotFixTipVisibilityState:"notShown"},reducers:{setSpotFixSampleSizeFactor:function(e,t){e.spotFixSampleSizeFactor=t.payload},setSpotFixTipVisibilityState:function(e,t){e.spotFixTipVisibilityState=t.payload}}}),r=((a=i.actions).setSpotFixSampleSizeFactor,a.setSpotFixTipVisibilityState),o=i.reducer}
,6505:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var a={texturePatchRequests:[],pendingTexturePatchRequests:[],removedPendingTexturePatchRequests:[],texturePatchChoices:null,texturePatchInfos:[],removedTexturePatchInfos:[],undoRedoStack:{undoStack:[],redoStack:[],id:"TEXTURE_PATCH_UNDO_REDO_STACK_ID"}}}
,8322:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var a={spotFix:"spotFixUndoRedoPayloadId",blur:"blurUndoRedoPayloadId",maskBrush:"maskBrushUndoRedoPayloadId"}}
,8294:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>l,hY:()=>f,kk:()=>u,rm:()=>p});var a,i=n(9397),r=n(252),o=n(3298),s={algorithmParameters:void 0,applyOnPointerUp:!0},c={currentActivityKey:r.cF,texturePatchAlgorithmUIParametersByActivity:{Crop:s,Adjustment:s,Filter:s,Markup:s,Retouch:s,InPaint:s,Background:s,Relight:s,FocalPoint:s,Stylizer:s,SuperResolution:s}},d=(0,i.X0)({name:"texturePatchAlgorithmUI",initialState:c,reducers:{setAlgorithmParameters:function(e,t){e.texturePatchAlgorithmUIParametersByActivity[e.currentActivityKey].algorithmParameters=t.payload},setLayerToPatch:function(e,t){var n=e.texturePatchAlgorithmUIParametersByActivity[e.currentActivityKey].algorithmParameters;n&&(n.layerToPatch=t.payload)},setApplyOnPointerUp:function(e,t){e.texturePatchAlgorithmUIParametersByActivity[e.currentActivityKey].applyOnPointerUp=t.payload}},extraReducers:function(e){e.addCase(o.Ax,function(e,t){e.currentActivityKey=t.payload})}}),l=(a=d.actions).setAlgorithmParameters,u=a.setLayerToPatch,f=a.setApplyOnPointerUp,p=d.reducer}
,5693:(e,t,n)=>{"use strict";n.d(t,{XJ:()=>k,Sf:()=>F,k3:()=>P,Pm:()=>T,cu:()=>U,BS:()=>M,Ev:()=>H});var a=n(9397),i=n(1948),r=n(6505),o=n(8085),s=n(4907);function c(e){var t=function(e,t,n){var a=e.map(function(e){return"redo"===t?e.redoPayload:e.undoPayload}).filter(function(e){return e.operation===n}),i=(0,s.e)(a.map(function(e){return e.texturePatchInfos})).map(function(e){return e.idValue});return new Set(i)},n=e.undoRedoStack.undoStack.concat(e.undoRedoStack.redoStack),a=t(n,"undo","add"),i=t(n,"redo","remove");e.removedTexturePatchInfos=e.removedTexturePatchInfos.filter(function(e){return a.has(e.idValue)||i.has(e.idValue)})}function d(e,t){var n,a=e.texturePatchInfos.findIndex(function(e){return e.idValue===t.idValue});if(a<0)throw new Error("texture patch not found in removeTexturePatch");(n=e.removedTexturePatchInfos).push.apply(n,e.texturePatchInfos.splice(a,1))}function l(e,t){var n,a=e.removedTexturePatchInfos.findIndex(function(e){return e.idValue===t.idValue});if(a<0)throw new Error("texture patch not found in restoreTexturePatch");(n=e.texturePatchInfos).push.apply(n,e.removedTexturePatchInfos.splice(a,1))}function u(e){e.pendingTexturePatchRequests.length=0,e.texturePatchRequests.length=0}var f={undoReducer:function(e,t){u(e),t.undoPayload.texturePatchInfos.forEach(function(n){"add"===t.undoPayload.operation?d(e,n):"remove"===t.undoPayload.operation&&l(e,n)}),e.undoRedoStack.redoStack.push(t)},redoReducer:function(e,t){u(e),t.redoPayload.texturePatchInfos.forEach(function(n){"add"===t.undoPayload.operation?l(e,n):"remove"===t.undoPayload.operation&&d(e,n)}),e.undoRedoStack.undoStack.push(t)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t,c(e)},collapseItemsReducer:function(e,t,n){c(e)},afterClearRedoStacksReducer:function(e){c(e)}},p=n(4107),m=n(7760),_=n(171),h=n(3063),b=n(5510),g=n(8322);function v(e){switch(e){case h.j:return g.B.spotFix;case m.u:return g.B.blur;case _.f:return g.B.maskBrush;default:return b.h}}function y(e,t){return t.filter(function(t){return-1===e.indexOf(t.idValue)})}function S(e,t){var n,a=[],i=t.idsToKeep||[],r=new Set(i);if(e.texturePatchInfos.forEach(function(e){e.algorithmParameters.layerToPatch===t.layer&&(r.has(e.idValue)||a.push(e.idValue))}),e.texturePatchRequests=y(a,e.texturePatchRequests),e.pendingTexturePatchRequests=y(a,e.pendingTexturePatchRequests),0!==a.length){var s=new Set(a),c=e.texturePatchInfos.filter(function(e){return!s.has(e.idValue)}),d=e.texturePatchInfos.filter(function(e){return s.has(e.idValue)});(n=e.removedTexturePatchInfos).push.apply(n,d),e.texturePatchInfos=c;var l,u,f={texturePatchInfos:d,operation:"remove"},m=1===(u=(l=f.texturePatchInfos.map(function(e){return e.algorithmParameters.algorithmId})).filter(function(e,t){return l.indexOf(e)===t})).length?v(u[0]):b.h,_=(0,o.Ey)(m,f,f,p.Z.KeepAll,t.undoRedoGroupId);e.undoRedoStack.undoStack.push(_)}}var D=n(4422),I=n(1626),x=n(8847),C=n(5854);function O(e,t){0!==e.texturePatchInfos.length?(e.removedTexturePatchInfos=e.removedTexturePatchInfos.concat(function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],e.texturePatchInfos,!0).reverse()),e.texturePatchInfos=[],e.undoRedoStack=r.E.undoRedoStack):function(e){e.texturePatchRequests=r.E.texturePatchRequests,e.pendingTexturePatchRequests=r.E.pendingTexturePatchRequests,e.texturePatchInfos=r.E.texturePatchInfos,e.removedTexturePatchInfos=r.E.removedTexturePatchInfos,e.undoRedoStack=r.E.undoRedoStack}(e)}function w(e,t){var n=t.payload.texturePatch;e.texturePatchInfos=n.texturePatchInfos,e.removedTexturePatchInfos=n.removedTexturePatchInfos,e.undoRedoStack=n.undoRedoStack}var E,A=n(3298),L=(0,a.X0)({name:"texturePatch",initialState:r.E,reducers:{setTexturePatchRequestPending:function(e,t){!function(e,t){var n,a=e.texturePatchRequests.findIndex(function(e){return e.idValue===t});a>=0&&(n=e.pendingTexturePatchRequests).push.apply(n,e.texturePatchRequests.splice(a,1))}(e,t.payload)},addTexturePatchInfo:function(e,t){!function(e,t){var n=t.requestId||t.idValue,a=t,i=function(e,t){return e.pendingTexturePatchRequests.find(function(e){return e.idValue===t})}(e,n);if(i){!function(e,t){e.pendingTexturePatchRequests=e.pendingTexturePatchRequests.filter(function(e){return e.idValue!==t})}(e,n);var r=i.undoRedoGroupId;if(t.algorithmParameters.layerToClear&&!r&&(r=(0,D.b)()),a.undoRedoGroupId=r,t.isUndoRedoable){var s={texturePatchInfos:[a],operation:"add"},c=(0,o.Ey)(v(t.algorithmParameters.algorithmId),s,s,p.Z.KeepAll,void 0,t.algorithmParameters.algorithmId);c.groupId=a.undoRedoGroupId,e.undoRedoStack.undoStack.push(c),t.algorithmParameters.layerToClear&&S(e,{layer:t.algorithmParameters.layerToClear,undoRedoGroupId:r})}e.texturePatchInfos.push(a)}}(e,t.payload)},removePendingTexturePatch:function(e,t){!function(e,t,n){var a=e.pendingTexturePatchRequests.findIndex(function(e){return e.idValue===t});if(!(a<0)){var i=e.pendingTexturePatchRequests[a],r={texturePatchRequestId:i.idValue,isRemoveDueToError:n,algorithmParameters:{algorithmId:i.algorithmParameters.algorithmId}};e.pendingTexturePatchRequests.splice(a,1),e.removedPendingTexturePatchRequests.push(r)}}(e,t.payload.texturePatchRequestId,!!t.payload.isRemoveDueToError)},removeTexturePatchesFromLayer:function(e,t){S(e,t.payload)},setTexturePatchChoices:function(e,t){!function(e,t){e.texturePatchChoices=t}(e,t.payload)},destroyTexturePatchUndoRedoItemsFromLayer:function(e,t){!function(e,t){var n=new Set;e.texturePatchInfos.concat(e.removedTexturePatchInfos).forEach(function(e){(0,x.n)(e.algorithmParameters.layerToPatch,t)&&n.add(e.idValue)}),e.undoRedoStack.redoStack=e.undoRedoStack.redoStack.filter(function(e){return e.redoPayload.texturePatchInfos.some(function(e){var t=e.idValue;return!n.has(t)})}),e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.undoPayload.texturePatchInfos.some(function(e){var t=e.idValue;return!n.has(t)})})}(e,t.payload)}},extraReducers:function(e){e.addCase(C.Cj,O),e.addCase(C.x2,w),e.addCase(C.k6,function(e,t){!function(e,t){var n,a;(t.maskParameters.maskType!==I.D.FromLayer||(n=t.maskParameters,a=e.texturePatchInfos,n.maskType===I.D.FromLayer&&a.some(function(e){return(0,x.n)(e.algorithmParameters.layerToPatch,n.layerToUseAsMask)})))&&e.texturePatchRequests.push(t)}(e,t.payload)}),e.addCase(A.Ax,function(e,t){e.texturePatchRequests=[],e.pendingTexturePatchRequests=[],e.removedPendingTexturePatchRequests=[]}),e.addCase(C.gP,function(e,t){var n,a=(0,i.gs)(e.texturePatchInfos),r={texturePatchInfos:a,operation:"remove"},s={texturePatchInfos:a,operation:"remove"},c=(0,o.Ey)("replaceImageTexturePatches",r,s,p.Z.KeepAll,t.payload.undoGroupId);e.undoRedoStack.undoStack.push(c),u(e),(n=e.removedTexturePatchInfos).push.apply(n,a),e.texturePatchInfos=[]}),(0,o.h$)(e,f)}}),k=(E=L.actions).addTexturePatchInfo,M=E.setTexturePatchRequestPending,P=E.removePendingTexturePatch,T=E.removeTexturePatchesFromLayer,U=E.setTexturePatchChoices,F=E.destroyTexturePatchUndoRedoItemsFromLayer,H=L.reducer}
,4347:(e,t,n)=>{"use strict";n.d(t,{AP:()=>y,GZ:()=>I,Jb:()=>S,s:()=>v});var a=n(512),i=n(8309),r=n(1759),o=n(5875),s=n(360),c=n(5444),d=n(458),l=n(6426),u=n(7216),f=n(9573),p=n(2482),m=n(252),_=n(3328),h=n(9739),b=n(8365),g=window.devicePixelRatio||1,v=l.I.none,y=u.m.fitCropRectInView,S=b.hO,D={mode:y,marginCssPixels:(0,s.eW)(0)},I={userDefinedDefaults:void 0,image:{originalPixelSize:{x:1,y:1},_preciseUvToWorld:(0,a.yz)(),loadedPixelSize:void 0,exifOrientation:h.Hf},view:{worldToView:(0,a.yz)(),viewFitting:D,viewportPixelSize:{x:1,y:1},allowDraggingView:!1,viewportCssSize:{width:"100%",height:"100%"},enableZoomToView:!1,animateViewWhenViewportIsResized:!1,canViewOriginal:!1},cropUiDisplay:{handleSizeCss:c.WS,handleHitAreaSizeCss:c.Bc,areCropOverlaysVisible:!1},cropInteraction:{mode:v,activeHandleIndex:d.Q.None,focusedHandleIndex:d.Q.None,isKeyboardFocused:!1,rectAtStartOfResize:{top:0,left:0,width:0,height:0},uvToWorld:(0,a.yz)(),_uvToWorldBeforeRotate:(0,a.yz)(),_uvToWorldBeforeZoomToCrop:(0,a.yz)(),_lastUvToWorldNotSetByAspectRatioChange:(0,a.yz)(),aspectRatio:S,aspectRatiosList:b.oV,shouldInvertOriginalAspectRatio:!1,rectTopLeftInImageUv:{x:0,y:0},rectBottomRightInImageUv:{x:1,y:1},shouldConstrainInImage:!0,allowDraggingImageOutsideRect:!0,enableZoomToCrop:!0,enableLeftMouseDraggingView:!0},rotationUi:{isKeyboardFocused:!1,deadZoneCenterPos:0,rotationBarPointer:{movePos:{x:0,y:0},incrementingIdOfPointerThatIsDown:void 0}},device:{pixelRatio:g},pointer:{movePos:{x:0,y:0},pointerDowns:[],preventShift:!1,offset:{x:0,y:0},imageUvGrabPosition:{x:0,y:0},downPos:{x:0,y:0},maxDragDistance:0,downOffsetFromCropHandleCenter:{x:0,y:0}},animations:{needsFrameTick:!1,currentTime:0,outsideCropVisibility:(0,i.ni)(),gridLineVisibility:(0,o.dG)(),dismissGridLineVisibility:(0,i.ni)(),dismissOutsideCropVisibility:(0,i.ni)(),worldToView:(0,r.qz)(),image:(0,r.qz)(),crop:(0,r.qz)(),transitionToViewingOriginal:(0,i.ni)(),dismissCropOverlays:(0,i.ni)()},touch:{scale:1,isDown:!1,downCenterPos:{x:0,y:0}},undoRedoStack:{undoStack:[],redoStack:[],id:"transformToolsUndoRedoStack"},savedStates:{},lastKeyboardShiftingMode:f.ab,mouseWheelScrollCount:p.v};(0,_.v)(I,m.cF)}
,6856:(e,t,n)=>{"use strict";n.d(t,{T:()=>i,p:()=>a});var a=function(e){return e},i=function(e){return.5+.5*Math.sin(-Math.PI/2+e*Math.PI)}}
,8309:(e,t,n)=>{"use strict";n.d(t,{MA:()=>o,Vl:()=>r,ic:()=>c,mv:()=>s,ni:()=>i});var a=n(5385);function i(){return{startTime:void 0,isActive:!1}}function r(){return{startTime:void 0,isActive:!0}}function o(){return{startTime:void 0,isActive:!1}}function s(e,t,n){if(e.isActive){if(void 0===e.startTime)return{startTime:t,isActive:!0};if(c(e,t,n)>=1)return{startTime:void 0,isActive:!1}}return e}function c(e,t,n){return e.isActive?void 0!==e.startTime?(0,a.W4)(e.startTime,e.startTime+n,t):0:1}}
,5875:(e,t,n)=>{"use strict";n.d(t,{dG:()=>r,qr:()=>o,vM:()=>s});var a=n(8309),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e,t){return void 0===e&&(e=void 0),void 0===t&&(t=(0,a.ni)()),i(i({},t),{numGridLines:e})}function o(e){return r(e,(0,a.Vl)())}function s(e,t,n){var i=(0,a.mv)(e,t,n);return i.isActive?r(e.numGridLines,i):r()}}
,1759:(e,t,n)=>{"use strict";n.d(t,{_G:()=>d,dC:()=>l,jX:()=>c,qz:()=>s});var a=n(512),i=n(8309),r=n(6856),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t,n,r){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=(0,i.ni)()),o(o({},r),{startMatrix:e?(0,a.St)(e):(0,a.yz)(),endMatrix:t?(0,a.St)(t):(0,a.yz)(),animatedMatrix:n?(0,a.St)(n):void 0})}function c(){return s()}function d(e,t,n){return e.isActive&&e.animatedMatrix&&(t=e.animatedMatrix),s(t=(0,a.rJ)(t),n=(0,a.rJ)(n),t,(0,i.Vl)())}function l(e,t,n,o){void 0===o&&(o=r.p);var d=(0,i.mv)(e,t,n);if(d.isActive){var l=(0,i.ic)(e,t,n),u=(0,a.Ab)(e.startMatrix,e.endMatrix,o(l));return s(e.startMatrix,e.endMatrix,u,d)}return c()}}
,9988:(e,t,n)=>{"use strict";n.d(t,{KG:()=>u,Rt:()=>d,gi:()=>l});var a=n(6856),i=n(8309),r=n(1759),o=n(6102),s=n(180),c=n(5875),d=3e3;function l(e,t){var n=e.outsideCropVisibility,l=e.gridLineVisibility,u=e.dismissGridLineVisibility,f=e.dismissOutsideCropVisibility,p=e.transitionToViewingOriginal,m=e.worldToView,_=e.image,h=e.crop,b=e.dismissCropOverlays,g=(0,i.mv)(n,t,s.ID),v=(0,c.vM)(l,t,o.B$),y=(0,i.mv)(u,t,o.UV),S=(0,i.mv)(f,t,s.TL),D=(0,i.mv)(p,t,300),I=(0,r.dC)(m,t,100,a.T),x=(0,r.dC)(_,t,100,a.T),C=(0,r.dC)(h,t,100,a.T),O=(0,i.mv)(b,t,d);return{needsFrameTick:g.isActive||v.isActive||y.isActive||S.isActive||p.isActive||I.isActive||x.isActive||C.isActive||O.isActive,outsideCropVisibility:g,gridLineVisibility:v,dismissGridLineVisibility:y,dismissOutsideCropVisibility:S,transitionToViewingOriginal:D,worldToView:I,image:x,crop:C,dismissCropOverlays:O,currentTime:t}}function u(e){return!e.dismissGridLineVisibility.isActive&&!e.dismissOutsideCropVisibility.isActive}}
,3510:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,r:()=>c});var a=n(360),i=n(2231),r=n(1759),o=n(6002);function s(e,t){void 0===t&&(t=!1),e.image.loadedPixelSize||(t=!1);var n=e.pointer.pointerDowns.length>0&&(0,o.m8)(e.cropInteraction.activeHandleIndex),s=(0,i.Ep)(e.view.viewFitting.mode,(0,a.mR)(e.view.viewportPixelSize,e.device.pixelRatio,e.view.viewFitting.marginCssPixels),(0,i.dM)(n,e.cropInteraction.uvToWorld,e.cropInteraction.rectAtStartOfResize),e.image._preciseUvToWorld,e.view.worldToView);t?(e.animations.needsFrameTick=!0,e.animations.worldToView=(0,r._G)(e.animations.worldToView,e.view.worldToView,s)):e.animations.worldToView=(0,r.jX)(),e.view.worldToView=s}function c(e){s(e,!0)}}
,3328:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var a=n(252),i=n(7216),r=n(6426),o=n(6529);function s(e,t){if(t){switch(t){case a.I8:e.cropInteraction.mode=r.I.none,e.cropInteraction.enableZoomToCrop=!0,e.view.enableZoomToView=!1,e.view.viewFitting.mode=i.m.fitCropRectInView,e.cropInteraction.enableLeftMouseDraggingView=!0,e.view.canViewOriginal=!1,e.cropUiDisplay.areCropOverlaysVisible=!0,(0,o.A)(e);break;case a.Xc:case a.lm:case a.qQ:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!0,e.cropInteraction.enableLeftMouseDraggingView=!0,e.view.canViewOriginal=!0;break;case a.NF:case a.Nr:case a.vs:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!0,e.cropInteraction.enableLeftMouseDraggingView=!0,e.view.viewFitting.mode=i.m.fitCropRectInView,e.view.canViewOriginal=!1;break;case a.Y4:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!1,e.cropInteraction.enableLeftMouseDraggingView=!1,e.view.viewFitting.mode=i.m.fitCropRectInView,e.view.canViewOriginal=!1;break;case a.qO:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!0,e.cropInteraction.enableLeftMouseDraggingView=!1,e.view.canViewOriginal=!1;break;case a.co:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!1,e.cropInteraction.enableLeftMouseDraggingView=!1,e.view.viewFitting.mode=i.m.fitCropRectInView,e.view.canViewOriginal=!0;break;case a.dp:e.cropInteraction.mode=r.I.disabled,e.cropInteraction.enableZoomToCrop=!1,e.view.enableZoomToView=!0,e.cropInteraction.enableLeftMouseDraggingView=!1,e.view.viewFitting.mode=i.m.fitCropRectInView,e.view.canViewOriginal=!1}e.view.animateViewWhenViewportIsResized=!0}}}
,9081:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var a=n(4347),i=n(512);function r(e){var t=(0,i.W3)(e.x,e.y);return{image:{_preciseUvToWorld:t},cropInteraction:{uvToWorld:t,aspectRatio:a.Jb}}}}
,2055:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var a=n(512),i=n(5206);function r(e,t,n){var r=(0,i.GM)((0,a.XG)(e,t)),o=r.left,s=r.top,c=r.width,d=r.height,l=n.x/2-o,u=n.y/2-s,f=l-c,p=u-d;return{x:l<0?l:f>0?f:0,y:u<0?u:p>0?p:0}}}
,8369:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var a=n(5206),i=n(360),r=n(2231),o=n(7572),s=n(6002);function c(e,t){var n=(0,s.Ue)(e.cropInteraction.uvToWorld,(0,a.qq)((0,i.mR)(e.view.viewportPixelSize,e.device.pixelRatio,e.view.viewFitting.marginCssPixels))).scale,c=(0,o.c0)(t,n);return{zoomScaleToFitCroppedImageInView:n,zoomLevel:c,zoomIsMinimum:c<=n,zoomIsMaximum:c===r.dC}}}
,3235:(e,t,n)=>{"use strict";function a(e,t){var n,a,i;return void 0===t&&(t={}),{cropInteraction:{aspectRatio:(null===(n=t.cropInteraction)||void 0===n?void 0:n.aspectRatio)||e.cropInteraction.aspectRatio,uvToWorld:(null===(a=t.cropInteraction)||void 0===a?void 0:a.uvToWorld)||e.cropInteraction.uvToWorld},image:{_preciseUvToWorld:(null===(i=t.image)||void 0===i?void 0:i._preciseUvToWorld)||e.image._preciseUvToWorld}}}n.d(t,{I:()=>a})}
,5295:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var a=5}
,728:(e,t,n)=>{"use strict";n.d(t,{k:()=>c});var a=n(512),i=n(5687),r=n(5295),o=n(5206),s=n(3080);function c(e,t){var n,c=t.image._preciseUvToWorld,d=null===(n=t.cropInteraction)||void 0===n?void 0:n.uvToWorld,l={x:e.cropRectangle.left,y:e.cropRectangle.top},u=(0,a.tM)(d),f=(0,s.wp)(l,u),p=(0,a.cQ)(f.x,f.y),m=(0,a.rt)((0,a.XG)(p,c),(0,i.D)(e.imageTransform),r.G);return(0,a.rt)((0,a.XG)(p,d),(0,o.qq)(e.cropRectangle),r.G)&&m}}
,2482:(e,t,n)=>{"use strict";n.d(t,{T:()=>m,v:()=>p});var a=n(512),i=n(7216),r=n(5995),o=n(8489),s=n(3044),c=n(7572),d=n(4107),l=n(8240),u=n(627),f=n(8085),p=2;function m(e,t,n){var p=t.deltaY,m=t.deltaMode,_=t.mousePhysicalPixelPos,h=t.ctrlKey;if(0!==p)if(!e.cropInteraction.enableZoomToCrop||!(0,s.WZ)(_,e.view.worldToView,e.cropInteraction.uvToWorld)||e.view.viewFitting.mode===i.m.none||h&&e.view.enableZoomToView){if(e.view.enableZoomToView){var b=function(e,t,n){var i=t===WheelEvent.DOM_DELTA_PIXEL?e:40*e,r=1+.1*Math.abs(i/100),o=(0,a.JD)(n);return e>0?o/r:o*r}(p,m,e.view.worldToView);(0,r.Q)(e,b,_,n)}}else{e.mouseWheelScrollCount++,e.savedStates.savedWhenMouseWheelCroppingStart||(e.savedStates.savedWhenMouseWheelCroppingStart=(0,u.jB)(e));var g=(p<0?c.JQ:c.zL)*(p/100);if((0,o.P)(e,g,!0,n),0==(e.mouseWheelScrollCount%=3)){var v=e.savedStates.savedWhenMouseWheelCroppingStart;if((0,u.u$)(e,v)){var y=(0,u.jB)(e),S=(0,f.Ey)(l.p.zoomToCrop,v,y,d.Z.KeepAll);e.undoRedoStack.undoStack.push(S),e.savedStates.savedWhenMouseWheelCroppingStart=void 0}}}}}
,5995:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var a=n(512),i=n(7572),r=n(1759),o=n(3510),s=n(7216),c=n(8369),d=n(2055);function l(e,t,n,l,u){void 0===u&&(u=!1);var f=(0,c.o)(e,t);if(l&&l.logZoomEvent({zoomLevel:f.zoomLevel/f.zoomScaleToFitCroppedImageInView}),f.zoomIsMinimum)return e.view.viewFitting.mode=s.m.fitCropRectInView,(0,o.r)(e),f;e.view.viewFitting.mode=s.m.none;var p=(0,i.Tt)(e.view.worldToView,f.zoomLevel,n),m=(0,d.M)(p,e.cropInteraction.uvToWorld,e.view.viewportPixelSize),_=(0,a.rJ)((0,a.XG)((0,a.cQ)(m.x,m.y),p));return u?(e.animations.needsFrameTick=!0,e.animations.worldToView=(0,r._G)(e.animations.worldToView,e.view.worldToView,_)):e.animations.worldToView=(0,r.jX)(),e.view.worldToView=_,f}}
,3029:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var a=n(8309);function i(e){e.cropUiDisplay.areCropOverlaysVisible=!1,e.animations.needsFrameTick=!0,e.animations.dismissCropOverlays=(0,a.Vl)()}}
,7936:(e,t,n)=>{"use strict";n.d(t,{zs:()=>at,xd:()=>rt,kh:()=>ot,Qi:()=>st,vS:()=>ct,j6:()=>We,dh:()=>qe,pl:()=>Ue,Jw:()=>He,My:()=>Ne,v_:()=>Be,vc:()=>Re,pq:()=>tt,Jc:()=>et,Lw:()=>$e,Lm:()=>ze,qb:()=>Ge,fz:()=>Ke,D_:()=>Ve,rh:()=>lt,eY:()=>Qe,ZF:()=>Ze,fd:()=>it,Bc:()=>Fe,qq:()=>Ye,II:()=>Je,_k:()=>je,D9:()=>dt,Jt:()=>nt,Bm:()=>ut,K_:()=>Xe,T7:()=>ft});var a=n(9397),i=n(4347),r=n(512),o=n(8874),s=n(5206),c=n(3080),d=n(1759),l=n(3510),u=n(5148),f=n(9988),p=n(2231),m=function(){return m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};function _(e){var t=(0,r.rJ)(e.image._preciseUvToWorld);e.cropInteraction.rectTopLeftInImageUv=(0,r.J)(t,(0,r.So)(e.cropInteraction.uvToWorld,{x:0,y:0})),e.cropInteraction.rectBottomRightInImageUv=(0,r.J)(t,(0,r.So)(e.cropInteraction.uvToWorld,{x:1,y:1}))}function h(e,t,n,a){void 0===a&&(a=!1),a?(e.needsFrameTick=!0,e.image=(0,d._G)(e.image,t,n)):e.image=(0,d.jX)()}var b=n(2827),g=n(3029);function v(e){return e.animations.image.isActive}function y(e,t){var n=!v(e);h(e.animations,e.image._preciseUvToWorld,t,n),e.animations.crop=(0,d.jX)(),e.image._preciseUvToWorld=t,_(e),(0,g.M)(e)}var S=n(6002),D=n(1815);function I(e,t){e.image._preciseUvToWorld=(0,s.yq)(t,e.cropInteraction._uvToWorldBeforeRotate,e.image._preciseUvToWorld),e.animations.image=(0,d.jX)(),e.animations.crop=(0,d.jX)(),e.cropInteraction.shouldConstrainInImage&&(0,D._H)(e,(0,S.ZU)(e.cropInteraction._uvToWorldBeforeRotate,e.image._preciseUvToWorld,e.cropInteraction.uvToWorld),D.k5.userIsRotating),_(e)}var x=n(3333),C=n(555),O=n(9680);function w(e,t,n,a){return e.x+a/45*t+n*Math.sign(a)}function E(e,t){var n,a;I(e,(n=(0,C.WN)((0,r.eo)(e.image._preciseUvToWorld)),a=t,(a=(0,O.q)(a,H,F))-n)),(0,g.M)(e)}var A=n(6102),L=n(5875),k=n(8240),M=n(4107);function P(e){var t=e.undoRedoStack.undoStack.pop();t&&(t.sequentialDuplicateAction===M.Z.KeepLast&&(t.sequentialDuplicateAction=M.Z.KeepAll),e.undoRedoStack.undoStack.push(t))}function T(e,t,n){var a;if(e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown){if(n){var o=(0,r.eo)(e.image._preciseUvToWorld);n.logRotateEvent({angle:o,inputType:t})}e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown=void 0,e.animations.needsFrameTick=!0,e.animations.gridLineVisibility=(0,L.qr)(A.ZR),e.cropInteraction.mode=i.s,(null===(a=e.undoRedoStack.undoStack[e.undoRedoStack.undoStack.length-1])||void 0===a?void 0:a.id)===k.p.rotateWithRotationBar&&P(e)}}var U=function(){return U=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},U.apply(this,arguments)},F=45-1e-12,H=-44.999999999999,R=n(6426),N=n(4422),B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)};function j(e,t,n){var a=(0,c.wp)(e,t),i=(0,r.cQ)(a.x,a.y);return(0,r.rJ)((0,r.XG)(i,n))}var V=n(7002),z=n(3044),G=n(7216),K=n(458),W=n(8309),q=n(6529),Q=n(3613);function Y(e,t){return t||!(0,Q.es)(e.cropInteraction.aspectRatio)?(0,x.Wb)(e.cropInteraction.aspectRatio,e.cropInteraction.uvToWorld,e.image.originalPixelSize,e.cropInteraction.shouldInvertOriginalAspectRatio):void 0}function J(e,t){e.view.worldToView=j(t,e.pointer.movePos,e.view.worldToView),e.animations.worldToView=(0,d.jX)(),e.view.viewFitting.mode=G.m.none}function X(e,t,n,a,i){var o=(0,r.iE)((0,r.XG)(e,t)),s=(0,r.So)(o,i),d=(0,r.So)(t,a),l=(0,r.So)(t,s),u=(0,c.wp)(l,d),f=(0,r.XG)((0,r.cQ)(u.x,u.y),t),p=(0,c.wp)(u,(0,S.WW)(f,n));return 0===p.x&&0===p.y?t:(0,r.XG)((0,r.cQ)(p.x,p.y),t)}function Z(e,t){var n=K.Q.TopLeft;return e.x<=t.x?n=e.y<=t.y?K.Q.BottomRight:K.Q.TopRight:e.y<=t.y&&(n=K.Q.BottomLeft),n}var $=n(5995),ee=n(8489),te=n(2650);function ne(e,t,n){var a=(0,c.f1)(e.view.viewportPixelSize,.5);(0,$.Q)(e,t,a,n,!0)}var ae=n(2482),ie=n(9573);function re(e,t,n,a){return!!e&&(n.handlePosition===K.Q.Center||(!(0,o.Lj)(t,e)&&(0,ie.o4)(n.handlePosition,n.direction)?(0,o.QX)(e,t)&&(0,o.xo)(e,a):(0,o.QX)(t,e)))}function oe(e,t,n,a,i){for(var r=n.direction,c=n.handlePosition,d=n.cropShiftingValue,l=i-d<0?-1:1,u=d;(i-u)*l>=0;u+=l){var f=(0,ie.xd)(t,r,c,u),p=(0,x.Wb)(e.cropInteraction.aspectRatio,(0,s.qq)(f),e.image.originalPixelSize,e.cropInteraction.shouldInvertOriginalAspectRatio),m=(0,x.ah)(f,p,c),_=(0,o.n4)(m);if(re(_,t,n,a))return _}}var se=n(2055);function ce(e){var t=(0,se.M)(e.view.worldToView,e.cropInteraction.uvToWorld,e.view.viewportPixelSize);if(0!==t.x||0!==t.y){var n=(0,r.rJ)((0,r.XG)((0,r.cQ)(t.x,t.y),e.view.worldToView));e.animations.needsFrameTick=!0,e.animations.worldToView=(0,d._G)(e.animations.worldToView,e.view.worldToView,n),e.view.worldToView=n}}function de(e){return e.filter(function(e){return e.isTouch}).length}function le(e,t,n){void 0===n&&(n=!0),e.cropInteraction.aspectRatio!==t&&(0,g.M)(e),e.cropInteraction.aspectRatio=t;var a=(0,r.St)(e.cropInteraction.uvToWorld);(0,D.AQ)(e,(0,x.q1)(e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,e.image._preciseUvToWorld,(0,x.Wb)(t,e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,e.image.originalPixelSize,e.cropInteraction.shouldInvertOriginalAspectRatio)),D.k5.userIsChangingAspectRatio);var i=(0,r.St)(e.cropInteraction.uvToWorld);e.animations.crop=n?(0,d._G)(e.animations.crop,a,i):(0,d.jX)(),(0,l.T)(e,n)}var ue=n(9081),fe=n(3235);function pe(e,t){void 0===t&&(t=!1);var n=(0,ue.W)(e.image.originalPixelSize),a=(0,fe.I)(n,e.userDefinedDefaults),r=a.image._preciseUvToWorld,o=a.cropInteraction.uvToWorld;e.cropInteraction.rectAtStartOfResize={top:0,left:0,width:e.image.originalPixelSize.x,height:e.image.originalPixelSize.y},function(e,t,n,a){void 0===a&&(a=!1),a?(e.needsFrameTick=!0,e.crop=(0,d._G)(e.crop,t,n)):e.crop=(0,d.jX)()}(e.animations,e.cropInteraction.uvToWorld,o,t),(0,D._H)(e,o,D.k5.userIsRotating),h(e.animations,e.image._preciseUvToWorld,r,t),e.image._preciseUvToWorld=r,_(e),e.view.viewFitting.mode=i.AP,t?(0,l.r)(e):(0,l.T)(e),e.cropInteraction.shouldInvertOriginalAspectRatio=!1,le(e,a.cropInteraction.aspectRatio,t)}var me=function(){return me=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},me.apply(this,arguments)},_e=function(){return _e=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_e.apply(this,arguments)},he=n(7572),be=n(9739),ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge.apply(this,arguments)};function ve(e,t){e.image.originalPixelSize=ge({},t),pe(e),(0,g.M)(e)}var ye=n(5687),Se=function(){return Se=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Se.apply(this,arguments)};function De(e,t){e.image.originalPixelSize=Se({},t.originalImageSize);var n=(0,ye.D)(t.imageTransform),a=(0,s.qq)(t.cropRectangle);return(0,D._H)(e,a,D.k5.unspecified),h(e.animations,e.image._preciseUvToWorld,n),e.image._preciseUvToWorld=n,e.animations.crop=(0,d.jX)(),_(e),(0,l.T)(e,!1),e.cropInteraction.aspectRatio=t.aspectRatio,e.cropInteraction.shouldInvertOriginalAspectRatio=t.shouldInvertOriginalAspectRatio||!1,e.undoRedoStack=t.undoRedoStack,e}var Ie=n(3298),xe=n(3328),Ce=n(5854),Oe=n(8085),we=n(627);function Ee(e,t){(0,we.TA)(e,t),(0,D.JU)(e),(0,l.T)(e),e.cropUiDisplay.areCropOverlaysVisible=!0,(0,q.A)(e)}var Ae={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),Ee(e,t.undoPayload)},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),Ee(e,t.redoPayload)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},Le=n(9829);function ke(e,t,n,a){var i=(0,we.jB)(e);t();var r=(0,we.jB)(e);if(!(0,Le.v)(i,r,5)){var o=(0,Oe.Ey)(n,i,r,a);return e.undoRedoStack.undoStack.push(o),o}}var Me,Pe=n(1006),Te=(0,a.X0)({name:"transformToolsState",initialState:i.GZ,reducers:{setResolutionScaling:function(e,t){!function(e,t){var n,a,i,u,f,p,m,_,h,b,g;e.image._preciseUvToWorld=(n=e.image._preciseUvToWorld,a=t,i=e.image.originalPixelSize,u=(0,s.vX)(n),f=(0,c.y8)(u,i),p=(0,c.y8)(a,f),(0,r.jh)(n,p)),e.animations.image=(0,d.jX)(),e.animations.crop=(0,d.jX)(),e.cropInteraction.uvToWorld=(m=(0,r.rJ)(e.image._preciseUvToWorld),_=e.cropInteraction.rectTopLeftInImageUv,h=e.cropInteraction.rectBottomRightInImageUv,b=(0,r.So)(m,_),g=(0,r.So)(m,h),(0,s.qq)((0,o.n4)({left:Math.min(b.x,g.x),top:Math.min(b.y,g.y),width:Math.abs(g.x-b.x),height:Math.abs(g.y-b.y)}))),e.cropInteraction._uvToWorldBeforeRotate=(0,r.St)(e.cropInteraction.uvToWorld),(0,l.T)(e)}(e,t.payload)},handleImageTextureLoaded:function(e,t){!function(e,t){t.shouldChangeOriginalSizeAndResetTransformsOnSizeChange&&function(e,t){e.image.originalPixelSize.x===t.x&&e.image.originalPixelSize.y===t.y||ve(e,t)}(e,t.sizeInPixels),e.image.loadedPixelSize=t.sizeInPixels,e.image.exifOrientation=t.exifOrientation}(e,t.payload)},setCanvasPixelSize:function(e,t){!function(e,t,n){e.view.worldToView=(0,r.rJ)((0,p.l8)(e.view.worldToView,e.view.viewportPixelSize,t)),e.view.viewportPixelSize=m({},t),e.view.viewportCssSize=m({},n);var a=e.view.animateViewWhenViewportIsResized;(0,l.T)(e,a),(0,r.fh)(e.view.worldToView)||(e.view.worldToView=(0,r.yz)())}(e,t.payload.pixelSize,t.payload.cssSize)},adjustCropRect:function(e,t){e.savedStates.savedWhenKeyboardCroppingStart||(e.savedStates.savedWhenKeyboardCroppingStart=(0,we.jB)(e)),function(e,t,n){var a=t.direction,i=t.handlePosition,r=t.cropShiftingValue,o=(0,s.GM)(e.cropInteraction.uvToWorld),c=(0,V.Cq)(e.cropUiDisplay.handleSizeCss,e.device.pixelRatio),d=(0,z.Ys)(c,p.dC),u=o;r>=1&&(u=oe(e,o,t,d,1)||u),re(u,o,t,d)||(u=oe(e,o,t,d,Math.ceil(Y(e,!1)||1))||u),re(u,o,t,d)&&((0,D.AQ)(e,u),e.cropInteraction.focusedHandleIndex=i,e.cropInteraction.shouldConstrainInImage&&(0,D._H)(e,(0,S.tI)(e.cropInteraction.uvToWorld,e.image._preciseUvToWorld,e.cropInteraction.aspectRatio,e.cropInteraction.focusedHandleIndex,a)),_(e),null==n||n.logCropEvent({inputType:t.inputType}),e.animations.needsFrameTick=!0,e.cropInteraction.mode!==R.I.keyboardCropping&&(e.cropInteraction.mode=R.I.keyboardCropping,e.animations.gridLineVisibility=(0,L.qr)(A.Cy),e.animations.outsideCropVisibility=(0,W.Vl)()),e.animations.dismissGridLineVisibility=(0,W.Vl)(),e.animations.dismissOutsideCropVisibility=(0,W.Vl)(),(0,q.A)(e),(0,l.T)(e))}(e,t.payload,t.telemetry)},adjustCropRectOnKeyUp:function(e,t){var n=e.savedStates.savedWhenKeyboardCroppingStart;n?((0,we.NU)(e,n,k.p.cropWithCropHandles),e.savedStates.savedWhenKeyboardCroppingStart=void 0):P(e)},panView:function(e,t){!function(e,t){if(e.view.viewFitting.mode!==G.m.fitCropRectInView){var n=t.direction,a=t.adjustmentCanvasShiftingValue,i=(0,ie.n)(n),o=(0,c.f1)(i,a),s=(0,r.cQ)(o.x,o.y);e.view.worldToView=(0,r.rJ)((0,r.XG)(s,e.view.worldToView)),e.animations.worldToView=(0,d.jX)(),e.view.viewFitting.mode=G.m.none,ce(e)}}(e,t.payload)},setFocusedCropHandle:function(e,t){!function(e,t){var n=t.handlePosition,a=t.isKeyboardFocused;e.cropInteraction.focusedHandleIndex=n,e.cropInteraction.isKeyboardFocused=!!a,(0,q.A)(e)}(e,t.payload)},handleMouseWheel:function(e,t){(0,ae.T)(e,t.payload,t.telemetry)},handleMirrorXClick:function(e){ke(e,function(){!function(e){var t=(0,s.FN)(e.cropInteraction.uvToWorld).x;y(e,(0,b.p)(e.image._preciseUvToWorld,r.a1,t))}(e)},k.p.mirrorImageX,M.Z.KeepAll)},handleMirrorYClick:function(e){ke(e,function(){!function(e){var t=(0,s.FN)(e.cropInteraction.uvToWorld).y;y(e,(0,b.p)(e.image._preciseUvToWorld,r.Rl,t))}(e)},k.p.mirrorImageY,M.Z.KeepAll)},setDefaultEdits:function(e,t){!function(e,t){e.userDefinedDefaults=function(e){return{cropInteraction:{aspectRatio:e.aspectRatio||i.Jb,uvToWorld:e.cropRectangle?(0,s.qq)(e.cropRectangle):void 0},image:e.imageTransform?{_preciseUvToWorld:(0,ye.D)(e.imageTransform)}:void 0}}(t)}(e,t.payload)},handleZoomChange:function(e,t){ne(e,t.payload,t.telemetry)},handleZoomDeltaChange:function(e,t){ke(e,function(){!function(e,t,n){if(e.cropInteraction.enableZoomToCrop)(0,ee.P)(e,t,!0,n);else if(e.view.enableZoomToView){var a=(0,r.JD)(e.view.worldToView);ne(e,(0,he.XW)(a,t))}}(e,t.payload,t.telemetry)},k.p.zoomToCrop,M.Z.KeepAll)},handleSetRotation:function(e,t){!function(e,t){I(e,t-(0,r.eo)(e.image._preciseUvToWorld)),(0,l.T)(e)}(e,t.payload)},handleTouchDown:function(e,t){!function(e,t){e.view.allowDraggingView&&(e.cropInteraction.mode=R.I.draggingView),e.pointer.movePos=t.center,e.pointer.imageUvGrabPosition=(0,te.o)(t.center,e.view.worldToView,e.image._preciseUvToWorld),e.touch.downCenterPos=t.center,e.touch.scale=1,e.touch.isDown=!0}(e,t.payload)},handleTouchMove:function(e,t){ke(e,function(){!function(e,t,n){if(e.touch.isDown){var a=t.center,i=t.scale;if(e.cropInteraction.enableZoomToCrop&&(0,z.WZ)(e.touch.downCenterPos,e.view.worldToView,e.cropInteraction.uvToWorld)&&e.view.viewFitting.mode!==G.m.none){var o=e.touch.scale-i;e.image._preciseUvToWorld=X(e.view.worldToView,e.image._preciseUvToWorld,e.cropInteraction.uvToWorld,e.pointer.imageUvGrabPosition,a),(0,ee.P)(e,o,!1,n),e.cropInteraction.mode=R.I.draggingImage}else if(e.view.enableZoomToView){var s=i/e.touch.scale;e.view.worldToView=j(a,e.pointer.movePos,e.view.worldToView);var c=(0,r.JD)(e.view.worldToView)*s;(0,$.Q)(e,c,a,n).zoomIsMinimum&&(0,l.T)(e),e.cropInteraction.mode=R.I.draggingView}e.touch.scale=i,e.pointer.movePos=a}}(e,t.payload,t.telemetry)},k.p.pinchToCrop,M.Z.KeepLast)},handleTouchUp:function(e,t){!function(e,t){e.touch.isDown=!1}(e,t.payload)},recenterView:function(e,t){!function(e,t){e.view.viewFitting.mode=G.m.fitCropRectInView,(0,l.r)(e),t&&t.logRecenterEvent()}(e,t.telemetry)},setCropHandleSizeCss:function(e,t){!function(e,t){var n=t.handleSizeCss,a=t.handleHitAreaSizeCss;e.cropUiDisplay.handleSizeCss=n,e.cropUiDisplay.handleHitAreaSizeCss=a}(e,t.payload)},setCssToPhysicalPixelRatio:function(e,t){!function(e,t){e.device.pixelRatio=t}(e,t.payload)},setShouldConstrainCropInImage:function(e,t){!function(e,t){e.cropInteraction.shouldConstrainInImage=t,e.cropInteraction.shouldConstrainInImage&&(0,D._H)(e,(0,S.ZU)(e.cropInteraction._uvToWorldBeforeRotate,e.image._preciseUvToWorld,e.cropInteraction.uvToWorld))}(e,t.payload)},handleFrameTick:function(e,t){!function(e,t){e.animations=(0,f.gi)(e.animations,t),e.view.animateViewWhenViewportIsResized&&!e.animations.worldToView.isActive&&(e.view.animateViewWhenViewportIsResized=!1),(0,u.m)(e.cropInteraction.mode)&&(0,f.KG)(e.animations)&&(e.cropInteraction.mode=i.s)}(e,t.payload)},setViewFittingMode:function(e,t){!function(e,t){e.view.viewFitting.mode=t,(0,l.r)(e)}(e,t.payload)},setViewFittingMarginCssPixels:function(e,t){!function(e,t,n){e.view.viewFitting.marginCssPixels=_e({},t),(0,l.T)(e,n)}(e,t.payload.marginCssPixels,t.payload.shouldAnimate)},setAllowDraggingImageOutsideCropRect:function(e,t){!function(e,t){e.cropInteraction.allowDraggingImageOutsideRect=t}(e,t.payload)},setAllowDraggingView:function(e,t){!function(e,t){e.view.allowDraggingView=t}(e,t.payload)},setEnableZoomToView:function(e,t){!function(e,t){e.view.enableZoomToView=t}(e,t.payload)},setEnableZoomToCrop:function(e,t){!function(e,t){e.cropInteraction.enableZoomToCrop=t}(e,t.payload)},rotateCropAndImageBy90:function(e,t){ke(e,function(){!function(e,t){var n=!v(e),a=t===C.J5.Clockwise?90:-90,i=(0,s.yq)(a,e.cropInteraction._uvToWorldBeforeRotate,e.image._preciseUvToWorld);n?(e.animations.needsFrameTick=!0,e.animations.image=(0,d._G)(e.animations.image,e.image._preciseUvToWorld,i)):e.animations.image=(0,d.jX)(),e.image._preciseUvToWorld=i,e.cropInteraction.aspectRatio=(0,x.L5)(e.cropInteraction.aspectRatio,e.cropInteraction.aspectRatiosList);var r=(0,s.yq)(a,e.cropInteraction._uvToWorldBeforeRotate,e.cropInteraction.uvToWorld);e.animations.crop=n?(0,d._G)(e.animations.crop,e.cropInteraction.uvToWorld,r):(0,d.jX)(),e.cropInteraction.shouldInvertOriginalAspectRatio=!e.cropInteraction.shouldInvertOriginalAspectRatio,function(e){e.cropInteraction.uvToWorld=(0,s.Ml)(e.cropInteraction.uvToWorld),e.cropInteraction._uvToWorldBeforeRotate=(0,s.Ml)(e.cropInteraction._uvToWorldBeforeRotate),e.cropInteraction._uvToWorldBeforeZoomToCrop=(0,s.Ml)(e.cropInteraction._uvToWorldBeforeZoomToCrop),e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange=(0,s.Ml)(e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange)}(e),_(e),(0,g.M)(e),(0,l.T)(e,n)}(e,t.payload)},k.p.rotateCropBy90,M.Z.KeepAll)},startWindowSelectionMode:function(e){e.cropInteraction.mode=R.I.selectingFirstCorner},handleRotationBarPointerUp:function(e,t){T(e,t.payload.inputType,t.telemetry)},handleRotationBarPointerMove:function(e,t){e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown&&function(e,t){if(void 0!==t){var n=e.undoRedoStack.undoStack.findIndex(function(e){return"SameImage"===e.undoPayload.payloadScenario&&e.undoPayload.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown===t.redoPayload.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown&&(0,Le.v)(e.undoPayload,t.redoPayload,5)});n>=0&&(e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.slice(0,n))}}(e,ke(e,function(){!function(e,t){if(e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown&&!t.isPrimaryButtonDownOrTouchDown&&T(e,t.inputType),e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown){var n=t.pointerPhysicalPixelPos,a=(0,C.WN)((0,r.eo)(e.image._preciseUvToWorld)),i=544*e.device.pixelRatio,o=function(e,t,n,a,i){var r=a-n.x;if(Math.abs(r)<28)return 0;var o=(t.x-n.x)/i;return e+Math.min(Math.abs(o),1)*(o<0?H:F)}(a,e.rotationUi.rotationBarPointer.movePos,n,e.rotationUi.deadZoneCenterPos,i);e.rotationUi.deadZoneCenterPos=function(e,t,n,a,i){return t>=F||t<=H?w(n,i,28,e):a}(a,o,n,e.rotationUi.deadZoneCenterPos,i),E(e,o),e.rotationUi.rotationBarPointer.movePos=U({},n),(0,l.T)(e)}}(e,t.payload)},k.p.rotateWithRotationBar,M.Z.KeepLast))},handleRotationBarPointerDown:function(e,t){!function(e,t){var n=t.pointerPhysicalPixelPos,a=e.rotationUi.rotationBarPointer,i=e.device.pixelRatio;a.incrementingIdOfPointerThatIsDown=(0,N.b)(),a.movePos=B({},n),e.rotationUi.deadZoneCenterPos=w(n,544*i,28,(0,C.WN)((0,r.eo)(e.image._preciseUvToWorld))),e.cropInteraction.mode=R.I.rotating,e.animations.needsFrameTick=!0,e.animations.gridLineVisibility=(0,L.qr)(A.ZR)}(e,t.payload)},setRotationBarIsKeyboardFocused:function(e,t){!function(e,t){e.rotationUi.isKeyboardFocused=t,(0,q.A)(e)}(e,t.payload)},adjustRotationOnKeyDown:function(e,t){e.savedStates.savedWhenKeyboardRotatingStart||(e.savedStates.savedWhenKeyboardRotatingStart=(0,we.jB)(e)),function(e,t,n){var a=t.direction,i=t.sliderShiftingValue,o=(0,C.WN)((0,r.eo)(e.image._preciseUvToWorld)),s=(0,C.Y3)(a,o,i);E(e,s),null==n||n.logRotateEvent({angle:s,inputType:t.inputType}),e.animations.needsFrameTick=!0,e.cropInteraction.mode!==R.I.keyboardRotating&&(e.cropInteraction.mode=R.I.keyboardRotating,e.animations.gridLineVisibility=(0,L.qr)(A.ZR),e.animations.outsideCropVisibility=(0,W.Vl)()),e.animations.dismissGridLineVisibility=(0,W.Vl)(),e.animations.dismissOutsideCropVisibility=(0,W.Vl)(),(0,l.T)(e)}(e,t.payload,t.telemetry)},adjustRotationOnKeyUp:function(e,t){var n=e.savedStates.savedWhenKeyboardRotatingStart;n?((0,we.NU)(e,n,k.p.rotateWithRotationBar),e.savedStates.savedWhenKeyboardRotatingStart=void 0):P(e)},abortCurrentMode:function(e){e.cropInteraction.mode!==R.I.selectingFirstCorner&&e.cropInteraction.mode!==R.I.selectingSecondCorner||(e.cropInteraction.mode=i.s,(0,l.r)(e))},setAspectRatio:function(e,t){ke(e,function(){le(e,t.payload)},k.p.setAspectRatio,M.Z.KeepAll)},setSessionFullImageSize:function(e,t){!function(e,t){var n,a;if(t){var o=(0,r.W3)(t.x,t.y);De(e,{imageTransform:(0,ye.H)(o),cropRectangle:(0,s.GM)(o),originalImageSize:t,aspectRatio:(null===(a=null===(n=e.userDefinedDefaults)||void 0===n?void 0:n.cropInteraction)||void 0===a?void 0:a.aspectRatio)||i.Jb,shouldInvertOriginalAspectRatio:!1,undoRedoStack:e.undoRedoStack})}}(e,t.payload)},handleCleanupCanvasPointers:function(e){!function(e){e.pointer.pointerDowns=[]}(e)},handleCleanupRotationBarPointer:function(e){!function(e){e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown=void 0}(e)}},extraReducers:function(e){e.addCase(Ce.fy,function(e,t){e.savedStates.savedWhenPointerCroppingStart||e.cropInteraction.activeHandleIndex===K.Q.None||(e.savedStates.savedWhenPointerCroppingStart=(0,we.jB)(e)),function(e,t){if(t.isPrimaryButtonDownOrTouchDown||t.isMiddleButtonDown||t.isRightButtonDown){var n=e.pointer.pointerDowns.length>0;if(e.pointer.pointerDowns=e.pointer.pointerDowns.concat({pointerId:t.pointerId,isTouch:t.isTouch}),!n){e.cropInteraction.isKeyboardFocused=!1;var a=t.pointerPhysicalPixelPos;e.pointer.imageUvGrabPosition=(0,te.o)(a,e.view.worldToView,e.image._preciseUvToWorld),e.pointer.downPos=a,e.pointer.maxDragDistance=0;var i=(0,s.GM)((0,r.XG)(e.view.worldToView,e.cropInteraction.uvToWorld)),c=(0,V.d6)(e.cropUiDisplay.handleHitAreaSizeCss,e.device.pixelRatio);if(e.cropInteraction.activeHandleIndex=(0,V.n)(a,i,c),e.cropInteraction.mode=function(e,t,n,a){switch(e.mode){case R.I.selectingFirstCorner:if((0,D.Ah)(e.shouldConstrainInImage,t))return R.I.selectingSecondCorner;break;case R.I.zoomToCrop:case R.I.keyboardCropping:case R.I.keyboardRotating:case R.I.none:return n?a?R.I.draggingView:R.I.none:e.activeHandleIndex!==K.Q.None||(0,o._N)(t,o.hs)?e.activeHandleIndex===K.Q.Center||e.activeHandleIndex===K.Q.None&&e.allowDraggingImageOutsideRect&&(0,o._N)(t,o.hs)?R.I.draggingImage:R.I.usingNineSliceCropHandles:a?R.I.draggingView:R.I.none}return e.mode}(e.cropInteraction,e.pointer.imageUvGrabPosition,t.ctrlKey,e.view.allowDraggingView),e.cropInteraction.mode===R.I.selectingSecondCorner){var d=(0,r.J)(e.view.worldToView,a),l=(0,o.n4)({left:d.x,top:d.y,width:1,height:1});(0,D.AQ)(e,l),_(e)}else e.cropInteraction.mode===R.I.usingNineSliceCropHandles&&(e.cropInteraction.focusedHandleIndex=e.cropInteraction.activeHandleIndex,e.cropInteraction.activeHandleIndex!==K.Q.None&&(e.pointer.downOffsetFromCropHandleCenter=(0,V.FX)(e.cropInteraction.activeHandleIndex,i,a)),e.cropInteraction.rectAtStartOfResize=(0,s.GM)(e.cropInteraction.uvToWorld));e.cropInteraction.mode!==R.I.draggingView&&e.cropInteraction.mode!==R.I.none&&e.cropInteraction.mode!==R.I.disabled&&(e.animations.needsFrameTick=!0,e.animations.outsideCropVisibility=(0,W.Vl)(),e.animations.gridLineVisibility=(0,L.qr)(A.Cy)),e.cropInteraction.mode===R.I.disabled&&(e.view.canViewOriginal?(e.animations.transitionToViewingOriginal=(0,W.Vl)(),e.animations.needsFrameTick=!0):e.cropInteraction.mode=R.I.draggingView),e.pointer.movePos=a,(0,q.A)(e)}}}(e,t.payload)}).addCase(Ce.UI,function(e,t){var n=e.savedStates.savedWhenPointerCroppingStart;n?((0,we.NU)(e,n,k.p.cropWithCropHandles),e.savedStates.savedWhenPointerCroppingStart=void 0):P(e),function(e,t,n,a){if(0!==e.pointer.pointerDowns.length&&e.pointer.pointerDowns.some(function(e){return e.pointerId===t})){var r,c,d,u,f,p,m=(r=e.pointer.pointerDowns,c=t,d=de(r),p=(f=de(u=r.filter(function(e){return e.pointerId!==c})))<d,1===u.length&&1===f&&p);if(e.pointer.pointerDowns=e.pointer.pointerDowns.filter(function(e){return e.pointerId!==t}),m)e.pointer.preventShift=!0;else if(!(e.pointer.pointerDowns.length>0)){if(e.pointer.offset={x:0,y:0},a&&(e.cropInteraction.mode===R.I.usingNineSliceCropHandles||e.cropInteraction.mode===R.I.draggingImage)){var _=(0,s.GM)(e.cropInteraction.uvToWorld);(0,o.N8)(e.cropInteraction.rectAtStartOfResize,_)||a.logCropEvent({inputType:n})}e.cropInteraction.mode!==R.I.draggingView&&e.cropInteraction.mode!==R.I.none&&e.cropInteraction.mode!==R.I.disabled&&(e.animations.needsFrameTick=!0,e.animations.outsideCropVisibility=(0,W.Vl)(),e.animations.gridLineVisibility=(0,L.qr)(A.Cy)),e.cropInteraction.mode===R.I.selectingSecondCorner&&(e.view.viewFitting.mode=G.m.fitCropRectInView),e.cropInteraction.mode===R.I.draggingView||e.cropInteraction.mode===R.I.disabled?(ce(e),e.cropInteraction.mode=R.I.disabled):((0,l.r)(e),e.cropInteraction.mode=i.s),(0,q.A)(e)}}}(e,t.payload.pointerId,t.payload.inputType,t.telemetry)}).addCase(Ce.Kd,function(e,t){!function(e,t){!function(e,t){var n=e.cropInteraction.uvToWorld;e.cropInteraction.uvToWorld=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],n,!0),t(),(0,r.v7)(e.cropInteraction.uvToWorld,n)&&(e.cropInteraction.uvToWorld=n)}(e,function(){if(!(e.pointer.pointerDowns.length>1)){if(1===e.pointer.pointerDowns.length&&e.pointer.pointerDowns[0].pointerId!==t.pointerId)return;var n=t.pointerPhysicalPixelPos;e.pointer.preventShift&&(e.cropInteraction.mode!==R.I.draggingView&&e.cropInteraction.mode!==R.I.draggingImage||(e.pointer.offset=(0,c.wp)(e.pointer.movePos,n)),e.pointer.preventShift=!1);var a=(0,c.Tf)(n,e.pointer.offset);switch(e.cropInteraction.mode){case R.I.disabled:!function(e,t){e.pointer.pointerDowns.length>0&&e.animations.transitionToViewingOriginal.isActive&&e.view.viewFitting.mode!==G.m.fitCropRectInView&&(e.cropInteraction.mode=R.I.draggingView,e.animations.transitionToViewingOriginal=(0,W.MA)(),J(e,t))}(e,a);break;case R.I.draggingView:(t.isMiddleButtonDown||t.isRightButtonDown||t.isPrimaryButtonDownOrTouchDown&&e.cropInteraction.enableLeftMouseDraggingView)&&J(e,a);break;case R.I.zoomToCrop:case R.I.keyboardCropping:case R.I.keyboardRotating:case R.I.none:!function(e,t){var n,a,i,o,c,d=(0,V.d6)(e.cropUiDisplay.handleHitAreaSizeCss,e.device.pixelRatio);e.cropInteraction.activeHandleIndex=(n=e.view.worldToView,a=e.cropInteraction.uvToWorld,i=t,o=d,c=(0,s.GM)((0,r.XG)(n,a)),(0,V.n)(i,c,o))}(e,a);break;case R.I.usingNineSliceCropHandles:!function(e,t,n){if(e.cropInteraction.activeHandleIndex!==K.Q.Center){var a=(0,s.GM)(e.cropInteraction.uvToWorld),i=(0,c.wp)(t,e.pointer.downOffsetFromCropHandleCenter),d=(0,r.J)(e.view.worldToView,i),u=function(e,t,n){var a=(0,s.GM)(e.cropInteraction.uvToWorld),i=(0,s.GM)(e.image._preciseUvToWorld),o=(0,V.Cq)(e.cropUiDisplay.handleSizeCss,e.device.pixelRatio),c=(0,z.sJ)(o,e.view.worldToView);return(0,z.Z2)(a,i,e.cropInteraction.activeHandleIndex,t,1/(0,r.X$)(e.view.worldToView,1,1),c,e.cropInteraction.aspectRatiosList,Y(e,n))}(e,d,n);if(!(0,o.N8)(u,a)){if((0,D.AQ)(e,u),e.cropInteraction.shouldConstrainInImage){(0,D._H)(e,(0,S.TG)(e.cropInteraction.uvToWorld,e.image._preciseUvToWorld,e.cropInteraction.aspectRatio,e.cropInteraction.activeHandleIndex));var f=(0,s.GM)(e.cropInteraction.uvToWorld);if((0,o.QX)(f,a))switch(e.cropInteraction.activeHandleIndex){case K.Q.BottomCenter:d.y>a.top+a.height&&(0,D.AQ)(e,a);break;case K.Q.TopCenter:d.y<a.top&&(0,D.AQ)(e,a);break;case K.Q.SideLeft:d.x<a.left&&(0,D.AQ)(e,a);break;case K.Q.SideRight:d.x>a.left+a.width&&(0,D.AQ)(e,a)}}_(e);var p=(0,s.GM)(e.cropInteraction.uvToWorld);(p.width>e.cropInteraction.rectAtStartOfResize.width||p.height>e.cropInteraction.rectAtStartOfResize.height)&&(0,l.T)(e)}(0,q.A)(e)}}(e,a,t.shiftKey);break;case R.I.draggingImage:!function(e,t){e.image._preciseUvToWorld=X(e.view.worldToView,e.image._preciseUvToWorld,e.cropInteraction.uvToWorld,e.pointer.imageUvGrabPosition,t),e.animations.image=(0,d.jX)(),e.animations.crop=(0,d.jX)(),_(e)}(e,a);break;case R.I.selectingFirstCorner:break;case R.I.selectingSecondCorner:!function(e,t){var n,a,i,c=(0,r.So)(e.image._preciseUvToWorld,e.pointer.imageUvGrabPosition),d=(0,r.J)(e.view.worldToView,t);e.cropInteraction.shouldConstrainInImage&&(n=d,a=e.image._preciseUvToWorld,(i=(0,r.J)(a,n)).x=(0,O.q)(i.x,0,1),i.y=(0,O.q)(i.y,0,1),d=(0,r.So)(a,i));var l,u,f,p,m,h,b,g,v=(l=c,u=d,f=Math.min(l.x,u.x),p=Math.min(l.y,u.y),m=Math.max(l.x,u.x),h=Math.max(l.y,u.y),b=Math.max(1,m-f),g=Math.max(1,h-p),(0,o.n4)({left:f,top:p,width:b,height:g}));v=(0,x.ah)(v,(0,x.Wb)(e.cropInteraction.aspectRatio,(0,s.qq)(v),e.image.originalPixelSize,e.cropInteraction.shouldInvertOriginalAspectRatio),Z(c,d)),(0,D.AQ)(e,v),e.cropInteraction.shouldConstrainInImage&&(0,D._H)(e,(0,S.TG)(e.cropInteraction.uvToWorld,e.image._preciseUvToWorld,e.cropInteraction.aspectRatio,Z(c,d))),_(e)}(e,a)}if(e.pointer.movePos=a,e.pointer.pointerDowns.length>0){var i=(0,c.Gl)(e.pointer.downPos,e.pointer.movePos);e.pointer.maxDragDistance=Math.max(i,e.pointer.maxDragDistance)}}})}(e,t.payload)}).addCase(Ie.Ax,function(e,t){(0,xe.v)(e,t.payload)}).addCase(Ie.QP,function(e,t){(0,xe.v)(e,t.payload.activeEditorActivity)}).addCase(Ie.Cc,function(e,t){(0,xe.v)(e,Ie.xp.activeEditorActivity)}).addCase(Ie.Bp,function(e){(0,l.r)(e)}).addCase(Ce.x2,function(e,t){De(e,t.payload.transforms)}).addCase(Ce.Cj,function(e,t){!function(e,t,n){!function(e,t,n){n&&(e.image.originalPixelSize=me({},n)),pe(e,t),(0,g.M)(e),(0,D.JU)(e),e.savedStates={}}(e,t,n),e.undoRedoStack=i.GZ.undoRedoStack}(e,t.payload.shouldAnimate,t.payload.fullImageSize)}).addCase(Ce.gP,function(e,t){!function(e,t){(0,Pe.s)(e,t,"replaceImageTransformTools",function(e){!function(e,t){ve(e,t),e.image.loadedPixelSize=t,e.image.exifOrientation=be.Hf,(0,D.JU)(e),e.savedStates={}}(e,t.newImagePixelSize)},we.sJ)}(e,t.payload)}),(0,Oe.h$)(e,Ae)}}),Ue=(Me=Te.actions).handleFrameTick,Fe=Me.setCanvasPixelSize,He=(Me.setResolutionScaling,Me.handleImageTextureLoaded),Re=Me.handleMouseWheel,Ne=Me.handleMirrorXClick,Be=Me.handleMirrorYClick,je=Me.setDefaultEdits,Ve=(Me.handleZoomChange,Me.handleZoomDeltaChange),ze=(Me.handleSetRotation,Me.handleTouchDown),Ge=Me.handleTouchMove,Ke=Me.handleTouchUp,We=Me.handleCleanupCanvasPointers,qe=Me.handleCleanupRotationBarPointer,Qe=Me.recenterView,Ye=Me.setCropHandleSizeCss,Je=Me.setCssToPhysicalPixelRatio,Xe=(Me.setShouldConstrainCropInImage,Me.setViewFittingMode,Me.setViewFittingMarginCssPixels),Ze=(Me.setAllowDraggingImageOutsideCropRect,Me.setAllowDraggingView,Me.setEnableZoomToView,Me.setEnableZoomToCrop,Me.rotateCropAndImageBy90),$e=(Me.startWindowSelectionMode,Me.handleRotationBarPointerUp),et=Me.handleRotationBarPointerMove,tt=Me.handleRotationBarPointerDown,nt=Me.setRotationBarIsKeyboardFocused,at=Me.abortCurrentMode,it=Me.setAspectRatio,rt=Me.adjustCropRect,ot=Me.adjustCropRectOnKeyUp,st=Me.adjustRotationOnKeyDown,ct=Me.adjustRotationOnKeyUp,dt=Me.setFocusedCropHandle,lt=Me.panView,ut=Me.setSessionFullImageSize,ft=Te.reducer}
,1815:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>f,Ah:()=>p,JU:()=>m,Ky:()=>u,Sg:()=>d,_H:()=>l,k5:()=>a});var a,i=n(512),r=n(3080),o=n(5206),s=n(2482),c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)};function d(e,t){void 0===t&&(t=a.unspecified);var n=(0,i.St)(e),r=c({uvToWorld:n},function(e,t){var n={};return t!==a.userIsRotating&&(n._uvToWorldBeforeRotate=(0,i.St)(e)),t!==a.userIsZoomingToCrop&&(n._uvToWorldBeforeZoomToCrop=(0,i.St)(e)),t!==a.userIsChangingAspectRatio&&(n._lastUvToWorldNotSetByAspectRatioChange=(0,i.St)(e)),n}(n,t));return r}function l(e,t,n){void 0===n&&(n=a.unspecified),e.cropInteraction=c(c({},e.cropInteraction),d(t,n))}function u(e,t){return void 0===t&&(t=a.unspecified),d((0,o.qq)(e),t)}function f(e,t,n){void 0===n&&(n=a.unspecified),l(e,(0,o.qq)(t),n)}function p(e,t){return!e||(0,r.ln)(t)}function m(e){e.mouseWheelScrollCount=s.v,e.savedStates.savedWhenMouseWheelCroppingStart=void 0}!function(e){e[e.userIsRotating=0]="userIsRotating",e[e.userIsZoomingToCrop=1]="userIsZoomingToCrop",e[e.userIsChangingAspectRatio=2]="userIsChangingAspectRatio",e[e.unspecified=3]="unspecified"}(a||(a={}))}
,8240:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var a={zoomToCrop:"zoomToCrop",mirrorImageX:"mirrorImageX",mirrorImageY:"mirrorImageY",pinchToCrop:"pinchToCrop",rotateCropBy90:"rotateCropBy90",rotateWithRotationBar:"rotateWithRotationBar",setAspectRatio:"setAspectRatio",cropWithCropHandles:"cropWithCropHandles"}}
,627:(e,t,n)=>{"use strict";n.d(t,{NU:()=>_,sJ:()=>p,jB:()=>f,TA:()=>u,u$:()=>m});var a=n(728),i=n(5687),r=n(5206);function o(e,t){var n={};for(var a in e)-1===t.indexOf(a)&&e.hasOwnProperty(a)&&(n[a]=e[a]);return n}var s=n(8696),c=n(8085),d=n(4107),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function u(e,t){"SameImage"===t.payloadScenario?function(e,t){e.image._preciseUvToWorld=t.image._preciseUvToWorld,e.cropInteraction.uvToWorld=t.cropInteraction.uvToWorld,e.cropInteraction._uvToWorldBeforeRotate=t.cropInteraction._uvToWorldBeforeRotate,e.cropInteraction._uvToWorldBeforeZoomToCrop=t.cropInteraction._uvToWorldBeforeZoomToCrop,e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange=t.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,e.cropInteraction.aspectRatio=t.cropInteraction.aspectRatio,e.cropInteraction.shouldInvertOriginalAspectRatio=t.cropInteraction.shouldInvertOriginalAspectRatio,e.cropInteraction.rectTopLeftInImageUv=t.cropInteraction.rectTopLeftInImageUv,e.cropInteraction.rectBottomRightInImageUv=t.cropInteraction.rectBottomRightInImageUv}(e,t):function(e,t){e.image._preciseUvToWorld=t.image._preciseUvToWorld,e.image.exifOrientation=t.image.exifOrientation,e.image.loadedPixelSize=t.image.loadedPixelSize,e.image.originalPixelSize=t.image.originalPixelSize,e.cropInteraction.uvToWorld=t.cropInteraction.uvToWorld,e.cropInteraction._uvToWorldBeforeRotate=t.cropInteraction._uvToWorldBeforeRotate,e.cropInteraction._uvToWorldBeforeZoomToCrop=t.cropInteraction._uvToWorldBeforeZoomToCrop,e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange=t.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,e.cropInteraction.aspectRatio=t.cropInteraction.aspectRatio,e.cropInteraction.shouldInvertOriginalAspectRatio=t.cropInteraction.shouldInvertOriginalAspectRatio,e.cropInteraction.rectTopLeftInImageUv=t.cropInteraction.rectTopLeftInImageUv,e.cropInteraction.rectBottomRightInImageUv=t.cropInteraction.rectBottomRightInImageUv,e.cropInteraction.rectAtStartOfResize=t.cropInteraction.rectAtStartOfResize,e.savedStates=t.savedStates}(e,t)}function f(e){return{image:{_preciseUvToWorld:e.image._preciseUvToWorld},cropInteraction:{uvToWorld:e.cropInteraction.uvToWorld,_uvToWorldBeforeRotate:e.cropInteraction._uvToWorldBeforeRotate,_uvToWorldBeforeZoomToCrop:e.cropInteraction._uvToWorldBeforeZoomToCrop,_lastUvToWorldNotSetByAspectRatioChange:e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,aspectRatio:e.cropInteraction.aspectRatio,shouldInvertOriginalAspectRatio:e.cropInteraction.shouldInvertOriginalAspectRatio,rectTopLeftInImageUv:e.cropInteraction.rectTopLeftInImageUv,rectBottomRightInImageUv:e.cropInteraction.rectBottomRightInImageUv},rotationUi:{rotationBarPointer:{incrementingIdOfPointerThatIsDown:e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown}},payloadScenario:"SameImage"}}function p(e){return{image:{_preciseUvToWorld:e.image._preciseUvToWorld,exifOrientation:e.image.exifOrientation,loadedPixelSize:e.image.loadedPixelSize,originalPixelSize:e.image.originalPixelSize},cropInteraction:{uvToWorld:e.cropInteraction.uvToWorld,_uvToWorldBeforeRotate:e.cropInteraction._uvToWorldBeforeRotate,_uvToWorldBeforeZoomToCrop:e.cropInteraction._uvToWorldBeforeZoomToCrop,_lastUvToWorldNotSetByAspectRatioChange:e.cropInteraction._lastUvToWorldNotSetByAspectRatioChange,aspectRatio:e.cropInteraction.aspectRatio,shouldInvertOriginalAspectRatio:e.cropInteraction.shouldInvertOriginalAspectRatio,rectTopLeftInImageUv:e.cropInteraction.rectTopLeftInImageUv,rectBottomRightInImageUv:e.cropInteraction.rectBottomRightInImageUv,rectAtStartOfResize:e.cropInteraction.rectAtStartOfResize},savedStates:e.savedStates,payloadScenario:"ReplaceImage"}}function m(e,t){if(!t)return!1;if(!function(e,t){var n=l({},t),a=l({},f(e));return n.image=o(n.image,["_preciseUvToWorld"]),a.image=o(a.image,["_preciseUvToWorld"]),(0,s.G)(n,a)}(e,t))return!1;var n,c={cropInteraction:{aspectRatio:(n=t).cropInteraction.aspectRatio,uvToWorld:n.cropInteraction.uvToWorld},image:{_preciseUvToWorld:n.image._preciseUvToWorld}},d=function(e){return{imageTransform:(0,i.H)(e.image._preciseUvToWorld),cropRectangle:(0,r.GM)(e.cropInteraction.uvToWorld)}}(e);return!(0,a.k)(d,c)}function _(e,t,n){if(m(e,t)){var a=f(e),i=(0,c.Ey)(n,t,a,d.Z.KeepAll);e.undoRedoStack.undoStack.push(i)}}}
,6529:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(458),i=n(6426),r=n(3029);function o(e){var t=e.cropUiDisplay.areCropOverlaysVisible,n=function(e){return e.cropInteraction.mode===i.I.usingNineSliceCropHandles||e.cropInteraction.mode===i.I.keyboardCropping||e.cropInteraction.mode===i.I.zoomToCrop||e.cropInteraction.mode===i.I.selectingSecondCorner||e.cropInteraction.isKeyboardFocused&&e.cropInteraction.focusedHandleIndex!==a.Q.Center&&e.cropInteraction.focusedHandleIndex!==a.Q.None||!!e.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown||e.rotationUi.isKeyboardFocused}(e);e.cropUiDisplay.areCropOverlaysVisible=n,!n&&t&&(0,r.M)(e)}}
,8489:(e,t,n)=>{"use strict";n.d(t,{E:()=>O,P:()=>w});var a=n(512),i=n(8874),r=n(5206),o=n(9680),s=n(4139),c=n(3080),d=n(3333),l=n(3613),u=n(6102),f=n(7002),p=n(3044),m=n(555),_=n(8309),h=n(5875),b=n(3510),g=n(6002),v=n(7216),y=n(6426),S=n(458),D=n(1815),I=n(3029),x=function(){return x=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},x.apply(this,arguments)};function C(e,t,n){return(0,D.Sg)((0,g.TG)(t,e.image._preciseUvToWorld,e.cropInteraction.aspectRatio,n),D.k5.userIsZoomingToCrop)}function O(e,t){var n=(0,r.GM)(e.cropInteraction.uvToWorld),u=t>0,_=(0,f.Cq)(e.cropUiDisplay.handleSizeCss,e.device.pixelRatio),h=(0,p.sJ)(_,e.view.worldToView),b=(0,r.GM)(e.cropInteraction._uvToWorldBeforeZoomToCrop),g=b.width/b.height,v=function(e,t,n,a,i,u,f,p){var m=!(0,l.es)(t),_=(0,r.GM)(n),h=(0,r.NV)(n),b=(0,r.GM)(a),g=(0,r.NV)(a),v=(0,c.f1)(h,e),y=(0,c.wp)(g,h),S=(0,c.y8)(y,v),D=v.x>y.x?S.x:1,I=v.y>y.y?S.y:1,x=(0,c.f1)(v,Math.min(D,I)),C=(0,c.f1)(x,.5),O=(0,c.wp)({x:_.left,y:_.top},C),w=(0,c.Tf)({x:b.left,y:b.top},g),E=(0,c.Tf)(h,x),A=g.y===h.x&&C.x>0,L=g.x===h.y&&C.y>0,k=(0,o.q)((0,s.e)(O.x),b.left,w.x),M=(0,o.q)((0,s.e)(O.y),b.top,w.y),P=A?_.left:k,T=L?_.top:M,U={left:P,top:T,width:(0,o.q)(E.x,i,b.left+g.x-P),height:(0,o.q)(E.y,i,b.top+g.y-T)},F=(0,r.qq)(U),H=m?(0,d.Wb)(t,F,p,f):u;return(0,d.ah)(U,H)}(t,e.cropInteraction.aspectRatio,e.cropInteraction.uvToWorld,e.image._preciseUvToWorld,h,g,e.cropInteraction.shouldInvertOriginalAspectRatio,e.image.originalPixelSize),y=(0,D.Ky)((0,i.xC)(v,u),D.k5.userIsZoomingToCrop);if(e.cropInteraction.shouldConstrainInImage&&u){(0,m.WN)((0,a.eo)(e.image._preciseUvToWorld))>0?(y=x(x({},y),C(e,y.uvToWorld,S.Q.TopRight)),y=x(x({},y),C(e,y.uvToWorld,S.Q.BottomLeft))):(y=x(x({},y),C(e,y.uvToWorld,S.Q.TopLeft)),y=x(x({},y),C(e,y.uvToWorld,S.Q.BottomRight)));var I=(0,r.GM)(y.uvToWorld);(0,i.QX)(I,n)&&(y=x(x({},y),(0,D.Ky)(n,D.k5.userIsZoomingToCrop)))}return y}function w(e,t,n,a){if(0!==t){var i=O(e,t);a&&a.logZoomEvent({zoomLevel:t}),Object.assign(e.cropInteraction,i),e.view.viewFitting.mode=v.m.fitCropRectInView,n&&(e.animations.needsFrameTick=!0,e.cropInteraction.mode!==y.I.zoomToCrop&&(e.cropInteraction.mode=y.I.zoomToCrop,e.animations.gridLineVisibility=(0,h.qr)(u.Cy),e.animations.outsideCropVisibility=(0,_.Vl)()),e.animations.dismissGridLineVisibility=(0,_.Vl)(),e.animations.dismissOutsideCropVisibility=(0,_.Vl)()),(0,I.M)(e),(0,b.T)(e)}}}
,5510:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var a="blankGroupUndoRedoPayloadId"}
,8492:(e,t,n)=>{"use strict";n.d(t,{QL:()=>c,X0:()=>o,XS:()=>r,r:()=>s,vN:()=>i});var a=n(9397),i=(0,a.qP)("edit/undo"),r=(0,a.qP)("edit/redo"),o=(0,a.qP)("edit/removeStackItems"),s=(0,a.qP)("edit/clearRedo"),c=(0,a.qP)("edit/collapseStackItems")}
,8085:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>r,h$:()=>c});var a=n(4422),i=n(8492);function r(e,t,n,i,r,o){return{id:e,undoPayload:t,redoPayload:n,sequence:(0,a.b)(),sequentialDuplicateAction:i,groupId:r,telemetryId:o}}function o(e,t,n){return n?t.find(function(t,a){return t.sequence===e&&a===n}):t.find(function(t){return t.sequence===e})}function s(e,t,n){var i=o(e,t,t.length-1);i&&(t.pop(),i.sequence=(0,a.b)()),n(i)}function c(e,t){var n=t.undoReducer,r=t.redoReducer,c=t.removeItemsReducer,d=t.collapseItemsReducer,l=t.afterClearRedoStacksReducer;e.addCase(i.vN,function(e,t){s(t.payload.timestamp,e.undoRedoStack.undoStack,function(t){t&&n(e,t)})}).addCase(i.XS,function(e,t){s(t.payload.timestamp,e.undoRedoStack.redoStack,function(t){t&&r(e,t)})}).addCase(i.X0,function(e,t){var n,a,i,r;n=t.payload,a=e.undoRedoStack.undoStack,i=function(t){c(e,t)},r=function(e,t){for(var n=[],a=0,i=e;a<i.length;a++){var r=o(i[a],t);r&&n.push(r)}return n}(n,a).map(function(e){return e.sequence}),r.length>0&&i(a.filter(function(e){return!r.includes(e.sequence)}))}).addCase(i.r,function(e,t){e.undoRedoStack.redoStack.length=0,l&&l(e)}).addCase(i.QL,function(e,t){var n,i,r,s,c;n={start:t.payload.start,end:t.payload.end},i=e.undoRedoStack.undoStack,r=function(n){d(e,t,n)},s=o(n.start,i),c=o(n.end,i),s&&c?r({sequence:(0,a.b)(),id:s.id,sequentialDuplicateAction:c.sequentialDuplicateAction,undoPayload:s.undoPayload,redoPayload:c.redoPayload}):(s&&r(s),c&&r(c))})}}
,6490:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var a=function(){function e(){this._count=0,this._min=Number.MAX_VALUE,this._totalTime=0}return Object.defineProperty(e.prototype,"frameCount",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minimumFps",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageFps",{get:function(){return 1e3*this._count/this._totalTime},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._count=0,this._min=Number.MAX_VALUE,this._totalTime=0},e.prototype.reportFrame=function(e){if(this._count++,e>0){var t=1e3/e;this._min=Math.min(this.minimumFps,t),this._totalTime+=e}},e}()}
,2148:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var a=n(5959),i=n(9270),r=n(6490),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=(0,a.createContext)(o(o({},(0,i.$)(function(e){})),{sessionFrameStats:new r.r}))}
,9270:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var a=n(7740),i=n(4967),r=n.n(i),o=n(4139),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},c=function(e){var t=(0,a.g)(),n=[];return{updateSessionId:function(){t=(0,a.g)(),n=[]},startTimedTexturePatchEvent:function(a){return n.push(a),a.timeoutMs>0&&setTimeout(function(){var i=n.find(function(e){return e.id===a.id});if(i){var r={name:"TexturePatchRunningLong",id:i.id,sessionId:t,isIntentional:!1,timeOut:i.timeoutMs};e(r)}},a.timeoutMs),a.id},endTimedTexturePatchEvent:function(a,i){var r=n.find(function(e){return e.id===a});if(r){var o=i.height,s=i.width,c={name:"TexturePatchApplied",id:r.id,isIntentional:!0,sessionId:t,timeConsumedInMs:Date.now()-r.startTimeMs,type:r.type,maskType:r.maskType,maskHeight:o,maskWidth:s};e(c)}n=n.filter(function(e){return e.id!==a})},logEditorActivityEvent:function(n){return e(d(t,n))},logCropEvent:r()(function(n){return e(l(t,n))},1e3),logRotateEvent:r()(function(n){return e(u(t,s(s({},n),{angle:(0,o.L)(n.angle,8)})))},1e3),logEditResetEvent:function(n){return e(f(t,n))},logZoomEvent:r()(function(n){return e(p(t,n))},1e3),logAspectRatioEvent:function(n){return e(m(t,n))},logFlipEvent:function(n){return e(_(t,n))},logAdjustmentEvent:r()(function(n){return e(h(t,n))},1e3),logCancelEvent:function(n){return e(b(t,n))},logPageLoadTimeEvent:function(n){return e(g(t,n))},logSessionStatistics:function(n){return e(v(t,n))},logErrorEvent:function(n){return e(y(t,n))},logWarningEvent:function(n){return e(S(t,n))},logSaveEvent:function(n){return e(D(t,n))},logCopyToClipboardEvent:function(n){return e(I(t,n))},logFailedToGetEditedImageEvent:function(){return e(x(t))},logRecenterEvent:function(){return e(C(t))},logMaxTextureSizeEvent:function(n){return e(O(t,n))},logMarkupToolSelectEvent:r()(function(n){return e(w(t,n))},500),logInkBrushUpdateEvent:r()(function(n){return e(E(t,n))},1e3),logSpotFixBrushSizeSliderAdjustEvent:function(n){return e(A(t,n))},logEditorActivityChangePrepareTimeEvent:function(n){return e(L(t,n))},logClearAllMarkupEvent:function(n){return e(k(t,n))},logAutoEnhanceRequestedEvent:function(n){return e(M(t,n))},logUndoRedoEvent:function(n){return e(P(t,n))},logTexturePatchCreationError:function(n){return e(T(t,n))},logBackgroundBlurIntensitySliderAdjustEvent:function(n){return e(U(t,n))},logMaskBrushSliderAdjustEvent:function(n){return e(F(t,n))},logBrushModeChanged:function(n){return e(H(t,n))},logResetBackground:function(){return e(R(t))},logColorReplaceSelection:r()(function(n){return e(N(t,n))},1e3),logBackgroundBrushToolToggle:function(n){return e(B(t,n))},logBackgroundOptionSelected:function(n){return e(j(t,n))},logTexturePatchCacheRetrieval:function(n){return e(V(t,n))},logAutoApplyToggle:function(n){return e(z(t,n))},logMagicEraseApplyEvent:function(n){return e(G(t,n))},logMagicEraseClearEvent:function(n){return e(K(t,n))},logAutoEnhanceEvent:function(n){return e(W(t,n))},logStylizerPromptExecuteEvent:function(n){return e(q(t,n))},logSuperResolutionSliderAdjustEvent:function(n){return e(Q(t,n))},logNameAndInputTypeEvent:function(n){return e(Y(t,n))},logSuperResolutionCompleteEvent:function(n){return e(J(t,n))},logSuperResolutionCompareSplitterMovedEvent:r()(function(n){return e(X(t,n))},1e3),logSuperResolutionAppliedEvent:function(n){return e(Z(t,n))}}},d=function(e,t){return s({name:"EditorActivityChange",isIntentional:!0,sessionId:e},t)},l=function(e,t){return s({name:"Crop",isIntentional:!0,sessionId:e},t)},u=function(e,t){return s({name:"Rotate",isIntentional:!0,sessionId:e},t)},f=function(e,t){return s({name:"EditReset",isIntentional:!0,sessionId:e},t)},p=function(e,t){return s({name:"Zoom",isIntentional:!0,sessionId:e},t)},m=function(e,t){return s({name:"AspectRatio",isIntentional:!0,sessionId:e},t)},_=function(e,t){return s({name:"Flip",isIntentional:!0,sessionId:e},t)},h=function(e,t){return s({name:"Adjustment",isIntentional:!0,sessionId:e},t)},b=function(e,t){return s({name:"Cancel",isIntentional:!0,sessionId:e},t)},g=function(e,t){return s({name:"PageLoadTime",isIntentional:!1,sessionId:e},t)},v=function(e,t){return s({name:"SessionStatistics",isIntentional:!1,sessionId:e},t)},y=function(e,t){return s({name:"Error",isIntentional:!1,sessionId:e},t)},S=function(e,t){return s({name:"Warning",isIntentional:!1,sessionId:e},t)},D=function(e,t){return s({name:"Save",isIntentional:!0,sessionId:e},t)},I=function(e,t){return s({name:"CopyToClipboard",isIntentional:!0,sessionId:e},t)},x=function(e){return{name:"GetEditedImageFailure",isIntentional:!1,sessionId:e}},C=function(e){return{sessionId:e,name:"Recenter",isIntentional:!0}},O=function(e,t){return s({name:"MaxTextureSize",isIntentional:!1,sessionId:e},t)},w=function(e,t){return s({name:"MarkupToolSelect",isIntentional:!0,sessionId:e},t)},E=function(e,t){return s({name:"InkBrushUpdate",isIntentional:!0,sessionId:e},t)},A=function(e,t){return s({name:"SpotFixBrushSizeSliderAdjust",isIntentional:!0,sessionId:e},t)},L=function(e,t){return s({name:"EditorActivityChangePrepareTime",isIntentional:!0,sessionId:e},t)},k=function(e,t){return s({name:"ClearAllMarkup",isIntentional:!0,sessionId:e},t)},M=function(e,t){return s({name:"AutoEnhanceRequested",isIntentional:!0,sessionId:e},t)},P=function(e,t){return s({name:"UndoRedo",isIntentional:!0,sessionId:e},t)},T=function(e,t){return s({name:"TexturePatchCreationError",isIntentional:!1,sessionId:e},t)},U=function(e,t){return s({name:"BackgroundBlurIntensitySliderAdjust",isIntentional:!0,sessionId:e},t)},F=function(e,t){return s({name:"MaskBrushSliderAdjust",isIntentional:!0,sessionId:e},t)},H=function(e,t){return s({name:"BrushModeChanged",isIntentional:!0,sessionId:e},t)},R=function(e){return{name:"ResetBackground",isIntentional:!0,sessionId:e}},N=function(e,t){return s({name:"ColorReplaceSelection",isIntentional:!0,sessionId:e},t)},B=function(e,t){return s({name:"BackgroundBrushToolToggle",isIntentional:!0,sessionId:e},t)},j=function(e,t){return s({name:"BackgroundOptionSelected",sessionId:e},t)},V=function(e,t){return s({name:"TexturePatchCacheRetrieval",isIntentional:!1,sessionId:e},t)},z=function(e,t){return s({name:"AutoApplyToggle",isIntentional:!0,sessionId:e},t)},G=function(e,t){return s({name:"MagicEraseApply",isIntentional:!0,sessionId:e},t)},K=function(e,t){return s({name:"MagicEraseClear",isIntentional:!0,sessionId:e},t)},W=function(e,t){return s({name:"AutoEnhance",isIntentional:!0,sessionId:e},t)},q=function(e,t){return s({name:"StylizerPromptExecuted",isIntentional:!0,sessionId:e},t)},Q=function(e,t){return s({name:"SuperResolutionSliderAdjust",isIntentional:!0,sessionId:e},t)},Y=function(e,t){return s({isIntentional:!0,sessionId:e},t)},J=function(e,t){return s({name:"SuperResolutionComplete",isIntentional:!0,sessionId:e},t)},X=function(e,t){return s({name:"SuperResolutionCompareSplitterMoved",isIntentional:!0,sessionId:e},t)},Z=function(e,t){return s({name:"SuperResolutionApplied",sessionId:e},t)}}
,7760:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var a="colorBlur"}
,171:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var a="colorReplacement"}
,3063:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var a="spotFix"}
,2522:(e,t,n)=>{"use strict";n.d(t,{g:()=>a});var a=function(e){return"#ffffff"===e.palette.black.toLowerCase()||"rgb(255,255,255)"===e.palette.black.toLowerCase()}}
,5011:(e,t,n)=>{"use strict";n.d(t,{BG:()=>s,Ky:()=>c,Qf:()=>r,Yn:()=>o,jw:()=>i,vL:()=>a});var a=[0,0,0,1],i=[1,0,0,1],r=[0,0,0,0],o=[1,1,1,1],s=[1,1,1,0],c=3}
,2891:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var a=["main","singleTileMain","singleTilePreSharpen","singleTileTemp","singleTileBackground","overlay","original","backgroundMask","eraseMask","depth","objectSegmentationPreview"]}
,7186:(e,t,n)=>{"use strict";var a;n.d(t,{V:()=>a}),n(7592),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.InitializationStarted=1]="InitializationStarted",e[e.InitializationFinished=2]="InitializationFinished"}(a||(a={}))}
,553:(e,t,n)=>{"use strict";var a;n.d(t,{A:()=>a}),function(e){e.RGBA="RGBA",e.RGB="RGB",e.A="A"}(a||(a={}))}
,7592:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var a,i=(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(t){return e.call(this,"Unhandled value: ".concat(t))||this}return i(t,e),t}(Error)}
,7130:(e,t,n)=>{"use strict";var a;n.d(t,{H:()=>a}),function(e){e[e.info=0]="info",e[e.error=1]="error",e[e.success=2]="success",e[e.warning=3]="warning"}(a||(a={}))}
,7766:(e,t,n)=>{"use strict";var a;n.d(t,{F:()=>a}),function(e){e.Brightness="brightness",e.Exposure="exposure",e.Contrast="contrast",e.Highlights="highlights",e.Shadows="shadows",e.Saturation="saturation",e.Temperature="temperature",e.Tint="tint",e.Vignette="vignette",e.Sharpness="sharpness"}(a||(a={}))}
,6899:(e,t,n)=>{"use strict";n.d(t,{Mu:()=>a,Vm:()=>o,cw:()=>i,d9:()=>r});var a="Pen",i="Highlighter",r="Eraser",o="Text"}
,2759:(e,t,n)=>{"use strict";var a;n.d(t,{B:()=>i,p:()=>a}),function(e){e.Pen="Pen",e.Highlighter="Highlighter"}(a||(a={}));var i=function(e){return Object.keys(a).includes(e)}}
,4230:(e,t,n)=>{"use strict";var a;n.d(t,{A:()=>a}),function(e){e[e.InkContent=0]="InkContent",e[e.TextContent=1]="TextContent"}(a||(a={}))}
,818:(e,t,n)=>{"use strict";var a;n.d(t,{I:()=>a}),function(e){e.SpotFix="spotFix",e.MagicErase="magicErase"}(a||(a={}))}
,1626:(e,t,n)=>{"use strict";var a;n.d(t,{D:()=>a}),function(e){e[e.CircleMask=0]="CircleMask",e[e.FromLayer=1]="FromLayer",e[e.RectangleMask=2]="RectangleMask",e[e.PillShapedMask=3]="PillShapedMask",e[e.FullImageMask=4]="FullImageMask"}(a||(a={}))}
,4107:(e,t,n)=>{"use strict";var a;n.d(t,{Z:()=>a}),function(e){e[e.KeepAll=0]="KeepAll",e[e.KeepLast=1]="KeepLast"}(a||(a={}))}
,8638:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var a=function(){function e(){this.listeners=[]}return e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){this.listeners.includes(e)&&(this.listeners=this.listeners.filter(function(t){return t!==e}))},e.prototype.removeAllListeners=function(){this.listeners=[]},e.prototype.notifyListeners=function(e){this.listeners.length>0&&this.listeners.forEach(function(t){return t(e)})},e}()}
,5009:(e,t,n)=>{"use strict";var a;n.d(t,{A:()=>a}),function(e){e.Version1="Version 1",e.Test="Test",e.Latest="Version 1"}(a||(a={}))}
,9710:(e,t,n)=>{"use strict";n.d(t,{pS:()=>o,qr:()=>l,E3:()=>c,hV:()=>s});var a,i=n(7766),r={sliderMinValue:-100,sliderMaxValue:100,sliderStepValue:1,sliderValueFormat:function(e){return e.toFixed(0)},sliderDeadZoneOffset:4},o=.5;function s(){return Object.values(i.F)}function c(e){return l[e].iconName}function d(e,t){return{iconName:e,configuration:t||r}}var l=((a={})[i.F.Exposure]=d("Exposure-Havana"),a[i.F.Brightness]=d("Brightness-Havana"),a[i.F.Contrast]=d("Contrast-Havana"),a[i.F.Highlights]=d("Highlights-Havana"),a[i.F.Shadows]=d("Shadows-Havana"),a[i.F.Saturation]=d("Saturation-Havana"),a[i.F.Temperature]=d("Temperature-Havana"),a[i.F.Tint]=d("Tint-Havana"),a[i.F.Vignette]=d("Vignette-Havana"),a[i.F.Sharpness]=d("Diamond"),a)}
,5459:(e,t,n)=>{"use strict";function a(e,t,n){var a=n?t[n]:e;if(!a)throw new Error("Adjustments for dynamicLayer do not exist: ".concat(n));return a}n.d(t,{I:()=>a})}
,4698:(e,t,n)=>{"use strict";function a(e){return e.length>0?e[e.length-1]:void 0}function i(e){return e[0]}n.d(t,{$1:()=>i,PV:()=>a})}
,7216:(e,t,n)=>{"use strict";var a;n.d(t,{m:()=>a}),function(e){e[e.none=0]="none",e[e.fitCropRectInView=1]="fitCropRectInView",e[e.fitImageInView=2]="fitImageInView",e[e.actualSize=3]="actualSize"}(a||(a={}))}
,360:(e,t,n)=>{"use strict";n.d(t,{eW:()=>a,mR:()=>i});var a=function(e){return{left:e,right:e,top:e,bottom:e}};function i(e,t,n){var a=function(e,t){return{left:Math.round(t.left*e),right:Math.round(t.right*e),top:Math.round(t.top*e),bottom:Math.round(t.bottom*e)}}(t,n);return{top:a.top,left:a.left,width:Math.max(1,e.x-a.left-a.right),height:Math.max(1,e.y-a.top-a.bottom)}}}
,2231:(e,t,n)=>{"use strict";n.d(t,{Ep:()=>l,dC:()=>d,dM:()=>m,l8:()=>_});var a=n(7216),i=n(512),r=n(5206),o=n(6002),s=n(8874),c=n(7572),d=50;function l(e,t,n,r,o){var s,c=((s={})[a.m.none]=u(o),s[a.m.fitCropRectInView]=f(t,n),s[a.m.fitImageInView]=f(t,r),s[a.m.actualSize]=p(t,o),s);return(0,i.rJ)(c[e]())}var u=function(e){return function(){return e}},f=function(e,t){return function(){var n=(0,o.Ue)(t,(0,r.qq)(e)),a=n.tx,c=n.ty,l=n.scale,u=(0,i.W3)(l),f=(0,i.cQ)(a,c),p=(0,i.XG)(f,u);if(l>d){var m=d/l,_=(0,s.Vv)(e);return(0,i.XG)((0,i.p1)(m,m,_.x,_.y),p)}return p}},p=function(e,t){return function(){var n=(0,s.Vv)(e);return(0,c.Tt)(t,1,n)}},m=function(e,t,n){if(e){var a=(0,r.GM)(t);return n.width<a.width&&n.height>a.height&&(a.top=n.top,a.height=n.height),n.height<a.height&&n.width>a.width&&(a.left=n.left,a.width=n.width),(0,r.qq)(a)}return(0,i.St)(t)};function _(e,t,n){var a=(0,i.JD)(e),r=(0,i.cQ)((n.x-t.x)/2/a,(n.y-t.y)/2/a);return(0,i.XG)(e,r)}}
,7572:(e,t,n)=>{"use strict";n.d(t,{JQ:()=>o,Tt:()=>l,XW:()=>c,c0:()=>d,zL:()=>s});var a=n(9680),i=n(512),r=n(2231),o=.05,s=5/95;function c(e,t){return e*(1-t)}function d(e,t){return(0,a.q)(e,t,r.dC)}function l(e,t,n){var a=(0,i.mi)(e,t,1,1,n.x,n.y);return(0,i.XG)(a,e)}}
,401:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var a=n(6147);function i(e,t){var n=(0,a.n)(e);if(!n)throw new Error("Invalid color string: ".concat(e));return[n.r/255,n.g/255,n.b/255,t]}}
,458:(e,t,n)=>{"use strict";var a;n.d(t,{Q:()=>a}),function(e){e[e.None=-1]="None",e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.SideLeft=3]="SideLeft",e[e.Center=4]="Center",e[e.SideRight=5]="SideRight",e[e.BottomLeft=6]="BottomLeft",e[e.BottomCenter=7]="BottomCenter",e[e.BottomRight=8]="BottomRight"}(a||(a={}))}
,6426:(e,t,n)=>{"use strict";var a;n.d(t,{I:()=>a}),function(e){e[e.usingNineSliceCropHandles=0]="usingNineSliceCropHandles",e[e.selectingFirstCorner=1]="selectingFirstCorner",e[e.selectingSecondCorner=2]="selectingSecondCorner",e[e.draggingView=3]="draggingView",e[e.draggingImage=4]="draggingImage",e[e.rotating=5]="rotating",e[e.zoomToCrop=6]="zoomToCrop",e[e.keyboardCropping=7]="keyboardCropping",e[e.keyboardRotating=8]="keyboardRotating",e[e.none=9]="none",e[e.disabled=10]="disabled"}(a||(a={}))}
,7774:(e,t,n)=>{"use strict";var a;n.d(t,{y:()=>a}),function(e){e.Right="Right",e.Left="Left",e.Up="Up",e.Down="Down",e.None="None"}(a||(a={}))}
,8365:(e,t,n)=>{"use strict";n.d(t,{$X:()=>m,$f:()=>f,CA:()=>c,ao:()=>p,by:()=>o,hO:()=>i,oV:()=>v,qL:()=>r,vc:()=>s});var a=n(4187),i={name:"None",ratio:void 0,iconName:a.F_},r={name:"Original",ratio:void 0,iconName:a.X2},o={name:"Square",ratio:{x:1,y:1},iconName:a.vK},s={name:"NineBySixteen",ratio:{x:9,y:16},iconName:a.Ke},c={name:"SixteenByNine",ratio:{x:16,y:9},iconName:a.Uc},d={name:"FourByFive",ratio:{x:4,y:5},iconName:a.rs},l={name:"FiveByFour",ratio:{x:5,y:4},iconName:a.tI},u={name:"ThreeByFour",ratio:{x:3,y:4},iconName:a.jj},f={name:"FourByThree",ratio:{x:4,y:3},iconName:a.P0},p={name:"TwoByThree",ratio:{x:2,y:3},iconName:a._f},m={name:"ThreeByTwo",ratio:{x:3,y:2},iconName:a.KU},_={name:"FiveBySeven",ratio:{x:5,y:7},iconName:a.Tp},h={name:"SevenByFive",ratio:{x:7,y:5},iconName:a.F$},b={name:"OneByTwo",ratio:{x:1,y:2},iconName:a.Ps},g={name:"TwoByOne",ratio:{x:2,y:1},iconName:a.sB},v=[i,r,o,s,c,d,l,u,f,p,m,_,h,b,g]}
,3333:(e,t,n)=>{"use strict";n.d(t,{$1:()=>p,Ao:()=>b,L5:()=>f,NI:()=>v,Wb:()=>m,ah:()=>h,fK:()=>_,q1:()=>g});var a=n(512),i=n(3080),r=n(5206),o=n(8874),s=n(6002),c=n(3613),d=n(7002),l=n(9680),u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function f(e,t){var n=e;if((0,c.DM)(e)){var a=e.ratio;t.forEach(function(e){(0,c.DM)(e)&&e.ratio.x===a.y&&e.ratio.y===a.x&&(n=e)})}return n}function p(e){var t=(0,i.Rd)((0,r.NV)(e));return t.x/t.y}function m(e,t,n,a){var i=null;if((0,c.bN)(e))i=a?n.y/n.x:n.x/n.y;else if((0,c.es)(e)){var o=(0,r.GM)(t);i=o.width/o.height}else(0,c.DM)(e)&&(i=e.ratio.x/e.ratio.y);if(null===i)throw new Error("Type of ".concat(e.name," aspectRatio was not handled in getConstrainedAspectRatio()"));return i}function _(e,t){return t.reduce(function(t,n){if((0,c.DM)(n)){var a=t.x/t.y,i=n.ratio.x/n.ratio.y;return Math.abs(i-e)<Math.abs(a-e)&&(t=u({},n.ratio)),t}return t},{x:1,y:1})}function h(e,t,n){var a=u({},e),r=Math.hypot(e.width,e.height),o=(0,i.sF)({x:t,y:1}),s=(0,i.f1)(o,r);if(a.width=s.x,a.height=s.y,void 0!==n){var c=(0,d.pz)(n),l=(0,d.pM)(n);-1===c?a.left+=e.width-a.width:0===c&&(a.left+=(e.width-a.width)/2),-1===l?a.top+=e.height-a.height:0===l&&(a.top+=(e.height-a.height)/2)}return a}function b(e,t,n,a,i,r,s,c){var d=_(t.width/t.height,c),u=d.x/d.y,f=(0,o.n4)(t),p=(0,l.q)(i.x,f.left,f.left+f.width),m=(0,l.q)(i.y,f.top,f.top+f.height),h=1,b=1;f.width!==e.width&&(h=Math.max(h,Math.min(Math.round(p+a)-(r?f.left:f.width+f.left),n.width-t.width))),f.height!==e.height&&(b=Math.max(b,Math.min(Math.round(m+a)-(s?f.top:f.height+f.top),n.height-t.height)));for(var g=0;g<h;g++)for(var v=0;v<b;v++)if(Math.abs((f.width+g)/(f.height+v)-u)<1e-6)return r&&(f.left-=g),s&&(f.top-=v),f.width+=g,f.height+=v,f;return t}function g(e,t,n){var c=(0,r.GM)(e),d=(0,r.FN)(e),l=Math.hypot(c.width,c.height),u=(0,i.sF)({x:n,y:1}),f=(0,i.f1)(u,l),p=c.width/f.x,m=c.height/f.y,_={left:d.x-f.x/2,top:d.y-f.y/2,width:f.x,height:f.y},h=(0,r.qq)(_),b=(0,s.BJ)(h,t);if(void 0!==b&&(b<=p||b<=m)){var g=(0,a.cQ)(-d.x,-d.y),v=(0,a.W3)(b),y=(0,a.cQ)(d.x,d.y),S=(0,a.XG)(y,v,g,h);return(0,o.n4)((0,r.GM)(S))}return(0,o.n4)(_)}function v(e,t){return Math.abs(t.x/t.y-e)<.01}}
,3613:(e,t,n)=>{"use strict";n.d(t,{DM:()=>o,bN:()=>r,es:()=>i});var a=n(4187);function i(e){return"None"===e.name&&e.iconName===a.F_&&void 0===e.ratio}function r(e){return"Original"===e.name&&e.iconName===a.X2&&void 0===e.ratio}function o(e){return void 0!==e.ratio&&void 0!==e.ratio}}
,5444:(e,t,n)=>{"use strict";n.d(t,{Bc:()=>i,WS:()=>a});var a=28,i=50}
,6002:(e,t,n)=>{"use strict";n.d(t,{BJ:()=>y,TG:()=>g,Ue:()=>p,WW:()=>b,ZU:()=>S,m8:()=>D,tI:()=>v});var a=n(7774),i=n(458),r=n(8874),o=n(512),s=n(3080),c=n(5206),d=n(7830),l=n(3613),u=n(7002),f=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};function p(e,t){var n=(0,o.ti)(e),a=n[0],i=n[1],r=n[2],c=n[3],d=(0,o.ti)(t),l=d[0],u=d[1],f=d[2],p=d[3],m=(0,s.dR)((0,s.wp)(u,l)),_=(0,s.dR)((0,s.wp)(p,l));if(0===m||0===_){var h=(0,s.f1)((0,s.wp)(f,l),.5),b=(0,s.f1)((0,s.wp)(r,a),.5),g=(0,s.wp)(h,b);return{tx:g.x,ty:g.y,scale:0}}var v=(0,s.sF)((0,s.wp)(u,l)),y={x:-v.y,y:v.x},S={x:(0,s.nF)(a,v),y:(0,s.nF)(a,y)},D={x:(0,s.nF)(i,v),y:(0,s.nF)(i,y)},I={x:(0,s.nF)(r,v),y:(0,s.nF)(r,y)},x={x:(0,s.nF)(c,v),y:(0,s.nF)(c,y)},C=Math.min(S.x,D.x,I.x,x.x),O=Math.min(S.y,D.y,I.y,x.y),w=Math.max(S.x,D.x,I.x,x.x),E=Math.max(S.y,D.y,I.y,x.y)-O,A=w-C,L=(0,s.dR)((0,s.wp)(u,l)),k=(0,s.dR)((0,s.wp)(p,l)),M=Math.min(L/A,k/E),P=(0,o.XG)((0,o.W3)(M,M),e),T=(0,o.So)(P,{x:0,y:0}),U=(0,o.So)(P,{x:1,y:1}),F=(0,s.Ws)(U,T),H=(0,s.Ws)(f,l),R=(0,s.wp)(H,F);return{tx:R.x,ty:R.y,scale:M}}var m={horizontalTopLeftToRight:{fixedEnd:i.Q.TopLeft,freeEnd:i.Q.TopRight},horizontalTopRightToLeft:{fixedEnd:i.Q.TopRight,freeEnd:i.Q.TopLeft},horizontalBottomLeftToRight:{fixedEnd:i.Q.BottomLeft,freeEnd:i.Q.BottomRight},horizontalBottomRightToLeft:{fixedEnd:i.Q.BottomRight,freeEnd:i.Q.BottomLeft},verticalLeftTopToBottom:{fixedEnd:i.Q.TopLeft,freeEnd:i.Q.BottomLeft},verticalLeftBottomToTop:{fixedEnd:i.Q.BottomLeft,freeEnd:i.Q.TopLeft},verticalRightTopToBottom:{fixedEnd:i.Q.TopRight,freeEnd:i.Q.BottomRight},verticalRightBottomToTop:{fixedEnd:i.Q.BottomRight,freeEnd:i.Q.TopRight},diagonalTopLeftToBottomRight:{fixedEnd:i.Q.TopLeft,freeEnd:i.Q.BottomRight},diagonalBottomRightToTopLeft:{fixedEnd:i.Q.BottomRight,freeEnd:i.Q.TopLeft},diagonalTopRightToBottomLeft:{fixedEnd:i.Q.TopRight,freeEnd:i.Q.BottomLeft},diagonalBottomLeftToTopRight:{fixedEnd:i.Q.BottomLeft,freeEnd:i.Q.TopRight}},_={leftToRight:[m.horizontalTopLeftToRight,m.horizontalBottomLeftToRight],rightToLeft:[m.horizontalTopRightToLeft,m.horizontalBottomRightToLeft],topToBottom:[m.verticalLeftTopToBottom,m.verticalRightTopToBottom],bottomToTop:[m.verticalLeftBottomToTop,m.verticalRightBottomToTop],fromTopLeft:[m.horizontalTopLeftToRight,m.verticalLeftTopToBottom,m.diagonalTopLeftToBottomRight],fromTopRight:[m.horizontalTopRightToLeft,m.verticalRightTopToBottom,m.diagonalTopRightToBottomLeft],fromBottomLeft:[m.verticalLeftBottomToTop,m.horizontalBottomLeftToRight,m.diagonalBottomLeftToTopRight],fromBottomRight:[m.verticalRightBottomToTop,m.horizontalBottomRightToLeft,m.diagonalBottomRightToTopLeft]};function h(e,t,n,r,f,p){var m,_=(0,o.OW)(n),h=(0,o.ti)(_);return e.forEach(function(e){var n=null!=m?m:t,b=function(e,t,n,r,f,p,m){for(var _=(0,o.So)(e,(0,u.xU)(r.fixedEnd)),h=(0,o.So)(e,(0,u.xU)(r.freeEnd)),b=0,g=void 0,v=0;v<n.length;v++){var y=(0,d.A)(_,h,n[v],n[(v+1)%n.length]);if(void 0!==y){var S=(0,s.wp)(h,_),D=(0,s.Tf)(_,(0,s.f1)(S,.5*y));(0,s.ln)((0,o.J)(t,D))&&(b=Math.max(b,y))}}return b<1&&b>0&&(g=function(e,t,n,r,s,d,u){var f=(0,l.es)(e),p=t.x===n.x,m=t.y===n.y,_=f&&p?1:d,h=f&&m?1:d,b=t.x,g=t.y,v=(0,c.GM)(r);return s===i.Q.TopCenter||s===i.Q.BottomCenter?f?_=1:(b=v.left+v.width/2,_-=1-d,h-=1-d):s!==i.Q.SideLeft&&s!==i.Q.SideRight||(f?h=1:(g=v.top+v.height/2,_-=1-d,h-=1-d)),u===a.y.Right||u===a.y.Left?h=1:u!==a.y.Up&&u!==a.y.Down||(_=1),(0,o.p1)(_,h,b,g)}(f,_,h,e,p,b,m)),g}(n,_,h,e,r,f,p);void 0!==b&&(m=(0,o.XG)(b,n))}),m}function b(e,t){var n=(0,o.iE)(e),a=(0,o.ti)(t).map(function(e){return(0,o.So)(n,e)}).reduce(function(e,t){var n=0;t.x<0?n=-t.x:t.x>1&&(n=1-t.x);var a=0;return t.y<0?a=-t.y:t.y>1&&(a=1-t.y),Math.abs(n)>Math.abs(e.x)&&(e.x=n),Math.abs(a)>Math.abs(e.y)&&(e.y=a),e},{x:0,y:0}),i=(0,o.tM)(e);return(0,s.wp)((0,o.So)(e,a),i)}function g(e,t,n,a){var s=(0,o.St)(e),d=(0,l.es)(n),u=null;switch(a){case i.Q.TopLeft:u=_.fromBottomRight;break;case i.Q.TopCenter:u=d?_.bottomToTop:f(f([],_.fromBottomRight,!0),_.fromBottomLeft,!0);break;case i.Q.TopRight:u=_.fromBottomLeft;break;case i.Q.SideLeft:u=d?_.rightToLeft:f(f([],_.fromBottomRight,!0),_.fromTopRight,!0);break;case i.Q.Center:var p=b(t,e);s=(0,o.XG)((0,o.cQ)(p.x,p.y),e);break;case i.Q.SideRight:u=d?_.leftToRight:f(f([],_.fromBottomLeft,!0),_.fromTopLeft,!0);break;case i.Q.BottomLeft:u=_.fromTopRight;break;case i.Q.BottomCenter:u=d?_.topToBottom:f(f([],_.fromTopLeft,!0),_.fromTopRight,!0);break;case i.Q.BottomRight:u=_.fromTopLeft}if(u&&(s=h(u,e,t,n,a)),s){var m=(0,r.n4)((0,c.GM)(s));return(0,c.qq)(m)}return e}function v(e,t,n,s,d){var l=(0,o.St)(e);if(s===i.Q.Center){var u=b(t,e);return(0,o.XG)((0,o.cQ)(u.x,u.y),e)}var f=function(e,t){switch(t){case a.y.Up:if([i.Q.TopLeft,i.Q.TopRight,i.Q.Center].includes(e))return _.bottomToTop;break;case a.y.Left:if([i.Q.TopLeft,i.Q.BottomLeft,i.Q.Center].includes(e))return _.rightToLeft;break;case a.y.Right:if([i.Q.TopRight,i.Q.BottomRight,i.Q.Center].includes(e))return _.leftToRight;break;case a.y.Down:if([i.Q.BottomLeft,i.Q.BottomRight,i.Q.Center].includes(e))return _.topToBottom}return[]}(s,d);f.length>0&&(l=h(f,e,t,n,s,d)||l);var p=(0,r.n4)((0,c.GM)(l));return(0,c.qq)(p)}function y(e,t){var n=(0,o.ti)(e),a=(0,o.ti)(t),i=(0,s.Ws)(n[2],n[0]);if((0,s.ln)((0,o.J)(t,i))){var r=Number.MAX_VALUE;return n.forEach(function(e){for(var t=0;t<a.length;t++){var n=(0,d.A)(i,e,a[t],a[(t+1)%a.length]);void 0!==n&&(r=Math.min(r,n))}}),r===Number.MAX_VALUE?void 0:r}}function S(e,t,n){var a=y(e,t);if(void 0!==a){if(a<1){var i=(0,c.FN)(e),s=i.x,d=i.y,l=(0,o.XG)((0,o.p1)(a,a,s,d),e),u=(0,r.n4)((0,c.GM)(l));return(0,c.qq)(u)}return e}var f=p(n,t),m=f.tx,_=f.ty,h=f.scale,b=n,g=(0,o.W3)(h),v=(0,o.cQ)(m,_);return(0,o.XG)(v,g,b)}function D(e){return e!==i.Q.None&&e!==i.Q.Center}}
,6102:(e,t,n)=>{"use strict";n.d(t,{B$:()=>d,Cy:()=>u,Te:()=>p,UV:()=>l,Um:()=>m,ZR:()=>f});var a=n(6426),i=n(512),r=n(5206),o=n(5385),s=n(9024),c=n(5148),d=100,l=400,u=2,f=8;function p(e,t){if(e)return e;switch(t){case a.I.keyboardRotating:case a.I.rotating:return f;case a.I.usingNineSliceCropHandles:case a.I.selectingSecondCorner:case a.I.draggingImage:case a.I.keyboardCropping:case a.I.zoomToCrop:return u;default:return 0}}function m(e,t,n,a,d,l){return function(e,t,n){var a=e||(0,c.m)(n),i=a?0:.75,r=a?.75:0;return(0,o.Ec)(i,r,t)}(e,a,l)*function(e,t){return(0,c.m)(t)?(0,s.a)([1,1,1,1,0],e):1}(d,l)*function(e){var t=(0,i.JD)(e);return(0,o.W4)(8,3,t)}(t)*function(e,t){var n=(0,r.GM)((0,i.XG)(e,t)),a=Math.min(n.height,n.width);return(0,o.W4)(50,80,a)}(t,n)}}
,7002:(e,t,n)=>{"use strict";n.d(t,{Cq:()=>l,FX:()=>d,d6:()=>u,n:()=>s,pM:()=>o,pz:()=>r,xU:()=>c});var a=n(3080);function i(e,t,n,a){for(var i=a/2,r=[t-i,t+i,t+n-i,t+n+i],o=0;o<3;o++)if(e>=r[o]&&e<=r[o+1])return o;return-1}function r(e){return e%3-1}function o(e){return Math.floor(e/3)-1}function s(e,t,n){var a=t.left,r=t.width,o=t.top,s=t.height,c=i(e.x,a,r,n);if(-1===c)return-1;var d=i(e.y,o,s,n);return-1===d?-1:3*d+c}function c(e){return{x:(r(e)+1)/2,y:(o(e)+1)/2}}function d(e,t,n){var i=function(e,t){var n=t.left,a=t.width,i=t.top,s=t.height,c=o(e);return{x:n+(r(e)+1)*(a/2),y:i+(c+1)*(s/2)}}(e,t);return(0,a.wp)(n,i)}function l(e,t){return Math.floor(e*t)}function u(e,t){return e*t}}
,5148:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var a=n(6426);function i(e){return e===a.I.zoomToCrop||e===a.I.keyboardCropping||e===a.I.keyboardRotating}}
,180:(e,t,n)=>{"use strict";n.d(t,{ID:()=>c,TL:()=>d,iY:()=>l});var a=n(5385),i=n(9024),r=n(252),o=n(6426),s=n(5148),c=100,d=400;function l(e,t,n,c,d){if(d!==r.I8||c===o.I.disabled)return 0;if((c===o.I.none||c===o.I.draggingView)&&1===t)return.2;var l=e||(0,s.m)(c),u=l?.2:.5,f=l?.5:.2;return(0,a.Ec)(u,f,t)*function(e,t){return(0,s.m)(t)?(0,i.a)([1,1,1,1,.4],e):1}(n,c)}}
,3044:(e,t,n)=>{"use strict";n.d(t,{WZ:()=>u,Ys:()=>p,Z2:()=>l,hY:()=>f,sJ:()=>m});var a=n(512),i=n(8874),r=n(5206),o=n(2650),s=n(3333),c=n(7002),d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};function l(e,t,n,a,r,o,l,u){if(-1===n)return e;var f=d({},e),p=a.x,m=a.y,_=(0,c.pM)(n),h=(0,c.pz)(n);if(0===h&&0===_){p=Math.max(t.left+e.width/2,p),p=Math.min(t.left+t.width-e.width/2,p),m=Math.max(t.top+e.height/2,m),m=Math.min(t.top+t.height-e.height/2,m);var b=p-(e.left+e.width/2),g=m-(e.top+e.height/2);f.left+=b,f.top+=g}else p=Math.max(t.left,p),p=Math.min(t.left+t.width,p),m=Math.max(t.top,m),m=Math.min(t.top+t.height,m),p-=e.left,m-=e.top,-1===h?(p=Math.min(p,f.width-o),f.left=p+e.left,f.width=f.width-p):1===h&&(p=Math.max(p,o),f.width=p),-1===_?(m=Math.min(m,f.height-o),f.top=m+e.top,f.height=f.height-m):1===_&&(m=Math.max(m,o),f.height=m),f=u?(0,s.ah)(f,u,n):(0,s.Ao)(e,f,t,r,a,-1===h,-1===_,l);var v=(0,i.n4)(f);return(0,i.xo)(v,o)?v:e}function u(e,t,n){if(0===(0,a.JD)(t))return!1;var r=(0,o.o)(e,t,n);return(0,i._N)(r,i.hs)}function f(e,t,n){var o=(0,i.n4)((0,r.GM)((0,a.XG)(t,n)));return o.top+o.height>e.top+e.height}function p(e,t){return(3*e+8)/t}function m(e,t){return p(e,(0,a.JD)(t))}}
,555:(e,t,n)=>{"use strict";n.d(t,{J5:()=>a,KT:()=>o,WN:()=>r,Y3:()=>s});var a,i=n(7774);function r(e){var t=function(t,n){return e>t&&e<=n};return t(-45,45)?e:t(45,135)?e-90:t(-135,-45)?e+90:t(135,180)?e-180:e+180}function o(e,t){var n=e+t;return n>180?-360+n:n<=-180?360+n:n}function s(e,t,n){switch(e){case i.y.Right:return t+n;case i.y.Left:return t-n;default:return t}}!function(e){e[e.Clockwise=0]="Clockwise",e[e.CounterClockwise=1]="CounterClockwise"}(a||(a={}))}
,252:(e,t,n)=>{"use strict";n.d(t,{D1:()=>_,I8:()=>a,NF:()=>c,Nr:()=>f,Xc:()=>r,Y4:()=>o,cF:()=>m,co:()=>p,dp:()=>d,lm:()=>i,qO:()=>s,qQ:()=>u,vs:()=>l});var a="Crop",i="Adjustment",r="Filter",o="Markup",s="Retouch",c="Background",d="FocalPoint",l="Stylizer",u="SuperResolution",f="InPaint",p="Relight",m=a;function _(e){return e===a||e===i||e===r||e===o||e===s||e===c||e===d||e===l||e===u||e===f||e===p}}
,4907:(e,t,n)=>{"use strict";function a(e){return e.reduce(function(e,t){return e.concat(t)},[])}n.d(t,{e:()=>a})}
,9075:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var a=n(553);function i(e){if(e===a.A.RGBA)return 3;if(e===a.A.A)return 0;throw new Error("the specified image format does not have alpha")}}
,1870:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var a=n(553);function i(e){var t;return((t={})[a.A.RGB]=3,t[a.A.RGBA]=4,t[a.A.A]=1,t)[e]}}
,4422:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var a=Date.now(),i=a;function r(){var e=a+window.performance.now();return e<=i&&(e=i+1),i=e,e}}
,4187:(e,t,n)=>{"use strict";n.d(t,{F$:()=>d,F_:()=>a,KU:()=>u,Ke:()=>h,P0:()=>p,Ps:()=>o,Tp:()=>c,Uc:()=>b,X2:()=>i,_f:()=>l,jj:()=>f,rs:()=>m,sB:()=>s,tI:()=>_,vK:()=>r});var a="FreeformAspect-Havana",i="OriginalAspect-Havana",r="SquareAspect-Havana",o="OneByTwoAspect-Havana",s="TwoByOneAspect-Havana",c="FiveBySevenAspect-Havana",d="SevenByFiveAspect-Havana",l="TwoByThreeAspect-Havana",u="ThreeByTwoAspect-Havana",f="ThreeByFourAspect-Havana",p="FourByThreeAspect-Havana",m="FourByFiveAspect-Havana",_="FiveByFourAspect-Havana",h="NineBySixteenAspect-Havana",b="SixteenByNineAspect-Havana"}
,2261:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var a=n(8874),i=n(512),r=n(5206);function o(e,t){var n=(0,r.qq)(t),o=(0,i.XG)(n,e);return(0,a.n4)((0,r.GM)(o))}}
,2650:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var a=n(512);function i(e,t,n){var i=(0,a.rJ)(n),r=(0,a.iE)((0,a.XG)(t,i));return(0,a.So)(r,e)}}
,8384:(e,t,n)=>{"use strict";function a(e){var t="Mouse";return(null==e?void 0:e.nativeEvent)instanceof PointerEvent&&(t=i(e.nativeEvent)),t}function i(e){var t="";switch(e.pointerType){case"touch":t="Touch";break;case"pen":t="Pen";break;case"mouse":t="Mouse";break;default:0===e.screenX&&0===e.screenY&&(t="Keyboard")}return t}function r(e){var t="Keyboard";return e instanceof MouseEvent?t="Mouse":e.touches&&(t="Touch"),t}n.d(t,{IR:()=>r,M3:()=>i,UR:()=>a})}
,9573:(e,t,n)=>{"use strict";n.d(t,{$:()=>O,DC:()=>b,Dp:()=>y,Jy:()=>f,K8:()=>x,QD:()=>d,SG:()=>g,_2:()=>m,ab:()=>l,jT:()=>_,mw:()=>E,n:()=>v,nE:()=>w,o4:()=>D,qb:()=>C,s9:()=>u,tb:()=>I,xd:()=>S,yL:()=>p});var a=n(8874),i=n(3080),r=n(7774),o=n(458),s=n(2141),c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=10,l=1,u=.1,f=1,p=5;function m(e){switch(e){case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":return!0;default:return!1}}function _(e){switch(e){case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":case"Home":case"End":return!0;default:return!1}}function h(e){return"ArrowRight"===e||"ArrowLeft"===e}function b(e){switch(e){case"Slow":return l;case"Fast":return 10;case"SuperFast":return 50;default:return 0}}function g(e){switch(e){case"ArrowRight":return r.y.Right;case"ArrowLeft":return r.y.Left;case"ArrowUp":return r.y.Up;case"ArrowDown":return r.y.Down;default:return r.y.None}}function v(e){return(0,i.f1)(y(e),-1)}function y(e){switch(e){case r.y.Left:return{x:-1,y:0};case r.y.Right:return{x:1,y:0};case r.y.Down:return{x:0,y:1};case r.y.Up:return{x:0,y:-1};default:return{x:0,y:0}}}function S(e,t,n,i){var s=c({},e);switch(t){case r.y.Right:n===o.Q.TopLeft||n===o.Q.BottomLeft?(s.left=e.width<i?e.left+e.width:e.left+i,s.width=e.width-i):n===o.Q.TopRight||n===o.Q.BottomRight?s.width=e.width+i:n===o.Q.Center&&(s.left=e.left+i);break;case r.y.Left:n===o.Q.TopRight||n===o.Q.BottomRight?s.width=e.width-i:n===o.Q.TopLeft||n===o.Q.BottomLeft?(s.left=e.left-i,s.width=e.width+i):n===o.Q.Center&&(s.left=e.left-i);break;case r.y.Down:n===o.Q.TopLeft||n===o.Q.TopRight?(s.top=e.height<i?e.top+e.height:e.top+i,s.height=e.height-i):n===o.Q.BottomLeft||n===o.Q.BottomRight?s.height=e.height+i:n===o.Q.Center&&(s.top=e.top+i);break;case r.y.Up:n===o.Q.BottomLeft||n===o.Q.BottomRight?s.height=e.height-i:n===o.Q.TopLeft||n===o.Q.TopRight?(s.top=e.top-i,s.height=e.height+i):n===o.Q.Center&&(s.top=e.top-i)}return(0,a.n4)(s)}function D(e,t){switch(t){case r.y.Up:return[o.Q.BottomLeft,o.Q.BottomCenter,o.Q.BottomRight].indexOf(e)>=0;case r.y.Left:return[o.Q.TopRight,o.Q.SideRight,o.Q.BottomRight].indexOf(e)>=0;case r.y.Down:return[o.Q.TopLeft,o.Q.TopCenter,o.Q.TopRight].indexOf(e)>=0;case r.y.Right:return[o.Q.TopLeft,o.Q.SideLeft,o.Q.BottomLeft].indexOf(e)>=0}return!1}function I(){return document.getElementsByClassName("ms-Fabric--isFocusVisible").length>0}function x(e){return e.shiftKey&&m(e.key)}function C(e){return m(e.key)||x(e)}function O(e){return e.shiftKey&&h(e.key)}function w(e){return h(e.key)||O(e)}function E(e,t){return(0,s.getRTL)(t)&&("ArrowLeft"===e?e="ArrowRight":"ArrowRight"===e&&(e="ArrowLeft")),e}}
,8847:(e,t,n)=>{"use strict";function a(e){return"object"==typeof e&&"dynamicLayerId"in e}function i(e,t){return typeof e==typeof t&&(a(e)&&a(t)?e.dynamicLayerId===t.dynamicLayerId:e===t)}n.d(t,{n:()=>i})}
,699:(e,t,n)=>{"use strict";function a(e){return"string"==typeof e}n.d(t,{b:()=>a})}
,5648:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var a=n(2759),i=n(6899),r=n(7592);function o(e){switch(e){case a.p.Highlighter:return i.cw;case a.p.Pen:return i.Mu;default:throw new r.x(e)}}}
,3440:(e,t,n)=>{"use strict";n.d(t,{$F:()=>d,L8:()=>a,eK:()=>s,kn:()=>r,q$:()=>c,wy:()=>i});var a={initiatingButtonId:0,heldButtonsFlags:1},i={initiatingButtonId:1,heldButtonsFlags:4},r={initiatingButtonId:2,heldButtonsFlags:2};function o(e,t){return!!((e||0)&t.heldButtonsFlags)}function s(e,t){return o(e.buttons,t)}function c(e){return void 0===(t=e.button)||function(e,t){return e===t.initiatingButtonId}(t,a);var t}function d(e){return void 0===(t=e.buttons)||o(t,a);var t}}
,7240:(e,t,n)=>{"use strict";function a(e,t){e&&("function"==typeof e?e(t):e.current=t)}n.d(t,{n:()=>a})}
,2389:(e,t,n)=>{"use strict";n.d(t,{J:()=>i,Y:()=>r});var a=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,function(n,a){if(void 0===t[a])throw new Error("Argument at index ".concat(a," is undefined. String is ").concat(e,". Max index provided was ").concat(t.length-1,"."));return t[a]})}function r(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n.map(function(e){return t(e)});return i.apply(void 0,a([e],o,!1))}}
,1985:(e,t,n)=>{"use strict";n.d(t,{$4:()=>r,N7:()=>c,RC:()=>l,at:()=>u,gv:()=>d,kI:()=>o});var a=n(4139),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function r(e,t,n){return function(e,t){var n=i(i({},t),{numberingSystem:"latn"});return new Intl.NumberFormat(e,n)}(t,n).format(e+0)}function o(e){return r(1.1,e).substring(1,2)}function s(e){return"."===e}function c(e,t,n){var i=o(t),r=void 0===n?e.toString():(0,a.L)(e,n).toString();return s(i)?r:r.replace(".",i)}function d(e,t){var n=o(t);return s(n)?+e:+e.replace(n,".")}function l(e,t,n){return r(e,t,function(e){return{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}(n))}function u(e){return null!==l(.1,e,0).match(/\d$/)}}
,9381:(e,t,n)=>{"use strict";n.d(t,{aL:()=>c,aO:()=>o,fK:()=>s,wp:()=>r,xt:()=>i});var a=n(401),i=255,r=0,o=[{color:(0,a.i)("#005EB7",.5),stopPercent:.35},{color:(0,a.i)("#60CCFE",.5),stopPercent:.7},{color:(0,a.i)("#B47CF8",.5),stopPercent:.9}],s=o[0].color,c=8}
,6366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(1626),i=n(4891),r=n(4422),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=n(512),c=n(3080);function d(e,t,n){var a=(0,c.AI)(e,n),i=(0,c.wp)(a,{x:t,y:t}),r={x:2*t,y:0},o={x:0,y:2*t};return(0,s.XG)((0,s.iE)((0,s.W3)(n.x,n.y)),(0,s.C9)(r,o,i))}var l,u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},f=function(){return f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},p=((l={})[a.D.RectangleMask]=function(e){var t=e.imageId,n=e.algorithmParameters,s=e.maskParameters,c=e.selectedUvPositions,d=e.imageUvToView,l=e.undoRedoGroupId,u=e.isUndoRedoable,f=void 0===u||u;if(s.maskType!==a.D.RectangleMask)throw new Error("unsupported mask type");var p=(0,i.h)(c,d);if(p)return{algorithmParameters:n,maskParameters:o(o({},s),{rectUvToImageUv:p}),idValue:(0,r.b)(),undoRedoGroupId:l,isUndoRedoable:f,imageId:t}},l[a.D.FromLayer]=function(e){var t=e.imageId,n=e.algorithmParameters,i=e.maskParameters,o=e.undoRedoGroupId,s=e.isUndoRedoable,c=void 0===s||s;if(i.maskType!==a.D.FromLayer)throw new Error("unsupported MaskType");return{imageId:t,algorithmParameters:n,maskParameters:i,idValue:(0,r.b)(),undoRedoGroupId:o,isUndoRedoable:c}},l[a.D.PillShapedMask]=function(e){var t=e.imageId,n=e.algorithmParameters,i=e.maskParameters,o=e.selectedUvPositions,l=e.imageSizeInPixels,f=e.undoRedoGroupId,p=e.isUndoRedoable,m=void 0===p||p;if(i.maskType!==a.D.PillShapedMask)throw new Error("unexpected mask type");var _=function(e,t,n){if(e[0]&&e[1]){if(0===(0,c.Gl)(e[0],e[1]))return d(e[0],t,n);var a=(0,c.AI)(e[0],n),i=(0,c.AI)(e[1],n),r=(0,c.sF)((0,c.wp)(i,a)),o=(0,c.lU)(r,90),l=(0,c.f1)(r,t),u=(0,c.f1)(o,t),f=(0,c.f1)(l,-1),p=(0,c.f1)(u,-1),m=(0,c.Fw)([a,f,p]),_=(0,c.f1)(m,-1),h=(0,c.Fw)([i,l,p,_]),b=(0,c.Fw)([a,f,u,_]);return(0,s.XG)((0,s.iE)((0,s.W3)(n.x,n.y)),(0,s.C9)(h,b,m))}}(o,i.radius,l);if(_)return{algorithmParameters:n,maskParameters:u(u({},i),{rectUvToImageUv:_}),idValue:(0,r.b)(),undoRedoGroupId:f,isUndoRedoable:m,imageId:t}},l[a.D.CircleMask]=function(e){var t=e.imageId,n=e.algorithmParameters,i=e.maskParameters,o=e.selectedUvPositions,s=e.imageSizeInPixels,c=e.undoRedoGroupId,l=e.isUndoRedoable,u=void 0===l||l;if(i.maskType!==a.D.CircleMask)throw new Error("unexpected mask type");var p=d(o[0],i.radius,s);if(p)return{imageId:t,algorithmParameters:n,maskParameters:f(f({},i),{rectUvToImageUv:p}),idValue:(0,r.b)(),undoRedoGroupId:c,isUndoRedoable:u}},l[a.D.FullImageMask]=function(e){var t=e.imageId,n=e.algorithmParameters,i=e.undoRedoGroupId,o=e.isUndoRedoable,s=void 0===o||o;return{imageId:t,algorithmParameters:n,maskParameters:{maskType:a.D.FullImageMask},idValue:(0,r.b)(),undoRedoGroupId:i,isUndoRedoable:s}},l);function m(e){return p[e]}}
,1443:(e,t,n)=>{"use strict";function a(e){e&&performance.clearMarks(e)}function i(e){a(e),e&&performance.mark(e)}function r(e){var t=performance.getEntriesByName(e);if(1===t.length){var n=performance.now()-t[0].startTime;return performance.clearMarks(e),n}performance.clearMarks(e)}n.d(t,{G0:()=>a,Px:()=>s,o2:()=>r,rS:()=>i,wy:()=>d,xE:()=>c});var o="editorActivityPrepareMark";function s(){performance.clearMarks(o)}function c(){s(),performance.mark(o)}function d(){var e=performance.getEntriesByName(o);if(1===e.length){var t=performance.now()-e[0].startTime;return performance.clearMarks(o),t}}}
,4975:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var a=0;function i(){return a++}}
,7740:(e,t,n)=>{"use strict";function a(){return"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)})}n.d(t,{g:()=>a})}
,8696:(e,t,n)=>{"use strict";function a(e,t){var n=function(e,t){return(n=t)instanceof Object&&!(n instanceof Array)?Object.keys(n).sort().reduce(function(e,t){return e[t]=n[t],e},{}):n;var n};return JSON.stringify(e,n)!==JSON.stringify(t,n)}n.d(t,{G:()=>a})}
,9397:(e,t,n)=>{"use strict";n.d(t,{W1:()=>I,qP:()=>x,X0:()=>O});var a=n(1948),i=n(5445);function r(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,a,e):t(i)}}}}var o=r();o.withExtraArgument=r;const s=o;var c,d=(c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t){for(var n=0,a=t.length,i=e.length;n<a;n++,i++)e[i]=t[n];return e},u=Object.defineProperty,f=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,b=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){for(var n in t||(t={}))_.call(t,n)&&b(e,n,t[n]);if(m)for(var a=0,i=m(t);a<i.length;a++)n=i[a],h.call(t,n)&&b(e,n,t[n]);return e},v=function(e,t){return f(e,p(t))},y="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?i.Xz:i.Xz.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var S=function(e){function t(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return d(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,l([void 0],e[0].concat(this)))):new(t.bind.apply(t,l([void 0],e.concat(this))))},t}(Array);function D(e){return(0,a.e6)(e)?(0,a.Oy)(e,function(){}):e}function I(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,a=(e.immutableCheck,e.serializableCheck,new S);return n&&("boolean"==typeof n?a.push(s):a.push(s.withExtraArgument(n.extraArgument))),a}(e)},a=e||{},r=a.reducer,o=void 0===r?void 0:r,c=a.middleware,d=void 0===c?n():c,u=a.devTools,f=void 0===u||u,p=a.preloadedState,m=void 0===p?void 0:p,_=a.enhancers,h=void 0===_?void 0:_;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,i.PY)(o)}var b=d;"function"==typeof b&&(b=b(n));var v=i.Kw.apply(void 0,b),D=i.Xz;f&&(D=y(g({trace:!1},"object"==typeof f&&f)));var I=[v];Array.isArray(h)?I=l([v],h):"function"==typeof h&&(I=h(I));var x=D.apply(void 0,I);return(0,i.x$)(t,m,x)}function x(e,t){function n(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return g(g({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function C(e){var t,n={},a=[],i={addCase:function(e,t){var a="string"==typeof e?e:e.type;if(a in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[a]=t,i},addMatcher:function(e,t){return a.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,a,t]}function O(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,i="function"==typeof e.initialState?e.initialState:D(e.initialState),r=e.reducers||{},o=Object.keys(r),s={},c={},d={};function u(){var t="function"==typeof e.extraReducers?C(e.extraReducers):[e.extraReducers],n=t[0],r=void 0===n?{}:n,o=t[1],s=void 0===o?[]:o,d=t[2],u=void 0===d?void 0:d,f=g(g({},r),c);return function(e,t,n,i){void 0===n&&(n=[]);var r,o=C(t),s=o[0],c=o[1],d=o[2];if("function"==typeof e)r=function(){return D(e())};else{var u=D(e);r=function(){return u}}function f(e,t){void 0===e&&(e=r());var n=l([s[t.type]],c.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[d]),n.reduce(function(e,n){if(n){var i;if((0,a.Vx)(e))return void 0===(i=n(e,t))?e:i;if((0,a.e6)(e))return(0,a.Oy)(e,function(e){return n(e,t)});if(void 0===(i=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return e},e)}return f.getInitialState=r,f}(i,function(e){for(var t in f)e.addCase(t,f[t]);for(var n=0,a=s;n<a.length;n++){var i=a[n];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)})}return o.forEach(function(e){var n,a,i=r[e],o=t+"/"+e;"reducer"in i?(n=i.reducer,a=i.prepare):n=i,s[e]=n,c[o]=n,d[e]=a?x(o,a):x(o)}),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:d,caseReducers:s,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var w=["name","message","stack","code"],E=function(e,t){this.payload=e,this.meta=t},A=function(e,t){this.payload=e,this.meta=t},L=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,a=w;n<a.length;n++){var i=a[n];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function k(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,n){var a=x(e+"/fulfilled",function(e,t,n,a){return{payload:e,meta:v(g({},a||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),i=x(e+"/pending",function(e,t,n){return{payload:void 0,meta:v(g({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),r=x(e+"/rejected",function(e,t,a,i,r){return{payload:i,error:(n&&n.serializeError||L)(e||"Rejected"),meta:v(g({},r||{}),{arg:a,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign(function(e){return function(s,c,d){var l,u=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new o;function p(e){l=e,f.abort()}var m=function(){return o=this,null,m=function(){var o,m,_,h,b,g;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),null===(y=h=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:c,extra:d}))||"object"!=typeof y||"function"!=typeof y.then?[3,2]:[4,h];case 1:h=v.sent(),v.label=2;case 2:if(!1===h||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(e,t){return f.signal.addEventListener("abort",function(){return t({name:"AbortError",message:l||"Aborted"})})}),s(i(u,e,null==(m=null==n?void 0:n.getPendingMeta)?void 0:m.call(n,{requestId:u,arg:e},{getState:c,extra:d}))),[4,Promise.race([b,Promise.resolve(t(e,{dispatch:s,getState:c,extra:d,requestId:u,signal:f.signal,abort:p,rejectWithValue:function(e,t){return new E(e,t)},fulfillWithValue:function(e,t){return new A(e,t)}})).then(function(t){if(t instanceof E)throw t;return t instanceof A?a(t.payload,u,e,t.meta):a(t,u,e)})])];case 3:return _=v.sent(),[3,5];case 4:return g=v.sent(),_=g instanceof E?r(null,u,e,g.payload,g.meta):r(g,u,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&r.match(_)&&_.meta.condition||s(_),[2,_]}var y})},new Promise(function(e,t){var n=function(e){try{i(m.next(e))}catch(e){t(e)}},a=function(e){try{i(m.throw(e))}catch(e){t(e)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,a)};i((m=m.apply(o,null)).next())});var o,m}();return Object.assign(m,{abort:p,requestId:u,arg:e,unwrap:function(){return m.then(k)}})}},{pending:i,rejected:r,fulfilled:a,typePrefix:e})}e.withTypes=function(){return e}}(),Object.assign;var M="listenerMiddleware";x(M+"/add"),x(M+"/removeAll"),x(M+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis),"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,(0,a.bF)()}
,9450:(e,t,n)=>{"use strict";n.d(t,{kA:()=>na});var a={};n.r(a),n.d(a,{aboveNameplate:()=>Ln,activity:()=>Pn,background:()=>En,backgroundHide:()=>An,check:()=>Cn,content:()=>kn,description:()=>yn,disabled:()=>zn,foreground:()=>Dn,foregroundHide:()=>In,hasBackground:()=>Bn,hasBackgroundFrame:()=>bn,hasForegroundFrame:()=>xn,invokable:()=>gn,isFluentStyling:()=>_n,isLarge:()=>Rn,isSmall:()=>Nn,label:()=>vn,lifecycleSignal:()=>Hn,link:()=>Sn,name:()=>hn,nameplate:()=>Mn,onlyOnHover:()=>jn,selectable:()=>pn,selected:()=>mn,showBackground:()=>Vn,showCheck:()=>wn,signal:()=>Tn,socialSignal:()=>Fn,storageSignal:()=>Un,tile:()=>fn,uninvokable:()=>On});var i={};n.r(i),n.d(i,{dark:()=>Kn,selected:()=>Wn,signal:()=>Gn});var r={};n.r(r),n.d(r,{check:()=>Yn,checkHost:()=>Jn,circle:()=>Xn,root:()=>qn,rootIsChecked:()=>Qn});var o=n(280),s=n(5959);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&1===e.length&&e[0]&&!e[0].subComponentStyles)return e[0];for(var n={},a={},i=0,r=e;i<r.length;i++){var s=r[i];if(s)for(var d in s)if(s.hasOwnProperty(d)){if("subComponentStyles"===d&&void 0!==s.subComponentStyles){var l=s.subComponentStyles;for(var u in l)l.hasOwnProperty(u)&&(a.hasOwnProperty(u)?a[u].push(l[u]):a[u]=[l[u]]);continue}var f=n[d],p=s[d];n[d]=void 0===f?p:(0,o.__spreadArrays)(Array.isArray(f)?f:[f],Array.isArray(p)?p:[p])}}if(Object.keys(a).length>0){n.subComponentStyles={};var m=n.subComponentStyles,_=function(e){if(a.hasOwnProperty(e)){var t=a[e];m[e]=function(e){return c.apply(void 0,t.map(function(t){return"function"==typeof t?t(e):t}))}}};for(var u in a)_(u)}return n}var d=void 0;try{d=window}catch(e){}function l(e){if(void 0!==d){var t=e;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:d}}var u=0,f=function(){function e(){}return e.getValue=function(e,t){var n=p();return void 0===n[e]&&(n[e]="function"==typeof t?t():t),n[e]},e.setValue=function(e,t){var n=p(),a=n.__callbacks__,i=n[e];if(t!==i){n[e]=t;var r={oldValue:i,value:t,key:e};for(var o in a)a.hasOwnProperty(o)&&a[o](r)}return t},e.addChangeListener=function(e){var t=e.__id__,n=m();t||(t=e.__id__=String(u++)),n[t]=e},e.removeChangeListener=function(e){delete m()[e.__id__]},e}();function p(){var e,t=l()||{};return t.__globalSettings__||(t.__globalSettings__=((e={}).__callbacks__={},e)),t.__globalSettings__}function m(){return p().__callbacks__}var _={settings:{},scopedSettings:{},inCustomizerContext:!1},h=f.getValue("customizations",{settings:{},scopedSettings:{},inCustomizerContext:!1}),b=[],g=function(){function e(){}return e.reset=function(){h.settings={},h.scopedSettings={}},e.applySettings=function(t){h.settings=(0,o.__assign)((0,o.__assign)({},h.settings),t),e._raiseChange()},e.applyScopedSettings=function(t,n){h.scopedSettings[t]=(0,o.__assign)((0,o.__assign)({},h.scopedSettings[t]),n),e._raiseChange()},e.getSettings=function(e,t,n){void 0===n&&(n=_);for(var a={},i=t&&n.scopedSettings[t]||{},r=t&&h.scopedSettings[t]||{},o=0,s=e;o<s.length;o++){var c=s[o];a[c]=i[c]||n.settings[c]||r[c]||h.settings[c]}return a},e.applyBatchedUpdates=function(t,n){e._suppressUpdates=!0;try{t()}catch(e){}e._suppressUpdates=!1,n||e._raiseChange()},e.observe=function(e){b.push(e)},e.unobserve=function(e){b=b.filter(function(t){return t!==e})},e._raiseChange=function(){e._suppressUpdates||b.forEach(function(e){return e()})},e}(),v=s.createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}}),y=["theme","styles"];function S(e,t,n,a,i){var r=(a=a||{scope:"",fields:void 0}).scope,d=a.fields,l=void 0===d?y:d,u=s.forwardRef(function(a,i){var d,u,f,p,m,_,h=s.useRef(),b=(d=l,u=r,f=s.useState(0)[1],p=function(){return f(function(e){return++e})},m=s.useContext(v).customizations,_=m.inCustomizerContext,s.useEffect(function(){return _||g.observe(p),function(){_||g.unobserve(p)}},[_]),g.getSettings(d,u,m)),y=b.styles,S=(b.dir,(0,o.__rest)(b,["styles","dir"])),D=n?n(a):void 0,I=h.current&&h.current.__cachedInputs__||[];if(!h.current||y!==I[1]||a.styles!==I[2]){var x=function(e){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var a=[],i=0,r=t;i<r.length;i++){var o=r[i];o&&a.push("function"==typeof o?o(e):o)}return 1===a.length?a[0]:a.length?c.apply(void 0,a):{}}(e,t,y,a.styles)};x.__cachedInputs__=[t,y,a.styles],x.__noStyleOverride__=!y&&!a.styles,h.current=x}return s.createElement(e,(0,o.__assign)({ref:i},S,D,a,{styles:h.current}))});u.displayName="Styled"+(e.displayName||e.name);var f=i?s.memo(u):u;return u.displayName&&(f.displayName=u.displayName),f}var D,I="undefined"!=typeof navigator&&/rv:11.0/.test(navigator.userAgent),x={};try{x=window}catch(U){}var C,O=function(){function e(e){this._rules=[],this._preservedRules=[],this._rulesToInsert=[],this._counter=0,this._keyToClassName={},this._onResetCallbacks=[],this._classNameToArgs={},this._config=(0,o.__assign)({injectionMode:1,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._keyToClassName=this._config.classNameCache||{}}return e.getInstance=function(){var t;if(!(D=x.__stylesheet__)||D._lastStyleElement&&D._lastStyleElement.ownerDocument!==document){var n=(null===(t=x)||void 0===t?void 0:t.FabricConfig)||{};D=x.__stylesheet__=new e(n.mergeStyles)}return D},e.prototype.setConfig=function(e){this._config=(0,o.__assign)((0,o.__assign)({},this._config),e)},e.prototype.onReset=function(e){this._onResetCallbacks.push(e)},e.prototype.getClassName=function(e){var t=this._config.namespace;return(t?t+"-":"")+(e||this._config.defaultPrefix)+"-"+this._counter++},e.prototype.cacheClassName=function(e,t,n,a){this._keyToClassName[t]=e,this._classNameToArgs[e]={args:n,rules:a}},e.prototype.classNameFromKey=function(e){return this._keyToClassName[e]},e.prototype.getClassNameCache=function(){return this._keyToClassName},e.prototype.argsFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.args},e.prototype.insertedRulesFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.rules},e.prototype.insertRule=function(e,t){var n=0!==this._config.injectionMode?this._getStyleElement():void 0;if(t&&this._preservedRules.push(e),n)switch(this._config.injectionMode){case 1:var a=n.sheet;try{a.insertRule(e,a.cssRules.length)}catch(e){}break;case 2:n.appendChild(document.createTextNode(e))}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e)},e.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")+this._rulesToInsert.join("")},e.prototype.reset=function(){this._rules=[],this._rulesToInsert=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach(function(e){return e()})},e.prototype.resetKeys=function(){this._keyToClassName={}},e.prototype._getStyleElement=function(){var e=this;return this._styleElement||"undefined"==typeof document||(this._styleElement=this._createStyleElement(),I||window.requestAnimationFrame(function(){e._styleElement=void 0})),this._styleElement},e.prototype._createStyleElement=function(){var e=document.head,t=document.createElement("style");t.setAttribute("data-merge-styles","true");var n=this._config.cspSettings;if(n&&n.nonce&&t.setAttribute("nonce",n.nonce),this._lastStyleElement)e.insertBefore(t,this._lastStyleElement.nextElementSibling);else{var a=this._findPlaceholderStyleTag();a?e.insertBefore(t,a.nextElementSibling):e.insertBefore(t,e.childNodes[0])}return this._lastStyleElement=t,t},e.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},e}();function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[],a=[],i=O.getInstance();function r(e){for(var t=0,o=e;t<o.length;t++){var s=o[t];if(s)if("string"==typeof s)if(s.indexOf(" ")>=0)r(s.split(" "));else{var c=i.argsFromClassName(s);c?r(c):-1===n.indexOf(s)&&n.push(s)}else Array.isArray(s)?r(s):"object"==typeof s&&a.push(s)}}return r(e),{classes:n,objects:a}}function E(e){C!==e&&(C=e)}function A(){return void 0===C&&(C="undefined"!=typeof document&&!!document.documentElement&&"rtl"===document.documentElement.getAttribute("dir")),C}function L(){return{rtl:A()}}C=A();var k,M={},P={"user-select":1};function T(e,t){var n=function(){var e,t;if(!k){var n="undefined"!=typeof document?document:void 0,a="undefined"!=typeof navigator?navigator:void 0,i=null===(t=null===(e=a)||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.toLowerCase();k=n?{isWebkit:!(!n||!("WebkitAppearance"in n.documentElement.style)),isMoz:!!(i&&i.indexOf("firefox")>-1),isOpera:!!(i&&i.indexOf("opera")>-1),isMs:!(!a||!/rv:11.0/i.test(a.userAgent)&&!/Edge\/\d./i.test(navigator.userAgent))}:{isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return k}(),a=e[t];if(P[a]){var i=e[t+1];P[a]&&(n.isWebkit&&e.push("-webkit-"+a,i),n.isMoz&&e.push("-moz-"+a,i),n.isMs&&e.push("-ms-"+a,i),n.isOpera&&e.push("-o-"+a,i))}}var U,F=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function H(e,t){var n=e[t],a=e[t+1];if("number"==typeof a){var i=F.indexOf(n)>-1,r=n.indexOf("--")>-1,o=i||r?"":"px";e[t+1]=""+a+o}}var R="left",N="right",B=((U={}).left=N,U.right=R,U),j={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function V(e,t,n){if(e.rtl){var a=t[n];if(!a)return;var i=t[n+1];if("string"==typeof i&&i.indexOf("@noflip")>=0)t[n+1]=i.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(a.indexOf(R)>=0)t[n]=a.replace(R,N);else if(a.indexOf(N)>=0)t[n]=a.replace(N,R);else if(String(i).indexOf(R)>=0)t[n+1]=i.replace(R,N);else if(String(i).indexOf(N)>=0)t[n+1]=i.replace(N,R);else if(B[a])t[n]=B[a];else if(j[i])t[n+1]=j[i];else switch(a){case"margin":case"padding":t[n+1]=function(e){if("string"==typeof e){var t=e.split(" ");if(4===t.length)return t[0]+" "+t[3]+" "+t[2]+" "+t[1]}return e}(i);break;case"box-shadow":t[n+1]=function(e,t){var n=e.split(" "),a=parseInt(n[0],10);return n[0]=n[0].replace(String(a),String(-1*a)),n.join(" ")}(i)}}}function z(e){var t=e&&e["&"];return t?t.displayName:void 0}var G=/\:global\((.+?)\)/g;function K(e,t){return e.indexOf(":global(")>=0?e.replace(G,"$1"):0===e.indexOf(":")?t+e:e.indexOf("&")<0?t+" "+e:e}function W(e,t,n,a){void 0===t&&(t={__order:[]}),0===n.indexOf("@")?q([a],t,n=n+"{"+e):n.indexOf(",")>-1?function(e){if(!G.test(e))return e;for(var t=[],n=/\:global\((.+?)\)/g,a=null;a=n.exec(e);)a[1].indexOf(",")>-1&&t.push([a.index,a.index+a[0].length,a[1].split(",").map(function(e){return":global("+e.trim()+")"}).join(", ")]);return t.reverse().reduce(function(e,t){var n=t[0],a=t[1],i=t[2];return e.slice(0,n)+i+e.slice(a)},e)}(n).split(",").map(function(e){return e.trim()}).forEach(function(n){return q([a],t,K(n,e))}):q([a],t,K(n,e))}function q(e,t,n){void 0===t&&(t={__order:[]}),void 0===n&&(n="&");var a=O.getInstance(),i=t[n];i||(i={},t[n]=i,t.__order.push(n));for(var r=0,o=e;r<o.length;r++){var s=o[r];if("string"==typeof s){var c=a.argsFromClassName(s);c&&q(c,t,n)}else if(Array.isArray(s))q(s,t,n);else for(var d in s)if(s.hasOwnProperty(d)){var l=s[d];if("selectors"===d){var u=s.selectors;for(var f in u)u.hasOwnProperty(f)&&W(n,t,f,u[f])}else"object"==typeof l?null!==l&&W(n,t,d,l):void 0!==l&&("margin"===d||"padding"===d?Q(i,d,l):i[d]=l)}}return t}function Q(e,t,n){var a="string"==typeof n?n.split(" "):[n];e[t+"Top"]=a[0],e[t+"Right"]=a[1]||a[0],e[t+"Bottom"]=a[2]||a[0],e[t+"Left"]=a[3]||a[1]||a[0]}function Y(e,t){for(var n=[e.rtl?"rtl":"ltr"],a=!1,i=0,r=t.__order;i<r.length;i++){var o=r[i];n.push(o);var s=t[o];for(var c in s)s.hasOwnProperty(c)&&void 0!==s[c]&&(a=!0,n.push(c,s[c]))}return a?n.join(""):void 0}function J(e,t){return t<=0?"":1===t?e:e+J(e,t-1)}function X(e,t){if(!t)return"";var n,a,i,r=[];for(var o in t)t.hasOwnProperty(o)&&"displayName"!==o&&void 0!==t[o]&&r.push(o,t[o]);for(var s=0;s<r.length;s+=2)i=void 0,"-"!==(i=(n=r)[a=s]).charAt(0)&&(n[a]=M[i]=M[i]||i.replace(/([A-Z])/g,"-$1").toLowerCase()),H(r,s),V(e,r,s),T(r,s);for(s=1;s<r.length;s+=4)r.splice(s,1,":",r[s],";");return r.join("")}function Z(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=q(t),i=Y(e,a);if(i){var r=O.getInstance(),o={className:r.classNameFromKey(i),key:i,args:t};if(!o.className){o.className=r.getClassName(z(a));for(var s=[],c=0,d=a.__order;c<d.length;c++){var l=d[c];s.push(l,X(e,a[l]))}o.rulesToInsert=s}return o}}function $(e,t){void 0===t&&(t=1);var n=O.getInstance(),a=e.className,i=e.key,r=e.args,o=e.rulesToInsert;if(o){for(var s=0;s<o.length;s+=2){var c=o[s+1];if(c){var d=o[s],l=(d=d.replace(/&/g,J("."+e.className,t)))+"{"+c+"}"+(0===d.indexOf("@")?"}":"");n.insertRule(l)}}n.cacheClassName(a,i,r,o)}}function ee(e,t){var n,a,i={subComponentStyles:{}};if(!e[0]&&e.length<=1)return{subComponentStyles:{}};var r=c.apply(void 0,e),o=[];for(var s in r)if(r.hasOwnProperty(s)){if("subComponentStyles"===s){i.subComponentStyles=r.subComponentStyles||{};continue}var d=w(r[s]),l=d.classes,u=d.objects;(null===(n=u)||void 0===n?void 0:n.length)?(m=Z(t||{},{displayName:s},u))&&(o.push(m),i[s]=l.concat([m.className]).join(" ")):i[s]=l.join(" ")}for(var f=0,p=o;f<p.length;f++){var m;(m=p[f])&&$(m,null===(a=t)||void 0===a?void 0:a.specificityMultiplier)}return i}var te=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ee(e,L())}({root:{display:"inline-block"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),ne=!1,ae=0,ie={empty:!0},re={},oe="undefined"==typeof WeakMap?null:WeakMap;function se(){ae++}function ce(e,t,n){if(void 0===t&&(t=100),void 0===n&&(n=!1),!oe)return e;if(!ne){var a=O.getInstance();a&&a.onReset&&O.getInstance().onReset(se),ne=!0}var i,r=0,o=ae;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=i;(void 0===i||o!==ae||t>0&&r>t)&&(i=le(),r=0,o=ae),c=i;for(var d=0;d<a.length;d++){var l=de(a[d]);c.map.has(l)||c.map.set(l,le()),c=c.map.get(l)}return c.hasOwnProperty("value")||(c.value=e.apply(void 0,a),r++),!n||null!==c.value&&void 0!==c.value||(c.value=e.apply(void 0,a)),c.value}}function de(e){return e?"object"==typeof e||"function"==typeof e?e:(re[e]||(re[e]={val:e}),re[e]):ie}function le(){return{map:oe?new oe:null}}var ue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},a=0,i=e;a<i.length;a++)for(var r=i[a],o=Array.isArray(r)?r:Object.keys(r),s=0,c=o;s<c.length;s++){var d=c[s];n[d]=1}return n},fe=ue(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),pe=ue(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),me=ue(pe,fe),_e=(ue(me,["form"]),ue(me,["height","loop","muted","preload","src","width"])),he=(ue(_e,["poster"]),ue(me,["start"]),ue(me,["value"]),ue(me,["download","href","hrefLang","media","rel","target","type"]),ue(me,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"])),be=(ue(he,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),ue(he,["autoCapitalize","cols","dirname","form","maxLength","placeholder","readOnly","required","rows","wrap"]),ue(he,["form","multiple","required"]),ue(me,["selected","value"]),ue(me,["cellPadding","cellSpacing"]),ue(me,["rowSpan","scope"]),ue(me,["colSpan","headers","rowSpan","scope"]),ue(me,["span"]),ue(me,["span"]),ue(me,["acceptCharset","action","encType","encType","method","noValidate","target"]),ue(me,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),ue(me,["alt","crossOrigin","height","src","srcSet","useMap","width"])),ge=me;function ve(e,t,n){for(var a,i=Array.isArray(t),r={},o=0,s=Object.keys(e);o<s.length;o++){var c=s[o];!(!i&&t[c]||i&&t.indexOf(c)>=0||0===c.indexOf("data-")||0===c.indexOf("aria-"))||n&&-1!==(null===(a=n)||void 0===a?void 0:a.indexOf(c))||(r[c]=e[c])}return r}function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],a=0,i=e;a<i.length;a++){var r=i[a];if(r)if("string"==typeof r)n.push(r);else if(r.hasOwnProperty("toString")&&"function"==typeof r.toString)n.push(r.toString());else for(var o in r)r[o]&&n.push(o)}return n.join(" ")}function Se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return De(e,L())}function De(e,t){var n=w(e instanceof Array?e:[e]),a=n.classes,i=n.objects;return i.length&&a.push(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=Z.apply(void 0,(0,o.__spreadArrays)([e],t));return a?($(a,e.specificityMultiplier),a.className):""}(t||{},i)),a.join(" ")}var Ie=f.getValue("icons",{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),xe=O.getInstance();xe&&xe.onReset&&xe.onReset(function(){for(var e in Ie)Ie.hasOwnProperty(e)&&Ie[e].subset&&(Ie[e].subset.className=void 0)});var Ce,Oe,we=ce(function(e){var t=function(e){var t,n,a=void 0,i=Ie.__options;if(e=e?function(e){return e.toLowerCase()}(e):"",e=Ie.__remapped[e]||e)if(a=Ie[e]){var r=a.subset;r&&r.fontFace&&(r.isRegistered||(n=r.fontFace,O.getInstance().insertRule("@font-face{"+X(L(),n)+"}",!0),r.isRegistered=!0),r.className||(r.className=Se(r.style,{fontFamily:r.fontFace.fontFamily,fontWeight:r.fontFace.fontWeight||"normal",fontStyle:r.fontFace.fontStyle||"normal"})))}else!i.disableWarnings&&i.warnOnMissingIcons&&(t='The icon "'+e+'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.',console&&console.warn&&console.warn(t));return a}(e)||{subset:{},code:void 0},n=t.code,a=t.subset;return n?{children:n,iconClassName:a.className,fontFamily:a.fontFace&&a.fontFace.fontFamily,mergeImageProps:a.mergeImageProps}:null},void 0,!0),Ee=function(e){var t=e.iconName,n=e.className,a=e.style,i=void 0===a?{}:a,r=we(t)||{},c=r.iconClassName,d=r.children,l=r.fontFamily,u=r.mergeImageProps,f=ve(e,me),p=e["aria-label"]||e.title,m=e["aria-label"]||e["aria-labelledby"]||e.title?{role:u?void 0:"img"}:{"aria-hidden":!0},_=d;return u&&"object"==typeof d&&"object"==typeof d.props&&p&&(_=s.cloneElement(d,{alt:p})),s.createElement("i",(0,o.__assign)({"data-icon-name":t},m,f,u?{title:void 0,"aria-label":void 0}:{},{className:ye("ms-Icon",te.root,c,!t&&te.placeholder,n),style:(0,o.__assign)({fontFamily:l},i)}),_)};function Ae(e){if("undefined"!=typeof document){var t=e;return t&&t.ownerDocument?t.ownerDocument:document}}function Le(e){if(void 0===e&&(e={}),void 0!==e.rtl)return e.rtl;if(void 0===Oe){var t=function(e){var t=null;try{var n=l();t=n?n.sessionStorage.getItem("isRTL"):null}catch(e){}return t}();null!==t&&function(e,t){void 0===t&&(t=!1);var n=Ae();n&&n.documentElement.setAttribute("dir",e?"rtl":"ltr"),t&&function(e,t){var n;try{null===(n=l())||void 0===n||n.sessionStorage.setItem("isRTL",t)}catch(e){}}(0,e?"1":"0"),E(Oe=e)}(Oe="1"===t);var n=Ae();void 0===Oe&&n&&E(Oe="rtl"===(n.body&&n.body.getAttribute("dir")||n.documentElement.getAttribute("dir")))}return!!Oe}ce(function(e,t,n){return Ee({iconName:e,className:t,"aria-label":n})}),function(e){e[e.default=0]="default",e[e.image=1]="image",e[e.Default=1e5]="Default",e[e.Image=100001]="Image"}(Ce||(Ce={}));var ke=0,Me=O.getInstance();Me&&Me.onReset&&Me.onReset(function(){return ke++});var Pe,Te,Ue,Fe="__retval__";function He(e){void 0===e&&(e={});var t=new Map,n=0,a=0,i=ke;return function(r,o){var s,c;if(void 0===o&&(o={}),e.useStaticStyles&&"function"==typeof r&&r.__noStyleOverride__)return r(o);a++;var d=t,u=o.theme,f=u&&void 0!==u.rtl?u.rtl:Le(),p=e.disableCaching;return i!==ke&&(i=ke,t=new Map,n=0),e.disableCaching||(d=Ne(t,r),d=Ne(d,o)),!p&&d[Fe]||(d[Fe]=void 0===r?{}:ee(["function"==typeof r?r(o):r],{rtl:!!f,specificityMultiplier:e.useStaticStyles?5:void 0}),p||n++),n>(e.cacheSize||50)&&((null===(c=null===(s=l())||void 0===s?void 0:s.FabricConfig)||void 0===c?void 0:c.enableClassNameCacheFullWarning)&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is "+n+"/"+a+"."),console.trace()),t.clear(),n=0,e.disableCaching=!0),d[Fe]}}function Re(e,t){return t=function(e){switch(e){case void 0:return"__undefined__";case null:return"__null__";default:return e}}(t),e.has(t)||e.set(t,new Map),e.get(t)}function Ne(e,t){if("function"==typeof t)if(t.__cachedInputs__)for(var n=0,a=t.__cachedInputs__;n<a.length;n++)e=Re(e,a[n]);else e=Re(e,t);else if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(e=Re(e,t[i]));return e}!function(e){e[e.center=0]="center",e[e.contain=1]="contain",e[e.cover=2]="cover",e[e.none=3]="none",e[e.centerCover=4]="centerCover",e[e.centerContain=5]="centerContain"}(Pe||(Pe={})),function(e){e[e.landscape=0]="landscape",e[e.portrait=1]="portrait"}(Te||(Te={})),function(e){e[e.notLoaded=0]="notLoaded",e[e.loaded=1]="loaded",e[e.error=2]="error",e[e.errorLoaded=3]="errorLoaded"}(Ue||(Ue={}));var Be=He(),je=function(e){function t(t){var n=e.call(this,t)||this;return n._coverStyle=Te.portrait,n._imageElement=s.createRef(),n._frameElement=s.createRef(),n._onImageLoaded=function(e){var t=n.props,a=t.src,i=t.onLoad;i&&i(e),n._computeCoverStyle(n.props),a&&n.setState({loadState:Ue.loaded})},n._onImageError=function(e){n.props.onError&&n.props.onError(e),n.setState({loadState:Ue.error})},n.state={loadState:Ue.notLoaded},n}return(0,o.__extends)(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.src!==this.props.src?this.setState({loadState:Ue.notLoaded}):this.state.loadState===Ue.loaded&&this._computeCoverStyle(e)},t.prototype.componentDidUpdate=function(e,t){this._checkImageLoaded(),this.props.onLoadingStateChange&&t.loadState!==this.state.loadState&&this.props.onLoadingStateChange(this.state.loadState)},t.prototype.render=function(){var e=ve(this.props,be,["width","height"]),t=this.props,n=t.src,a=t.alt,i=t.width,r=t.height,c=t.shouldFadeIn,d=t.shouldStartVisible,l=t.className,u=t.imageFit,f=t.role,p=t.maximizeFrame,m=t.styles,_=t.theme,h=this.state.loadState,b=void 0!==this.props.coverStyle?this.props.coverStyle:this._coverStyle,g=Be(m,{theme:_,className:l,width:i,height:r,maximizeFrame:p,shouldFadeIn:c,shouldStartVisible:d,isLoaded:h===Ue.loaded||h===Ue.notLoaded&&this.props.shouldStartVisible,isLandscape:b===Te.landscape,isCenter:u===Pe.center,isCenterContain:u===Pe.centerContain,isCenterCover:u===Pe.centerCover,isContain:u===Pe.contain,isCover:u===Pe.cover,isNone:u===Pe.none,isError:h===Ue.error,isNotImageFit:void 0===u});return s.createElement("div",{className:g.root,style:{width:i,height:r},ref:this._frameElement},s.createElement("img",(0,o.__assign)({},e,{onLoad:this._onImageLoaded,onError:this._onImageError,key:"fabricImage"+this.props.src||"",className:g.image,ref:this._imageElement,src:n,alt:a,role:f})))},t.prototype._checkImageLoaded=function(){var e=this.props.src;this.state.loadState===Ue.notLoaded&&this._imageElement.current&&(e&&this._imageElement.current.naturalWidth>0&&this._imageElement.current.naturalHeight>0||this._imageElement.current.complete&&t._svgRegex.test(e))&&(this._computeCoverStyle(this.props),this.setState({loadState:Ue.loaded}))},t.prototype._computeCoverStyle=function(e){var t=e.imageFit,n=e.width,a=e.height;if((t===Pe.cover||t===Pe.contain||t===Pe.centerContain||t===Pe.centerCover)&&void 0===this.props.coverStyle&&this._imageElement.current&&this._frameElement.current){var i;i="number"==typeof n&&"number"==typeof a&&t!==Pe.centerContain&&t!==Pe.centerCover?n/a:this._frameElement.current.clientWidth/this._frameElement.current.clientHeight;var r=this._imageElement.current.naturalWidth/this._imageElement.current.naturalHeight;this._coverStyle=r>i?Te.landscape:Te.portrait}},t.defaultProps={shouldFadeIn:!0},t._svgRegex=/\.svg$/i,t}(s.Component),Ve=ce(function(e,t){var n=O.getInstance();return t?Object.keys(e).reduce(function(t,a){return t[a]=n.getClassName(e[a]),t},{}):e});function ze(e,t,n){return Ve(e,void 0!==n?n:t.disableGlobalClassNames)}function Ge(e){var t=O.getInstance(),n=t.getClassName(),a=[];for(var i in e)e.hasOwnProperty(i)&&a.push(i,"{",X(L(),e[i]),"}");var r=a.join("");return t.insertRule("@keyframes "+n+"{"+r+"}",!0),t.cacheClassName(n,r,[],["keyframes",r]),n}var Ke="cubic-bezier(.1,.9,.2,1)",We="cubic-bezier(.1,.25,.75,.9)",qe="0.167s",Qe="0.267s",Ye="0.367s",Je="0.467s",Xe=Ge({from:{opacity:0},to:{opacity:1}}),Ze=Ge({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),$e=Lt(-10),et=Lt(-20),tt=Lt(-40),nt=Lt(-400),at=Lt(10),it=Lt(20),rt=Lt(40),ot=Lt(400),st=kt(10),ct=kt(20),dt=kt(-10),lt=kt(-20),ut=Mt(10),ft=Mt(20),pt=Mt(40),mt=Mt(400),_t=Mt(-10),ht=Mt(-20),bt=Mt(-40),gt=Mt(-400),vt=Pt(-10),yt=Pt(-20),St=Pt(10),Dt=Pt(20),It=Ge({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),xt=Ge({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),Ct=Ge({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),Ot=Ge({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),wt=Ge({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),Et=Ge({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}});function At(e,t,n){return{animationName:e,animationDuration:t,animationTimingFunction:n,animationFillMode:"both"}}function Lt(e){return Ge({from:{transform:"translate3d("+e+"px,0,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function kt(e){return Ge({from:{transform:"translate3d(0,"+e+"px,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function Mt(e){return Ge({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d("+e+"px,0,0)"}})}function Pt(e){return Ge({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,"+e+"px,0)"}})}var Tt=function(e){var t={},n=function(n){var a;e.hasOwnProperty(n)&&Object.defineProperty(t,n,{get:function(){return void 0===a&&(a=Se(e[n]).toString()),a},enumerable:!0,configurable:!0})};for(var a in e)n(a);return t}({slideRightIn10:At(Xe+","+$e,Ye,Ke),slideRightIn20:At(Xe+","+et,Ye,Ke),slideRightIn40:At(Xe+","+tt,Ye,Ke),slideRightIn400:At(Xe+","+nt,Ye,Ke),slideLeftIn10:At(Xe+","+at,Ye,Ke),slideLeftIn20:At(Xe+","+it,Ye,Ke),slideLeftIn40:At(Xe+","+rt,Ye,Ke),slideLeftIn400:At(Xe+","+ot,Ye,Ke),slideUpIn10:At(Xe+","+st,Ye,Ke),slideUpIn20:At(Xe+","+ct,Ye,Ke),slideDownIn10:At(Xe+","+dt,Ye,Ke),slideDownIn20:At(Xe+","+lt,Ye,Ke),slideRightOut10:At(Ze+","+ut,Ye,Ke),slideRightOut20:At(Ze+","+ft,Ye,Ke),slideRightOut40:At(Ze+","+pt,Ye,Ke),slideRightOut400:At(Ze+","+mt,Ye,Ke),slideLeftOut10:At(Ze+","+_t,Ye,Ke),slideLeftOut20:At(Ze+","+ht,Ye,Ke),slideLeftOut40:At(Ze+","+bt,Ye,Ke),slideLeftOut400:At(Ze+","+gt,Ye,Ke),slideUpOut10:At(Ze+","+vt,Ye,Ke),slideUpOut20:At(Ze+","+yt,Ye,Ke),slideDownOut10:At(Ze+","+St,Ye,Ke),slideDownOut20:At(Ze+","+Dt,Ye,Ke),scaleUpIn100:At(Xe+","+It,Ye,Ke),scaleDownIn100:At(Xe+","+Ct,Ye,Ke),scaleUpOut103:At(Ze+","+Ot,qe,We),scaleDownOut98:At(Ze+","+xt,qe,We),fadeIn100:At(Xe,qe,We),fadeIn200:At(Xe,Qe,We),fadeIn400:At(Xe,Ye,We),fadeIn500:At(Xe,Je,We),fadeOut100:At(Ze,qe,We),fadeOut200:At(Ze,Qe,We),fadeOut400:At(Ze,Ye,We),fadeOut500:At(Ze,Je,We),rotate90deg:At(wt,"0.1s",We),rotateN90deg:At(Et,"0.1s",We)}),Ut={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},Ft=S(je,function(e){var t=e.className,n=e.width,a=e.height,i=e.maximizeFrame,r=e.isLoaded,o=e.shouldFadeIn,s=e.shouldStartVisible,c=e.isLandscape,d=e.isCenter,u=e.isContain,f=e.isCover,p=e.isCenterContain,m=e.isCenterCover,_=e.isNone,h=e.isError,b=e.isNotImageFit,g=e.theme,v=ze(Ut,g),y={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},S=l(),D=void 0!==S&&void 0===S.navigator.msMaxTouchPoints,I=u&&c||f&&!c?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[v.root,g.fonts.medium,{overflow:"hidden"},i&&[v.rootMaximizeFrame,{height:"100%",width:"100%"}],r&&o&&!s&&Tt.fadeIn400,(d||u||f||p||m)&&{position:"relative"},t],image:[v.image,{display:"block",opacity:0},r&&["is-loaded",{opacity:1}],d&&[v.imageCenter,y],u&&[v.imageContain,D&&{width:"100%",height:"100%",objectFit:"contain"},!D&&I,y],f&&[v.imageCover,D&&{width:"100%",height:"100%",objectFit:"cover"},!D&&I,y],p&&[v.imageCenterContain,c&&{maxWidth:"100%"},!c&&{maxHeight:"100%"},y],m&&[v.imageCenterCover,c&&{maxHeight:"100%"},!c&&{maxWidth:"100%"},y],_&&[v.imageNone,{width:"auto",height:"auto"}],b&&[!!n&&!a&&{height:"auto",width:"100%"},!n&&!!a&&{height:"100%",width:"auto"},!!n&&!!a&&{height:"100%",width:"100%"}],c&&v.imageLandscape,!c&&v.imagePortrait,!r&&"is-notLoaded",o&&"is-fadeIn",h&&"is-error"]}},void 0,{scope:"Image"},!0),Ht=He({cacheSize:100}),Rt=function(e){function t(t){var n=e.call(this,t)||this;return n._onImageLoadingStateChange=function(e){n.props.imageProps&&n.props.imageProps.onLoadingStateChange&&n.props.imageProps.onLoadingStateChange(e),e===Ue.error&&n.setState({imageLoadError:!0})},n.state={imageLoadError:!1},n}return(0,o.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,a=e.styles,i=e.iconName,r=e.imageErrorAs,c=e.theme,d="string"==typeof i&&0===i.length,l=!!this.props.imageProps||this.props.iconType===Ce.image||this.props.iconType===Ce.Image,u=we(i)||{},f=u.iconClassName,p=u.children,m=u.mergeImageProps,_=Ht(a,{theme:c,className:n,iconClassName:f,isImage:l,isPlaceholder:d}),h=l?"span":"i",b=ve(this.props,me,["aria-label"]),g=this.state.imageLoadError,v=(0,o.__assign)((0,o.__assign)({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),y=g&&r||Ft,S=this.props["aria-label"]||this.props.ariaLabel,D=v.alt||S||this.props.title,I=D||this.props["aria-labelledby"]||v["aria-label"]||v["aria-labelledby"]?{role:l||m?void 0:"img","aria-label":l||m?void 0:D}:{"aria-hidden":!this.props["aria-labelledby"]&&!v["aria-labelledby"]},x=p;return m&&p&&"object"==typeof p&&D&&(x=s.cloneElement(p,{alt:D})),s.createElement(h,(0,o.__assign)({"data-icon-name":i},I,b,m?{title:void 0,"aria-label":void 0}:{},{className:_.root}),l?s.createElement(y,(0,o.__assign)({},v)):t||x)},t}(s.Component),Nt=S(Rt,function(e){var t=e.className,n=e.iconClassName,a=e.isPlaceholder,i=e.isImage,r=e.styles;return{root:[a&&te.placeholder,te.root,i&&te.image,n,t,r&&r.root,r&&r.imageContainer]}},void 0,{scope:"Icon"},!0);Nt.displayName="Icon";var Bt=He(),jt=function(e){var t=e.checked,n=void 0!==t&&t,a=e.className,i=e.theme,r=e.styles,o=e.useFastIcons,c=void 0===o||o,d=Bt(r,{theme:i,className:a,checked:n}),l=c?Ee:Nt;return s.createElement("div",{className:d.root},s.createElement(l,{iconName:"CircleRing",className:d.circle}),s.createElement(l,{iconName:"StatusCircleCheckmark",className:d.check}))};jt.displayName="CheckBase";var Vt,zt,Gt,Kt,Wt,qt="@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)";!function(e){e.Arabic="Segoe UI Web (Arabic)",e.Cyrillic="Segoe UI Web (Cyrillic)",e.EastEuropean="Segoe UI Web (East European)",e.Greek="Segoe UI Web (Greek)",e.Hebrew="Segoe UI Web (Hebrew)",e.Thai="Leelawadee UI Web",e.Vietnamese="Segoe UI Web (Vietnamese)",e.WestEuropean="Segoe UI Web (West European)",e.Selawik="Selawik Web",e.Armenian="Segoe UI Web (Armenian)",e.Georgian="Segoe UI Web (Georgian)"}(Vt||(Vt={})),function(e){e.Arabic="'"+Vt.Arabic+"'",e.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",e.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",e.Cyrillic="'"+Vt.Cyrillic+"'",e.EastEuropean="'"+Vt.EastEuropean+"'",e.Greek="'"+Vt.Greek+"'",e.Hebrew="'"+Vt.Hebrew+"'",e.Hindi="'Nirmala UI'",e.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",e.Korean="'Malgun Gothic', Gulim",e.Selawik="'"+Vt.Selawik+"'",e.Thai="'Leelawadee UI Web', 'Kmer UI'",e.Vietnamese="'"+Vt.Vietnamese+"'",e.WestEuropean="'"+Vt.WestEuropean+"'",e.Armenian="'"+Vt.Armenian+"'",e.Georgian="'"+Vt.Georgian+"'"}(zt||(zt={})),function(e){e.size10="10px",e.size12="12px",e.size14="14px",e.size16="16px",e.size18="18px",e.size20="20px",e.size24="24px",e.size28="28px",e.size32="32px",e.size42="42px",e.size68="68px",e.mini="10px",e.xSmall="10px",e.small="12px",e.smallPlus="12px",e.medium="14px",e.mediumPlus="16px",e.icon="16px",e.large="18px",e.xLarge="20px",e.xLargePlus="24px",e.xxLarge="28px",e.xxLargePlus="32px",e.superLarge="42px",e.mega="68px"}(Gt||(Gt={})),function(e){e.light=100,e.semilight=300,e.regular=400,e.semibold=600,e.bold=700}(Kt||(Kt={})),function(e){e.xSmall="10px",e.small="12px",e.medium="16px",e.large="20px"}(Wt||(Wt={}));var Qt,Yt,Jt={root:"ms-Check",circle:"ms-Check-circle",check:"ms-Check-check",checkHost:"ms-Check-checkHost"},Xt=S(jt,function(e){var t,n,a,i,r,s=e.height,c=void 0===s?e.checkBoxHeight||"18px":s,d=e.checked,l=e.className,u=e.theme,f=u.palette,p=u.semanticColors,m=u.fonts,_=Le(u),h=ze(Jt,u),b={fontSize:c,position:"absolute",left:0,top:0,width:c,height:c,textAlign:"center",verticalAlign:"middle"};return{root:[h.root,m.medium,{lineHeight:"1",width:c,height:c,verticalAlign:"top",position:"relative",userSelect:"none",selectors:(t={":before":{content:'""',position:"absolute",top:"1px",right:"1px",bottom:"1px",left:"1px",borderRadius:"50%",opacity:1,background:p.bodyBackground}},t["."+h.checkHost+":hover &, ."+h.checkHost+":focus &, &:hover, &:focus"]={opacity:1},t)},d&&["is-checked",{selectors:{":before":{background:f.themePrimary,opacity:1,selectors:(n={},n[qt]={background:"Window"},n)}}}],l],circle:[h.circle,b,{color:f.neutralSecondary,selectors:(a={},a[qt]={color:"WindowText"},a)},d&&{color:f.white}],check:[h.check,b,{opacity:0,color:f.neutralSecondary,fontSize:Wt.medium,left:_?"-0.5px":".5px",selectors:(i={":hover":{opacity:1}},i[qt]=(0,o.__assign)({},{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}),i)},d&&{opacity:1,color:f.white,fontWeight:900,selectors:(r={},r[qt]={border:"none",color:"WindowText"},r)}],checkHost:h.checkHost}},void 0,{scope:"Check"},!0),Zt="change";function $t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.length<2?t[0]:function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];t.forEach(function(t){return t&&t.apply(e,n)})}}function en(){an(this.props.componentRef,this)}function tn(e){e.componentRef!==this.props.componentRef&&(an(e.componentRef,null),an(this.props.componentRef,this))}function nn(){an(this.props.componentRef,null)}function an(e,t){e&&("object"==typeof e?e.current=t:"function"==typeof e&&e(t))}!function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(Qt||(Qt={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(Yt||(Yt={}));var rn=l()||{};void 0===rn.__currentId__&&(rn.__currentId__=0);var on=!1;function sn(e){if(!on){var t=O.getInstance();t&&t.onReset&&t.onReset(cn),on=!0}return(void 0===e?"id__":e)+rn.__currentId__++}function cn(e){void 0===e&&(e=0),rn.__currentId__=e}function dn(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];t=t||{};for(var i=0,r=n;i<r.length;i++){var o=r[i];if(o)for(var s in o)!o.hasOwnProperty(s)||e&&!e(s)||(t[s]=o[s])}return t}var ln=function(){function e(t){this._id=e._uniqueId++,this._parent=t,this._eventRecords=[]}return e.raise=function(t,n,a,i){var r;if(e._isElement(t)){if("undefined"!=typeof document&&document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent(n,i||!1,!0),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];dn.apply(this,[null,e].concat(t))}(o,a),r=t.dispatchEvent(o)}else if("undefined"!=typeof document&&document.createEventObject){var s=document.createEventObject(a);t.fireEvent("on"+n,s)}}else for(;t&&!1!==r;){var c=t.__events__,d=c?c[n]:null;if(d)for(var l in d)if(d.hasOwnProperty(l))for(var u=d[l],f=0;!1!==r&&f<u.length;f++){var p=u[f];p.objectCallback&&(r=p.objectCallback.call(p.parent,a))}t=i?t.parent:null}return r},e.isObserved=function(e,t){var n=e&&e.__events__;return!!n&&!!n[t]},e.isDeclared=function(e,t){var n=e&&e.__declaredEvents;return!!n&&!!n[t]},e.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},e._isElement=function(e){return!!e&&(!!e.addEventListener||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement)},e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},e.prototype.onAll=function(e,t,n){for(var a in t)t.hasOwnProperty(a)&&this.on(e,a,t[a],n)},e.prototype.on=function(t,n,a,i){var r=this;if(n.indexOf(",")>-1)for(var o=n.split(/[ ,]+/),s=0;s<o.length;s++)this.on(t,o[s],a,i);else{var c=this._parent,d={target:t,eventName:n,parent:c,callback:a,options:i};if((o=t.__events__=t.__events__||{})[n]=o[n]||{count:0},o[n][this._id]=o[n][this._id]||[],o[n][this._id].push(d),o[n].count++,e._isElement(t)){var l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!r._isDisposed){var n;try{if(!1===(n=a.apply(c,e))&&e[0]){var i=e[0];i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.cancelBubble=!0}}catch(i){}return n}};d.elementCallback=l,t.addEventListener?t.addEventListener(n,l,i):t.attachEvent&&t.attachEvent("on"+n,l)}else d.objectCallback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!r._isDisposed)return a.apply(c,e)};this._eventRecords.push(d)}},e.prototype.off=function(e,t,n,a){for(var i=0;i<this._eventRecords.length;i++){var r=this._eventRecords[i];if(!(e&&e!==r.target||t&&t!==r.eventName||n&&n!==r.callback||"boolean"==typeof a&&a!==r.options)){var o=r.target.__events__,s=o[r.eventName],c=s?s[this._id]:null;c&&(1!==c.length&&n?(s.count--,c.splice(c.indexOf(r),1)):(s.count-=c.length,delete o[r.eventName][this._id]),s.count||delete o[r.eventName]),r.elementCallback&&(r.target.removeEventListener?r.target.removeEventListener(r.eventName,r.elementCallback,r.options):r.target.detachEvent&&r.target.detachEvent("on"+r.eventName,r.elementCallback)),this._eventRecords.splice(i--,1)}}},e.prototype.raise=function(t,n,a){return e.raise(this._parent,t,n,a)},e.prototype.declare=function(e){var t=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if("string"==typeof e)t[e]=!0;else for(var n=0;n<e.length;n++)t[e[n]]=!0},e._uniqueId=0,e}(),un=n(8424);(0,un.loadStyles)([{rawString:".tile_39583318{display:block;position:absolute;top:0;bottom:0;left:0;right:0;z-index:0;background-color:"},{theme:"white",defaultValue:"#ffffff"},{rawString:";-webkit-transition:-webkit-transform .1s linear;transition:-webkit-transform .1s linear;transition:transform .1s linear;transition:transform .1s linear,-webkit-transform .1s linear;color:"},{theme:"neutralPrimary",defaultValue:"#323130"},{rawString:";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tile_39583318::-moz-focus-inner{border:0}.tile_39583318{outline:transparent}.tile_39583318.selectable_39583318:hover{background-color:"},{theme:"neutralLighter",defaultValue:"#f3f2f1"},{rawString:"}.tile_39583318.selectable_39583318:hover.selected_39583318{background-color:"},{theme:"neutralQuaternaryAlt",defaultValue:"#e1dfdd"},{rawString:"}.tile_39583318.selected_39583318{background-color:"},{theme:"neutralLight",defaultValue:"#edebe9"},{rawString:"}.tile_39583318.selected_39583318.isFluentStyling_39583318 .name_39583318{font-weight:600}.ms-Fabric--isFocusVisible .tile_39583318:focus{background-color:"},{theme:"neutralLighter",defaultValue:"#f3f2f1"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318:focus.isFluentStyling_39583318{background-color:transparent}.ms-Fabric--isFocusVisible .tile_39583318:focus.selected_39583318{background-color:"},{theme:"neutralQuaternaryAlt",defaultValue:"#e1dfdd"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318:focus{outline:1px solid "},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318:focus.selected_39583318{outline:1px solid "},{theme:"themePrimary",defaultValue:"#0078d4"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318:focus.selected_39583318.isFluentStyling_39583318{outline:1px solid "},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:"}.tile_39583318.hasBackgroundFrame_39583318{-webkit-box-shadow:0 1px 3px 1px rgba(1,1,0,.05);box-shadow:0 1px 3px 1px rgba(1,1,0,.05)}.tile_39583318.hasBackgroundFrame_39583318.selectable_39583318:hover{outline:1px solid "},{theme:"neutralTertiaryAlt",defaultValue:"#c8c6c4"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318.hasBackgroundFrame_39583318:focus{outline:1px solid "},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:"}.ms-Fabric--isFocusVisible .tile_39583318.hasBackgroundFrame_39583318:focus.selected_39583318{outline:1px solid "},{theme:"themePrimary",defaultValue:"#0078d4"},{rawString:"}.tile_39583318.hasBackgroundFrame_39583318:after{content:'';display:block;position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none;border:2px solid "},{theme:"white",defaultValue:"#ffffff"},{rawString:"}.tile_39583318.invokable_39583318:active{-webkit-transform:scale(.95);transform:scale(.95)}.label_39583318{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.description_39583318{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.link_39583318{border:none;background:0 0;position:absolute;padding:0;top:0;left:0;bottom:0;right:0;width:100%;text-decoration:none;color:inherit;overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-ms-flex-line-pack:stretch;align-content:stretch;pointer-events:none}.link_39583318::-moz-focus-inner{border:0}.link_39583318{outline:transparent}.foreground_39583318{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;position:relative;overflow:visible;max-width:100%;max-height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;opacity:1;-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.tile_39583318.invokable_39583318 .foreground_39583318{pointer-events:auto;cursor:pointer}.foreground_39583318.foregroundHide_39583318{opacity:0}.hasForegroundFrame_39583318 .foreground_39583318{background-color:"},{theme:"white",defaultValue:"#ffffff"},{rawString:";-webkit-box-shadow:0 1px 3px 1px rgba(1,1,0,.05);box-shadow:0 1px 3px 1px rgba(1,1,0,.05);min-width:32px;min-height:32px}.hasForegroundFrame_39583318 .foreground_39583318:after{content:'';display:block;position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none;border:2px solid "},{theme:"white",defaultValue:"#ffffff"},{rawString:"}.check_39583318{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;top:0;border:none;background:0 0;background-color:transparent;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;padding:6px}.check_39583318::-moz-focus-inner{border:0}.check_39583318{outline:transparent}.check_39583318{position:absolute}.ms-Fabric--isFocusVisible .check_39583318:focus:after{content:'';position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;border:1px solid "},{theme:"focusBorder",defaultValue:"#605e5c"},{rawString:"}html[dir=ltr] .check_39583318{right:0}html[dir=rtl] .check_39583318{left:0}.tile_39583318.uninvokable_39583318 .check_39583318{width:100%;height:100%}.tile_39583318.selectable_39583318 .check_39583318{display:-webkit-box;display:-ms-flexbox;display:flex}.tile_39583318.selected_39583318 .check_39583318,.tile_39583318.showCheck_39583318 .check_39583318,.tile_39583318:hover .check_39583318{opacity:1}.ms-Fabric--isFocusVisible .check_39583318:focus{opacity:1}.ms-Fabric--isFocusVisible .tile_39583318:focus .check_39583318{opacity:1}.background_39583318{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;opacity:1;-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.tile_39583318.invokable_39583318 .background_39583318{cursor:pointer;pointer-events:auto}.background_39583318.backgroundHide_39583318{opacity:0}.aboveNameplate_39583318{-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;margin:16px 16px 0 16px}.content_39583318{position:absolute;top:0;left:0;bottom:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.hasForegroundFrame_39583318 .content_39583318{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.nameplate_39583318{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative;margin:auto 0 0 0;padding:12px 8px;text-align:center;z-index:0}.nameplate_39583318 .name_39583318{-webkit-transition:color .2s linear;transition:color .2s linear}.tile_39583318.invokable_39583318 .nameplate_39583318 .name_39583318{pointer-events:auto;cursor:pointer}.link_39583318:hover .nameplate_39583318 .name_39583318{text-decoration:underline}.isFluentStyling_39583318 .link_39583318:hover .nameplate_39583318 .name_39583318{text-decoration:none}.nameplate_39583318 .activity_39583318{-webkit-transition:color .2s linear;transition:color .2s linear}.tile_39583318.hasBackgroundFrame_39583318 .nameplate_39583318{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:12px 10px}.signal_39583318{display:inline-block}html[dir=ltr] .signal_39583318.storageSignal_39583318{margin-left:4px}html[dir=rtl] .signal_39583318.storageSignal_39583318{margin-right:4px}html[dir=ltr] .signal_39583318.socialSignal_39583318{margin-right:4px}html[dir=rtl] .signal_39583318.socialSignal_39583318{margin-left:4px}html[dir=ltr] .signal_39583318.lifecycleSignal_39583318{margin-right:4px}html[dir=rtl] .signal_39583318.lifecycleSignal_39583318{margin-left:4px}.name_39583318{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-weight:400;color:"},{theme:"neutralPrimary",defaultValue:"#323130"},{rawString:";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}html[dir=ltr] .name_39583318{margin-left:-8px}html[dir=rtl] .name_39583318{margin-right:-8px}html[dir=ltr] .name_39583318{padding-left:8px}html[dir=rtl] .name_39583318{padding-right:8px}.isLarge_39583318 .name_39583318,.name_39583318{font-size:14px;height:30px;margin-top:-7px;margin-bottom:-8px}.isSmall_39583318 .name_39583318{font-size:12px;height:24px;margin-top:-5px;margin-bottom:-7px}.activity_39583318{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-weight:400;font-size:12px;color:"},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;height:24px;margin-bottom:-4px}html[dir=ltr] .activity_39583318{margin-left:-8px}html[dir=rtl] .activity_39583318{margin-right:-8px}html[dir=ltr] .activity_39583318{padding-left:8px}html[dir=rtl] .activity_39583318{padding-right:8px}.hasBackgroundFrame_39583318 .name_39583318{display:block}html[dir=ltr] .hasBackgroundFrame_39583318 .name_39583318{-webkit-box-pack:left;-ms-flex-pack:left;justify-content:left}html[dir=rtl] .hasBackgroundFrame_39583318 .name_39583318{-webkit-box-pack:right;-ms-flex-pack:right;justify-content:right}.hasBackgroundFrame_39583318 .name_39583318,.isLarge_39583318 .isSmall_39583318 .hasBackgroundFrame_39583318 .name_39583318{font-size:14px;height:auto;padding-top:6px;margin-top:0;margin-bottom:0;line-height:22px}.hasBackgroundFrame_39583318 .activity_39583318{font-size:12px;display:block;height:auto;margin-top:0;margin-bottom:0;line-height:20px}html[dir=ltr] .hasBackgroundFrame_39583318 .activity_39583318{-webkit-box-pack:left;-ms-flex-pack:left;justify-content:left;text-align:left}html[dir=rtl] .hasBackgroundFrame_39583318 .activity_39583318{-webkit-box-pack:left;-ms-flex-pack:left;justify-content:left;text-align:left}.hasBackground_39583318 .nameplate_39583318:before{position:absolute;content:'';display:block;top:-4px;bottom:0;left:0;right:0;background-image:-webkit-gradient(linear,left bottom,left top,from(rgba(0,0,0,.65)),color-stop(55%,rgba(0,0,0,.5525)),color-stop(80%,rgba(0,0,0,.195)),to(rgba(0,0,0,0)));background-image:linear-gradient(to top,rgba(0,0,0,.65) 0,rgba(0,0,0,.5525) 55%,rgba(0,0,0,.195) 80%,rgba(0,0,0,0) 100%);z-index:-1;-webkit-transition:opacity .2s linear;transition:opacity .2s linear;opacity:0}.hasBackground_39583318 .onlyOnHover_39583318 .name_39583318{opacity:0;-webkit-transition:opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;transition:opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;transition:transform .25s ease-out,opacity .2s linear,color .2s linear;transition:transform .25s ease-out,opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;-webkit-transform:translateY(1rem);transform:translateY(1rem)}.hasBackground_39583318 .onlyOnHover_39583318 .activity_39583318{opacity:0;-webkit-transition:opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;transition:opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;transition:transform .25s ease-out,opacity .2s linear,color .2s linear;transition:transform .25s ease-out,opacity .2s linear,color .2s linear,-webkit-transform .25s ease-out;-webkit-transform:translateY(1rem);transform:translateY(1rem)}.hasBackground_39583318.selected_39583318 .name_39583318.onlyOnHover_39583318,.hasBackground_39583318:hover .name_39583318.onlyOnHover_39583318{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}.hasBackground_39583318.selected_39583318 .activity_39583318.onlyOnHover_39583318,.hasBackground_39583318:hover .activity_39583318.onlyOnHover_39583318{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}.hasBackground_39583318.showBackground_39583318.selected_39583318 .onlyOnHover_39583318.nameplate_39583318:before,.hasBackground_39583318.showBackground_39583318:hover .onlyOnHover_39583318.nameplate_39583318:before{opacity:1}.hasBackground_39583318.showBackground_39583318 .nameplate_39583318:not(.onlyOnHover_39583318):before{opacity:1}.hasBackground_39583318.showBackground_39583318 .name_39583318{color:#fff;text-shadow:.5px .5px 2px rgba(0,0,0,.55)}.hasBackground_39583318.showBackground_39583318 .activity_39583318{color:#fff;text-shadow:.5px .5px 2px rgba(0,0,0,.55)}.disabled_39583318{opacity:.5}"}]);var fn="tile_39583318",pn="selectable_39583318",mn="selected_39583318",_n="isFluentStyling_39583318",hn="name_39583318",bn="hasBackgroundFrame_39583318",gn="invokable_39583318",vn="label_39583318",yn="description_39583318",Sn="link_39583318",Dn="foreground_39583318",In="foregroundHide_39583318",xn="hasForegroundFrame_39583318",Cn="check_39583318",On="uninvokable_39583318",wn="showCheck_39583318",En="background_39583318",An="backgroundHide_39583318",Ln="aboveNameplate_39583318",kn="content_39583318",Mn="nameplate_39583318",Pn="activity_39583318",Tn="signal_39583318",Un="storageSignal_39583318",Fn="socialSignal_39583318",Hn="lifecycleSignal_39583318",Rn="isLarge_39583318",Nn="isSmall_39583318",Bn="hasBackground_39583318",jn="onlyOnHover_39583318",Vn="showBackground_39583318",zn="disabled_39583318";(0,un.loadStyles)([{rawString:".signal_fc6811ff{display:inline-block;margin:0 4px;position:relative;-webkit-transition:color .2s linear;transition:color .2s linear}.dark_fc6811ff .signal_fc6811ff,.signal_fc6811ff .dark_fc6811ff.selected_fc6811ff{color:#fff}html[dir=ltr] .signal_fc6811ff:first-child{margin-left:0}html[dir=rtl] .signal_fc6811ff:first-child{margin-right:0}html[dir=ltr] .signal_fc6811ff:last-child{margin-right:0}html[dir=rtl] .signal_fc6811ff:last-child{margin-left:0}i.signal_fc6811ff{top:.2em}"}]);var Gn="signal_fc6811ff",Kn="dark_fc6811ff",Wn="selected_fc6811ff";(0,un.loadStyles)([{rawString:".root_851d9364{line-height:1;width:18px;height:18px;vertical-align:top;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.root_851d9364:before{content:'';position:absolute;left:1px;right:1px;bottom:1px;top:1px;border-radius:50%;opacity:1;background:"},{theme:"bodyBackground",defaultValue:"#ffffff"},{rawString:"}.root_851d9364.rootIsChecked_851d9364:before{background:"},{theme:"themePrimary",defaultValue:"#0078d4"},{rawString:";opacity:1}@media screen and (-ms-high-contrast:active),screen and (forced-colors:active){.root_851d9364.rootIsChecked_851d9364:before{background:Window}}.root_851d9364 .check_851d9364{opacity:0}.checkHost_851d9364:focus .root_851d9364 .check_851d9364,.checkHost_851d9364:hover .root_851d9364 .check_851d9364,.root_851d9364.rootIsChecked_851d9364 .check_851d9364,.root_851d9364:focus .check_851d9364,.root_851d9364:hover .check_851d9364{opacity:1}.check_851d9364,.circle_851d9364{font-size:18px;position:absolute;left:0;top:0;width:18px;height:18px;text-align:center;vertical-align:middle}.circle_851d9364{color:"},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:"}@media screen and (-ms-high-contrast:active),screen and (forced-colors:active){.circle_851d9364{color:WindowText}}.rootIsChecked_851d9364 .circle_851d9364{color:"},{theme:"white",defaultValue:"#ffffff"},{rawString:"}.check_851d9364{color:"},{theme:"neutralSecondary",defaultValue:"#605e5c"},{rawString:";font-size:16px;left:.5px}@media screen and (-ms-high-contrast:active),screen and (forced-colors:active){.check_851d9364{-ms-high-contrast-adjust:none}}.rootIsChecked_851d9364 .check_851d9364{color:"},{theme:"white",defaultValue:"#ffffff"},{rawString:";font-weight:900}@media screen and (-ms-high-contrast:active),screen and (forced-colors:active){.rootIsChecked_851d9364 .check_851d9364{border:none;color:WindowText}}"}]);var qn="root_851d9364",Qn="rootIsChecked_851d9364",Yn="check_851d9364",Jn="checkHost_851d9364",Xn="circle_851d9364",Zn=a,$n=i,ea=r,ta={small:{nameplatePadding:12,nameplateNameHeight:12,nameplateMargin:0,nameplateActivityHeight:20,foregroundMargin:16},large:{nameplatePadding:12,nameplateNameHeight:15,nameplateMargin:0,nameplateActivityHeight:20,foregroundMargin:16}},na=function(e){function t(t,n){var a=e.call(this,t,n)||this;a._onSelectionChange=function(){var e=a.props,t=e.selection,n=e.selectionIndex,i=void 0===n?-1:n,r=i>-1&&!!t&&t.isIndexSelected(i),o=!!t&&!!t.isModal&&t.isModal();a.setState({isSelected:r,isModal:o})},function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=$t(e,e[n],t[n]))}(a,{componentDidMount:en,componentDidUpdate:tn,componentWillUnmount:nn}),a._nameId=sn("Tile-name"),a._activityId=sn("Tile-activity"),a._labelId=sn("Tile-label"),a._descriptionId=sn("Tile-description");var i=t.selectionIndex,r=void 0===i?-1:i,o=t.selection,s=!!o&&r>-1&&o.isIndexSelected(r),c=!!o&&!!o.isModal&&o.isModal();return a.state={isSelected:s,isModal:c},a._events=new ln(a),a}return(0,o.__extends)(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.selection,a=t.selectionIndex,i=e.selection,r=e.selectionIndex,o=void 0===r?-1:r;if(n!==i||a!==o){var s=!!i&&o>-1&&i.isIndexSelected(o),c=!!i&&i.isModal&&i.isModal();this.setState({isSelected:s,isModal:c})}},t.prototype.componentDidMount=function(){var e=this.props.selection;e&&this._events.on(e,Zt,this._onSelectionChange)},t.prototype.componentDidUpdate=function(e){var t=this.props.selection,n=e.selection;t!==n&&(n&&this._events.off(n),t&&this._events.on(t,Zt,this._onSelectionChange))},t.prototype.componentWillUnmount=function(){this._events.dispose()},t.prototype.render=function(){var e,t=this.props,n=(t.children,t.selectionIndex),a=void 0===n?-1:n,i=t.invokeSelection,r=void 0!==i&&i,c=t.selection,d=t.background,l=t.foreground,u=t.showBackgroundFrame,f=void 0!==u&&u,p=t.showForegroundFrame,m=void 0!==p&&p,_=t.hideBackground,h=void 0!==_&&_,b=t.hideForeground,g=void 0!==b&&b,v=t.itemName,y=t.itemActivity,S=(t.componentRef,t.className),D=t.tileSize,I=void 0===D?"large":D,x=(t.contentSize,t.ariaLabel),C=t.descriptionAriaLabel,O=t.href,w=t.onClick,E=t.download,A=t.hrefLang,L=t.media,k=t.rel,M=t.target,P=t.isFluentStyling,T=t.ariaLabelSelected,U=t.nameplateOnlyOnHover,F=t.disabled,H=void 0!==F&&F,R=(0,o.__rest)(t,["children","selectionIndex","invokeSelection","selection","background","foreground","showBackgroundFrame","showForegroundFrame","hideBackground","hideForeground","itemName","itemActivity","componentRef","className","tileSize","contentSize","ariaLabel","descriptionAriaLabel","href","onClick","download","hrefLang","media","rel","target","isFluentStyling","ariaLabelSelected","nameplateOnlyOnHover","disabled"]),N=this.state,B=N.isSelected,j=void 0!==B&&B,V=N.isModal,z=void 0!==V&&V,G=this.props.isSelectable,K=void 0===G?!H&&!!c&&a>-1:G,W=!(!O&&!w&&!r||z),q=j&&T?x+", "+T:x,Q=s.createElement(s.Fragment,null,x?s.createElement("span",{key:"label",id:this._labelId,className:ye("ms-Tile-label",vn)},q):null,d?this._onRenderBackground({background:d,hideBackground:h}):null,l?this._onRenderForeground({foreground:l,hideForeground:g}):null,v||y?this._onRenderNameplate({name:v,activity:y,onlyOnHover:!!U}):null),Y=O?"a":w?"button":"span",J=s.createElement(Y,{href:O,onClick:w,download:E,hrefLang:A,media:L,target:M,rel:void 0===k?O&&M?"noopener":void 0:k,ref:this.props.linkRef,"data-selection-invoke":!!(W&&a>-1)||void 0,className:ye("ms-Tile-link",Zn.link)},Q);return s.createElement("div",(0,o.__assign)({"aria-selected":j},ve(R,ge),{"aria-labelledby":x?this._labelId:this._nameId,"aria-describedby":q||C?this._descriptionId:this._activityId,"aria-disabled":H||void 0,className:ye("ms-Tile",S,Zn.tile,(e={},e["ms-Tile--isSmall "+Zn.isSmall]="small"===I,e["ms-Tile--isLarge "+Zn.isLarge]="large"===I,e["ms-Tile--hasBackgroundFrame "+Zn.hasBackgroundFrame]=f,e["ms-Tile--hasForegroundFrame "+Zn.hasForegroundFrame]=m,e["ms-Tile--isSelected "+Zn.selected+" "+$n.selected]=j,e["ms-Tile--isSelectable "+Zn.selectable]=K,e["ms-Tile--hasBackground "+Zn.hasBackground]=!!d,e[$n.dark]=!!d&&!h,e["ms-Tile--showBackground "+Zn.showBackground]=!h,e["ms-Tile--invokable "+Zn.invokable]=W,e["ms-Tile--uninvokable "+Zn.uninvokable]=!W,e["ms-Tile--isDisabled "+Zn.disabled]=H,e["ms-Tile--showCheck "+Zn.showCheck]=z,e["ms-Tile--isFluentStyling "+Zn.isFluentStyling]=P,e)),"data-selection-disabled":H||void 0,"data-is-focusable":!0,"data-is-sub-focuszone":!0,"data-disable-click-on-enter":!0,"data-selection-index":a>-1?a:void 0,"data-selection-touch-invoke":!!(W&&a>-1)||void 0}),J,C?s.createElement("span",{key:"description",role:"presentation",hidden:!0,id:this._descriptionId},C):null,K?this._onRenderCheck({isSelected:j}):null)},t.prototype._onRenderBackground=function(e){var t,n=e.background,a=e.hideBackground,i="function"==typeof n?n(aa(this.props)):n;return i?s.createElement("span",{key:"background",className:ye("ms-Tile-background",Zn.background,(t={},t["ms-Tile-background--hide "+Zn.backgroundHide]=a,t))},i):null},t.prototype._onRenderForeground=function(e){var t,n=e.foreground,a=e.hideForeground,i="function"==typeof n?n(aa(this.props)):n;return i?s.createElement("span",{key:"foreground",role:"presentation",className:ye("ms-Tile-aboveNameplate",Zn.aboveNameplate)},s.createElement("span",{role:"presentation",className:ye("ms-Tile-content",Zn.content)},s.createElement("span",{role:"presentation",className:ye("ms-Tile-foreground",Zn.foreground,(t={},t["ms-Tile-foreground--hide "+Zn.foregroundHide]=a,t))},i))):null},t.prototype._onRenderNameplate=function(e){var t,n,a,i=e.name,r=e.activity,o=e.onlyOnHover;return s.createElement("span",{key:"nameplate",className:ye("ms-Tile-nameplate",Zn.nameplate,(t={},t[Zn.onlyOnHover]=o,t))},i?s.createElement("span",{id:this._nameId,className:ye("ms-Tile-name",Zn.name,(n={},n[Zn.onlyOnHover]=o,n))},i):null,r?s.createElement("span",{id:this._activityId,className:ye("ms-Tile-activity",Zn.activity,(a={},a[Zn.onlyOnHover]=o,a))},r):null)},t.prototype._onRenderCheck=function(e){var t,n=e.isSelected,a=this.props.toggleSelectionAriaLabel;return s.createElement("span",{key:"check",role:"checkbox","aria-label":a,className:ye("ms-Tile-check",Zn.check,ea.checkHost,(t={},t[ea.hostShowCheck]=this.state.isModal,t)),"data-selection-toggle":!0,"aria-checked":n},s.createElement(Xt,{checked:n}))},t}(s.Component);function aa(e){var t=e.contentSize,n=e.tileSize,a=void 0===n?"large":n;if(!t)return{};var i=t.width,r=ta[a],o=r.nameplatePadding,s=r.nameplateMargin,c=r.nameplateActivityHeight,d=r.nameplateNameHeight,l=r.foregroundMargin,u=0;return(e.itemName||e.itemActivity)&&(u+=2*o,e.itemName&&(u+=d),e.itemActivity&&(u+=c+s)),{foregroundSize:{width:i-2*l,height:t.height-l-u},backgroundSize:t}}}
,4779:(e,t,n)=>{var a;!function(i,r,o,s){"use strict";var c,d=["","webkit","Moz","MS","ms","o"],l=r.createElement("div"),u=Math.round,f=Math.abs,p=Date.now;function m(e,t,n){return setTimeout(S(e,n),t)}function _(e,t,n){return!!Array.isArray(e)&&(h(e,n[t],n),!0)}function h(e,t,n){var a;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(a=0;a<e.length;)t.call(n,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)}function b(e,t,n){var a="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=i.console&&(i.console.warn||i.console.log);return r&&r.call(i.console,a,n),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(a!==s&&null!==a)for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}return t}:Object.assign;var g=b(function(e,t,n){for(var a=Object.keys(t),i=0;i<a.length;)(!n||n&&e[a[i]]===s)&&(e[a[i]]=t[a[i]]),i++;return e},"extend","Use `assign`."),v=b(function(e,t){return g(e,t,!0)},"merge","Use `assign`.");function y(e,t,n){var a,i=t.prototype;(a=e.prototype=Object.create(i)).constructor=e,a._super=i,n&&c(a,n)}function S(e,t){return function(){return e.apply(t,arguments)}}function D(e,t){return"function"==typeof e?e.apply(t&&t[0]||s,t):e}function I(e,t){return e===s?t:e}function x(e,t,n){h(E(t),function(t){e.addEventListener(t,n,!1)})}function C(e,t,n){h(E(t),function(t){e.removeEventListener(t,n,!1)})}function O(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function w(e,t){return e.indexOf(t)>-1}function E(e){return e.trim().split(/\s+/g)}function A(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var a=0;a<e.length;){if(n&&e[a][n]==t||!n&&e[a]===t)return a;a++}return-1}function L(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){for(var a=[],i=[],r=0;r<e.length;){var o=t?e[r][t]:e[r];A(i,o)<0&&a.push(e[r]),i[r]=o,r++}return n&&(a=t?a.sort(function(e,n){return e[t]>n[t]}):a.sort()),a}function M(e,t){for(var n,a,i=t[0].toUpperCase()+t.slice(1),r=0;r<d.length;){if((a=(n=d[r])?n+i:t)in e)return a;r++}return s}var P=1;function T(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var U="ontouchstart"in i,F=M(i,"PointerEvent")!==s,H=U&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),R="touch",N="mouse",B=["x","y"],j=["clientX","clientY"];function V(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){D(e.options.enable,[e])&&n.handler(t)},this.init()}function z(e,t,n){var a=n.pointers.length,i=n.changedPointers.length,r=1&t&&a-i==0,o=12&t&&a-i==0;n.isFirst=!!r,n.isFinal=!!o,r&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,a=t.pointers,i=a.length;n.firstInput||(n.firstInput=G(t)),i>1&&!n.firstMultiple?n.firstMultiple=G(t):1===i&&(n.firstMultiple=!1);var r=n.firstInput,o=n.firstMultiple,c=o?o.center:r.center,d=t.center=K(a);t.timeStamp=p(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=Y(c,d),t.distance=Q(c,d),function(e,t){var n=t.center,a=e.offsetDelta||{},i=e.prevDelta||{},r=e.prevInput||{};1!==t.eventType&&4!==r.eventType||(i=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},a=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-a.x),t.deltaY=i.y+(n.y-a.y)}(n,t),t.offsetDirection=q(t.deltaX,t.deltaY);var l,u,m=W(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=m.x,t.overallVelocityY=m.y,t.overallVelocity=f(m.x)>f(m.y)?m.x:m.y,t.scale=o?(l=o.pointers,Q((u=a)[0],u[1],j)/Q(l[0],l[1],j)):1,t.rotation=o?function(e,t){return Y(t[1],t[0],j)+Y(e[1],e[0],j)}(o.pointers,a):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,a,i,r,o=e.lastInterval||t,c=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(c>25||o.velocity===s)){var d=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,u=W(c,d,l);a=u.x,i=u.y,n=f(u.x)>f(u.y)?u.x:u.y,r=q(d,l),e.lastInterval=t}else n=o.velocity,a=o.velocityX,i=o.velocityY,r=o.direction;t.velocity=n,t.velocityX=a,t.velocityY=i,t.direction=r}(n,t);var _=e.element;O(t.srcEvent.target,_)&&(_=t.srcEvent.target),t.target=_}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function G(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:K(t),deltaX:e.deltaX,deltaY:e.deltaY}}function K(e){var t=e.length;if(1===t)return{x:u(e[0].clientX),y:u(e[0].clientY)};for(var n=0,a=0,i=0;i<t;)n+=e[i].clientX,a+=e[i].clientY,i++;return{x:u(n/t),y:u(a/t)}}function W(e,t,n){return{x:t/e||0,y:n/e||0}}function q(e,t){return e===t?1:f(e)>=f(t)?e<0?2:4:t<0?8:16}function Q(e,t,n){n||(n=B);var a=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(a*a+i*i)}function Y(e,t,n){n||(n=B);var a=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,a)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(T(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Z="mousemove mouseup";function $(){this.evEl=X,this.evWin=Z,this.pressed=!1,V.apply(this,arguments)}y($,V,{handler:function(e){var t=J[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:N,srcEvent:e}))}});var ee={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},te={2:R,3:"pen",4:N,5:"kinect"},ne="pointerdown",ae="pointermove pointerup pointercancel";function ie(){this.evEl=ne,this.evWin=ae,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(ne="MSPointerDown",ae="MSPointerMove MSPointerUp MSPointerCancel"),y(ie,V,{handler:function(e){var t=this.store,n=!1,a=e.type.toLowerCase().replace("ms",""),i=ee[a],r=te[e.pointerType]||e.pointerType,o=r==R,s=A(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(s,1))}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8},oe="touchstart",se="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=oe,this.evWin=se,this.started=!1,V.apply(this,arguments)}function de(e,t){var n=L(e.touches),a=L(e.changedTouches);return 12&t&&(n=k(n.concat(a),"identifier",!0)),[n,a]}y(ce,V,{handler:function(e){var t=re[e.type];if(1===t&&(this.started=!0),this.started){var n=de.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:R,srcEvent:e})}}});var le={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ue="touchstart touchmove touchend touchcancel";function fe(){this.evTarget=ue,this.targetIds={},V.apply(this,arguments)}function pe(e,t){var n=L(e.touches),a=this.targetIds;if(3&t&&1===n.length)return a[n[0].identifier]=!0,[n,n];var i,r,o=L(e.changedTouches),s=[],c=this.target;if(r=n.filter(function(e){return O(e.target,c)}),1===t)for(i=0;i<r.length;)a[r[i].identifier]=!0,i++;for(i=0;i<o.length;)a[o[i].identifier]&&s.push(o[i]),12&t&&delete a[o[i].identifier],i++;return s.length?[k(r.concat(s),"identifier",!0),s]:void 0}function me(){V.apply(this,arguments);var e=S(this.handler,this);this.touch=new fe(this.manager,e),this.mouse=new $(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function _e(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var a=this.lastTouches;setTimeout(function(){var e=a.indexOf(n);e>-1&&a.splice(e,1)},2500)}}function be(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var i=this.lastTouches[a],r=Math.abs(t-i.x),o=Math.abs(n-i.y);if(r<=25&&o<=25)return!0}return!1}y(fe,V,{handler:function(e){var t=le[e.type],n=pe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:R,srcEvent:e})}}),y(me,V,{handler:function(e,t,n){var a=n.pointerType==R,i=n.pointerType==N;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(a)_e.call(this,t,n);else if(i&&be.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ge=M(l.style,"touchAction"),ve=ge!==s,ye="compute",Se="auto",De="manipulation",Ie="none",xe="pan-x",Ce="pan-y",Oe=function(){if(!ve)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||i.CSS.supports("touch-action",n)}),e}();function we(e,t){this.manager=e,this.set(t)}we.prototype={set:function(e){e==ye&&(e=this.compute()),ve&&this.manager.element.style&&Oe[e]&&(this.manager.element.style[ge]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){D(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(w(e,Ie))return Ie;var t=w(e,xe),n=w(e,Ce);return t&&n?Ie:t||n?t?xe:Ce:w(e,De)?De:Se}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var a=this.actions,i=w(a,Ie)&&!Oe.none,r=w(a,Ce)&&!Oe["pan-y"],o=w(a,xe)&&!Oe["pan-x"];if(i){var s=1===e.pointers.length,c=e.distance<2,d=e.deltaTime<250;if(s&&c&&d)return}if(!o||!r)return i||r&&6&n||o&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ee=32;function Ae(e){this.options=c({},this.defaults,e||{}),this.id=P++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Le(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ke(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Me(e,t){var n=t.manager;return n?n.get(e):e}function Pe(){Ae.apply(this,arguments)}function Te(){Pe.apply(this,arguments),this.pX=null,this.pY=null}function Ue(){Pe.apply(this,arguments)}function Fe(){Ae.apply(this,arguments),this._timer=null,this._input=null}function He(){Pe.apply(this,arguments)}function Re(){Pe.apply(this,arguments)}function Ne(){Ae.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Be(e,t){return(t=t||{}).recognizers=I(t.recognizers,Be.defaults.preset),new je(e,t)}function je(e,t){this.options=c({},Be.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(F?ie:H?fe:U?me:$))(this,z),this.touchAction=new we(this,this.options.touchAction),Ve(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ve(e,t){var n,a=e.element;a.style&&(h(e.options.cssProps,function(i,r){n=M(a.style,r),t?(e.oldCssProps[n]=a.style[n],a.style[n]=i):a.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}Ae.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(_(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Me(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return _(e,"dropRecognizeWith",this)||(e=Me(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(_(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=Me(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(_(e,"dropRequireFailure",this))return this;e=Me(e,this);var t=A(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function a(n){t.manager.emit(n,e)}n<8&&a(t.options.event+Le(n)),a(t.options.event),e.additionalEvent&&a(e.additionalEvent),n>=8&&a(t.options.event+Le(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ee},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!D(this.options.enable,[this,t]))return this.reset(),void(this.state=Ee);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},y(Pe,Ae,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,a=6&t,i=this.attrTest(e);return a&&(8&n||!i)?16|t:a||i?4&n?8|t:2&t?4|t:2:Ee}}),y(Te,Pe,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Ce),24&e&&t.push(xe),t},directionTest:function(e){var t=this.options,n=!0,a=e.distance,i=e.direction,r=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===r?1:r<0?2:4,n=r!=this.pX,a=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,a=Math.abs(e.deltaY))),e.direction=i,n&&a>t.threshold&&i&t.direction},attrTest:function(e){return Pe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ke(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),y(Ue,Pe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),y(Fe,Ae,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!a||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=m(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),y(He,Pe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),y(Re,Pe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ke(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),y(Ne,Ae,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[De]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(a&&i&&n){if(4!=e.eventType)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||Q(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&r?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return Ee},failTimeout:function(){return this._timer=m(function(){this.state=Ee},this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Be.VERSION="2.0.7",Be.defaults={domEvents:!1,touchAction:ye,enable:!0,inputTarget:null,inputClass:null,preset:[[He,{enable:!1}],[Ue,{enable:!1},["rotate"]],[Re,{direction:6}],[Te,{direction:6},["swipe"]],[Ne],[Ne,{event:"doubletap",taps:2},["tap"]],[Fe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},je.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var a=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var r=0;r<a.length;)n=a[r],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),r++}},get:function(e){if(e instanceof Ae)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(_(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(_(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=A(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return h(E(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return h(E(e),function(e){t?n[e]&&n[e].splice(A(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=r.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<n.length;)n[a](t),a++}},destroy:function(){this.element&&Ve(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Be,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ee,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:je,Input:V,TouchAction:we,TouchInput:fe,MouseInput:$,PointerEventInput:ie,TouchMouseInput:me,SingleTouchInput:ce,Recognizer:Ae,AttrRecognizer:Pe,Tap:Ne,Pan:Te,Swipe:Re,Pinch:Ue,Rotate:He,Press:Fe,on:x,off:C,each:h,merge:v,extend:g,assign:c,inherit:y,bindFn:S,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Be,(a=function(){return Be}.call(t,n,t,e))===s||(e.exports=a)}(window,document)}
,8405:(e,t,n)=>{"use strict";var a=n(7982),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return a.isMemo(e)?o:s[e.$$typeof]||i}s[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[a.Memo]=o;var d=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(m){var i=p(n);i&&i!==m&&e(t,i,a)}var o=l(n);u&&(o=o.concat(u(n)));for(var s=c(t),_=c(n),h=0;h<o.length;++h){var b=o[h];if(!(r[b]||a&&a[b]||_&&_[b]||s&&s[b])){var g=f(n,b);try{d(t,b,g)}catch(e){}}}}return t}}
,4967:(e,t,n)=>{var a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,l=c||d||Function("return this")(),u=Object.prototype.toString,f=Math.max,p=Math.min,m=function(){return l.Date.now()};function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=r.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var a,i,r,o,s,c,d=0,l=!1,u=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=a,r=i;return a=i=void 0,d=t,o=e.apply(r,n)}function v(e){return d=e,s=setTimeout(S,t),l?g(e):o}function y(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-d>=r}function S(){var e=m();if(y(e))return D(e);s=setTimeout(S,function(e){var n=t-(e-c);return u?p(n,r-(e-d)):n}(e))}function D(e){return s=void 0,b&&a?g(e):(a=i=void 0,o)}function I(){var e=m(),n=y(e);if(a=arguments,i=this,c=e,n){if(void 0===s)return v(c);if(u)return s=setTimeout(S,t),g(c)}return void 0===s&&(s=setTimeout(S,t)),o}return t=h(t)||0,_(n)&&(l=!!n.leading,r=(u="maxWait"in n)?f(h(n.maxWait)||0,t):r,b="trailing"in n?!!n.trailing:b),I.cancel=function(){void 0!==s&&clearTimeout(s),d=0,a=c=i=s=void 0},I.flush=function(){return void 0===s?o:D(m())},I}}
,1340:(e,t,n)=>{"use strict";var a=n(5755);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,o){if(o!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}}
,5322:(e,t,n)=>{e.exports=n(1340)()}
,5755:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}
,6674:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,_=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116,b=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case l:case u:case r:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case f:case h:case _:case c:return e;default:return t}}case i:return t}}}function D(e){return S(e)===u}t.AsyncMode=l,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=c,t.Element=a,t.ForwardRef=f,t.Fragment=r,t.Lazy=h,t.Memo=_,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return D(e)||S(e)===l},t.isConcurrentMode=D,t.isContextConsumer=function(e){return S(e)===d},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return S(e)===f},t.isFragment=function(e){return S(e)===r},t.isLazy=function(e){return S(e)===h},t.isMemo=function(e){return S(e)===_},t.isPortal=function(e){return S(e)===i},t.isProfiler=function(e){return S(e)===s},t.isStrictMode=function(e){return S(e)===o},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===s||e===o||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===_||e.$$typeof===c||e.$$typeof===d||e.$$typeof===f||e.$$typeof===g||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b)},t.typeOf=S}
,7982:(e,t,n)=>{"use strict";e.exports=n(6674)}
,4341:(e,t)=>{"use strict";var n=60103,a=60106,i=60107,r=60108,o=60114,s=60109,c=60110,d=60112,l=60113,u=60120,f=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var m=Symbol.for;n=m("react.element"),a=m("react.portal"),i=m("react.fragment"),r=m("react.strict_mode"),o=m("react.profiler"),s=m("react.provider"),c=m("react.context"),d=m("react.forward_ref"),l=m("react.suspense"),u=m("react.suspense_list"),f=m("react.memo"),p=m("react.lazy"),m("react.block"),m("react.server.block"),m("react.fundamental"),m("react.debug_trace_mode"),m("react.legacy_hidden")}t.DN=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case r:case l:case u:return e;default:switch(e=e&&e.$$typeof){case c:case d:case p:case f:case s:return e;default:return t}}case a:return t}}}(e)===c}}
,8273:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>u,vy:()=>r,Ng:()=>G});var a=n(5959),i=n.n(a),r=(n(5322),i().createContext(null)),o=function(e){e()},s=function(){return o},c={notify:function(){},get:function(){return[]}};function d(e,t){var n,a=c;function i(){o.onStateChange&&o.onStateChange()}function r(){n||(n=t?t.addNestedSub(i):e.subscribe(i),a=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var a=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){a&&null!==t&&(a=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return r(),a.subscribe(e)},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:r,tryUnsubscribe:function(){n&&(n(),n=void 0,a.clear(),a=c)},getListeners:function(){return a}};return o}var l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?a.useLayoutEffect:a.useEffect;const u=function(e){var t=e.store,n=e.context,o=e.children,s=(0,a.useMemo)(function(){var e=d(t);return{store:t,subscription:e}},[t]),c=(0,a.useMemo)(function(){return t.getState()},[t]);l(function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,c]);var u=n||r;return i().createElement(u.Provider,{value:s},o)};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}var m=n(8405),_=n.n(m),h=n(4341),b=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],g=["reactReduxForwardedRef"],v=[],y=[null,null];function S(e,t){var n=e[1];return[t.payload,n+1]}function D(e,t,n){l(function(){return e.apply(void 0,t)},n)}function I(e,t,n,a,i,r,o){e.current=a,t.current=i,n.current=!1,r.current&&(r.current=null,o())}function x(e,t,n,a,i,r,o,s,c,d){if(e){var l=!1,u=null,f=function(){if(!l){var e,n,f=t.getState();try{e=a(f,i.current)}catch(e){n=e,u=e}n||(u=null),e===r.current?o.current||c():(r.current=e,s.current=e,o.current=!0,d({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=f,n.trySubscribe(),f(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,u)throw u}}}var C=function(){return[null,0]};function O(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,s=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,c=n.methodName,l=void 0===c?"connectAdvanced":c,u=n.renderCountProp,m=void 0===u?void 0:u,O=n.shouldHandleStateChanges,w=void 0===O||O,E=n.storeKey,A=void 0===E?"store":E,L=(n.withRef,n.forwardRef),k=void 0!==L&&L,M=n.context,P=void 0===M?r:M,T=p(n,b),U=P;return function(t){var n=t.displayName||t.name||"Component",r=s(n),o=f({},T,{getDisplayName:s,methodName:l,renderCountProp:m,shouldHandleStateChanges:w,storeKey:A,displayName:r,wrappedComponentName:n,WrappedComponent:t}),c=T.pure,u=c?a.useMemo:function(e){return e()};function b(n){var r=(0,a.useMemo)(function(){var e=n.reactReduxForwardedRef,t=p(n,g);return[n.context,e,t]},[n]),s=r[0],c=r[1],l=r[2],m=(0,a.useMemo)(function(){return s&&s.Consumer&&(0,h.DN)(i().createElement(s.Consumer,null))?s:U},[s,U]),_=(0,a.useContext)(m),b=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(_)&&Boolean(_.store);var O=b?n.store:_.store,E=(0,a.useMemo)(function(){return function(t){return e(t.dispatch,o)}(O)},[O]),A=(0,a.useMemo)(function(){if(!w)return y;var e=d(O,b?null:_.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[O,b,_]),L=A[0],k=A[1],M=(0,a.useMemo)(function(){return b?_:f({},_,{subscription:L})},[b,_,L]),P=(0,a.useReducer)(S,v,C),T=P[0][0],F=P[1];if(T&&T.error)throw T.error;var H=(0,a.useRef)(),R=(0,a.useRef)(l),N=(0,a.useRef)(),B=(0,a.useRef)(!1),j=u(function(){return N.current&&l===R.current?N.current:E(O.getState(),l)},[O,T,l]);D(I,[R,H,B,l,j,N,k]),D(x,[w,O,L,E,R,H,B,N,k,F],[O,L,E]);var V=(0,a.useMemo)(function(){return i().createElement(t,f({},j,{ref:c}))},[c,t,j]);return(0,a.useMemo)(function(){return w?i().createElement(m.Provider,{value:M},V):V},[m,V,M])}var O=c?i().memo(b):b;if(O.WrappedComponent=t,O.displayName=b.displayName=r,k){var E=i().forwardRef(function(e,t){return i().createElement(O,f({},e,{reactReduxForwardedRef:t}))});return E.displayName=r,E.WrappedComponent=t,_()(E,t)}return _()(O,t)}}function w(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function E(e,t){if(w(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!w(e[n[i]],t[n[i]]))return!1;return!0}function A(e){return function(t,n){var a=e(t,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function L(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function k(e,t){return function(t,n){n.displayName;var a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e)};return a.dependsOnOwnProps=!0,a.mapToProps=function(t,n){a.mapToProps=e,a.dependsOnOwnProps=L(e);var i=a(t,n);return"function"==typeof i&&(a.mapToProps=i,a.dependsOnOwnProps=L(i),i=a(t,n)),i},a}}const M=[function(e){return"function"==typeof e?k(e):void 0},function(e){return e?void 0:A(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?A(function(t){return function(e,t){var n={},a=function(a){var i=e[a];"function"==typeof i&&(n[a]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)a(i);return n}(e,t)}):void 0}],P=[function(e){return"function"==typeof e?k(e):void 0},function(e){return e?void 0:A(function(){return{}})}];function T(e,t,n){return f({},n,e,t)}const U=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var a,i=n.pure,r=n.areMergedPropsEqual,o=!1;return function(t,n,s){var c=e(t,n,s);return o?i&&r(c,a)||(a=c):(o=!0,a=c),a}}}(e):void 0},function(e){return e?void 0:function(){return T}}];var F=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function H(e,t,n,a){return function(i,r){return n(e(i,r),t(a,r),r)}}function R(e,t,n,a,i){var r,o,s,c,d,l=i.areStatesEqual,u=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;return function(i,m){return p?function(i,p){var m,_,h=!u(p,o),b=!l(i,r,p,o);return r=i,o=p,h&&b?(s=e(r,o),t.dependsOnOwnProps&&(c=t(a,o)),d=n(s,c,o)):h?(e.dependsOnOwnProps&&(s=e(r,o)),t.dependsOnOwnProps&&(c=t(a,o)),d=n(s,c,o)):b?(m=e(r,o),_=!f(m,s),s=m,_&&(d=n(s,c,o)),d):d}(i,m):(s=e(r=i,o=m),c=t(a,o),d=n(s,c,o),p=!0,d)}}function N(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,i=t.initMergeProps,r=p(t,F),o=n(e,r),s=a(e,r),c=i(e,r);return(r.pure?R:H)(o,s,c,e,r)}var B=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function j(e,t,n){for(var a=t.length-1;a>=0;a--){var i=t[a](e);if(i)return i}return function(t,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function V(e,t){return e===t}function z(e){var t=void 0===e?{}:e,n=t.connectHOC,a=void 0===n?O:n,i=t.mapStateToPropsFactories,r=void 0===i?P:i,o=t.mapDispatchToPropsFactories,s=void 0===o?M:o,c=t.mergePropsFactories,d=void 0===c?U:c,l=t.selectorFactory,u=void 0===l?N:l;return function(e,t,n,i){void 0===i&&(i={});var o=i,c=o.pure,l=void 0===c||c,m=o.areStatesEqual,_=void 0===m?V:m,h=o.areOwnPropsEqual,b=void 0===h?E:h,g=o.areStatePropsEqual,v=void 0===g?E:g,y=o.areMergedPropsEqual,S=void 0===y?E:y,D=p(o,B),I=j(e,r,"mapStateToProps"),x=j(t,s,"mapDispatchToProps"),C=j(n,d,"mergeProps");return a(u,f({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:I,initMapDispatchToProps:x,initMergeProps:C,pure:l,areStatesEqual:_,areOwnPropsEqual:b,areStatePropsEqual:v,areMergedPropsEqual:S},D))}}const G=z();var K;K=n(8398).unstable_batchedUpdates,o=K}
,5445:(e,t,n)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{Kw:()=>b,CH:()=>_,PY:()=>p,Xz:()=>h,x$:()=>f});var c="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function u(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e,t,n){var a;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(f)(e,t)}if("function"!=typeof e)throw new Error(s(2));var i=e,r=t,o=[],d=o,p=!1;function m(){d===o&&(d=o.slice())}function _(){if(p)throw new Error(s(3));return r}function h(e){if("function"!=typeof e)throw new Error(s(4));if(p)throw new Error(s(5));var t=!0;return m(),d.push(e),function(){if(t){if(p)throw new Error(s(6));t=!1,m();var n=d.indexOf(e);d.splice(n,1),o=null}}}function b(e){if(!u(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(p)throw new Error(s(9));try{p=!0,r=i(r,e)}finally{p=!1}for(var t=o=d,n=0;n<t.length;n++)(0,t[n])();return e}function g(e){if("function"!=typeof e)throw new Error(s(10));i=e,b({type:l.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(_())}return n(),{unsubscribe:t(n)}}})[c]=function(){return this},e}return b({type:l.INIT}),(a={dispatch:b,subscribe:h,getState:_,replaceReducer:g})[c]=v,a}function p(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var i=t[a];"function"==typeof e[i]&&(n[i]=e[i])}var r,o=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:l.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))})}(n)}catch(e){r=e}return function(e,t){if(void 0===e&&(e={}),r)throw r;for(var a=!1,i={},c=0;c<o.length;c++){var d=o[c],l=n[d],u=e[d],f=l(u,t);if(void 0===f)throw t&&t.type,new Error(s(14));i[d]=f,a=a||f!==u}return(a=a||o.length!==Object.keys(e).length)?i:e}}function m(e,t){return function(){return t(e.apply(this,arguments))}}function _(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var a in e){var i=e[a];"function"==typeof i&&(n[a]=m(i,t))}return n}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(s(15))},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},r=t.map(function(e){return e(i)});return a=h.apply(void 0,r)(n.dispatch),o(o({},n),{},{dispatch:a})}}}}
,3996:(e,t,n)=>{"use strict";n.d(t,{Rz:()=>c});var a="NOT_FOUND",i=function(e,t){return e===t};function r(e,t){var n,r,o="object"==typeof t?t:{equalityCheck:t},s=o.equalityCheck,c=void 0===s?i:s,d=o.maxSize,l=void 0===d?1:d,u=o.resultEqualityCheck,f=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var a=t.length,i=0;i<a;i++)if(!e(t[i],n[i]))return!1;return!0}}(c),p=1===l?(n=f,{get:function(e){return r&&n(r.key,e)?r.value:a},put:function(e,t){r={key:e,value:t}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(e,t){var n=[];function i(e){var i=n.findIndex(function(n){return t(e,n.key)});if(i>-1){var r=n[i];return i>0&&(n.splice(i,1),n.unshift(r)),r.value}return a}return{get:i,put:function(t,r){i(t)===a&&(n.unshift({key:t,value:r}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(l,f);function m(){var t=p.get(arguments);if(t===a){if(t=e.apply(null,arguments),u){var n=p.getEntries(),i=n.find(function(e){return u(e.value,t)});i&&(t=i.value)}p.put(arguments,t)}return t}return m.clearCache=function(){return p.clear()},m}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var r,s=0,c={memoizeOptions:void 0},d=a.pop();if("object"==typeof d&&(c=d,d=a.pop()),"function"!=typeof d)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof d+"]");var l=c,u=l.memoizeOptions,f=void 0===u?n:u,p=Array.isArray(f)?f:[f],m=o(a),_=e.apply(void 0,[function(){return s++,d.apply(null,arguments)}].concat(p)),h=e(function(){for(var e=[],t=m.length,n=0;n<t;n++)e.push(m[n].apply(null,arguments));return r=_.apply(null,e)});return Object.assign(h,{resultFunc:d,memoizedResultFunc:_,dependencies:m,lastResult:function(){return r},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),h};return i}var c=s(r)}
,4538:(e,t,n)=>{"use strict";var a=n(9816);n.o(a,"AnimationVariables")&&n.d(t,{AnimationVariables:function(){return a.AnimationVariables}}),n.o(a,"FontWeights")&&n.d(t,{FontWeights:function(){return a.FontWeights}}),n.o(a,"HighContrastSelector")&&n.d(t,{HighContrastSelector:function(){return a.HighContrastSelector}}),n.o(a,"concatStyleSets")&&n.d(t,{concatStyleSets:function(){return a.concatStyleSets}}),n.o(a,"getFocusStyle")&&n.d(t,{getFocusStyle:function(){return a.getFocusStyle}}),n.o(a,"getGlobalClassNames")&&n.d(t,{getGlobalClassNames:function(){return a.getGlobalClassNames}}),n.o(a,"getHighContrastNoAdjustStyle")&&n.d(t,{getHighContrastNoAdjustStyle:function(){return a.getHighContrastNoAdjustStyle}}),n.o(a,"hiddenContentStyle")&&n.d(t,{hiddenContentStyle:function(){return a.hiddenContentStyle}}),n.o(a,"normalize")&&n.d(t,{normalize:function(){return a.normalize}})}
,350:(e,t,n)=>{var a=n(9816);e.exports=a._Utilities}
,8214:(e,t,n)=>{var a=n(2141);e.exports=a.workaround_Icon}
,1873:(e,t,n)=>{var a=n(2141);e.exports=a.workaround_Popup}
,602:(e,t,n)=>{var a=n(2141);e.exports=a.workaround_ResponsiveModeIndex}
,188:(e,t,n)=>{"use strict";n.d(t,{S:()=>b});var a=n(350),i=n(280),r=n(5959),o=n(7864),s=n(7195),c=n(9349),d=n(8583),l=(0,a.classNamesFunction)(),u=r.forwardRef(function(e,t){var n=e.disabled,u=e.required,f=e.inputProps,p=e.name,m=e.ariaLabel,_=e.ariaLabelledBy,h=e.ariaDescribedBy,b=e.ariaPositionInSet,g=e.ariaSetSize,v=e.title,y=e.checkmarkIconProps,S=e.styles,D=e.theme,I=e.className,x=e.boxSide,C=void 0===x?"start":x,O=(0,o.B)("checkbox-",e.id),w=r.useRef(null),E=(0,s.a)(w,t),A=r.useRef(null),L=(0,c.k)(e.checked,e.defaultChecked,e.onChange),k=L[0],M=L[1],P=(0,c.k)(e.indeterminate,e.defaultIndeterminate),T=P[0],U=P[1];(0,a.useFocusRects)(w);var F=l(S,{theme:D,className:I,disabled:n,indeterminate:T,checked:k,reversed:"start"!==C,isUsingCustomLabelRender:!!e.onRenderLabel}),H=r.useCallback(function(e){T?(M(!!k,e),U(!1)):M(!k,e)},[M,U,T,k]),R=r.useCallback(function(e){return e&&e.label?r.createElement("span",{className:F.text,title:e.title},e.label):null},[F.text]),N=r.useCallback(function(e){if(A.current){var t=!!e;A.current.indeterminate=t,U(t)}},[U]);!function(e,t,n,a,i){r.useImperativeHandle(e.componentRef,function(){return{get checked(){return!!t},get indeterminate(){return!!n},set indeterminate(e){a(e)},focus:function(){i.current&&i.current.focus()}}},[i,t,n,a])}(e,k,T,N,A),r.useEffect(function(){return N(T)},[N,T]);var B=e.onRenderLabel||R,j=T?"mixed":void 0,V=(0,i.__assign)((0,i.__assign)({className:F.input,type:"checkbox"},f),{checked:!!k,disabled:n,required:u,name:p,id:O,title:v,onChange:H,"aria-disabled":n,"aria-label":m,"aria-labelledby":_,"aria-describedby":h,"aria-posinset":b,"aria-setsize":g,"aria-checked":j});return r.createElement("div",{className:F.root,title:v,ref:E},r.createElement("input",(0,i.__assign)({},V,{ref:A,title:v,"data-ktp-execute-target":!0})),r.createElement("label",{className:F.label,htmlFor:O},r.createElement("div",{className:F.checkbox,"data-ktp-target":!0},r.createElement(d.Icon,(0,i.__assign)({iconName:"CheckMark"},y,{className:F.checkmark}))),B(e,R)))});u.displayName="CheckboxBase";var f=n(4538),p={root:"ms-Checkbox",label:"ms-Checkbox-label",checkbox:"ms-Checkbox-checkbox",checkmark:"ms-Checkbox-checkmark",text:"ms-Checkbox-text"},m="20px",_="200ms",h="cubic-bezier(.4, 0, .23, 1)",b=(0,a.styled)(u,function(e){var t,n,r,o,s,c,d,l,u,b,g,v,y,S,D,I,x,C,O=e.className,w=e.theme,E=e.reversed,A=e.checked,L=e.disabled,k=e.isUsingCustomLabelRender,M=e.indeterminate,P=w.semanticColors,T=w.effects,U=w.palette,F=w.fonts,H=(0,f.getGlobalClassNames)(p,w),R=P.inputForegroundChecked,N=U.neutralSecondary,B=U.neutralPrimary,j=P.inputBackgroundChecked,V=P.inputBackgroundChecked,z=P.disabledBodySubtext,G=P.inputBorderHovered,K=P.inputBackgroundCheckedHovered,W=P.inputBackgroundChecked,q=P.inputBackgroundCheckedHovered,Q=P.inputBackgroundCheckedHovered,Y=P.inputTextHovered,J=P.disabledBodySubtext,X=P.bodyText,Z=P.disabledText,$=[(t={content:'""',borderRadius:T.roundedCorner2,position:"absolute",width:10,height:10,top:4,left:4,boxSizing:"border-box",borderWidth:5,borderStyle:"solid",borderColor:L?z:j,transitionProperty:"border-width, border, border-color",transitionDuration:_,transitionTimingFunction:h},t[f.HighContrastSelector]={borderColor:"WindowText"},t)];return{root:[H.root,{position:"relative",display:"flex"},E&&"reversed",A&&"is-checked",!L&&"is-enabled",L&&"is-disabled",!L&&[!A&&(n={},n[":hover .".concat(H.checkbox)]=(r={borderColor:G},r[f.HighContrastSelector]={borderColor:"Highlight"},r),n[":focus .".concat(H.checkbox)]={borderColor:G},n[":hover .".concat(H.checkmark)]=(o={color:N,opacity:"1"},o[f.HighContrastSelector]={color:"Highlight"},o),n),A&&!M&&(s={},s[":hover .".concat(H.checkbox)]={background:q,borderColor:Q},s[":focus .".concat(H.checkbox)]={background:q,borderColor:Q},s[f.HighContrastSelector]=(c={},c[":hover .".concat(H.checkbox)]={background:"Highlight",borderColor:"Highlight"},c[":focus .".concat(H.checkbox)]={background:"Highlight"},c[":focus:hover .".concat(H.checkbox)]={background:"Highlight"},c[":focus:hover .".concat(H.checkmark)]={color:"Window"},c[":hover .".concat(H.checkmark)]={color:"Window"},c),s),M&&(d={},d[":hover .".concat(H.checkbox,", :hover .").concat(H.checkbox,":after")]=(l={borderColor:K},l[f.HighContrastSelector]={borderColor:"WindowText"},l),d[":focus .".concat(H.checkbox)]={borderColor:K},d[":hover .".concat(H.checkmark)]={opacity:"0"},d),(u={},u[":hover .".concat(H.text,", :focus .").concat(H.text)]=(b={color:Y},b[f.HighContrastSelector]={color:L?"GrayText":"WindowText"},b),u)],O],input:(g={position:"absolute",background:"none",opacity:0},g[".".concat(a.IsFocusVisibleClassName," &:focus + label::before, :host(.").concat(a.IsFocusVisibleClassName,") &:focus + label::before")]=(v={outline:"1px solid "+w.palette.neutralSecondary,outlineOffset:"2px"},v[f.HighContrastSelector]={outline:"1px solid WindowText"},v),g),label:[H.label,w.fonts.medium,{display:"flex",alignItems:k?"center":"flex-start",cursor:L?"default":"pointer",position:"relative",userSelect:"none"},E&&{flexDirection:"row-reverse",justifyContent:"flex-end"},{"&::before":{position:"absolute",left:0,right:0,top:0,bottom:0,content:'""',pointerEvents:"none"}}],checkbox:[H.checkbox,(y={position:"relative",display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",height:m,width:m,border:"1px solid ".concat(B),borderRadius:T.roundedCorner2,boxSizing:"border-box",transitionProperty:"background, border, border-color",transitionDuration:_,transitionTimingFunction:h,overflow:"hidden",":after":M?$:null},y[f.HighContrastSelector]=(0,i.__assign)({borderColor:"WindowText"},(0,f.getHighContrastNoAdjustStyle)()),y),M&&{borderColor:j},E?{marginLeft:4}:{marginRight:4},!L&&!M&&A&&(S={background:W,borderColor:V},S[f.HighContrastSelector]={background:"Highlight",borderColor:"Highlight"},S),L&&(D={borderColor:z},D[f.HighContrastSelector]={borderColor:"GrayText"},D),A&&L&&(I={background:J,borderColor:z},I[f.HighContrastSelector]={background:"Window"},I)],checkmark:[H.checkmark,(x={opacity:A&&!M?"1":"0",color:R},x[f.HighContrastSelector]=(0,i.__assign)({color:L?"GrayText":"Window"},(0,f.getHighContrastNoAdjustStyle)()),x)],text:[H.text,(C={color:L?Z:X,fontSize:F.medium.fontSize,lineHeight:"20px"},C[f.HighContrastSelector]=(0,i.__assign)({color:L?"GrayText":"WindowText"},(0,f.getHighContrastNoAdjustStyle)()),C),E?{marginRight:4}:{marginLeft:4}]}},void 0,{scope:"Checkbox"})}
,5862:(e,t,n)=>{"use strict";n.d(t,{a:()=>k});var a=n(280),i=n(5959),r=n(2141),o=n(9248),s="backward",c=function(e){function t(t){var n=e.call(this,t)||this;return n._inputElement=i.createRef(),n._autoFillEnabled=!0,n._onCompositionStart=function(e){n.setState({isComposing:!0}),n._autoFillEnabled=!1},n._onCompositionUpdate=function(){(0,r.isIE11)()&&n._updateValue(n._getCurrentInputValue(),!0)},n._onCompositionEnd=function(e){var t=n._getCurrentInputValue();n._tryEnableAutofill(t,n.value,!1,!0),n.setState({isComposing:!1}),n._async.setTimeout(function(){n._updateValue(n._getCurrentInputValue(),!1)},0)},n._onClick=function(){n.value&&""!==n.value&&n._autoFillEnabled&&(n._autoFillEnabled=!1)},n._onKeyDown=function(e){if(n.props.onKeyDown&&n.props.onKeyDown(e),!e.nativeEvent.isComposing)switch(e.which){case r.KeyCodes.del:case r.KeyCodes.backspace:n._autoFillEnabled=!1;break;case r.KeyCodes.left:case r.KeyCodes.right:n._autoFillEnabled&&(n.setState(function(e){return{inputValue:n.props.suggestedDisplayValue||e.inputValue}}),n._autoFillEnabled=!1);break;default:n._autoFillEnabled||-1!==n.props.enableAutofillOnKeyPress.indexOf(e.which)&&(n._autoFillEnabled=!0)}},n._onInputChanged=function(e){var t=n._getCurrentInputValue(e);if(n.state.isComposing||n._tryEnableAutofill(t,n.value,e.nativeEvent.isComposing),!(0,r.isIE11)()||!n.state.isComposing){var a=e.nativeEvent.isComposing,i=void 0===a?n.state.isComposing:a;n._updateValue(t,i)}},n._onChanged=function(){},n._updateValue=function(e,t){if(e||e!==n.value){var a=n.props,i=a.onInputChange,r=a.onInputValueChange;i&&(e=(null==i?void 0:i(e,t))||""),n.setState({inputValue:e},function(){return null==r?void 0:r(e,t)})}},(0,r.initializeComponentRef)(n),n._async=new r.Async(n),n.state={inputValue:t.defaultVisibleValue||"",isComposing:!1},n}return(0,a.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){if(e.updateValueInWillReceiveProps){var n=e.updateValueInWillReceiveProps();if(null!==n&&n!==t.inputValue&&!t.isComposing)return(0,a.__assign)((0,a.__assign)({},t),{inputValue:n})}return null},Object.defineProperty(t.prototype,"cursorLocation",{get:function(){if(this._inputElement.current){var e=this._inputElement.current;return"forward"!==e.selectionDirection?e.selectionEnd:e.selectionStart}return-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueSelected",{get:function(){return Boolean(this.inputElement&&this.inputElement.selectionStart!==this.inputElement.selectionEnd)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._getControlledValue()||this.state.inputValue||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._inputElement.current?this._inputElement.current.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._inputElement.current?this._inputElement.current.selectionEnd:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._inputElement.current},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e,t,n){var a,i=this.props,o=i.suggestedDisplayValue,c=i.shouldSelectFullInputValueInComponentDidUpdate,l=0;if(!i.preventValueSelection){var u=(null===(a=this.context)||void 0===a?void 0:a.window.document)||(0,r.getDocument)(this._inputElement.current);if(this._inputElement.current&&this._inputElement.current===(null==u?void 0:u.activeElement)&&this._autoFillEnabled&&this.value&&o&&d(o,this.value)){var f=!1;if(c&&(f=c()),f)this._inputElement.current.setSelectionRange(0,o.length,s);else{for(;l<this.value.length&&this.value[l].toLocaleLowerCase()===o[l].toLocaleLowerCase();)l++;l>0&&this._inputElement.current.setSelectionRange(l,o.length,s)}}else this._inputElement.current&&(null===n||this._autoFillEnabled||this.state.isComposing||this._inputElement.current.setSelectionRange(n.start,n.end,n.dir))}},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.render=function(){var e=(0,r.getNativeProps)(this.props,r.inputProperties),t=(0,a.__assign)((0,a.__assign)({},this.props.style),{fontFamily:"inherit"});return i.createElement("input",(0,a.__assign)({autoCapitalize:"off",autoComplete:"off","aria-autocomplete":"both"},e,{style:t,ref:this._inputElement,value:this._getDisplayValue(),onCompositionStart:this._onCompositionStart,onCompositionUpdate:this._onCompositionUpdate,onCompositionEnd:this._onCompositionEnd,onChange:this._onChanged,onInput:this._onInputChanged,onKeyDown:this._onKeyDown,onClick:this.props.onClick?this.props.onClick:this._onClick,"data-lpignore":!0}))},t.prototype.focus=function(){this._inputElement.current&&this._inputElement.current.focus()},t.prototype.clear=function(){this._autoFillEnabled=!0,this._updateValue("",!1),this._inputElement.current&&this._inputElement.current.setSelectionRange(0,0)},t.prototype.getSnapshotBeforeUpdate=function(){var e,t,n=this._inputElement.current;return n&&n.selectionStart!==this.value.length?{start:null!==(e=n.selectionStart)&&void 0!==e?e:n.value.length,end:null!==(t=n.selectionEnd)&&void 0!==t?t:n.value.length,dir:n.selectionDirection||"backward"}:null},t.prototype._getCurrentInputValue=function(e){return e&&e.target&&e.target.value?e.target.value:this.inputElement&&this.inputElement.value?this.inputElement.value:""},t.prototype._tryEnableAutofill=function(e,t,n,a){!n&&e&&this._inputElement.current&&this._inputElement.current.selectionStart===e.length&&!this._autoFillEnabled&&(e.length>t.length||a)&&(this._autoFillEnabled=!0)},t.prototype._getDisplayValue=function(){return this._autoFillEnabled?(n=e=this.value,(t=this.props.suggestedDisplayValue)&&e&&d(t,n)&&(n=t),n):this.value;var e,t,n},t.prototype._getControlledValue=function(){var e=this.props.value;return void 0===e||"string"==typeof e?e:(console.warn("props.value of Autofill should be a string, but it is ".concat(e," with type of ").concat(typeof e)),e.toString())},t.defaultProps={enableAutofillOnKeyPress:[r.KeyCodes.down,r.KeyCodes.up]},t.contextType=o.Z0,t}(i.Component);function d(e,t){return!(!e||!t)&&0===e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}var l,u,f,p,m=n(188),_=(0,r.memoizeFunction)(function(e){var t,n=e.semanticColors;return{backgroundColor:n.disabledBackground,color:n.disabledText,cursor:"default",selectors:(t={":after":{borderColor:n.disabledBackground}},t[r.HighContrastSelector]={color:"GrayText",selectors:{":after":{borderColor:"GrayText"}}},t)}}),h={selectors:(l={},l[r.HighContrastSelector]=(0,a.__assign)({backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},(0,r.getHighContrastNoAdjustStyle)()),l)},b={selectors:(u={},u[r.HighContrastSelector]=(0,a.__assign)({color:"WindowText",backgroundColor:"Window"},(0,r.getHighContrastNoAdjustStyle)()),u)},g=(0,r.memoizeFunction)(function(e,t,n,i,o,s){var c,d=e.palette,l=e.semanticColors,u={textHoveredColor:l.menuItemTextHovered,textSelectedColor:d.neutralDark,textDisabledColor:l.disabledText,backgroundHoveredColor:l.menuItemBackgroundHovered,backgroundPressedColor:l.menuItemBackgroundPressed},f={root:[e.fonts.medium,{backgroundColor:i?u.backgroundHoveredColor:"transparent",boxSizing:"border-box",cursor:"pointer",display:o?"none":"block",width:"100%",height:"auto",minHeight:36,lineHeight:"20px",padding:"0 8px",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderRadius:0,wordWrap:"break-word",overflowWrap:"break-word",textAlign:"left",selectors:(0,a.__assign)((0,a.__assign)((c={},c[r.HighContrastSelector]={border:"none",borderColor:"Background"},c),!o&&{"&.ms-Checkbox":{display:"flex",alignItems:"center"}}),{"&.ms-Button--command:hover:active":{backgroundColor:u.backgroundPressedColor},".ms-Checkbox-label":{width:"100%"}})},s?[{backgroundColor:"transparent",color:u.textSelectedColor,selectors:{":hover":[{backgroundColor:u.backgroundHoveredColor},h]}},(0,r.getFocusStyle)(e,{inset:-1,isFocusedOnly:!1}),h]:[]],rootHovered:{backgroundColor:u.backgroundHoveredColor,color:u.textHoveredColor},rootFocused:{backgroundColor:u.backgroundHoveredColor},rootDisabled:{color:u.textDisabledColor,cursor:"default"},optionText:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",minWidth:"0px",maxWidth:"100%",wordWrap:"break-word",overflowWrap:"break-word",display:"inline-block"},optionTextWrapper:{maxWidth:"100%",display:"flex",alignItems:"center"}};return(0,r.concatStyleSets)(f,t,n)}),v=(0,r.memoizeFunction)(function(e,t){var n,i,o=e.semanticColors,s=e.fonts,c={buttonTextColor:o.bodySubtext,buttonTextHoveredCheckedColor:o.buttonTextChecked,buttonBackgroundHoveredColor:o.listItemBackgroundHovered,buttonBackgroundCheckedColor:o.listItemBackgroundChecked,buttonBackgroundCheckedHoveredColor:o.listItemBackgroundCheckedHovered},d={selectors:(n={},n[r.HighContrastSelector]=(0,a.__assign)({backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},(0,r.getHighContrastNoAdjustStyle)()),n)},l={root:{color:c.buttonTextColor,fontSize:s.small.fontSize,position:"absolute",top:0,height:"100%",lineHeight:30,width:32,textAlign:"center",cursor:"default",selectors:(i={},i[r.HighContrastSelector]=(0,a.__assign)({backgroundColor:"ButtonFace",borderColor:"ButtonText",color:"ButtonText"},(0,r.getHighContrastNoAdjustStyle)()),i)},icon:{fontSize:s.small.fontSize},rootHovered:[{backgroundColor:c.buttonBackgroundHoveredColor,color:c.buttonTextHoveredCheckedColor,cursor:"pointer"},d],rootPressed:[{backgroundColor:c.buttonBackgroundCheckedColor,color:c.buttonTextHoveredCheckedColor},d],rootChecked:[{backgroundColor:c.buttonBackgroundCheckedColor,color:c.buttonTextHoveredCheckedColor},d],rootCheckedHovered:[{backgroundColor:c.buttonBackgroundCheckedHoveredColor,color:c.buttonTextHoveredCheckedColor},d],rootDisabled:[_(e),{position:"absolute"}]};return(0,r.concatStyleSets)(l,t)}),y=(0,r.memoizeFunction)(function(e,t,n){var i,o,s,c,d,l,u=e.semanticColors,f=e.fonts,p=e.effects,m={textColor:u.inputText,borderColor:u.inputBorder,borderHoveredColor:u.inputBorderHovered,borderPressedColor:u.inputFocusBorderAlt,borderFocusedColor:u.inputFocusBorderAlt,backgroundColor:u.inputBackground,erroredColor:u.errorText},h={headerTextColor:u.menuHeader,dividerBorderColor:u.bodyDivider},g={selectors:(i={},i[r.HighContrastSelector]={color:"GrayText"},i)},v=[{color:u.inputPlaceholderText},g],y=[{color:u.inputTextHovered},g],S=[{color:u.disabledText},g],D=(0,a.__assign)((0,a.__assign)({color:"HighlightText",backgroundColor:"Window"},(0,r.getHighContrastNoAdjustStyle)()),{selectors:{":after":{borderColor:"Highlight"}}}),I=(0,r.getInputFocusStyle)(m.borderPressedColor,p.roundedCorner2,"border",0),x={container:{},label:{},labelDisabled:{},root:[e.fonts.medium,{boxShadow:"none",marginLeft:"0",paddingRight:32,paddingLeft:9,color:m.textColor,position:"relative",outline:"0",userSelect:"none",backgroundColor:m.backgroundColor,cursor:"text",display:"block",height:32,whiteSpace:"nowrap",textOverflow:"ellipsis",boxSizing:"border-box",selectors:{".ms-Label":{display:"inline-block",marginBottom:"8px"},"&.is-open":{selectors:(o={},o[r.HighContrastSelector]=D,o)},":after":{pointerEvents:"none",content:"''",position:"absolute",left:0,top:0,bottom:0,right:0,borderWidth:"1px",borderStyle:"solid",borderColor:m.borderColor,borderRadius:p.roundedCorner2}}}],rootHovered:{selectors:(s={":after":{borderColor:m.borderHoveredColor},".ms-ComboBox-Input":[{color:u.inputTextHovered},(0,r.getPlaceholderStyles)(y),b]},s[r.HighContrastSelector]=(0,a.__assign)((0,a.__assign)({color:"HighlightText",backgroundColor:"Window"},(0,r.getHighContrastNoAdjustStyle)()),{selectors:{":after":{borderColor:"Highlight"}}}),s)},rootPressed:[{position:"relative",selectors:(c={},c[r.HighContrastSelector]=D,c)}],rootFocused:[{selectors:(d={".ms-ComboBox-Input":[{color:u.inputTextHovered},b]},d[r.HighContrastSelector]=D,d)},I],rootDisabled:_(e),rootError:{selectors:{":after":{borderColor:m.erroredColor},":hover:after":{borderColor:u.inputBorderHovered}}},rootDisallowFreeForm:{},input:[(0,r.getPlaceholderStyles)(v),{backgroundColor:m.backgroundColor,color:m.textColor,boxSizing:"border-box",width:"100%",height:"100%",borderStyle:"none",outline:"none",font:"inherit",textOverflow:"ellipsis",padding:"0",selectors:{"::-ms-clear":{display:"none"}}},b],inputDisabled:[_(e),(0,r.getPlaceholderStyles)(S)],errorMessage:[e.fonts.small,{color:m.erroredColor,marginTop:"5px"}],callout:{boxShadow:p.elevation8},optionsContainerWrapper:{width:n},optionsContainer:{display:"block"},screenReaderText:r.hiddenContentStyle,header:[f.medium,{fontWeight:r.FontWeights.semibold,color:h.headerTextColor,backgroundColor:"none",borderStyle:"none",height:36,lineHeight:36,cursor:"default",padding:"0 8px",userSelect:"none",textAlign:"left",selectors:(l={},l[r.HighContrastSelector]=(0,a.__assign)({color:"GrayText"},(0,r.getHighContrastNoAdjustStyle)()),l)}],divider:{height:1,backgroundColor:h.dividerBorderColor}};return(0,r.concatStyleSets)(x,t)}),S=(0,r.memoizeFunction)(function(e,t,n,a,i,o,s,c){return{container:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-container",t,e.container),label:(0,r.mergeStyles)(e.__shadowConfig__,e.label,a&&e.labelDisabled),root:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox",c?e.rootError:n&&"is-open",i&&"is-required",e.root,!s&&e.rootDisallowFreeForm,c&&!o?e.rootError:!a&&o&&e.rootFocused,!a&&{selectors:{":hover":c?e.rootError:!n&&!o&&e.rootHovered,":active":c?e.rootError:e.rootPressed,":focus":c?e.rootError:e.rootFocused}},a&&["is-disabled",e.rootDisabled]),input:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-Input",e.input,a&&e.inputDisabled),errorMessage:(0,r.mergeStyles)(e.__shadowConfig__,e.errorMessage),callout:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-callout",e.callout),optionsContainerWrapper:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-optionsContainerWrapper",e.optionsContainerWrapper),optionsContainer:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-optionsContainer",e.optionsContainer),header:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-header",e.header),divider:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-divider",e.divider),screenReaderText:(0,r.mergeStyles)(e.__shadowConfig__,e.screenReaderText)}}),D=(0,r.memoizeFunction)(function(e){return{optionText:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-optionText",e.optionText),root:(0,r.mergeStyles)(e.__shadowConfig__,"ms-ComboBox-option",e.root,{selectors:{":hover":e.rootHovered,":focus":e.rootFocused,":active":e.rootPressed}}),optionTextWrapper:(0,r.mergeStyles)(e.__shadowConfig__,e.optionTextWrapper)}}),I=n(2912),x=n(8791),C=n(7195),O=n(350),w=n(5944);!function(e){e[e.backward=-1]="backward",e[e.none=0]="none",e[e.forward=1]="forward"}(f||(f={})),function(e){e[e.clearAll=-2]="clearAll",e[e.default=-1]="default"}(p||(p={}));var E=i.memo(function(e){return(0,e.render)()},function(e,t){e.render;var n=(0,a.__rest)(e,["render"]),i=(t.render,(0,a.__rest)(t,["render"]));return(0,r.shallowCompare)(n,i)}),A="ComboBox",L={options:[],allowFreeform:!1,allowParentArrowNavigation:!1,autoComplete:"on",buttonIconProps:{iconName:"ChevronDown"}},k=i.forwardRef(function(e,t){var n=(0,r.getPropsWithDefaults)(L,e),o=(n.ref,(0,a.__rest)(n,["ref"])),s=i.useRef(null),c=(0,C.a)(s,t),d=function(e){var t=e.options,n=e.defaultSelectedKey,a=e.selectedKey,r=i.useState(function(){return T(t,function(e,t){var n=U(e);return n.length?n:U(t)}(n,a))}),o=r[0],s=r[1],c=i.useState(t),d=c[0],l=c[1],u=i.useState(),f=u[0],p=u[1];return i.useEffect(function(){if(void 0!==a){var e=U(a),n=T(t,e);s(n)}l(t)},[t,a]),i.useEffect(function(){null===a&&p(void 0)},[a]),[o,s,d,l,f,p]}(o),l=d[0],u=d[1],f=d[2],p=d[3],m=d[4],_=d[5];return i.createElement(P,(0,a.__assign)({},o,{hoisted:{mergedRootRef:c,rootRef:s,selectedIndices:l,setSelectedIndices:u,currentOptions:f,setCurrentOptions:p,suggestedDisplayValue:m,setSuggestedDisplayValue:_}}))});function M(e,t){for(var n=(0,O.getChildren)(e),a=0;a<n.length;a++){var i=n[a];if(t(i))return i;var r=M(i,t);if(r)return r}return null}k.displayName=A;var P=function(e){function t(t){var n=e.call(this,t)||this;return n._autofill=i.createRef(),n._comboBoxWrapper=i.createRef(),n._comboBoxMenu=i.createRef(),n._selectedElement=i.createRef(),n._overrideScrollDismiss=!1,n.focus=function(e,t){n.props.disabled||(n._autofill.current&&(t?(0,r.focusAsync)(n._autofill.current):n._autofill.current.focus(),e&&n.setState({isOpen:!0})),n._hasFocus()||n.setState({focusState:"focused"}))},n.dismissMenu=function(){n.state.isOpen&&n.setState({isOpen:!1})},n._onUpdateValueInAutofillWillReceiveProps=function(){var e=n._autofill.current;return e?null===e.value||void 0===e.value?null:F(n._currentVisibleValue):null},n._renderComboBoxWrapper=function(e,t){var o=n.props,s=o.label,d=o.disabled,l=o.ariaLabel,u=o.ariaDescribedBy,f=void 0===u?n.props["aria-describedby"]:u,p=o.required,m=o.errorMessage,_=o.buttonIconProps,h=o.isButtonAriaHidden,b=o.title,g=o.placeholder,v=o.tabIndex,y=o.autofill,S=o.iconButtonProps,D=o.hoisted.suggestedDisplayValue,I=n.state,x=I.ariaActiveDescendantValue,C=I.isOpen,O=n._hasFocus()&&n.props.multiSelect&&e?e:g,w={"aria-labelledby":[n.props["aria-labelledby"],s&&n._id+"-label"].join(" ").trim()||void 0,"aria-label":l&&!s?l:void 0},E=!!(m&&m.length>0);return i.createElement("div",{"data-ktp-target":!0,ref:n._comboBoxWrapper,id:n._id+"wrapper",className:n._classNames.root,"aria-owns":C?n._id+"-list":void 0},i.createElement(c,(0,a.__assign)({"data-ktp-execute-target":!0,"data-is-interactable":!d,componentRef:n._autofill,id:n._id+"-input",className:n._classNames.input,type:"text",onFocus:n._onFocus,onBlur:n._onBlur,onKeyDown:n._onInputKeyDown,onKeyUp:n._onInputKeyUp,onClick:n._onAutofillClick,onTouchStart:n._onTouchStart,onInputValueChange:n._onInputChange,"aria-expanded":C,"aria-autocomplete":n._getAriaAutoCompleteValue(),role:"combobox",readOnly:d},w,{"aria-describedby":void 0!==m?(0,r.mergeAriaAttributeValues)(f,t):f,"aria-activedescendant":x,"aria-required":p,"aria-disabled":d,"aria-invalid":E,"aria-controls":C?n._id+"-list":void 0,spellCheck:!1,defaultVisibleValue:n._currentVisibleValue,suggestedDisplayValue:D,updateValueInWillReceiveProps:n._onUpdateValueInAutofillWillReceiveProps,shouldSelectFullInputValueInComponentDidUpdate:n._onShouldSelectFullInputValueInAutofillComponentDidUpdate,title:b,preventValueSelection:!n._hasFocus(),placeholder:O,tabIndex:d?-1:v},y)),i.createElement(r.IconButton,(0,a.__assign)({className:"ms-ComboBox-CaretDown-button",styles:n._getCaretButtonStyles(),role:h?"presentation":void 0,"aria-hidden":h},h?void 0:w,{"data-is-focusable":!1,tabIndex:-1,onClick:n._onComboBoxClick,onBlur:n._onBlur,iconProps:_,disabled:d,checked:C},S)))},n._onShouldSelectFullInputValueInAutofillComponentDidUpdate=function(){return n._currentVisibleValue===n.props.hoisted.suggestedDisplayValue},n._getVisibleValue=function(){var e=n.props,t=e.text,a=e.allowFreeform,i=e.allowFreeInput,r=e.autoComplete,o=e.hoisted,s=o.suggestedDisplayValue,c=o.selectedIndices,d=o.currentOptions,l=n.state,u=l.currentPendingValueValidIndex,f=l.currentPendingValue,p=l.isOpen,m=H(d,u);if((!p||!m)&&(t||""===t)&&null==f)return t;if(n.props.multiSelect){if(n._hasFocus()){var _=-1;return"on"===r&&m&&(_=u),n._getPendingString(f,d,_)}return n._getMultiselectDisplayString(c,d,s)}return _=n._getFirstSelectedIndex(),a||i?("on"===r&&m&&(_=u),n._getPendingString(f,d,_)):m&&"on"===r?(_=u,F(f)):!n.state.isOpen&&f?H(d,_)?f:F(s):H(d,_)?B(d[_]):F(s)},n._onInputChange=function(e){n.props.disabled?n._handleInputWhenDisabled(null):(n.props.onInputValueChange&&n.props.onInputValueChange(e),n.props.allowFreeform||n.props.allowFreeInput?n._processInputChangeWithFreeform(e):n._processInputChangeWithoutFreeform(e))},n._onFocus=function(){var e,t;null===(t=null===(e=n._autofill.current)||void 0===e?void 0:e.inputElement)||void 0===t||t.select(),n._hasFocus()||n.setState({focusState:"focusing"})},n._onResolveOptions=function(){if(n.props.onResolveOptions){var e=n.props.onResolveOptions((0,a.__spreadArray)([],n.props.hoisted.currentOptions,!0));Array.isArray(e)?n.props.hoisted.setCurrentOptions(e):e&&e.then&&(n._currentPromise=e,e.then(function(t){e===n._currentPromise&&n.props.hoisted.setCurrentOptions(t)}))}},n._onBlur=function(e){var t,a,i=(0,w.HW)(n.context),o=e.relatedTarget;if(null===e.relatedTarget&&(o=null==i?void 0:i.activeElement),o){var s=null===(t=n.props.hoisted.rootRef.current)||void 0===t?void 0:t.contains(o),c=null===(a=n._comboBoxMenu.current)||void 0===a?void 0:a.contains(o),d=n._comboBoxMenu.current&&(0,r.findElementRecursive)(n._comboBoxMenu.current,function(e){return e===o},i);if(s||c||d)return d&&n._hasFocus()&&(!n.props.multiSelect||n.props.allowFreeform)&&n._submitPendingValue(e),e.preventDefault(),void e.stopPropagation()}n._hasFocus()&&(n.setState({focusState:"none"}),n.props.multiSelect&&!n.props.allowFreeform||n._submitPendingValue(e))},n._onRenderContainer=function(e,t){var o=e.onRenderList,s=e.calloutProps,c=e.dropdownWidth,d=e.dropdownMaxWidth,l=e.onRenderUpperContent,u=void 0===l?n._onRenderUpperContent:l,f=e.onRenderLowerContent,p=void 0===f?n._onRenderLowerContent:f,m=e.useComboBoxAsMenuWidth,_=e.persistMenu,h=e.shouldRestoreFocus,b=void 0===h||h,g=n.state.isOpen,v=n._id,y=m&&n._comboBoxWrapper.current?n._comboBoxWrapper.current.clientWidth+2:void 0;return i.createElement(r.Callout,(0,a.__assign)({isBeakVisible:!1,gapSpace:0,doNotLayer:!1,directionalHint:r.DirectionalHint.bottomLeftEdge,directionalHintFixed:!1},s,{onLayerMounted:n._onLayerMounted,className:(0,r.css)(n._classNames.callout,null==s?void 0:s.className),target:n._comboBoxWrapper.current,onDismiss:n._onDismiss,onMouseDown:n._onCalloutMouseDown,onScroll:n._onScroll,setInitialFocus:!1,calloutWidth:m&&n._comboBoxWrapper.current?y&&y:c,calloutMaxWidth:d||y,hidden:_?!g:void 0,shouldRestoreFocus:b,preventDismissOnEvent:function(e){return n._preventDismissOnScrollOrResize(e)}}),u(n.props,n._onRenderUpperContent),i.createElement("div",{className:n._classNames.optionsContainerWrapper,ref:n._comboBoxMenu},null==o?void 0:o((0,a.__assign)((0,a.__assign)({},e),{id:v}),n._onRenderList)),p(n.props,n._onRenderLowerContent))},n._onLayerMounted=function(){n._onCalloutLayerMounted(),n._async.setTimeout(function(){n._scrollIntoView()},0),n.props.calloutProps&&n.props.calloutProps.onLayerMounted&&n.props.calloutProps.onLayerMounted()},n._onRenderLabel=function(e){var t=e.props,a=t.label,o=t.disabled,s=t.required;return a?i.createElement(r.Label,{id:n._id+"-label",disabled:o,required:s,className:n._classNames.label},a,e.multiselectAccessibleText&&i.createElement("span",{className:n._classNames.screenReaderText},e.multiselectAccessibleText)):null},n._onRenderList=function(e){var t=e.onRenderItem,r=void 0===t?n._onRenderItem:t,o=e.label,s=e.ariaLabel,c=e.multiSelect,d={items:[]},l=[],u=function(){var e=d.id?[i.createElement("div",{role:"group",key:d.id,"aria-labelledby":d.id},d.items)]:d.items;l=(0,a.__spreadArray)((0,a.__spreadArray)([],l,!0),e,!0),d={items:[]}};e.options.forEach(function(e,t){!function(e,t){switch(e.itemType){case I.W.Header:d.items.length>0&&u();var i=n._id+e.key;d.items.push(r((0,a.__assign)((0,a.__assign)({id:i},e),{index:t}),n._onRenderItem)),d.id=i;break;case I.W.Divider:t>0&&d.items.push(r((0,a.__assign)((0,a.__assign)({},e),{index:t}),n._onRenderItem)),d.items.length>0&&u();break;default:d.items.push(r((0,a.__assign)((0,a.__assign)({},e),{index:t}),n._onRenderItem))}}(e,t)}),d.items.length>0&&u();var f=n._id;return i.createElement("div",{id:f+"-list",className:n._classNames.optionsContainer,"aria-labelledby":o&&f+"-label","aria-label":s&&!o?s:void 0,"aria-multiselectable":c?"true":void 0,role:"listbox"},l)},n._onRenderItem=function(e){switch(e.itemType){case I.W.Divider:return n._renderSeparator(e);case I.W.Header:return n._renderHeader(e);default:return n._renderOption(e)}},n._onRenderLowerContent=function(){return null},n._onRenderUpperContent=function(){return null},n._renderOption=function(e){var t,o=n.props.onRenderOption,s=void 0===o?n._onRenderOptionContent:o,c=null!==(t=e.id)&&void 0!==t?t:n._id+"-list"+e.index,d=n._isOptionSelected(e.index),l=n._isOptionChecked(e.index),u=n._isOptionIndeterminate(e.index),f=n._getCurrentOptionStyles(e),p=D(f),_=e.title;return i.createElement(E,{key:e.key,index:e.index,disabled:e.disabled,isSelected:d,isChecked:l,isIndeterminate:u,text:e.text,render:function(){return n.props.multiSelect?i.createElement(m.S,{id:c,ariaLabel:e.ariaLabel,ariaLabelledBy:e.ariaLabel?void 0:c+"-label",key:e.key,styles:f,className:"ms-ComboBox-option",onChange:n._onItemClick(e),label:e.text,checked:l,indeterminate:u,title:_,disabled:e.disabled,onRenderLabel:n._renderCheckboxLabel.bind(n,(0,a.__assign)((0,a.__assign)({},e),{id:c+"-label"})),inputProps:(0,a.__assign)({"aria-selected":l?"true":"false",role:"option"},{"data-index":e.index,"data-is-focusable":!0})}):i.createElement(r.CommandButton,{id:c,key:e.key,"data-index":e.index,styles:f,checked:d,className:"ms-ComboBox-option",onClick:n._onItemClick(e),onMouseEnter:n._onOptionMouseEnter.bind(n,e.index),onMouseMove:n._onOptionMouseMove.bind(n,e.index),onMouseLeave:n._onOptionMouseLeave,role:"option","aria-selected":d?"true":"false",ariaLabel:e.ariaLabel,disabled:e.disabled,title:_},i.createElement("span",{className:p.optionTextWrapper,ref:d?n._selectedElement:void 0},s(e,n._onRenderOptionContent)))},data:e.data})},n._onCalloutMouseDown=function(e){e.preventDefault()},n._onScroll=function(){var e;n._isScrollIdle||void 0===n._scrollIdleTimeoutId?n._isScrollIdle=!1:(n._async.clearTimeout(n._scrollIdleTimeoutId),n._scrollIdleTimeoutId=void 0),(null===(e=n.props.calloutProps)||void 0===e?void 0:e.onScroll)&&n.props.calloutProps.onScroll(),n._scrollIdleTimeoutId=n._async.setTimeout(function(){n._isScrollIdle=!0},250)},n._onRenderOptionContent=function(e){var t=D(n._getCurrentOptionStyles(e));return i.createElement("span",{className:t.optionText},e.text)},n._onRenderMultiselectOptionContent=function(e){var t=D(n._getCurrentOptionStyles(e));return i.createElement("span",{id:e.id,"aria-hidden":"true",className:t.optionText},e.text)},n._onDismiss=function(){var e=n.props.onMenuDismiss;e&&e(),n.props.persistMenu&&n._onCalloutLayerMounted(),n._setOpenStateAndFocusOnClose(!1,!1),n._resetSelectedIndex()},n._onAfterClearPendingInfo=function(){n._processingClearPendingInfo=!1},n._onInputKeyDown=function(e){var t=n.props,a=t.disabled,i=t.allowFreeform,o=t.allowFreeInput,s=t.allowParentArrowNavigation,c=t.autoComplete,d=t.hoisted.currentOptions,l=n.state,u=l.isOpen,m=l.currentPendingValueValidIndexOnHover;if(n._lastKeyDownWasAltOrMeta=j(e),a)n._handleInputWhenDisabled(e);else{var _=n._getPendingSelectedIndex(!1);switch(e.which){case r.KeyCodes.enter:n._autofill.current&&n._autofill.current.inputElement&&n._autofill.current.inputElement.select(),n._submitPendingValue(e),n.props.multiSelect&&u?n.setState({currentPendingValueValidIndex:_}):(u||(!i||void 0===n.state.currentPendingValue||null===n.state.currentPendingValue||n.state.currentPendingValue.length<=0)&&n.state.currentPendingValueValidIndex<0)&&n.setState({isOpen:!u});break;case r.KeyCodes.tab:return n.props.multiSelect||n._submitPendingValue(e),void(u&&n._setOpenStateAndFocusOnClose(!u,!1));case r.KeyCodes.escape:if(n._resetSelectedIndex(),!u)return;n.setState({isOpen:!1});break;case r.KeyCodes.up:if(m===p.clearAll&&(_=n.props.hoisted.currentOptions.length),e.altKey||e.metaKey){if(u){n._setOpenStateAndFocusOnClose(!u,!0);break}return}e.preventDefault(),n._setPendingInfoFromIndexAndDirection(_,f.backward);break;case r.KeyCodes.down:e.altKey||e.metaKey?n._setOpenStateAndFocusOnClose(!0,!0):(m===p.clearAll&&(_=-1),e.preventDefault(),n._setPendingInfoFromIndexAndDirection(_,f.forward));break;case r.KeyCodes.home:case r.KeyCodes.end:if(i||o)return;_=-1;var h=f.forward;e.which===r.KeyCodes.end&&(_=d.length,h=f.backward),n._setPendingInfoFromIndexAndDirection(_,h);break;case r.KeyCodes.space:if(!i&&!o&&"off"===c)break;default:if(e.which>=112&&e.which<=123)return;if(e.keyCode===r.KeyCodes.alt||"Meta"===e.key)return;if(s&&(e.keyCode===r.KeyCodes.left||e.keyCode===r.KeyCodes.right))return;if(!i&&!o&&"on"===c){n._onInputChange(e.key);break}return}e.stopPropagation(),e.preventDefault()}},n._onInputKeyUp=function(e){var t=n.props,a=t.disabled,i=t.allowFreeform,o=t.allowFreeInput,s=t.autoComplete,c=n.state.isOpen,d=n._lastKeyDownWasAltOrMeta&&j(e);n._lastKeyDownWasAltOrMeta=!1;var l=d&&!((0,r.isMac)()||(0,r.isIOS)());a?n._handleInputWhenDisabled(e):e.which!==r.KeyCodes.space?l&&c?n._setOpenStateAndFocusOnClose(!c,!0):("focusing"===n.state.focusState&&n.props.openOnKeyboardFocus&&n.setState({isOpen:!0}),"focused"!==n.state.focusState&&n.setState({focusState:"focused"})):i||o||"off"!==s||n._setOpenStateAndFocusOnClose(!c,!!c)},n._onOptionMouseLeave=function(){n._shouldIgnoreMouseEvent()||n.props.persistMenu&&!n.state.isOpen||n.setState({currentPendingValueValidIndexOnHover:p.clearAll})},n._onComboBoxClick=function(){var e=n.props.disabled,t=n.state.isOpen;e||(n._setOpenStateAndFocusOnClose(!t,!1),n.setState({focusState:"focused"}))},n._onAutofillClick=function(){var e=n.props,t=e.disabled;e.allowFreeform&&!t?n.focus(n.state.isOpen||n._processingTouch):n._onComboBoxClick()},n._onTouchStart=function(){n._comboBoxWrapper.current&&!("onpointerdown"in n._comboBoxWrapper)&&n._handleTouchAndPointerEvent()},n._onPointerDown=function(e){"touch"===e.pointerType&&(n._handleTouchAndPointerEvent(),e.preventDefault(),e.stopImmediatePropagation())},(0,r.initializeComponentRef)(n),n._async=new r.Async(n),n._events=new r.EventGroup(n),(0,r.warnMutuallyExclusive)(A,t,{defaultSelectedKey:"selectedKey",text:"defaultSelectedKey",selectedKey:"value",dropdownWidth:"useComboBoxAsMenuWidth",ariaLabel:"label"}),n._id=t.id||(0,r.getId)("ComboBox"),n._isScrollIdle=!0,n._processingTouch=!1,n._gotMouseMove=!1,n._processingClearPendingInfo=!1,n.state={isOpen:!1,focusState:"none",currentPendingValueValidIndex:-1,currentPendingValue:void 0,currentPendingValueValidIndexOnHover:p.default},n}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"selectedOptions",{get:function(){var e=this.props.hoisted,t=e.currentOptions,n=e.selectedIndices;return(0,x.D)(t,n)},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this._comboBoxWrapper.current&&!this.props.disabled&&(this._events.on(this._comboBoxWrapper.current,"focus",this._onResolveOptions,!0),"onpointerdown"in this._comboBoxWrapper.current&&this._events.on(this._comboBoxWrapper.current,"pointerdown",this._onPointerDown,!0))},t.prototype.componentDidUpdate=function(e,t){var n,i,o,s=this,c=this.props,d=c.allowFreeform,l=c.allowFreeInput,u=c.text,f=c.onMenuOpen,p=c.onMenuDismissed,m=c.hoisted,_=m.currentOptions,h=m.selectedIndices,b=this.state,g=b.currentPendingValue,v=b.currentPendingValueValidIndex,y=b.isOpen;!y||t.isOpen&&t.currentPendingValueValidIndex===v||this._async.setTimeout(function(){return s._scrollIntoView()},0);var S=(0,w.HW)(this.context);this._hasFocus()&&(y||t.isOpen&&!y&&this._focusInputAfterClose&&this._autofill.current&&(null==S?void 0:S.activeElement)!==this._autofill.current.inputElement)&&this.focus(void 0,!0),this._focusInputAfterClose&&(t.isOpen&&!y||this._hasFocus()&&(!y&&!this.props.multiSelect&&e.hoisted.selectedIndices&&h&&e.hoisted.selectedIndices[0]!==h[0]||!d&&!l||u!==e.text))&&this._onFocus(),this._notifyPendingValueChanged(t),y&&!t.isOpen&&(this._overrideScrollDismiss=!0,this._async.clearTimeout(this._overrideScrollDimissTimeout),this._overrideScrollDimissTimeout=this._async.setTimeout(function(){s._overrideScrollDismiss=!1},100),null==f||f()),!y&&t.isOpen&&p&&p();var D=v,I=_.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})});!(0,r.shallowCompare)(e.hoisted.currentOptions,_)&&g&&(D=this.props.allowFreeform||this.props.allowFreeInput?this._processInputChangeWithFreeform(g):this._updateAutocompleteIndexWithoutFreeform(g));var x=void 0;y&&this._hasFocus()&&-1!==D?x=null!==(n=I[D].id)&&void 0!==n?n:this._id+"-list"+D:y&&h.length&&(x=null!==(o=null===(i=I[h[0]])||void 0===i?void 0:i.id)&&void 0!==o?o:this._id+"-list"+h[0]),x!==this.state.ariaActiveDescendantValue&&this.setState({ariaActiveDescendantValue:x})},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.render=function(){var e=this._id+"-error",t=this.props,n=t.className,o=t.disabled,s=t.required,c=t.errorMessage,d=t.onRenderContainer,l=void 0===d?this._onRenderContainer:d,u=t.onRenderLabel,f=void 0===u?this._onRenderLabel:u,p=t.onRenderList,m=void 0===p?this._onRenderList:p,_=t.onRenderItem,h=void 0===_?this._onRenderItem:_,b=t.onRenderOption,g=void 0===b?this._onRenderOptionContent:b,v=t.allowFreeform,D=t.styles,I=t.theme,x=t.persistMenu,C=t.multiSelect,O=t.hoisted,w=O.suggestedDisplayValue,E=O.selectedIndices,A=O.currentOptions,L=this.state.isOpen;this._currentVisibleValue=this._getVisibleValue();var k=C?this._getMultiselectDisplayString(E,A,w):void 0,M=(0,r.getNativeProps)(this.props,r.divProperties,["onChange","value","aria-describedby","aria-labelledby"]),P=!!(c&&c.length>0);this._classNames=this.props.getClassNames?this.props.getClassNames(I,!!L,!!o,!!s,!!this._hasFocus(),!!v,!!P,n):S(y(I,D),n,!!L,!!o,!!s,!!this._hasFocus(),!!v,!!P);var T=this._renderComboBoxWrapper(k,e);return i.createElement("div",(0,a.__assign)({},M,{ref:this.props.hoisted.mergedRootRef,className:this._classNames.container}),f({props:this.props,multiselectAccessibleText:k},this._onRenderLabel),T,(x||L)&&l((0,a.__assign)((0,a.__assign)({},this.props),{onRenderList:m,onRenderItem:h,onRenderOption:g,options:A.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})}),onDismiss:this._onDismiss}),this._onRenderContainer),P&&i.createElement("div",{role:"alert",id:e,className:this._classNames.errorMessage},c))},t.prototype._getPendingString=function(e,t,n){return null!=e?e:H(t,n)?B(t[n]):""},t.prototype._getMultiselectDisplayString=function(e,t,n){for(var a=[],i=0;e&&i<e.length;i++){var r=e[i];t[r].itemType!==I.W.SelectAll&&a.push(H(t,r)?t[r].text:F(n))}var o=this.props.multiSelectDelimiter,s=void 0===o?", ":o;return a.join(s)},t.prototype._preventDismissOnScrollOrResize=function(e){var t=this.props.calloutProps;return(null==t?void 0:t.preventDismissOnEvent)?t.preventDismissOnEvent(e):!(!this._overrideScrollDismiss||"scroll"!==e.type&&"resize"!==e.type)},t.prototype._processInputChangeWithFreeform=function(e){var t=this,n=this.props.hoisted.currentOptions,i=-1;if(""===e)return 1===(o=n.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})}).filter(function(t){return R(t)&&!t.disabled&&B(t)===e})).length&&(i=o[0].index),this._setPendingInfo(e,i,e),i;var r=e;e=this._adjustForCaseSensitivity(e);var o,s="";if("on"===this.props.autoComplete){if((o=n.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})}).filter(function(n){return R(n)&&!n.disabled&&0===t._adjustForCaseSensitivity(B(n)).indexOf(e)})).length>0){var c=B(o[0]);s=this._adjustForCaseSensitivity(c)!==e?c:"",i=o[0].index}}else 1===(o=n.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})}).filter(function(n){return R(n)&&!n.disabled&&t._adjustForCaseSensitivity(B(n))===e})).length&&(i=o[0].index);return this._setPendingInfo(r,i,s),i},t.prototype._processInputChangeWithoutFreeform=function(e){var t=this,n=this.state,a=n.currentPendingValue,i=n.currentPendingValueValidIndex;if("on"===this.props.autoComplete&&""!==e){this._autoCompleteTimeout&&(this._async.clearTimeout(this._autoCompleteTimeout),this._autoCompleteTimeout=void 0,e=F(a)+e);var r=this._updateAutocompleteIndexWithoutFreeform(e);return this._autoCompleteTimeout=this._async.setTimeout(function(){t._autoCompleteTimeout=void 0},1e3),r}var o=i>=0?i:this._getFirstSelectedIndex();return this._setPendingInfoFromIndex(o),o},t.prototype._updateAutocompleteIndexWithoutFreeform=function(e){var t=this,n=this.props.hoisted.currentOptions,i=e;e=this._adjustForCaseSensitivity(e);var r=n.map(function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{index:t})}).filter(function(n){return R(n)&&!n.disabled&&0===t._adjustForCaseSensitivity(n.text).indexOf(e)});return r.length>0?(this._setPendingInfo(i,r[0].index,B(r[0])),r[0].index):-1},t.prototype._getFirstSelectedIndex=function(){var e=this.props.hoisted.selectedIndices;return(null==e?void 0:e.length)?e[0]:-1},t.prototype._getNextSelectableIndex=function(e,t){var n=this.props.hoisted.currentOptions,a=e+t;if(!H(n,a=Math.max(0,Math.min(n.length-1,a))))return-1;var i=n[a];if(!N(i)||!0===i.hidden){if(t===f.none||!(a>0&&t<f.none||a>=0&&a<n.length&&t>f.none))return e;a=this._getNextSelectableIndex(a,t)}return a},t.prototype._setSelectedIndex=function(e,t,n){void 0===n&&(n=f.none);var i=this.props,r=i.onChange,o=i.onPendingValueChanged,s=i.hoisted,c=s.selectedIndices,d=s.currentOptions,l=c?c.slice():[],u=d.slice();if(H(d,e=this._getNextSelectableIndex(e,n))){if(this.props.multiSelect||l.length<1||1===l.length&&l[0]!==e){var p=(0,a.__assign)({},d[e]);if(!p||p.disabled)return;if(this.props.multiSelect)if(p.selected=void 0!==p.selected?!p.selected:l.indexOf(e)<0,p.itemType===I.W.SelectAll)l=[],p.selected?d.forEach(function(e,t){!e.disabled&&N(e)&&(l.push(t),u[t]=(0,a.__assign)((0,a.__assign)({},e),{selected:!0}))}):u=d.map(function(e){return(0,a.__assign)((0,a.__assign)({},e),{selected:!1})});else{p.selected&&l.indexOf(e)<0?l.push(e):!p.selected&&l.indexOf(e)>=0&&(l=l.filter(function(t){return t!==e})),u[e]=p;var m=u.filter(function(e){return e.itemType===I.W.SelectAll})[0];if(m){var _=this._isSelectAllChecked(l),h=u.indexOf(m);_?(l.push(h),u[h]=(0,a.__assign)((0,a.__assign)({},m),{selected:!0})):(l=l.filter(function(e){return e!==h}),u[h]=(0,a.__assign)((0,a.__assign)({},m),{selected:!1}))}}else l[0]=e;t.persist(),this.props.selectedKey||null===this.props.selectedKey||(this.props.hoisted.setSelectedIndices(l),this.props.hoisted.setCurrentOptions(u)),this._hasPendingValue&&o&&(o(),this._hasPendingValue=!1),r&&r(t,p,e,B(p))}this.props.multiSelect&&this.state.isOpen||this._clearPendingInfo()}},t.prototype._submitPendingValue=function(e){var t,n=this.props,a=n.onChange,i=n.allowFreeform,o=n.autoComplete,s=n.multiSelect,c=n.hoisted,d=c.currentOptions,l=this.state,u=l.currentPendingValue,f=l.currentPendingValueValidIndex,p=l.currentPendingValueValidIndexOnHover,m=this.props.hoisted.selectedIndices;if(!this._processingClearPendingInfo){if(i){if(null==u)return void(p>=0&&(this._setSelectedIndex(p,e),this._clearPendingInfo()));if(H(d,f)){var _=this._adjustForCaseSensitivity(B(d[f])),h=this._autofill.current,b=this._adjustForCaseSensitivity(u);if(b===_||o&&0===_.indexOf(b)&&(null==h?void 0:h.isValueSelected)&&u.length+(h.selectionEnd-h.selectionStart)===_.length||void 0!==(null===(t=null==h?void 0:h.inputElement)||void 0===t?void 0:t.value)&&this._adjustForCaseSensitivity(h.inputElement.value)===_){if(this._setSelectedIndex(f,e),s&&this.state.isOpen)return;return void this._clearPendingInfo()}}if(a)a&&a(e,void 0,void 0,u);else{var g={key:u||(0,r.getId)(),text:F(u)};s&&(g.selected=!0);var v=d.concat([g]);m&&(s||(m=[]),m.push(v.length-1)),c.setCurrentOptions(v),c.setSelectedIndices(m)}}else f>=0?this._setSelectedIndex(f,e):p>=0&&this._setSelectedIndex(p,e);this._clearPendingInfo()}},t.prototype._onCalloutLayerMounted=function(){this._gotMouseMove=!1},t.prototype._renderSeparator=function(e){var t=e.index,n=e.key;return t&&t>0?i.createElement("div",{role:"presentation",key:n,className:this._classNames.divider}):null},t.prototype._renderHeader=function(e){var t=this.props.onRenderOption,n=void 0===t?this._onRenderOptionContent:t;return i.createElement("div",{id:e.id,key:e.key,className:this._classNames.header},n(e,this._onRenderOptionContent))},t.prototype._renderCheckboxLabel=function(e){var t=this.props.onRenderOption;return(void 0===t?this._onRenderMultiselectOptionContent:t)(e,this._onRenderMultiselectOptionContent)},t.prototype._isOptionHighlighted=function(e){var t=this.state.currentPendingValueValidIndexOnHover;return t!==p.clearAll&&(t>=0?t===e:this._isOptionSelected(e))},t.prototype._isOptionSelected=function(e){return this._getPendingSelectedIndex(!0)===e},t.prototype._isOptionChecked=function(e){return!(!this.props.multiSelect||void 0===e||!this.props.hoisted.selectedIndices)&&this.props.hoisted.selectedIndices.indexOf(e)>=0},t.prototype._isOptionIndeterminate=function(e){var t=this.props,n=t.multiSelect,a=t.hoisted;if(n&&void 0!==e&&a.selectedIndices&&a.currentOptions){var i=a.currentOptions[e];if(i&&i.itemType===I.W.SelectAll)return a.selectedIndices.length>0&&!this._isSelectAllChecked()}return!1},t.prototype._isSelectAllChecked=function(e){var t=this.props,n=t.multiSelect,a=t.hoisted,i=a.currentOptions.find(function(e){return e.itemType===I.W.SelectAll}),r=e||a.selectedIndices;if(!n||!r||!i)return!1;var o=a.currentOptions.indexOf(i),s=r.filter(function(e){return e!==o}),c=a.currentOptions.filter(function(e){return!e.disabled&&e.itemType!==I.W.SelectAll&&N(e)});return s.length===c.length},t.prototype._getPendingSelectedIndex=function(e){var t=this.state,n=t.currentPendingValueValidIndex,a=t.currentPendingValue;return n>=0||e&&null!=a?n:this.props.multiSelect?-1:this._getFirstSelectedIndex()},t.prototype._scrollIntoView=function(){var e=this.props,t=e.onScrollToItem,n=e.scrollSelectedToTop,a=this._getPendingSelectedIndex(!0);if(t)t(a>=0?a:this._getFirstSelectedIndex());else{var i=this._selectedElement.current;if(this.props.multiSelect&&this._comboBoxMenu.current&&(i=M(this._comboBoxMenu.current,function(e){var t;return(null===(t=e.dataset)||void 0===t?void 0:t.index)===a.toString()})),i&&i.offsetParent){var r=!0;if(this._comboBoxMenu.current&&this._comboBoxMenu.current.offsetParent){var o=this._comboBoxMenu.current.offsetParent,s=i.offsetParent,c=s.offsetHeight,d=s.offsetTop,l=o,u=l.offsetHeight,f=l.scrollTop,p=d+c>f+u;d<f||n?(r=!1,o.scrollTo(0,d)):p&&o.scrollTo(0,d-u+c)}else i.offsetParent.scrollIntoView(r)}}},t.prototype._onItemClick=function(e){var t=this,n=this.props.onItemClick,a=e.index;return function(i){t.props.multiSelect||(t._autofill.current&&t._autofill.current.focus(),t.setState({isOpen:!1})),n&&n(i,e,a),t._setSelectedIndex(a,i)}},t.prototype._resetSelectedIndex=function(){var e=this.props.hoisted.currentOptions;this._clearPendingInfo();var t=this._getFirstSelectedIndex();t>0&&t<e.length?this.props.hoisted.setSuggestedDisplayValue(e[t].text):this.props.text&&this.props.hoisted.setSuggestedDisplayValue(this.props.text)},t.prototype._clearPendingInfo=function(){this._processingClearPendingInfo=!0,this.props.hoisted.setSuggestedDisplayValue(void 0),this.setState({currentPendingValue:void 0,currentPendingValueValidIndex:-1,currentPendingValueValidIndexOnHover:p.default},this._onAfterClearPendingInfo)},t.prototype._setPendingInfo=function(e,t,n){void 0===t&&(t=-1),this._processingClearPendingInfo||(this.props.hoisted.setSuggestedDisplayValue(n),this.setState({currentPendingValue:F(e),currentPendingValueValidIndex:t,currentPendingValueValidIndexOnHover:p.default}))},t.prototype._setPendingInfoFromIndex=function(e){var t=this.props.hoisted.currentOptions;if(e>=0&&e<t.length){var n=t[e];this._setPendingInfo(B(n),e,B(n))}else this._clearPendingInfo()},t.prototype._setPendingInfoFromIndexAndDirection=function(e,t){var n=this.props.hoisted.currentOptions;t===f.forward&&e>=n.length-1?e=-1:t===f.backward&&e<=0&&(e=n.length);var a=this._getNextSelectableIndex(e,t);e===a?t===f.forward?e=this._getNextSelectableIndex(-1,t):t===f.backward&&(e=this._getNextSelectableIndex(n.length,t)):e=a,H(n,e)&&this._setPendingInfoFromIndex(e)},t.prototype._notifyPendingValueChanged=function(e){var t=this.props.onPendingValueChanged;if(t){var n=this.props.hoisted.currentOptions,a=this.state,i=a.currentPendingValue,r=a.currentPendingValueValidIndex,o=a.currentPendingValueValidIndexOnHover,s=void 0,c=void 0;o!==e.currentPendingValueValidIndexOnHover&&H(n,o)?s=o:r!==e.currentPendingValueValidIndex&&H(n,r)?s=r:i!==e.currentPendingValue&&(c=i),(void 0!==s||void 0!==c||this._hasPendingValue)&&(t(void 0!==s?n[s]:void 0,s,c),this._hasPendingValue=void 0!==s||void 0!==c)}},t.prototype._setOpenStateAndFocusOnClose=function(e,t){this._focusInputAfterClose=t,this.setState({isOpen:e})},t.prototype._onOptionMouseEnter=function(e){this._shouldIgnoreMouseEvent()||this.setState({currentPendingValueValidIndexOnHover:e})},t.prototype._onOptionMouseMove=function(e){this._gotMouseMove=!0,this._isScrollIdle&&this.state.currentPendingValueValidIndexOnHover!==e&&this.setState({currentPendingValueValidIndexOnHover:e})},t.prototype._shouldIgnoreMouseEvent=function(){return!this._isScrollIdle||!this._gotMouseMove},t.prototype._handleInputWhenDisabled=function(e){this.props.disabled&&(this.state.isOpen&&this.setState({isOpen:!1}),null!==e&&e.which!==r.KeyCodes.tab&&e.which!==r.KeyCodes.escape&&(e.which<112||e.which>123)&&(e.stopPropagation(),e.preventDefault()))},t.prototype._handleTouchAndPointerEvent=function(){var e=this;void 0!==this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){e._processingTouch=!1,e._lastTouchTimeoutId=void 0},500)},t.prototype._getCaretButtonStyles=function(){var e=this.props.caretDownButtonStyles;return v(this.props.theme,e)},t.prototype._getCurrentOptionStyles=function(e){var t,n=this.props.comboBoxOptionStyles,a=e.styles,i=g(this.props.theme,n,a,this._isPendingOption(e),e.hidden,this._isOptionHighlighted(e.index));return i.__shadowConfig__=null===(t=this.props.styles)||void 0===t?void 0:t.__shadowConfig__,i},t.prototype._getAriaAutoCompleteValue=function(){return this.props.disabled||"on"!==this.props.autoComplete?"list":this.props.allowFreeform?"inline":"both"},t.prototype._isPendingOption=function(e){return e&&e.index===this.state.currentPendingValueValidIndex},t.prototype._hasFocus=function(){return"none"!==this.state.focusState},t.prototype._adjustForCaseSensitivity=function(e){return this.props.caseSensitive?e:e.toLowerCase()},t.contextType=o.Z0,(0,a.__decorate)([(0,r.customizable)("ComboBox",["theme","styles"],!0)],t)}(i.Component);function T(e,t){if(!e||!t)return[];var n={};e.forEach(function(e,t){e.selected&&(n[t]=!0)});for(var a=function(t){var a=(0,r.findIndex)(e,function(e){return e.key===t});a>-1&&(n[a]=!0)},i=0,o=t;i<o.length;i++)a(o[i]);return Object.keys(n).map(Number).sort()}function U(e){return void 0===e?[]:e instanceof Array?e:[e]}function F(e){return e||""}function H(e,t){return!!e&&t>=0&&t<e.length}function R(e){return e.itemType!==I.W.Header&&e.itemType!==I.W.Divider&&e.itemType!==I.W.SelectAll}function N(e){return e.itemType!==I.W.Header&&e.itemType!==I.W.Divider}function B(e){return e.useAriaLabelAsText&&e.ariaLabel?e.ariaLabel:e.text}function j(e){return e.which===r.KeyCodes.alt||"Meta"===e.key}}
,144:(e,t,n)=>{"use strict";n.d(t,{l:()=>R});var a=n(2141),i=n(280),r=n(5959),o=n(3443),s=a.AnimationVariables.durationValue2,c={root:"ms-Modal",main:"ms-Dialog-main",scrollableContent:"ms-Modal-scrollableContent",isOpen:"is-open",layer:"ms-Modal-Layer"},d=n(1873),l=n(602),u=n(8214),f=(0,a.memoizeFunction)(function(e,t){return{root:(0,a.mergeStyles)(e,t&&{touchAction:"none",selectors:{"& *":{userSelect:"none"}}})}}),p=n(9248),m=n(5944),_={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"},b=function(e){function t(t){var n=e.call(this,t)||this;return n._currentEventType=h,n._events=[],n._onMouseDown=function(e){var t=r.Children.only(n.props.children).props.onMouseDown;return t&&t(e),n._currentEventType=h,n._onDragStart(e)},n._onMouseUp=function(e){var t=r.Children.only(n.props.children).props.onMouseUp;return t&&t(e),n._currentEventType=h,n._onDragStop(e)},n._onTouchStart=function(e){var t=r.Children.only(n.props.children).props.onTouchStart;return t&&t(e),n._currentEventType=_,n._onDragStart(e)},n._onTouchEnd=function(e){var t=r.Children.only(n.props.children).props.onTouchEnd;t&&t(e),n._currentEventType=_,n._onDragStop(e)},n._onDragStart=function(e){if("number"==typeof e.button&&0!==e.button)return!1;if(!(n.props.handleSelector&&!n._matchesSelector(e.target,n.props.handleSelector)||n.props.preventDragSelector&&n._matchesSelector(e.target,n.props.preventDragSelector))){n._touchId=n._getTouchId(e);var t=n._getControlPosition(e);if(void 0!==t){var i=n._createDragDataFromPosition(t);n.props.onStart&&n.props.onStart(e,i),n.setState({isDragging:!0,lastPosition:t});var r=(0,m.HW)(n.context);n._events=[(0,a.on)(r.body,n._currentEventType.move,n._onDrag,!0),(0,a.on)(r.body,n._currentEventType.stop,n._onDragStop,!0)]}}},n._onDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=n._getControlPosition(e);if(t){var a=n._createUpdatedDragData(n._createDragDataFromPosition(t)),i=a.position;n.props.onDragChange&&n.props.onDragChange(e,a),n.setState({position:i,lastPosition:t})}},n._onDragStop=function(e){if(n.state.isDragging){var t=n._getControlPosition(e);if(t){var a=n._createDragDataFromPosition(t);n.setState({isDragging:!1,lastPosition:void 0}),n.props.onStop&&n.props.onStop(e,a),n.props.position&&n.setState({position:n.props.position}),n._events.forEach(function(e){return e()})}}},n.state={isDragging:!1,position:n.props.position||{x:0,y:0},lastPosition:void 0},n}return(0,i.__extends)(t,e),t.prototype.componentDidUpdate=function(e){!this.props.position||e.position&&this.props.position===e.position||this.setState({position:this.props.position})},t.prototype.componentWillUnmount=function(){this._events.forEach(function(e){return e()})},t.prototype.render=function(){var e=r.Children.only(this.props.children),t=e.props,n=this.props.position,a=this.state,o=a.position,s=a.isDragging,c=o.x,d=o.y;return n&&!s&&(c=n.x,d=n.y),r.cloneElement(e,{style:(0,i.__assign)((0,i.__assign)({},t.style),{transform:"translate(".concat(c,"px, ").concat(d,"px)")}),className:f(t.className,this.state.isDragging).root,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onTouchStart,onTouchEnd:this._onTouchEnd})},t.prototype._getControlPosition=function(e){var t=this._getActiveTouch(e);if(void 0===this._touchId||t){var n=t||e;return{x:n.clientX,y:n.clientY}}},t.prototype._getActiveTouch=function(e){return e.targetTouches&&this._findTouchInTouchList(e.targetTouches)||e.changedTouches&&this._findTouchInTouchList(e.changedTouches)},t.prototype._getTouchId=function(e){var t=e.targetTouches&&e.targetTouches[0]||e.changedTouches&&e.changedTouches[0];if(t)return t.identifier},t.prototype._matchesSelector=function(e,t){var n;if(!e||e===(null===(n=(0,m.HW)(this.context))||void 0===n?void 0:n.body))return!1;var a=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return!!a&&(a.call(e,t)||this._matchesSelector(e.parentElement,t))},t.prototype._findTouchInTouchList=function(e){if(void 0!==this._touchId)for(var t=0;t<e.length;t++)if(e[t].identifier===this._touchId)return e[t]},t.prototype._createDragDataFromPosition=function(e){var t=this.state.lastPosition;return void 0===t?{delta:{x:0,y:0},lastPosition:e,position:e}:{delta:{x:e.x-t.x,y:e.y-t.y},lastPosition:t,position:e}},t.prototype._createUpdatedDragData=function(e){var t=this.state.position;return{position:{x:t.x+e.delta.x,y:t.y+e.delta.y},delta:e.delta,lastPosition:t}},t.contextType=p.Z0,t}(r.Component),g=n(7195),v=n(7864),y=n(386),S=n(6078),D={x:0,y:0},I={isOpen:!1,isDarkOverlay:!0,className:"",containerClassName:"",enableAriaHiddenSiblings:!0},x=(0,a.classNamesFunction)(),C=r.forwardRef(function(e,t){var n,o,c,f,m,_,h,C=(0,a.getPropsWithDefaults)(I,e),O=C.allowTouchBodyScroll,w=C.className,E=C.children,A=C.containerClassName,L=C.scrollableContentClassName,k=C.elementToFocusOnDismiss,M=C.firstFocusableSelector,P=C.focusTrapZoneProps,T=C.forceFocusInsideTrap,U=C.disableRestoreFocus,F=void 0===U?C.ignoreExternalFocusing:U,H=C.isBlocking,R=C.isAlert,N=C.isClickableOutsideFocusTrap,B=C.isDarkOverlay,j=C.onDismiss,V=C.layerProps,z=C.overlay,G=C.isOpen,K=C.titleAriaId,W=C.styles,q=C.subtitleAriaId,Q=C.theme,Y=C.topOffsetFixed,J=C.responsiveMode,X=C.onLayerDidMount,Z=C.isModeless,$=C.dragOptions,ee=C.onDismissed,te=C.enableAriaHiddenSiblings,ne=C.popupProps,ae=r.useRef(null),ie=r.useRef(null),re=(0,g.a)(ie,null==P?void 0:P.componentRef),oe=r.useRef(null),se=(0,g.a)(ae,t),ce=(0,l.useResponsiveMode)(se),de=(0,v.B)("ModalFocusTrapZone",null==P?void 0:P.id),le=(0,p.mx)(),ue=(0,y.j)(),fe=ue.setTimeout,pe=ue.clearTimeout,me=r.useState(G),_e=me[0],he=me[1],be=r.useState(G),ge=be[0],ve=be[1],ye=r.useState(D),Se=ye[0],De=ye[1],Ie=r.useState(),xe=Ie[0],Ce=Ie[1],Oe=function(e){var t=r.useState(!1),n=t[0],a=t[1];return[n,{setTrue:(0,S.d)(function(){return function(){a(!0)}}),setFalse:(0,S.d)(function(){return function(){a(!1)}}),toggle:(0,S.d)(function(){return function(){a(function(e){return!e})}})}]}(),we=Oe[0],Ee=Oe[1],Ae=Ee.toggle,Le=Ee.setFalse,ke=(0,S.d)(function(){return{onModalCloseTimer:0,allowTouchBodyScroll:O,scrollableContent:null,lastSetCoordinates:D,events:new a.EventGroup({})}}),Me=($||{}).keepInBounds,Pe=null!=R?R:H&&!Z,Te=void 0===V?"":V.className,Ue=x(W,{theme:Q,className:w,containerClassName:A,scrollableContentClassName:L,isOpen:G,isVisible:ge,hasBeenOpened:ke.hasBeenOpened,modalRectangleTop:xe,topOffsetFixed:Y,isModeless:Z,layerClassName:Te,windowInnerHeight:null==le?void 0:le.innerHeight,isDefaultDragHandle:$&&!$.dragHandleSelector}),Fe=(0,i.__assign)((0,i.__assign)({eventBubblingEnabled:!1},V),{onLayerDidMount:V&&V.onLayerDidMount?V.onLayerDidMount:X,insertFirst:(null==V?void 0:V.insertFirst)||Z,className:Ue.layer}),He=r.useCallback(function(e){e?ke.allowTouchBodyScroll?(0,a.allowOverscrollOnElement)(e,ke.events):(0,a.allowScrollOnElement)(e,ke.events):ke.events.off(ke.scrollableContent),ke.scrollableContent=e},[ke]),Re=function(){var e=oe.current,t=null==e?void 0:e.getBoundingClientRect();t&&(Y&&Ce(t.top),Me&&(ke.minPosition={x:-t.left,y:-t.top},ke.maxPosition={x:t.left,y:t.top}))},Ne=r.useCallback(function(e,t){var n=ke.minPosition,a=ke.maxPosition;return Me&&n&&a&&(t=Math.max(n[e],t),t=Math.min(a[e],t)),t},[Me,ke]),Be=function(){var e;ke.lastSetCoordinates=D,Le(),ke.isInKeyboardMoveMode=!1,he(!1),De(D),null===(e=ke.disposeOnKeyUp)||void 0===e||e.call(ke),null==ee||ee()},je=r.useCallback(function(){Le(),ke.isInKeyboardMoveMode=!1},[ke,Le]),Ve=r.useCallback(function(e,t){De(function(e){return{x:Ne("x",e.x+t.delta.x),y:Ne("y",e.y+t.delta.y)}})},[Ne]),ze=r.useCallback(function(){ie.current&&ie.current.focus()},[]);r.useEffect(function(){var e;pe(ke.onModalCloseTimer),G&&(requestAnimationFrame(function(){return fe(Re,0)}),he(!0),$&&(e=function(e){e.altKey&&e.ctrlKey&&e.keyCode===a.KeyCodes.space&&(0,a.elementContains)(ke.scrollableContent,e.target)&&(Ae(),e.preventDefault(),e.stopPropagation())},ke.disposeOnKeyUp||(ke.events.on(le,"keyup",e,!0),ke.disposeOnKeyUp=function(){ke.events.off(le,"keyup",e,!0),ke.disposeOnKeyUp=void 0})),ke.hasBeenOpened=!0,ve(!0)),!G&&_e&&(ke.onModalCloseTimer=fe(Be,1e3*parseFloat(s)),ve(!1))},[_e,G]),_=function(){ke.events.dispose(),ke.onModalCloseTimer&&(pe(ke.onModalCloseTimer),ke.onModalCloseTimer=0)},(h=r.useRef(_)).current=_,r.useEffect(function(){return function(){var e;null===(e=h.current)||void 0===e||e.call(h)}},[]),function(e,t){r.useImperativeHandle(e.componentRef,function(){return{focus:function(){t.current&&t.current.focus()}}},[t])}(C,ie);var Ge=r.createElement(a.FocusTrapZone,(0,i.__assign)({},P,{id:de,ref:oe,componentRef:re,className:(0,a.css)(Ue.main,null==P?void 0:P.className),elementToFocusOnDismiss:null!==(n=null==P?void 0:P.elementToFocusOnDismiss)&&void 0!==n?n:k,isClickableOutsideFocusTrap:null!==(o=null==P?void 0:P.isClickableOutsideFocusTrap)&&void 0!==o?o:Z||N||!H,disableRestoreFocus:null!==(c=null==P?void 0:P.disableRestoreFocus)&&void 0!==c?c:F,forceFocusInsideTrap:(null!==(f=null==P?void 0:P.forceFocusInsideTrap)&&void 0!==f?f:T)&&!Z,firstFocusableSelector:(null==P?void 0:P.firstFocusableSelector)||M,focusPreviouslyFocusedInnerElement:null===(m=null==P?void 0:P.focusPreviouslyFocusedInnerElement)||void 0===m||m,onBlur:ke.isInKeyboardMoveMode?function(e){var t,n;null===(t=null==P?void 0:P.onBlur)||void 0===t||t.call(P,e),ke.lastSetCoordinates=D,ke.isInKeyboardMoveMode=!1,null===(n=ke.disposeOnKeyDown)||void 0===n||n.call(ke)}:void 0}),$&&ke.isInKeyboardMoveMode&&r.createElement("div",{className:Ue.keyboardMoveIconContainer},$.keyboardMoveIconProps?r.createElement(u.Icon,(0,i.__assign)({},$.keyboardMoveIconProps)):r.createElement(u.Icon,{iconName:"move",className:Ue.keyboardMoveIcon})),r.createElement("div",{ref:He,className:Ue.scrollableContent,"data-is-scrollable":!0},$&&we&&r.createElement($.menu,{items:[{key:"move",text:$.moveMenuItemText,onClick:function(){var e=function(e){if(e.altKey&&e.ctrlKey&&e.keyCode===a.KeyCodes.space)return e.preventDefault(),void e.stopPropagation();var t=e.altKey||e.keyCode===a.KeyCodes.escape;if(we&&t&&Le(),!ke.isInKeyboardMoveMode||e.keyCode!==a.KeyCodes.escape&&e.keyCode!==a.KeyCodes.enter||(ke.isInKeyboardMoveMode=!1,e.preventDefault(),e.stopPropagation()),ke.isInKeyboardMoveMode){var n=!0,i=function(e){var t=10;return e.shiftKey?e.ctrlKey||(t=50):e.ctrlKey&&(t=1),t}(e);switch(e.keyCode){case a.KeyCodes.escape:De(ke.lastSetCoordinates);case a.KeyCodes.enter:ke.lastSetCoordinates=D;break;case a.KeyCodes.up:De(function(e){return{x:e.x,y:Ne("y",e.y-i)}});break;case a.KeyCodes.down:De(function(e){return{x:e.x,y:Ne("y",e.y+i)}});break;case a.KeyCodes.left:De(function(e){return{x:Ne("x",e.x-i),y:e.y}});break;case a.KeyCodes.right:De(function(e){return{x:Ne("x",e.x+i),y:e.y}});break;default:n=!1}n&&(e.preventDefault(),e.stopPropagation())}};ke.lastSetCoordinates=Se,Le(),ke.isInKeyboardMoveMode=!0,ke.events.on(le,"keydown",e,!0),ke.disposeOnKeyDown=function(){ke.events.off(le,"keydown",e,!0),ke.disposeOnKeyDown=void 0}}},{key:"close",text:$.closeMenuItemText,onClick:Be}],onDismiss:Le,alignTargetEdge:!0,coverTarget:!0,directionalHint:a.DirectionalHint.topLeftEdge,directionalHintFixed:!0,shouldFocusOnMount:!0,target:ke.scrollableContent}),E));return _e&&ce>=(J||l.ResponsiveMode.small)&&r.createElement(a.Layer,(0,i.__assign)({ref:se},Fe),r.createElement(d.Popup,(0,i.__assign)({role:Pe?"alertdialog":"dialog",ariaLabelledBy:K,ariaDescribedBy:q,onDismiss:j,shouldRestoreFocus:!F,enableAriaHiddenSiblings:te,"aria-modal":!Z},ne),r.createElement("div",{className:Ue.root,role:Z?void 0:"document"},!Z&&r.createElement(a.Overlay,(0,i.__assign)({"aria-hidden":!0,isDarkThemed:B,onClick:H?void 0:j,allowTouchBodyScroll:O},z)),$?r.createElement(b,{handleSelector:$.dragHandleSelector||"#".concat(de),preventDragSelector:"button",onStart:je,onDragChange:Ve,onStop:ze,position:Se},Ge):Ge)))||null});C.displayName="Modal";var O=(0,a.styled)(C,function(e){var t,n=e.className,i=e.containerClassName,r=e.scrollableContentClassName,o=e.isOpen,d=e.isVisible,l=e.hasBeenOpened,u=e.modalRectangleTop,f=e.theme,p=e.topOffsetFixed,m=e.isModeless,_=e.layerClassName,h=e.isDefaultDragHandle,b=e.windowInnerHeight,g=f.palette,v=f.effects,y=f.fonts,S=(0,a.getGlobalClassNames)(c,f);return{root:[S.root,y.medium,{backgroundColor:"transparent",position:"fixed",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity ".concat(s)},p&&"number"==typeof u&&l&&{alignItems:"flex-start"},o&&S.isOpen,d&&{opacity:1},d&&!m&&{pointerEvents:"auto"},n],main:[S.main,{boxShadow:v.elevation64,borderRadius:v.roundedCorner2,backgroundColor:g.white,boxSizing:"border-box",position:"relative",textAlign:"left",outline:"3px solid transparent",maxHeight:"calc(100% - 32px)",maxWidth:"calc(100% - 32px)",minHeight:"176px",minWidth:"288px",overflowY:"auto",zIndex:m?a.ZIndexes.Layer:void 0},m&&{pointerEvents:"auto"},p&&"number"==typeof u&&l&&{top:u},h&&{cursor:"move"},i],scrollableContent:[S.scrollableContent,{overflowY:"auto",flexGrow:1,maxHeight:"100vh",selectors:(t={},t["@supports (-webkit-overflow-scrolling: touch)"]={maxHeight:b},t)},r],layer:m&&[_,S.layer,{pointerEvents:"none"}],keyboardMoveIconContainer:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",padding:"3px 0px"},keyboardMoveIcon:{fontSize:y.xLargePlus.fontSize,width:"24px"}}},void 0,{scope:"Modal",fields:["theme","styles","enableAriaHiddenSiblings"]});O.displayName="Modal";var w=n(2313),E=(0,a.classNamesFunction)(),A=r.createElement(w.E,null).type,L=function(e){function t(t){var n=e.call(this,t)||this;return(0,a.initializeComponentRef)(n),(0,a.warnDeprecations)("DialogContent",t,{titleId:"titleProps.id"}),n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.showCloseButton,s=t.className,c=t.closeButtonAriaLabel,d=t.onDismiss,l=t.subTextId,u=t.subText,f=t.titleProps,p=void 0===f?{}:f,m=t.titleId,_=t.title,h=t.type,b=t.styles,g=t.theme,v=t.draggableHeaderClassName,y=E(b,{theme:g,className:s,isLargeHeader:h===o.h.largeHeader,isClose:h===o.h.close,draggableHeaderClassName:v}),S=this._groupChildren();return u&&(e=r.createElement("p",{className:y.subText,id:l},u)),r.createElement("div",{className:y.content},r.createElement("div",{className:y.header},r.createElement("div",(0,i.__assign)({id:m,role:"heading","aria-level":1},p,{className:(0,a.css)(y.title,p.className)}),_),r.createElement("div",{className:y.topButton},this.props.topButtonsProps.map(function(e,t){return r.createElement(a.IconButton,(0,i.__assign)({key:e.uniqueId||t},e))}),(h===o.h.close||n&&h!==o.h.largeHeader)&&r.createElement(a.IconButton,{className:y.button,iconProps:{iconName:"Cancel"},ariaLabel:c,onClick:d}))),r.createElement("div",{className:y.inner},r.createElement("div",{className:y.innerContent},e,S.contents),S.footers))},t.prototype._groupChildren=function(){var e={footers:[],contents:[]};return r.Children.map(this.props.children,function(t){"object"==typeof t&&null!==t&&t.type===A?e.footers.push(t):e.contents.push(t)}),e},t.defaultProps={showCloseButton:!1,className:"",topButtonsProps:[],closeButtonAriaLabel:"Close"},(0,i.__decorate)([l.withResponsiveMode],t)}(r.Component),k={contentLgHeader:"ms-Dialog-lgHeader",close:"ms-Dialog--close",subText:"ms-Dialog-subText",header:"ms-Dialog-header",headerLg:"ms-Dialog--lgHeader",button:"ms-Dialog-button ms-Dialog-button--close",inner:"ms-Dialog-inner",content:"ms-Dialog-content",title:"ms-Dialog-title"},M=(0,a.styled)(L,function(e){var t,n,i,r=e.className,o=e.theme,s=e.isLargeHeader,c=e.isClose,d=e.hidden,l=e.isMultiline,u=e.draggableHeaderClassName,f=o.palette,p=o.fonts,m=o.effects,_=o.semanticColors,h=(0,a.getGlobalClassNames)(k,o);return{content:[s&&[h.contentLgHeader,{borderTop:"4px solid ".concat(f.themePrimary)}],c&&h.close,{flexGrow:1,overflowY:"hidden"},r],subText:[h.subText,p.medium,{margin:"0 0 24px 0",color:_.bodySubtext,lineHeight:"1.5",wordWrap:"break-word",fontWeight:a.FontWeights.regular}],header:[h.header,{position:"relative",width:"100%",boxSizing:"border-box"},c&&h.close,u&&[u,{cursor:"move"}]],button:[h.button,d&&{selectors:{".ms-Icon.ms-Icon--Cancel":{color:_.buttonText,fontSize:a.IconFontSizes.medium}}}],inner:[h.inner,{padding:"0 24px 24px",selectors:(t={},t["@media (min-width: ".concat(a.ScreenWidthMinSmall,"px) and (max-width: ").concat(a.ScreenWidthMaxSmall,"px)")]={padding:"0 16px 16px"},t)}],innerContent:[h.content,{position:"relative",width:"100%"}],title:[h.title,p.xLarge,{color:_.bodyText,margin:"0",minHeight:p.xLarge.fontSize,padding:"16px 46px 20px 24px",lineHeight:"normal",selectors:(n={},n["@media (min-width: ".concat(a.ScreenWidthMinSmall,"px) and (max-width: ").concat(a.ScreenWidthMaxSmall,"px)")]={padding:"16px 46px 16px 16px"},n)},s&&{color:_.menuHeader},l&&{fontSize:p.xxLarge.fontSize}],topButton:[{display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"absolute",top:"0",right:"0",padding:"15px 15px 0 0",selectors:(i={"> *":{flex:"0 0 auto"},".ms-Dialog-button":{color:_.buttonText},".ms-Dialog-button:hover":{color:_.buttonTextHovered,borderRadius:m.roundedCorner2}},i["@media (min-width: ".concat(a.ScreenWidthMinSmall,"px) and (max-width: ").concat(a.ScreenWidthMaxSmall,"px)")]={padding:"15px 8px 0 0"},i)}]}},void 0,{scope:"DialogContent"});M.displayName="DialogContent";var P=(0,a.classNamesFunction)(),T={isDarkOverlay:!1,isBlocking:!1,className:"",containerClassName:"",topOffsetFixed:!1,enableAriaHiddenSiblings:!0},U={type:o.h.normal,className:"",topButtonsProps:[]},F=function(e){function t(t){var n=e.call(this,t)||this;return n._getSubTextId=function(){var e=n.props,t=e.ariaDescribedById,a=e.modalProps,i=e.dialogContentProps,r=e.subText,o=a&&a.subtitleAriaId||t;return o||(o=(i&&i.subText||r)&&n._defaultSubTextId),o},n._getTitleTextId=function(){var e=n.props,t=e.ariaLabelledById,a=e.modalProps,i=e.dialogContentProps,r=e.title,o=a&&a.titleAriaId||t;return o||(o=(i&&i.title||r)&&n._defaultTitleTextId),o},n._id=(0,a.getId)("Dialog"),n._defaultTitleTextId=n._id+"-title",n._defaultSubTextId=n._id+"-subText",n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e,t,n,a,o,s=this.props,c=s.className,d=s.containerClassName,l=s.contentClassName,u=s.elementToFocusOnDismiss,f=s.firstFocusableSelector,p=s.forceFocusInsideTrap,m=s.styles,_=s.hidden,h=s.disableRestoreFocus,b=void 0===h?s.ignoreExternalFocusing:h,g=s.isBlocking,v=s.isClickableOutsideFocusTrap,y=s.isDarkOverlay,S=s.isOpen,D=void 0===S?!_:S,I=s.onDismiss,x=s.onDismissed,C=s.onLayerDidMount,w=s.responsiveMode,E=s.subText,A=s.theme,L=s.title,k=s.topButtonsProps,F=s.type,H=s.minWidth,R=s.maxWidth,N=s.modalProps,B=(0,i.__assign)({onLayerDidMount:C},null==N?void 0:N.layerProps);(null==N?void 0:N.dragOptions)&&!(null===(e=N.dragOptions)||void 0===e?void 0:e.dragHandleSelector)&&(a="ms-Dialog-draggable-header",(o=(0,i.__assign)({},N.dragOptions)).dragHandleSelector=".".concat(a));var j=(0,i.__assign)((0,i.__assign)((0,i.__assign)((0,i.__assign)({},T),{elementToFocusOnDismiss:u,firstFocusableSelector:f,forceFocusInsideTrap:p,disableRestoreFocus:b,isClickableOutsideFocusTrap:v,responsiveMode:w,className:c,containerClassName:d,isBlocking:g,isDarkOverlay:y,onDismissed:x}),N),{dragOptions:o,layerProps:B,isOpen:D}),V=(0,i.__assign)((0,i.__assign)((0,i.__assign)({className:l,subText:E,title:L,topButtonsProps:k,type:F},U),s.dialogContentProps),{draggableHeaderClassName:a,titleProps:(0,i.__assign)({id:(null===(t=s.dialogContentProps)||void 0===t?void 0:t.titleId)||this._defaultTitleTextId},null===(n=s.dialogContentProps)||void 0===n?void 0:n.titleProps)}),z=P(m,{theme:A,className:j.className,containerClassName:j.containerClassName,hidden:_,dialogDefaultMinWidth:H,dialogDefaultMaxWidth:R});return r.createElement(O,(0,i.__assign)({},j,{className:z.root,containerClassName:z.main,onDismiss:I||j.onDismiss,subtitleAriaId:this._getSubTextId(),titleAriaId:this._getTitleTextId()}),r.createElement(M,(0,i.__assign)({subTextId:this._defaultSubTextId,showCloseButton:j.isBlocking,onDismiss:I},V),s.children))},t.defaultProps={hidden:!0},(0,i.__decorate)([l.withResponsiveMode],t)}(r.Component),H={root:"ms-Dialog"},R=(0,a.styled)(F,function(e){var t,n=e.className,i=e.containerClassName,r=e.dialogDefaultMinWidth,o=void 0===r?"288px":r,s=e.dialogDefaultMaxWidth,c=void 0===s?"340px":s,d=e.hidden,l=e.theme;return{root:[(0,a.getGlobalClassNames)(H,l).root,l.fonts.medium,n],main:[{width:o,outline:"3px solid transparent",selectors:(t={},t["@media (min-width: ".concat(a.ScreenWidthMinMedium,"px)")]={width:"auto",maxWidth:c,minWidth:o},t)},!d&&{display:"flex"},i]}},void 0,{scope:"Dialog"});R.displayName="Dialog"}
,3443:(e,t,n)=>{"use strict";var a;n.d(t,{h:()=>a}),function(e){e[e.normal=0]="normal",e[e.largeHeader=1]="largeHeader",e[e.close=2]="close"}(a||(a={}))}
,2313:(e,t,n)=>{"use strict";n.d(t,{E:()=>d});var a=n(2141),i=n(280),r=n(5959),o=(0,a.classNamesFunction)(),s=function(e){function t(t){var n=e.call(this,t)||this;return(0,a.initializeComponentRef)(n),n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.styles,a=e.theme;return this._classNames=o(n,{theme:a,className:t}),r.createElement("div",{className:this._classNames.actions},r.createElement("div",{className:this._classNames.actionsRight},this._renderChildrenAsActions()))},t.prototype._renderChildrenAsActions=function(){var e=this;return r.Children.map(this.props.children,function(t){return t?r.createElement("span",{className:e._classNames.action},t):null})},t}(r.Component),c={actions:"ms-Dialog-actions",action:"ms-Dialog-action",actionsRight:"ms-Dialog-actionsRight"},d=(0,a.styled)(s,function(e){var t=e.className,n=e.theme,i=(0,a.getGlobalClassNames)(c,n);return{actions:[i.actions,{position:"relative",width:"100%",minHeight:"24px",lineHeight:"24px",margin:"16px 0 0",fontSize:"0",selectors:{".ms-Button":{lineHeight:"normal",verticalAlign:"middle"}}},t],action:[i.action,{margin:"0 4px"}],actionsRight:[i.actionsRight,{alignItems:"center",display:"flex",fontSize:"0",justifyContent:"flex-end",marginRight:"-4px"}]}},void 0,{scope:"DialogFooter"});d.displayName="DialogFooter"}
,374:(e,t,n)=>{"use strict";n.d(t,{m:()=>Z});var a,i=n(2141),r=n(280),o=n(5959),s=n(2912),c=function(){function e(){this._size=0}return e.prototype.updateOptions=function(e){for(var t=[],n=[],a=0,i=0;i<e.length;i++){var o=e[i],c=o.itemType,d=o.hidden;c===s.W.Divider||c===s.W.Header?(t.push(i),n.push(i)):d?n.push(i):a++}this._size=a,this._displayOnlyOptionsCache=t,this._notSelectableOptionsCache=n,this._cachedOptions=(0,r.__spreadArray)([],e,!0)},Object.defineProperty(e.prototype,"optionSetSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedOptions",{get:function(){return this._cachedOptions},enumerable:!1,configurable:!0}),e.prototype.positionInSet=function(e){if(void 0!==e){for(var t=0;e>this._notSelectableOptionsCache[t];)t++;if(this._displayOnlyOptionsCache[t]===e)throw new Error("Unexpected: Option at index ".concat(e," is not a selectable element."));if(this._notSelectableOptionsCache[t]!==e)return e-t+1}},e}(),d=n(8214),l=n(1873);!function(e){e[e.smallFluid=0]="smallFluid",e[e.smallFixedFar=1]="smallFixedFar",e[e.smallFixedNear=2]="smallFixedNear",e[e.medium=3]="medium",e[e.large=4]="large",e[e.largeFixed=5]="largeFixed",e[e.extraLarge=6]="extraLarge",e[e.custom=7]="custom",e[e.customNear=8]="customNear"}(a||(a={}));var u,f=n(9248),p=n(5944),m=(0,i.classNamesFunction)();!function(e){e[e.closed=0]="closed",e[e.animatingOpen=1]="animatingOpen",e[e.open=2]="open",e[e.animatingClosed=3]="animatingClosed"}(u||(u={}));var _,h,b,g,v,y=function(e){function t(t){var n=e.call(this,t)||this;n._panel=o.createRef(),n._animationCallback=null,n._hasCustomNavigation=!(!n.props.onRenderNavigation&&!n.props.onRenderNavigationContent),n.dismiss=function(e){n.props.onDismiss&&n.isActive&&n.props.onDismiss(e),(!e||e&&!e.defaultPrevented)&&n.close()},n._allowScrollOnPanel=function(e){var t;n._resizeObserver=n._createResizeObserver(function(t){t.length>0&&t[0].target===e&&n._updateFooterPosition()}),e?(null===(t=n._resizeObserver)||void 0===t||t.observe(e),n._allowTouchBodyScroll?(0,i.allowOverscrollOnElement)(e,n._events):(0,i.allowScrollOnElement)(e,n._events)):n._events.off(n._scrollableContent),n._scrollableContent=e},n._onRenderNavigation=function(e){if(!n.props.onRenderNavigationContent&&!n.props.onRenderNavigation&&!n.props.hasCloseButton)return null;var t=n.props.onRenderNavigationContent,a=void 0===t?n._onRenderNavigationContent:t;return o.createElement("div",{className:n._classNames.navigation},a(e,n._onRenderNavigationContent))},n._onRenderNavigationContent=function(e){var t,a=e.closeButtonAriaLabel,r=e.hasCloseButton,s=e.onRenderHeader,c=void 0===s?n._onRenderHeader:s;if(r){var d=null===(t=n._classNames.subComponentStyles)||void 0===t?void 0:t.closeButton();return o.createElement(o.Fragment,null,!n._hasCustomNavigation&&c(n.props,n._onRenderHeader,n._headerTextId),o.createElement(i.IconButton,{styles:d,className:n._classNames.closeButton,onClick:n._onPanelClick,ariaLabel:a,title:a,"data-is-visible":!0,iconProps:{iconName:"Cancel"}}))}return null},n._onRenderHeader=function(e,t,a){var s=e.headerText,c=e.headerTextProps,d=void 0===c?{}:c;return s?o.createElement("div",{className:n._classNames.header},o.createElement("div",(0,r.__assign)({id:a,role:"heading","aria-level":1},d,{className:(0,i.css)(n._classNames.headerText,d.className)}),s)):null},n._onRenderBody=function(e){return o.createElement("div",{className:n._classNames.content},e.children)},n._onRenderFooter=function(e){var t=n.props.onRenderFooterContent,a=void 0===t?null:t;return a?o.createElement("div",{className:n._classNames.footer},o.createElement("div",{className:n._classNames.footerInner},a())):null},n._animateTo=function(e){e===u.open&&n.props.onOpen&&n.props.onOpen(),n._animationCallback=n._async.setTimeout(function(){n.setState({visibility:e}),n._onTransitionComplete(e)},200)},n._clearExistingAnimationTimer=function(){null!==n._animationCallback&&n._async.clearTimeout(n._animationCallback)},n._onPanelClick=function(e){n.dismiss(e)},n._onTransitionComplete=function(e){n._updateFooterPosition(),e===u.open&&n.props.onOpened&&n.props.onOpened(),e===u.closed&&n.props.onDismissed&&n.props.onDismissed()};var a=n.props.allowTouchBodyScroll,s=void 0!==a&&a;return n._allowTouchBodyScroll=s,(0,i.initializeComponentRef)(n),(0,i.warnDeprecations)("Panel",t,{ignoreExternalFocusing:"focusTrapZoneProps",forceFocusInsideTrap:"focusTrapZoneProps",firstFocusableSelector:"focusTrapZoneProps"}),n.state={isFooterSticky:!1,visibility:u.closed,id:(0,i.getId)("Panel")},n}return(0,r.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){return void 0===e.isOpen?null:!e.isOpen||t.visibility!==u.closed&&t.visibility!==u.animatingClosed?e.isOpen||t.visibility!==u.open&&t.visibility!==u.animatingOpen?null:{visibility:u.animatingClosed}:{visibility:u.animatingOpen}},t.prototype.componentDidMount=function(){this._async=new i.Async(this),this._events=new i.EventGroup(this);var e=(0,p.l_)(this.context),t=(0,p.HW)(this.context);this._events.on(e,"resize",this._updateFooterPosition),this._shouldListenForOuterClick(this.props)&&this._events.on(null==t?void 0:t.body,"mousedown",this._dismissOnOuterClick,!0),this.props.isOpen&&this.setState({visibility:u.animatingOpen})},t.prototype.componentDidUpdate=function(e,t){var n=this._shouldListenForOuterClick(this.props),a=this._shouldListenForOuterClick(e);this.state.visibility!==t.visibility&&(this._clearExistingAnimationTimer(),this.state.visibility===u.animatingOpen?this._animateTo(u.open):this.state.visibility===u.animatingClosed&&this._animateTo(u.closed));var i=(0,p.HW)(this.context);n&&!a?this._events.on(null==i?void 0:i.body,"mousedown",this._dismissOnOuterClick,!0):!n&&a&&this._events.off(null==i?void 0:i.body,"mousedown",this._dismissOnOuterClick,!0)},t.prototype.componentWillUnmount=function(){var e;this._async.dispose(),this._events.dispose(),null===(e=this._resizeObserver)||void 0===e||e.disconnect()},t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,s=e.elementToFocusOnDismiss,c=e.firstFocusableSelector,d=e.focusTrapZoneProps,f=e.forceFocusInsideTrap,p=e.hasCloseButton,_=e.headerText,h=e.headerClassName,b=void 0===h?"":h,g=e.ignoreExternalFocusing,v=e.isBlocking,y=e.isFooterAtBottom,S=e.isLightDismiss,D=e.isHiddenOnDismiss,I=e.layerProps,x=e.overlayProps,C=e.popupProps,O=e.type,w=e.styles,E=e.theme,A=e.customWidth,L=e.onLightDismissClick,k=void 0===L?this._onPanelClick:L,M=e.onRenderNavigation,P=void 0===M?this._onRenderNavigation:M,T=e.onRenderHeader,U=void 0===T?this._onRenderHeader:T,F=e.onRenderBody,H=void 0===F?this._onRenderBody:F,R=e.onRenderFooter,N=void 0===R?this._onRenderFooter:R,B=this.state,j=B.isFooterSticky,V=B.visibility,z=B.id,G=O===a.smallFixedNear||O===a.customNear,K=(0,i.getRTL)(E)?G:!G,W=O===a.custom||O===a.customNear?{width:A}:{},q=(0,i.getNativeProps)(this.props,i.divProperties),Q=this.isActive,Y=V===u.animatingClosed||V===u.animatingOpen;if(this._headerTextId=_&&z+"-headerText",!Q&&!Y&&!D)return null;this._classNames=m(w,{theme:E,className:n,focusTrapZoneClassName:d?d.className:void 0,hasCloseButton:p,headerClassName:b,isAnimating:Y,isFooterSticky:j,isFooterAtBottom:y,isOnRightSide:K,isOpen:Q,isHiddenOnDismiss:D,type:O,hasCustomNavigation:this._hasCustomNavigation});var J,X=this._classNames,Z=this._allowTouchBodyScroll;return v&&Q&&(J=o.createElement(i.Overlay,(0,r.__assign)({className:X.overlay,isDarkThemed:!1,onClick:S?k:void 0,allowTouchBodyScroll:Z},x))),o.createElement(i.Layer,(0,r.__assign)({},I),o.createElement(l.Popup,(0,r.__assign)({role:"dialog","aria-modal":v?"true":void 0,ariaLabelledBy:this._headerTextId?this._headerTextId:void 0,onDismiss:this.dismiss,className:X.hiddenPanel,enableAriaHiddenSiblings:!!Q},C),o.createElement("div",(0,r.__assign)({"aria-hidden":!Q&&Y},q,{ref:this._panel,className:X.root}),J,o.createElement(i.FocusTrapZone,(0,r.__assign)({ignoreExternalFocusing:g,forceFocusInsideTrap:!(!v||D&&!Q)&&f,firstFocusableSelector:c,isClickableOutsideFocusTrap:!0},d,{className:X.main,style:W,elementToFocusOnDismiss:s}),o.createElement("div",{className:X.contentInner},o.createElement("div",{ref:this._allowScrollOnPanel,className:X.scrollableContent,"data-is-scrollable":!0},o.createElement("div",{className:X.commands,"data-is-visible":!0},P(this.props,this._onRenderNavigation)),(this._hasCustomNavigation||!p)&&U(this.props,this._onRenderHeader,this._headerTextId),H(this.props,this._onRenderBody),N(this.props,this._onRenderFooter)))))))},t.prototype.open=function(){void 0===this.props.isOpen&&(this.isActive||this.setState({visibility:u.animatingOpen}))},t.prototype.close=function(){void 0===this.props.isOpen&&this.isActive&&this.setState({visibility:u.animatingClosed})},Object.defineProperty(t.prototype,"isActive",{get:function(){return this.state.visibility===u.open||this.state.visibility===u.animatingOpen},enumerable:!1,configurable:!0}),t.prototype._createResizeObserver=function(e){var t,n=(0,p.HW)(this.context),a=null;return(null===(t=null==n?void 0:n.defaultView)||void 0===t?void 0:t.ResizeObserver)&&(a=new n.defaultView.ResizeObserver(e)),a},t.prototype._shouldListenForOuterClick=function(e){return!!e.isBlocking&&!!e.isOpen},t.prototype._updateFooterPosition=function(){var e=this._scrollableContent;if(e){var t=e.clientHeight,n=e.scrollHeight;this.setState({isFooterSticky:t<n})}},t.prototype._dismissOnOuterClick=function(e){var t=this._panel.current;this.isActive&&t&&!e.defaultPrevented&&((0,i.elementContains)(t,e.target)||(this.props.onOuterClick?this.props.onOuterClick(e):this.dismiss(e)))},t.defaultProps={isHiddenOnDismiss:!1,isOpen:void 0,isBlocking:!0,hasCloseButton:!0,type:a.smallFixedFar},t.contextType=f.Z0,t}(o.Component),S={root:"ms-Panel",main:"ms-Panel-main",commands:"ms-Panel-commands",contentInner:"ms-Panel-contentInner",scrollableContent:"ms-Panel-scrollableContent",navigation:"ms-Panel-navigation",closeButton:"ms-Panel-closeButton ms-PanelAction-close",header:"ms-Panel-header",headerText:"ms-Panel-headerText",content:"ms-Panel-content",footer:"ms-Panel-footer",footerInner:"ms-Panel-footerInner",isOpen:"is-open",hasCloseButton:"ms-Panel--hasCloseButton",smallFluid:"ms-Panel--smFluid",smallFixedNear:"ms-Panel--smLeft",smallFixedFar:"ms-Panel--sm",medium:"ms-Panel--md",large:"ms-Panel--lg",largeFixed:"ms-Panel--fixed",extraLarge:"ms-Panel--xl",custom:"ms-Panel--custom",customNear:"ms-Panel--customLeft"},D="auto",I=((_={})["@media (min-width: ".concat(i.ScreenWidthMinMedium,"px)")]={width:340},_),x=((h={})["@media (min-width: ".concat(i.ScreenWidthMinLarge,"px)")]={width:592},h["@media (min-width: ".concat(i.ScreenWidthMinXLarge,"px)")]={width:644},h),C=((b={})["@media (min-width: ".concat(i.ScreenWidthMinUhfMobile,"px)")]={left:48,width:"auto"},b["@media (min-width: ".concat(i.ScreenWidthMinXXLarge,"px)")]={left:428},b),O=((g={})["@media (min-width: ".concat(i.ScreenWidthMinXXLarge,"px)")]={left:D,width:940},g),w=((v={})["@media (min-width: ".concat(i.ScreenWidthMinXXLarge,"px)")]={left:176},v),E=function(e){var t;switch(e){case a.smallFixedFar:t=(0,r.__assign)({},I);break;case a.medium:t=(0,r.__assign)((0,r.__assign)({},I),x);break;case a.large:t=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},I),x),C);break;case a.largeFixed:t=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},I),x),C),O);break;case a.extraLarge:t=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},I),x),C),w)}return t},A={paddingLeft:"24px",paddingRight:"24px"},L=(0,i.styled)(y,function(e){var t,n,o,s,c=e.className,d=e.focusTrapZoneClassName,l=e.hasCloseButton,u=e.headerClassName,f=e.isAnimating,p=e.isFooterSticky,m=e.isFooterAtBottom,_=e.isOnRightSide,h=e.isOpen,b=e.isHiddenOnDismiss,g=e.hasCustomNavigation,v=e.theme,y=e.type,I=void 0===y?a.smallFixedFar:y,x=v.effects,C=v.fonts,O=v.semanticColors,w=(0,i.getGlobalClassNames)(S,v),L=I===a.custom||I===a.customNear;return{root:[w.root,v.fonts.medium,h&&w.isOpen,l&&w.hasCloseButton,{pointerEvents:"none",position:"absolute",top:0,left:0,right:0,bottom:0},L&&_&&w.custom,L&&!_&&w.customNear,c],overlay:[{pointerEvents:"auto",cursor:"pointer"},h&&f&&i.AnimationClassNames.fadeIn100,!h&&f&&i.AnimationClassNames.fadeOut100],hiddenPanel:[!h&&!f&&b&&{visibility:"hidden"}],main:[w.main,{backgroundColor:O.bodyBackground,boxShadow:x.elevation64,pointerEvents:"auto",position:"absolute",display:"flex",flexDirection:"column",overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",bottom:0,top:0,left:D,right:0,width:"100%",selectors:(0,r.__assign)((t={},t[i.HighContrastSelector]={borderLeft:"3px solid ".concat(O.variantBorder),borderRight:"3px solid ".concat(O.variantBorder)},t),E(I))},I===a.smallFluid&&{left:0},I===a.smallFixedNear&&{left:0,right:D,width:272},I===a.customNear&&{right:"auto",left:0},L&&{maxWidth:"100vw"},h&&f&&!_&&i.AnimationClassNames.slideRightIn40,h&&f&&_&&i.AnimationClassNames.slideLeftIn40,!h&&f&&!_&&i.AnimationClassNames.slideLeftOut40,!h&&f&&_&&i.AnimationClassNames.slideRightOut40,d],commands:[w.commands,{backgroundColor:O.bodyBackground,paddingTop:18,selectors:(n={},n["@media (min-height: ".concat(i.ScreenWidthMinMedium,"px)")]={position:"sticky",top:0,zIndex:1},n)},g&&{paddingTop:"inherit"}],navigation:[w.navigation,{display:"flex",justifyContent:"flex-end"},g&&{height:"44px"}],contentInner:[w.contentInner,{display:"flex",flexDirection:"column",flexGrow:1,overflowY:"hidden"}],header:[w.header,A,{alignSelf:"flex-start"},l&&!g&&{flexGrow:1},g&&{flexShrink:0}],headerText:[w.headerText,C.xLarge,{color:O.bodyText,lineHeight:"27px",overflowWrap:"break-word",wordWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},u],scrollableContent:[w.scrollableContent,{overflowY:"auto"},m&&{flexGrow:1,display:"inherit",flexDirection:"inherit"}],content:[w.content,A,{paddingBottom:20},m&&{selectors:(o={},o["@media (min-height: ".concat(i.ScreenWidthMinMedium,"px)")]={flexGrow:1},o)}],footer:[w.footer,{flexShrink:0,borderTop:"1px solid transparent",transition:"opacity ".concat(i.AnimationVariables.durationValue3," ").concat(i.AnimationVariables.easeFunction2),selectors:(s={},s["@media (min-height: ".concat(i.ScreenWidthMinMedium,"px)")]={position:"sticky",bottom:0},s)},p&&{backgroundColor:O.bodyBackground,borderTopColor:O.variantBorder}],footerInner:[w.footerInner,A,{paddingBottom:16,paddingTop:16}],subComponentStyles:{closeButton:{root:[w.closeButton,{marginRight:14,color:v.palette.neutralSecondary,fontSize:i.IconFontSizes.large},g&&{marginRight:0,height:"auto",width:"44px"}],rootHovered:{color:v.palette.neutralPrimary}}}}},void 0,{scope:"Panel"}),k=n(602),M=n(8791),P=n(188),T=n(350),U=n(5168),F=n(7195),H=(0,i.classNamesFunction)(),R={options:[]},N=o.forwardRef(function(e,t){var n=(0,T.getPropsWithDefaults)(R,e),a=o.useRef(null),s=(0,F.a)(t,a),c=(0,k.useResponsiveMode)(a,n.responsiveMode),d=function(e){var t,n=e.defaultSelectedKeys,a=e.selectedKeys,r=e.defaultSelectedKey,s=e.selectedKey,c=e.options,d=e.multiSelect,l=(0,U.Z)(c),u=o.useState([]),f=u[0],p=u[1],m=c!==l;t=d?m&&void 0!==n?n:a:m&&void 0!==r?r:s;var _=(0,U.Z)(t);return o.useEffect(function(){var e=function(e){return(0,i.findIndex)(c,function(t){return null!=e?t.key===e:!!t.selected||!!t.isSelected})};void 0===t&&l||t===_&&!m||p(function(){if(void 0===t)return d?c.map(function(e,t){return e.selected?t:-1}).filter(function(e){return-1!==e}):-1!==(r=e(null))?[r]:[];if(!Array.isArray(t))return-1!==(r=e(t))?[r]:[];for(var n=[],a=0,i=t;a<i.length;a++){var r,o=i[a];-1!==(r=e(o))&&n.push(r)}return n}())},[m,d,l,_,c,t]),[f,p]}(n),l=d[0],u=d[1];return o.createElement(K,(0,r.__assign)({},n,{responsiveMode:c,hoisted:{rootRef:s,selectedIndices:l,setSelectedIndices:u}}))});N.displayName="DropdownBase";var B,j,V,z,G,K=function(e){function t(t){var n=e.call(this,t)||this;n._host=o.createRef(),n._focusZone=o.createRef(),n._dropDown=o.createRef(),n._scrollIdleDelay=250,n._sizePosCache=new c,n._requestAnimationFrame=(0,i.safeRequestAnimationFrame)(n),n.dismissMenu=function(){n.state.isOpen&&n.setState({isOpen:!1})},n._onChange=function(e,t,a,i,o){var s=n.props,c=s.onChange,d=s.onChanged;if(c||d){var l=o?(0,r.__assign)((0,r.__assign)({},t[a]),{selected:!i}):t[a];c&&c((0,r.__assign)((0,r.__assign)({},e),{target:n._dropDown.current}),l,a),d&&d(l,a)}},n._getPlaceholder=function(){return n.props.placeholder||n.props.placeHolder},n._getTitle=function(e,t){var a=n.props.multiSelectDelimiter,i=void 0===a?", ":a;return e.map(function(e){return e.text}).join(i)},n._onRenderTitle=function(e){return o.createElement(o.Fragment,null,n._getTitle(e))},n._onRenderPlaceholder=function(e){return n._getPlaceholder()?o.createElement(o.Fragment,null,n._getPlaceholder()):null},n._onRenderContainer=function(e){var t=e.calloutProps,a=e.panelProps,s=n.props,c=s.responsiveMode,d=s.dropdownWidth,l=c<=k.ResponsiveMode.medium,u={firstFocusableTarget:"#".concat(n._listId,"1")},f=n._classNames.subComponentStyles?n._classNames.subComponentStyles.panel:void 0,p=void 0,m=void 0;return"auto"===d?m=n._dropDown.current?n._dropDown.current.clientWidth:0:p=d||(n._dropDown.current?n._dropDown.current.clientWidth:0),l?o.createElement(L,(0,r.__assign)({closeButtonAriaLabel:"Close",focusTrapZoneProps:u,hasCloseButton:!0,isOpen:!0,isLightDismiss:!0,onDismiss:n._onDismiss,styles:f},a),n._renderFocusableList(e)):o.createElement(i.Callout,(0,r.__assign)({isBeakVisible:!1,gapSpace:0,doNotLayer:!1,directionalHintFixed:!1,directionalHint:i.DirectionalHint.bottomLeftEdge,calloutWidth:p,calloutMinWidth:m},t,{className:n._classNames.callout,target:n._dropDown.current,onDismiss:n._onDismiss,onScroll:n._onScroll,onPositioned:n._onPositioned}),n._renderFocusableList(e))},n._onRenderCaretDown=function(e){return o.createElement(d.Icon,{className:n._classNames.caretDown,iconName:"ChevronDown","aria-hidden":!0})},n._onRenderList=function(e){var t=e.onRenderItem,a=void 0===t?n._onRenderItem:t,i={items:[]},c=[],d=function(){var e=i.id?[o.createElement("div",{role:"group",key:i.id,"aria-labelledby":i.id},i.items)]:i.items;c=(0,r.__spreadArray)((0,r.__spreadArray)([],c,!0),e,!0),i={items:[]}};return e.options.forEach(function(e,t){!function(e,t){switch(e.itemType){case s.W.Header:i.items.length>0&&d();var o=n._id+e.key;i.items.push(a((0,r.__assign)((0,r.__assign)({id:o},e),{index:t}),n._onRenderItem)),i.id=o;break;case s.W.Divider:t>0&&i.items.push(a((0,r.__assign)((0,r.__assign)({},e),{index:t}),n._onRenderItem)),i.items.length>0&&d();break;default:i.items.push(a((0,r.__assign)((0,r.__assign)({},e),{index:t}),n._onRenderItem))}}(e,t)}),i.items.length>0&&d(),o.createElement(o.Fragment,null,c)},n._onRenderItem=function(e){switch(e.itemType){case s.W.Divider:return n._renderSeparator(e);case s.W.Header:return n._renderHeader(e);default:return n._renderOption(e)}},n._renderOption=function(e){var t,a=n.props,s=a.onRenderOption,c=void 0===s?n._onRenderOption:s,d=a.hoisted.selectedIndices,l=void 0===d?[]:d,u=!(void 0===e.index||!l)&&l.indexOf(e.index)>-1,f=e.hidden?n._classNames.dropdownItemHidden:u&&!0===e.disabled?n._classNames.dropdownItemSelectedAndDisabled:u?n._classNames.dropdownItemSelected:!0===e.disabled?n._classNames.dropdownItemDisabled:n._classNames.dropdownItem,p=e.title,m=n._listId+e.index,_=null!==(t=e.id)&&void 0!==t?t:m+"-label",h=n._classNames.subComponentStyles?n._classNames.subComponentStyles.multiSelectItem:void 0;return n.props.multiSelect?o.createElement(P.S,{id:m,key:e.key,disabled:e.disabled,onChange:n._onItemClick(e),inputProps:(0,r.__assign)({"aria-selected":u,onMouseEnter:n._onItemMouseEnter.bind(n,e),onMouseLeave:n._onMouseItemLeave.bind(n,e),onMouseMove:n._onItemMouseMove.bind(n,e),role:"option"},{"data-index":e.index,"data-is-focusable":!(e.disabled||e.hidden)}),label:e.text,title:p,onRenderLabel:n._onRenderItemLabel.bind(n,(0,r.__assign)((0,r.__assign)({},e),{id:_})),className:(0,i.css)(f,"is-multi-select"),checked:u,styles:h,ariaPositionInSet:e.hidden?void 0:n._sizePosCache.positionInSet(e.index),ariaSetSize:e.hidden?void 0:n._sizePosCache.optionSetSize,ariaLabel:e.ariaLabel,ariaLabelledBy:e.ariaLabel?void 0:_}):o.createElement(i.CommandButton,{id:m,key:e.key,"data-index":e.index,"data-is-focusable":!e.disabled,disabled:e.disabled,className:f,onClick:n._onItemClick(e),onMouseEnter:n._onItemMouseEnter.bind(n,e),onMouseLeave:n._onMouseItemLeave.bind(n,e),onMouseMove:n._onItemMouseMove.bind(n,e),role:"option","aria-selected":u?"true":"false",ariaLabel:e.ariaLabel,title:p,"aria-posinset":n._sizePosCache.positionInSet(e.index),"aria-setsize":n._sizePosCache.optionSetSize},c(e,n._onRenderOption))},n._onRenderOption=function(e){return o.createElement("span",{className:n._classNames.dropdownOptionText},e.text)},n._onRenderMultiselectOption=function(e){return o.createElement("span",{id:e.id,"aria-hidden":"true",className:n._classNames.dropdownOptionText},e.text)},n._onRenderItemLabel=function(e){var t=n.props.onRenderOption;return(void 0===t?n._onRenderMultiselectOption:t)(e,n._onRenderMultiselectOption)},n._onPositioned=function(e){n._focusZone.current&&n._requestAnimationFrame(function(){var e=n.props.hoisted.selectedIndices;if(n._focusZone.current)if(!n._hasBeenPositioned&&e&&e[0]&&!n.props.options[e[0]].disabled){var t=(0,i.getDocument)().getElementById("".concat(n._id,"-list").concat(e[0]));t&&n._focusZone.current.focusElement(t),n._hasBeenPositioned=!0}else n._focusZone.current.focus()}),n.state.calloutRenderEdge&&n.state.calloutRenderEdge===e.targetEdge||n.setState({calloutRenderEdge:e.targetEdge})},n._onItemClick=function(e){return function(t){e.disabled||(n.setSelectedIndex(t,e.index),n.props.multiSelect||n.setState({isOpen:!1}))}},n._onScroll=function(){var e=(0,p.l_)(n.context);n._isScrollIdle||void 0===n._scrollIdleTimeoutId?n._isScrollIdle=!1:(e.clearTimeout(n._scrollIdleTimeoutId),n._scrollIdleTimeoutId=void 0),n._scrollIdleTimeoutId=e.setTimeout(function(){n._isScrollIdle=!0},n._scrollIdleDelay)},n._onMouseItemLeave=function(e,t){if(!n._shouldIgnoreMouseEvent()&&n._host.current)if(n._host.current.setActive)try{n._host.current.setActive()}catch(e){}else n._host.current.focus()},n._onDismiss=function(){n.setState({isOpen:!1})},n._onDropdownBlur=function(e){n._isDisabled()||n.state.isOpen||(n.setState({hasFocus:!1}),n.props.onBlur&&n.props.onBlur(e))},n._onDropdownKeyDown=function(e){if(!n._isDisabled()&&(n._lastKeyDownWasAltOrMeta=n._isAltOrMeta(e),!n.props.onKeyDown||(n.props.onKeyDown(e),!e.defaultPrevented))){var t,a=n.props.hoisted.selectedIndices.length?n.props.hoisted.selectedIndices[0]:-1,r=e.altKey||e.metaKey,o=n.state.isOpen;switch(e.which){case i.KeyCodes.enter:n.setState({isOpen:!o});break;case i.KeyCodes.escape:if(!o)return;n.setState({isOpen:!1});break;case i.KeyCodes.up:if(r){if(o){n.setState({isOpen:!1});break}return}n.props.multiSelect?n.setState({isOpen:!0}):n._isDisabled()||(t=n._moveIndex(e,-1,a-1,a));break;case i.KeyCodes.down:r&&(e.stopPropagation(),e.preventDefault()),r&&!o||n.props.multiSelect?n.setState({isOpen:!0}):n._isDisabled()||(t=n._moveIndex(e,1,a+1,a));break;case i.KeyCodes.home:n.props.multiSelect||(t=n._moveIndex(e,1,0,a));break;case i.KeyCodes.end:n.props.multiSelect||(t=n._moveIndex(e,-1,n.props.options.length-1,a));break;case i.KeyCodes.space:break;default:return}t!==a&&(e.stopPropagation(),e.preventDefault())}},n._onDropdownKeyUp=function(e){if(!n._isDisabled()){var t=n._shouldHandleKeyUp(e),a=n.state.isOpen;n.props.onKeyUp&&(n.props.onKeyUp(e),e.defaultPrevented)||(e.which===i.KeyCodes.space?(n.setState({isOpen:!a}),e.stopPropagation(),e.preventDefault()):t&&a&&n.setState({isOpen:!1}))}},n._onZoneKeyDown=function(e){var t,a,r;n._lastKeyDownWasAltOrMeta=n._isAltOrMeta(e);var o=e.altKey||e.metaKey;switch(e.which){case i.KeyCodes.up:o?n.setState({isOpen:!1}):n._host.current&&(r=(0,i.getLastFocusable)(n._host.current,n._host.current.lastChild,!0));break;case i.KeyCodes.home:case i.KeyCodes.end:case i.KeyCodes.pageUp:case i.KeyCodes.pageDown:break;case i.KeyCodes.down:!o&&n._host.current&&(r=(0,i.getFirstFocusable)(n._host.current,n._host.current.firstChild,!0));break;case i.KeyCodes.escape:n.setState({isOpen:!1});break;case i.KeyCodes.tab:n.setState({isOpen:!1});var s=(0,i.getDocument)();s&&(e.shiftKey?null===(t=(0,T.getPreviousElement)(s.body,n._dropDown.current,!1,!1,!0,!0))||void 0===t||t.focus():null===(a=(0,T.getNextElement)(s.body,n._dropDown.current,!1,!1,!0,!0))||void 0===a||a.focus());break;default:return}r&&r.focus(),e.stopPropagation(),e.preventDefault()},n._onZoneKeyUp=function(e){n._shouldHandleKeyUp(e)&&n.state.isOpen&&(n.setState({isOpen:!1}),e.preventDefault())},n._onDropdownClick=function(e){if(!n.props.onClick||(n.props.onClick(e),!e.defaultPrevented)){var t=n.state.isOpen;n._isDisabled()||n._shouldOpenOnFocus()||n.setState({isOpen:!t}),n._isFocusedByClick=!1}},n._onDropdownMouseDown=function(){n._isFocusedByClick=!0},n._onFocus=function(e){if(!n._isDisabled()){n.props.onFocus&&n.props.onFocus(e);var t={hasFocus:!0};n._shouldOpenOnFocus()&&(t.isOpen=!0),n.setState(t)}},n._isDisabled=function(){var e=n.props.disabled,t=n.props.isDisabled;return void 0===e&&(e=t),e},n._onRenderLabel=function(e){var t=e.label,a=e.required,r=e.disabled,s=n._classNames.subComponentStyles?n._classNames.subComponentStyles.label:void 0;return t?o.createElement(i.Label,{className:n._classNames.label,id:n._labelId,required:a,styles:s,disabled:r},t):null},(0,i.initializeComponentRef)(n),t.multiSelect,t.selectedKey,t.selectedKeys,t.defaultSelectedKey,t.defaultSelectedKeys;var a=t.options;return n._id=t.id||(0,i.getId)("Dropdown"),n._labelId=n._id+"-label",n._listId=n._id+"-list",n._optionId=n._id+"-option",n._isScrollIdle=!0,n._hasBeenPositioned=!1,n._sizePosCache.updateOptions(a),n.state={isOpen:!1,hasFocus:!1,calloutRenderEdge:void 0},n}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"selectedOptions",{get:function(){var e=this.props,t=e.options,n=e.hoisted.selectedIndices;return(0,M.D)(t,n)},enumerable:!1,configurable:!0}),t.prototype.componentWillUnmount=function(){clearTimeout(this._scrollIdleTimeoutId)},t.prototype.componentDidUpdate=function(e,t){!0===t.isOpen&&!1===this.state.isOpen&&(this._gotMouseMove=!1,this._hasBeenPositioned=!1,this.props.onDismiss&&this.props.onDismiss())},t.prototype.render=function(){var e=this._id,t=this.props,n=t.className,a=t.label,s=t.options,c=t.ariaLabel,d=t.required,l=t.errorMessage,u=t.styles,f=t.theme,p=t.panelProps,m=t.calloutProps,_=t.onRenderTitle,h=void 0===_?this._getTitle:_,b=t.onRenderContainer,g=void 0===b?this._onRenderContainer:b,v=t.onRenderCaretDown,y=void 0===v?this._onRenderCaretDown:v,S=t.onRenderLabel,D=void 0===S?this._onRenderLabel:S,I=t.onRenderItem,x=void 0===I?this._onRenderItem:I,C=t.hoisted.selectedIndices,O=this.state,w=O.isOpen,E=O.calloutRenderEdge,A=O.hasFocus,L=t.onRenderPlaceholder||t.onRenderPlaceHolder||this._getPlaceholder;s!==this._sizePosCache.cachedOptions&&this._sizePosCache.updateOptions(s);var k=(0,M.D)(s,C),P=(0,i.getNativeProps)(t,i.divProperties),T=this._isDisabled(),U=e+"-errorMessage";this._classNames=H(u,{theme:f,className:n,hasError:!!(l&&l.length>0),hasLabel:!!a,isOpen:w,required:d,disabled:T,isRenderingPlaceholder:!k.length,panelClassName:p?p.className:void 0,calloutClassName:m?m.className:void 0,calloutRenderEdge:E});var F=!!l&&l.length>0;return o.createElement("div",{className:this._classNames.root,ref:this.props.hoisted.rootRef,"aria-owns":w?this._listId:void 0},D(this.props,this._onRenderLabel),o.createElement("div",(0,r.__assign)({"data-is-focusable":!T,"data-ktp-target":!0,ref:this._dropDown,id:e,tabIndex:T?-1:0,role:"combobox","aria-haspopup":"listbox","aria-expanded":w?"true":"false","aria-label":c,"aria-labelledby":a&&!c?(0,i.mergeAriaAttributeValues)(this._labelId,this._optionId):void 0,"aria-describedby":F?this._id+"-errorMessage":void 0,"aria-required":d,"aria-disabled":T,"aria-invalid":F,"aria-controls":w?this._listId:void 0},P,{className:this._classNames.dropdown,onBlur:this._onDropdownBlur,onKeyDown:this._onDropdownKeyDown,onKeyUp:this._onDropdownKeyUp,onClick:this._onDropdownClick,onMouseDown:this._onDropdownMouseDown,onFocus:this._onFocus}),o.createElement("span",{id:this._optionId,className:this._classNames.title,"aria-live":A?"polite":void 0,"aria-atomic":!!A||void 0},k.length?h(k,this._onRenderTitle):L(t,this._onRenderPlaceholder)),o.createElement("span",{className:this._classNames.caretDownWrapper},y(t,this._onRenderCaretDown))),w&&g((0,r.__assign)((0,r.__assign)({},t),{onDismiss:this._onDismiss,onRenderItem:x}),this._onRenderContainer),F&&o.createElement("div",{role:"alert",id:U,className:this._classNames.errorMessage},l))},t.prototype.focus=function(e){this._dropDown.current&&(this._dropDown.current.focus(),e&&this.setState({isOpen:!0}))},t.prototype.setSelectedIndex=function(e,t){var n=this.props,a=n.options,i=n.selectedKey,r=n.selectedKeys,o=n.multiSelect,s=n.notifyOnReselect,c=n.hoisted.selectedIndices,d=void 0===c?[]:c,l=!!d&&d.indexOf(t)>-1,u=[];if(t=Math.max(0,Math.min(a.length-1,t)),void 0===i&&void 0===r){if(o||s||t!==d[0]){if(o)if(u=d?this._copyArray(d):[],l){var f=u.indexOf(t);f>-1&&u.splice(f,1)}else u.push(t);else u=[t];e.persist(),this.props.hoisted.setSelectedIndices(u),this._onChange(e,a,t,l,o)}}else this._onChange(e,a,t,l,o)},t.prototype._copyArray=function(e){for(var t=[],n=0,a=e;n<a.length;n++){var i=a[n];t.push(i)}return t},t.prototype._moveIndex=function(e,t,n,a){var i=this.props.options;if(a===n||0===i.length)return a;n>=i.length?n=0:n<0&&(n=i.length-1);for(var r=0;i[n].itemType===s.W.Header||i[n].itemType===s.W.Divider||i[n].disabled;){if(r>=i.length)return a;n+t<0?n=i.length:n+t>=i.length&&(n=-1),n+=t,r++}return this.setSelectedIndex(e,n),n},t.prototype._renderFocusableList=function(e){var t=e.onRenderList,n=void 0===t?this._onRenderList:t,a=e.label,r=e.ariaLabel,s=e.multiSelect;return o.createElement("div",{className:this._classNames.dropdownItemsWrapper,onKeyDown:this._onZoneKeyDown,onKeyUp:this._onZoneKeyUp,ref:this._host,tabIndex:0},o.createElement(i.FocusZone,{ref:this._focusZone,direction:i.FocusZoneDirection.vertical,id:this._listId,className:this._classNames.dropdownItems,role:"listbox","aria-label":r,"aria-labelledby":a&&!r?this._labelId:void 0,"aria-multiselectable":s},n(e,this._onRenderList)))},t.prototype._renderSeparator=function(e){var t=e.index,n=e.key,a=e.hidden?this._classNames.dropdownDividerHidden:this._classNames.dropdownDivider;return t>0?o.createElement("div",{role:"presentation",key:n,className:a}):null},t.prototype._renderHeader=function(e){var t=this.props.onRenderOption,n=void 0===t?this._onRenderOption:t,a=e.key,i=e.id,r=e.hidden?this._classNames.dropdownItemHeaderHidden:this._classNames.dropdownItemHeader;return o.createElement("div",{id:i,key:a,className:r},n(e,this._onRenderOption))},t.prototype._onItemMouseEnter=function(e,t){this._shouldIgnoreMouseEvent()||t.currentTarget.focus()},t.prototype._onItemMouseMove=function(e,t){var n=(0,p.HW)(this.context),a=t.currentTarget;this._gotMouseMove=!0,this._isScrollIdle&&n.activeElement!==a&&a.focus()},t.prototype._shouldIgnoreMouseEvent=function(){return!this._isScrollIdle||!this._gotMouseMove},t.prototype._isAltOrMeta=function(e){return e.which===i.KeyCodes.alt||"Meta"===e.key},t.prototype._shouldHandleKeyUp=function(e){var t=this._lastKeyDownWasAltOrMeta&&this._isAltOrMeta(e);return this._lastKeyDownWasAltOrMeta=!1,!!t&&!((0,i.isMac)()||(0,i.isIOS)())},t.prototype._shouldOpenOnFocus=function(){var e=this.state.hasFocus,t=this.props.openOnKeyboardFocus;return!this._isFocusedByClick&&!0===t&&!e},t.defaultProps={options:[]},t.contextType=f.Z0,t}(o.Component),W=n(4835),q={root:"ms-Dropdown-container",label:"ms-Dropdown-label",dropdown:"ms-Dropdown",title:"ms-Dropdown-title",caretDownWrapper:"ms-Dropdown-caretDownWrapper",caretDown:"ms-Dropdown-caretDown",callout:"ms-Dropdown-callout",panel:"ms-Dropdown-panel",dropdownItems:"ms-Dropdown-items",dropdownItem:"ms-Dropdown-item",dropdownDivider:"ms-Dropdown-divider",dropdownOptionText:"ms-Dropdown-optionText",dropdownItemHeader:"ms-Dropdown-header",titleIsPlaceHolder:"ms-Dropdown-titleIsPlaceHolder",titleHasError:"ms-Dropdown-title--hasError"},Q=((B={})["".concat(i.HighContrastSelector,", ").concat(i.HighContrastSelectorWhite.replace("@media ",""))]=(0,r.__assign)({},(0,i.getHighContrastNoAdjustStyle)()),B),Y={selectors:(0,r.__assign)((j={},j[i.HighContrastSelector]=(V={backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},V[".".concat(i.IsFocusVisibleClassName," &:focus:after")]={borderColor:"HighlightText"},V),j[".ms-Checkbox-checkbox"]=(z={},z[i.HighContrastSelector]={borderColor:"HighlightText"},z),j),Q)},J={selectors:(G={},G[i.HighContrastSelector]={borderColor:"Highlight"},G)},X=(0,i.getScreenSelector)(0,i.ScreenWidthMinMedium),Z=(0,i.styled)(N,function(e){var t,n,a,o,s,c,d,l,u,f,p,m,_=e.theme,h=e.hasError,b=e.hasLabel,g=e.className,v=e.isOpen,y=e.disabled,S=e.required,D=e.isRenderingPlaceholder,I=e.panelClassName,x=e.calloutClassName,C=e.calloutRenderEdge;if(!_)throw new Error("theme is undefined or null in base Dropdown getStyles function.");var O=(0,i.getGlobalClassNames)(q,_),w=_.palette,E=_.semanticColors,A=_.effects,L=_.fonts,k={color:E.menuItemTextHovered},M={color:E.menuItemText},P={borderColor:E.errorText},T=[O.dropdownItem,{backgroundColor:"transparent",boxSizing:"border-box",cursor:"pointer",display:"flex",alignItems:"center",padding:"0 8px",width:"100%",minHeight:36,lineHeight:20,height:0,position:"relative",border:"1px solid transparent",borderRadius:0,wordWrap:"break-word",overflowWrap:"break-word",textAlign:"left",".ms-Button-flexContainer":{width:"100%"}}],U=[O.dropdownItemHeader,(0,r.__assign)((0,r.__assign)({},L.medium),{fontWeight:i.FontWeights.semibold,color:E.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:36,lineHeight:36,cursor:"default",padding:"0 8px",userSelect:"none",textAlign:"left",selectors:(t={},t[i.HighContrastSelector]=(0,r.__assign)({color:"GrayText"},(0,i.getHighContrastNoAdjustStyle)()),t)})],F=E.menuItemBackgroundPressed,H=function(e){var t,n;return void 0===e&&(e=!1),{selectors:(t={"&:hover":[{color:E.menuItemTextHovered,backgroundColor:e?F:E.menuItemBackgroundHovered},Y],"&.is-multi-select:hover":[{backgroundColor:e?F:"transparent"},Y],"&:active:hover":[{color:E.menuItemTextHovered,backgroundColor:e?E.menuItemBackgroundHovered:E.menuItemBackgroundPressed},Y]},t[".".concat(i.IsFocusVisibleClassName," &:focus:after, :host(.").concat(i.IsFocusVisibleClassName,") &:focus:after")]=(n={left:0,top:0,bottom:0,right:0},n[i.HighContrastSelector]={inset:"2px"},n),t[i.HighContrastSelector]={border:"none"},t)}},R=(0,r.__spreadArray)((0,r.__spreadArray)([],T,!0),[{backgroundColor:F,color:E.menuItemTextHovered},H(!0),Y],!1),N=(0,r.__spreadArray)((0,r.__spreadArray)([],T,!0),[{color:E.disabledText,cursor:"default",selectors:(n={},n[i.HighContrastSelector]={color:"GrayText",border:"none"},n)}],!1),B=C===W.x.bottom?"".concat(A.roundedCorner2," ").concat(A.roundedCorner2," 0 0"):"0 0 ".concat(A.roundedCorner2," ").concat(A.roundedCorner2),j=C===W.x.bottom?"0 0 ".concat(A.roundedCorner2," ").concat(A.roundedCorner2):"".concat(A.roundedCorner2," ").concat(A.roundedCorner2," 0 0");return{root:[O.root,g],label:O.label,dropdown:[O.dropdown,i.normalize,L.medium,{color:E.menuItemText,borderColor:E.focusBorder,position:"relative",outline:0,userSelect:"none",selectors:(a={},a["&:hover ."+O.title]=[!y&&k,{borderColor:v?w.neutralSecondary:w.neutralPrimary},J],a["&:focus ."+O.title]=[!y&&k,{selectors:(o={},o[i.HighContrastSelector]={color:"Highlight"},o)}],a["&:focus:after"]=[{pointerEvents:"none",content:"''",position:"absolute",boxSizing:"border-box",top:"0px",left:"0px",width:"100%",height:"100%",border:y?"none":"2px solid ".concat(w.themePrimary),borderRadius:"2px",selectors:(s={},s[i.HighContrastSelector]={color:"Highlight"},s)}],a["&:active ."+O.title]=[!y&&k,{borderColor:w.themePrimary},J],a["&:hover ."+O.caretDown]=!y&&M,a["&:focus ."+O.caretDown]=[!y&&M,{selectors:(c={},c[i.HighContrastSelector]={color:"Highlight"},c)}],a["&:active ."+O.caretDown]=!y&&M,a["&:hover ."+O.titleIsPlaceHolder]=!y&&M,a["&:focus ."+O.titleIsPlaceHolder]=!y&&M,a["&:active ."+O.titleIsPlaceHolder]=!y&&M,a["&:hover ."+O.titleHasError]=P,a["&:active ."+O.titleHasError]=P,a)},v&&"is-open",y&&"is-disabled",S&&"is-required",S&&!b&&{selectors:(d={":before":{content:"'*'",color:E.errorText,position:"absolute",top:-5,right:-10}},d[i.HighContrastSelector]={selectors:{":after":{right:-14}}},d)}],title:[O.title,i.normalize,{backgroundColor:E.inputBackground,borderWidth:1,borderStyle:"solid",borderColor:E.inputBorder,borderRadius:v?B:A.roundedCorner2,cursor:"pointer",display:"block",height:32,lineHeight:30,padding:"0 28px 0 8px",position:"relative",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},D&&[O.titleIsPlaceHolder,{color:E.inputPlaceholderText}],h&&[O.titleHasError,P],y&&{backgroundColor:E.disabledBackground,border:"none",color:E.disabledText,cursor:"default",selectors:(l={},l[i.HighContrastSelector]=(0,r.__assign)({border:"1px solid GrayText",color:"GrayText",backgroundColor:"Window"},(0,i.getHighContrastNoAdjustStyle)()),l)}],caretDownWrapper:[O.caretDownWrapper,{height:32,lineHeight:30,paddingTop:1,position:"absolute",right:8,top:0},!y&&{cursor:"pointer"}],caretDown:[O.caretDown,{color:w.neutralSecondary,fontSize:L.small.fontSize,pointerEvents:"none"},y&&{color:E.disabledText,selectors:(u={},u[i.HighContrastSelector]=(0,r.__assign)({color:"GrayText"},(0,i.getHighContrastNoAdjustStyle)()),u)}],errorMessage:(0,r.__assign)((0,r.__assign)({color:E.errorText},_.fonts.small),{paddingTop:5}),callout:[O.callout,{boxShadow:A.elevation8,borderRadius:j,selectors:(f={},f[".ms-Callout-main"]={borderRadius:j},f)},x],dropdownItemsWrapper:{selectors:{"&:focus":{outline:0}}},dropdownItems:[O.dropdownItems,{display:"block"}],dropdownItem:(0,r.__spreadArray)((0,r.__spreadArray)([],T,!0),[H()],!1),dropdownItemSelected:R,dropdownItemDisabled:N,dropdownItemSelectedAndDisabled:[R,N,{backgroundColor:"transparent"}],dropdownItemHidden:(0,r.__spreadArray)((0,r.__spreadArray)([],T,!0),[{display:"none"}],!1),dropdownDivider:[O.dropdownDivider,{height:1,backgroundColor:E.bodyDivider}],dropdownDividerHidden:[O.dropdownDivider,{display:"none"}],dropdownOptionText:[O.dropdownOptionText,{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",minWidth:0,maxWidth:"100%",wordWrap:"break-word",overflowWrap:"break-word",margin:"1px"}],dropdownItemHeader:U,dropdownItemHeaderHidden:(0,r.__spreadArray)((0,r.__spreadArray)([],U,!0),[{display:"none"}],!1),subComponentStyles:{label:{root:{display:"inline-block"}},multiSelectItem:{root:{padding:0},label:{alignSelf:"stretch",padding:"0 8px",width:"100%"},input:{selectors:(p={},p[".".concat(i.IsFocusVisibleClassName," &:focus + label::before, :host(.").concat(i.IsFocusVisibleClassName,") &:focus + label::before")]={outlineOffset:"0px"},p)}},panel:{root:[I],main:{selectors:(m={},m[X]={width:272},m)},contentInner:{padding:"0 0 20px"}}}}},void 0,{scope:"Dropdown"});Z.displayName="Dropdown"}
,8583:(e,t,n)=>{var a=n(2141);e.exports=a.workaround_IconComponent}
,6809:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var a=n(2141),i=n(280),r=n(5959),o=(0,a.classNamesFunction)({cacheSize:100}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.as,n=void 0===t?"label":t,s=e.children,c=e.className,d=e.disabled,l=e.styles,u=e.required,f=e.theme,p=o(l,{className:c,disabled:d,required:u,theme:f});return r.createElement(n,(0,i.__assign)({},(0,a.getNativeProps)(this.props,a.divProperties),{className:p.root}),s)},t}(r.Component),c=(0,a.styled)(s,function(e){var t,n=e.theme,r=e.className,o=e.disabled,s=e.required,c=n.semanticColors,d=a.FontWeights.semibold,l=c.bodyText,u=c.disabledBodyText,f=c.errorText;return{root:["ms-Label",n.fonts.medium,{fontWeight:d,color:l,boxSizing:"border-box",boxShadow:"none",margin:0,display:"block",padding:"5px 0",wordWrap:"break-word",overflowWrap:"break-word"},o&&{color:u,selectors:(t={},t[a.HighContrastSelector]=(0,i.__assign)({color:"GrayText"},(0,a.getHighContrastNoAdjustStyle)()),t)},s&&{selectors:{"::after":{content:"' *'",color:f,paddingRight:12}}},r]}},void 0,{scope:"Label"})}
,1923:(e,t,n)=>{"use strict";n.d(t,{f:()=>v});var a=n(350),i=n(280),r=n(5959),o=n(7864),s=n(9349),c=n(2141);function d(e,t){void 0===t&&(t=null);var n,a=r.useRef({ref:(n=function(e){a.ref.current!==e&&(a.cleanup&&(a.cleanup(),a.cleanup=void 0),a.ref.current=e,null!==e&&(a.cleanup=a.callback(e)))},n.current=t,n),callback:e}).current;return a.callback=e,a.ref}var l=n(8583),u=n(7328),f=(0,a.classNamesFunction)(),p=function(e,t){var n={links:[],keyToIndexMapping:{},keyToTabIdMapping:{}};return r.Children.forEach(r.Children.toArray(e.children),function(r,o){if(m(r)){var s=r.props,c=s.linkText,d=(0,i.__rest)(s,["linkText"]),l=r.props.itemKey||o.toString();n.links.push((0,i.__assign)((0,i.__assign)({headerText:c},d),{itemKey:l})),n.keyToIndexMapping[l]=o,n.keyToTabIdMapping[l]=function(e,t,n,a){return e.getTabId?e.getTabId(n,a):t+"-Tab".concat(a)}(e,t,l,o)}else r&&(0,a.warn)("The children of a Pivot component must be of type PivotItem to be rendered.")}),n},m=function(e){var t;return r.isValidElement(e)&&(null===(t=e.type)||void 0===t?void 0:t.name)===u.y.name},_=r.forwardRef(function(e,t){var n,u=r.useRef(null),_=r.useRef(null),h=(0,o.B)("Pivot"),b=(0,s.k)(e.selectedKey,e.defaultSelectedKey),g=b[0],v=b[1],y=e.componentRef,S=e.theme,D=e.linkSize,I=e.linkFormat,x=e.overflowBehavior,C=e.overflowAriaLabel,O=e.focusZoneProps,w=e.overflowButtonAs,E={"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"]},A=(0,a.getNativeProps)(e,a.divProperties,["aria-label","aria-labelledby"]),L=p(e,h);r.useImperativeHandle(y,function(){return{focus:function(){var e;null===(e=u.current)||void 0===e||e.focus()}}});var k=function(e){if(!e)return null;var t=e.itemCount,a=e.itemIcon,i=e.headerText;return r.createElement("span",{className:n.linkContent},void 0!==a&&r.createElement("span",{className:n.icon},r.createElement(l.Icon,{iconName:a})),void 0!==i&&r.createElement("span",{className:n.text}," ",e.headerText),void 0!==t&&r.createElement("span",{className:n.count}," (",t,")"))},M=function(e,t,o,s){var d,l=t.itemKey,u=t.headerButtonProps,f=t.onRenderItemLink,p=e.keyToTabIdMapping[l],m=o===l;d=f?f(t,k):k(t);var _=t.headerText||"";_+=t.itemCount?" ("+t.itemCount+")":"",_+=t.itemIcon?" xx":"";var h=t.role&&"tab"!==t.role?{role:t.role}:{role:"tab","aria-selected":m};return r.createElement(c.CommandButton,(0,i.__assign)({},u,h,{id:p,key:l,className:(0,a.css)(s,m&&n.linkIsSelected),onClick:function(e){return P(l,e)},onKeyDown:function(e){return T(l,e)},"aria-label":t.ariaLabel,name:t.headerText,keytipProps:t.keytipProps,"data-content":_}),d)},P=function(e,t){t.preventDefault(),U(e,t)},T=function(e,t){t.which===a.KeyCodes.enter&&(t.preventDefault(),U(e))},U=function(t,n){var a;if(v(t),L=p(e,h),e.onLinkClick&&L.keyToIndexMapping[t]>=0){var i=L.keyToIndexMapping[t],o=r.Children.toArray(e.children)[i];m(o)&&e.onLinkClick(o,n)}null===(a=_.current)||void 0===a||a.dismissMenu()};n=f(e.styles,{theme:S,linkSize:D,linkFormat:I});var F,H=null===(F=g)||void 0!==F&&void 0!==L.keyToIndexMapping[F]?g:L.links.length?L.links[0].itemKey:void 0,R=H?L.keyToIndexMapping[H]:0,N=L.links.map(function(e){return M(L,e,H,n.link)}),B=r.useMemo(function(){return{items:[],alignTargetEdge:!0,directionalHint:c.DirectionalHint.bottomRightEdge}},[]),j=function(e){var t=e.onOverflowItemsChanged,n=e.rtl,i=e.pinnedIndex,o=r.useRef(),s=r.useRef(),c=d(function(e){var t=function(e,t){if("undefined"!=typeof ResizeObserver){var n=new ResizeObserver(t);return Array.isArray(e)?e.forEach(function(e){return n.observe(e)}):n.observe(e),function(){return n.disconnect()}}var i=function(){return t(void 0)},r=(0,a.getWindow)(Array.isArray(e)?e[0]:e);if(!r)return function(){};var o=r.requestAnimationFrame(i);return r.addEventListener("resize",i,!1),function(){r.cancelAnimationFrame(o),r.removeEventListener("resize",i,!1)}}(e,function(t){s.current=t?t[0].contentRect.width:e.clientWidth,o.current&&o.current()});return function(){t(),s.current=void 0}}),l=d(function(e){return c(e.parentElement),function(){return c(null)}});return(0,a.useIsomorphicLayoutEffect)(function(){var e=c.current,r=l.current;if(e&&r){for(var d=[],u=0;u<e.children.length;u++){var f=e.children[u];f instanceof HTMLElement&&f!==r&&d.push(f)}var p=[],m=0;o.current=function(){var e=s.current;if(void 0!==e){for(var t=d.length-1;t>=0;t--){if(void 0===p[t]){var a=n?e-d[t].offsetLeft:d[t].offsetLeft+d[t].offsetWidth;t+1<d.length&&t+1===i&&(m=p[t+1]-a),t===d.length-2&&(m+=r.offsetWidth),p[t]=a+m}if(e>p[t])return void h(t+1)}h(0)}};var _=d.length,h=function(e){_!==e&&(_=e,t(e,d.map(function(t,n){return{ele:t,isOverflowing:n>=e&&n!==i}})))},b=void 0;if(void 0!==s.current){var g=(0,a.getWindow)(e);if(g){var v=g.requestAnimationFrame(o.current);b=function(){return g.cancelAnimationFrame(v)}}}return function(){b&&b(),h(d.length),o.current=void 0}}}),{menuButtonRef:l}}({onOverflowItemsChanged:function(e,t){t.forEach(function(e){var t=e.ele,n=e.isOverflowing;return t.dataset.isOverflowing="".concat(n)}),B.items=L.links.slice(e).filter(function(e){return e.itemKey!==H}).map(function(t,a){return t.role="menuitem",{key:t.itemKey||"".concat(e+a),onRender:function(){return M(L,t,H,n.linkInMenu)}}})},rtl:(0,a.getRTL)(S),pinnedIndex:R}).menuButtonRef,V=w||c.CommandButton;return r.createElement("div",(0,i.__assign)({ref:t},A),r.createElement(c.FocusZone,(0,i.__assign)({componentRef:u,role:"tablist"},E,{direction:c.FocusZoneDirection.horizontal},O,{className:(0,a.css)(n.root,null==O?void 0:O.className)}),N,"menu"===x&&r.createElement(V,{className:(0,a.css)(n.link,n.overflowMenuButton),elementRef:j,componentRef:_,menuProps:B,menuIconProps:{iconName:"More",style:{color:"inherit"}},ariaLabel:C,role:"tab"})),H&&L.links.map(function(t){return(!0===t.alwaysRender||H===t.itemKey)&&function(t,a){if(e.headersOnly||!t)return null;var i=L.keyToIndexMapping[t],o=L.keyToTabIdMapping[t];return r.createElement("div",{role:"tabpanel",hidden:!a,key:t,"aria-hidden":!a,"aria-labelledby":o,className:n.itemContainer},r.Children.toArray(e.children)[i])}(t.itemKey,H===t.itemKey)}))});_.displayName="Pivot";var h=n(4538),b={count:"ms-Pivot-count",icon:"ms-Pivot-icon",linkIsSelected:"is-selected",link:"ms-Pivot-link",linkContent:"ms-Pivot-linkContent",root:"ms-Pivot",rootIsLarge:"ms-Pivot--large",rootIsTabs:"ms-Pivot--tabs",text:"ms-Pivot-text",linkInMenu:"ms-Pivot-linkInMenu",overflowMenuButton:"ms-Pivot-overflowMenuButton"},g=function(e,t,n){var r,o,s;void 0===n&&(n=!1);var c=e.linkSize,d=e.linkFormat,l=e.theme,u=l.semanticColors,f=l.fonts,p="large"===c,m="tabs"===d;return[f.medium,{color:u.actionLink,padding:"0 8px",position:"relative",backgroundColor:"transparent",border:0,borderRadius:0,selectors:{":hover":{backgroundColor:u.buttonBackgroundHovered,color:u.buttonTextHovered,cursor:"pointer"},":active":{backgroundColor:u.buttonBackgroundPressed,color:u.buttonTextHovered},":focus":{outline:"none"}}},!n&&[{display:"inline-block",lineHeight:44,height:44,marginRight:8,textAlign:"center",selectors:(r={},r[".".concat(a.IsFocusVisibleClassName," &:focus, :host(.").concat(a.IsFocusVisibleClassName,") &:focus")]={outline:"1px solid ".concat(u.focusBorder)},r[".".concat(a.IsFocusVisibleClassName," &:focus:after, :host(.").concat(a.IsFocusVisibleClassName,") &:focus:after")]={content:"attr(data-content)",position:"relative",border:0},r[":before"]={backgroundColor:"transparent",bottom:0,content:'""',height:2,left:8,position:"absolute",right:8,transition:"left ".concat(h.AnimationVariables.durationValue2," ").concat(h.AnimationVariables.easeFunction2,",\n                        right ").concat(h.AnimationVariables.durationValue2," ").concat(h.AnimationVariables.easeFunction2)},r[":after"]={color:"transparent",content:"attr(data-content)",display:"block",fontWeight:h.FontWeights.bold,height:1,overflow:"hidden",visibility:"hidden"},r)},p&&{fontSize:f.large.fontSize},m&&[{marginRight:0,height:44,lineHeight:44,backgroundColor:u.buttonBackground,padding:"0 10px",verticalAlign:"top",selectors:(o={":focus":{outlineOffset:"-2px"}},o[".".concat(a.IsFocusVisibleClassName," &:focus::before, :host(.").concat(a.IsFocusVisibleClassName,") &:focus::before")]={height:"auto",background:"transparent",transition:"none"},o["&:hover, &:focus"]={color:u.buttonTextCheckedHovered},o["&:active, &:hover"]={color:u.primaryButtonText,backgroundColor:u.primaryButtonBackground},o["&.".concat(t.linkIsSelected)]={backgroundColor:u.primaryButtonBackground,color:u.primaryButtonText,fontWeight:h.FontWeights.regular,selectors:(s={":before":{backgroundColor:"transparent",transition:"none",position:"absolute",top:0,left:0,right:0,bottom:0,content:'""',height:0},":hover":{backgroundColor:u.primaryButtonBackgroundHovered,color:u.primaryButtonText},":active":{backgroundColor:u.primaryButtonBackgroundPressed,color:u.primaryButtonText}},s[h.HighContrastSelector]=(0,i.__assign)({fontWeight:h.FontWeights.semibold,color:"HighlightText",background:"Highlight"},(0,h.getHighContrastNoAdjustStyle)()),s)},o[".".concat(a.IsFocusVisibleClassName," &.").concat(t.linkIsSelected,":focus, :host(.").concat(a.IsFocusVisibleClassName,") &.").concat(t.linkIsSelected,":focus")]={outlineColor:u.primaryButtonText},o)}]]]},v=(0,a.styled)(_,function(e){var t,n,a,r,o=e.className,s=e.linkSize,c=e.linkFormat,d=e.theme,l=d.semanticColors,u=d.fonts,f=(0,h.getGlobalClassNames)(b,d),p="large"===s,m="tabs"===c;return{root:[f.root,u.medium,h.normalize,{position:"relative",color:l.link,whiteSpace:"nowrap"},p&&f.rootIsLarge,m&&f.rootIsTabs,o],itemContainer:{selectors:{"&[hidden]":{display:"none"}}},link:(0,i.__spreadArray)((0,i.__spreadArray)([f.link],g(e,f),!0),[(t={},t["&[data-is-overflowing='true']"]={display:"none"},t)],!1),overflowMenuButton:[f.overflowMenuButton,(n={visibility:"hidden",position:"absolute",right:0},n[".".concat(f.link,"[data-is-overflowing='true'] ~ &")]={visibility:"visible",position:"relative"},n)],linkInMenu:(0,i.__spreadArray)((0,i.__spreadArray)([f.linkInMenu],g(e,f,!0),!0),[{justifyContent:"start",height:36,lineHeight:36,width:"100%"}],!1),linkIsSelected:[f.link,f.linkIsSelected,{fontWeight:h.FontWeights.semibold,selectors:(a={":before":{backgroundColor:l.inputBackgroundChecked,selectors:(r={},r[h.HighContrastSelector]={backgroundColor:"Highlight"},r)},":hover::before":{left:0,right:0}},a[h.HighContrastSelector]={color:"Highlight"},a)}],linkContent:[f.linkContent,{flex:"0 1 100%",selectors:{"& > * ":{marginLeft:4},"& > *:first-child":{marginLeft:0}}}],text:[f.text,{display:"inline-block",verticalAlign:"top"}],count:[f.count,{display:"inline-block",verticalAlign:"top"}],icon:f.icon}},void 0,{scope:"Pivot"})}
,7328:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var a=n(280),i=n(5959),r=n(350),o=function(e){function t(t){var n=e.call(this,t)||this;return(0,r.initializeComponentRef)(n),(0,r.warnDeprecations)("PivotItem",t,{linkText:"headerText"}),n}return(0,a.__extends)(t,e),t.prototype.render=function(){return i.createElement("div",(0,a.__assign)({},(0,r.getNativeProps)(this.props,r.divProperties)),this.props.children)},t}(i.Component)}
,6018:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(350),i=n(280),r=n(5959),o=n(6809),s=n(386),c=n(9349),d=n(6078),l=n(7864),u=n(5944),f=(0,a.classNamesFunction)(),p=function(e){return function(t){var n;return(n={})[e]="".concat(t,"%"),n}},m=function(e,t,n){return n===t?0:(e-t)/(n-t)*100},_=r.forwardRef(function(e,t){var n=function(e,t){var n=e.step,o=void 0===n?1:n,_=e.className,h=e.disabled,b=void 0!==h&&h,g=e.label,v=e.max,y=void 0===v?10:v,S=e.min,D=void 0===S?0:S,I=e.showValue,x=void 0===I||I,C=e.buttonProps,O=void 0===C?{}:C,w=e.vertical,E=void 0!==w&&w,A=e.snapToStep,L=e.valueFormat,k=e.styles,M=e.theme,P=e.originFromZero,T=e["aria-labelledby"],U=e.ariaLabel,F=void 0===U?e["aria-label"]:U,H=e.ranged,R=e.onChange,N=e.onChanged,B=r.useRef([]),j=(0,s.j)(),V=j.setTimeout,z=j.clearTimeout,G=r.useRef(null),K=(0,u.tX)(),W=(0,c.k)(e.value,e.defaultValue,function(e,t){return null==R?void 0:R(t,H?[ee.latestLowerValue,t]:void 0,e)}),q=W[0],Q=W[1],Y=(0,c.k)(e.lowerValue,e.defaultLowerValue,function(e,t){return null==R?void 0:R(ee.latestValue,[t,ee.latestValue],e)}),J=Y[0],X=Y[1],Z=Math.max(D,Math.min(y,q||0)),$=Math.max(D,Math.min(Z,J||0)),ee=(0,d.d)({onKeyDownTimer:-1,isAdjustingLowerValue:!1,latestValue:Z,latestLowerValue:$});ee.latestValue=Z,ee.latestLowerValue=$;var te=(0,l.B)("Slider",e.id||(null==O?void 0:O.id)),ne=f(k,{className:_,disabled:b,vertical:E,showTransitions:!A&&!ee.isBetweenSteps,showValue:x,ranged:H,theme:M}),ae=(y-D)/o,ie=function(){z(ee.onKeyDownTimer),ee.onKeyDownTimer=-1},re=function(e){ie(),N&&(ee.onKeyDownTimer=V(function(){N(e,ee.latestValue,H?[ee.latestLowerValue,ee.latestValue]:void 0)},1e3))},oe=function(t){var n=e.ariaValueText;if(void 0!==t)return n?n(t):t.toString()},se=function(e,t,n){t=Math.min(y,Math.max(D,t)),n=void 0!==n?Math.min(y,Math.max(D,n)):void 0;var a=0;if(isFinite(o))for(;Math.round(o*Math.pow(10,a))/Math.pow(10,a)!==o;)a++;var i=parseFloat(t.toFixed(a));ee.isBetweenSteps=void 0!==n&&n!==i,H?ee.isAdjustingLowerValue&&(P?i<=0:i<=ee.latestValue)?X(i,e):!ee.isAdjustingLowerValue&&(P?i>=0:i>=ee.latestLowerValue)&&Q(i,e):Q(i,e)},ce=function(e,t){var n=0;switch(e.type){case"mousedown":case"mousemove":n=t?e.clientY:e.clientX;break;case"touchstart":case"touchmove":n=t?e.touches[0].clientY:e.touches[0].clientX}return n},de=function(t){var n,i=G.current.getBoundingClientRect(),r=(e.vertical?i.height:i.width)/ae;if(e.vertical){var o=ce(t,e.vertical);n=(i.bottom-o)/r}else{var s=ce(t,e.vertical);n=((0,a.getRTL)(e.theme)?i.right-s:s-i.left)/r}return n},le=function(e,t){var n=de(e),a=D+o*n,i=D+o*Math.round(n);se(e,i,a),t||(e.preventDefault(),e.stopPropagation())},ue=function(e){if(H){var t=de(e),n=D+o*t;ee.isAdjustingLowerValue=n<=ee.latestLowerValue||n-ee.latestLowerValue<=ee.latestValue-n}"mousedown"===e.type?B.current.push((0,a.on)(K,"mousemove",le,!0),(0,a.on)(K,"mouseup",fe,!0)):"touchstart"===e.type&&B.current.push((0,a.on)(K,"touchmove",le,!0),(0,a.on)(K,"touchend",fe,!0)),le(e,!0)},fe=function(e){ee.isBetweenSteps=void 0,null==N||N(e,ee.latestValue,H?[ee.latestLowerValue,ee.latestValue]:void 0),pe()},pe=r.useCallback(function(){B.current.forEach(function(e){return e()}),B.current=[]},[]);r.useEffect(function(){return pe},[pe]);var me=r.useRef(null),_e=r.useRef(null),he=r.useRef(null);!function(e,t,n,a){r.useImperativeHandle(e.componentRef,function(){return{get value(){return n},get range(){return a},focus:function(){var e;null===(e=t.current)||void 0===e||e.focus()}}},[a,t,n])}(e,he,Z,H?[$,Z]:void 0);var be=p(E?"bottom":(0,a.getRTL)(e.theme)?"right":"left"),ge=p(E?"height":"width"),ve=P?0:D,ye=m(Z,D,y),Se=m($,D,y),De=m(ve,D,y),Ie=H?ye-Se:Math.abs(De-ye),xe=Math.min(100-ye,100-De),Ce=H?Se:Math.min(ye,De),Oe={className:ne.root,ref:t},we={className:ne.titleLabel,children:g,disabled:b,htmlFor:F?void 0:te},Ee=x?{className:ne.valueLabel,children:L?L(Z):Z,disabled:b,htmlFor:b?te:void 0}:void 0,Ae=H&&x?{className:ne.valueLabel,children:L?L($):$,disabled:b}:void 0,Le=P?{className:ne.zeroTick,style:be(De)}:void 0,ke={className:(0,a.css)(ne.lineContainer,ne.activeSection),style:ge(Ie)},Me={className:(0,a.css)(ne.lineContainer,ne.inactiveSection),style:ge(xe)},Pe={className:(0,a.css)(ne.lineContainer,ne.inactiveSection),style:ge(Ce)},Te=(0,i.__assign)({"aria-disabled":b,role:"slider",tabIndex:b?void 0:0},{"data-is-focusable":!b}),Ue=(0,i.__assign)((0,i.__assign)((0,i.__assign)({id:te,className:(0,a.css)(ne.slideBox,O.className),ref:he},!b&&{onMouseDown:ue,onTouchStart:ue,onKeyDown:function(t){var n=ee.isAdjustingLowerValue?ee.latestLowerValue:ee.latestValue,i=0;switch(t.which){case(0,a.getRTLSafeKeyCode)(a.KeyCodes.left,e.theme):case a.KeyCodes.down:i=-o,ie(),re(t);break;case(0,a.getRTLSafeKeyCode)(a.KeyCodes.right,e.theme):case a.KeyCodes.up:i=o,ie(),re(t);break;case a.KeyCodes.home:n=D,ie(),re(t);break;case a.KeyCodes.end:n=y,ie(),re(t);break;default:return}se(t,n+i),t.preventDefault(),t.stopPropagation()}}),O&&(0,a.getNativeProps)(O,a.divProperties,["id","className"])),!H&&(0,i.__assign)((0,i.__assign)({},Te),{"aria-valuemin":D,"aria-valuemax":y,"aria-valuenow":Z,"aria-valuetext":oe(Z),"aria-label":F||g,"aria-labelledby":T})),Fe=b?{}:{onFocus:function(e){ee.isAdjustingLowerValue=e.target===me.current}},He=(0,i.__assign)({ref:_e,className:ne.thumb,style:be(ye)},H&&(0,i.__assign)((0,i.__assign)((0,i.__assign)({},Te),Fe),{id:"max-".concat(te),"aria-valuemin":$,"aria-valuemax":y,"aria-valuenow":Z,"aria-valuetext":oe(Z),"aria-label":"max ".concat(F||g)})),Re=H?(0,i.__assign)((0,i.__assign)((0,i.__assign)({ref:me,className:ne.thumb,style:be(Se)},Te),Fe),{id:"min-".concat(te),"aria-valuemin":D,"aria-valuemax":Z,"aria-valuenow":$,"aria-valuetext":oe($),"aria-label":"min ".concat(F||g)}):void 0;return{root:Oe,label:we,sliderBox:Ue,container:{className:ne.container},valueLabel:Ee,lowerValueLabel:Ae,thumb:He,lowerValueThumb:Re,zeroTick:Le,activeTrack:ke,topInactiveTrack:Me,bottomInactiveTrack:Pe,sliderLine:{ref:G,className:ne.line}}}(e,t);return r.createElement("div",(0,i.__assign)({},n.root),n&&r.createElement(o.J,(0,i.__assign)({},n.label)),r.createElement("div",(0,i.__assign)({},n.container),e.ranged&&(e.vertical?n.valueLabel&&r.createElement(o.J,(0,i.__assign)({},n.valueLabel)):n.lowerValueLabel&&r.createElement(o.J,(0,i.__assign)({},n.lowerValueLabel))),r.createElement("div",(0,i.__assign)({},n.sliderBox),r.createElement("div",(0,i.__assign)({},n.sliderLine),e.ranged&&r.createElement("span",(0,i.__assign)({},n.lowerValueThumb)),r.createElement("span",(0,i.__assign)({},n.thumb)),n.zeroTick&&r.createElement("span",(0,i.__assign)({},n.zeroTick)),r.createElement("span",(0,i.__assign)({},n.bottomInactiveTrack)),r.createElement("span",(0,i.__assign)({},n.activeTrack)),r.createElement("span",(0,i.__assign)({},n.topInactiveTrack)))),e.ranged&&e.vertical?n.lowerValueLabel&&r.createElement(o.J,(0,i.__assign)({},n.lowerValueLabel)):n.valueLabel&&r.createElement(o.J,(0,i.__assign)({},n.valueLabel))),r.createElement(a.FocusRects,null))});_.displayName="SliderBase";var h=n(4538),b={root:"ms-Slider",enabled:"ms-Slider-enabled",disabled:"ms-Slider-disabled",row:"ms-Slider-row",column:"ms-Slider-column",container:"ms-Slider-container",slideBox:"ms-Slider-slideBox",line:"ms-Slider-line",thumb:"ms-Slider-thumb",activeSection:"ms-Slider-active",inactiveSection:"ms-Slider-inactive",valueLabel:"ms-Slider-value",showValue:"ms-Slider-showValue",showTransitions:"ms-Slider-showTransitions",zeroTick:"ms-Slider-zeroTick"},g=(0,a.styled)(_,function(e){var t,n,r,o,s,c,d,l,u,f,p,m,_,g=e.className,v=e.titleLabelClassName,y=e.theme,S=e.vertical,D=e.disabled,I=e.showTransitions,x=e.showValue,C=e.ranged,O=y.semanticColors,w=y.palette,E=(0,h.getGlobalClassNames)(b,y),A=O.inputBackgroundCheckedHovered,L=O.inputBackgroundChecked,k=w.neutralSecondaryAlt,M=w.neutralPrimary,P=w.neutralSecondaryAlt,T=O.disabledText,U=O.disabledBackground,F=O.inputBackground,H=O.smallInputBorder,R=O.disabledBorder,N=!D&&{backgroundColor:A,selectors:(t={},t[h.HighContrastSelector]={backgroundColor:"Highlight"},t)},B=!D&&{backgroundColor:k,selectors:(n={},n[h.HighContrastSelector]={borderColor:"Highlight"},n)},j=!D&&{backgroundColor:L,selectors:(r={},r[h.HighContrastSelector]={backgroundColor:"Highlight"},r)},V=!D&&{border:"2px solid ".concat(A),selectors:(o={},o[h.HighContrastSelector]={borderColor:"Highlight"},o)},z=!e.disabled&&{backgroundColor:O.inputPlaceholderBackgroundChecked,selectors:(s={},s[h.HighContrastSelector]={backgroundColor:"Highlight"},s)};return{root:(0,i.__spreadArray)((0,i.__spreadArray)((0,i.__spreadArray)((0,i.__spreadArray)((0,i.__spreadArray)([E.root,y.fonts.medium,{userSelect:"none"},S&&{marginRight:8}],[D?void 0:E.enabled],!1),[D?E.disabled:void 0],!1),[S?void 0:E.row],!1),[S?E.column:void 0],!1),[g],!1),titleLabel:[{padding:0},v],container:[E.container,{display:"flex",flexWrap:"nowrap",alignItems:"center"},S&&{flexDirection:"column",height:"100%",textAlign:"center",margin:"8px 0"}],slideBox:(0,i.__spreadArray)((0,i.__spreadArray)([E.slideBox,!C&&(0,h.getFocusStyle)(y),{background:"transparent",border:"none",flexGrow:1,lineHeight:28,display:"flex",alignItems:"center",selectors:(c={},c[":active .".concat(E.activeSection)]=N,c[":hover .".concat(E.activeSection)]=j,c[":active .".concat(E.inactiveSection)]=B,c[":hover .".concat(E.inactiveSection)]=B,c[":active .".concat(E.thumb)]=V,c[":hover .".concat(E.thumb)]=V,c[":active .".concat(E.zeroTick)]=z,c[":hover .".concat(E.zeroTick)]=z,c[h.HighContrastSelector]={forcedColorAdjust:"none"},c)},S?{height:"100%",width:28,padding:"8px 0"}:{height:28,width:"auto",padding:"0 8px"}],[x?E.showValue:void 0],!1),[I?E.showTransitions:void 0],!1),thumb:[E.thumb,C&&(0,h.getFocusStyle)(y,{inset:-4}),{borderWidth:2,borderStyle:"solid",borderColor:H,borderRadius:10,boxSizing:"border-box",background:F,display:"block",width:16,height:16,position:"absolute"},S?{left:-6,margin:"0 auto",transform:"translateY(8px)"}:{top:-6,transform:(0,a.getRTL)(y)?"translateX(50%)":"translateX(-50%)"},I&&{transition:"left ".concat(h.AnimationVariables.durationValue3," ").concat(h.AnimationVariables.easeFunction1)},D&&{borderColor:R,selectors:(d={},d[h.HighContrastSelector]={borderColor:"GrayText"},d)}],line:[E.line,{display:"flex",position:"relative"},S?{height:"100%",width:4,margin:"0 auto",flexDirection:"column-reverse"}:{width:"100%"}],lineContainer:[{borderRadius:4,boxSizing:"border-box"},S?{width:4,height:"100%"}:{height:4,width:"100%"}],activeSection:[E.activeSection,{background:M,selectors:(l={},l[h.HighContrastSelector]={backgroundColor:"WindowText"},l)},I&&{transition:"width ".concat(h.AnimationVariables.durationValue3," ").concat(h.AnimationVariables.easeFunction1)},D&&{background:T,selectors:(u={},u[h.HighContrastSelector]={backgroundColor:"GrayText",borderColor:"GrayText"},u)}],inactiveSection:[E.inactiveSection,{background:P,selectors:(f={},f[h.HighContrastSelector]={border:"1px solid WindowText"},f)},I&&{transition:"width ".concat(h.AnimationVariables.durationValue3," ").concat(h.AnimationVariables.easeFunction1)},D&&{background:U,selectors:(p={},p[h.HighContrastSelector]={borderColor:"GrayText"},p)}],zeroTick:[E.zeroTick,{position:"absolute",background:O.disabledBorder,selectors:(m={},m[h.HighContrastSelector]={backgroundColor:"WindowText"},m)},e.disabled&&{background:O.disabledBackground,selectors:(_={},_[h.HighContrastSelector]={backgroundColor:"GrayText"},_)},e.vertical?{width:"16px",height:"1px",transform:(0,a.getRTL)(y)?"translateX(6px)":"translateX(-6px)"}:{width:"1px",height:"16px",transform:"translateY(-6px)"}],valueLabel:[E.valueLabel,{flexShrink:1,width:30,lineHeight:"1"},S?{margin:"0 auto",whiteSpace:"nowrap",width:40}:{margin:"0 8px",whiteSpace:"nowrap",width:40}]}},void 0,{scope:"Slider"})}
,4035:(e,t,n)=>{"use strict";n.d(t,{G:()=>w});var a=n(2141),i=n(280),r=n(5959),o=n(7864),s=(0,a.classNamesFunction)(),c=r.forwardRef(function(e,t){var n=(0,o.B)(void 0,e.id),c=e.items,d=e.columnCount,l=e.onRenderItem,u=e.isSemanticRadio,f=e.ariaPosInSet,p=void 0===f?e.positionInSet:f,m=e.ariaSetSize,_=void 0===m?e.setSize:m,h=e.styles,b=e.doNotContainWithinFocusZone,g=(0,a.getNativeProps)(e,a.htmlElementProperties,b?[]:["onBlur"]),v=s(h,{theme:e.theme}),y=(0,a.toMatrix)(c,d),S=r.createElement("table",(0,i.__assign)({"aria-posinset":p,"aria-setsize":_,id:n,role:u?"radiogroup":"grid"},g,{className:v.root}),r.createElement("tbody",{role:u?"presentation":"rowgroup"},y.map(function(e,t){return r.createElement("tr",{role:u?"presentation":"row",key:t},e.map(function(e,t){return r.createElement("td",{role:"presentation",key:t+"-cell",className:v.tableCell},l(e,t))}))})));return b?S:r.createElement(a.FocusZone,{elementRef:t,isCircularNavigation:e.shouldFocusCircularNavigate,className:v.focusedContainer,onBlur:e.onBlur},S)}),d=(0,a.styled)(c,function(e){return{root:{padding:2,outline:"none"},tableCell:{padding:0}}});d.displayName="ButtonGrid";var l=n(6147),u=n(2865),f={outline:0},p=function(e){return{fontSize:e,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},m=(0,a.memoizeFunction)(function(e){var t,n,i=e.semanticColors,r=e.effects,o=e.fonts,s=i.buttonBorder,c=i.disabledBackground,d=i.disabledText,l={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[(0,a.getFocusStyle)(e,{inset:1,highContrastStyle:l,borderColor:"transparent"}),e.fonts.medium,{border:"1px solid "+s,borderRadius:r.roundedCorner2,boxSizing:"border-box",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 16px",textDecoration:"none",textAlign:"center",userSelect:"none",":active > span":{position:"relative",left:0,top:0}}],rootDisabled:[(0,a.getFocusStyle)(e,{inset:1,highContrastStyle:l,borderColor:"transparent"}),{backgroundColor:c,borderColor:c,color:d,cursor:"default",":hover":f,":focus":f}],iconDisabled:(t={color:d},t[a.HighContrastSelector]={color:"GrayText"},t),menuIconDisabled:(n={color:d},n[a.HighContrastSelector]={color:"GrayText"},n),flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:p(o.mediumPlus.fontSize),menuIcon:p(o.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:a.hiddenContentStyle}}),_=(0,a.memoizeFunction)(function(e,t){var n,i,r,o=m(e),s={root:(n={padding:"0 4px",height:"40px",color:e.palette.neutralPrimary,backgroundColor:"transparent",border:"1px solid transparent"},n[a.HighContrastSelector]={borderColor:"Window"},n),rootHovered:(i={color:e.palette.themePrimary},i[a.HighContrastSelector]={color:"Highlight"},i),iconHovered:{color:e.palette.themePrimary},rootPressed:{color:e.palette.black},rootExpanded:{color:e.palette.themePrimary},iconPressed:{color:e.palette.themeDarker},rootDisabled:(r={color:e.palette.neutralTertiary,backgroundColor:"transparent",borderColor:"transparent"},r[a.HighContrastSelector]={color:"GrayText"},r),rootChecked:{color:e.palette.black},iconChecked:{color:e.palette.themeDarker},flexContainer:{justifyContent:"flex-start"},icon:{color:e.palette.themeDarkAlt},iconDisabled:{color:"inherit"},menuIcon:{color:e.palette.neutralSecondary},textContainer:{flexGrow:0}};return(0,a.concatStyleSets)(o,s,t)}),h=(0,a.classNamesFunction)(),b=(0,a.memoizeFunction)(function(e,t,n,i,r,o,s,c,d){var l=_(e);return(0,a.mergeStyleSets)({root:["ms-Button",l.root,n,t,s&&["is-checked",l.rootChecked],o&&["is-disabled",l.rootDisabled],!o&&!s&&{selectors:{":hover":l.rootHovered,":focus":l.rootFocused,":active":l.rootPressed}},o&&s&&[l.rootCheckedDisabled],!o&&s&&{selectors:{":hover":l.rootCheckedHovered,":active":l.rootCheckedPressed}}],flexContainer:["ms-Button-flexContainer",l.flexContainer]})}),g={left:-2,top:-2,bottom:-2,right:-2,border:"none",outlineColor:"ButtonText"},v=(0,a.styled)(function(e){var t,n,a=e.item,o=e.idPrefix,s=void 0===o?e.id:o,c=e.isRadio,d=e.selected,f=void 0!==d&&d,p=e.disabled,m=void 0!==p&&p,_=e.styles,g=e.circle,v=void 0===g||g,y=e.color,S=e.onClick,D=e.onHover,I=e.onFocus,x=e.onMouseEnter,C=e.onMouseMove,O=e.onMouseLeave,w=e.onWheel,E=e.onKeyDown,A=e.height,L=e.width,k=e.borderWidth,M=h(_,{theme:e.theme,disabled:m,selected:f,circle:v,isWhite:(t=y,n=(0,l.n)(t),"ffffff"===(null==n?void 0:n.hex)),height:A,width:L,borderWidth:k}),P=function(e){var t,n=M.svg;return r.createElement("svg",{className:n,role:"img","aria-label":e.label,viewBox:"0 0 20 20",fill:null===(t=(0,l.n)(e.color))||void 0===t?void 0:t.str},v?r.createElement("circle",{cx:"50%",cy:"50%",r:"50%"}):r.createElement("rect",{width:"100%",height:"100%"}))},T=c?{role:"radio","aria-checked":f,selected:void 0}:{role:"gridcell",selected:f};return r.createElement(u.D,(0,i.__assign)({item:a,id:"".concat(s,"-").concat(a.id,"-").concat(a.index),key:a.id,disabled:m},T,{onRenderItem:function(t){var n=e.onRenderColorCellContent;return(void 0===n?P:n)(t,P)},onClick:S,onHover:D,onFocus:I,label:a.label,className:M.colorCell,getClassNames:b,index:a.index,onMouseEnter:x,onMouseMove:C,onMouseLeave:O,onWheel:w,onKeyDown:E}))},function(e){var t,n,i,r,o,s,c=e.theme,d=e.disabled,l=e.selected,u=e.circle,f=e.isWhite,p=e.height,m=void 0===p?20:p,_=e.width,h=void 0===_?20:_,b=e.borderWidth,v=c.semanticColors,y=c.palette,S=y.neutralLighter,D=y.neutralLight,I=y.neutralSecondary,x=y.neutralTertiary,C=b||(h<24?2:4);return{colorCell:[(0,a.getFocusStyle)(c,{inset:-1,position:"relative",highContrastStyle:g}),{backgroundColor:v.bodyBackground,padding:0,position:"relative",boxSizing:"border-box",display:"inline-block",cursor:"pointer",userSelect:"none",borderRadius:0,border:"none",height:m,width:h,verticalAlign:"top","forced-color-adjust":"none"},!u&&{selectors:(t={},t[".".concat(a.IsFocusVisibleClassName," &:focus::after, :host(.").concat(a.IsFocusVisibleClassName,") &:focus::after")]={outlineOffset:"".concat(C-1,"px")},t)},u&&{borderRadius:"50%",selectors:(n={},n[".".concat(a.IsFocusVisibleClassName," &:focus::after, :host(.").concat(a.IsFocusVisibleClassName,") &:focus::after")]={outline:"none",borderColor:v.focusBorder,borderRadius:"50%",left:-C,right:-C,top:-C,bottom:-C,selectors:(i={},i[a.HighContrastSelector]={outline:"1px solid ButtonText"},i)},n)},l&&{padding:2,border:"".concat(C,"px solid ").concat(D),selectors:(r={},r["&:hover::before"]={content:'""',height:m,width:h,position:"absolute",top:-C,left:-C,borderRadius:u?"50%":"default",boxShadow:"inset 0 0 0 1px ".concat(I)},r)},!l&&{selectors:(o={},o["&:hover, &:active, &:focus"]={backgroundColor:v.bodyBackground,padding:2,border:"".concat(C,"px solid ").concat(S)},o["&:focus"]={borderColor:v.bodyBackground,padding:0,selectors:{":hover":{borderColor:c.palette.neutralLight,padding:2}}},o)},d&&{color:v.disabledBodyText,pointerEvents:"none",opacity:.3},f&&!l&&{backgroundColor:x,padding:1,selectors:(s={},s[a.HighContrastSelector]={outline:"1px solid ButtonText"},s)}],svg:[{width:"100%",height:"100%"},u&&{borderRadius:"50%"}]}},void 0,{scope:"ColorPickerGridCell"},!0),y=n(6078),S=n(386),D=n(9349),I=n(5944),x=(0,a.classNamesFunction)(),C=r.forwardRef(function(e,t){var n=(0,o.B)("swatchColorPicker"),s=e.id||n,c=(0,I.EQ)(),l=(0,y.d)({isNavigationIdle:!0,cellFocused:!1,navigationIdleTimeoutId:void 0,navigationIdleDelay:250}),u=(0,S.j)(),f=u.setTimeout,p=u.clearTimeout,m=e.colorCells,_=e.cellShape,h=void 0===_?"circle":_,b=e.columnCount,g=e.shouldFocusCircularNavigate,C=void 0===g||g,O=e.className,w=e.disabled,E=void 0!==w&&w,A=e.doNotContainWithinFocusZone,L=e.styles,k=e.cellMargin,M=void 0===k?10:k,P=e.defaultSelectedId,T=e.focusOnHover,U=e.mouseLeaveParentSelector,F=e.onChange,H=e.onColorChanged,R=e.onCellHovered,N=e.onCellFocused,B=e.getColorGridCellStyles,j=e.cellHeight,V=e.cellWidth,z=e.cellBorderWidth,G=e.onRenderColorCellContent,K=r.useMemo(function(){return m.map(function(e,t){return(0,i.__assign)((0,i.__assign)({},e),{index:t})})},[m]),W=r.useCallback(function(e,t){var n,a=null===(n=m.filter(function(e){return e.id===t})[0])||void 0===n?void 0:n.color;null==F||F(e,t,a),null==H||H(t,a)},[F,H,m]),q=(0,D.k)(e.selectedId,P,W),Q=q[0],Y=q[1],J=x(L,{theme:e.theme,className:O,cellMargin:M}),X={root:J.root,tableCell:J.tableCell,focusedContainer:J.focusedContainer},Z=m.length<=b,$=r.useCallback(function(e){N&&(l.cellFocused=!1,N(void 0,void 0,e))},[l,N]),ee=r.useCallback(function(e){return T?(l.isNavigationIdle&&!E&&e.currentTarget.focus(),!0):!l.isNavigationIdle||!!E},[T,l,E]),te=r.useCallback(function(e){if(!T)return!l.isNavigationIdle||!!E;var t=e.currentTarget;return!l.isNavigationIdle||c&&t===c.activeElement||t.focus(),!0},[T,l,E,c]),ne=r.useCallback(function(e){var t,n=U;if(T&&n&&l.isNavigationIdle&&!E)for(var a=null!==(t=null==c?void 0:c.querySelectorAll(n))&&void 0!==t?t:[],i=0;i<a.length;i+=1)if(a[i].contains(e.currentTarget)){if(a[i].setActive)try{a[i].setActive()}catch(e){}else a[i].focus();break}},[E,T,l,U,c]),ae=r.useCallback(function(e,t){R&&(e?R(e.id,e.color,t):R(void 0,void 0,t))},[R]),ie=r.useCallback(function(e,t){if(N)return e?(l.cellFocused=!0,N(e.id,e.color,t)):(l.cellFocused=!1,N(void 0,void 0,t))},[l,N]),re=r.useCallback(function(e,t){E||e.disabled||e.id!==Q&&(N&&l.cellFocused&&(l.cellFocused=!1,N(void 0,void 0,t)),Y(e.id,t))},[E,l,N,Q,Y]),oe=r.useCallback(function(){l.isNavigationIdle||void 0===l.navigationIdleTimeoutId?l.isNavigationIdle=!1:(p(l.navigationIdleTimeoutId),l.navigationIdleTimeoutId=void 0),l.navigationIdleTimeoutId=f(function(){l.isNavigationIdle=!0},l.navigationIdleDelay)},[p,l,f]),se=r.useCallback(function(e){e.which!==a.KeyCodes.up&&e.which!==a.KeyCodes.down&&e.which!==a.KeyCodes.left&&e.which!==a.KeyCodes.right||oe()},[oe]),ce=function(e){return r.createElement(v,{item:e,idPrefix:s,color:e.color,styles:B,disabled:E||e.disabled,onClick:re,onHover:ae,onFocus:ie,selected:Q===e.id,circle:"circle"===h,label:e.label,onMouseEnter:ee,onMouseMove:te,onMouseLeave:ne,onWheel:oe,onKeyDown:se,onRenderColorCellContent:G,height:j,width:V,borderWidth:z,isRadio:Z})};return m.length<1||b<1?null:r.createElement(d,(0,i.__assign)({},e,{ref:t,id:s,items:K,columnCount:b,isSemanticRadio:Z,onRenderItem:function(t,n){var a=e.onRenderColorCell;return(void 0===a?ce:a)(t,ce)},shouldFocusCircularNavigate:C,doNotContainWithinFocusZone:A,onBlur:$,theme:e.theme,styles:X}))});C.displayName="SwatchColorPicker";var O={focusedContainer:"ms-swatchColorPickerBodyContainer"},w=(0,a.styled)(C,function(e){var t=e.className,n=e.theme;return{root:{margin:"8px 0",borderCollapse:"collapse"},tableCell:{padding:e.cellMargin/2},focusedContainer:[(0,a.getGlobalClassNames)(O,n).focusedContainer,{clear:"both",display:"block",minWidth:"180px"},t]}},void 0,{scope:"SwatchColorPicker"})}
,547:(e,t,n)=>{"use strict";n.d(t,{E:()=>m});var a=n(280),i=n(5959),r=n(4538),o=n(350),s=n(9816),c=a.__assign;function d(e,t){void 0===t&&(t={});var n=t.defaultProp,r=void 0===n?"children":n;return function(t,n,d,l,u){if(i.isValidElement(n))return n;var f=function(e,t){var n,a;return"string"==typeof t||"number"==typeof t||"boolean"==typeof t?((n={})[e]=t,a=n):a=t,a}(r,n),p=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];for(var i={},r=[],d=0,l=n;d<l.length;d++){var u=l[d];r.push(u&&u.className),c(i,u)}return i.className=(0,s.mergeCss)([e,r],{rtl:(0,o.getRTL)(t)}),i}(l,u,t,f);if(d){if(d.component){var m=d.component;return i.createElement(m,(0,a.__assign)({},p))}if(d.render)return d.render(p,e)}return i.createElement(e,(0,a.__assign)({},p))}}var l=(0,o.memoizeFunction)(function(e){return d(e)});function u(e,t,n,a,i,r){return void 0!==e.create?e.create(t,n,a,i):l(e)(t,n,a,i,r)}function f(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];for(var r={},o=0,s=n;o<s.length;o++){var d=s[o];d&&(d="function"==typeof d?d(e,t):d,Array.isArray(d)&&(d=f.apply(void 0,(0,a.__spreadArray)([e,t],d,!1))),c(r,d))}return r}var p=n(2141),m=function(e,t){void 0===t&&(t={});var n=t.factoryOptions,s=(void 0===n?{}:n).defaultProp,l=function(n){var s,c,d,l,u=(s=t.displayName,c=i.useContext(o.CustomizerContext),d=t.fields,l=["theme","styles","tokens"],o.Customizations.getSettings(d||l,s,c.customizations)),p=t.state;p&&(n=(0,a.__assign)((0,a.__assign)({},n),p(n)));var m=n.theme||u.theme,_=f(n,m,t.tokens,u.tokens,n.tokens),h=function(e,t,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return r.concatStyleSets.apply(void 0,a.map(function(a){return"function"==typeof a?a(e,t,n):a}))}(n,m,_,t.styles,u.styles,n.styles),b=(0,a.__assign)((0,a.__assign)({},n),{styles:h,tokens:_,_defaultStyles:h,theme:m});return e(b)};return l.displayName=t.displayName||e.name,s&&(l.create=d(l,{defaultProp:s})),c(l,t.statics),l}(function(e){if(null==e.children)return null;e.block,e.className;var t=e.as,n=void 0===t?"span":t,r=(e.variant,e.nowrap,(0,a.__rest)(e,["block","className","as","variant","nowrap"])),o=function(e,t){var n={},a=e,i=function(e){if(t.hasOwnProperty(e)){var i=function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(i.length>0)throw new Error("Any module using getSlots must use withSlots. Please see withSlots javadoc for more info.");return u(t[e],n,a[e],a.slots&&a.slots[e],a._defaultStyles&&a._defaultStyles[e],a.theme)};i.isSlot=!0,n[e]=i}};for(var r in t)i(r);return n}(e,{root:n});return function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e;return o.isSlot?0===(n=i.Children.toArray(n)).length?o(t):o((0,a.__assign)((0,a.__assign)({},t),{children:n})):i.createElement.apply(i,(0,a.__spreadArray)([e,t],n,!1))}(o.root,(0,a.__assign)({},(0,p.getNativeProps)(r,p.htmlElementProperties)))},{displayName:"Text",styles:function(e,t){var n=e.as,a=e.className,i=e.block,r=e.nowrap,o=e.variant,s=t.fonts,c=t.semanticColors,d=s[o||"medium"];return{root:[d,{color:d.color||c.bodyText,display:i?"td"===n?"table-cell":"block":"inline",mozOsxFontSmoothing:d.MozOsxFontSmoothing,webkitFontSmoothing:d.WebkitFontSmoothing},r&&{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},a]}}})}
,7884:(e,t,n)=>{"use strict";n.d(t,{l:()=>p});var a=n(350),i=n(280),r=n(5959),o=n(9349),s=n(7864),c=n(6809),d=(0,a.classNamesFunction)(),l=r.forwardRef(function(e,t){var n=e.as,l=void 0===n?"div":n,f=e.ariaLabel,p=e.checked,m=e.className,_=e.defaultChecked,h=void 0!==_&&_,b=e.disabled,g=e.inlineLabel,v=e.label,y=e.offAriaLabel,S=e.offText,D=e.onAriaLabel,I=e.onChange,x=e.onChanged,C=e.onClick,O=e.onText,w=e.role,E=e.styles,A=e.theme,L=(0,o.k)(p,h,r.useCallback(function(e,t){null==I||I(e,t),null==x||x(t)},[I,x])),k=L[0],M=L[1],P=d(E,{theme:A,className:m,disabled:b,checked:k,inlineLabel:g,onOffMissing:!O&&!S}),T=k?D:y,U=(0,s.B)("Toggle",e.id),F="".concat(U,"-label"),H="".concat(U,"-stateText"),R=k?O:S,N=(0,a.getNativeProps)(e,a.inputProperties,["defaultChecked"]),B=void 0;f||T||(v&&(B=F),R&&!B&&(B=H));var j=r.useRef(null);(0,a.useFocusRects)(j),u(e,k,j);var V={root:{className:P.root,hidden:N.hidden},label:{children:v,className:P.label,htmlFor:U,id:F},container:{className:P.container},pill:(0,i.__assign)((0,i.__assign)({},N),{"aria-disabled":b,"aria-checked":k,"aria-label":f||T,"aria-labelledby":B,className:P.pill,"data-is-focusable":!0,"data-ktp-target":!0,disabled:b,id:U,onClick:function(e){b||(M(!k,e),C&&C(e))},ref:j,role:w||"switch",type:"button"}),thumb:{className:P.thumb},stateText:{children:R,className:P.text,htmlFor:U,id:H}};return r.createElement(l,(0,i.__assign)({ref:t},V.root),v&&r.createElement(c.J,(0,i.__assign)({},V.label)),r.createElement("div",(0,i.__assign)({},V.container),r.createElement("button",(0,i.__assign)({},V.pill),r.createElement("span",(0,i.__assign)({},V.thumb))),(k&&O||S)&&r.createElement(c.J,(0,i.__assign)({},V.stateText))))});l.displayName="ToggleBase";var u=function(e,t,n){r.useImperativeHandle(e.componentRef,function(){return{get checked(){return!!t},focus:function(){n.current&&n.current.focus()}}},[t,n])},f=n(4538),p=(0,a.styled)(l,function(e){var t,n,a,r,o,s,c,d=e.theme,l=e.className,u=e.disabled,p=e.checked,m=e.inlineLabel,_=e.onOffMissing,h=d.semanticColors,b=d.palette,g=h.bodyBackground,v=h.inputBackgroundChecked,y=h.inputBackgroundCheckedHovered,S=b.neutralDark,D=h.disabledBodySubtext,I=h.smallInputBorder,x=h.inputForegroundChecked,C=h.disabledBodySubtext,O=h.disabledBackground,w=h.smallInputBorder,E=h.inputBorderHovered,A=h.disabledBodySubtext,L=h.disabledText;return{root:["ms-Toggle",p&&"is-checked",!u&&"is-enabled",u&&"is-disabled",d.fonts.medium,{marginBottom:"8px"},m&&{display:"flex",alignItems:"center"},l],label:["ms-Toggle-label",{display:"inline-block"},u&&{color:L,selectors:(t={},t[f.HighContrastSelector]={color:"GrayText"},t)},m&&!_&&{marginRight:16},_&&m&&{order:1,marginLeft:16},m&&{wordBreak:"break-word"}],container:["ms-Toggle-innerContainer",{display:"flex",position:"relative"}],pill:["ms-Toggle-background",(0,f.getFocusStyle)(d,{inset:-3}),{fontSize:"20px",boxSizing:"border-box",width:40,height:20,borderRadius:10,transition:"all 0.1s ease",border:"1px solid ".concat(w),background:g,cursor:"pointer",display:"flex",alignItems:"center",padding:"0 3px",overflow:"visible"},!u&&[!p&&{selectors:{":hover":[{borderColor:E}],":hover .ms-Toggle-thumb":[{backgroundColor:S,selectors:(n={},n[f.HighContrastSelector]={borderColor:"Highlight"},n)}]}},p&&[{background:v,borderColor:"transparent",justifyContent:"flex-end"},{selectors:(a={":hover":[{backgroundColor:y,borderColor:"transparent",selectors:(r={},r[f.HighContrastSelector]={backgroundColor:"Highlight"},r)}]},a[f.HighContrastSelector]=(0,i.__assign)({backgroundColor:"Highlight"},(0,f.getHighContrastNoAdjustStyle)()),a)}]],u&&[{cursor:"default"},!p&&[{borderColor:A}],p&&[{backgroundColor:D,borderColor:"transparent",justifyContent:"flex-end"}]],!u&&{selectors:{"&:hover":{selectors:(o={},o[f.HighContrastSelector]={borderColor:"Highlight"},o)}}}],thumb:["ms-Toggle-thumb",{display:"block",width:12,height:12,borderRadius:"50%",transition:"all 0.1s ease",backgroundColor:I,borderColor:"transparent",borderWidth:6,borderStyle:"solid",boxSizing:"border-box"},!u&&p&&[{backgroundColor:x,selectors:(s={},s[f.HighContrastSelector]={backgroundColor:"Window",borderColor:"Window"},s)}],u&&[!p&&[{backgroundColor:C}],p&&[{backgroundColor:O}]]],text:["ms-Toggle-stateText",{selectors:{"&&":{padding:"0",margin:"0 8px",userSelect:"none",fontWeight:f.FontWeights.regular}}},u&&{selectors:{"&&":{color:L,selectors:(c={},c[f.HighContrastSelector]={color:"GrayText"},c)}}}]}},void 0,{scope:"Toggle"})}
,2865:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var a=n(280),i=n(5959),r=n(2141),o=n(7864),s=function(e){var t,n=(0,o.B)("gridCell"),s=e.item,c=e.id,d=void 0===c?n:c,l=e.className,u=e.selected,f=e.disabled,p=void 0!==f&&f,m=e.onRenderItem,_=e.cellDisabledStyle,h=e.cellIsSelectedStyle,b=e.index,g=e.label,v=e.getClassNames,y=e.onClick,S=e.onHover,D=e.onMouseMove,I=e.onMouseLeave,x=e.onMouseEnter,C=e.onFocus,O=(0,r.getNativeProps)(e,r.buttonProperties),w=i.useCallback(function(e){y&&!p&&y(s,e)},[p,s,y]),E=i.useCallback(function(e){x&&x(e)||!S||p||S(s,e)},[p,s,S,x]),A=i.useCallback(function(e){D&&D(e)||!S||p||S(s,e)},[p,s,S,D]),L=i.useCallback(function(e){I&&I(e)||!S||p||S(void 0,e)},[p,S,I]),k=i.useCallback(function(e){C&&!p&&C(s,e)},[p,s,C]);return i.createElement(r.CommandButton,(0,a.__assign)({id:d,"data-index":b,"data-is-focusable":!0,"aria-selected":u,ariaLabel:g,title:g},O,{className:(0,r.css)(l,(t={},t[""+h]=u,t[""+_]=p,t)),onClick:w,onMouseEnter:E,onMouseMove:A,onMouseLeave:L,onFocus:k,getClassNames:v}),m(s))}}
,2744:(e,t,n)=>{"use strict";n.d(t,{D:()=>L});var a,i=n(5959),r=n(350),o={themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"};!function(e){e.depth0="0 0 0 0 transparent",e.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",e.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",e.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",e.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"}(a||(a={}));var s,c,d,l,u,f={elevation4:a.depth4,elevation8:a.depth8,elevation16:a.depth16,elevation64:a.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"},p=n(9816);!function(e){e.Arabic="Segoe UI Web (Arabic)",e.Cyrillic="Segoe UI Web (Cyrillic)",e.EastEuropean="Segoe UI Web (East European)",e.Greek="Segoe UI Web (Greek)",e.Hebrew="Segoe UI Web (Hebrew)",e.Thai="Leelawadee UI Web",e.Vietnamese="Segoe UI Web (Vietnamese)",e.WestEuropean="Segoe UI Web (West European)",e.Selawik="Selawik Web",e.Armenian="Segoe UI Web (Armenian)",e.Georgian="Segoe UI Web (Georgian)"}(s||(s={})),function(e){e.Arabic="'".concat(s.Arabic,"'"),e.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",e.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",e.Cyrillic="'".concat(s.Cyrillic,"'"),e.EastEuropean="'".concat(s.EastEuropean,"'"),e.Greek="'".concat(s.Greek,"'"),e.Hebrew="'".concat(s.Hebrew,"'"),e.Hindi="'Nirmala UI'",e.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",e.Korean="'Malgun Gothic', Gulim",e.Selawik="'".concat(s.Selawik,"'"),e.Thai="'Leelawadee UI Web', 'Kmer UI'",e.Vietnamese="'".concat(s.Vietnamese,"'"),e.WestEuropean="'".concat(s.WestEuropean,"'"),e.Armenian="'".concat(s.Armenian,"'"),e.Georgian="'".concat(s.Georgian,"'")}(c||(c={})),function(e){e.size10="10px",e.size12="12px",e.size14="14px",e.size16="16px",e.size18="18px",e.size20="20px",e.size24="24px",e.size28="28px",e.size32="32px",e.size42="42px",e.size68="68px",e.mini="10px",e.xSmall="10px",e.small="12px",e.smallPlus="12px",e.medium="14px",e.mediumPlus="16px",e.icon="16px",e.large="18px",e.xLarge="20px",e.xLargePlus="24px",e.xxLarge="28px",e.xxLargePlus="32px",e.superLarge="42px",e.mega="68px"}(d||(d={})),function(e){e.light=100,e.semilight=300,e.regular=400,e.semibold=600,e.bold=700}(l||(l={})),function(e){e.xSmall="10px",e.small="12px",e.medium="16px",e.large="20px"}(u||(u={}));var m="'Segoe UI', '".concat(s.WestEuropean,"'"),_={ar:c.Arabic,bg:c.Cyrillic,cs:c.EastEuropean,el:c.Greek,et:c.EastEuropean,he:c.Hebrew,hi:c.Hindi,hr:c.EastEuropean,hu:c.EastEuropean,ja:c.Japanese,kk:c.EastEuropean,ko:c.Korean,lt:c.EastEuropean,lv:c.EastEuropean,pl:c.EastEuropean,ru:c.Cyrillic,sk:c.EastEuropean,"sr-latn":c.EastEuropean,th:c.Thai,tr:c.EastEuropean,uk:c.Cyrillic,vi:c.Vietnamese,"zh-hans":c.ChineseSimplified,"zh-hant":c.ChineseTraditional,hy:c.Armenian,ka:c.Georgian};function h(e,t,n){return{fontFamily:n,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:e,fontWeight:t}}var b,g,v,y,S,D=(b=function(e){for(var t in _)if(_.hasOwnProperty(t)&&e&&0===t.indexOf(e))return _[t];return m}((0,r.getLanguage)()),g="".concat(b,", ").concat("'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif"),{tiny:h(d.mini,l.regular,g),xSmall:h(d.xSmall,l.regular,g),small:h(d.small,l.regular,g),smallPlus:h(d.smallPlus,l.regular,g),medium:h(d.medium,l.regular,g),mediumPlus:h(d.mediumPlus,l.regular,g),large:h(d.large,l.regular,g),xLarge:h(d.xLarge,l.semibold,g),xLargePlus:h(d.xLargePlus,l.semibold,g),xxLarge:h(d.xxLarge,l.semibold,g),xxLargePlus:h(d.xxLargePlus,l.semibold,g),superLarge:h(d.superLarge,l.semibold,g),mega:h(d.mega,l.semibold,g)});function I(e,t,n,a){e="'".concat(e,"'");var i=void 0!==a?"local('".concat(a,"'),"):"";(0,p.fontFace)({fontFamily:e,src:i+"url('".concat(t,".woff2') format('woff2'),")+"url('".concat(t,".woff') format('woff')"),fontWeight:n,fontStyle:"normal",fontDisplay:"swap"})}function x(e,t,n,a,i){void 0===a&&(a="segoeui");var r="".concat(e,"/").concat(n,"/").concat(a);I(t,r+"-light",l.light,i&&i+" Light"),I(t,r+"-semilight",l.semilight,i&&i+" SemiLight"),I(t,r+"-regular",l.regular,i),I(t,r+"-semibold",l.semibold,i&&i+" SemiBold"),I(t,r+"-bold",l.bold,i&&i+" Bold")}!function(e){if(e){var t="".concat(e,"/fonts");x(t,s.Thai,"leelawadeeui-thai","leelawadeeui"),x(t,s.Arabic,"segoeui-arabic"),x(t,s.Cyrillic,"segoeui-cyrillic"),x(t,s.EastEuropean,"segoeui-easteuropean"),x(t,s.Greek,"segoeui-greek"),x(t,s.Hebrew,"segoeui-hebrew"),x(t,s.Vietnamese,"segoeui-vietnamese"),x(t,s.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),x(t,c.Selawik,"selawik","selawik"),x(t,s.Armenian,"segoeui-armenian"),x(t,s.Georgian,"segoeui-georgian"),I("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-semilight"),l.light),I("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-bold"),l.semibold)}}((S=null===(v=(0,r.getWindow)())||void 0===v?void 0:v.FabricConfig,null!==(y=null==S?void 0:S.fontBaseUrl)&&void 0!==y?y:"https://res-1.cdn.office.net/files/fabric-cdn-prod_20230815.002/assets"));var C=n(280);function O(e,t,n,a,i){return void 0===i&&(i=!1),function(e,t){var n="";return!0===t&&(n=" /* @deprecated */"),e.listTextColor=e.listText+n,e.menuItemBackgroundChecked+=n,e.warningHighlight+=n,e.warningText=e.messageText+n,e.successText+=n,e}(w(e,t,(0,C.__assign)({primaryButtonBorder:"transparent",errorText:a?"#F1707B":"#a4262c",messageText:a?"#F3F2F1":"#323130",messageLink:a?"#6CB8F6":"#005A9E",messageLinkHovered:a?"#82C7FF":"#004578",infoIcon:a?"#C8C6C4":"#605e5c",errorIcon:a?"#F1707B":"#A80000",blockingIcon:a?"#442726":"#FDE7E9",warningIcon:a?"#C8C6C4":"#797775",severeWarningIcon:a?"#FCE100":"#D83B01",successIcon:a?"#92C353":"#107C10",infoBackground:a?"#323130":"#f3f2f1",errorBackground:a?"#442726":"#FDE7E9",blockingBackground:a?"#442726":"#FDE7E9",warningBackground:a?"#433519":"#FFF4CE",severeWarningBackground:a?"#4F2A0F":"#FED9CC",successBackground:a?"#393D1B":"#DFF6DD",warningHighlight:a?"#fff100":"#ffb900",successText:a?"#92c353":"#107C10"},n),a),i)}function w(e,t,n,a,i){void 0===i&&(i=!1);var r={},o=e||{},s=o.white,c=o.black,d=o.themePrimary,l=o.themeDark,u=o.themeDarker,f=o.themeDarkAlt,p=o.themeLighter,m=o.neutralLight,_=o.neutralLighter,h=o.neutralDark,b=o.neutralQuaternary,g=o.neutralQuaternaryAlt,v=o.neutralPrimary,y=o.neutralSecondary,S=o.neutralSecondaryAlt,D=o.neutralTertiary,I=o.neutralTertiaryAlt,x=o.neutralLighterAlt,O=o.accent;return s&&(r.bodyBackground=s,r.bodyFrameBackground=s,r.accentButtonText=s,r.buttonBackground=s,r.primaryButtonText=s,r.primaryButtonTextHovered=s,r.primaryButtonTextPressed=s,r.inputBackground=s,r.inputForegroundChecked=s,r.listBackground=s,r.menuBackground=s,r.cardStandoutBackground=s),c&&(r.bodyTextChecked=c,r.buttonTextCheckedHovered=c),d&&(r.link=d,r.primaryButtonBackground=d,r.inputBackgroundChecked=d,r.inputIcon=d,r.inputFocusBorderAlt=d,r.menuIcon=d,r.menuHeader=d,r.accentButtonBackground=d),l&&(r.primaryButtonBackgroundPressed=l,r.inputBackgroundCheckedHovered=l,r.inputIconHovered=l),u&&(r.linkHovered=u),f&&(r.primaryButtonBackgroundHovered=f),p&&(r.inputPlaceholderBackgroundChecked=p),m&&(r.bodyBackgroundChecked=m,r.bodyFrameDivider=m,r.bodyDivider=m,r.variantBorder=m,r.buttonBackgroundCheckedHovered=m,r.buttonBackgroundPressed=m,r.listItemBackgroundChecked=m,r.listHeaderBackgroundPressed=m,r.menuItemBackgroundPressed=m,r.menuItemBackgroundChecked=m),_&&(r.bodyBackgroundHovered=_,r.buttonBackgroundHovered=_,r.buttonBackgroundDisabled=_,r.buttonBorderDisabled=_,r.primaryButtonBackgroundDisabled=_,r.disabledBackground=_,r.listItemBackgroundHovered=_,r.listHeaderBackgroundHovered=_,r.menuItemBackgroundHovered=_),b&&(r.primaryButtonTextDisabled=b,r.disabledSubtext=b),g&&(r.listItemBackgroundCheckedHovered=g),D&&(r.disabledBodyText=D,r.variantBorderHovered=(null==n?void 0:n.variantBorderHovered)||D,r.buttonTextDisabled=D,r.inputIconDisabled=D,r.disabledText=D),v&&(r.bodyText=v,r.actionLink=v,r.buttonText=v,r.inputBorderHovered=v,r.inputText=v,r.listText=v,r.menuItemText=v),x&&(r.bodyStandoutBackground=x,r.defaultStateBackground=x),h&&(r.actionLinkHovered=h,r.buttonTextHovered=h,r.buttonTextChecked=h,r.buttonTextPressed=h,r.inputTextHovered=h,r.menuItemTextHovered=h),y&&(r.bodySubtext=y,r.focusBorder=y,r.inputBorder=y,r.smallInputBorder=y,r.inputPlaceholderText=y),S&&(r.buttonBorder=S),I&&(r.disabledBodySubtext=I,r.disabledBorder=I,r.buttonBackgroundChecked=I,r.menuDivider=I),O&&(r.accentButtonBackground=O),(null==t?void 0:t.elevation4)&&(r.cardShadow=t.elevation4),!a&&(null==t?void 0:t.elevation8)?r.cardShadowHovered=t.elevation8:r.variantBorderHovered&&(r.cardShadowHovered="0 0 1px "+r.variantBorderHovered),(0,C.__assign)((0,C.__assign)({},r),n)}var E={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"},A=i.createContext(void 0),L=function(){var e=i.useContext(A),t=(0,r.useCustomizationSettings)(["theme"]).theme;return e||t||function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n=!!e.isInverted;return function(e,t){var n,a,i;void 0===t&&(t={});var o=(0,r.merge)({},e,t,{semanticColors:w(t.palette,t.effects,t.semanticColors,void 0===t.isInverted?e.isInverted:t.isInverted)});if((null===(n=t.palette)||void 0===n?void 0:n.themePrimary)&&!(null===(a=t.palette)||void 0===a?void 0:a.accent)&&(o.palette.accent=t.palette.themePrimary),t.defaultFontStyle)for(var s=0,c=Object.keys(o.fonts);s<c.length;s++){var d=c[s];o.fonts[d]=(0,r.merge)(o.fonts[d],t.defaultFontStyle,null===(i=null==t?void 0:t.fonts)||void 0===i?void 0:i[d])}return o}({palette:o,effects:f,fonts:D,spacing:E,isInverted:n,disableGlobalClassNames:!1,semanticColors:O(o,f,void 0,n,t),rtl:void 0},e)}({})}}
,5808:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var a=n(7318);function i(e,t,n,i,r){return i===a.if||"number"!=typeof i?"#".concat(r):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(i/a.if,")")}}
,5635:(e,t,n)=>{"use strict";function a(e,t,n){return void 0===n&&(n=0),e<n?n:e>t?t:e}n.d(t,{q:()=>a})}
,7318:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>c,Fz:()=>a,GL:()=>f,Jv:()=>d,bd:()=>o,dp:()=>u,if:()=>s,mZ:()=>i,sL:()=>p,vh:()=>r,zX:()=>l});var a=100,i=359,r=100,o=255,s=100,c=3,d=6,l=1,u=3,f=/^[\da-f]{0,6}$/i,p=/^\d{0,3}$/}
,408:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var a=n(7318),i=n(2136),r=n(5808);function o(e){var t=e.a,n=void 0===t?a.if:t,o=e.b,s=e.g,c=e.r,d=function(e,t,n){var i=NaN,r=Math.max(e,t,n),o=r-Math.min(e,t,n);return 0===o?i=0:e===r?i=(t-n)/o%6:t===r?i=(n-e)/o+2:n===r&&(i=(e-t)/o+4),(i=Math.round(60*i))<0&&(i+=360),{h:i,s:Math.round(100*(0===r?0:o/r)),v:Math.round(r/a.bd*100)}}(c,s,o),l=d.h,u=d.s,f=d.v,p=(0,i.v)(c,s,o);return{a:n,b:o,g:s,h:l,hex:p,r:c,s:u,str:(0,r.F)(c,s,o,n,p),v:f,t:a.if-n}}}
,6147:(e,t,n)=>{"use strict";n.d(t,{n:()=>d});var a=n(280),i=n(350),r=n(7318),o=n(4356);function s(e){if(e){var t=e.match(/^rgb(a?)\(([\d., ]+)\)$/);if(t){var n=!!t[1],a=n?4:3,i=t[2].split(/ *, */).map(Number);if(i.length===a)return{r:i[0],g:i[1],b:i[2],a:n?100*i[3]:r.if}}}}var c=n(408);function d(e,t){var n=function(e,t){if(e){var n=null!=t?t:(0,i.getDocument)();return s(e)||function(e){if("#"===e[0]&&7===e.length&&/^#[\da-fA-F]{6}$/.test(e))return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:r.if}}(e)||function(e){if("#"===e[0]&&4===e.length&&/^#[\da-fA-F]{3}$/.test(e))return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:r.if}}(e)||function(e){var t,n,a,i,s,c=e.match(/^hsl(a?)\(([\d., ]+)\)$/);if(c){var d=!!c[1],l=d?4:3,u=c[2].split(/ *, */).map(Number);if(u.length===l){var f=(n=u[0],a=u[1],t={h:n,s:0===(s=(i=u[2])+(a*=(i<50?i:100-i)/100))?0:2*a/s*100,v:s},(0,o.h)(t.h,t.s,t.v));return f.a=d?100*u[3]:r.if,f}}}(e)||function(e,t){var n;if(void 0!==t){var a=t.createElement("div");a.style.backgroundColor=e,a.style.position="absolute",a.style.top="-9999px",a.style.left="-9999px",a.style.height="1px",a.style.width="1px",t.body.appendChild(a);var i=null===(n=t.defaultView)||void 0===n?void 0:n.getComputedStyle(a),r=i&&i.backgroundColor;if(t.body.removeChild(a),"rgba(0, 0, 0, 0)"!==r&&"transparent"!==r)return s(r);switch(e.trim()){case"transparent":case"#0000":case"#00000000":return{r:0,g:0,b:0,a:0}}}}(e,n)}}(e,null!=t?t:(0,i.getDocument)());if(n)return(0,a.__assign)((0,a.__assign)({},(0,c.g)(n)),{str:e})}}
,4356:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var a=n(7318);function i(e,t,n){var i=[],r=(n/=100)*(t/=100),o=e/60,s=r*(1-Math.abs(o%2-1)),c=n-r;switch(Math.floor(o)){case 0:i=[r,s,0];break;case 1:i=[s,r,0];break;case 2:i=[0,r,s];break;case 3:i=[0,s,r];break;case 4:i=[s,0,r];break;case 5:i=[r,0,s]}return{r:Math.round(a.bd*(i[0]+c)),g:Math.round(a.bd*(i[1]+c)),b:Math.round(a.bd*(i[2]+c))}}}
,2136:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var a=n(7318),i=n(5635);function r(e,t,n){return[o(e),o(t),o(n)].join("")}function o(e){var t=(e=(0,i.q)(e,a.bd)).toString(16);return 1===t.length?"0"+t:t}}
,5944:(e,t,n)=>{"use strict";n.d(t,{EQ:()=>i,HW:()=>o,l_:()=>s,tX:()=>r});var a=n(9248),i=function(){var e;return null!==(e=(0,a.XY)())&&void 0!==e?e:"undefined"!=typeof document?document:void 0},r=function(){var e;return null!==(e=(0,a.mx)())&&void 0!==e?e:"undefined"!=typeof window?window:void 0},o=function(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.document)&&void 0!==n?n:"undefined"!=typeof document?document:void 0},s=function(e){var t;return null!==(t=null==e?void 0:e.window)&&void 0!==t?t:"undefined"!=typeof window?window:void 0}}
,4835:(e,t,n)=>{"use strict";var a,i;n.d(t,{x:()=>a,y:()=>i}),function(e){e[e.top=1]="top",e[e.bottom=-1]="bottom",e[e.left=2]="left",e[e.right=-2]="right"}(a||(a={})),function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.start=2]="start",e[e.end=3]="end"}(i||(i={}))}
,8791:(e,t,n)=>{"use strict";function a(e,t){for(var n=[],a=0,i=t;a<i.length;a++){var r=e[i[a]];r&&n.push(r)}return n}n.d(t,{D:()=>a})}
,2912:(e,t,n)=>{"use strict";var a;n.d(t,{W:()=>a}),function(e){e[e.Normal=0]="Normal",e[e.Divider=1]="Divider",e[e.Header=2]="Header",e[e.SelectAll=3]="SelectAll"}(a||(a={}))}
,5605:(e,t,n)=>{"use strict";e.exports=n.p+"eraserCursorFallback_f415f3d8558296521320.cur"}
,4830:(e,t,n)=>{"use strict";e.exports=n.p+"penCursorFallback_9d4be4a73130615fbf15.cur"}
,8424:e=>{"use strict";e.exports=r},9676:e=>{"use strict";e.exports=l},2207:e=>{"use strict";e.exports=s},2910:e=>{"use strict";e.exports=d},2141:e=>{"use strict";e.exports=a},9773:e=>{"use strict";e.exports=c},5952:e=>{"use strict";e.exports=u},8926:e=>{"use strict";e.exports=m},9110:e=>{"use strict";e.exports=p},8819:e=>{"use strict";e.exports=_},5491:e=>{"use strict";e.exports=f},9816:e=>{"use strict";e.exports=o},5959:e=>{"use strict";e.exports=n},8398:e=>{"use strict";e.exports=i},280:e=>{"use strict";e.exports=t}},D={};function I(e){var t=D[e];if(void 0!==t)return t.exports;var n=D[e]={exports:{}};return S[e](n,n.exports,I),n.exports}I.m=S,I.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return I.d(t,{a:t}),t},b=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,I.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);I.r(n);var a={};h=h||[null,b({}),b([]),b(b)];for(var i=2&t&&e;"object"==typeof i&&!~h.indexOf(i);i=b(i))Object.getOwnPropertyNames(i).forEach(t=>a[t]=()=>e[t]);return a.default=()=>e,I.d(n,a),n},I.d=(e,t)=>{for(var n in t)I.o(t,n)&&!I.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},I.f={},I.e=e=>Promise.all(Object.keys(I.f).reduce((t,n)=>(I.f[n](e,t),t),[])),I.u=e=>"chunk."+e+"_none_"+{16:"534225d8377d89f99b6f",55:"50153e21e3c60d10df9a",98:"df4e3c8a07e65584d1c8",102:"ecbf24532d8177070415",110:"09cf4d46d293eec1df0f",170:"a742923c08fbe4385d68",201:"cecfa99c9f4bec00018c",226:"7af455b3a2dd03a9592e",257:"b4e26b467938e2b11316",368:"e4d1e138d470245da2e4",381:"f43f851dfad5a041dd74",470:"d54d1b4c81cf3dc297dc",593:"81b6cc1549de3ec1403c",601:"648adecb7a7a9a80ac6e",653:"9591b7b5ce168ab5733c",698:"2f93aeb41c8b85164977",703:"82b9277afd99f6f4862a",773:"a63ff52243a08918516c",793:"5116206a584377356939",863:"8bd13293faa17c0252ab",893:"577aff52d347d00b5821",968:"5e735b3d27d9e288e714",969:"a123261dc4d0239e100e"}[e]+".js",I.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),I.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g={},v="444abf08-e4b4-4d65-b726-5a576c37e469_0.1.0:",I.l=(e,t,n,a)=>{if(g[e])g[e].push(t);else{var i,r;if(void 0!==n)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var c=o[s];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==v+n){i=c;break}}i||(r=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,I.nc&&i.setAttribute("nonce",I.nc),i.setAttribute("data-webpack",v+n),i.src=e,0!==i.src.indexOf(window.location.origin+"/")&&(i.crossOrigin="anonymous")),g[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(l);var a=g[e];if(delete g[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(e=>e(n)),t)return t(n)},l=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),r&&document.head.appendChild(i)}},I.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},y=e?e.src:"",I.p=y.slice(0,y.lastIndexOf("/")+1),(()=>{var e={577:0};I.f.j=(t,n)=>{var a=I.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((n,i)=>a=e[t]=[n,i]);n.push(a[2]=i);var r=I.p+I.u(t),o=new Error;I.l(r,n=>{if(I.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,i,[r,o,s]=n,c=0;if(r.some(t=>0!==e[t])){for(a in o)I.o(o,a)&&(I.m[a]=o[a]);s&&s(I)}for(t&&t(n);c<r.length;c++)i=r[c],I.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self["webpackJsonp_444abf08-e4b4-4d65-b726-5a576c37e469_0.1.0"]=self["webpackJsonp_444abf08-e4b4-4d65-b726-5a576c37e469_0.1.0"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var x={};return(()=>{"use strict";I.r(x),I.d(x,{ADVANCED_EDITOR_TWO_BY_ONE_ASPECT_ICON_NAME:()=>p7,AdvancedCropper:()=>D7,AdvancedEditor:()=>_7});var e=I(280),t=I(5959),n=I.n(t),a=I(2141),i=(0,a.createTheme)({palette:{themePrimary:"#2899f5",themeLighterAlt:"#02060a",themeLighter:"#092c47",themeLight:"#043862",themeTertiary:"#004c87",themeSecondary:"#007bd4",themeDarkAlt:"#3aa0f3",themeDark:"#6cb8f6",themeDarker:"#82c7ff",neutralLighterAlt:"#1b1a19",neutralLighter:"#252423",neutralLight:"#292827",neutralQuaternaryAlt:"#323130",neutralQuaternary:"#3b3a39",neutralTertiaryAlt:"#484644",neutralTertiary:"#797775",neutralSecondary:"#a19f9d",neutralPrimaryAlt:"#c8c6c4",neutralPrimary:"#f3f2f1",neutralDark:"#faf9f8",black:"#ffffff",white:"#000000"}}),r=(0,a.createTheme)({}),o={flexBasis:"100%",margin:"10px 0px",padding:"0px 16px"},s=I(7592),c=I(1785);function d(e){return{borderTop:"1px solid ".concat(e.palette.neutralTertiaryAlt),paddingTop:"8px"}}var l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function f(e){return{inkStylePicker:{inkColorPickerStyles:{container:{marginLeft:"-8px",marginRight:"-8px"}},containerStyles:{width:"176px"},getContentWrapperStyle:h,strokeShapePickerStyles:{container:u(u({},d(e)),{justifyContent:"flex-start",columnGap:"8px"}),iconLabelButton:{root:{marginTop:"8px"}}}},canvasContainer:{top:"50%",bottom:"inherit",transform:"translateY(-50%)"},container:{padding:"8px 0",borderRadius:"8px"},inkToolsContainer:{flexDirection:"column",width:"56px"}}}var p={markupToolbarPosition:"Left",canvasContainer:{left:"0",right:"inherit",marginLeft:"24px",marginRight:"inherit"},markupToolbarButton:{root:{transform:"rotate(90deg)"}}},m={root:{left:c.$7}},_={markupToolbarPosition:"Right",canvasContainer:{left:"inherit",right:"0",marginLeft:"inherit",marginRight:"24px"},markupToolbarButton:{root:{transform:"rotate(270deg)"}},markupToolbarArrowIconStyle:{singleArrow:m,doubleArrow:m}};function h(e,t){return void 0===t&&(t=!1),{minHeight:"260px",height:e?"auto":t?"280px":"320px",padding:"0px 10px"}}var b=I(2744),g=I(8273),v=I(1249),y=I(2978),S=I(8886),D=I(8424);(0,D.loadStyles)([{rawString:".sectionHeader_05c5f53c{font-size:16px;font-weight:500;line-height:42px;margin:25px 0 6px 0}.sectionFooter_05c5f53c{height:38px}"}]);const C="sectionHeader_05c5f53c";var O=I(6018),w=I(3680),E=I(9710),A=I(2389);function L(e,t){return void 0===t&&(t=!1),function(n){var a="adjustment_".concat(n),i=t?(0,A.J)(e.adjustment_sliderTooltip,e[a]):"";return{key:n,text:e[a],ariaLabel:(0,A.J)(e.adjustment_sliderAriaLabelFormatString,e[a],i)}}}var k=I(2148),M=I(1574),P=I(9573),T=I(7774),U=I(4779),F=I.n(U),H=I(5385),R=E.pS;function N(e,t,n){return Math.round((0,H.Ec)(t,n,e))}function B(e,t,n,a){var i;if(e<-a){var r=(0,H.W4)(t,-a,e);i=(0,H.Ec)(0,R,r)}else if(e>a){var o=(0,H.W4)(a,n,e);i=(0,H.Ec)(R,1,o)}else i=R;return i}var j=I(8384),V=E.pS,z=n().memo(function(e){var i=e.adjustmentKey,r=e.layout,o=e.onChangeNotify,s=e.onChangedNotify,c=e.normalizedValue,d=e.styles,l=e.hideSliderValueAfterInactivity,u=e.shouldShowTooltip,f=void 0===u||u,p=e.setAriaAnnouncement,m=e.selectedDynamicLayerId,_=E.qr[i].configuration,h=_.sliderMinValue,g=_.sliderMaxValue,v=_.sliderStepValue,S=_.sliderDeadZoneOffset,D=(0,E.E3)(i),I=(0,t.useContext)(y.x).strings,x=L(I,f)(i),C=x.text,U=x.ariaLabel,z=(0,A.J)(I.adjustment_sliderTooltip,C),G=(0,t.useContext)(k.b).logAdjustmentEvent,K=(0,b.D)(),W=(0,a.getRTL)(K),q=(0,t.useState)(!1),Q=q[0],Y=q[1],J=function(e){var n=(0,t.useContext)(y.x).strings;return function(t,a){var i=L(n)(t).ariaLabel;e((0,A.J)(n.adjustment_sliderChangedAriaLive,i,a))}}(p),X=(0,t.useRef)(null),Z=h-S,$=g+S,ee=function(e){var n=(0,t.useState)(!0),a=n[0],i=n[1],r=(0,t.useMemo)(function(){return e?new(F())(e,{recognizers:[[F().Pan,{direction:F().DIRECTION_ALL}]],touchAction:"pan-y"}):null},[e]);return(0,t.useEffect)(function(){if(r&&e){var t=function(){i(!0)},n=function(){i(!1)};return r.on("panleft panright panend",t),r.on("panup pandown",n),e.addEventListener("touchend",t,{passive:!0}),e.addEventListener("touchstart",n,{passive:!0}),function(){r.off("panleft panright panend",t),r.off("panup pandown",n),e.removeEventListener("touchend",t),e.removeEventListener("touchstart",n)}}},[r,e]),{shouldUpdateSlider:a}}(X.current).shouldUpdateSlider,te=(0,t.useMemo)(function(){return function(e,t,n,a){var i;if(e<R){var r=(0,H.W4)(0,R,e);i=(0,H.Ec)(t,-a,r)}else if(e>R){var o=(0,H.W4)(R,1,e);i=(0,H.Ec)(a,n,o)}else i=0;return i}(c,Z,$,S)},[Z,$,c,S]),ne=(0,t.useCallback)(function(e){if(ee){var t=B(e,Z,$,S);Y(!0),o({adjustmentKey:i,adjustmentValue:t,isUndoRedoable:!1,dynamicLayerId:m})}},[ee,Z,$,S,o,i,m]);function ae(e){var t=B(e,Z,$,S);return String(N(t,h,g))}(0,t.useEffect)(function(){var e=function(e){if((0,P.qb)(e)){var t=(0,P.SG)(e.key);if(c===V&&t!==T.y.None){var n=B(t===T.y.Right&&!W||t===T.y.Up||t===T.y.Left&&W?S+.1:-S-.1,Z,$,S);o({adjustmentKey:i,adjustmentValue:n,isUndoRedoable:!1,dynamicLayerId:m})}}},t=X.current;if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}},[i,c,X,o,$,Z,S,W,Q,m]);var ie={value:te,maxValue:$,minValue:Z,valueFormatter:ae,label:C,iconName:D,shouldShow:Q||!l},re=(0,t.useMemo)(function(){var e;return(0,a.concatStyleSets)((0,w.$)(K),null===(e=null==d?void 0:d.getSliderStyles)||void 0===e?void 0:e.call(d,K))},[d,K]),oe=(0,t.useMemo)(function(){var e=null==d?void 0:d.getSliderHeaderStyles;return"function"==typeof e?e(K):e},[d,K]);return n().createElement(n().Fragment,null,n().createElement(M.f,{headerProps:ie,layout:r,styles:oe}),n().createElement("div",{ref:X},n().createElement(O.A,{min:Z,max:$,step:v,value:te,showValue:!1,originFromZero:!0,onChanged:function(e,t){var n=B(t,Z,$,S);s({adjustmentKey:i,adjustmentValue:n,isUndoRedoable:!0,dynamicLayerId:m}),G({adjustmentKey:i,value:n,inputType:(0,j.IR)(e)}),Y(!1),J(i,String(N(n,h,g)))},onChange:ne,styles:re,"aria-label":U,ariaValueText:ae,buttonProps:{title:f?z:void 0}})))}),G=function(){return G=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},G.apply(this,arguments)},K=(0,t.memo)(function(e){var a=(0,t.useRef)(void 0),i=(0,t.useRef)(void 0),r=(0,t.useCallback)(function(t){a.current&&t.adjustmentKey!==a.current&&(i.current&&e.setAdjustmentValue(G(G({},i.current),{isUndoRedoable:!0})),a.current=void 0,i.current=void 0),a.current=t.adjustmentKey,i.current=t,e.setAdjustmentValue(t)},[a,i,e]),o=(0,t.useCallback)(function(t){var n,r;(null===(n=i.current)||void 0===n?void 0:n.adjustmentKey)===t.adjustmentKey&&(null===(r=i.current)||void 0===r?void 0:r.adjustmentValue)===t.adjustmentValue?i.current&&e.setAdjustmentValue(G(G({},i.current),{isUndoRedoable:!0})):e.setAdjustmentValue(t),a.current=void 0,i.current=void 0},[i,e]);return n().createElement(n().Fragment,null,e.adjustmentKeys.map(function(t){return n().createElement(z,{key:t,adjustmentKey:t,layout:"Labeled",styles:e.styles,normalizedValue:e[t],onChangeNotify:r,onChangedNotify:o,setAriaAnnouncement:e.setAriaAnnouncement,selectedDynamicLayerId:e.selectedDynamicLayerId})}))}),W=I(7766),q=I(3665),Q=function(){return Q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)},Y=(0,t.memo)(function(e){var a,i,r,o,s,c,d=e.selectedDynamicLayerId,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["selectedDynamicLayerId"]),u=(0,t.useContext)(y.x).strings,f=Q(Q({},(o=l.adjustments,s=W.F,function(e,t){var n={};return t.forEach(function(t){!function(e,t,n){Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}(e,n,t)}),n}(o,Object.values(s)))),{styles:null===(a=l.styles)||void 0===a?void 0:a.adjustmentSlider,setAdjustmentValue:l.setAdjustmentValue,setAriaAnnouncement:l.setAriaAnnouncement,selectedDynamicLayerId:d}),p=function(e){void 0===e&&(e=!1);var n=(0,t.useContext)(q.u).experimental_enableSharpness;return(0,t.useMemo)(function(){return function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([W.F.Saturation,W.F.Temperature,W.F.Tint],n&&!e?[W.F.Sharpness]:[],!0)},[n,e])}(!!d),m=(void 0===(c=!!d)&&(c=!1),(0,t.useMemo)(function(){return function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([W.F.Brightness,W.F.Exposure,W.F.Contrast,W.F.Highlights,W.F.Shadows],c?[]:[W.F.Vignette],!0)},[c]));return n().createElement(S.e,{size:l.size,styles:l.styles,header:l.header,footer:l.footer},l.children,n().createElement("section",{"aria-label":u.adjustment_lightAriaLandmark},n().createElement("div",{className:C,style:null===(i=l.styles)||void 0===i?void 0:i.sectionHeader},u.adjustment_light),n().createElement(K,Q({},f,{adjustmentKeys:m}))),n().createElement("section",{"aria-label":u.adjustment_colorAriaLandmark},n().createElement("div",{className:C,style:null===(r=l.styles)||void 0===r?void 0:r.sectionHeader},u.adjustment_color),n().createElement(K,Q({},f,{adjustmentKeys:p})),n().createElement("div",{className:"sectionFooter_05c5f53c"})))}),J=I(4584),X=I(3996),Z=function(e){return e.colorAdjustments},$=I(5459),ee=(0,X.Rz)([function(e){return e.colorAdjustments.baseAdjustments},function(e){return e.colorAdjustments.adjustmentsByDynamicLayer},function(e){return e.colorAdjustments.selectedDynamicLayerId}],function(e,t,n){return(0,$.I)(e,t,n)}),te={setAdjustmentValue:v.tZ,setAriaAnnouncement:J.r9},ne=(0,g.Ng)(function(e){var t=e.uiState.numberOfResets;return{adjustments:ee(e),key:t}},te)(Y),ae=I(6147);(0,D.loadStyles)([{rawString:".display_fe015d88{position:absolute;z-index:2;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:2px;font-size:14px;line-height:20px;padding:4px 8px;pointer-events:none;text-align:center;opacity:0}.visible_fe015d88{opacity:1;-webkit-transition:opacity .25s;transition:opacity .25s}"}]);var ie=function(){return ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie.apply(this,arguments)},re=n().memo(function(e){var t,i=e.children,r=e.visible,o=void 0!==r&&r,s=e.style,c=void 0===s?{}:s,d=(0,b.D)(),l=(0,a.css)("display_fe015d88",o&&"visible_fe015d88"),u=(0,ae.n)(d.palette.white);return n().createElement("div",{className:l,style:ie({color:"".concat(d.palette.neutralPrimary),background:u&&(t=u,"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(.6,")"))},c),"data-test-id":"aspect_ratio_display","aria-hidden":o?"false":"true"},i)}),oe=n().memo(function(e){var a=e.aspectRatioDisplay,i=e.position,r=e.opacity,o=(0,t.useContext)(y.x),s=o.localizeNumber,c=o.strings,d=r>0,l=(0,t.useMemo)(function(){return d?(0,A.Y)(c.aspectRatio_ratioLabelFormatString,s,a.x,a.y):""},[a,s,c,d]),u=(0,t.useMemo)(function(){return d?(0,A.Y)(c.aspectRatio_ratioAriaLabelFormatString,s,a.x,a.y):""},[a,s,c,d]);return n().createElement(re,{style:{top:i.y,left:i.x,transform:"translateX(-50%)",opacity:r},visible:d},n().createElement("span",{"aria-label":u},l))}),se=I(3613),ce=I(3333),de=I(3118),le=(0,X.Rz)([de.un,de.Ku],function(e,t){var n=(0,ce.$1)(e);return(0,ce.fK)(n,t)}),ue=(0,X.Rz)([de.FD,le],function(e,t){return(0,se.DM)(e)?e.ratio:t}),fe=I(9404),pe=(0,X.Rz)([fe.$],function(e){return{x:e.left+e.width/2,y:e.top+8}}),me=I(9024),_e=I(8309),he=I(9988),be=[1,1,1,1,1,0],ge=function(e){if(e.transformTools.cropUiDisplay.areCropOverlaysVisible)return 1;var t=(0,_e.ic)(e.transformTools.animations.dismissCropOverlays,e.transformTools.animations.currentTime,he.Rt);return(0,me.a)(be,t)},ve=(0,X.Rz)([le,de.un,ge],function(e,t,n){var a=(0,ce.$1)(t);return(0,ce.NI)(a,e)?n:0}),ye=(0,g.Ng)(function(e){return{aspectRatioDisplay:ue(e),position:pe(e),opacity:ve(e)}},{})(oe),Se=I(8874),De={auto:!0,scroll:!0,hidden:!0};function Ie(e){var t=getComputedStyle(e);return De[t.overflow]||De[t.overflowY]||De[t.overflowX]}var xe=I(8214),Ce=I(3298),Oe=n().memo(function(e){var n=e.nextEditorActivity,a=e.waitingForActiveEditorActivityToComplete,i=e.setActiveEditorActivity;return(0,t.useEffect)(function(){a||void 0===n||i(n)},[n,i,a]),null}),we={setActiveEditorActivity:Ce.Ax},Ee=(0,g.Ng)(function(e){return{nextEditorActivity:e.uiState.nextEditorActivity,waitingForActiveEditorActivityToComplete:e.uiState.waitingForActiveEditorActivityToComplete}},we)(Oe),Ae=I(1923),Le=I(7328),ke=I(4661),Me=I(252),Pe=function(){return Pe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pe.apply(this,arguments)};function Te(e){return"".concat("pivot-button-").concat(e)}var Ue=n().memo(function(e){var i=e.activeEditorActivity,r=e.pivotItems,o=e.styles,s=e.showHeaderText,c=void 0===s||s,d=e.onChange;if(r.length<=0)throw new Error("ControlPivot received empty pivotItems prop.");var l=(0,t.useContext)(k.b).logWarningEvent,u=(0,t.useContext)(y.x).strings,f=(0,t.useRef)({}),p=(0,t.useRef)(null),m=r.find(function(e){return e.itemKey===i})||r[0],_=(0,t.useCallback)(function(e,t){e&&(e.props.itemKey||l({id:"InvalidPivotKey",message:"Missing pivot key on ControlPivot click. Current active pivot is ".concat(i)}),d({pivotKey:e.props.itemKey,inputType:t?(0,j.UR)(t):"Keyboard"}))},[d,l,i]),h=function(e,i,r){var o=(0,b.D)();return(0,t.useCallback)(function(t){var s;if(!t)return null;var c=t.itemCount,d=t.itemIcon,l=t.headerText,u=t.itemKey,f=null===(s=r.find(function(e){return e.itemKey===u}))||void 0===s?void 0:s.customPivotChild,p=(0,a.classNamesFunction)()(e,{theme:o});return n().createElement("span",{ref:function(e){i.current&&t.itemKey&&(i.current[t.itemKey]=e)},className:p.linkContent,title:t.title,"aria-label":t.ariaLabel},void 0!==d&&n().createElement("span",{className:p.icon},n().createElement(xe.FontIcon,{iconName:d})),void 0!==l&&n().createElement("span",{className:p.text}," ",t.headerText),void 0!==c&&n().createElement("span",{className:p.count}," (",c,")"),f)},[r,e,o,i])}(o,f,r);!function(e,n){(0,t.useEffect)(function(){var t,a;n.current&&function(e,t){if(e){var n=function(e){for(var t=null==e?void 0:e.parentElement;t;){if(Ie(t))return t;t=t.parentElement}return null}(e);if(n){var a=e.getBoundingClientRect(),i=n.getBoundingClientRect();if((0,Se.yR)(a,i))return;n.scrollTo(e.offsetLeft+a.width/2-i.width/2,e.offsetTop+a.height/2-i.height/2)}}}(null===(a=null===(t=n.current[e])||void 0===t?void 0:t.parentElement)||void 0===a?void 0:a.parentElement)},[e,n])}(i,f),(0,t.useEffect)(function(){var e=function(e){e.ctrlKey&&e.preventDefault()},t=null==p?void 0:p.current;if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}},[p]),(0,t.useEffect)(function(){m.itemKey!==i&&d({pivotKey:m.itemKey,inputType:""})},[i,m.itemKey,d]);var g=(0,ke.k)(m.itemKey||"",document.querySelector("[data-test-id='".concat(Te(Me.vs),"']")),p.current).stylizerTeachingTip;return n().createElement(n().Fragment,null,n().createElement(Ee,null),n().createElement(Ae.f,{selectedKey:i,onLinkClick:_,headersOnly:!0,styles:o,ref:p},r.map(function(e){var t=u[e.localizationKey];return n().createElement(Le.y,Pe({key:e.itemKey},e,{headerText:c?t:"",ariaLabel:e.ariaDescriptionLocalizationKey?u[e.ariaDescriptionLocalizationKey]:"",title:t,onRenderItemLink:h,headerButtonProps:{"data-test-id":"".concat(Te(e.itemKey))}}))})),g)}),Fe=I(5445),He=(0,g.Ng)(function(e){return{activeEditorActivity:e.uiState.activeEditorActivity}},function(e){return(0,Fe.CH)({onChange:function(e){var t=e.inputType,n=e.pivotKey;if((0,Me.D1)(n))return(0,Ce.fS)({nextEditorActivity:n,inputType:t})}},e)})(Ue),Re=I(7936),Ne=I(5854),Be=I(1321);(0,D.loadStyles)([{rawString:".ms-Fabric--isFocusVisible .cropUIRectangle_e2713a9a:focus{visibility:visible;outline-width:1px;outline-style:solid;outline-offset:5px}.ms-Fabric--isFocusHidden .cropUIRectangle_e2713a9a{outline:0}.cropUIRectangle_e2713a9a{position:absolute;justify-self:center}"}]);var je=I(458),Ve=I(7240);(0,D.loadStyles)([{rawString:".cropRectCorner_13f8d50d{position:absolute;-ms-touch-action:none;touch-action:none}.cropRectCorner_13f8d50d:focus{outline:0}"}]);var ze=I(6039),Ge=I(7291),Ke=I(1451),We=I(1780),qe=I(4729),Qe=I(9006),Ye=I(4521);function Je(e,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v){var y=(0,t.useCallback)(function(t){u&&e&&(t.pointerPhysicalPixelPos=(0,Ge.U)(e,t.pointerPhysicalPixelPos,n),u(t))},[e,u,n]),S=(0,t.useCallback)(function(t){f&&e&&(t.pointerPhysicalPixelPos=(0,Ge.U)(e,t.pointerPhysicalPixelPos,n),f(t))},[e,f,n]),D=(0,t.useCallback)(function(t){p&&e&&(t.pointerPhysicalPixelPos=(0,Ge.U)(e,t.pointerPhysicalPixelPos,n),p(t))},[e,p,n]),I=(0,t.useCallback)(function(t){m&&e&&(t.mousePhysicalPixelPos=(0,Ge.U)(e,t.mousePhysicalPixelPos,n),m(t),d({type:"Zoom",zoom:i}))},[m,e,n,d,i]),x=(0,t.useCallback)(function(t){_&&e&&(t.center=(0,Ge.U)(e,t.center,n),_(t))},[n,e,_]),C=(0,t.useCallback)(function(t){h&&e&&(t.center=(0,Ge.U)(e,t.center,n),h(t))},[n,e,h]),O=(0,t.useCallback)(function(t){b&&e&&(t.center=(0,Ge.U)(e,t.center,n),b(t),d({type:"CropImageDimension",cropDimension:ze.J}))},[n,e,b,d]),w=(0,t.useCallback)(function(t){g&&e&&(t.center=(0,Ge.U)(e,t.center,n),g(t))},[n,e,g]),E=(0,t.useCallback)(function(e,t){if(!e.ctrlKey&&(0,P.qb)(e)){e.stopPropagation(),e.preventDefault();var n=(0,P.SG)(e.key);s({direction:n,handlePosition:a,cropShiftingValue:(0,P.DC)(t),inputType:"Keyboard"}),function(e,t,n,a){e===je.Q.Center?a({type:"CropImageMove",cropTopLeftCornerFromImageOrigin:n}):a({type:"CropImageDimension",cropDimension:t})}(a,r,o,d)}},[s,a,d,r,o]);(0,t.useEffect)(function(){if(e){var t=function(e){e.stopPropagation(),"focus"===e.type&&((0,P.tb)()?l({handlePosition:a,isKeyboardFocused:!0}):l({handlePosition:a,isKeyboardFocused:!1}))},n=function(e){"blur"===e.type&&l({handlePosition:je.Q.None,isKeyboardFocused:!1})};return e.addEventListener("focus",t),e.addEventListener("blur",n),function(){e.removeEventListener("focus",t),e.addEventListener("blur",n)}}},[e,a,s,l]),(0,We.V)({numRepeatsToSwitchToFast:P.QD,keyboardEventTarget:e,handleKeyboardDown:E,isFastDirectionKey:P.K8,handleKeyboardUp:c}),(0,Qe.R)({htmlElement:e,cssToPhysicalPixelRatio:n,onPointerDown:y,onPointerMove:S,onPointerUp:D,onUnmount:v}),(0,qe.O)(n,e,I),(0,Ke.s)(e),(0,Ye.y)(n,e,x,C,O,w)}var Xe=(0,t.forwardRef)(function(e,a){var i=e.handlePosition,r=e.ariaLabel,o=e.style,s=e.cssToPhysicalPixelRatio,c=e.currentZoom,d=e.cropDimension,l=e.cropTopLeftCornerFromImageOrigin,u=e.shouldShowTooltip,f=e.handleCropRectAdjustment,p=e.handleCropRectAdjustmentKeyUp,m=e.setAriaAnnouncementScenario,_=e.setFocusedCropHandle,h=e.onPointerDown,b=e.onPointerMove,g=e.onPointerUp,v=e.onWheel,S=e.onTouchDown,D=e.onTouchMove,I=e.onTouchUp,x=e.onDoubleTap,C=e.onUnmount,O=(0,t.useContext)(y.x).strings,w=(0,t.useState)(null),E=w[0],A=w[1];return(0,t.useEffect)(function(){(0,Ve.n)(a,E)},[a,E]),Je(E,s,i,c,d,l,f,p,m,_,h,b,g,v,S,D,I,x,C),n().createElement("div",{ref:A,"data-is-focusable":!0,"aria-label":r,title:u?O.crop_cornerTooltip:void 0,role:"button",className:"cropRectCorner_13f8d50d",tabIndex:0,style:o,"data-test-id":"crop-corner-handle-".concat(i)})});function Ze(e,t){var n=t.x.toString(),a=t.y.toString();return(0,A.J)(e,n,a)}function $e(e,n,a){var i=(0,t.useContext)(y.x).strings;return(0,ce.NI)(e/n,a)?(0,A.J)(i.editor_imageDimensionWithAspectRatioAriaLive,e.toString(),n.toString(),a.x.toString(),a.y.toString()):(0,A.J)(i.editor_imageDimensionAriaLive,e.toString(),n.toString())}Xe.displayName="CropRectCorner";var et=function(){return et=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},et.apply(this,arguments)},tt=n().memo(function(e){var a=e.cropUIRectangle,i=e.cssToPhysicalPixelRatio,r=e.cursor,o=e.currentZoom,s=e.cropDimension,c=e.aspectRatio,d=e.cropTopLeftCornerFromImageOrigin,l=e.shouldShowTooltip,u=e.isPointerOverCropHandle,f=e.handleCropRectAdjustment,p=e.handleCropRectAdjustmentKeyUp,m=e.setAriaAnnouncementScenario,_=e.setFocusedCropHandle,h=e.onPointerDown,g=e.onPointerMove,v=e.onPointerUp,S=e.onWheel,D=e.onTouchDown,I=e.onTouchMove,x=e.onTouchUp,C=e.onDoubleTap,O=e.onUnmount,w=(0,t.useContext)(y.x).strings,E=(0,b.D)(),A=function(e){var n=(0,t.useContext)(y.x).strings;return(0,t.useMemo)(function(){return Ze(n.crop_topLeftCornerAriaLabel,e)},[n,e])}(d),L=function(e,n){var a=(0,t.useContext)(y.x).strings;return(0,t.useMemo)(function(){var t={x:e.x+n.width,y:e.y};return Ze(a.crop_topRightCornerAriaLabel,t)},[a,e,n])}(d,s),k=function(e,n){var a=(0,t.useContext)(y.x).strings;return(0,t.useMemo)(function(){var t={x:e.x,y:e.y+n.height};return Ze(a.crop_bottomLeftCornerAriaLabel,t)},[a,e,n])}(d,s),M=function(e,n){var a=(0,t.useContext)(y.x).strings;return(0,t.useMemo)(function(){var t={x:e.x+n.width,y:e.y+n.height};return Ze(a.crop_bottomRightCornerAriaLabel,t)},[a,e,n])}(d,s),P=(0,t.useState)(null),T=P[0],U=P[1];Je(T,i,je.Q.Center,o,s,d,f,p,m,_,h,g,v,S,D,I,x,C,O);var F={handleCropRectAdjustment:f,handleCropRectAdjustmentKeyUp:p,setAriaAnnouncementScenario:m,setFocusedCropHandle:_,onPointerDown:h,onPointerMove:g,onPointerUp:v,onWheel:S,onUnmount:O,cssToPhysicalPixelRatio:i,currentZoom:o,cropDimension:s,cropTopLeftCornerFromImageOrigin:d,shouldShowTooltip:l},H={cursor:r,width:30,height:30},R=$e(s.width,s.height,c);return n().createElement(n().Fragment,null,n().createElement("div",{className:"cropUIRectangle_e2713a9a",style:{width:a.width/i,height:a.height/i,top:a.top/i,marginLeft:a.left/i,marginRight:a.left/i,cursor:r,outlineColor:E.palette.neutralDark},"data-is-focusable":!0,"data-test-id":"cropUIRectangle",ref:U,"aria-label":"".concat(w.crop_rectangleAriaLabel," ; ").concat(R),title:l?u?w.crop_cornerTooltip:w.crop_rectangleTooltip:void 0,role:"img",tabIndex:0}),n().createElement(Xe,et({handlePosition:je.Q.TopLeft,ariaLabel:A,style:et(et({},H),{top:a.top/i,left:a.left/i})},F)),n().createElement(Xe,et({handlePosition:je.Q.TopRight,ariaLabel:L,style:et(et({},H),{top:a.top/i,left:(a.left+a.width)/i-30})},F)),n().createElement(Xe,et({handlePosition:je.Q.BottomLeft,ariaLabel:k,style:et(et({},H),{left:a.left/i,top:(a.top+a.height)/i-30})},F)),n().createElement(Xe,et({handlePosition:je.Q.BottomRight,ariaLabel:M,style:et(et({},H),{left:(a.left+a.width)/i-30,top:(a.top+a.height)/i-30})},F)))}),nt=I(2639),at=I(7194),it=I(512),rt=I(5206),ot=I(3080),st=(0,X.Rz)([de.un,de.NX],function(e,t){var n=(0,rt.GM)(t),a={x:n.left,y:n.top},i=(0,it.tM)(e),r=(0,ot.wp)(i,a);return(0,ot.si)(r)}),ct=I(6426),dt=I(6002),lt=(0,X.Rz)([de.wX],function(e){return(0,dt.m8)(e)}),ut={handleCropRectAdjustment:Re.xd,handleCropRectAdjustmentKeyUp:Re.kh,setAriaAnnouncementScenario:J.Ac,setFocusedCropHandle:Re.D9,onPointerMove:Ne.Kd,onPointerDown:Ne.fy,onPointerUp:Ne.UI,onWheel:Re.vc,onTouchDown:Re.Lm,onTouchMove:Re.qb,onTouchUp:Re.fz,onUnmount:Re.j6},ft=(0,g.Ng)(function(e){var t=e.transformTools.device.pixelRatio,n=(0,nt.g)(e),a=(0,at.j)(e),i=(0,Be.W9)(e);return{cropUIRectangle:(0,Be.O1)(e),cssToPhysicalPixelRatio:t,cursor:n,currentZoom:a,cropDimension:i,aspectRatio:ue(e),cropTopLeftCornerFromImageOrigin:st(e),shouldShowTooltip:e.transformTools.cropInteraction.mode===ct.I.none,isPointerOverCropHandle:lt(e)}},ut)(tt),pt=n().memo(function(e){var t=e.cropWidth,a=e.cropHeight,i=e.position,r=e.opacity,o=e.transform,s=void 0===o?"translateX(-50%)":o,c=mt(t,a),d=c.imageDimension,l=c.imageDimensionAriaLabel;return n().createElement(re,{style:{top:i.y,left:i.x,transform:s,opacity:r},visible:r>0},n().createElement("span",{"aria-label":l},d))});function mt(e,n){var a=(0,t.useContext)(y.x).strings,i=e.toString(),r=n.toString();return{imageDimension:(0,A.J)(a.editor_imageDimensionLabelFormatString,i,r),imageDimensionAriaLabel:(0,A.J)(a.editor_imageDimensionAriaLabelFormatString,i,r)}}var _t=(0,X.Rz)([fe.$],function(e){return{x:e.left+e.width/2,y:e.top+e.height+-36}}),ht=(0,g.Ng)(function(e){return{cropWidth:(0,Be.Po)(e),cropHeight:(0,Be.M1)(e),position:_t(e),opacity:ge(e)}})(pt);function bt(e,t,n){return t?{width:e.x/n+"px",height:e.y/n+"px"}:{width:"100%",height:"100%"}}var gt=function(){return gt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gt.apply(this,arguments)},vt=n().memo(function(e){var a=e.setCanvasPixelSize,i=e.setCssToPhysicalPixelRatio,r=e.cssToPhysicalPixelRatio,o=e.canvasSize,s=e.activePivot,c=e.children,d=(0,t.useState)(null),l=d[0],u=d[1],f=r||window.devicePixelRatio||1;(0,t.useLayoutEffect)(function(){i(f)},[f,i]);var p=function(e,n,a){var i=(0,t.useRef)(),r=(0,t.useCallback)(function(){if(e){var t=a===window.devicePixelRatio,r=!i.current||!t,o=r?function(e,t){var n=e.getBoundingClientRect();return{x:Math.floor(n.width*t),y:Math.floor(n.height*t)}}(e,a):i.current;o&&n({pixelSize:o,cssSize:bt(o,r,a)})}},[i,n,a,e]),o=(0,t.useCallback)(function(e){i.current=gt({},e),r()},[i,r]);return function(e,n){var a=(0,t.useCallback)(function(t){if(e){var a=t.find(function(t){return t.target===e});if(a&&a.devicePixelContentBoxSize&&a.devicePixelContentBoxSize[0]){var i=a.devicePixelContentBoxSize[0].inlineSize,r=a.devicePixelContentBoxSize[0].blockSize,o=a.contentBoxSize[0].inlineSize;1!==window.devicePixelRatio&&i===o&&(i*=window.devicePixelRatio,r*=window.devicePixelRatio),n({x:i,y:r})}}},[n,e]);(0,t.useEffect)(function(){try{if(window.ResizeObserver&&e){var t=new ResizeObserver(a);return t.observe(e,{box:"device-pixel-content-box"}),function(){t.disconnect()}}}catch(e){}},[e,a])}(e,o),r}(l,a,f);return(0,t.useLayoutEffect)(function(){p()},[o,s,p]),n().createElement("div",{style:{position:"relative",height:"100%",width:"100%"},ref:u},c)});vt.displayName="SetCanvasSize";var yt=function(){return yt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yt.apply(this,arguments)},St={setCanvasPixelSize:Re.Bc,setCssToPhysicalPixelRatio:Re.II},Dt=(0,g.Ng)(function(e){return{activePivot:e.uiState.activeEditorActivity}},St)(function(e){return n().createElement(vt,yt({},e))}),It=function(e){return n().createElement(Dt,yt({},e))};It.displayName="SetCanvasSizeConnect";var xt,Ct=n().memo(function(e){var t=e.activeEditorActivity,a=e.match,i=e.children;return(Array.isArray(a)?a.some(function(e){return e===t}):a===t)?n().createElement(n().Fragment,null,i):null}),Ot=(0,g.Ng)(function(e){return{activeEditorActivity:e.uiState.activeEditorActivity}},null)(Ct),wt=I(4347),Et=function(e){return e.autoEnhance},At=I(8073),Lt=function(e){return e.filters},kt=function(e){return e.markup},Mt=I(6387);!function(e){e[e.ContrastStretching=0]="ContrastStretching",e[e.HistogramEqualization=1]="HistogramEqualization",e[e.ContrastStretchingAndHistogramEqualization=2]="ContrastStretchingAndHistogramEqualization"}(xt||(xt={}));var Pt="autoEnhanceUndoRedoStack",Tt={isAutoEnhanceOn:!1,contrastStretchingParams:{alpha:1,beta:0},level:0,enhanceAlgorithm:xt.ContrastStretching,undoRedoStack:{undoStack:[],redoStack:[],id:Pt}},Ut={isAutoEnhanceOn:!1,contrastStretchingParams:{alpha:1,beta:0},level:1,enhanceAlgorithm:xt.ContrastStretching,undoRedoStack:{undoStack:[],redoStack:[],id:Pt},undoPayload:void 0};function Ft(e,t){return e.brightness===t.brightness&&e.exposure===t.exposure&&e.saturation===t.saturation&&e.highlights===t.highlights&&e.shadows===t.shadows&&e.contrast===t.contrast&&e.tint===t.tint&&e.vignette===t.vignette&&e.temperature===t.temperature&&e.sharpness===t.sharpness}function Ht(e,t){var n=new Set(Object.keys(e.adjustmentsByDynamicLayer).concat(Object.keys(t.adjustmentsByDynamicLayer)));return Ft(e.baseAdjustments,t.baseAdjustments)&&Array.from(n).every(function(n){var a=e.adjustmentsByDynamicLayer[n],i=t.adjustmentsByDynamicLayer[n];return!(!a||!i)&&Ft(a,i)})&&e.version===t.version&&e.maskLevel===t.maskLevel}var Rt=I(2506),Nt={numRedSamplesPerSlice:17,numGreenSamplesPerSlice:17,numBlueSlicesPerRowIn2DLayout:2,numBlueSlicesPerColumnIn2DLayout:17},Bt=[{name:"Original",lutUrlId:"",config:void 0,locStringKey:"filter_nameOriginal",ariaLabelLocStringKey:"filter_nameOriginal"},{name:"Punch",lutUrlId:"lutUrl_punch",config:Nt,locStringKey:"filter_namePunch",ariaLabelLocStringKey:"filter_namePunch"},{name:"Golden",lutUrlId:"lutUrl_golden",config:Nt,locStringKey:"filter_nameGolden",ariaLabelLocStringKey:"filter_nameGolden"},{name:"Radiate",lutUrlId:"lutUrl_radiate",config:Nt,locStringKey:"filter_nameRadiate",ariaLabelLocStringKey:"filter_nameRadiate"},{name:"Warm Contrast",lutUrlId:"lutUrl_warmContrast",config:Nt,locStringKey:"filter_nameWarmContrast",ariaLabelLocStringKey:"filter_nameWarmContrast"},{name:"Calm",lutUrlId:"lutUrl_calm",config:Nt,locStringKey:"filter_nameCalm",ariaLabelLocStringKey:"filter_nameCalm"},{name:"Cool Light",lutUrlId:"lutUrl_coolLight",config:Nt,locStringKey:"filter_nameCoolLight",ariaLabelLocStringKey:"filter_nameCoolLight"},{name:"Vivid Cool",lutUrlId:"lutUrl_vividCool",config:Nt,locStringKey:"filter_nameVividCool",ariaLabelLocStringKey:"filter_nameVividCool"},{name:"Dramatic Cool",lutUrlId:"lutUrl_dramaticCool",config:Nt,locStringKey:"filter_nameDramaticCool",ariaLabelLocStringKey:"filter_nameDramaticCool"},{name:"BW",lutUrlId:"lutUrl_bw",config:Nt,locStringKey:"filter_nameBw",ariaLabelLocStringKey:"filter_nameBwAriaLabel"},{name:"BW Cool",lutUrlId:"lutUrl_bwCool",config:Nt,locStringKey:"filter_nameBwCool",ariaLabelLocStringKey:"filter_nameBwCoolAriaLabel"},{name:"BW Warm",lutUrlId:"lutUrl_bwWarm",config:Nt,locStringKey:"filter_nameBwWarm",ariaLabelLocStringKey:"filter_nameBwWarmAriaLabel"},{name:"BW High Contrast",lutUrlId:"lutUrl_bwHighContrast",config:Nt,locStringKey:"filter_nameBwHighContrast",ariaLabelLocStringKey:"filter_nameBwHighContrastAriaLabel"},{name:"Burn",lutUrlId:"lutUrl_burn",config:Nt,locStringKey:"filter_nameBurn",ariaLabelLocStringKey:"filter_nameBurn"},{name:"Film",lutUrlId:"lutUrl_film",config:Nt,locStringKey:"filter_nameFilm",ariaLabelLocStringKey:"filter_nameFilm"},{name:"Vintage",lutUrlId:"lutUrl_vintage",config:Nt,locStringKey:"filter_nameVintage",ariaLabelLocStringKey:"filter_nameVintage"}],jt=Bt.reduce(function(e,t){return e[t.name]=1,e},{}),Vt={activeFilter:Bt[0],availableFilters:Bt,filterLevel:1,filterLevelsByName:jt,undoRedoStack:{undoStack:[],redoStack:[],id:"filtersUndoRedoStack"},undoPayload:void 0},zt=function(e){return!!(e&&e.lutUrlId&&e.config)},Gt=function(){return Gt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gt.apply(this,arguments)};function Kt(e,t){return zt(e.activeFilter)&&zt(t.activeFilter)&&e.activeFilter.config.numRedSamplesPerSlice===t.activeFilter.config.numRedSamplesPerSlice&&e.activeFilter.config.numGreenSamplesPerSlice===t.activeFilter.config.numGreenSamplesPerSlice&&e.activeFilter.config.numBlueSlicesPerRowIn2DLayout===t.activeFilter.config.numBlueSlicesPerRowIn2DLayout&&e.activeFilter.config.numBlueSlicesPerColumnIn2DLayout===t.activeFilter.config.numBlueSlicesPerColumnIn2DLayout&&e.activeFilter.lutUrlId===t.activeFilter.lutUrlId&&e.activeFilter.name===t.activeFilter.name&&e.filterLevel===t.filterLevel||!zt(e.activeFilter)&&!zt(t.activeFilter)}function Wt(e){return Gt({},e)}function qt(e,t){return e.level===t.level}function Qt(e,t){var n=e.markupContentItems||[],a=t.markupContentItems||[];return n.length===a.length&&n.every(function(e,t){return e.id===a[t].id})}var Yt=I(4857),Jt=I(8847);function Xt(e,t){return 1!==e&&"loaded"===t}function Zt(e,t,n,a,i,r,o,s,c){var d,l;return!((!e||Ht(e,(0,Rt.MK)(e.adjustmentsByDynamicLayer)))&&Kt(t,Wt(Vt))&&qt(n,Tt)&&Qt(a,Yt.$0)&&(!(d=i).texturePatchInfos||!d.texturePatchInfos.some(function(e){return(0,Jt.n)(e.algorithmParameters.layerToPatch,"main")}))&&"OriginalBackground"===r.backgroundType&&!o.isLightApplied&&!s.imageWasReplaced&&!Xt((l=c).resizeFactor,l.resizedImageLoadingStatus))}function $t(e){return void 0===e.focalPointUvPosition||void 0===e.initialFocalPointUvPosition?e.focalPointUvPosition===e.initialFocalPointUvPosition:(0,ot.CN)(e.focalPointUvPosition,e.initialFocalPointUvPosition)}function en(e){return!$t(e)}var tn=I(5687),nn=I(8451),an=I(5295);function rn(e){var t=e.cropRectangle,n=e.imageTransform,a=e.originalImageSize,i=(0,rt.qq)(t),r=(0,tn.D)(n),o=(0,it.rt)(r,i,an.G),s=!(0,nn.J)(n.height,a.y,an.G)||!(0,nn.J)(n.width,a.x,an.G);return!o||s}function on(e){return en(e.focalPoint)||rn(e.transforms)||Zt(e.adjustments,e.filters,e.autoEnhance,e.markup,e.texturePatch,e.imageBackground,e.relight,e.imageWasReplaced,e.resize)}var sn=I(3745),cn=function(){return cn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cn.apply(this,arguments)};function dn(e,t){var n=e.cumulativeAppliedTelemetry.cumulativeResizeFactor,a="loaded"===t.resizedImageLoadingStatus?t.resizeFactor:1;return cn(cn({},e),{cumulativeTelemetry:{editType:"SuperResolution",value:n*a},imageWasReplaced:e.imageWasReplaced||"loaded"===t.resizedImageLoadingStatus})}function ln(e,t,n,a,i,r,o,s,c,d,l){return{transforms:{imageTransform:(0,tn.H)(e.imageMatrix),cropRectangle:(0,rt.GM)(e.cropMatrix),originalImageSize:cn({},e.originalImageSize),aspectRatio:e.aspectRatio,shouldInvertOriginalAspectRatio:e.shouldInvertOriginalAspectRatio,undoRedoStack:e.undoRedoStack},adjustments:t,filters:n,autoEnhance:cn(cn({},a),{level:a.isAutoEnhanceOn?a.level:0}),version:1,markup:i,texturePatch:{texturePatchInfos:r.texturePatchInfos,removedTexturePatchInfos:r.removedTexturePatchInfos,undoRedoStack:r.undoRedoStack},imageBackground:o,relight:s,focalPoint:{focalPointUvPosition:c.focalPointUvPosition,focalPointUvPositionOnEditedImage:c.focalPointUvPosition?(0,sn.xt)(c.focalPointUvPosition,e.imageMatrix,e.cropMatrix):void 0,initialFocalPointUvPosition:c.initialFocalPointUvPosition,undoRedoStack:c.undoRedoStack},imageWasReplaced:dn(d,l),resize:l}}var un=I(3385),fn=function(e){return e.focalPoint};function pn(e){return e.relight}I(7186);var mn,_n,hn=function(e){return e.imageWasReplaced},bn=function(e){return e.resize.resizedImageLoadingStatus},gn=function(e){return e.resize},vn={resizedImageLoadingStatus:"none",resizeFactor:1,resizeImageRequestId:void 0,undoRedoStack:{undoStack:[],redoStack:[],id:"resizeUndoRedoStack"}},yn=I(9397),Sn=I(1006),Dn={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),Object.assign(e,t.undoPayload)},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),Object.assign(e,t.redoPayload)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},In=I(8085),xn=function(){return xn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xn.apply(this,arguments)},Cn={imageWasReplaced:!1,imageIdInCache:null,imageToResetTo:null,cumulativeAppliedTelemetry:{editType:"SuperResolution",cumulativeResizeFactor:1},undoRedoStack:{undoStack:[],redoStack:[],id:"imageReplacementUndoRedoStack"}},On=(0,yn.X0)({name:"imageWasReplaced",initialState:Cn,reducers:{setImageWasReplaced:function(e,t){e.imageWasReplaced=t.payload},setImageIdInCache:function(e,t){e.imageIdInCache=t.payload.imageIdInCache,(null==e.imageToResetTo&&("Thumbnail"===t.payload.imageKind||"FullSize"===t.payload.imageKind)||null!=e.imageToResetTo&&"FullSize"===t.payload.imageKind)&&(e.imageToResetTo={imageIdInCache:t.payload.imageIdInCache,fullImageSize:t.payload.fullImageSize})}},extraReducers:function(e){e.addCase(Ne.Cj,function(e,t){var n,a;return xn(xn({},Cn),{imageToResetTo:e.imageToResetTo,imageIdInCache:null!==(a=null===(n=e.imageToResetTo)||void 0===n?void 0:n.imageIdInCache)&&void 0!==a?a:null})}),e.addCase(Ne.gP,function(e,t){(0,Sn.s)(e,t.payload,"superResolutionApplied",function(e){var n;e.imageWasReplaced=!0,e.imageIdInCache=t.payload.imageIdInCache,"SuperResolution"===(null===(n=t.payload.telemetry)||void 0===n?void 0:n.editType)&&(e.cumulativeAppliedTelemetry.cumulativeResizeFactor=t.payload.telemetry.resizeFactor*e.cumulativeAppliedTelemetry.cumulativeResizeFactor)})}),(0,In.h$)(e,Dn)}}),wn=(mn=On.actions).setImageWasReplaced,En=mn.setImageIdInCache,An=On.reducer,Ln=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},kn=(0,X.Rz)([de.g0,Z,Lt,Et,kt,Mt.A,un.Bi,pn,fn,hn,gn],function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return on(ln.apply(void 0,e))}),Mn=(0,X.Rz)([de.g0,Z,Lt,Et,kt,Mt.A,un.Bi,pn,fn],function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return on(ln.apply(void 0,Ln(Ln([],e,!1),[Cn,vn],!1)))}),Pn=(0,X.Rz)([Z,Lt,Et,kt,Mt.A,At.sg,de.$E,de.Ik,un.Bi,pn,fn,hn,gn],function(e,t,n,a,i,r,o,s,c,d,l,u,f){var p=kn({transformTools:wt.GZ,colorAdjustments:e,filters:t,autoEnhance:n,markup:a,texturePatch:i,imageBackground:c,relight:d,focalPoint:l,imageWasReplaced:u,resize:f}),m=!o,_=s===ct.I.draggingView;return r&&p&&m&&!_}),Tn={setAriaAnnouncement:J.r9},Un=(0,g.Ng)(function(e){return{visible:Pn(e)}},Tn)(function(e){var a=e.visible,i=e.gutterSize,r=void 0===i?32:i,o=e.setAriaAnnouncement,s=(0,t.useContext)(y.x).strings,c={bottom:"".concat(r,"px"),left:"50%",transform:"translateX(-50%)"};return(0,t.useEffect)(function(){a&&o(s.editor_viewingOriginalAriaLive)},[a,o,s]),n().createElement(re,{visible:a,style:c},s.editor_viewingOriginal)});(0,D.loadStyles)([{rawString:".EditorCommandBarStack_6bfc61e6{padding:0 12px;overflow:hidden;height:44px}.CommandBarBeginningStackItem_6bfc61e6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.CommandBarMiddleStackItem_6bfc61e6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.CommandBarEndStackItem_6bfc61e6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.CommandBarEndStackItem_6bfc61e6>*{margin:0 4px}.MobileCommandBarStack_6bfc61e6{padding:0 12px;overflow:hidden;height:56px}.MobileCommandBarEndStackItem_6bfc61e6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0}"}]),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(_n||(_n={}));var Fn=I(2522),Hn=function(e){if(e){var t=(0,ae.n)(e);return t&&[t.r/255,t.g/255,t.b/255,t.a||1]}};function Rn(e,t){var n=(0,ae.n)(e);if(!n)throw new Error("Invalid Css color string: ".concat(e));return"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(t,")")}var Nn=function(){return Nn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nn.apply(this,arguments)};function Bn(e,t){return void 0===t&&(t=!0),{root:{color:e.palette.themePrimary,fill:e.palette.themePrimary},rootHovered:{backgroundColor:e.palette.neutralLight},rootPressed:{backgroundColor:e.palette.neutralQuaternaryAlt},rootDisabled:{fill:t?e.palette.neutralTertiary:e.palette.themeTertiary},icon:{width:"16px",height:"16px"}}}function jn(e){return{backgroundColor:e.palette.themeSecondary,color:e.palette.white,border:"none"}}var Vn={root:{fontSize:"18px",width:"18px",height:"18px",lineHeight:"18px"}},zn={inset:-3};function Gn(e){var t=(0,Fn.g)(e);return{root:{color:Rn(e.palette.black,t?1:.8956),backgroundColor:"rgba(255,255,255,".concat(t?.0605:.7,")"),border:"1px solid ".concat(Rn(e.palette.black,t?.0698:.0578)),borderRadius:"4px"},rootHovered:{backgroundColor:t?"rgba(255,255,255,0.0837)":"rgba(255,255,255,0.5)",opacity:.9},rootPressed:{color:Rn(e.palette.black,t?.786:.6063),backgroundColor:t?"rgba(255,255,255,0.0326)":"rgba(255,255,255,0.3)"},rootFocused:(0,a.getFocusStyle)(e,zn),rootDisabled:{color:Rn(e.palette.black,t?.3628:.3614),backgroundColor:"rgba(255,255,255,".concat(t?.0419:.7,")")},textContainer:{width:"100%"},label:{fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis"}}}var Kn=I(8273).vy;function Wn(){if(!Kn._currentValue)throw new Error("useStore must used within a Redux store. Ensure you have a ImageEditorContext defined.");return Kn._currentValue.store}function qn(){var e=(0,t.useContext)(k.b),n=e.logSessionStatistics,a=e.updateSessionId,i=e.sessionFrameStats,r=Wn();return(0,t.useCallback)(function(){var e,t=null===(e=r.getState().transformTools)||void 0===e?void 0:e.image.originalPixelSize;t&&i&&(n({minFrameRate:i.minimumFps,avgFrameRate:i.averageFps,imageSize:{width:t.x,height:t.y}}),i.reset(),a())},[r,i,n,a])}var Qn=(0,t.memo)(function(e){var i=e.onCancel,r=e.styles,o=e.iconProps,s=(0,b.D)(),c=(0,t.useContext)(y.x).strings,d=(0,t.useMemo)(function(){return(0,a.concatStyleSets)(Bn(s),r)},[s,r]),l=function(e){var n=(0,t.useContext)(k.b).logCancelEvent,a=qn();return(0,t.useCallback)(function(t){n({inputType:(0,j.UR)(t)}),a(),e()},[n,a,e])}(i);return n().createElement(n().Fragment,null,o?n().createElement(a.IconButton,{key:"Cancel",iconProps:o,styles:d,ariaLabel:c.toolbar_cancelAriaLabel,title:c.toolbar_cancelTooltip,role:"button",onClick:l}):n().createElement(a.DefaultButton,{key:"Cancel",text:c.toolbar_cancel,styles:d,onClick:l,ariaLabel:c.toolbar_cancelAriaLabel,title:c.toolbar_cancelTooltip}))}),Yn=function(){return Yn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yn.apply(this,arguments)},Jn=(0,t.memo)(function(e){var t=e.styles,a={color:(0,b.D)().palette.neutralPrimaryAlt,lineHeight:"43px"};return n().createElement("div",{"aria-hidden":"true",style:Yn(Yn({},a),t)},"|")}),Xn=I(728),Zn=(0,X.Rz)([de.g0,Z,Lt,Et,kt,Mt.A,un.Bi,pn,fn,hn,gn,de.bV],function(e,t,n,a,i,r,o,s,c,d,l,u){return function(e,t){var n=(0,Xn.k)(e.transforms,t),a=!e.adjustments||Ht(e.adjustments,(0,Rt.MK)(e.adjustments.adjustmentsByDynamicLayer)),i=Kt(e.filters,Wt(Vt)),r=qt(e.autoEnhance,Tt),o=Qt(e.markup,Yt.$0),s=!function(e){var t;return!!(null===(t=e.texturePatchInfos)||void 0===t?void 0:t.some(function(e){return e.isUndoRedoable}))}(e.texturePatch),c=!("OriginalBackground"!==e.imageBackground.backgroundType),d=$t(e.focalPoint),l=e.imageWasReplaced.imageWasReplaced;return n&&a&&i&&r&&o&&s&&c&&d&&!l}(ln(e,t,n,a,i,r,o,s,c,d,l),u)}),$n=I(5384),ea=I(3443),ta=I(2422),na=(0,t.memo)(function(e){var i=e.isVisible,r=e.hostId,o=e.dialogType,s=void 0===o?ea.h.normal:o,c=e.dialogIsBlocking,d=e.styles,l=e.onConfirm,u=e.onCancel,f=(0,t.useMemo)(function(){return(0,a.merge)({dialog:{main:{minHeight:"160px"}}},d)},[d]),p=(0,t.useContext)(y.x).strings,m={contentTitle:p.toolbar_resetConfirmDialogContentTitle,contentSubText:p.toolbar_resetConfirmDialogContentSubText,closeButtonAriaLabel:p.toolbar_resetConfirmDialogCloseButtonAriaLabel,confirmText:p.toolbar_resetConfirmDialogConfirmText,confirmAriaLabel:p.toolbar_resetConfirmDialogConfirmAriaLabel,cancelText:p.toolbar_resetConfirmDialogCancelText,cancelAriaLabel:p.toolbar_resetConfirmDialogCancelAriaLabel};return n().createElement(ta.K,{isVisible:i,hostId:r,dialogType:s,dialogIsBlocking:c,dialogStrings:m,styles:f,onConfirm:l,onCancel:u})}),aa=I(5468),ia=(0,t.createContext)({onResetEditsConfirmationDialog:void 0}),ra=function(e){var t=e.onResetEditsConfirmationDialog,a=e.children;return n().createElement(ia.Provider,{value:{onResetEditsConfirmationDialog:t}},a)},oa=(0,t.createContext)({addOrReplaceImage:function(e,t){},getImage:function(e){throw new Error("Not implemented")},hasImage:function(e){return!1},clearImageCacheExceptId:function(e){throw new Error("Not implemented")},clearImageCache:function(){throw new Error("Not implemented")}});function sa(e){var n=(0,t.useContext)(oa),a=n.clearImageCacheExceptId,i=n.clearImageCache;return(0,t.useCallback)(function(t,n){var r=null==t?void 0:t.imageIdInCache;e({shouldAnimate:n,fullImageSize:null==t?void 0:t.fullImageSize}),r?a(r):i()},[i,a,e])}var ca=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},da=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},la=(0,t.memo)(function(e){var i=this,r=e.stackResponseMode,o=e.resetDisabled,s=e.resetEdits,c=e.setAriaAnnouncement,d=e.resetButtonStyles,l=e.confirmationDialogStyles,u=e.dialogType,f=e.dialogIsBlocking,p=e.imageToResetTo,m=(0,b.D)(),_=(0,t.useContext)(y.x).strings,h=(0,t.useMemo)(function(){return(0,a.concatStyleSets)(function(e){return{root:{color:e.palette.neutralPrimary,height:"32px"},rootDisabled:{color:e.palette.neutralTertiary},rootHovered:{color:e.palette.neutralPrimary,backgroundColor:e.palette.neutralLight},rootPressed:{color:e.palette.neutralPrimary,backgroundColor:e.palette.neutralQuaternaryAlt},icon:{color:e.palette.themePrimary}}}(m),d)},[m,d]),g=(0,t.useContext)(ia).onResetEditsConfirmationDialog,v=(0,aa.J)(g),S=v.showConfirmationDialog,D=v.onConfirmInDialog,I=v.onCancelInDialog,x=v.isHavanaConfirmDialogVisible,C=function(e,n,a,i){var r=(0,t.useContext)(k.b).logEditResetEvent,o=(0,t.useContext)($n.Z).setImageLayer;return(0,t.useCallback)(function(t){r({inputType:(0,j.UR)(t)}),e(i,!0),o("overlay",null),n(a)},[r,e,i,o,n,a])}(sa(s),c,_.toolbar_imageResetFinishedAriaLive,p),O=function(e){return ca(i,void 0,void 0,function(){return da(this,function(t){switch(t.label){case 0:return[4,S().then(function(t){"confirmed"===t&&C(e)}).catch(function(e){})];case 1:return t.sent(),[2]}})})};return n().createElement(n().Fragment,null,n().createElement(a.ActionButton,{key:"Reset",text:r>_n.Medium?_.toolbar_imageReset:void 0,styles:h,ariaLabel:_.toolbar_imageResetAriaLabel,title:_.toolbar_imageResetTooltip,iconProps:{iconName:"History"},onClick:function(e){return ca(i,void 0,void 0,function(){return da(this,function(t){return e.persist(),[2,O(e)]})})},disabled:o,role:"button","data-test-id":"reset",allowDisabledFocus:!0}),n().createElement("span",{style:{margin:"0px"}},n().createElement(na,{onConfirm:D,onCancel:I,isVisible:x,styles:l,dialogType:u,dialogIsBlocking:f})))}),ua={resetEdits:Ne.Cj,setAriaAnnouncement:J.r9},fa=(0,g.Ng)(function(e){return{resetDisabled:Zn(e),imageToResetTo:e.imageWasReplaced.imageToResetTo}},ua)(la),pa=I(7572),ma=I(8489),_a=(0,X.Rz)(de.ag,function(e){return(0,ma.E)(e,-pa.JQ).uvToWorld}),ha=(0,X.Rz)(de.ag,function(e){return(0,ma.E)(e,pa.zL).uvToWorld}),ba=I(8369),ga=(0,X.Rz)(de.ag,function(e){return(0,ba.o)(e,(0,it.JD)(e.view.worldToView))}),va=(0,X.Rz)([de.FE,de.q5,de.un,_a,ga],function(e,t,n,a,i){return e&&(0,it.v7)(n,a)||t&&i.zoomIsMaximum}),ya=I(7216),Sa=(0,X.Rz)([de.FE,de.q5,de.un,ha,de.gO],function(e,t,n,a,i){return e&&(0,it.v7)(n,a)||t&&i===ya.m.fitCropRectInView});function Da(e,n){var a=(0,t.useRef)(e);return n||(a.current=e),a.current}function Ia(e,n,a){var i=(0,t.useRef)(e);return{zoomIn:(0,t.useCallback)(function(){a(-pa.JQ),n({type:"Zoom",zoom:i.current})},[n,a]),zoomOut:(0,t.useCallback)(function(){a(pa.zL),n({type:"Zoom",zoom:i.current})},[n,a])}}var xa,Ca=(0,t.memo)(function(e){var i=e.stackResponseMode,r=e.zoomInDisabled,o=e.zoomOutDisabled,s=e.freezeZoomInOutDisabled,c=e.currentZoom,d=e.setAriaAnnouncementScenario,l=e.handleZoomDeltaChange,u=e.styles,f=(0,b.D)(),p=(0,t.useContext)(y.x).strings,m=(0,t.useMemo)(function(){return(0,a.concatStyleSets)(Bn(f),u)},[f,u]),_=Ia(c,d,l),h=_.zoomIn,g=_.zoomOut,v=Da(r,s),S=Da(o,s);return n().createElement(n().Fragment,null,i>_n.Small&&n().createElement(n().Fragment,null,n().createElement(a.IconButton,{key:"ZoomIn",iconProps:{iconName:"ZoomIn"},styles:m,ariaLabel:p.toolbar_zoomInAriaLabel,title:p.toolbar_zoomInTooltip,role:"button",onClick:h,disabled:v,"data-test-id":"zoom-in"}),n().createElement(a.IconButton,{key:"ZoomOut",iconProps:{iconName:"ZoomOut"},styles:m,ariaLabel:p.toolbar_zoomOutAriaLabel,title:p.toolbar_zoomOutTooltip,role:"button",onClick:g,disabled:S,"data-test-id":"zoom-out"})))}),Oa={handleZoomDeltaChange:Re.D_,setAriaAnnouncementScenario:J.Ac},wa=(0,g.Ng)(function(e){var t=!e.transformTools.cropInteraction.enableZoomToCrop&&!e.transformTools.view.enableZoomToView,n=!!e.transformTools.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown;return{currentZoom:(0,at.j)(e),zoomInDisabled:t||va(e),zoomOutDisabled:t||Sa(e),freezeZoomInOutDisabled:n}},Oa)(Ca);function Ea(e){var n=(0,t.useContext)(k.b).logSaveEvent,a=(0,t.useContext)(k.b).logCopyToClipboardEvent,i=Wn(),r=qn(),o=(0,t.useCallback)(function(t){return function(o,s){var c,d=i.getState().filters;t===xa.CopyToClipboard?a({entryPoint:s||"ContextMenu"}):(n({saveType:t,filterName:null===(c=null==d?void 0:d.activeFilter)||void 0===c?void 0:c.name,filterIntensity:null==d?void 0:d.filterLevel,inputType:function(){if(o){var e=o;return void 0!==e.buttons?(0,j.UR)(e):"Keyboard"}return""}()}),r()),e(t)}},[i,e,a,n,r]);return{onSaveOriginal:(0,t.useMemo)(function(){return o(xa.SaveAsOriginal)},[o]),onSaveAsCopy:(0,t.useMemo)(function(){return o(xa.SaveAs)},[o]),onCopyToClipboard:(0,t.useMemo)(function(){return o(xa.CopyToClipboard)},[o])}}!function(e){e.SaveAs="SaveAs",e.SaveAsOriginal="SaveAsOriginal",e.CopyToClipboard="CopyToClipboard"}(xa||(xa={}));var Aa=(0,t.createContext)(new Set),La=(0,t.createContext)({registerSaveEvent:function(e){},unregisterSaveEvent:function(e){},notifyPreSaveListeners:function(e){return Promise.resolve()}}),ka=(0,t.memo)(function(e){var i=e.onSave,r=e.styles,o=e.onRenderSaveMenu,s=e.isCopyToClipboardVisible,c=void 0!==s&&s,d=(0,t.useContext)(y.x).strings,l=(0,b.D)(),u=(0,t.useContext)(La).notifyPreSaveListeners,f=Ea(i),p=f.onSaveOriginal,m=f.onSaveAsCopy,_=f.onCopyToClipboard,h=(0,t.useMemo)(function(){return(0,a.concatStyleSets)(function(e){return{root:Nn(Nn({},jn(e)),{margin:"0px 4px"}),rootDisabled:{backgroundColor:e.palette.neutralQuaternaryAlt,color:e.palette.neutralTertiary},rootHovered:jn(e),rootPressed:jn(e),rootExpanded:jn(e)}}(l),r)},[l,r]),g=(0,t.useContext)(Aa),v=!g.has(xa.SaveAsOriginal),S=!g.has(xa.SaveAs),D=!g.has(xa.CopyToClipboard),I=(0,t.useCallback)(function(e){u(xa.SaveAsOriginal).then(function(){p(e)}).catch(function(){throw new Error("unable to notify listeners")})},[u,p]),x=(0,t.useCallback)(function(e){u(xa.SaveAs).then(function(){m(e)}).catch(function(){throw new Error("unable to notify listeners")})},[u,m]),C=(0,t.useCallback)(function(e){_&&u(xa.CopyToClipboard).then(function(){_(e,"ContextMenu")}).catch(function(){throw new Error("unable to notify listeners")})},[u,_]),O=[{key:xa.SaveAsOriginal,text:d.toolbar_imageSave,ariaLabel:d.toolbar_imageSaveAriaLabel,title:d.toolbar_imageSaveTooltip,iconProps:{iconName:"Save"},onClick:I,disabled:v},{key:xa.SaveAs,text:d.toolbar_imageSaveAsCopy,ariaLabel:d.toolbar_imageSaveAsCopyAriaLabel,title:d.toolbar_imageSaveAsCopyTooltip,iconProps:{iconName:"SaveAs"},onClick:x,disabled:S}];c&&O.push({key:xa.CopyToClipboard,text:d.toolbar_imageCopyToClipboard,ariaLabel:d.toolbar_imageCopyToClipboardAriaLabel,title:d.toolbar_imageCopyToClipboardTooltip,iconProps:{iconName:"Copy"},onClick:C,disabled:D});var w={items:O};return o?o({onSave:i,saveMenuItems:O,enabledSaveTypes:g,primaryButtonStyles:h}):n().createElement(a.PrimaryButton,{text:d.toolbar_imageSaveMenu,title:d.toolbar_imageSaveMenuTooltip,styles:h,menuTriggerKeyCode:a.KeyCodes.down,"data-test-id":"save_menu",menuProps:w,disabled:v&&S,allowDisabledFocus:!0})}),Ma=function(){return Ma=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ma.apply(this,arguments)},Pa=n().memo(function(e){var i=e.currentZoom,r=e.styles,o=(0,t.useContext)(y.x),s=o.localizePercentage,c=o.strings,d=(0,b.D)(),l={color:d.palette.neutralPrimaryAlt,lineHeight:"24px",minWidth:"45px",textAlign:(0,a.getRTL)(d)?"left":"right"},u=c;return n().createElement("div",{style:Ma({},null==r?void 0:r.container)},n().createElement("span",{style:Ma(Ma({float:(0,a.getRTL)(d)?"left":"right"},l),null==r?void 0:r.label),"aria-label":u.toolbar_zoomLevelAriaLabel},s(i)))}),Ta=(0,g.Ng)(function(e){return{currentZoom:(0,at.j)(e)}})(Pa),Ua=I(4860),Fa=(0,t.memo)(function(e){var i=e.styles,r=(0,t.useContext)(Ua.t).combinedUndoRedoCoordinator,o=(0,t.useContext)(y.x).strings,s=(0,b.D)(),c=(0,a.getRTL)(s),d=(0,t.useState)(void 0),l=d[0],u=d[1],f=(0,t.useState)(void 0),p=f[0],m=f[1],_=(0,t.useState)(!0),h=_[0],g=_[1],v=(0,t.useState)(!0),S=v[0],D=v[1];return function(e){var n=(0,t.useContext)(Ua.t).combinedUndoRedoCoordinator;(0,t.useEffect)(function(){return null==n||n.onChange.addListener(e),e(),function(){null==n||n.onChange.removeListener(e)}},[n,e])}((0,t.useCallback)(function(){g(!(null==r?void 0:r.canUndo())),D(!(null==r?void 0:r.canRedo()));var e=null==r?void 0:r.hasUndoItems(),t=null==r?void 0:r.hasRedoItems();u((0,a.concatStyleSets)(Bn(s,!e),i)),m((0,a.concatStyleSets)(Bn(s,!t),i))},[r,i,s])),n().createElement(n().Fragment,null,n().createElement(a.IconButton,{key:"Undo",iconProps:{iconName:c?"RedoIcon-Havana":"UndoIcon-Havana"},styles:l,ariaLabel:o.toolbar_undoAriaLabel,title:o.toolbar_undo,role:"button",onClick:function(){null==r||r.undo()},disabled:h,"data-test-id":"undo"}),n().createElement(a.IconButton,{key:"Redo",iconProps:{iconName:c?"UndoIcon-Havana":"RedoIcon-Havana"},styles:p,ariaLabel:o.toolbar_redoAriaLabel,title:o.toolbar_redo,role:"button",onClick:function(){null==r||r.redo()},disabled:S,"data-test-id":"redo"}))}),Ha=function(){return Ha=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ha.apply(this,arguments)},Ra=function(){return Ra=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ra.apply(this,arguments)},Na=n().memo(function(e){var i=e.componentSize,r=e.customItems,o=e.onSave,s=e.onRenderSaveMenu,c=e.onCancel,d=e.controlPivot,l=e.resetButtonStyles,u=e.confirmationDialogStyles,f=e.isCopyToClipboardVisible,p=void 0!==f&&f,m=(0,t.useState)(null),_=m[0],h=m[1],g=(0,t.useState)(_n.Large),v=g[0],y=g[1],S=(0,b.D)(),D=(0,a.getRTL)(S),I=(0,t.useContext)(q.u).enableUndoRedo;return(0,t.useLayoutEffect)(function(){_&&(_.clientWidth>1024?y(_n.Large):_.clientWidth>894?y(_n.Medium):y(_n.Small))},[_,i]),n().createElement("div",{ref:h},n().createElement(a.Stack,{className:"EditorCommandBarStack_6bfc61e6",horizontal:!0,styles:{root:{backgroundColor:S.palette.neutralLighter,borderBottom:"".concat(S.palette.neutralQuaternary," solid 1px")}}},n().createElement(a.Stack.Item,{className:"CommandBarBeginningStackItem_6bfc61e6",grow:!d},n().createElement(ka,{onSave:o,onRenderSaveMenu:s,isCopyToClipboardVisible:p}),n().createElement(Jn,{styles:{padding:D?"0 16px 0 8px":"0 8px 0 16px",color:S.palette.neutralTertiary}}),n().createElement(fa,{stackResponseMode:v,resetButtonStyles:l,confirmationDialogStyles:u}),I&&n().createElement(Fa,null),null==r?void 0:r.map(function(e){var t,i,r=e.key,o=e.iconProps,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["key","iconProps"]);return n().createElement(a.CommandBarButton,Ra({key:r},s,{iconProps:(t=Bn(S),i=o,Ha(Ha({},i),{styles:Ha(Ha({},t),null==i?void 0:i.styles)}))}))})),d&&n().createElement(a.Stack.Item,{grow:!0,disableShrink:!0,className:"CommandBarMiddleStackItem_6bfc61e6"},d),n().createElement(a.Stack.Item,{className:"CommandBarEndStackItem_6bfc61e6",grow:!d},n().createElement(Ta,{styles:{container:{width:"auto",padding:"0px 4px"}}}),n().createElement(wa,{stackResponseMode:v}),n().createElement(Qn,{onCancel:c,iconProps:{iconName:"cancel"}}))))});function Ba(e){return{count:{},icon:{color:e.palette.themePrimary,svg:{width:"1em",height:"1em",fill:"currentcolor"},i:{height:"100%",display:"flex",alignItems:"center"},fontSize:"16px"},link:{height:"34px",lineHeight:"34px","&:hover":{backgroundColor:e.palette.neutralLight},"&:active":{backgroundColor:e.palette.neutralQuaternaryAlt}},linkContent:{height:"100%",display:"flex"},linkIsSelected:{height:"34px",lineHeight:"34px","&:hover":{backgroundColor:e.palette.neutralLight},color:e.palette.neutralPrimary},root:{"button:hover i":{color:e.palette.themeDarkAlt},display:"flex"},text:{marginInlineStart:"4px"},linkInMenu:{},overflowMenuButton:{}}}Na.displayName="EditorCommandBar",(0,D.loadStyles)([{rawString:".dismissButton_3ff48d4c{margin-top:16px;margin-bottom:8px;border:none}"}]);var ja=(0,t.memo)(function(e){var i=e.styles,r=e.setShowAspectRatioOptions,o=(0,b.D)(),s=(0,t.useContext)(y.x).strings,c=(0,t.useCallback)(function(){r(!1)},[r]);return n().createElement(a.DefaultButton,{className:"dismissButton_3ff48d4c",text:s.footer_done,onClick:c,theme:o,styles:i})});ja.displayName="DesktopDismissAspectRatioOptionsButton";var Va={setShowAspectRatioOptions:Ce.Uk},za=(0,g.Ng)(null,Va)(ja);(0,D.loadStyles)([{rawString:".actionsStackContainer_01388a0f{position:absolute;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}"}]);var Ga=(0,t.memo)(function(e){var t=e.children,a=e.styles,i=void 0===a?{}:a;return n().createElement("div",{className:"actionsStackContainer_01388a0f",style:i.container},t)}),Ka=null;function Wa(e,t,n){var a=function(){if(!Ka){var e=document.createElement("canvas");Ka=e.getContext("2d")}return Ka}(),i=0;if(a){a.font=t+"px "+n;var r=a.measureText(e);i=Math.ceil(r.width)}return i}"".concat(18,"px"),"".concat(18,"px");var qa=I(9450);(0,D.loadStyles)([{rawString:".tileContainer_51d7657d{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:80px;margin-top:8px}.tileContainer_51d7657d .tile_51d7657d{position:relative;background-color:transparent;border-radius:4px;width:100%;height:100%}.tileContainer_51d7657d .tile_51d7657d :active{border-radius:4px}.tileContainer_51d7657d .tileName_51d7657d{font-size:12px;pointer-events:auto}.ms-Fabric--isFocusHidden .tileContainer_51d7657d .tile_51d7657d button{outline:0}.ms-Fabric--isFocusVisible .tileContainer_51d7657d .tile_51d7657d button:focus{outline-color:inherit;outline-width:1px;outline-style:solid}"}]);var Qa,Ya,Ja=I(5325),Xa=function(){return Xa=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xa.apply(this,arguments)},Za=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};(Ya=Qa||(Qa={}))[Ya.BelowTile=0]="BelowTile",Ya[Ya.InsideTileBesideIcon=1]="InsideTileBesideIcon",Ya[Ya.InsideTileBelowIcon=2]="InsideTileBelowIcon";var $a=(0,t.forwardRef)(function(e,i){var r=e.name,o=e.ariaLabel,s=e.ariaSelected,c=e.namePosition,d=void 0===c?Qa.BelowTile:c,l=e.iconName,u=e.tileClassNames,f=e.tileStyles,p=e.isHighlighted,m=e.isActive,_=e.isDisabled,h=void 0!==_&&_,b=e.role,g=void 0===b?"option":b,v=e.tabIndex,y=void 0===v?0:v,S=e.onClick,D=e.title,I=e.id,x=(0,t.useCallback)(function(e){S(r,e)},[r,S]),C=(0,t.useState)(null),O=C[0],w=C[1];(0,t.useLayoutEffect)(function(){O&&(O.tabIndex=y,O.setAttribute("role",g),O.setAttribute("aria-selected",String(s)))},[O,y,s,g]);var E=(0,t.useMemo)(function(){return n().createElement("span",{className:"tileName_51d7657d",style:(0,Ja.N2)(m,h,f.name),"aria-hidden":"true",onClick:h?void 0:x},r)},[m,h,r,f.name,x]),A=(0,t.useMemo)(function(){var e={display:"flex",alignItems:"center",cursor:f.background.cursor,width:"100%",height:"100%",justifyContent:"center"};return d===Qa.InsideTileBesideIcon?n().createElement("div",{style:e},n().createElement(xe.Icon,{iconName:l,style:(0,Ja.KM)(m,f.icon)}),E):n().createElement("div",{style:Xa(Xa({},e),{flexDirection:"column"})},n().createElement(xe.Icon,{iconName:l,style:(0,Ja.KM)(m,f.icon)}),d===Qa.InsideTileBelowIcon&&E)},[l,f,E,d,m]);return(0,t.useImperativeHandle)(i,function(){return{focus:function(){return null==O?void 0:O.focus()}}},[O]),n().createElement("div",{className:"tileContainer_51d7657d",style:f.container},n().createElement(qa.kA,{className:a.css.apply(void 0,Za(["tile_51d7657d"],u||[],!1)),style:(0,Ja.Ze)(p,m,h,f.background),isFluentStyling:!0,background:A,ariaLabel:o,linkRef:w,onClick:h?void 0:x,title:D,id:I}),d===Qa.BelowTile&&E)}),ei=I(8365);function ti(e,t){return function(n){var a=function(e){return new Map([[ei.qL.name,{key:"original",text:e.aspectRatio_original,ariaLabel:e.aspectRatio_originalAriaLabel}],[ei.by.name,{key:"square",text:e.aspectRatio_square,ariaLabel:e.aspectRatio_squareAriaLabel}],[ei.hO.name,{key:"freeForm",text:e.aspectRatio_freeform,ariaLabel:e.aspectRatio_freeformAriaLabel}]])}(e),i=a.get(n.name);if(i)return i;if((0,se.DM)(n)&&n.localizedStrings){var r=n.localizedStrings;return{key:r.label,text:r.label,ariaLabel:r.ariaLabel}}return function(e,t,n,a){var i=(0,A.Y)(t,a,e.x,e.y);return{key:i,text:i,ariaLabel:(0,A.Y)(n,a,e.x,e.y)}}(n.ratio,e.aspectRatio_ratioLabelFormatString,e.aspectRatio_ratioAriaLabelFormatString,t)}}function ni(e){return e.iconName}function ai(e,n,a){var i=(0,t.useContext)(k.b).logFlipEvent,r=(0,t.useContext)(y.x).strings;return(0,t.useCallback)(function(t){i({axis:n,inputType:(0,j.UR)(t)}),e(),a("X"===n?r.flip_horizontalFinishedAriaLive:r.flip_verticalFinishedAriaLive)},[i,e,n,a,r])}var ii=I(555);(0,D.loadStyles)([{rawString:".rotateAspectFlipBarContainer_6d41357b{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-item-align:center;align-self:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:12px;margin-right:12px;margin-bottom:8px;max-width:700px;width:calc(100% - 24px)}.rotateButtonsContainer_6d41357b{display:-webkit-box;display:-ms-flexbox;display:flex}.aspectRatioButtonContainer_6d41357b{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.aspectRatioButton_6d41357b{background-color:transparent;border:none}.mirrorButtonsContainer_6d41357b{display:-webkit-box;display:-ms-flexbox;display:flex}"}]);var ri=n().memo(function(e){var i=e.styles,r=e.icons,o=e.rotationAngle,s=e.aspectRatio,c=e.shouldFocusOnAspectRatioButton,d=void 0!==c&&c,l=e.rotateCropAndImageBy90,u=e.handleMirrorXClick,f=e.handleMirrorYClick,p=e.setShowAspectRatioOptions,m=e.setAriaAnnouncement,_=(0,t.useContext)(y.x),h=_.localizeNumber,g=_.strings,v=(0,t.useRef)(null),S=(0,t.useState)(null),D=S[0],I=S[1],x=(0,t.useState)(null),C=x[0],O=x[1],w=(0,t.useState)(null),E=w[0],A=w[1],L=(0,b.D)(),M=L.fonts.medium.fontFamily,P=function(e,n,a,i,r){var o=function(e,n,a){var i=(0,t.useContext)(k.b).logRotateEvent,r=(0,t.useContext)(y.x).strings;return[(0,t.useCallback)(function(t){i({angle:(0,ii.KT)(n,90),inputType:(0,j.UR)(t)}),e(ii.J5.Clockwise),a(r.rotate_right90FinishedAriaLive)},[i,e,n,a,r]),(0,t.useCallback)(function(t){i({angle:(0,ii.KT)(n,-90),inputType:(0,j.UR)(t)}),e(ii.J5.CounterClockwise),a(r.rotate_left90FinishedAriaLive)},[i,e,n,a,r])]}(n,e,r);return{handleRotateCropRectAndImageBy90ClockwiseWithTelemetry:o[0],handleRotateCropRectAndImageBy90CounterClockwiseWithTelemetry:o[1],handleMirrorXWithTelemetry:ai(a,"X",r),handleMirrorYWithTelemetry:ai(i,"Y",r)}}(o,l,u,f,m),T=P.handleRotateCropRectAndImageBy90ClockwiseWithTelemetry,U=P.handleRotateCropRectAndImageBy90CounterClockwiseWithTelemetry,F=P.handleMirrorXWithTelemetry,H=P.handleMirrorYWithTelemetry,R=(0,t.useMemo)(function(){return ti(g,h)(s)},[s,g,h]),N=(0,t.useCallback)(function(){p(!0)},[p]);(0,t.useEffect)(function(){var e;d&&(null===(e=v.current)||void 0===e||e.focus())},[d]);var B=(0,t.useMemo)(function(){var e=14;if(E&&D&&C&&M){var t=E.clientWidth-(D.clientWidth+C.clientWidth+18+8);e=function(e,t,n,a){if(t<=0)return 0;for(var i=14,r=Wa(e,i,a);r>t;)r=Wa(e,i-=.5,a);return i}(R.text,t,0,M)}return e},[E,D,C,M,R.text]),V=i&&i.icon,z=i&&i.iconButton,G=i&&i.aspectRatioButton?i.aspectRatioButton(L,B):z,K=i&&i.container;return n().createElement("div",{style:K,ref:A},n().createElement("div",{className:"rotateButtonsContainer_6d41357b",ref:I},n().createElement(a.IconButton,{iconProps:{iconName:r.rotate90CounterClockwise,styles:V},title:g.rotate_left90,ariaLabel:g.rotate_left90AriaLabel,onClick:U,styles:z}),n().createElement(a.IconButton,{iconProps:{iconName:r.rotate90Clockwise,styles:V},title:g.rotate_right90,ariaLabel:g.rotate_right90AriaLabel,onClick:T,styles:z})),n().createElement("div",{className:"aspectRatioButtonContainer_6d41357b"},n().createElement(a.DefaultButton,{styles:G,className:"aspectRatioButton_6d41357b",text:R.text,ariaLabel:R.ariaLabel,iconProps:{iconName:ni(s),styles:V},title:g.aspectRatio_tooltip,onClick:N,"data-test-id":"aspect-ratio-button",componentRef:v})),n().createElement("div",{className:"mirrorButtonsContainer_6d41357b",ref:O},n().createElement(a.IconButton,{iconProps:{iconName:r.flipHorizontally,styles:V},title:g.flip_horizontal,ariaLabel:g.flip_horizontalAriaLabel,onClick:F,styles:z}),n().createElement(a.IconButton,{iconProps:{iconName:r.flipVertically,styles:V},title:g.flip_vertical,ariaLabel:g.flip_verticalAriaLabel,onClick:H,styles:z})))});ri.displayName="Rotate90AspectFlipBar";var oi=I(451),si=(0,X.Rz)([oi.T],function(e){return(0,it.eo)(e)}),ci=(0,X.Rz)([si],function(e){return(0,ii.WN)(e)}),di={rotateCropAndImageBy90:Re.ZF,handleMirrorXClick:Re.My,handleMirrorYClick:Re.v_,setShowAspectRatioOptions:Ce.Uk,setAriaAnnouncement:J.r9},li=(0,g.Ng)(function(e){return{aspectRatio:e.transformTools.cropInteraction.aspectRatio,rotationAngle:si(e)}},di)(ri);(0,D.loadStyles)([{rawString:".RotationBarRoot_0209365f{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-preferred-size:100%;flex-basis:100%;-ms-touch-action:none;touch-action:none;overflow:hidden;cursor:w-resize}.ms-Fabric--isFocusHidden .RotationBarRoot_0209365f{outline:0}.ms-Fabric--isFocusVisible .RotationBarRoot_0209365f:focus{outline:auto}"}]),(0,D.loadStyles)([{rawString:".TicksManager_4c2b5b33{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}"}]);var ui=(0,t.memo)(function(e){var a=e.boundingSize,i=e.angle,r=e.styles,o=e.layout,s=e.children,c=r.root,d=r.tickRoot,l=r.zeroTick,u=o.numTicks,f=(l.width?l.width:d.width)+l.strokeWidth,p=2*u*(d.width+d.distanceBetween)+f,m=Math.min(c.maxWidth,a.width-2*c.sidePadding),_=(0,t.useMemo)(function(){var e=f/2+d.distanceBetween+d.width/2,t=d.distanceBetween+d.width;return Math.abs(i)<1?-e*i:-(e+(Math.abs(i)-1)*t)*Math.sign(i)},[i,d,f]);return n().createElement("div",{className:"TicksManager_4c2b5b33"},n().createElement("svg",{width:p,height:c.height,viewBox:"0 0 ".concat(p," ").concat(c.height)},n().createElement("defs",null,n().createElement("linearGradient",{id:"fadeGradient"},n().createElement("stop",{offset:"0",stopColor:"black"}),n().createElement("stop",{offset:o.fadeDistance,stopColor:"white"}),n().createElement("stop",{offset:1-o.fadeDistance,stopColor:"white"}),n().createElement("stop",{offset:"1",stopColor:"black"})),n().createElement("mask",{id:"fade"},n().createElement("rect",{width:m,height:c.height,x:(p-m)/2,fill:"url(#fadeGradient)"})),n().createElement("mask",{id:"colorize"},n().createElement("rect",{width:m,height:c.height,x:(p-m)/2,fill:d.color}),n().createElement("rect",{width:Math.abs(_),height:c.height,x:p/2+f/2-(i>0?-_+f:0),fill:"white"}))),n().createElement("g",{mask:"url(#fade)",fill:d.activeColor,stroke:d.activeColor},n().createElement("g",{mask:"url(#colorize)"},n().createElement("g",{"data-testid":"ticksParent",transform:"translate(".concat(_,",0)")},s)))))});(0,D.loadStyles)([{rawString:".CenterAnchorContainer_23296e0c{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}"}]);var fi=function(){return fi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fi.apply(this,arguments)},pi=(0,t.memo)(function(e){var t=e.styles,a=t.centerAnchor,i=a.width,r=a.height,o=a.rx,s=a.ry,c=a.color,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(a,["width","height","rx","ry","color"]);return n().createElement("div",{className:"CenterAnchorContainer_23296e0c"},n().createElement("svg",{width:i||t.tickRoot.width,height:t.root.height,viewBox:"0 0 ".concat(i||t.tickRoot.width," ").concat(t.root.height),fill:"none"},n().createElement("rect",fi({key:"centerAnchor"},d,{x:0,y:(t.root.height-r)/2,width:8,height:r,rx:o,ry:s,fill:c}))))}),mi=function(){return mi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mi.apply(this,arguments)},_i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},hi=(0,t.memo)(function(e){var a=e.styles,i=e.layout,r=a.root,o=a.tickRoot,s=a.majorTick,c=a.minorTick,d=a.zeroTick,l=i.numTicks,u=i.majorTickInterval,f=(d.width?d.width:o.width)+d.strokeWidth,p=(0,t.useCallback)(function(e){var t=d.strokeWidth,a=(d.width,d.height),i=d.rx,o=d.ry,s=_i(d,["strokeWidth","width","height","rx","ry"]);return n().createElement("rect",mi({key:"zeroTick"},s,{x:e+t/2,y:(r.height-a)/2,width:f-t,height:a,rx:i,ry:o,fill:"transparent",strokeWidth:t}))},[r,d,f]),m=(0,t.useCallback)(function(e,t){var a=s.height,i=s.rx,c=s.ry,d=_i(s,["height","rx","ry"]),l=o.width;return n().createElement("rect",mi({key:t,strokeWidth:0},d,{x:e,y:(r.height-a)/2,width:l,height:a,rx:i,ry:c}))},[s,r,o]),_=(0,t.useCallback)(function(e,t){var a=_i(c,[]),i=o.width;return n().createElement("circle",mi({key:t,strokeWidth:0},a,{r:i/2,cx:e+2,cy:r.height/2}))},[c,r,o]);return n().createElement(n().Fragment,null,Array(2*l+1).fill(0).map(function(e,t){var n=t*(o.distanceBetween+o.width);return t>l&&(n+=f-o.width),t===l?p(n):(l-t)%u==0?m(n,t):_(n,t)}))}),bi=I(4139);function gi(e){var n=(0,t.useContext)(y.x).localizeNumber;return(0,t.useMemo)(function(){return n((0,bi.L)((0,ii.WN)(e),1))},[e,n])}var vi=function(){return vi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vi.apply(this,arguments)},yi=function(){return yi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yi.apply(this,arguments)},Si=n().memo(function(e){var a=e.boundingSize,i=e.angle,r=e.styles,o=e.layout,s=e.cssToPhysicalPixelRatio,c=e.shouldShowTooltip,d=e.handleRotationBarPointerDown,l=e.handleRotationBarPointerMove,u=e.handleRotationBarPointerUp,f=e.handleRotationAdjustmentOnKeyDown,p=e.handleRotationAdjustmentOnKeyUp,m=e.handleCleanupRotationBarPointer,_=e.setIsKeyboardFocused,h=(0,t.useState)(null),b=h[0],g=h[1],v=(0,t.useContext)(y.x).strings,S=r.root,D=S.sidePadding,I=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(S,["sidePadding"]),x=gi(i);function C(e){switch(e){case"Slow":return P.s9;case"Fast":return P.Jy;case"SuperFast":return P.yL;default:return 0}}var O=(0,t.useCallback)(function(e,t){var n=(0,P.SG)(e.key);f({direction:n,sliderShiftingValue:C(t),inputType:"Keyboard"})},[f]),w=(0,t.useMemo)(function(){return{numRepeatsToSwitchToFast:P.QD,keyboardEventTarget:b,handleKeyboardDown:O,isFastDirectionKey:P.$,handleKeyboardUp:p}},[p,O,b]);!function(e,n,a){var i=(0,t.useState)("allInteractions"),r=i[0],o=i[1],s=(0,t.useCallback)(function(t){var n;o("onlyPointerInteractions"),null===(n=e.onPointerDown)||void 0===n||n.call(e,t)},[e]),c=(0,t.useCallback)(function(t){var n;o("allInteractions"),null===(n=e.onPointerUp)||void 0===n||n.call(e,t)},[e]),d=(0,t.useCallback)(function(){var t;o("allInteractions"),null===(t=e.onUnmount)||void 0===t||t.call(e)},[e]);(0,Qe.R)(vi(vi({},e),{onPointerDown:s,onPointerUp:c,onUnmount:d,isPointerInteractionEnabled:"onlyKeyboardInteractions"!==r}));var l=(0,t.useCallback)(function(e,t){e.ctrlKey||"onlyPointerInteractions"!==r&&a(e)&&(e.preventDefault(),e.stopPropagation(),o("onlyKeyboardInteractions"),n.handleKeyboardDown(e,t))},[r,a,n]),u=(0,t.useCallback)(function(e){var t;"onlyPointerInteractions"!==r&&a(e)&&(e.preventDefault(),e.stopPropagation(),o("allInteractions"),null===(t=n.handleKeyboardUp)||void 0===t||t.call(n,e))},[r,a,n]);(0,We.V)(vi(vi({},n),{handleKeyboardDown:l,handleKeyboardUp:u}))}((0,t.useMemo)(function(){return{htmlElement:b,cssToPhysicalPixelRatio:s,onPointerDown:d,onPointerMove:l,onPointerUp:u,onUnmount:m}},[s,m,d,l,u,b]),w,P.nE);var E=(0,t.useCallback)(function(){_((0,P.tb)())},[_]),A=(0,t.useCallback)(function(){_(!1)},[_]);return n().createElement("div",{className:"RotationBarRoot_0209365f",style:yi(yi({},I),{padding:"0px ".concat(D,"px")}),ref:g,"aria-label":v.rotate_sliderAriaLabel,title:c?v.rotate_sliderTooltip:void 0,tabIndex:0,role:"slider","aria-valuenow":parseInt(x),"aria-valuemin":-45,"aria-valuemax":45,"aria-valuetext":"".concat(x).concat(v.rotate_degree),onFocus:E,onBlur:A},n().createElement(ui,{boundingSize:a,angle:i,styles:r,layout:o},n().createElement(hi,{styles:r,layout:o})),n().createElement(pi,{styles:r}))}),Di=(0,X.Rz)([de.fX,de.Hp],function(e,t){return{width:e.x/t,height:e.y/t}}),Ii={handleRotationBarPointerUp:Re.Lw,handleRotationBarPointerMove:Re.Jc,handleRotationBarPointerDown:Re.pq,handleRotationAdjustmentOnKeyDown:Re.Qi,handleRotationAdjustmentOnKeyUp:Re.vS,handleCleanupRotationBarPointer:Re.dh,setIsKeyboardFocused:Re.Jt},xi=(0,g.Ng)(function(e,t){var n=e.transformTools.device.pixelRatio;return{boundingSize:(null==t?void 0:t.boundingSize)||Di(e),angle:ci(e),cssToPhysicalPixelRatio:n,shouldShowTooltip:!e.transformTools.rotationUi.rotationBarPointer.incrementingIdOfPointerThatIsDown}},Ii)(Si),Ci={numTicks:45,majorTickInterval:5,fadeDistance:.1};function Oi(e){return{tickRoot:{width:4,distanceBetween:8,color:e.palette.neutralSecondary,activeColor:e.palette.black},minorTick:{},majorTick:{height:12,rx:2,ry:2},zeroTick:{width:6,height:10,rx:4,ry:4,strokeWidth:2},centerAnchor:{width:8,height:24,rx:4,ry:4,color:e.palette.black},root:{maxWidth:700,sidePadding:10,height:32}}}(0,D.loadStyles)([{rawString:".RotationAngleDisplayContainer_1f1958fb{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;pointer-events:none}.RotationAngleDisplay_1f1958fb{padding:0 5px;text-align:center;font-size:16px}.RotationAngleDegree_1f1958fb{width:0}"}]);var wi=n().memo(function(e){var a=e.rotationAngle,i=e.styles,r=void 0===i?{}:i,o=(0,t.useContext)(y.x).strings,s=gi(a);return n().createElement("div",{className:"RotationAngleDisplayContainer_1f1958fb",style:r.container,"aria-label":"".concat(s).concat(o.rotate_degree)},n().createElement("span",{className:"RotationAngleDisplay_1f1958fb",style:r.angleDisplay},s),n().createElement("span",{className:"RotationAngleDegree_1f1958fb",style:r.angleDegree},o.rotate_degree))});wi.displayName="RotationAngleDisplay";var Ei=(0,g.Ng)(function(e){return{rotationAngle:si(e)}})(wi),Ai=(0,t.memo)(function(e){var t=e.styles,a=e.componentStyles,i=e.rotate90AspectFlipBarIcons,r=e.shouldFocusOnAspectRatioButton,o=(0,b.D)();return n().createElement(Ga,{styles:{container:null==t?void 0:t.transformToolsContainer}},n().createElement(Ei,{styles:a&&a.rotationAngleDisplay}),n().createElement("div",{style:a&&a.rotationBarRoot},n().createElement(xi,{styles:Oi(o),layout:Ci})),n().createElement(li,{styles:a&&a.rotate90AspectFlipBar,icons:i,shouldFocusOnAspectRatioButton:r}))});Ai.displayName="TransformToolsActionStack",(0,D.loadStyles)([{rawString:".scrollBoxWrapper_01be0245{overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.scrollBoxWrapper_01be0245::-webkit-scrollbar{display:none}.scrollBox_01be0245{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap}"}]);var Li=function(){return Li=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Li.apply(this,arguments)},ki=(0,t.forwardRef)(function(e,a){var i=e.direction,r=e.initialScrollLeft,o=void 0===r?0:r,s=e.initialScrollTop,c=void 0===s?0:s,d=e.children,l=e.scrollBoxRef,u=e.scrollBoxStyles,f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["direction","initialScrollLeft","initialScrollTop","children","scrollBoxRef","scrollBoxStyles"]),p=(0,t.useState)(null),m=p[0],_=p[1],h=(0,t.useState)(!1),b=h[0],g=h[1],v=(0,t.useRef)(),y=(0,t.useRef)(),S=(0,t.useRef)(),D=(0,t.useRef)(),I=(0,t.useMemo)(function(){return Li(Li({},"vertical"===i?{overflowX:"hidden"}:void 0),"horizontal"===i?{overflowY:"hidden"}:void 0)},[i]),x=(0,t.useMemo)(function(){return function(e){var t=e.direction;return"vertical"===t?{flexDirection:"column"}:"horizontal"===t?{flexDirection:"row"}:{flexWrap:"wrap"}}({direction:i})},[i]);(0,t.useEffect)(function(){(0,Ve.n)(a,m)},[a,m]),(0,t.useLayoutEffect)(function(){m&&(m.scrollTop=null!=c?c:0,m.scrollLeft=null!=o?o:0)},[o,c,m]),(0,t.useEffect)(function(){if(m){var e=function(e){g(!0),v.current=e.screenX,y.current=m.scrollLeft,S.current=e.screenY,D.current=m.scrollTop},t=function(e){if(e.preventDefault(),e.stopPropagation(),void 0!==v.current&&void 0!==y.current){var t=v.current-e.screenX;m.scrollLeft=y.current+t}if(void 0!==S.current&&void 0!==D.current){var n=S.current-e.screenY;m.scrollTop=D.current+n}},n=function(){b&&void 0!==v.current&&(v.current=void 0,y.current=void 0),b&&void 0!==S&&(S.current=void 0,D.current=void 0),g(!1)};if(!m.ontouchstart)return m.addEventListener("mousedown",e),m.addEventListener("mousemove",t),m.addEventListener("mouseup",n),m.addEventListener("mouseleave",n),function(){m.removeEventListener("mousedown",e),m.removeEventListener("mousemove",t),m.removeEventListener("mouseup",n),m.removeEventListener("mouseleave",n)}}},[v,b,y,S,D,m]);var C=Array.isArray(d)?d:[null!=d?d:null];return n().createElement("div",Li({className:"scrollBoxWrapper_01be0245",style:I,ref:_},f),n().createElement("div",{className:"scrollBox_01be0245",style:Li(Li({pointerEvents:b?"none":void 0},x),u),ref:l},C.map(function(e,t){return n().createElement("div",{key:"scroll-box-item-".concat(t)},e)})))});ki.displayName="ScrollContainer";var Mi=function(){return Mi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mi.apply(this,arguments)},Pi=function(e){var a=e.children,i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["children"]),r=(0,t.useState)(null),o=r[0],s=r[1],c=(0,t.useState)(),d=c[0],l=c[1],u=(0,t.useRef)(!0),f=(0,t.useMemo)(function(){return n().Children.toArray(a).map(function(){return(0,t.createRef)()})},[a]);return(0,t.useLayoutEffect)(function(){if(0!==f.length){var e=f[0].current,t=f.slice(-1)[0].current,n=function(e){if(e&&o){var t=e.getBoundingClientRect().width;return(o.clientWidth-t)/2}};l({left:n(e),right:n(t)})}},[f,o]),(0,t.useLayoutEffect)(function(){var e,t;if(0!==f.length&&d&&void 0!==d.left&&void 0!==d.right){var i=n().Children.toArray(a).findIndex(function(e){return n().isValidElement(e)&&e.props.isActive});null===(t=null===(e=f[i])||void 0===e?void 0:e.current)||void 0===t||t.scrollIntoView({inline:"center",behavior:u.current?"auto":"smooth"}),u.current=!1}},[a,f,d]),n().createElement("div",{ref:s,style:{overflow:"hidden"}},n().createElement(ki,Mi({},i,{scrollBoxStyles:{paddingLeft:null==d?void 0:d.left,paddingRight:null==d?void 0:d.right}}),n().Children.toArray(a).map(function(e,t){return n().createElement("div",{ref:f[t],key:t},e)})))};(0,D.loadStyles)([{rawString:".scrollBoxContainer_ab2d42b8{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}"}]);var Ti=function(){return Ti=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ti.apply(this,arguments)},Ui={margin:"0px ".concat(32,"px")};function Fi(e,t){return{root:Ti({position:"absolute",zIndex:3,height:"100%",width:32,i:{color:e.palette.neutralPrimary}},"start"===t?{left:"-".concat(32,"px")}:{right:"-".concat(32,"px")}),rootHovered:{backgroundColor:"transparent",i:{color:e.palette.neutralPrimaryAlt}},rootPressed:{backgroundColor:"transparent",i:{color:e.palette.neutralSecondary}}}}var Hi,Ri=I(1767),Ni=function(){return Ni=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ni.apply(this,arguments)},Bi=function(e){var i=(0,b.D)(),r=(0,t.useRef)(null),o=(0,t.useState)(null),s=o[0],c=o[1],d=(0,t.useState)(null),l=d[0],u=d[1],f=function(e,n,a){var i=(0,t.useState)(!1),r=i[0],o=i[1],s=(0,t.useState)(!1),c=s[0],d=s[1],l=(0,t.useCallback)(function(){if(e&&n){var t=e.getBoundingClientRect(),a=n.getBoundingClientRect();return{x:t.left-a.left,y:t.top-a.top,width:t.width,height:t.height}}},[e,n]),u=(0,t.useCallback)(function(){var e=l();e&&n&&o(e.x<0&&e.width!==n.clientWidth)},[n,l]),f=(0,t.useCallback)(function(){var e=l();e&&n&&d(e.x+e.width>n.clientWidth&&e.width!==n.clientWidth)},[n,l]),p=(0,t.useCallback)(function(){u(),f()},[u,f]);(0,t.useEffect)(function(){p()},[e,n,p]);var m=(0,t.useCallback)(function(e){var t=l();n&&t&&a&&(a.scrollTo?a.scrollTo({left:e*n.clientWidth-t.x}):a.scrollLeft=e*n.clientWidth-t.x,p())},[n,a,p,l]);return(0,Ri.w)(n,p),{showPanLeft:r,showPanRight:c,onPanLeftClick:(0,t.useCallback)(function(){return m(-1)},[m]),onPanRightClick:(0,t.useCallback)(function(){return m(1)},[m]),onScroll:(0,t.useCallback)(function(){return p()},[p])}}(l,s,r.current),p=f.showPanLeft,m=f.showPanRight,_=f.onPanLeftClick,h=f.onPanRightClick,g=f.onScroll;return n().createElement("div",{className:"scrollBoxContainer_ab2d42b8",style:Ui,ref:c},p&&n().createElement(a.IconButton,{iconProps:{iconName:"ChevronLeft"},styles:Fi(i,"start"),onClick:_,tabIndex:-1}),n().createElement(ki,Ni({},e,{direction:"horizontal",scrollBoxRef:u,onScroll:g,ref:r})),m&&n().createElement(a.IconButton,{iconProps:{iconName:"ChevronRight"},styles:Fi(i,"end"),onClick:h,tabIndex:-1}))},ji=I(9345),Vi=function(){return Vi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vi.apply(this,arguments)};!function(e){e[e.Default=0]="Default",e[e.AutoCenterSelected=1]="AutoCenterSelected",e[e.ChevronPanning=2]="ChevronPanning"}(Hi||(Hi={}));var zi=function(){return zi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},zi.apply(this,arguments)},Gi=(0,t.memo)(function(e){var a=e.activeAspectRatio,i=e.aspectRatiosList,r=e.setAspectRatio,o=e.setAriaAnnouncement,s=e.scrollContainerType,c=e.aspectRatioTilesStyles,d=e.tileClassNames,l=e.aspectRatioTileTabIndex,u=(0,t.useContext)(y.x),f=u.localizeNumber,p=u.strings,m=(0,t.useRef)(new Array(i.length)),_=(0,ji.K)(i,a),h=_.keyboardFocusedIndex,b=_.setKeyboardFocusedIndex,g=_.onKeyDown,v=function(e,n,a){var i=(0,t.useContext)(k.b).logAspectRatioEvent,r=(0,t.useContext)(y.x).strings;return(0,t.useCallback)(function(t,o){i({aspectRatio:t,inputType:(0,j.UR)(o)}),e(t),n((0,A.J)(r.aspectRatio_changedAriaLive,a(t).ariaLabel))},[i,e,n,r,a])}(r,o,ti(p,f)),S=(0,t.useCallback)(function(e,t,n){v(e,t),b(n)},[b,v]),D=void 0!==l?l:function(e){return function(t){return e===t?0:-1}}(i[h]),I=function(e,t,a,i,r,o,s,c,d,l,u,f,p,m){return e.map(function(e,s){var l=a(e),u=l.key,p=l.text,m=l.ariaLabel,_=!!o&&o(e);return n().createElement($a,Vi({key:u,name:p,iconName:i(e),tileStyles:"function"==typeof t?t(e):t,isHighlighted:!1,onClick:function(t,n){return r(e,n,s)},ariaSelected:_,ref:function(e){d&&d.current&&(d.current[s]=e)},tabIndex:"function"==typeof c?c(e):c,namePosition:undefined,tileClassNames:f&&(_?f.activeClassNames:f.inactiveClassNames),ariaLabel:m,title:m},{role:"option",isActive:_}))})}(i,c,ti(p,f),ni,S,function(e){return function(t){return e===t}}(a),0,D,m,0,0,d);(0,t.useEffect)(function(){window.requestAnimationFrame(function(){var e=m.current[h];e&&e.focus()})},[h,m]);var x={role:"listbox",title:p.aspectRatio_listTitle};switch(s){case Hi.AutoCenterSelected:return n().createElement(Pi,zi({},x,{direction:"horizontal"}),I);case Hi.ChevronPanning:return n().createElement(Bi,zi({},x,{style:{outline:"none"},onKeyDown:g}),I);case Hi.Default:default:return n().createElement(ki,zi({},x,{direction:"horizontal"}),I)}});Gi.displayName="AspectRatioActionsBar";var Ki=function(){return Ki=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ki.apply(this,arguments)},Wi={container:{position:"relative",bottom:"8px"}},qi=(Ki(Ki({},Wi.container),{height:"16px",bottom:"5px"}),{container:{marginBottom:"8px",alignItems:"center"}}),Qi={display:"flex",flexGrow:1,alignSelf:"center",justifyContent:"center",margin:"0px 12px 8px 12px",maxWidth:"700px",width:"calc(100% - 24px)"},Yi=function(){return Yi=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yi.apply(this,arguments)},Ji=(0,t.memo)(function(e){var i=e.visible,r=e.showAspectRatioOptions,o=e.activeAspectRatio,s=e.aspectRatiosList,c=e.tileClassNames,d=e.desktopTransformToolsActionStackStyles,l=e.setAspectRatio,u=e.setAriaAnnouncement,f=(0,b.D)(),p=function(e){return{root:{backgroundColor:"transparent",color:e.palette.neutralPrimary,fill:e.palette.neutralPrimary,width:"fit-content",justifyContent:"center",display:"flex",alignSelf:"center",margin:"0px 4px",span:{fontWeight:400},i:{color:e.palette.neutralPrimary,fill:e.palette.neutralPrimary}},rootHovered:{backgroundColor:e.palette.neutralLight},rootPressed:{backgroundColor:e.palette.neutralQuaternaryAlt},rootDisabled:{backgroundColor:"transparent",color:e.palette.neutralTertiary,i:{color:e.palette.neutralTertiary,fill:e.palette.neutralTertiary}}}}(f),m=(0,t.useState)(!1),_=m[0],h=m[1],g=null==d?void 0:d.getAspectRatioTilesStyles,v=g?g(f):void 0;return(0,t.useEffect)(function(){(0,P.tb)()&&document.activeElement&&r&&h(!0)},[r]),i?n().createElement(Ga,{styles:qi},!r&&n().createElement(Ai,{componentStyles:{rotationAngleDisplay:Wi,rotationBarRoot:{display:"flex",justifyContent:"center",marginBottom:"16px"},rotate90AspectFlipBar:{iconButton:p,icon:Vn,container:Qi}},rotate90AspectFlipBarIcons:{rotate90CounterClockwise:"Rotate90CounterClockwise",rotate90Clockwise:"Rotate90Clockwise",flipHorizontally:"Switch",flipVertically:"Sort"},shouldFocusOnAspectRatioButton:_,styles:d}),r&&n().createElement("div",{style:{width:"fit-content",maxWidth:"100%",display:"flex",flexDirection:"column"}},n().createElement(Gi,Yi({scrollContainerType:Hi.ChevronPanning,aspectRatioTilesStyles:Yi(Yi({},(0,Ja.hP)(f)),v)},{activeAspectRatio:o,setAspectRatio:l,setAriaAnnouncement:u,tileClassNames:c,aspectRatiosList:s})),n().createElement(za,{styles:(0,a.concatStyleSets)(p,null==d?void 0:d.buttonStyles)}))):null}),Xi=I(3044),Zi=I(360),$i=(0,X.Rz)([de.fX,de.Hp,de.aR],function(e,t,n){return(0,Zi.mR)(e,t,n)}),er=(0,X.Rz)([$i,de.jO,de.un,de.H1,de.gO],function(e,t,n,a,i){return a&&(i===ya.m.fitCropRectInView||!(0,Xi.hY)(e,t,n))}),tr={setAspectRatio:Re.fd,setAriaAnnouncement:J.r9},nr=(0,g.Ng)(function(e){var t=e.transformTools.cropInteraction,n=t.aspectRatio,a=t.aspectRatiosList,i=e.uiState.showAspectRatioOptions;return{visible:er(e),showAspectRatioOptions:i,activeAspectRatio:n,aspectRatiosList:a}},tr)(Ji);function ar(e,t,n){t.forEach(function(t){t.ctrlKey!==e.ctrlKey||t.shiftKey!==e.shiftKey||t.code!==e.code&&t.keyCode!==e.keyCode||t.handler(n,e)})}var ir=function(e,n,a){(0,t.useEffect)(function(){if(e){var t=function(e){e instanceof KeyboardEvent&&ar(e,n,!0)},i=function(e){e instanceof KeyboardEvent&&ar(e,n,!1)};return e.addEventListener("keydown",t,a),e.addEventListener("keyup",i,a),function(){e.removeEventListener("keydown",t,a),e.removeEventListener("keyup",i,a)}}},[e,n,a])},rr=I(3989),or=I(8042),sr=function(){return sr=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},sr.apply(this,arguments)},cr=n().memo(function(e){var a=e.hasNonCropEdits,i=e.onPointerMove,r=e.setIsViewingOriginal,o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["hasNonCropEdits","onPointerMove","setIsViewingOriginal"]),s=(0,t.useContext)(y.x).strings,c=(0,t.useState)(null),d=c[0],l=c[1],u=(0,t.useCallback)(function(e){(e.isPrimaryButtonDownOrTouchDown||e.isMiddleButtonDown||e.isRightButtonDown)&&(null==i||i(e))},[i]),f=(0,t.useMemo)(function(){return[{code:"Space",keyCode:or.XG,handler:r,ctrlKey:!1,shiftKey:!1}]},[r]);ir(d,f);var p=a?s.nonCrop_imageAriaLabelWithEdits:s.nonCrop_imageAriaLabelWithoutEdits;return n().createElement(rr.r,sr({ref:l,title:a?s.nonCrop_imageTooltip:void 0,"aria-label":p,onPointerMove:u},o))}),dr=I(7471),lr=function(){return lr=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lr.apply(this,arguments)},ur={onPointerMove:Ne.Kd,onPointerDown:Ne.fy,onPointerUp:Ne.UI,onWheel:Re.vc,onTouchDown:Re.Lm,onTouchMove:Re.qb,onTouchUp:Re.fz,onDoubleTap:Re.eY,onUnmount:Re.j6,setIsViewingOriginal:Ce.aQ,panView:Re.rh,setAriaAnnouncementScenario:J.Ac},fr=(0,g.Ng)(function(e){return{cssToPhysicalPixelRatio:e.transformTools.device.pixelRatio,cursor:(0,nt.g)(e),hasNonCropEdits:kn(lr(lr({},wt.GZ),e)),panViewTopLeftCornerFromCropOrigin:(0,dr.M)(e)}},ur)(cr);(0,D.loadStyles)([{rawString:".layout_desktop_435e4110{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content_container_435e4110{display:grid;width:100%;height:calc(100% - 44px);grid-template-columns:1fr auto auto;grid-template-rows:1fr}.canvas_container_435e4110{position:relative}"}]);var pr=n().memo(function(e){var n=e.cssPixelMarginByActivity,a=e.activeEditorActivity,i=e.setViewFittingMarginCssPixels;return(0,t.useLayoutEffect)(function(){i({marginCssPixels:n[a]||(0,Zi.eW)(0),shouldAnimate:!0})},[i,a,n]),null}),mr={setViewFittingMarginCssPixels:Re.K_},_r=(0,g.Ng)(function(e){return{activeEditorActivity:e.uiState.activeEditorActivity}},mr)(pr),hr=function(e){return e.toFixed(0)};function br(e){var n=(0,t.useContext)(y.x).strings;return function(t,a,i){e("Original"!==t?(0,A.J)(n.filter_changedAriaLiveWithIntensity,a,i):(0,A.J)(n.filter_changedAriaLive,a))}}var gr=function(){return gr=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gr.apply(this,arguments)};function vr(e){return Math.round((0,H.Ec)(0,100,e))}var yr=(0,t.memo)(function(e){var i,r=e.filterLevel,o=e.title,s=e.setFilterLevel,c=e.layout,d=e.headerName,l=e.ariaLabel,u=e.style,f=e.hideSliderValueAfterInactivity,p=e.filterName,m=e.filterAriaLabelLocString,_=e.setAriaAnnouncement,h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["filterLevel","title","setFilterLevel","layout","headerName","ariaLabel","style","hideSliderValueAfterInactivity","filterName","filterAriaLabelLocString","setAriaAnnouncement"]),g=(0,b.D)(),v=100,S=hr,D=(0,t.useContext)(y.x).localizeNumber,I=(0,t.useState)(!1),x=I[0],C=I[1],E=br(_),A=(0,t.useCallback)(function(e){var t=(0,H.W4)(0,v,e);C(!0),s({level:t,isUndoRedoable:!1})},[0,v,s]),L=(0,t.useMemo)(function(){return vr(r)},[r]),k=(0,t.useMemo)(function(){var e;return(0,a.concatStyleSets)((0,w.$)(g),null===(e=null==u?void 0:u.getSliderStyles)||void 0===e?void 0:e.call(u,g))},[u,g]),P={value:L,valueFormatter:S,maxValue:v,minValue:0,label:d,shouldShow:x||!f};return n().createElement("div",{className:null==u?void 0:u.containerClassName,style:null==u?void 0:u.container},n().createElement(M.f,{headerProps:P,layout:c,styles:null===(i=null==u?void 0:u.getSliderHeaderStyles)||void 0===i?void 0:i.call(u,g)}),n().createElement("div",{style:null==u?void 0:u.sliderWrapper},n().createElement(O.A,gr({},h,{min:0,max:v,step:1,value:L,styles:k,showValue:!1,originFromZero:!0,onChange:A,"aria-label":l,ariaValueText:D,onChanged:function(e,t){C(!1);var n=(0,H.W4)(0,v,t);s({level:n,isUndoRedoable:!0}),E(p,m,t.toString())},buttonProps:{title:o}}))))}),Sr=I(1109);function Dr(e,t,n,a){return e===t?"Original"===t.name?n.filter_activeOriginalFilterAriaLabel:(0,A.J)(n.filter_activeTileAriaLabel,n[e.ariaLabelLocStringKey],vr(a[e.name]).toString()):"Original"===t.name?(0,A.J)(n.filter_tileAriaLabelWhenOriginalFilterIsSelected,n[e.ariaLabelLocStringKey]):(0,A.J)(n.filter_tileAriaLabel,n[e.ariaLabelLocStringKey],n[t.ariaLabelLocStringKey],vr(a[t.name]).toString())}var Ir=function(){return Ir=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ir.apply(this,arguments)},xr=I(9885);function Cr(e,t){var n,a,i,r=!1,o=(n=this,void 0,i=function(){var n,a,i,o,s,c;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(d){switch(d.label){case 0:n=[],a=0,i=e,d.label=1;case 1:return a<i.length?(o=i[a],r?[3,3]:(c=(s=n).push,[4,t(o)])):[3,5];case 2:return c.apply(s,[d.sent()]),[3,4];case 3:return[3,5];case 4:return a++,[3,1];case 5:return[2,n]}})},new((a=void 0)||(a=Promise))(function(e,t){function r(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(r,o)}s((i=i.apply(n,[])).next())}));return{promise:o,cancel:function(){r=!0}}}var Or=I(6865),wr="level@",Er="lookup2D@",Ar="uBlueSlicesIn2DLayout@",Lr="uTexSize@",kr="LutShader",Mr=function(){function e(){this._level=0,this._configuration={numRedSamplesPerSlice:0,numGreenSamplesPerSlice:0,numBlueSlicesPerRowIn2DLayout:0,numBlueSlicesPerColumnIn2DLayout:0}}return e.prototype.setLevel=function(e){this._level=e},e.prototype.getLevel=function(){return this._level},e.prototype.setTexture=function(e){this._texture=e},e.prototype.getTexture=function(){return this._texture},e.prototype.setConfiguration=function(e){this._configuration=e},e.prototype.getConfiguration=function(){return this._configuration},e.prototype.getBlueSlicesIn2DLayout=function(){return{x:this._configuration.numBlueSlicesPerRowIn2DLayout,y:this._configuration.numBlueSlicesPerColumnIn2DLayout}},e.prototype.calculateTextureSize=function(){return(0,ot.AI)(this.getBlueSlicesIn2DLayout(),{x:this._configuration.numRedSamplesPerSlice,y:this._configuration.numGreenSamplesPerSlice})},e.prototype.getUniformNames=function(e){return[e(wr),e(Ar),e(Lr)]},e.prototype.getSamplerNames=function(e){return[e(Er)]},e.prototype.getName=function(){return kr},e.prototype.getFunctions=function(e){return["\nvec4 getColorInLookupTable(in vec4 color, in sampler2D lookupTable, in vec2 blueSlicesIn2DLayout, in vec2 texSize) {\n    color = clamp(color, 0., 1.);\n\n    mediump float unboundBlueSlice = color.b * (blueSlicesIn2DLayout.x * blueSlicesIn2DLayout.y - 1.);\n\n    // Find the nearest lower bound quad location\n    mediump vec2 lowerBoundBlueSlice;\n    lowerBoundBlueSlice.y = floor(floor(unboundBlueSlice) / blueSlicesIn2DLayout.x);\n    lowerBoundBlueSlice.x = floor(unboundBlueSlice) - (lowerBoundBlueSlice.y * blueSlicesIn2DLayout.x);\n\n    // Find the nearest upper bound quad location\n    mediump vec2 upperBoundBlueSlice;\n    upperBoundBlueSlice.y = floor(ceil(unboundBlueSlice) / blueSlicesIn2DLayout.x);\n    upperBoundBlueSlice.x = ceil(unboundBlueSlice) - (upperBoundBlueSlice.y * blueSlicesIn2DLayout.x);\n\n    // Within the slices, find the position of the rg values in UV space\n    highp vec2 texPos1 = (lowerBoundBlueSlice / blueSlicesIn2DLayout) + vec2(0.5, 0.5) / texSize + (((vec2(1., 1.) / blueSlicesIn2DLayout) - vec2(1., 1.) / texSize) * color.rg);\n    highp vec2 texPos2 = (upperBoundBlueSlice / blueSlicesIn2DLayout) + vec2(0.5, 0.5) / texSize + (((vec2(1., 1.) / blueSlicesIn2DLayout) - vec2(1., 1.) / texSize) * color.rg);\n\n    // Get the two colors that we will interpolate in the LUT texture\n    lowp vec4 newColor1 = texture2D(lookupTable, texPos1);\n    lowp vec4 newColor2 = texture2D(lookupTable, texPos2);\n\n    // Interpolate between the two depending on our blue channel\n    lowp vec4 newColor = mix(newColor1, newColor2, fract(unboundBlueSlice));\n    return newColor;\n}"]},e.prototype.getHeaderCode=function(e){return e("\n//look up table effect---\n        uniform float ".concat(wr,";\n        uniform sampler2D ").concat(Er,";\n        uniform vec2 ").concat(Ar,";\n        uniform vec2 ").concat(Lr,";\n        "))},e.prototype.getShaderFunctionBody=function(e){return e("\n//look up table effect---\n        vec4 tempColor@ = getColorInLookupTable(gl_FragColor, ".concat(Er,", ").concat(Ar,", ").concat(Lr,");\n        gl_FragColor.rgb = mix(gl_FragColor.rgb,tempColor@.rgb, ").concat(wr,");\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(wr),this._level),this._texture&&e.setTexture(t(Er),this._texture),e.setVector2(t(Ar),this.getBlueSlicesIn2DLayout()),e.setVector2(t(Lr),this.calculateTextureSize())},e}();function Pr(e){return e.getEffects().find(function(e){return e.getName()===kr})}var Tr=I(7512),Ur=I(4996),Fr="CheckerboardShader",Hr=function(){function e(){this._devicePixelRatio=1,this._checkerboardSize=8,this._lightCheckerColor=1,this._darkCheckerColor=.95,this._shouldShowCheckerboardOverride=!1}return e.prototype.setDevicePixelRatio=function(e){this._devicePixelRatio=e},e.prototype.setCheckerboardSize=function(e){e&&(this._checkerboardSize=e)},e.prototype.setLightCheckerColor=function(e){e&&(this._lightCheckerColor=e)},e.prototype.setDarkCheckerColor=function(e){e&&(this._darkCheckerColor=e)},e.prototype.setShouldShowCheckerboardOverride=function(e){this._shouldShowCheckerboardOverride=e},e.prototype.getShouldShowCheckerboardOverride=function(){return this._shouldShowCheckerboardOverride},e.prototype.getName=function(){return Fr},e.prototype.getUniformNames=function(e){return[e("uCheckerboardSize@"),e("uLightCheckerColor@"),e("uDarkCheckerColor@"),e("uShowCheckerboardOverride@")]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n        //Checkerboard effect---\n        uniform float uCheckerboardSize@;\n        uniform float uLightCheckerColor@;\n        uniform float uDarkCheckerColor@;\n        uniform float uShowCheckerboardOverride@;\n        ")},e.prototype.getShaderFunctionBody=function(e){return e("\n            //Checkerboard effect---\n            float total = step(uCheckerboardSize@, mod(".concat(Ur.k.screenPixelPos,".x, uCheckerboardSize@ * 2.0)) + step(uCheckerboardSize@, mod(").concat(Ur.k.screenPixelPos,".y, uCheckerboardSize@ * 2.0));\n            float baseCheckerboardColor = mix(uDarkCheckerColor@,uLightCheckerColor@,sign(mod(total, 2.0 )));\n            vec4 checkerBlendedColor = vec4(0., 0., 0., 1.);\n            checkerBlendedColor.rgb = mix(vec3(baseCheckerboardColor), gl_FragColor.rgb, gl_FragColor.a);\n\n            // Checkerboard is hidden when there's a colorOverride. For example, the default transparent placeholder image should be shown without a checkerboard effect.\n            vec4 checkerboardColor = mix(checkerBlendedColor,").concat(Ur.k.colorOverride,",").concat(Ur.k.colorOverrideLevel,");\n            gl_FragColor = mix(checkerboardColor, gl_FragColor, mix(").concat(Ur.k.isRenderingForExport,", 0.0, uShowCheckerboardOverride@));\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t("uCheckerboardSize@"),this._checkerboardSize*this._devicePixelRatio),e.setFloat(t("uLightCheckerColor@"),this._lightCheckerColor),e.setFloat(t("uDarkCheckerColor@"),this._darkCheckerColor),e.setFloat(t("uShowCheckerboardOverride@"),this._shouldShowCheckerboardOverride?1:0)},e}(),Rr=I(2397);function Nr(){var e=function(){},t=new Promise(function(t){return e=t});return window.requestAnimationFrame(e),t}var Br=function(){return Br=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Br.apply(this,arguments)},jr=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},Vr=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},zr=I(5161),Gr=function(){return Gr=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gr.apply(this,arguments)},Kr=(0,t.memo)(function(e){var i=e.availableFilters,r=e.activeFilter,o=e.filterLevelsByName,s=e.setActiveFilterAndLevel,c=e.setAriaAnnouncement,d=e.size,l=e.styles,u=e.header,f=e.footer,p=e.imageTransformValues,m=e.cropTransformValues,_=e.cssToPhysicalPixelRatio,h=e.children,b=e.colorAdjustments,g=(0,t.useState)(i.length),v=g[0],S=g[1],D=(0,t.useMemo)(function(){return i.map(function(){return(0,t.createRef)()})},[i]),I=(0,t.useRef)(new Array(i.length)),x=br(c),C=(0,ji.K)(i,r,v),O=C.keyboardFocusedIndex,w=C.setKeyboardFocusedIndex,E=C.onKeyDown,L=(0,t.useContext)(y.x).strings,k=L,M=(0,t.useCallback)(function(e){s({activeFilter:r,filterLevel:e.level,isUndoRedoable:e.isUndoRedoable})},[r,s]),P=(0,t.useCallback)(function(e,t){s({activeFilter:e,filterLevel:o[e.name],isUndoRedoable:!0}),x(e.name,k[e.ariaLabelLocStringKey],vr(o[e.name]).toString()),w(t)},[s,o,x,k,w]);(0,t.useLayoutEffect)(function(){var e;I.current&&(null===(e=I.current[O])||void 0===e||e.focus())},[O]);var T=function(e,n,a,i,r,o,s){var c=this,d=(0,t.useState)([]),l=d[0],u=d[1],f=(0,t.useContext)($n.Z),p=f.image,m=f.offscreenRenderer,_=(0,Or.Dj)();return(0,t.useEffect)(function(){var t=!1,r=Cr(e,function(e){return jr(c,void 0,void 0,function(){var r,o,s,c;return Vr(this,function(d){switch(d.label){case 0:return r=void 0,o=(0,Rr._k)(p),m&&o?(s=function(t,n){return function(e,t,n,a,i,r,o,s){var c=function(e,t,n,a,i,r){var o=void 0,s=void 0,c=void 0,d=Pr(e);try{d&&(o=d.getLevel(),s=d.getTexture(),c=d.getConfiguration(),function(e,t,n,a,i){if(zt(a)&&i){var r=t[n[a.lutUrlId]];if(!r||1!==r.parts.length)throw new Error("support is only available for filters from list of default filters");e.setTexture(r.parts[0].texture),e.setConfiguration(a.config),e.setLevel(i)}else e.setLevel(0)}(d,i,r,t,n))}catch(e){a({id:"FilterTextureNotFound",message:"Failed to apply the default filter during offscreen render: ".concat(e," ")})}return function(){d&&c&&(d.setLevel(null!=o?o:0),d.setTexture(s),d.setConfiguration(c))}}(e,t,n,o,s.lutTextures,s.lutUrlsById),d=(0,Tr.G)(e,i),l=function(e,t){var n=e.getEffects().find(function(e){return e.getName()===Fr}),a=!1;return n&&(a=n.getShouldShowCheckerboardOverride(),n.setShouldShowCheckerboardOverride(t)),function(){n&&n.setShouldShowCheckerboardOverride(a)}}(e,r);return function(){c(),d(),l()}}(t,e,1,0,0,!0,_,n)},[4,Nr()]):[3,4];case 1:return d.sent(),t?[3,4]:[4,m.getEditedImage(o,Br({},(0,xr.R)((0,tn.H)(n),(0,rt.GM)(a),{width:Math.floor(93*i),height:Math.floor(93*i)})),s)];case 2:return c=d.sent(),[4,Nr()];case 3:d.sent(),r=null==c?void 0:c.toDataURL(),d.label=4;case 4:return[2,{name:e.name,src:r}]}})})}),o=r.promise,s=r.cancel;return jr(c,void 0,void 0,function(){var e;return Vr(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o];case 1:return e=n.sent(),t||u(e),[3,3];case 2:return n.sent(),u([]),[3,3];case 3:return[2]}})}),function(){s(),t=!0}},[e,a,i,_,93,p,n,m,93,r]),l}(i,p,m,_,b),U=(0,a.merge)({name:{width:"".concat(93,"px")}},null==l?void 0:l.imageTile),F=function(e,a,i,r,o,s,c,d,l,u,f,p,m){var _=(0,t.useContext)(y.x).strings,h=(0,t.useCallback)(function(t,r){var p,h=i.find(function(e){return t.name===e.name}),b=(null==d?void 0:d.name)===t.name?0:-1;return n().createElement(Sr.w,{key:t.name,image:null!==(p=null==h?void 0:h.src)&&void 0!==p?p:"",iconName:"ActiveFilterCheckmark-Havana",onClick:function(){s(t,r)},isActive:e.name===t.name,isHighlighted:!1,name:_[t.locStringKey],ariaLabel:Dr(t,e,_,o),ariaSelected:e.name===t.name,tileSize:93,imageTileStyles:Ir(Ir({},c),{image:null==c?void 0:c.image,container:null==c?void 0:c.container}),tabIndex:b,onKeyDown:l,tileWrapperRef:a[r],ref:function(e){u&&u.current&&(u.current[r]=e)},role:f,title:m})},[i,void 0,null==d?void 0:d.name,e,_,o,c,93,l,a,f,m,s,u]);return h}(r,D,T,0,o,P,U,i[O],E,I,"option"),H=(0,A.J)(L.filter_sliderTooltip,k[r.ariaLabelLocStringKey]),R=(0,t.useMemo)(function(){return i.map(function(e,t){return{element:F(e,t),name:e.name}})},[i,F]),N=n().createElement(yr,{key:r.name,style:null==l?void 0:l.slider,filterLevel:o[r.name],setFilterLevel:M,layout:"Labeled",headerName:k.filter_intensitySliderHeader,ariaLabel:(0,A.J)(k.filter_intensitySliderAriaLabelFormatString,k[r.ariaLabelLocStringKey],H),title:H,filterName:r.name,filterAriaLabelLocString:k[r.ariaLabelLocStringKey],setAriaAnnouncement:c});return n().createElement(zr.Y,{actionsComponent:N,tiles:R,ariaLabel:L.filter_filtersAriaLandmark,title:k.filter_listTitle,getHasActiveTileInRow:function(e){return zt(r)&&!!e.find(function(e){return e.props.children.props.isActive})},numOfTilesPerRow:v,setNumOfTilesPerRow:S,header:u,footer:f,size:d,tileRefs:D,styles:Gr(Gr({},l),{tile:null==l?void 0:l.filterTile})},h)});function Wr(e){return"filterLevelsByName"in e}var qr={undoReducer:function(e,t){var n;e.undoRedoStack.redoStack.push(t),e.activeFilter=t.undoPayload.activeFilter,e.filterLevel=t.undoPayload.filterLevel,e.filterLevelsByName[t.undoPayload.activeFilter.name]=null!==(n=t.undoPayload.filterLevel)&&void 0!==n?n:1,Wr(t.undoPayload)&&(e.filterLevelsByName=t.undoPayload.filterLevelsByName)},redoReducer:function(e,t){var n;e.undoRedoStack.undoStack.push(t),e.activeFilter=t.redoPayload.activeFilter,e.filterLevel=t.redoPayload.filterLevel,e.filterLevelsByName[t.redoPayload.activeFilter.name]=null!==(n=t.redoPayload.filterLevel)&&void 0!==n?n:1,Wr(t.redoPayload)&&(e.filterLevelsByName=t.redoPayload.filterLevelsByName)},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},Qr=I(4107),Yr=I(8696),Jr={Original:"filterOriginal",Punch:"filterPunch",Golden:"filterGolden",Radiate:"filterRadiate","Warm Contrast":"filterWarmContrast",Calm:"filterCalm","Cool Light":"filterCoolLight","Vivid Cool":"filterVividCool","Dramatic Cool":"filterDramaticCool",BW:"filterBW","BW Cool":"filterBWCool","BW Warm":"filterBWWarm","BW High Contrast":"filterBWHighContrast",Burn:"filterBurn",Film:"filterFilm",Vintage:"filterVintage"},Xr=(0,yn.X0)({name:"filters",initialState:Vt,reducers:{setActiveFilterAndLevel:function(e,t){!function(e,t){var n,a=t.payload,i=a.activeFilter,r=a.filterLevel;e.undoPayload||(e.undoPayload={activeFilter:e.activeFilter,filterLevel:e.filterLevel});var o={activeFilter:i,filterLevel:r};if(e.activeFilter=i,e.filterLevel=r,e.filterLevelsByName[i.name]=null!=r?r:1,(0,Yr.G)(e.undoPayload,o)&&t.payload.isUndoRedoable){var s=(0,In.Ey)(null!==(n=Jr[t.payload.activeFilter.name])&&void 0!==n?n:"customFilter",e.undoPayload,o,Qr.Z.KeepAll);e.undoRedoStack.undoStack.push(s),e.undoPayload=void 0}}(e,t)}},extraReducers:function(e){e.addCase(Ne.Cj,function(e,t){return Vt}).addCase(Ne.x2,function(e,t){var n=t.payload.filters,a=n.activeFilter,i=n.filterLevel,r=n.undoRedoStack;a&&(e.activeFilter=a),void 0!==i&&(e.filterLevel=i),a&&i&&(e.filterLevelsByName[a.name]=null!=i?i:1),r&&(e.undoRedoStack=r)}).addCase(Ne.gP,function(e,t){(0,Sn.s)(e,t.payload,"replaceImageFilters",function(e){var t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(Vt,["undoRedoStack"]);Object.assign(e,t)})}),(0,In.h$)(e,qr)}}),Zr=Xr.actions.setActiveFilterAndLevel,$r=Xr.reducer,eo={setActiveFilterAndLevel:Zr,setAriaAnnouncement:J.r9},to=(0,g.Ng)(function(e){var t=e.filters;return{availableFilters:t.availableFilters,activeFilter:t.activeFilter,filterLevelsByName:e.filters.filterLevelsByName,cropTransformValues:e.transformTools.cropInteraction.uvToWorld,imageTransformValues:e.transformTools.image._preciseUvToWorld,cssToPhysicalPixelRatio:e.transformTools.device.pixelRatio,colorAdjustments:e.colorAdjustments}},eo)(Kr);(0,D.loadStyles)([{rawString:".right_pane_15995deb{width:390px;overflow-y:auto;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.right_pane_15995deb::-webkit-scrollbar{display:none}"}]);var no=function(){return no=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},no.apply(this,arguments)},ao=(0,t.memo)(function(e){var t=e.theme,i=e.styles,r=e.className,o=e.children,s=(0,a.getRTL)(t),c="".concat(t.palette.neutralQuaternary," 1px solid"),d={backgroundColor:t.palette.neutralLighterAlt,borderLeft:s?void 0:c,borderRight:s?c:void 0},l=no(no({},d),i);return n().createElement("div",{className:"right_pane_15995deb"+" ".concat(r),style:l},o)});(0,D.loadStyles)([{rawString:".autoEnhanceContainer_53a89d71{margin:30px 16px 0 16px}.autoEnhanceButton_53a89d71{width:100%;height:auto;overflow-wrap:break-word;padding:9px 12px;border-radius:2px}"}]);var io={root:{height:"48px",border:"none",minHeight:"60px"},rootHovered:{border:"none"},rootPressed:{border:"none"},textContainer:{flexGrow:0},label:{fontSize:"14px",lineHeight:"20px",fontWeight:"400"}};function ro(e,t){if(t)return io;var n={root:{color:e.palette.black,backgroundColor:e.palette.neutralQuaternaryAlt},rootHovered:{color:e.palette.black,backgroundColor:e.palette.neutralQuaternaryAlt,opacity:.9},rootPressed:{color:e.palette.neutralSecondary,backgroundColor:e.palette.neutralLighter},rootDisabled:{color:e.palette.neutralTertiary,backgroundColor:e.palette.neutralLighter}};return(0,a.concatStyleSets)(io,n)}var oo,so=(0,t.memo)(function(e){var i,r=e.level,o=e.isAutoEnhanceOn,s=e.styles,c=e.setLevel,d=e.setIsAutoEnhanceOn,l=e.setAriaAnnouncement,u=(0,t.useContext)(y.x),f=u.strings,p=u.localizeNumber,m=(0,t.useContext)(k.b).logAutoEnhanceEvent,_=f,h=(0,A.J)(f.filter_sliderTooltip,f.autoEnhance_name),g=(0,t.useMemo)(function(){return(0,H.Ec)(0,100,r)},[r]),v=(0,t.useRef)(g);v.current=g;var S=(0,t.useRef)(null),D=(0,t.useCallback)(function(e){d(!o),S.current=e,l(o?_.autoEnhance_removedAriaLive:(0,A.J)(_.autoEnhance_appliedAriaLive,p(v.current))),m({activity:o?"Deactivate":"Activate",inputType:(0,j.UR)(e)})},[d,o,l,_.autoEnhance_removedAriaLive,_.autoEnhance_appliedAriaLive,p,m]),I=function(e,n){var i=(0,b.D)();return(0,t.useMemo)(function(){var t=ro(i,!1);return e?(0,a.concatStyleSets)(ro(i,!0),null==n?void 0:n.autoEnhanceAppliedButton):(0,a.concatStyleSets)(t,null==n?void 0:n.autoEnhanceNotAppliedButton)},[e,i,n])}(o,s),x=function(e){return(0,a.concatStyleSets)({root:{width:"16px",height:"16px",margin:"0px 8px"}},e)}(null==s?void 0:s.icon);return n().createElement("div",{className:"autoEnhanceContainer_53a89d71",style:null==s?void 0:s.bodyContainer},n().createElement(a.PrimaryButton,{className:"autoEnhanceButton_53a89d71",ariaDescription:o?_.autoEnhance_appliedTooltip:_.autoEnhance_notAppliedTooltip,ariaLabel:_.autoEnhance_name,role:"toggle",text:_.autoEnhance_name,styles:I,iconProps:{iconName:null!==(i=null==s?void 0:s.autoEnhanceOnIconName)&&void 0!==i?i:"AutoEnhanceOn",styles:x},allowDisabledFocus:!0,onClick:D}),o&&n().createElement(yr,{key:"autoEnhance",style:null==s?void 0:s.slider,filterLevel:r,setFilterLevel:c,layout:"Labeled",headerName:_.autoEnhance_intensitySliderHeader,ariaLabel:(0,A.J)(f.adjustment_sliderAriaLabelFormatString,_.autoEnhance_intensitySliderAriaLabel,h),title:h,filterName:"autoEnhance",filterAriaLabelLocString:f.autoEnhance_name,setAriaAnnouncement:l}))}),co={undoReducer:function(e,t){e.undoRedoStack.redoStack.push(t),e.level=t.undoPayload.level,e.isAutoEnhanceOn=t.undoPayload.isAutoEnhanceOn},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),e.level=t.redoPayload.level,e.isAutoEnhanceOn=t.redoPayload.isAutoEnhanceOn},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},lo="autoEnhance",uo=(0,yn.X0)({name:"autoEnhance",initialState:Ut,reducers:{setLevel:function(e,t){if(e.undoPayload||(e.undoPayload={level:e.level,isAutoEnhanceOn:e.isAutoEnhanceOn}),e.level=t.payload.level,t.payload.isUndoRedoable){var n={level:t.payload.level,isAutoEnhanceOn:e.isAutoEnhanceOn},a=(0,In.Ey)(lo,e.undoPayload,n,Qr.Z.KeepAll);e.undoRedoStack.undoStack.push(a),e.undoPayload=void 0}},setIsAutoEnhanceOn:function(e,t){var n={level:e.level,isAutoEnhanceOn:e.isAutoEnhanceOn};e.isAutoEnhanceOn=t.payload;var a={level:e.level,isAutoEnhanceOn:t.payload};if(e.isAutoEnhanceOn){var i=(0,In.Ey)(lo,n,a,Qr.Z.KeepAll);e.undoRedoStack.undoStack.push(i)}},setAutoEnhanceParameters:function(e,t){e.contrastStretchingParams=t.payload},setEnhanceAlgorithm:function(e,t){e.enhanceAlgorithm=t.payload}},extraReducers:function(e){e.addCase(Ne.Cj,function(e,t){return Ut}).addCase(Ne.gP,function(e,t){(0,Sn.s)(e,t.payload,"replaceImageAutoEnhance",function(e){var t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(Ut,["undoRedoStack"]);Object.assign(e,t)})}),(0,In.h$)(e,co)}}),fo=(oo=uo.actions).setLevel,po=oo.setIsAutoEnhanceOn,mo=oo.setAutoEnhanceParameters,_o=(oo.setEnhanceAlgorithm,uo.reducer),ho={setLevel:fo,setIsAutoEnhanceOn:po,setAriaAnnouncement:J.r9},bo=(0,g.Ng)(function(e){var t=e.autoEnhance;return{level:t.level,isAutoEnhanceOn:t.isAutoEnhanceOn}},ho)(so),go=I(6885),vo=function(){return vo=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vo.apply(this,arguments)},yo=(0,Zi.eW)(42),So=I(3869),Do=I(7130);function Io(e){switch(e){case Do.H.error:return a.MessageBarType.error;case Do.H.info:return a.MessageBarType.info;case Do.H.success:return a.MessageBarType.success;case Do.H.warning:return a.MessageBarType.warning;default:throw new s.x(e)}}var xo=I(7400),Co=n().memo(function(e){var i=e.userFacingMessages,r=e.removeUserFacingMessage,o=e.styles,s=(0,b.D)();!function(e,n){var a=(0,t.useRef)(e);a.current=e;var i=(0,t.useCallback)(function(){a.current.forEach(function(e){!0===e.shouldDismissOnAnyClickOrKeyPress&&n(e.id)})},[n]);(0,xo.P)(i)}(i,r);var c=(0,t.useMemo)(function(){return i.slice().sort(function(e,t){return t.timeOrder-e.timeOrder})},[i]),d=(0,t.useMemo)(function(){return function(e){var t;return e.customStyles||(null===(t=null==o?void 0:o.messageBarStyles)||void 0===t?void 0:t.call(o,{theme:s}))}},[o,s]),l=(0,t.useMemo)(function(){var e=function(e){return(null==e?void 0:e.renderTitleBlock)?n().createElement("b",{style:{display:"block"}},e.title):n().createElement(n().Fragment,null,n().createElement("b",{style:o.titleStyles},e.title)," ")};return e.displayName="RenderTitleComponent",e},[o.titleStyles]);return n().createElement("div",{style:o.containerStyles},c.map(function(e){return n().createElement(a.MessageBar,{key:e.id,messageBarType:Io(e.messageType),messageBarIconProps:e.iconName?{iconName:e.iconName}:void 0,isMultiline:!0,styles:d(e),onDismiss:void 0!==e.dismissButtonAriaLabel?function(){return r(e.id)}:void 0,dismissButtonAriaLabel:e.dismissButtonAriaLabel,"aria-hidden":!1},l(e),e.message)}))}),Oo={removeUserFacingMessage:Ce.Il},wo=(0,g.Ng)(function(e){return{userFacingMessages:e.uiState.userFacingErrorMessages}},Oo)(Co);function Eo(e,t){var n=e[t];if(!n)throw new Error("Could not find ink brush with id ".concat(t));return{inkBrush:n,id:t}}var Ao=I(7192);function Lo(e){return e.toString(16).padStart(2,"0")}var ko=I(8575),Mo=I(2759),Po=I(9481),To=function(){return To=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},To.apply(this,arguments)},Uo=(0,t.memo)(function(e){var a=e.addInkContent,i=e.setAriaAnnouncement,r=e.inkBrush,o=(0,t.useContext)(go.B_),c=o.InkCanvasInteraction,d=o.localizationStrings,l=o.inkConfigurations,u=(0,t.useCallback)(function(e){a(e);var t=function(e,t,n,a){var i,r="#"+Lo((i=t.drawingAttributes.color).r)+Lo(i.g)+Lo(i.b),o=(0,ko.pw)(e,r),c=function(e,t){switch(t){case Mo.p.Pen:return e.markup_markupToolbarPenAriaLabel;case Mo.p.Highlighter:return e.markup_markupToolbarHighlighterAriaLabel;default:throw new s.x(t)}}(e,n.inkType),d=(0,Po.pZ)(t.drawingAttributes.height,a),l=(0,Po.qP)(a)(d).toString();return(0,A.J)(e.markup_addedInkStrokeAriaLive,c,o,l)}(d,e,r,l[r.inkType]);i(t)},[a,r,l,d,i]);return n().createElement(c,To({},e,{addInkContent:u}))}),Fo={addInkContent:Yt.kS,setAriaAnnouncement:J.r9},Ho=(0,g.Ng)(function(e){return{cssToPhysicalPixelRatio:e.transformTools.device.pixelRatio,imageViewTransform:(0,Ao.h)(e)}},Fo)(Uo),Ro=function(){return Ro=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ro.apply(this,arguments)},No=n().lazy(function(){return I.e(969).then(I.bind(I,5969))}),Bo=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(No,Ro({},e)))},jo=function(){return jo=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jo.apply(this,arguments)},Vo=(0,t.memo)(function(e){var a=e.isMarkupKeyboardInputActive?"none":"pointer",i=(0,t.useContext)(go.B_).markupToolbarStyles,r=(0,t.useMemo)(function(){return jo({borderRadius:"8px",padding:"0",bottom:"0",left:"50%"},null==i?void 0:i.canvasContainer)},[i]);return n().createElement(re,{style:r,visible:!0},n().createElement(Bo,jo({cursor:a},e)))}),zo=I(4230),Go=(0,X.Rz)([function(e){return e.markup.markupContentItems}],function(e){return e.some(function(e){return e.contentType===zo.A.InkContent})}),Ko={setActiveMarkupInkBrushId:Ce.O,setActiveMarkupToolType:Ce.uZ,setInkBrush:Ce.Yc,setShowInkStylePicker:Ce.IE,clearAllMarkupContent:Yt.JG,setAriaAnnouncement:J.r9,setStrokeShapeTipVisibilityState:Ce.Oo},Wo=(0,g.Ng)(function(e){return{activeMarkupToolType:e.uiState.markupUiState.activeMarkupToolType,enableClearAllMarkup:Go({markup:e.markup}),showInkStylePicker:e.uiState.markupUiState.showInkStylePicker,strokeShapeTipVisibilityState:e.uiState.markupUiState.strokeShapeTipVisibilityState,isMarkupKeyboardInputActive:e.uiState.markupUiState.isKeyboardInputActive}},Ko)(Vo),qo=(0,t.memo)(function(e){var t=e.inkBrushes,a=e.activeInkBrushId,i=e.showGapBetweenToolbarAndStylePicker,r=e.showStylePickerInFullWidth,o=e.dialogType,s=e.stylePickerPopUpPositionSource,c=e.shouldOmitInkContent,d=Eo(t,a);return n().createElement(n().Fragment,null,n().createElement(Wo,{inkBrushes:t,activeInkBrushId:a,showGapBetweenToolbarAndStylePicker:i,showStylePickerInFullWidth:r,clearAllMarkupConfirmationDialogType:o,stylePickerPopUpPositionSource:s}),n().createElement(Ho,{inkBrush:d.inkBrush,shouldOmitInkContent:c}))}),Qo=(0,g.Ng)(function(e){return{inkBrushes:e.uiState.markupUiState.inkBrushes,activeInkBrushId:e.uiState.markupUiState.activeInkBrushId}})(qo);(0,D.loadStyles)([{rawString:".sectionHeader_24eccdd1{font-size:16px;font-weight:500;line-height:42px;margin:25px 0 6px 0}.mainSection_24eccdd1{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:8px}.eraserSection_24eccdd1{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.textSection_24eccdd1{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:8px 16px}"}]);const Yo="mainSection_24eccdd1";var Jo=I(7864),Xo=I(6899),Zo=I(8996),$o=I(2154),es={body:{display:"flex",flexDirection:"column"},container:{width:"100%"}},ts={display:"flex"};function ns(e){return{root:{border:"none",backgroundColor:e.semanticColors.primaryButtonTextDisabled,borderRadius:3,height:40},rootHovered:{backgroundColor:e.semanticColors.primaryButtonTextDisabled},textContainer:{flexGrow:"unset"},icon:{marginRight:32}}}var as={addMarkupContent:Yt.kS},is=(0,g.Ng)(function(e){return{imageViewTransform:(0,Ao.h)(e)}},as)(function(e){var i=e.addMarkupContent,r=e.imageViewTransform,o=(0,t.useContext)(go.B_).localizationStrings,s=(0,b.D)();return n().createElement(a.DefaultButton,{ariaLabel:"",text:"Add text",styles:ns(s),iconProps:{iconName:"InsertTextBox"},onClick:function(){i({text:o.markup_textboxDefaultContent,contentType:zo.A.TextContent,invertedPhysicalImageTransformDuringContentSerialization:(0,it.iE)(r),initialPosition:{positionType:"CenteredOnCanvas"}})}})}),rs=I(6777);function os(e,t,n,a){var i,r,o=Object.keys(t);if(0===o.length)return null;var s=+o[0],c=t[+s].selectionStart,d=(null===(r=null===(i=null==e?void 0:e[s])||void 0===i?void 0:i[c])||void 0===r?void 0:r[n])||a,l=o.every(function(i){var r,o,l,u,f=t[+i],p=f.selectionStart,m=f.selectionEnd;p===m&&(d=(null===(o=null===(r=null==e?void 0:e[s])||void 0===r?void 0:r[c-1])||void 0===o?void 0:o[n])||a);for(var _=p;_<m;_++)if(((null===(u=null===(l=null==e?void 0:e[+i])||void 0===l?void 0:l[_])||void 0===u?void 0:u[n])||a)!==d)return!1;return!0});return l?d:null}var ss=I(5862),cs=I(9657),ds=function(e){return{root:{height:40,backgroundColor:e.semanticColors.primaryButtonTextDisabled,"&::after":{border:"none"}},container:{lineHeight:32},input:{backgroundColor:e.semanticColors.primaryButtonTextDisabled}}},ls=function(e){return{rootPressed:{backgroundColor:e.semanticColors.primaryButtonTextDisabled},rootHovered:{backgroundColor:e.semanticColors.primaryButtonTextDisabled}}},us={root:{margin:0},container:{alignItems:"baseline"}},fs=function(){return fs=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fs.apply(this,arguments)},ps=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},ms=[12,24,36,48,60,72,84];function _s(e){return{key:e,text:"".concat(e)}}var hs=function(e){var i=e.fontSize,r=void 0===i?48:i,o=e.onChange,s=e.disabled,c=e.text,d=(0,b.D)(),l=(0,t.useContext)(go.B_).localizationStrings,u=(0,t.useMemo)(function(){return ms.map(function(e){return _s(e)})},[]),f=(0,t.useState)(void 0),p=f[0],m=f[1],_=(0,t.useState)(u),h=_[0],g=_[1],v=(0,t.useRef)(null),y=(0,a.mergeStyles)(function(e){return{color:e.semanticColors.errorText,fontSize:e.fonts.small.fontSize}}(d)),S=(0,t.useCallback)(function(e,t){p||(m(void 0),(null==t?void 0:t.text)&&(null==o||o(+t.text)))},[o,p]),D=(0,t.useCallback)(function(e){e&&((0,cs.F)(+e)?m(+e<1||+e>1e3?(0,A.J)(l.markup_textBoxInvalidInputRangeErrorMessage,1..toString(),1e3.toString()):void 0):m(l.markup_textBoxInvalidInputTypeErrorMessage))},[l]);(0,t.useEffect)(function(){var e=_s(r);if(!h.find(function(t){return t.key===e.key})){var t=fs(fs({},e),{styles:{root:{display:"none"}}});g(ps(ps([],u,!0),[t],!1))}},[r,h,g,u]),(0,t.useEffect)(function(){var e,t,n=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e._autofill.current;function a(e){"Enter"===e.key&&S(void 0,_s(+((null==n?void 0:n.value)||48)))}return null===(t=null==n?void 0:n.inputElement)||void 0===t||t.addEventListener("keydown",a),function(){var e;null===(e=null==n?void 0:n.inputElement)||void 0===e||e.removeEventListener("keydown",a)}},[v,S,r]);var I=(0,t.useCallback)(function(e){D(null==e?void 0:e.text)},[D]);return n().createElement(n().Fragment,null,n().createElement(rs.X,{label:"Size",iconName:"FontSize"}),n().createElement(ss.a,{styles:ds(d),disabled:s,allowFreeform:!0,autoComplete:"off",selectedKey:r,options:h,caretDownButtonStyles:ls(d),dropdownWidth:100,onChange:S,componentRef:v,onInputValueChange:D,text:s?"":c,onPendingValueChanged:I}),p&&n().createElement("div",{className:y},p))},bs=I(7884),gs=I(4035),vs=I(2865),ys=I(8372),Ss={root:{width:"100%"},focusedContainer:{marginLeft:"-6px"},tableCell:{padding:0}};function Ds(e){return{padding:0,opacity:e?"0.3":"unset"}}var Is=function(){return Is=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Is.apply(this,arguments)},xs=function(e){var t=e.selectedId,i=e.disabled,r=(0,b.D)(),o=function(e){var o=e.id===t&&!i,s=(0,ys.Fc)(r),c=s.colorCellSVG,d=s.colorCellSVGCircle,l=s.colorCellSize,u=s.colorCellSVGRadius,f=s.colorCellSelected;return n().createElement("svg",{className:(0,a.mergeStyles)(c,o&&f),width:l,height:l,viewBox:"0 0 ".concat(l," ").concat(l),fill:e.color},n().createElement("circle",{className:(0,a.mergeStyles)(d),cx:"50%",cy:"50%",r:u}))};return n().createElement(gs.G,Is({},e,{onRenderColorCell:function(e,t){var r=null==t?void 0:t(e);return r?n().createElement(vs.D,Is({},r.props,{onRenderItem:o,className:(0,a.mergeStyles)(Ds(i))})):null},styles:Ss}))},Cs=function(e){var a=e.onTextColorChange,i=e.onBackgroundColorChange,r=e.disabled,o=e.colors,s=e.textColorId,c=e.backgroundColorId,d=e.defaultBackgroundColorId,l=void 0!==c,u=(0,t.useMemo)(function(){var e;return null===(e=o.find(function(e){return e.id===d}))||void 0===e?void 0:e.color},[o,d]);return n().createElement(n().Fragment,null,n().createElement(rs.X,{label:"Color",iconName:"CircleFill"}),n().createElement(xs,{disabled:r,selectedId:s,columnCount:8,colorCells:o,onChange:function(e,t,n){return a(n)}}),n().createElement(rs.X,{label:"Background color",iconName:"BackgroundColor"},n().createElement(bs.l,{disabled:r,styles:us,onText:"On",offText:"Off",checked:l,onChange:function(){i(l?"transparent":u)}})),l&&n().createElement(xs,{disabled:r,selectedId:c,columnCount:8,colorCells:o,onChange:function(e,t,n){return i(n)}}))},Os=I(9467),ws=I(374);function Es(e,t){return{title:{color:e.palette.neutralDark,lineHeight:40,height:40,border:"unset",backgroundColor:t?e.semanticColors.disabledBackground:e.semanticColors.primaryButtonTextDisabled},caretDownWrapper:{lineHeight:40,height:40}}}var As=function(){return As=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},As.apply(this,arguments)},Ls=function(e){var t=(0,b.D)();return n().createElement(ws.m,As({},e,{styles:Es(t,e.disabled)}))},ks=function(){return ks=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ks.apply(this,arguments)},Ms=I(4021),Ps={addMarkupContent:Yt.kS,updateTextContent:Ms.L,setMarkupTextStyleAttributes:Yt.iM},Ts=(0,g.Ng)(function(e){return{activeTextContent:e.markup.markupContentItems.find(function(t){return t.id===e.markup.activeMarkupContentId&&t.contentType===zo.A.TextContent}),markupTextSelection:e.markup.markupTextSelection}},Ps)(function(e){var a=e.activeTextContent,i=e.updateTextContent,r=e.markupTextSelection,o=e.setMarkupTextStyleAttributes,s=(0,t.useContext)(go.B_).localizationStrings,c=(0,t.useMemo)(function(){return(0,ko.RS)(s)},[s]),d=(0,t.useMemo)(function(){var e,t;return os(null===(e=null==a?void 0:a.drawingAttributes)||void 0===e?void 0:e.styles,r||{},"fontSize",null===(t=null==a?void 0:a.drawingAttributes)||void 0===t?void 0:t.fontSize)||void 0},[a,r]),l=(0,t.useMemo)(function(){var e;return null===(e=c.find(function(e){var t;return e.color===(null===(t=null==a?void 0:a.drawingAttributes)||void 0===t?void 0:t.backgroundColor)}))||void 0===e?void 0:e.id},[a,c]),u=(0,t.useMemo)(function(){var e,t,n,i=os(null===(e=null==a?void 0:a.drawingAttributes)||void 0===e?void 0:e.styles,r||{},"fill",null===(t=null==a?void 0:a.drawingAttributes)||void 0===t?void 0:t.fill);return null===(n=c.find(function(e){return e.color===i}))||void 0===n?void 0:n.id},[a,c,r]),f=(0,t.useMemo)(function(){var e,t;return os(null===(e=null==a?void 0:a.drawingAttributes)||void 0===e?void 0:e.styles,r||{},"fontFamily",null===(t=null==a?void 0:a.drawingAttributes)||void 0===t?void 0:t.fontFamily)},[a,r]),p=(0,t.useMemo)(function(){return(c.findIndex(function(e){return e.color===Os.zs})+1).toString()},[c]),m=(0,t.useMemo)(function(){return(c.findIndex(function(e){return e.color===Os.e9})+1).toString()},[c]);return n().createElement("div",null,n().createElement(rs.X,{label:"Font style",iconName:"Font"}),n().createElement(Ls,{options:[{key:"Times New Roman",text:"Times New Roman"},{key:"arial",text:"arial"}],disabled:!a,selectedKey:f,placeholder:null===f&&a?"Mixed":void 0,onChange:function(e,t){var n;return o({fontFamily:null===(n=null==t?void 0:t.key)||void 0===n?void 0:n.toString()})}}),n().createElement(hs,{fontSize:d,disabled:!a,onChange:function(e){return o({fontSize:e})},text:void 0===d&&a?"Mixed":void 0}),n().createElement(Cs,{disabled:!a,colors:c,textColorId:u,backgroundColorId:l,onTextColorChange:function(e){return o({fill:e})},defaultColorId:m,defaultBackgroundColorId:p,onBackgroundColorChange:function(e){return function(e,t){var n;(null==a?void 0:a.drawingAttributes)&&i(ks(ks({},a),{drawingAttributes:ks(ks({},null==a?void 0:a.drawingAttributes),(n={},n.backgroundColor=t,n))}))}(0,e)}}))}),Us=(0,t.memo)(function(e){var i=e.showGapBetweenToolbarAndStylePicker,r=void 0!==i&&i,o=e.dialogType,s=e.stylePickerPopUpPositionSource,c=e.styles,d=e.inkBrushes,l=e.activeInkBrushId,u=e.inkBrush,f=e.setInkBrush,p=e.setStrokeShapeTipVisibilityState,m=e.colorPickerMaxColumnCount,_=e.shouldHideArrowOptions,h=void 0!==_&&_,g=e.strokeShapeTipVisibilityState,v=e.setInkBrushVisibility,y=e.activeMarkupToolType,D=e.clearAllMarkupContent,I=e.enableClearAllMarkup,x=e.setAriaAnnouncement,C=e.isStrokeShapePickerHeaderVisible,O=void 0!==C&&C,w=e.isColorHeaderVisible,E=void 0!==w&&w,A=e.isInkThicknessSliderHeaderHidden,L=void 0!==A&&A,k=e.isMarkupHeaderHidden,M=void 0!==k&&k,P=(0,Jo.B)("buttonGridCell"),T=(0,t.useContext)(go.B_),U=T.localizationStrings,F=T.inkConfigurations,H=T.markupToolbarStyles,R=T.markupToolsConfigurations,N=(0,b.D)(),B=(0,t.useMemo)(function(){return(0,a.merge)(function(e){return{markupToolbarTools:{toolbarIcon:{"&:hover":{backgroundColor:"unset"}}},markupToolbarButton:{root:{width:"calc(100% - 32px)",margin:"16px",backgroundColor:e.palette.neutralLight,color:e.palette.white,border:"none"},textContainer:{flexGrow:"unset"},flexContainer:{flexDirection:"row-reverse"},rootHovered:{backgroundColor:e.palette.neutralTertiaryAlt}}}}(N),null==H?void 0:H.clearAllMarkup)},[null==H?void 0:H.clearAllMarkup,N]),j=F[d[l].inkType];return(0,t.useEffect)(function(){Object.entries(d).filter(function(e){return"pen2"===e[0]}).forEach(function(e){var t=e[0];return v({inkBrushId:t,isInkBrushVisible:!1})})},[d,v]),n().createElement(S.e,{styles:c},!M&&n().createElement("section",{"aria-label":""},n().createElement("div",{className:"sectionHeader_24eccdd1",style:null==c?void 0:c.sectionHeader},U.markup_panelLabel)),n().createElement("section",null,n().createElement(Qo,{showGapBetweenToolbarAndStylePicker:r,showStylePickerInFullWidth:!0,dialogType:o,stylePickerPopUpPositionSource:s})),(0,Mo.B)(y)&&n().createElement("section",{"aria-label":"",className:Yo},n().createElement(Zo.e,{colorPickerGridCellButtonIdPrefix:P,doNotContainColorPickerWithinFocusZone:!0,colorOptions:(0,ko.RS)(U),colorPickerMaxColumnCount:m,inkConfiguration:j,inkBrush:u,inkBrushIdForInkStyleChange:l,setInkBrush:f,key:l,shouldHideArrowOptions:h,isStrokeShapeCalloutVisible:!0,strokeShapeTipVisibilityState:g,setStrokeShapeTipVisibilityState:p,styles:null==H?void 0:H.inkStylePicker,inkThicknessSliderHeaderIcon:"BullseyeTarget",strokePreviewShape:"Line",isColorHeaderVisible:E,isStrokeShapePickerHeaderVisible:O,isInkThicknessSliderHeaderHidden:L})),y===Xo.d9&&n().createElement("section",{"aria-label":"",className:(0,a.mergeStyles)(Yo,"eraserSection_24eccdd1"),style:{backgroundColor:N.palette.neutralLight}},n().createElement($o.M,{styles:B,enableClearAllMarkup:I,clearAllMarkupContent:D,setAriaAnnouncement:x,confirmationDialogType:ea.h.normal,getIcon:R.clearAllMarkup.getIcon,showTooltip:!1,text:"Clear All Markup"})),y===Xo.Vm&&n().createElement("section",{"aria-label":"",className:(0,a.mergeStyles)(Yo,"textSection_24eccdd1"),style:{backgroundColor:N.palette.neutralLight}},n().createElement(is,null),n().createElement(Ts,null)))}),Fs={setStrokeShapeTipVisibilityState:Ce.Oo,setInkBrush:Ce.Yc,setInkBrushVisibility:Ce.t4,clearAllMarkupContent:Yt.JG,setAriaAnnouncement:J.r9},Hs=(0,g.Ng)(function(e){return{inkBrush:e.uiState.markupUiState.inkBrushes[e.uiState.markupUiState.activeInkBrushId],inkBrushes:e.uiState.markupUiState.inkBrushes,activeInkBrushId:e.uiState.markupUiState.activeInkBrushId,strokeShapeTipVisibilityState:e.uiState.markupUiState.strokeShapeTipVisibilityState,activeMarkupToolType:e.uiState.markupUiState.activeMarkupToolType,enableClearAllMarkup:e.markup.markupContentItems.length>0}},Fs)(Us),Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Rs.apply(this,arguments)},Ns=n().lazy(function(){return Promise.all([I.e(470),I.e(102),I.e(601),I.e(863)]).then(I.bind(I,863))}),Bs=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(Ns,Rs({},e)))};(0,D.loadStyles)([{rawString:".spinner_1745ec6c{height:100%;width:100%;opacity:.8;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;z-index:200}"}]);var js=function(){return js=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},js.apply(this,arguments)},Vs=(0,t.memo)(function(e){var t=e.loading,i=e.styles,r=e.dataTestId,o=(0,b.D)();return t?n().createElement(a.Spinner,{className:"spinner_1745ec6c","data-test-id":r,style:js({background:o.palette.white},i),size:a.SpinnerSize.large}):null});Vs.displayName="LoadingSpinner";var zs=I(4977),Gs=I(7395),Ks=(0,g.Ng)(function(e){return{loading:!(0,de.H1)(e)||e.uiState.waitingForActiveEditorActivityToComplete||(0,Gs.S)(e),dataTestId:e.uiState.waitingForActiveEditorActivityToComplete?"pivot-switching":"pivot-switched"}})(function(e){var a=e.loading,i=e.dataTestId,r=e.children,o=(0,t.useState)(!1),s=o[0],c=o[1],d=(0,t.useRef)(new Set),l=s||a,u=(0,t.useCallback)(function(e,t){e?d.current.add(t):d.current.delete(t),c(d.current.size>0)},[]);return n().createElement(zs.M.Provider,{value:{showLoadingSpinner:u}},l&&n().createElement(Vs,{loading:l,dataTestId:i}),r)}),Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ws.apply(this,arguments)},qs=n().lazy(function(){return Promise.all([I.e(470),I.e(102),I.e(601),I.e(593)]).then(I.bind(I,9593))}),Qs=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(qs,Ws({},e)))},Ys=function(){return Ys=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ys.apply(this,arguments)},Js=n().lazy(function(){return Promise.all([I.e(470),I.e(98)]).then(I.bind(I,8098))}),Xs=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(Js,Ys({},e)))},Zs=".".concat(a.ButtonGlobalClassNames.msButtonIcon),$s=function(e){var t,n=e.theme;return{root:{backgroundColor:n.semanticColors.bodyBackground,color:n.semanticColors.bodyText,borderRadius:"8px",marginBottom:"16px","@media screen and (forced-colors: active) and (prefers-color-scheme: light)":{color:"windowText",backgroundColor:"window"},"@media screen and (forced-colors: active) and (prefers-color-scheme: dark)":{color:"window",backgroundColor:"windowText"}},dismissal:(t={padding:"0px 15px 0px 0px"},t[Zs]={color:n.palette.black},t),content:{alignItems:"center",minHeight:"48px"},text:{margin:"0px",padding:"12px 12px 12px 0px",fontSize:"14px"},icon:{fontWeight:"600","@media screen and (forced-colors: active) and (prefers-color-scheme: light)":{color:"windowText"},"@media screen and (forced-colors: active) and (prefers-color-scheme: dark)":{color:"window"}},iconContainer:{fontWeight:"600",margin:"0px 15px"}}},ec=n().lazy(function(){return I.e(110).then(I.bind(I,6110))}),tc=function(e){var a=e.ariaLabel;return n().createElement(t.Suspense,{fallback:null},n().createElement(ec,{ariaLabel:a}))},nc=n().lazy(function(){return I.e(257).then(I.bind(I,1257))}),ac=function(){return n().createElement(t.Suspense,{fallback:null},n().createElement(nc,null))},ic=I(1989),rc=I(8633),oc=n().lazy(function(){return I.e(893).then(I.bind(I,5893))}),sc=function(){return n().createElement(t.Suspense,{fallback:null},n().createElement(oc,{setCursorIsActive:function(){},brushRadiusInImagePixels:20}))},cc=n().memo(function(e){var t=e.maskInteractionMode,a=e.ariaLabel,i=e.maskingDisabled,r=(0,b.D)();if(i)return n().createElement("div",{tabIndex:0,role:"img",className:rc.A.nonCropUI,style:{outlineColor:r.palette.neutralDark},"aria-label":a});switch(t){case"none":return null;case"circleBrush":return n().createElement(tc,{ariaLabel:a});case"selectingRectangle":return n().createElement(ac,null);case"objectSegmentation":return n().createElement(sc,null)}}),dc=(0,g.Ng)(function(e){return{maskInteractionMode:(0,ic.TG)(e),maskingDisabled:(0,ic.Kd)(e)}},{})(cc);function lc(e,t,n){return"OriginalBackground"===t?n.background_canvasAriaLabelWhenNoBackgroundOption:n.background_canvasAriaLabelWhenBackgroundOptionApplied}var uc=n().memo(function(e){e.activeBackgroundUiMode;var a=e.backgroundType,i=(0,t.useContext)(y.x).strings;return n().createElement(dc,{ariaLabel:lc(0,a,i)})}),fc=(0,g.Ng)(function(e){var t=e.imageBackground;return{activeBackgroundUiMode:t.activeBackgroundUiMode,backgroundType:t.backgroundType}},{})(uc),pc=function(){return pc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pc.apply(this,arguments)},mc=n().lazy(function(){return I.e(698).then(I.bind(I,1698))}),_c=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(mc,pc({},e)))},hc=function(){return hc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hc.apply(this,arguments)};function bc(e){var t={flexGrow:1,overflowY:"auto",paddingLeft:"16px",paddingRight:"16px",selectors:{":focus-visible":{outlineColor:e.palette.black}}};return(0,a.mergeStyleSets)({previewRegion:hc({},t)})}var gc,vc=I(7728),yc=I(6935),Sc=I(7515),Dc=I(697),Ic=I(4592),xc=n().lazy(function(){return I.e(773).then(I.bind(I,3773))}),Cc=function(){return n().createElement(t.Suspense,{fallback:null},n().createElement(xc,null))},Oc=n().memo(function(e){var a=e.texturePatches,i=e.applyOnPointerUp,r=(0,t.useContext)(y.x).strings,o=(0,Sc.z)(),s=function(e,n,a){var i=(0,Dc.V)("magicErase").id,r=(0,Dc.V)("spotFix").id;return(0,t.useMemo)(function(){return(0,Ic.G)(e,"eraseMask")?n?a.magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOn:a.magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOff:(0,Ic.G)(e,"main",[r,i])?a.magicErase_canvasAriaLabelWithAppliedBrushedMasks:a.magicErase_canvasAriaLabelWithNoPreviousEraseOperation},[n,i,r,a,e])}(a,i,r);return o?n().createElement(Cc,null):n().createElement(dc,{ariaLabel:s})}),wc=(0,g.Ng)(function(e){return{texturePatches:(0,yc.c)(e),applyOnPointerUp:(0,vc.G)(e)}},{})(Oc),Ec=n().memo(function(e){return n().createElement(dc,{ariaLabel:""})}),Ac=function(){return Ac=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ac.apply(this,arguments)},Lc=n().lazy(function(){return Promise.all([I.e(102),I.e(368)]).then(I.bind(I,1368))}),kc=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(Lc,Ac({},e)))},Mc=I(8398),Pc=(gc=function(e,t){return gc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},gc(e,t)},function(e,t){function n(){this.constructor=e}gc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Tc="html",Uc="svg",Fc=function(e,t){var n,a,i,r={};if(e===Tc)i=document.createElement("div");else{if(e!==Uc)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');i=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var o=0,s=Object.entries(t.attributes);o<s.length;o++){var c=s[o],d=c[0],l=c[1];i.setAttribute(d,l)}var u={element:i,elementType:e,setPortalProps:function(e){r=e},getInitialPortalProps:function(){return r},mount:function(t,i){if(i!==a){if(u.unmount(),t!==n&&!function(e,t){if(t===Tc)return e instanceof HTMLElement;if(t===Uc)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(u.element,i),n=t,a=i}},unmount:function(e){e&&e!==a||n&&a&&(n.replaceChild(a,u.element),n=void 0,a=void 0)}};return u},Hc=function(e){function n(t){var n=e.call(this,t)||this;return n.addPropsChannel=function(){Object.assign(n.props.node,{setPortalProps:function(e){n.setState({nodeProps:e})}})},n.state={nodeProps:n.props.node.getInitialPortalProps()},n}return Pc(n,e),n.prototype.componentDidMount=function(){this.addPropsChannel()},n.prototype.componentDidUpdate=function(){this.addPropsChannel()},n.prototype.render=function(){var e=this,n=this.props,a=n.children,i=n.node;return Mc.createPortal(t.Children.map(a,function(n){return t.isValidElement(n)?t.cloneElement(n,e.state.nodeProps):n}),i.element)},n}(t.PureComponent),Rc=function(e){function n(n){var a=e.call(this,n)||this;return a.placeholderNode=t.createRef(),a.passPropsThroughPortal(),a}return Pc(n,e),n.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},n.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,n=t.parentNode;e.mount(n,t),this.passPropsThroughPortal()},n.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode.setPortalProps({}),this.currentPortalNode=e);var t=this.placeholderNode.current,n=t.parentNode;e.mount(n,t),this.passPropsThroughPortal()},n.prototype.componentWillUnmount=function(){var e=this.props.node;e.unmount(this.placeholderNode.current),e.setPortalProps({})},n.prototype.render=function(){return t.createElement("div",{ref:this.placeholderNode})},n}(t.PureComponent),Nc=Fc.bind(null,Tc),Bc=(Fc.bind(null,Uc),n().lazy(function(){return I.e(226).then(I.bind(I,5226))})),jc=function(){return n().createElement(t.Suspense,{fallback:null},n().createElement(Bc,null))},Vc=function(){return Vc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vc.apply(this,arguments)},zc=n().lazy(function(){return I.e(16).then(I.bind(I,1016))}),Gc=function(e){return n().createElement(t.Suspense,{fallback:null},n().createElement(zc,Vc({},e)))},Kc=I(6547),Wc=I(5378),qc=(0,t.createContext)({resizedImageWithStatus:{image:null,status:"none"},revealPosViewSpace:0,setResizedImage:function(){},requestResizedImage:function(){},cancelResizeOperation:function(){},acceptResizedImage:function(){},rejectResizedImage:function(){},centerSplitter:function(){},setSplitterPosViewSpace:function(){},resizePivotTeachingTipState:"notShown",onResizePivotTeachingTipDismissed:function(){},setResizePivotTeachingTipState:function(){}}),Qc=I(9680);function Yc(e){return"loaded"===e}function Jc(e){var t=2*e,n=30*e,a=80*e;return{lineThickness:2*e,borderThickness:t,blockWidth:n,blockHeight:a,blockContainerWidth:n+2*t+4*e,blockContainerHeight:a+2*t,exchangeIconWidth:20*e,exchangeIconHeight:23*e}}function Xc(e){var t=Jc(e),n=t.blockContainerWidth;return{handleWidth:n,handleHeight:t.blockContainerHeight,lineWidth:n}}(0,D.loadStyles)([{rawString:".ms-Fabric--isFocusVisible .imageSplitter_00ac4884:focus{visibility:visible;outline-width:3px;outline-style:solid;outline-offset:-3px}.ms-Fabric--isFocusHidden .imageSplitter_00ac4884{outline:0}.imageSplitter_00ac4884{position:absolute;width:100%;height:100%;top:0}"}]);var Zc=function(){return Zc=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zc.apply(this,arguments)},$c="ew-resize",ed=n().memo(function(e){var a=e.onPointerDown,i=e.onPointerMove,r=e.onPointerUp,o=e.onPointerLeave,s=e.onPointerEnter,c=e.viewCropTransform,d=e.canvasPixelSize,l=e.cursor,u=e.cssToPhysicalPixelRatio,f=e.setAriaAnnouncement,p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["onPointerDown","onPointerMove","onPointerUp","onPointerLeave","onPointerEnter","viewCropTransform","canvasPixelSize","cursor","cssToPhysicalPixelRatio","setAriaAnnouncement"]),m=(0,t.useContext)(qc),_=m.revealPosViewSpace,h=m.resizedImageWithStatus,b=m.setSplitterPosViewSpace,g=(0,t.useContext)(k.b).logSuperResolutionCompareSplitterMovedEvent,v=(0,t.useContext)(y.x).strings,S=(0,t.useState)(void 0),D=S[0],I=S[1],x=(0,t.useState)(null),C=x[0],O=x[1],w="loaded"===h.status,E=(0,t.useRef)(w);E.current=w;var L=(0,t.useRef)(c);L.current=c;var M=(0,t.useRef)(_);M.current=_;var T=(0,t.useRef)(u);T.current=u;var U,F,H,R=(0,t.useCallback)(function(e){var t=M.current,n=(0,rt.GM)(L.current),a=n.top+n.height/2,i=Xc(T.current);return Math.abs(e.x-t)<i.lineWidth||Math.abs(e.y-a)<i.handleHeight/2&&Math.abs(e.x-t)<i.handleWidth/2},[]),N=(0,t.useCallback)(function(e){var t=(0,Qc.q)(e.x,0,d.x),n=(0,it.J)(L.current,{x:t,y:0}).x,a=t;return n<0?a=(0,it.So)(L.current,{x:0,y:0}).x:n>1&&(a=(0,it.So)(L.current,{x:1,y:0}).x),b(a),a},[b,d]),B=(0,t.useRef)(null),j=(0,t.useCallback)(function(e){E.current?null!=B.current?I($c):e.isMiddleButtonDown||e.isRightButtonDown?I(void 0):R(e.pointerPhysicalPixelPos)?I($c):I(void 0):I(void 0)},[R,I]),V=(0,t.useCallback)(function(e){var t=e.pointerPhysicalPixelPos;e.isPrimaryButtonDownOrTouchDown&&E.current&&R(t)?(B.current=M.current,N(t)):null==a||a(e),j(e)},[a,R,N,j]),z=(0,t.useCallback)(function(e){var t=e.pointerPhysicalPixelPos;null!=B.current?N(t):null==i||i(e),j(e)},[i,N,j]),G=(0,t.useCallback)(function(e,t,n){e?(g({inputType:t}),f((0,A.J)(v.resize_splitterMovedAriaLive,Math.round(n).toString()))):f(v.resize_splitterCannotMoveFurtherAriaLive)},[g,f,v.resize_splitterCannotMoveFurtherAriaLive,v.resize_splitterMovedAriaLive]),K=(0,t.useCallback)(function(e){null!=B.current?(G(M.current!==B.current,e.inputType,M.current),B.current=null,I(void 0)):null==r||r(e)},[G,r]),W=(0,t.useCallback)(function(e){var t=e.direction,n=e.speed,a=(0,ot.f1)((0,P.Dp)(t),n),i=_+a.x,r=N({x:i,y:0});G(_!==r,"Keyboard",r)},[_,N,G]);U=C,F=W,H=(0,t.useCallback)(function(e,t){if(!e.ctrlKey&&(0,P.qb)(e)){e.stopPropagation(),e.preventDefault();var n=(0,P.SG)(e.key);if("Right"!==n&&"Left"!==n)return;F({direction:n,speed:(0,P.DC)(t)})}},[F]),(0,We.V)({numRepeatsToSwitchToFast:P.QD,keyboardEventTarget:U,handleKeyboardDown:H,isFastDirectionKey:P.K8});var q=Yc(h.status),Q=Xc(u).lineWidth;return n().createElement(n().Fragment,null,q&&n().createElement("div",{id:"splitter",className:"imageSplitter_00ac4884",style:{outlineColor:"white",left:M.current/u-Q/2,width:Q},ref:O,"data-is-focusable":!0,role:"button",tabIndex:0,"aria-label":v.resize_splitterAriaLabel}),n().createElement(rr.r,Zc({onPointerDown:V,onPointerMove:z,onPointerUp:K,onPointerLeave:o,onPointerEnter:s,cursor:D||l,cssToPhysicalPixelRatio:u,"aria-label":v.nonCrop_imagePanAriaLabel},p)))}),td=(0,X.Rz)([de.hx,de.jO,de.A],function(e,t,n){var a=e||t;return(0,it.XG)(a,n)}),nd=(0,X.Rz)([de.NX,de.un],function(e,t){return!(0,it.rt)(e,t,an.G)}),ad={onPointerMove:Ne.Kd,onPointerDown:Ne.fy,onPointerUp:Ne.UI,onPointerEnter:Ne.Ls,onPointerLeave:Ne.w$,onWheel:Re.vc,onTouchDown:Re.Lm,onTouchMove:Re.qb,onTouchUp:Re.fz,onUnmount:Re.j6,panView:Re.rh,setAriaAnnouncementScenario:J.Ac,setAriaAnnouncement:J.r9,requestTexturePatch:Ne.k6,setPointerMovePixelPos:Wc.ZS,setCursorIsActive:Wc.Bo,incrementNumberMaskBrushStrokesMadeByUser:Kc.Cr};const id=(0,g.Ng)(function(e){return{cssToPhysicalPixelRatio:e.transformTools.device.pixelRatio,cursor:(0,nt.g)(e),panViewTopLeftCornerFromCropOrigin:(0,dr.M)(e),viewCropTransform:td(e),canvasPixelSize:(0,de.fX)(e)}},ad)(ed);var rd=I(4422),od=I(706),sd=I(450),cd=(0,t.memo)(function(e){var n=e.resizeImageLoadingStatus,a=e.addUserFacingMessage,i=e.removeUserFacingMessage,r=e.clearUserFacingMessages,o=e.resizedImageDimensions,s=(0,t.useContext)(y.x).strings;return(0,t.useEffect)(function(){var e=void 0;if("loading"===n){var t=(0,rd.b)();e=(0,od.Y)("resizeProcessing",t),a({id:e,title:"",message:s.resize_notificationUpscaleInProgress,messageType:Do.H.info,timeOrder:t})}return function(){e&&i(e)}},[a,i,n,s]),(0,t.useEffect)(function(){var e=void 0;if("loaded"===n){var t=(0,rd.b)();e=(0,od.Y)("resizeSuccess",t),a({id:e,title:"",message:(0,A.J)(s.resize_notificationUpscaleSuccessfullyCompletedFormatString,o.width.toString(),o.height.toString()),messageType:Do.H.success,timeOrder:t,shouldDismissOnAnyClickOrKeyPress:!0,dismissButtonAriaLabel:s.notification_dismissButtonAriaLabel})}else"error"===n&&(t=(0,rd.b)(),e=(0,od.Y)("resizeFail",t),a({id:e,title:"",message:s.resize_notificationUpscaleFailed,messageType:Do.H.error,timeOrder:t,dismissButtonAriaLabel:s.notification_dismissButtonAriaLabel}));return function(){e&&i(e)}},[a,i,n,s,o]),(0,sd.X)(r),null});cd.displayName="ResizeUserMessages";var dd,ld=(0,X.Rz)([function(e){return e.resize.resizeFactor},Be.W9],function(e,t){return{width:Math.floor(t.width*e),height:Math.floor(t.height*e)}}),ud={addUserFacingMessage:Ce.ys,removeUserFacingMessage:Ce.Il,clearUserFacingMessages:Ce.SG},fd=(0,g.Ng)(function(e){return{resizeImageLoadingStatus:bn(e),resizedImageDimensions:ld(e)}},ud)(cd),pd=I(8426),md=(0,t.memo)(function(e){var i=e.isDialogVisible,r=e.onConfirm,o=e.onDismiss,s=e.onCancel,c=e.styles,d=(0,b.D)(),l=(0,t.useMemo)(function(){return(0,a.merge)(function(e){var t=function(e){var t=function(e){return{backgroundColor:e.palette.themePrimary,color:e.palette.white,border:"none"}}(e);return{root:Nn(Nn({},t),{borderRadius:"4px"}),rootDisabled:{backgroundColor:e.palette.neutralQuaternaryAlt,color:e.palette.neutralTertiary},rootHovered:Nn(Nn({},t),{opacity:.9}),rootPressed:Nn(Nn({},t),{backgroundColor:e.palette.themeDark}),rootExpanded:t,rootFocused:(0,a.getFocusStyle)(e,Nn(Nn({},zn),{borderColor:e.palette.black})),label:{fontWeight:"normal"}}}(e),n=Gn(e);return{dialog:{main:{maxWidth:"460px !important",minHeight:"160px",borderRadius:"5px",paddingTop:"8px"}},dialogContent:{title:{padding:"16px 24px 14px 24px",color:e.palette.black},subText:{color:e.palette.black},content:{border:"none"}},dialogFooter:{actions:{margin:"44px 0px 0px"},actionsRight:{margin:"0px -3px",display:"flex"},action:{margin:"0px 3px",flexGrow:"1"}},confirmButton:(0,a.concatStyleSets)(t,{root:{width:"100%"}}),cancelButton:(0,a.concatStyleSets)(n,{root:{width:"100%"}})}}(d),c)},[c,d]),u=(0,t.useContext)(y.x).strings,f={contentTitle:u.resize_applyUpscaleConfirmDialogContentTitle,contentSubText:u.resize_applyUpscaleConfirmDialogContentSubText,closeButtonAriaLabel:u.resize_applyUpscaleConfirmDialogCloseButtonAriaLabel,confirmText:u.resize_applyUpscaleConfirmDialogConfirmText,confirmAriaLabel:u.resize_applyUpscaleConfirmDialogConfirmAriaLabel,cancelText:u.resize_applyUpscaleConfirmDialogCancelText,cancelAriaLabel:u.resize_applyUpscaleConfirmDialogCancelAriaLabel};return n().createElement(ta.K,{isVisible:i,dialogType:ea.h.normal,dialogIsBlocking:!0,dialogStrings:f,styles:l,onConfirm:r,onCancel:s,onDismiss:o})}),_d=(0,t.memo)(function(e){var a=e.activeEditorActivity,i=e.resizeFactor,r=e.resizedImageLoadingStatus,o=e.hasEditsOtherThanResizeAndImageReplacement,s=e.cancelEditorActivityChange,c=e.setShouldWaitForEditorActivityToComplete,d=e.setDoneWaitingForActiveEditorActivityToComplete,l=e.nextEditorActivity,u=e.styles,f=(0,t.useContext)(qc),p=f.acceptResizedImage,m=f.rejectResizedImage,_=f.cancelResizeOperation,h=(0,t.useContext)(k.b),b=h.logNameAndInputTypeEvent,g=h.logSuperResolutionAppliedEvent,v=(0,pd.V)(),y=(0,t.useCallback)(function(){p(),d()},[p,d]),S=Xt(i,r);(0,t.useEffect)(function(){c(S||"loading"===r)},[c,S,r]);var D=!!l&&a===Me.qQ&&l!==a,I=D&&S&&o,x=D&&S&&!o,C=(0,t.useRef)();return(0,t.useEffect)(function(){D&&"loading"===r&&(_(),d())},[D,_,d,r]),(0,t.useEffect)(function(){x&&(void 0===C.current||!1===C.current)&&(y(),g({scenario:"auto",isIntentional:!1})),C.current=x},[x,y,g]),n().createElement(md,{isDialogVisible:I,onConfirm:function(e){y(),b({name:"SuperResolutionConfirmationDialog_Apply",inputType:(0,j.UR)(e)}),g({scenario:"dialog",isIntentional:!0}),v()},onDismiss:function(e){s(),b({name:"SuperResolutionConfirmationDialog_Dismiss",inputType:(0,j.UR)(e)}),v()},onCancel:function(e){m(),d(),b({name:"SuperResolutionConfirmationDialog_Discard",inputType:(0,j.UR)(e)}),v()},styles:u})}),hd={setShouldWaitForEditorActivityToComplete:Ce.cb,setDoneWaitingForActiveEditorActivityToComplete:Ce.Sh,cancelEditorActivityChange:Ce.P_},bd=(0,g.Ng)(function(e){return{activeEditorActivity:e.uiState.activeEditorActivity,nextEditorActivity:e.uiState.nextEditorActivity,resizeFactor:e.resize.resizeFactor,resizedImageLoadingStatus:e.resize.resizedImageLoadingStatus,hasEditsOtherThanResizeAndImageReplacement:Mn(e)}},hd)(_d),gd=I(1323),vd=I(547),yd=I(9332),Sd={undoReducer:function(e,t){e.resizedImageLoadingStatus="none",e.resizeFactor=t.undoPayload.resizeFactor,e.resizeImageRequestId=void 0},redoReducer:function(e,t){e.undoRedoStack.undoStack.push(t),e.resizedImageLoadingStatus="none",e.resizeFactor=t.redoPayload.resizeFactor,e.resizeImageRequestId=void 0},removeItemsReducer:function(e,t){e.undoRedoStack.undoStack=t},collapseItemsReducer:function(e,t,n){e.undoRedoStack.undoStack=e.undoRedoStack.undoStack.filter(function(e){return e.sequence!==t.payload.start&&e.sequence!==t.payload.end}),e.undoRedoStack.undoStack.push(n)}},Dd=(0,yn.X0)({name:"resize",initialState:vn,reducers:{setResizedImageLoadingStatus:function(e,t){e.resizedImageLoadingStatus=t.payload,"none"!==t.payload&&"error"!==t.payload||(e.resizeFactor=1,e.undoRedoStack=vn.undoRedoStack)},setResizeFactor:function(e,t){var n={resizeFactor:t.payload},a=(0,In.Ey)("superResolutionPreview",{resizeFactor:1},n,Qr.Z.KeepLast);e.undoRedoStack.undoStack.push(a),e.resizeFactor=t.payload},setResizeImageRequestId:function(e,t){e.resizeImageRequestId=t.payload}},extraReducers:function(e){e.addCase(Ne.Cj,function(e,t){return vn}).addCase(Ce.Ax,function(e,t){t.payload!==Me.qQ&&Object.assign(e,vn)}),(0,In.h$)(e,Sd)}}),Id=(dd=Dd.actions).setResizedImageLoadingStatus,xd=dd.setResizeFactor,Cd=dd.setResizeImageRequestId,Od=Dd.reducer;(0,D.loadStyles)([{rawString:".sliderContainer_55f737cf{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:10px}.sliderTitleContainer_55f737cf{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"}]),(0,D.loadStyles)([{rawString:".ticks_5bb42c36{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;margin-top:-3px}.tick_5bb42c36{width:1px;height:5px}.tick_5bb42c36:first-child{margin-left:4px}.tick_5bb42c36:last-child{margin-right:4px}@media screen and (-ms-high-contrast:active),screen and (forced-colors:active){.ticks_5bb42c36{background-color:window;forced-color-adjust:none}}"}]);var wd=(0,t.memo)(function(e){var a=e.numTicks,i=(0,b.D)(),r=(0,t.useMemo)(function(){return i.palette.neutralTertiary},[i]),o=(0,t.useMemo)(function(){return Array.from({length:a},function(e,t){return n().createElement("div",{key:t,className:"tick_5bb42c36",style:{backgroundColor:r}})})},[a,r]);return n().createElement("div",{className:"ticks_5bb42c36"},o)});wd.displayName="SliderTicks";var Ed=function(e){return e+1},Ad=function(e){return e-1},Ld=function(e){return 0===e?0:Math.floor((e-0+1)/1)},kd=I(3783),Md=I(2115),Pd=function(){return Pd=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pd.apply(this,arguments)},Td=function(e){var a=e.calloutVisibilityState,i=e.setCalloutVisibilityState,r=(e.children,e.target),o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["calloutVisibilityState","setCalloutVisibilityState","children","target"]),s=(0,t.useContext)(y.x).strings,c=r.current;return(0,Md.U)({enterCondition:"showing"===a&&document.activeElement===c,exitCondition:"showing"===a,reverseEnterCondition:"showing"===a,reverseExitCondition:"showing"===a,elmBeforeEnter:null!=c?c:void 0,elmAfterEnter:void 0,elmBeforeExit:void 0,elmAfterExit:null!=c?c:void 0}),n().createElement(kd.j,Pd({},o,{target:r,calloutVisibilityState:a,setCalloutVisibilityState:i,calloutHeaderText:s.resize_scaleTeachingTipTitle,customCalloutChild:n().createElement(vd.E,null,s.resize_scaleTeachingTipMainText)}))};Td.displayName="UpscaleTeachingTip";var Ud="32px",Fd=(0,t.memo)(function(e){var i=e.disabled,r=e.resizeFactor,o=e.setResizeFactor,s=e.setResizedImageLoadingStatus,c=e.styles,d=e.inputImageSizeForSuperResolution,l=e.maxSliderValue,u=(0,b.D)(),f=(0,t.useContext)(y.x).strings,p=(0,t.useContext)(qc),m=p.requestResizedImage,_=p.rejectResizedImage,h=(0,t.useContext)(k.b).logSuperResolutionSliderAdjustEvent,g=(0,t.useRef)(null),v=(0,t.useState)("notShown"),S=v[0],D=v[1],I=(0,t.useCallback)(function(e){D(function(e){return"showing"===e?"alreadyShown":"showing"})},[D]),x=(0,t.useCallback)(function(e){o(Ed(e)),s("preparing")},[o,s]),C=(0,A.J)(f.resize_upscaleSliderResizeFactorLabel,r.toString()),w=0===l,E=i||w,L=(0,t.useMemo)(function(){return(0,a.concatStyleSets)(c,function(e,t,n){var a=(e?n.palette.themeTertiary:n.palette.themePrimary)+" !important";return{root:{margin:"20px 2px 12px 2px",flexGrow:1},slideBox:{height:"auto",width:"100%",padding:"0 2px"},container:{height:"auto",width:"100%"},thumb:{backgroundColor:t?n.palette.neutralTertiary:a},activeSection:{backgroundColor:a}}}(E,w,u))},[E,c,w,u]),M=(0,t.useCallback)(function(e){var t=Ed(e);return 1===t?f.resize_upscaleSlider1xAriaValueText:(0,A.J)(f.resize_upscaleSliderAriaValueText,t.toString(),(t*d.width).toString(),(t*d.height).toString())},[d.height,d.width,f.resize_upscaleSlider1xAriaValueText,f.resize_upscaleSliderAriaValueText]);return n().createElement("div",{className:"sliderContainer_55f737cf"},n().createElement("div",{className:"sliderTitleContainer_55f737cf"},n().createElement("div",{style:{height:Ud}},n().createElement(vd.E,{style:{height:Ud,display:"inline-block",transform:"translateY(-12%)"}},f.resize_scaleLabel),n().createElement(a.IconButton,{elementRef:g,iconProps:{iconName:"info"},"aria-label":f.resize_scaleTeachingTipTitle,onClick:I}),n().createElement(Td,{calloutVisibilityState:S,setCalloutVisibilityState:D,target:g})),n().createElement(vd.E,{style:{height:Ud,display:"inline-flex",alignItems:"center"}},C)),n().createElement(O.A,{showValue:!1,value:Ad(r),min:0,max:l,step:1,snapToStep:!1,onChange:x,onChanged:function(e,t){var n=Ed(t);1===n?_():m(n),h({value:n,inputType:(0,j.IR)(e),inputImageWidth:d.width,inputImageHeight:d.height})},styles:L,disabled:E,ariaLabel:f.resize_upscaleSliderAriaLabel,ariaValueText:M,buttonProps:{title:f.resize_upscaleSliderTooltip}}),n().createElement(wd,{numTicks:Ld(l)}))});Fd.displayName="UpscaleSlider";var Hd={setResizeFactor:xd,setResizedImageLoadingStatus:Id},Rd=(0,g.Ng)(function(e){return{resizeFactor:e.resize.resizeFactor}},Hd)(Fd);function Nd(e,t){return"".concat(t,"px solid ").concat(e.palette.neutralQuaternary," !important")}function Bd(e,t){var n={thumb:{backgroundColor:e.palette.themePrimary+" !important",border:Nd(e,4),width:"20px",height:"20px",top:"-8px",backgroundClip:"padding-box",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.0578)",":hover":{border:Nd(e,3)},":active":{border:Nd(e,5)}},root:{},titleLabel:{},container:{margin:"0 10px 0 10px"},slideBox:{},line:{},lineContainer:{},activeSection:{backgroundColor:e.palette.themePrimary+" !important"},inactiveSection:{},valueLabel:{},zeroTick:{}};return(0,a.concatStyleSets)(n,t)}var jd=(0,t.memo)(function(e){var i=e.cropSize,r=e.resizeFactor,o=(0,b.D)(),s=(0,t.useMemo)(function(){return o.palette.neutralSecondary},[o]),c=(0,t.useMemo)(function(){return o.palette.neutralPrimary},[o]),d=(0,t.useContext)(y.x).strings,l=mt(i.width,i.height),u=mt(i.width*r,i.height*r);return n().createElement(n().Fragment,null,n().createElement(a.Stack,{horizontal:!0,horizontalAlign:"space-between"},n().createElement(vd.E,{style:{color:s}},d.resize_currentImageLabel),n().createElement(vd.E,{style:{color:s}},l.imageDimension)),n().createElement(a.Stack,{horizontal:!0,horizontalAlign:"space-between"},n().createElement(vd.E,{style:{color:c}},d.resize_newImageLabel),n().createElement(vd.E,{style:{color:c}},u.imageDimension)))});jd.displayName="ResizedImageDetails";var Vd=(0,g.Ng)(function(e){return{cropSize:(0,Be.W9)(e),resizeFactor:e.resize.resizeFactor}},{})(jd),zd=I(6329),Gd=I(7933),Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Kd.apply(this,arguments)},Wd=function(e){var i,r=e.calloutVisibilityState,o=e.setCalloutVisibilityState,s=(e.children,e.target),c=e.onUserFeedbackRequested,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["calloutVisibilityState","setCalloutVisibilityState","children","target","onUserFeedbackRequested"]),l=(0,b.D)(),u=(0,t.useContext)(y.x).strings,f=(0,zd.l)(l),p=(0,t.useContext)(Gd.G).onLinkClicked,m=(0,t.useState)(null),_=m[0],h=m[1],g=(0,t.useRef)(null),v=s.current;return(0,Md.U)({enterCondition:"showing"===r&&document.activeElement===v,exitCondition:"showing"===r,reverseEnterCondition:"showing"===r,reverseExitCondition:"showing"===r,elmBeforeEnter:null!=v?v:void 0,elmAfterEnter:null!=_?_:void 0,elmBeforeExit:null!==(i=g.current)&&void 0!==i?i:void 0,elmAfterExit:null!=v?v:void 0}),n().createElement(kd.j,Kd({},d,{target:s,calloutVisibilityState:r,setCalloutVisibilityState:o,calloutHeaderText:u.resize_teachingTipTitle,customCalloutChild:n().createElement(a.Stack,{style:{marginTop:"0",padding:"0 0 4px 0"},tokens:{childrenGap:16}},n().createElement(vd.E,null,u.resize_teachingTipMainText),n().createElement("br",null),n().createElement("p",{style:{margin:0}},n().createElement(a.Link,{href:"javascript:void(0)",styles:f,as:"a",onClick:c,ref:h},u.resize_teachingTipSendFeedbackLink)),n().createElement("br",null),n().createElement("p",{style:{margin:0}},n().createElement(a.Link,{href:"javascript:void(0)",styles:f,as:"a",onClick:function(){return p("https://go.microsoft.com/fwlink/?linkid=2290963")},ref:g},u.resize_learnMoreLink)))}))};Wd.displayName="ResizeTeachingTip";var qd,Qd=I(907),Yd=function(){var e=(0,b.D)(),i=(0,t.useContext)(y.x).strings;return n().createElement(a.MessageBar,{dismissButtonAriaLabel:"Close",messageBarIconProps:{iconName:"WarningSolid"},role:"alert",dismissIconProps:{iconName:"Clear"},styles:(0,Qd.o)(e,"warning"),messageBarType:a.MessageBarType.warning},i.resize_imageTooBigWarning)},Jd=(0,t.memo)(function(e){var i=e.onUserFeedbackRequested,r=e.styles,o=e.setAriaAnnouncement,s=e.inputImageSizeForSuperResolution,c=(0,b.D)(),d=(0,t.useMemo)(function(){return r||function(e){var t=(0,a.concatStyleSets)(Gn(e),{root:{width:"50%",margin:"20px 0px"}});return{stack:{root:{padding:"16px"}},headerTextGroup:{display:"flex",alignItems:"center",flexDirection:"row",gap:"8px"},headerIcon:{root:{width:"20px",fill:e.palette.black,transform:"translateY(2px)"}},headerAIBadge:{transform:"translateY(2px)"},slider:Bd(e,{container:{margin:"0"}}),cancelButton:t}}(c)},[r,c]),l=(0,t.useContext)(y.x).strings,u=(0,t.useContext)(k.b).logNameAndInputTypeEvent,f=(0,t.useContext)(qc),p=f.resizedImageWithStatus,m=f.rejectResizedImage,_=f.cancelResizeOperation,h=f.centerSplitter,g=(0,t.useRef)(null),v=Ad(function(e){if(0===e.width||0===e.height)return 1;var t=e.width*e.height*4,n=Math.sqrt(4294967295/t),a=Math.floor(n);return(0,Qc.q)(a,Ed(0),Ed(7))}(s)),S=0===v,D=(0,t.useState)("notShown"),I=D[0],x=D[1],C=(0,t.useCallback)(function(e){x(function(e){return"showing"===e?"alreadyShown":"showing"})},[x]),O=(0,t.useCallback)(function(e){m(),u({name:"DiscardSuperResolution",inputType:(0,j.UR)(e)}),o((0,A.J)(l.resize_discardAriaLive,s.width.toString(),s.height.toString()))},[m,u,o,l.resize_discardAriaLive,s]),w=(0,t.useCallback)(function(e){_(),u({name:"CancelSuperResolution",inputType:(0,j.UR)(e)}),o((0,A.J)(l.resize_cancelAriaLive,s.width.toString(),s.height.toString()))},[_,u,o,s,l.resize_cancelAriaLive]);(0,t.useEffect)(function(){h()},[h]),(0,sd.X)(m);var E=(0,t.useMemo)(function(){return n().createElement(n().Fragment,null,n().createElement("div",{style:d.headerTextGroup},n().createElement(xe.Icon,{iconName:"ResolutionIcon-Havana",styles:d.headerIcon}),n().createElement(vd.E,null,l.pivot_resize),n().createElement("div",{style:d.headerAIBadge},yd.H)),n().createElement("span",null,n().createElement(a.IconButton,{elementRef:g,iconProps:{iconName:"info"},"aria-label":l.resize_teachingTipTitle,"aria-expanded":"showing"===I,onClick:C})))},[I,d,l,C]);return n().createElement(gd.U,{header:E},n().createElement(Wd,{calloutVisibilityState:I,setCalloutVisibilityState:x,target:g,onUserFeedbackRequested:i}),n().createElement(a.Stack,{styles:d.stack,tokens:{childrenGap:12}},n().createElement(Rd,{disabled:"loading"===p.status,styles:d.slider,inputImageSizeForSuperResolution:s,maxSliderValue:v}),n().createElement(Vd,null),"loading"===p.status&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",borderTop:"1px solid ".concat(c.palette.neutralTertiary),marginTop:"20px"}},n().createElement(a.DefaultButton,{onClick:w,styles:d.cancelButton,ariaLabel:l.resize_cancelButtonAriaLabel},l.resize_cancelButton)),"loaded"===p.status&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",borderTop:"1px solid ".concat(c.palette.neutralTertiary),marginTop:"20px"}},n().createElement(a.DefaultButton,{onClick:O,styles:d.cancelButton,ariaLabel:l.resize_discardButtonAriaLabel},l.resize_discardButton)),S&&n().createElement(n().Fragment,null,n().createElement("br",null),n().createElement(Yd,null))))}),Xd={setAriaAnnouncement:J.r9},Zd=(0,g.Ng)(function(e){return{inputImageSizeForSuperResolution:(0,Be.W9)(e)}},Xd)(Jd),$d=function(){return $d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$d.apply(this,arguments)},el=(0,t.memo)(function(e){var i,r=e.componentSize,o=e.onSave,c=e.onClose,d=e.pivotItems,l=e.cssToPhysicalPixelRatio,u=e.layout,f=e.hideCanvas,p=e.customCommandBarButtons,m=e.onRenderSaveMenu,_=e.actionsStackStyles,h=e.isCopyToClipboardVisible,g=e.canvasContainerPortalNodeRef,v=(0,b.D)(),y=(0,t.useContext)(q.u).enableAutoEnhance,S=(0,t.useContext)(go.B_),D=S.markupToolbarStyles,I=(0,S.getMarkupToolbarPosition)(D),x="Inline"===I,C=null===(i=null==D?void 0:D.clearAllMarkup)||void 0===i?void 0:i.confirmationDialog,O=(0,t.useMemo)(function(){return function(e){var t;return(t={})[Me.I8]=vo(vo({},yo),{bottom:162}),t[Me.lm]=yo,t[Me.Xc]=yo,t[Me.Y4]=function(e){switch(e){case"Left":case"Right":return vo(vo({},yo),{left:90,right:90});case"Bottom":return vo(vo({},yo),{bottom:56});case"Inline":return vo({},yo);default:throw new s.x(e)}}(e),t[Me.qO]=yo,t[Me.Nr]=yo,t[Me.NF]=yo,t[Me.dp]=yo,t[Me.vs]=yo,t[Me.qQ]=yo,t}(I)},[I]),w=(0,t.useState)(null),E=w[0],A=w[1],L=(0,t.useState)(!0),k=L[0],M=L[1],P=(0,t.useState)(!1),T=P[0],U=P[1],F=(0,So.K)(E);(0,t.useLayoutEffect)(function(){M(!(F.width<813)),U(F.width<750)},[F]),function(e){var n=Ea(e).onCopyToClipboard,a=(0,t.useContext)(La).notifyPreSaveListeners,i=(0,t.useCallback)(function(e){n&&a(xa.CopyToClipboard).then(function(){n(e,"KeyboardShortcut")}).catch(function(){throw new Error("unable to notify listeners")})},[a,n]),r=(0,t.useCallback)(function(e){"KeyC"!==e.code&&e.keyCode!==or.bC.C||!e.ctrlKey||e.shiftKey||e.altKey||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||(e.preventDefault(),i(e))},[i]);(0,t.useEffect)(function(){var e=function(e){r&&r(e)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r])}(o);var H=(0,a.getRTL)(v),R=(0,t.useMemo)(function(){return{containerStyles:{position:"absolute",left:"50%",bottom:"0px",transform:"translate(-50%, 0)",zIndex:300,maxWidth:"45%",minWidth:"350px"},messageBarStyles:$s}},[H]);return n().createElement("div",{className:"layout_desktop_435e4110",ref:A},n().createElement("div",{role:"banner"},d.length>1&&n().createElement(Na,{componentSize:r,onSave:o,onRenderSaveMenu:m,onCancel:c,controlPivot:n().createElement(He,{pivotItems:d,styles:Ba(v),showHeaderText:k}),confirmationDialogStyles:C,customItems:p,isCopyToClipboardVisible:h}),d.length<=1&&n().createElement(Na,{componentSize:r,onSave:o,onRenderSaveMenu:m,onCancel:c,confirmationDialogStyles:C,isCopyToClipboardVisible:h})),n().createElement("div",{className:"content_container_435e4110"},n().createElement("div",{className:"canvas_container_435e4110",role:"main","data-test-id":"canvas-container"},n().createElement(Ks,null,!f&&n().createElement(It,{canvasSize:r,cssToPhysicalPixelRatio:l},g.current&&n().createElement(Rc,$d({node:g.current},u.getCanvasContainerProps(v))),n().createElement(Ot,{match:Me.dp},n().createElement(jc,null))),n().createElement(Ot,{match:[Me.Nr,Me.vs]},n().createElement(Ec,null)),n().createElement(Ot,{match:Me.NF},n().createElement(fc,null)),n().createElement(Ot,{match:Me.qO},n().createElement(wc,null)),n().createElement(Ot,{match:[Me.lm,Me.Xc,Me.co]},n().createElement(fr,null),n().createElement(Un,null)),n().createElement(Ot,{match:Me.I8},n().createElement(ft,null),n().createElement(nr,{desktopTransformToolsActionStackStyles:_}),n().createElement(ye,null),n().createElement(ht,null)),n().createElement(Ot,{match:Me.qQ},n().createElement(id,null))),!T&&n().createElement(wo,{styles:R})),n().createElement(Ot,{match:Me.lm},n().createElement(ao,{theme:v},n().createElement(ne,{styles:{adjustmentSlider:{getSliderHeaderStyles:function(){return{container:{paddingBottom:"2.5px"}}},getSliderStyles:function(){return{container:{marginBottom:"17.5px"}}}}}}))),n().createElement(Ot,{match:Me.Xc},n().createElement(ao,{theme:v},n().createElement(to,{styles:u.getFilterActionsPaneStyles()},y&&n().createElement(bo,null)))),n().createElement(Ot,{match:Me.Y4},x&&n().createElement(ao,{theme:v,styles:ts},n().createElement(Hs,{styles:es,isColorHeaderVisible:!0,isStrokeShapePickerHeaderVisible:!0}))),n().createElement(Ot,{match:Me.qO},n().createElement(ao,{theme:v},n().createElement(kc,{spotFixControlPanelStyles:{sliderStyles:{getSliderHeaderStyles:function(){return{container:{paddingBottom:"2.5px"}}}}},isCalloutEnabled:!0}))),n().createElement(Ot,{match:Me.NF},n().createElement(ao,{theme:v},n().createElement(Qs,null))),n().createElement(Ot,{match:Me.co},n().createElement(ao,{theme:v},n().createElement(Xs,{styles:{isLightAppliedToggleStyles:{container:{display:"flex",alignItems:"center",padding:"10px 0px",margin:"0px 0px 12px"},label:{root:{display:"flex",padding:"0px",lineHeight:"20px",fontSize:"14px",fontWeight:"400",textAlign:"center",wordBreak:"break-word",wordWrap:"break-word",maxWidth:"60%"}},toggle:{root:{flexGrow:"1",marginBottom:"0px",width:"30%"},text:{fontWeight:"400",textAlign:"center",wordBreak:"break-word",wordWrap:"break-word",padding:"8px",margin:"0px !important"},pill:{minWidth:"40px",margin:"0px 12px"},container:{justifyContent:"flex-end",alignItems:"center"}}}}}))),n().createElement(Ot,{match:Me.Nr},n().createElement(ao,{theme:v},n().createElement(Bs,{styles:{adjustmentSlider:{getSliderHeaderStyles:function(){return{container:{paddingBottom:"2.5px"}}},getSliderStyles:function(){return{container:{marginBottom:"17.5px"}}}}}}))),n().createElement(Ot,{match:Me.vs},n().createElement(ao,{theme:v},n().createElement(Gc,null))),n().createElement(Ot,{match:Me.qQ},n().createElement(ao,{theme:v},n().createElement(Zd,null)),n().createElement(fd,null),n().createElement(bd,null)),n().createElement(Ot,{match:Me.dp},n().createElement(ao,{theme:v},n().createElement(_c,{styles:bc(v)})))),n().createElement(_r,{cssPixelMarginByActivity:O}),T&&n().createElement(wo,{styles:R}))}),tl=function(){return tl=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tl.apply(this,arguments)},nl={reactNode:function(e){var t=tl(tl({},e),{hideCanvas:this.hideCanvas});return n().createElement(el,tl({},t))},getCanvasContainerProps:function(e,t){return{markupProps:{showGapBetweenToolbarAndStylePicker:!0,stylePickerPopUpPositionSource:"Bottom"===t?"SelectedInkBrushButton":"MarkupToolbarContainer"}}},getTheme:function(e,t){return tl(tl({},e?i:r),{rtl:t})},getFilterActionsPaneStyles:function(){return{filterTile:{margin:"0 8px"},slider:{container:o}}},getMarkupToolbarStyles:function(e,t,n,i){return void 0===t&&(t="Bottom"),void 0===n&&(n=!1),void 0===i&&(i=!1),function(e,t){switch(t){case"Left":return(0,a.merge)(f(e),p);case"Right":return(0,a.merge)(f(e),_);case"Bottom":return function(e){return{inkStylePicker:{strokeShapePickerStyles:{container:u({},d(e)),iconLabelButton:{root:{marginTop:"8px"}}}}}}(e);case"Inline":return function(e){return{markupToolbarPosition:"Inline",inkStylePicker:{strokeShapePickerStyles:{container:l(l({},d(e)),{borderTop:"unset",justifyContent:"flex-start"}),iconLabelButton:{root:{marginTop:"8px"}}},inkColorPickerStyles:{container:{marginLeft:"unset"},colorPicker:{root:{marginLeft:-8}}},strokePreviewStyles:{margin:"16px 0 0"},containerStyles:{width:"100%",marginTop:16,padding:"0px 16px"},getContentWrapperStyle:function(){return{height:"inherit",display:"inherit",padding:0,boxShadow:"unset"}}},canvasContainer:{background:"inherit",transform:"inherit",bottom:"inherit",left:"inherit",position:"inherit"}}}(e);default:throw new s.x(t)}}(e,t)}};function al(e){var t=performance.getEntriesByName(e);return t.length>0&&e?performance.now()-t[t.length-1].startTime:-1}!function(e){e.Editor="Editor",e.MainImage="MainImage",e.ResizedImage="SuperResolutionImage",e.Thumbnail="Thumbnail"}(qd||(qd={}));var il=n().memo(function(e){var a=e.imageSize,i=e.children,r=(0,t.useContext)(k.b),o=r.logPageLoadTimeEvent,s=r.sessionFrameStats,c=(0,t.useRef)(a),d=qn();return(0,t.useEffect)(function(){var e=window.performance.now(),t=0,n=function(){var a=window.performance.now();s.reportFrame(a-e),e=a,t=window.requestAnimationFrame(n)};return t=window.requestAnimationFrame(n),function(){window.cancelAnimationFrame(t)}},[s]),(0,t.useEffect)(function(){return function(){c.current!==a&&(d(),c.current=a)}},[a,d]),(0,t.useLayoutEffect)(function(){var e=window.requestAnimationFrame(function(){setTimeout(function(){o({pageLoadTimeMs:al(qd.Editor),component:qd.Editor})})});return function(){window.cancelAnimationFrame(e)}},[o]),n().createElement(n().Fragment,null,i)}),rl=(0,g.Ng)(function(e){return{imageSize:e.transformTools.image.originalPixelSize}},{})(il),ol={adjustment_light:"",adjustment_color:"",adjustment_lightAriaLandmark:"",adjustment_colorAriaLandmark:"",adjustment_brightness:"",adjustment_exposure:"",adjustment_contrast:"",adjustment_highlights:"",adjustment_shadows:"",adjustment_saturation:"",adjustment_temperature:"",adjustment_tint:"",adjustment_vignette:"",adjustment_sharpness:"",adjustment_mobileChangedAriaLive:"",adjustment_sliderChangedAriaLive:"",adjustment_sliderAriaLabelFormatString:"",adjustment_sliderTooltip:"",adjustment_tileMobileTooltip:"",adjustment_tileMobileAriaLabel:"",adjustment_panelLabel:"",aspectRatio_listTitle:"",aspectRatio_freeform:"",aspectRatio_freeformAriaLabel:"",aspectRatio_original:"",aspectRatio_originalAriaLabel:"",aspectRatio_square:"",aspectRatio_squareAriaLabel:"",aspectRatio_ratioLabelFormatString:"",aspectRatio_ratioAriaLabelFormatString:"",aspectRatio_tooltip:"",aspectRatio_changedAriaLive:"",flip_portrait:"",flip_portraitAriaLabel:"",flip_landscape:"",flip_landscapeAriaLabel:"",aspectRatio_panelLabel:"",aspectRatio_landscapePanelLabel:"",aspectRatio_portraitPanelLabel:"",autoEnhance_name:"",autoEnhance_appliedAriaLive:"",autoEnhance_removedAriaLive:"",autoEnhance_intensitySliderHeader:"",autoEnhance_intensitySliderAriaLabel:"",autoEnhance_appliedTooltip:"",autoEnhance_notAppliedTooltip:"",crop_topLeftCornerAriaLabel:"",crop_topRightCornerAriaLabel:"",crop_bottomLeftCornerAriaLabel:"",crop_bottomRightCornerAriaLabel:"",crop_cornerTooltip:"",crop_rectangleAriaLabel:"",crop_rectangleTooltip:"",crop_rectanglePositionAriaLive:"",crop_rectangleCannotMoveInCurrentDirectionAriaLive:"",crop_panelLabel:"",editor_viewingOriginal:"",editor_viewingOriginalAriaLive:"",editor_zoomPercentAriaLive:"",editor_imageDimensionLabelFormatString:"",editor_imageDimensionAriaLabelFormatString:"",editor_imageDimensionAriaLive:"",editor_imageDimensionWithAspectRatioAriaLive:"",editor_title:"",filter_listTitle:"",filter_intensitySliderHeader:"",filter_intensitySliderAriaLabelFormatString:"",filter_nameOriginal:"",filter_nameBurn:"",filter_nameBw:"",filter_nameBwAriaLabel:"",filter_nameBwCool:"",filter_nameBwCoolAriaLabel:"",filter_nameBwHighContrast:"",filter_nameBwHighContrastAriaLabel:"",filter_nameBwWarm:"",filter_nameBwWarmAriaLabel:"",filter_nameCoolLight:"",filter_nameCalm:"",filter_nameDramaticCool:"",filter_nameFilm:"",filter_nameGolden:"",filter_namePunch:"",filter_nameRadiate:"",filter_nameVintage:"",filter_nameVividCool:"",filter_nameWarmContrast:"",filter_changedAriaLive:"",filter_changedAriaLiveWithIntensity:"",filter_mobileChangedAriaLive:"",filter_mobileChangedAriaLiveWithIntensity:"",filter_filtersAriaLandmark:"",filter_sliderTooltip:"",filter_tileMobileTooltip:"",filter_tileAriaLabel:"",filter_tileAriaLabelWhenOriginalFilterIsSelected:"",filter_activeTileAriaLabel:"",filter_activeOriginalFilterAriaLabel:"",filter_showAllButtonText:"",filter_hideButtonText:"",footer_done:"",nonCrop_imageTooltip:"",nonCrop_imageAriaLabelWithEdits:"",nonCrop_imageAriaLabelWithoutEdits:"",nonCrop_panViewPositionAriaLive:"",nonCrop_imagePanAriaLabel:"",pivot_crop:"",pivot_adjustment:"",pivot_filter:"",pivot_markup:"",pivot_retouch:"",pivot_erase:"",pivot_inpaint:"",pivot_background:"",pivot_relight:"",pivot_focalpoint:"",pivot_stylizer:"",pivot_resize:"",pivot_cropAriaDescription:"",pivot_adjustmentAriaDescription:"",pivot_filterAriaDescription:"",pivot_markupAriaDescription:"",pivot_retouchAriaDescription:"",pivot_backgroundAriaDescription:"",pivot_relightAriaDescription:"",pivot_focalpointAriaDescription:"",pivot_stylizerAriaDescription:"",pivot_resizeAriaDescription:"",rotate_left90:"",rotate_left90AriaLabel:"",rotate_left90FinishedAriaLive:"",rotate_right90:"",rotate_right90AriaLabel:"",rotate_right90FinishedAriaLive:"",rotate_sliderAriaLabel:"",rotate_degree:"",rotate_sliderTooltip:"",flip_horizontal:"",flip_horizontalAriaLabel:"",flip_horizontalFinishedAriaLive:"",flip_vertical:"",flip_verticalAriaLabel:"",flip_verticalFinishedAriaLive:"",toolbar_imageSaveMenu:"",toolbar_imageSaveMenuTooltip:"",toolbar_imageSave:"",toolbar_imageSaveAriaLabel:"",toolbar_saveMenuSplitButtonAriaLabel:"",toolbar_imageSaveTooltip:"",toolbar_imageSaveTransparencyWarningTooltip:"",toolbar_imageSaveAsCopy:"",toolbar_imageSaveAsCopyAriaLabel:"",toolbar_imageSaveAsCopyTooltip:"",toolbar_imageSaveAsCopyTransparencyTooltip:"",toolbar_imageCopyToClipboard:"",toolbar_imageCopyToClipboardAriaLabel:"",toolbar_imageCopyToClipboardTooltip:"",toolbar_imageReset:"",toolbar_imageResetTooltip:"",toolbar_imageResetAriaLabel:"",toolbar_imageResetFinishedAriaLive:"",toolbar_resetConfirmDialogContentTitle:"",toolbar_resetConfirmDialogContentSubText:"",toolbar_resetConfirmDialogCloseButtonAriaLabel:"",toolbar_resetConfirmDialogConfirmText:"",toolbar_resetConfirmDialogConfirmAriaLabel:"",toolbar_resetConfirmDialogCancelText:"",toolbar_resetConfirmDialogCancelAriaLabel:"",toolbar_zoomLevelAriaLabel:"",toolbar_zoomInTooltip:"",toolbar_zoomInAriaLabel:"",toolbar_zoomOutTooltip:"",toolbar_zoomOutAriaLabel:"",toolbar_done:"",toolbar_doneAriaLabel:"",toolbar_doneTooltip:"",toolbar_cancel:"",toolbar_cancelAriaLabel:"",toolbar_cancelTooltip:"",toolbar_fitToViewTooltip:"",toolbar_viewActualSizeTooltip:"",toolbar_undo:"",toolbar_undoAriaLabel:"",toolbar_redo:"",toolbar_redoAriaLabel:"",undoRedo_colorAdjustmentsAriaLive:"",undoRedo_autoEnhanceAriaLive:"",undoRedo_filterAriaLive:"",undoRedo_markupInkContentAriaLive:"",undoRedo_markupEraseContentAriaLive:"",undoRedo_markupClearAllMarkupContentAriaLive:"",undoRedo_transformCropAriaLive:"",undoRedo_transformAspectRatioAriaLive:"",undoRedo_transformMirrorImageAriaLive:"",undoRedo_transformRotationAriaLive:"",undoRedo_spotFixAriaLive:"",undoRedo_maskBrushAriaLive:"",undoRedo_blurAriaLive:"",undoRedo_imageBackgroundAriaLive:"",undoRedo_focalPointAriaLive:"",undoRedo_previewSuperResolutionAriaLive:"",undoRedo_appliedSuperResolutionAriaLive:"",spotFix_toastText:"",spotFix_calloutHeaderText:"",spotFix_calloutMainText:"",spotFix_header:"",spotFix_sizeSliderTooltip:"",spotFix_sizeSliderHeader:"",spotFix_sizeSliderAriaLabel:"",spotFix_sizeChangedAriaAnnouncement:"",magicErase_GenerativeEraseLabel:"",magicErase_autoApplyLabel:"",magicErase_autoApplyToggleOn:"",magicErase_autoApplyToggleOff:"",magicErase_autoApplyToggleAriaLabel:"",magicErase_autoApplyToggleAriaDescriptionWhenOn:"",magicErase_autoApplyToggleAriaDescriptionWhenOff:"",magicErase_maskBrushPickerAddToSelectionAriaLabel:"",magicErase_maskBrushPickerAddToSelectionAriaDescription:"",magicErase_maskBrushPickerRemoveFromSelectionAriaLabel:"",magicErase_maskBrushPickerRemoveFromSelectionAriaDescription:"",magicErase_maskBrushPickerEraseText:"",magicErase_maskBrushPickerEraseAriaDescription:"",magicErase_maskBrushPickerClearText:"",magicErase_maskBrushPickerClearAriaDescription:"",magicErase_notificationMagicEraseStillProcessing:"",magicErase_notificationMagicEraseProcessingCompleted:"",magicErase_toastDismissButtonAriaLabel:"",magicErase_notificationMagicEraseProcessingFailed:"",magicErase_canvasAriaLabelWithNoPreviousEraseOperation:"",magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOn:"",magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOff:"",magicErase_canvasAriaLabelWithAppliedBrushedMasks:"",background_resetButtonText:"",background_resetButtonAriaLabel:"",background_resetButtonTooltip:"",background_resetButtonAriaDescription:"",background_blurIntensitySliderLabel:"",background_blurIntensitySliderArialLabel:"",background_blurIntensitySliderChangedAriaAnnouncementFormat:"",background_blurIntensitySliderTitle:"",background_notificationBackgroundSegmentationCompleted:"",background_notificationBackgroundSegmentationProcessing:"",background_ariaAnnounceSegmentationProcessing:"",background_backgroundSegmentationFailed:"",background_backgroundSegmentationFailedDismissButtonAriaLabel:"",background_notificationBackgroundBlurProcessing:"",background_ariaAnnounceSegmentationCompletion:"",background_segmentationCompleteToastDismissButtonAriaLabel:"",background_segmentationCompleteToastDismissButtonAriaDescription:"",background_blurTitleText:"",background_blurTitleAriaLabelWhenOptionIsSelected:"",background_blurTitleAriaLabelWhenOptionIsNotSelected:"",background_blurTitleTooltip:"",background_removeTitleText:"",background_removeTitleAriaLabelWhenOptionIsSelected:"",background_removeTitleAriaLabelWhenOptionIsNotSelected:"",background_removeTitleTooltip:"",background_replaceTitleText:"",background_replaceColorPickerAriaLabel:"",background_replaceColorPickerChangedAriaAnnouncementFormat:"",background_replaceColorPickerSliderAriaLabel:"",background_replaceTitleAriaLabelWhenOptionIsSelected:"",background_replaceTitleAriaLabelWhenOptionIsNotSelected:"",background_replaceTitleTooltip:"",background_ariaAnnounceAppliedReset:"",background_canvasAriaLabelWhenNoBackgroundOption:"",background_canvasAriaLabelWhenBackgroundOptionApplied:"",premium_previewFeatureLabel:"",maskBrushPicker_addToSelection:"",maskBrushPicker_addToSelectionAriaLabel:"",maskBrushPicker_addToSelectionAriaDescription:"",maskBrushPicker_removeFromSelection:"",maskBrushPicker_removeFromSelectionAriaLabel:"",maskBrushPicker_removeFromSelectionAriaDescription:"",maskBrushPicker_size:"",maskBrushPicker_sizeChangedAriaAnnouncement:"",maskBrushPicker_sizeAriaLabel:"",maskBrushPicker_sizeAriaDescription:"",maskBrushPicker_softness:"",maskBrushPicker_ariaAnnounceSoftnessChanged:"",maskBrushPicker_softnessAriaLabel:"",maskBrushPicker_softnessAriaDescription:"",maskBrushPicker_title:"",maskBrushPicker_showSelectionToggleAriaLabelWhenOn:"",maskBrushPicker_showSelectionToggleAriaLabelWhenOff:"",maskBrushPicker_showSelectionToggleOn:"",maskBrushPicker_showSelectionToggleOff:"",maskBrushPicker_showSelectionToggleTooltip:"",maskBrushPicker_ariaAnnounceShowSelectionIsOff:"",maskBrushPicker_ariaAnnounceShowSelectionIsOn:"",maskBrushPicker_ariaAnnounceAreaPainted:"",maskBrushPicker_ariaAnnounceAreaErased:"",maskBrushPicker_ariaAnnounceAdditiveBrushSelected:"",maskBrushPicker_ariaAnnounceSubtractiveBrushSelected:"",maskBrushPicker_additiveOrSubtractiveToggleAriaLabel:"",maskBrushPicker_additiveOrSubtractiveToggleAriaDescription:"",colorPicker_redLabel:"",colorPicker_greenLabel:"",colorPicker_blueLabel:"",colorPicker_hexLabel:"",focalPoint_handleAriaLabel:"",focalPoint_handleDescription:"",focalPoint_positionFormatString:"",focalPoint_previewTitle:"",focalPoint_previewDescription:"",focalPoint_previewAspectRatioFormatString:"",focalPoint_previewImageAltFormatString:"",magicErase_calloutHeaderText:"",magicErase_calloutMainText:"",magicErase_calloutSendFeedbackLinkText:"",stylizerTextPrompt_title:"",stylizerTextPrompt_placeholder:"",stylizerTextPrompt_example:"",stylizerTextPrompt_wordsCount:"",stylizerTeachingTip_title:"",stylizerTeachingTip_mainTextWithSendFeedbackLink:"",stylizerTeachingTip_MicrosoftServicesAgreementAndThirdPartyLinks:"",networkOffline_title:"",networkOffline_description:"",networkOfflineImage_alt:"",msaSignedOut_title:"",msaSignedOut_description:"",msaSignedOut_learnMore:"",msaBlocked_title:"",msaBlocked_description:"",msaBlockedImage_alt:"",msaBanned_title:"",msaBanned_description:"",msaBannedImage_alt:"",loginButton_title:"",loginImage_alt:"",loginButton_ariaAnnouncement:"",stylizerTextPrompt_buttonAriaLabel:"",restyleDropdown_allLabel:"",restyleDropdown_backgroundOnlyLabel:"",restyleDropdown_foregroundOnlyLabel:"",restyleDropdown_ariaLabel:"",creativitySlider_calloutHeaderText:"",creativitySlider_calloutMainText:"",creativitySlider_calloutButtonAriaLabel:"",creativitySlider_label:"",downloadModel_title:"",downloadModel_description:"",downloadModel_button:"",downloadModel_buttonAriaLabel:"",downloadModel_imageAlt:"",initializeModel_title:"",initializeModel_description:"",initializeModel_imageAlt:"",stylizer_modelFailureDescription:"",stylizer_modelFailureImageAlt:"",stylizer_modelFailureTitle:"",foregroundDisabledAlert_title:"",foregroundDisabledAlert_description:"",faceDetectionTeachingTip_title:"",faceDetectionTeachingTip_mainText:"",faceDetectionTeachingTip_LearnMoreLinkText:"",faceDetectionTeachingTip_DismissLinkText:"",contentWarning_title:"",contentWarning_description:"",stylizer_titleBarTeachingTipTitle:"",stylizer_titleBarTeachingTipDescription:"",stylizer_titleBarTeachingTipButtonText:"",stylizer_msaSignedInReminderWithLearnMoreLink:"",stylizer_genericErrorTitle:"",stylizer_genericErrorDescription:"",stylizer_harmfulInputTitle:"",stylizer_harmfulInputDescription:"",stylizer_harmfulOutputTitle:"",stylizer_harmfulOutputDescription:"",stylizer_notificationDismissButtonAriaLabel:"",stylizer_presetsNameFantasy:"",stylizer_presetsNameAnime:"",stylizer_presetsNameCyberpunk:"",stylizer_presetsNameSurrealism:"",stylizer_presetsNameImpressionist:"",stylizer_presetsNameRenaissance:"",stylizer_presetsNameWatercolor:"",stylizer_presetsNamePapercraft:"",stylizer_presetsNamePixelArt:"",stylizer_presetsPromptFantasy:"",stylizer_presetsPromptAnime:"",stylizer_presetsPromptSurrealism:"",stylizer_presetsPromptImpressionist:"",stylizer_presetsPromptCyberpunk:"",stylizer_presetsPromptRenaissance:"",stylizer_presetsPromptWatercolor:"",stylizer_presetsPromptPapercraft:"",stylizer_presetsPromptPixelArt:"",stylizer_presetPromptProcessing:"",stylizer_presetPromptProcessed:"",stylizer_presetsChangedAriaLive:"",stylizer_presetsTileAriaLabel:"",stylizer_presetsTileAriaLabelWhenNoneSelected:"",stylizer_presetsActiveTileAriaLabel:"",stylizer_presetsGroupAriaLabel:"",notification_dismissButtonAriaLabel:"",resize_upscaleSliderAriaLabel:"",resize_upscaleSliderTooltip:"",resize_scaleLabel:"",resize_scaleTeachingTipTitle:"",resize_scaleTeachingTipMainText:"",resize_upscaleSliderResizeFactorLabel:"",resize_upscaleSliderAriaValueText:"",resize_upscaleSlider1xAriaValueText:"",resize_currentImageLabel:"",resize_newImageLabel:"",resize_teachingTipTitle:"",resize_teachingTipMainText:"",resize_teachingTipSendFeedbackLink:"",resize_learnMoreLink:"",resize_applyButton:"",resize_applyButtonAriaLabel:"",resize_cancelButton:"",resize_cancelButtonAriaLabel:"",resize_cancelAriaLive:"",resize_discardButton:"",resize_discardButtonAriaLabel:"",resize_discardAriaLive:"",resize_imageTooBigWarning:"",resize_applyUpscaleConfirmDialogContentTitle:"",resize_applyUpscaleConfirmDialogContentSubText:"",resize_applyUpscaleConfirmDialogCloseButtonAriaLabel:"",resize_applyUpscaleConfirmDialogConfirmText:"",resize_applyUpscaleConfirmDialogConfirmAriaLabel:"",resize_applyUpscaleConfirmDialogCancelText:"",resize_applyUpscaleConfirmDialogCancelAriaLabel:"",resize_notificationUpscaleInProgress:"",resize_notificationUpscaleSuccessfullyCompletedFormatString:"",resize_notificationUpscaleFailed:"",resize_splitterAriaLabel:"",resize_splitterTooltip:"",resize_splitterMovedAriaLive:"",resize_splitterCannotMoveFurtherAriaLive:""},sl=function(e){var a=e.localization,i=e.children,r=(0,t.useMemo)(function(){return(0,y.u)(null!=a?a:{strings:ol,locales:void 0})},[a]);return n().createElement(y.x.Provider,{value:r},i)},cl=I(9270),dl=I(6490),ll=function(){return ll=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ll.apply(this,arguments)},ul=function(e){var a=e.telemetryCallback,i=e.children,r=(0,t.useMemo)(function(){return new dl.r},[]),o=(0,t.useMemo)(function(){return a?ll(ll({},(0,cl.$)(a)),{sessionFrameStats:r}):null},[a,r]);return n().createElement(n().Fragment,null,a&&o?n().createElement(k.b.Provider,{value:o},i):i)},fl=n().memo(function(){var e=(0,t.useContext)(k.b).logErrorEvent;return(0,t.useEffect)(function(){var t=function(t){var n,a,i=t.message,r=t.filename,o=t.lineno,s=t.colno,c=t.error;e({message:i,source:r,lineNumber:o,columnNumber:s,error:{message:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"No message available.",stack:null!==(a=null==c?void 0:c.stack)&&void 0!==a?a:"No stack information available."}})};return window.addEventListener("error",t),function(){return window.removeEventListener("error",t)}},[e]),null}),pl=I(9829),ml=I(5009),_l={imageTransform:{x:0,y:0,width:1,height:1,rotation:0},cropRectangle:{top:0,left:0,width:1,height:1},originalImageSize:{x:1,y:1},aspectRatio:ei.hO,shouldInvertOriginalAspectRatio:!1},hl=function(e,t){if(typeof e!=typeof t)return!1;if("object"==typeof e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!hl(e[n],t[n]))return!1;return!0},bl=function(e,t){var n={isValid:!0};try{var a=e.adjustments,i=e.imageBackground,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["adjustments","imageBackground"]);if(void 0!==r.version&&"number"!=typeof r.version)throw new Error("IEditOperations contains invalid data");!function(e,t){if(!(hl(_l,e)&&t.some(function(t){return(0,pl.v)(t,e.aspectRatio,5)})&&e.originalImageSize.x>=1&&e.originalImageSize.y>=1&&e.imageTransform.height>=1&&e.imageTransform.width>=1&&e.cropRectangle.height>=1&&e.cropRectangle.width>=1))throw new Error("IEditTransformOperations contains invalid data")}(r.transforms,t),a&&function(e){function t(e){return Object.keys(e).filter(function(e){if(!Object.values(W.F).includes(e))throw new Error("adjustmentKey not valid");return!0}).every(function(t){return(n=e[t])>=0&&n<=1;var n})}if(!(hl((0,Rt.MK)(e.adjustmentsByDynamicLayer),e)&&Object.values(ml.A).includes(e.version)&&t(e.baseAdjustments)&&Object.keys(e.adjustmentsByDynamicLayer).every(function(n){var a=e.adjustmentsByDynamicLayer[n];return a&&t(a)})))throw new Error("IColorAdjustmentWithoutLutState contains invalid data")}(a),i&&function(e){var t,n,a;if("ColorRGBABackground"!==e.backgroundType&&"BlurredBackground"!==e.backgroundType&&"TransparentBackground"!==e.backgroundType&&"OriginalBackground"!==e.backgroundType)throw new Error("Invalid BackgroundType");if("ColorRGBABackground"===(null===(t=e.backgroundsByType.ColorRGBABackground)||void 0===t?void 0:t.type))!function(e){if(4!==e.length&&"number"!=typeof e[0]&&"number"!=typeof e[1]&&"number"!=typeof e[2]&&"number"!=typeof e[3])throw new Error("Invalid ColorRGBA value")}(e.backgroundsByType.ColorRGBABackground.color);else{if("BlurredBackground"===(null===(n=e.backgroundsByType.BlurredBackground)||void 0===n?void 0:n.type)&&"number"!=typeof e.backgroundsByType.BlurredBackground.blurLevel)throw new Error("Invalid BlurLevel value");if(void 0!==e.backgroundType&&(null===(a=e.backgroundsByType[e.backgroundType])||void 0===a?void 0:a.type)!==e.backgroundType)throw new Error("Invalid type string in BackgroundsByType")}}(i)}catch(e){n.isValid=!1,n.message=e instanceof Error?e.message:"unknown error"}return n},gl=function(){return gl=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gl.apply(this,arguments)},vl=function(){return vl=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vl.apply(this,arguments)};function yl(e){return e&&"object"==typeof e&&!Array.isArray(e)}function Sl(e,t){var n=vl(vl({},e),t);return yl(e)&&yl(t)&&Object.keys(t).forEach(function(a){var i;if(!(a in e))throw new Error("override object has a key that does not exist in base object: ".concat(a));if(t[a]&&e[a]&&typeof t[a]!=typeof e[a])throw new Error("override object value at key: '".concat(a,"' type does not match base object type at key:'").concat(a,"'"));yl(t[a])?n[a]=Sl(e[a],t[a]):Object.assign(n,((i={})[a]=t[a],i))}),n}var Dl=I(5648),Il=I(784),xl=I(5693),Cl=I(6505),Ol=I(5327),wl=I(3615),El=I(5249),Al=I(3852),Ll=I(3239),kl=I(2953),Ml=I(6981),Pl=I(818),Tl={activeRetouchMode:Pl.I.SpotFix},Ul=(0,yn.X0)({name:"retouch",initialState:Tl,reducers:{setActiveRetouchMode:function(e,t){e.activeRetouchMode=t.payload}}}),Fl=(Ul.actions.setActiveRetouchMode,Ul.reducer),Hl=I(3202),Rl=I(2083),Nl=I(8294),Bl=I(404),jl=function(){return jl=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jl.apply(this,arguments)},Vl=I(358);function zl(e,n,a){var i=(0,t.useRef)(e);return(a?!a(i.current,e):i.current!==e)&&n&&n(i.current,e),i.current}var Gl=["pen1","pen2","highlighter"];function Kl(e){var n=(0,Or.Dj)(),a=zl(e,(0,t.useCallback)(function(){n({id:"InitialInkBrushConfigIgnored",message:"Change to initialMarkupToolsConfigurations prop was ignored. initialMarkupToolsConfigurations is for initial state only. For subsequent changes use the state or reset method"})},[n]));try{!function(e){if(!e.activeInkBrushId)throw new Error("initialInkBrushConfiguration must contain a activeInkBrushId");if(!Gl.includes(e.activeInkBrushId))throw new Error("initialInkBrushConfiguration contains an invalid activeInkBrushId");if(!e.eraser.getIcon)throw new Error("initialInkBrushConfiguration must provide a getIcon callback for the eraser tool");if(!e.clearAllMarkup.getIcon)throw new Error("initialInkBrushConfiguration must provide a getIcon callback for the clear-ink button");e.brushes.forEach(function(e){if(!e.getIcon)throw new Error("initialInkBrushConfiguration must provide a getIcon callback for ".concat(e.inkBrushId))}),Gl.forEach(function(t){if(!e.brushes.find(function(e){return e.inkBrushId===t}))throw new Error("initialInkBrushConfiguration must include configuration for brushId: ".concat(t))})}(e)}catch(e){a=Vl.s,e instanceof Error?n({id:"InitialInkBrushConfigIgnored",message:e.message}):n({id:"InitialInkBrushConfigIgnored",message:"Change to initialMarkupToolsConfigurations prop was ignored. initialMarkupToolsConfigurations is invalid"})}return a}var Wl=I(1946),ql=function(){return ql=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ql.apply(this,arguments)},Ql=n().memo(function(e){var a=e.serializedState,i=e.defaultEdits,r=e.initialEdits,o=e.initialUiState,s=e.aspectRatiosList,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["serializedState","defaultEdits","initialEdits","initialUiState","aspectRatiosList"]),d=(0,t.useContext)(k.b),l=(0,t.useContext)(go.B_).markupToolsConfigurations,u=(0,Or.Dj)(),f=Kl(l),p=(0,t.useRef)(i).current,m=function(e,t,n){if(n){var a=bl(n,t),i=a.isValid,r=a.message;if(i)return n;e({id:"InitialEditsIgnored",message:"ValidationError: ".concat(r)})}}(u,null!=s?s:ei.oV,r);if((null==i?void 0:i.initialFocalPointUvPosition)&&(0,Wl.r)(i.initialFocalPointUvPosition,{left:0,right:1,top:0,bottom:1}))throw new Error("The initialFocalPointUvPosition in defaultEdits is out of range (x and y must be in the range [0,1]).");var _=(0,t.useMemo)(function(){return function(e,t,n,a,i,r,o){var s=e?JSON.parse(decodeURI(e)):{},c={colorAdjustments:v.FT,transformTools:Re.T7,uiState:Ce.eI,ariaAnnouncement:J.rb,filters:$r,focalPoint:kl.JN,autoEnhance:_o,markup:Yt.Pq,texturePatch:xl.Ev,spotFixUi:Ol.fn,brushCursor:Wc.U8,inPaintingUi:wl.gB,maskBrushOptions:El.vQ,maskingUi:Kc.jQ,imageBackground:Al.gG,relight:Rl.ro,retouch:Fl,texturePatchAlgorithmUI:Nl.rm,dynamicLayers:Bl.l7,imageWasReplaced:An,resize:Od},d={transformTools:Sl(function(e){var t=wt.GZ;return e?jl(jl({},wt.GZ),{cropInteraction:jl(jl({},wt.GZ.cropInteraction),{aspectRatiosList:e})}):t}(r),s.transformTools),colorAdjustments:Sl(Rt.$O,s.colorAdjustments),uiState:Sl(Ce.xp,s.uiState),ariaAnnouncement:Sl(ze.T,s.ariaAnnouncement),filters:Sl(Vt,s.filters),focalPoint:Sl(Ml.G,s.focalPoint),autoEnhance:Sl(Ut,s.autoEnhance),markup:Sl(Yt.$0,s.markup),texturePatch:Sl(Cl.E,s.texturePatch),imageBackground:Sl(Ll.I,s.imageBackground),relight:Sl(Hl.j,s.relight),retouch:Sl(Tl,s.retouch),imageWasReplaced:Sl(Cn,s.imageWasReplaced),resize:Sl(vn,s.resize)},l=(0,yn.W1)({reducer:c,preloadedState:d,middleware:function(e){return e().concat(o||[])}});if(t&&(l.dispatch((0,Re._k)(t)),l.dispatch((0,kl.yy)(t))),n&&l.dispatch((0,Ne.x2)(n)),i){var u={};i.brushes.forEach(function(e){u[e.inkBrushId]=Il.M[e.inkBrushId]}),l.dispatch((0,Ce._j)(u)),l.dispatch((0,Ce.O)(i.activeInkBrushId)),l.dispatch((0,Ce.ek)((0,Dl.w)(u[i.activeInkBrushId].inkType)))}return a&&l.dispatch((0,Ce.QP)(a)),l}(a,p,m,o,f,s,[(e=d,function(t){return function(t){return function(n){return t(gl(gl({},n),{telemetry:e}))}}})]);var e},[a,p,m,o,f,s,d]);return(0,t.useEffect)(function(){i&&_.dispatch((0,Re._k)(i))},[_,i]),function(e,n){(0,t.useEffect)(function(){n&&e.dispatch((0,Ce.Ax)(n))},[e,n])}(_,null==o?void 0:o.activeEditorActivity),n().createElement(g.Fq,ql({},c,{store:_}))});Ql.displayName="ImageEditorProvider";var Yl=new Set([xa.SaveAs,xa.SaveAsOriginal,xa.CopyToClipboard]),Jl=new Set([xa.SaveAs,xa.CopyToClipboard]),Xl=new Set([]),Zl=function(e,t,n,a){return a?Xl:n?t?Yl:Jl:Xl},$l=(0,X.Rz)([de.Qi,de.NC,de.H1],function(e,t,n){return n&&!!e&&(0,ot.CN)(e,t)}),eu=n().memo(function(e){var t,a=e.editsAreSameAsDefaults,i=e.editsCouldModifyImage,r=e.isFullSizeInputImageAvailable,o=e.isExportBlockingOperationInProgress,s=e.onDecideEnabledSaveTypes,c=e.children,d=(t=(s||Zl)(a,i,r,o),new Set(Array.from(t)));return n().createElement(Aa.Provider,{value:d},c)}),tu=(0,g.Ng)(function(e,t){var n=Zn(e),a=kn(e),i=$l(e),r=function(e){return"loading"===e.resize.resizedImageLoadingStatus}(e);return{editsAreSameAsDefaults:n,editsCouldModifyImage:a,isFullSizeInputImageAvailable:i,isExportBlockingOperationInProgress:r}})(eu),nu={tileAriaRole:"option",tileListAriaRole:"listbox"},au=(0,t.createContext)(nu),iu=function(e){var t=e.ariaConfig,a=void 0===t?nu:t,i=e.children,r=a.tileAriaRole,o=a.tileListAriaRole;return n().createElement(au.Provider,{value:{tileAriaRole:r,tileListAriaRole:o}},i)},ru=I(529),ou=I(753),su=I(6918),cu=(0,X.Rz)([su.N],function(e){return!function(e,t){return e.some(function(e){return(0,Jt.n)(e.algorithmParameters.layerToPatch,"main")})}(e)}),du=I(3082),lu=I(6366),uu=I(7123),fu=I(1200),pu=(0,t.memo)(function(e){var a=function(e){var n=e.selectedUvPositions,a=e.clearSelectedUvPositions,i=e.algorithmParameters,r=e.requestTexturePatch,o=e.imageUvToView,s=e.imageSizeInPixels,c=e.canCreateTexturePatchRequest,d=(0,t.useState)(!1),l=d[0],u=d[1],f=(0,uu.L)(),p=(0,fu.Y)();(0,t.useEffect)(function(){var e=!!i&&f.canExecuteAlgorithm(i);u(c&&e)},[i,c,f]);var m=(0,t.useCallback)(function(e,t,c){if(!l||!i)throw new Error("Unable to invoke in painting action");var d=(0,lu.Z)(e.maskType)({imageId:p,selectedUvPositions:n,algorithmParameters:i,maskParameters:e,imageUvToView:o,imageSizeInPixels:s});if(!d)throw new Error("Error creating texturePatchRequest for in painting action");return null==c||c(),d.undoRedoGroupId=t,r(d),a(),d},[i,l,a,s,o,r,n,p]),_=(0,t.useCallback)(function(e,t,i,d){var l=!!t&&f.canExecuteAlgorithm(t);if(!c||!l)throw new Error("Unable to invoke in painting action");var u=(0,lu.Z)(e.maskType)({imageId:p,selectedUvPositions:n,algorithmParameters:t,maskParameters:e,imageUvToView:o,imageSizeInPixels:s});if(!u)throw new Error("Error creating texturePatchRequest for in painting action");return u.undoRedoGroupId=i,null==d||d(),r(u),a(),u},[c,f,a,s,o,r,n,p]);return{invokeInPaintingAction:l?m:void 0,invokeInPaintingActionWithAlgorithmParameters:_}}(e);return n().createElement(du.n.Provider,{value:a},e.children)}),mu={requestTexturePatch:Ne.k6,clearSelectedUvPositions:Kc.cI,removeTexturePatchesFromLayer:xl.Pm,setMaskParameters:Kc.S8},_u=(0,g.Ng)(function(e){return{algorithmParameters:(0,vc.Y)(e),selectedUvPositions:(0,ic.qv)(e),imageUvToView:(0,ou.c)(e),imageSizeInPixels:(0,ru.E)(e),canCreateTexturePatchRequest:cu(e)}},mu)(pu),hu=I(7112),bu=function(){function e(){this._listeners=[]}return e.prototype.addListener=function(e){this._listeners.push(e)},e.prototype.removeListener=function(e){this._listeners=this._listeners.filter(function(t){return t!==e})},e.prototype.notifyListeners=function(e){return t=this,void 0,a=function(){var t,n;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(a){switch(a.label){case 0:t=0,n=this._listeners,a.label=1;case 1:return t<n.length?[4,(0,n[t])(e)]:[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())});var t,n,a},e}(),gu=function(e){var a=this,i=e.children,r=(0,t.useState)(new bu)[0],o=(0,t.useCallback)(function(e){r.addListener(e)},[r]),s=(0,t.useCallback)(function(e){r.removeListener(e)},[r]),c=(0,t.useCallback)(function(e){return t=a,void 0,i=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){switch(t.label){case 0:return[4,r.notifyListeners(e)];case 1:return t.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function o(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((i=i.apply(t,[])).next())});var t,n,i},[r]);return n().createElement(La.Provider,{value:{registerSaveEvent:o,unregisterSaveEvent:s,notifyPreSaveListeners:c}},i)},vu=I(8662),yu=I(4975),Su="requestResizedImageStart",Du={setResizedImageLoadingStatus:Id,setResizeImageRequestId:Cd},Iu=(0,g.Ng)(function(e){var t=(0,de.fX)(e);return{resizedImageLoadingStatus:e.resize.resizedImageLoadingStatus,canvasPixelSize:t,resizeImageRequestId:e.resize.resizeImageRequestId}},Du)(function(e){var a=e.onRequestResizedImage,i=e.onAcceptResizedImage,r=e.onCancelResizeOperation,o=e.setResizedImageLoadingStatus,c=e.resizedImageLoadingStatus,d=e.resizeImageRequestId,l=e.setResizeImageRequestId,u=e.canvasPixelSize,f=e.resizePivotTeachingTipState,p=e.onResizePivotTeachingTipDismissed,m=e.setResizePivotTeachingTipState,_=e.children,h=(0,t.useContext)(k.b).logSuperResolutionCompleteEvent,b=(0,t.useState)(null),g=b[0],v=b[1],y=(0,t.useState)(0),S=y[0],D=y[1],I=(0,t.useCallback)(function(e){D(e)},[]),x=(0,t.useCallback)(function(){D(u.x/2)},[D,u]);"none"===c&&null!==g&&v(null);var C=(0,t.useMemo)(function(){return{image:g?g.image:null,status:c,resizeFactor:g?g.resizeFactor:1}},[g,c]),O=(0,t.useRef)();O.current=d;var w=(0,t.useCallback)(function(e,t,n){if(O.current===e){if("loaded"===t.status&&(null===t.image||null===t.image.main))throw new Error("setResizedImage called with loaded status, but image is null");o(t.status),v(t.image?{image:t.image,resizeFactor:t.resizeFactor}:null),function(e,t,n){var a=performance.getEntriesByName(Su);if(a.length>0){var i=performance.now()-a[a.length-1].startTime;switch("loaded"===e.status?t({timeConsumedInMs:i,result:1}):"error"===e.status&&t({timeConsumedInMs:i,result:0,errorCode:n}),e.status){case"loaded":case"error":case"none":performance.clearMarks(Su);break;case"loading":case"preparing":break;default:throw new s.x(e.status)}}}(t,h,n)}},[o,h]),E=(0,t.useCallback)(function(e){if(a){performance.mark(Su);var t=(0,yu.b)();l(t),w(t,{image:null,status:"loading"},void 0),a(t,e,w)}else console.error("requestResizedImage called, but onRequestResizedImage is not defined")},[a,w,l]),A=(0,t.useCallback)(function(){l(void 0),o("none"),v(null)},[l,o]),L=(0,t.useCallback)(function(){r&&d&&(r(d),A())},[r,A,d]),M=(0,t.useCallback)(function(){if(null===g||null===g.image||null===g.image.main)throw new Error("acceptResizedImage called, but image is null");if(!i)throw new Error("acceptResizedImage called, but onAcceptResizedImage is not defined");i(g.image,g.resizeFactor),A()},[g,i,A]),P=(0,t.useCallback)(function(){A()},[A]);return n().createElement(qc.Provider,{value:{resizedImageWithStatus:C,revealPosViewSpace:S,setResizedImage:w,requestResizedImage:E,cancelResizeOperation:L,acceptResizedImage:M,rejectResizedImage:P,centerSplitter:x,setSplitterPosViewSpace:I,resizePivotTeachingTipState:f||"notShown",onResizePivotTeachingTipDismissed:p||function(){},setResizePivotTeachingTipState:m||function(){}}},_)}),xu=function(e){var a=e.children,i=(0,t.useState)(new Map)[0],r=(0,t.useCallback)(function(e){var t=i.get(e);if(void 0===t)throw new Error("Image with id ".concat(e," not found"));return t},[i]),o=(0,t.useCallback)(function(e,t){i.set(e,t)},[i]),s=(0,t.useCallback)(function(e){return i.has(e)},[i]),c=(0,t.useCallback)(function(){i.clear()},[i]),d=(0,t.useCallback)(function(e){Array.from(i.keys()).forEach(function(t){t!==e&&i.delete(t)})},[i]);return n().createElement(oa.Provider,{value:{addOrReplaceImage:o,getImage:r,hasImage:s,clearImageCache:c,clearImageCacheExceptId:d}},a)};function Cu(){return"image"+(0,yu.b)()}var Ou=function(){return Ou=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ou.apply(this,arguments)},wu=function(){return wu=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wu.apply(this,arguments)},Eu={replaceImage:Ne.gP,setImageIdInCache:En,resetEdits:Ne.Cj,setSessionFullImageSize:Re.Bm},Au=(0,g.Ng)(function(e){return{imageIdInCache:e.imageWasReplaced.imageIdInCache}},Eu)(function(e){var a=e.image,i=e.imageIdInCache,r=e.sessionFullImageSize,o=e.replaceImage,s=e.resetEdits,c=e.setSessionFullImageSize,d=e.setImageIdInCache,l=e.children,u=(0,t.useState)(null),f=u[0],p=u[1];!function(e,n,a){(0,t.useEffect)(function(){e&&(a(e),n({shouldAnimate:!1,fullImageSize:e}))},[e,n,a])}(r,s,c);var m=function(e,a,i,r,o){var s=(0,t.useContext)(oa),c=s.addOrReplaceImage,d=s.getImage,l=s.hasImage,u=(0,t.useMemo)(function(){return Ou({},e)},[e]),f=(0,t.useReducer)(function(e){return e+1},0)[1],p=(0,t.useCallback)(function(e,t){c(e,t),f()},[c]);!function(e,a,i,r,o){var s=n().useRef(a);s.current=a,(0,t.useEffect)(function(){if(e){var t=(0,Rr.YG)(e);if(t){var n=s.current?s.current:Cu();r(n,e),o({imageIdInCache:n,imageKind:e.sourceImageKind,fullImageSize:i||{x:t.width,y:t.height}})}}},[r,e,o,i])}(u,a,i,p,r);var m=function(e,a,i,r,o){var s=a&&o(a)?r(a):e,c=n().useRef(s);return c.current=s,[s,(0,t.useCallback)(function(e){if(null!==a)if("object"==typeof e)i(a,e);else{var t=e(c.current);i(a,t)}else"object"==typeof e?Object.assign(c.current,e):(t=e(c.current),Object.assign(c.current,t))},[i,a])]}(u,a,p,d,l),_=m[0],h=m[1],b=function(e,n,a){var i=(0,t.useContext)(q.u).experimental_enableResizeUndoRedo;return(0,t.useCallback)(function(t,r){if(i){var o=(0,Rr.YG)(t);if(!o)throw new Error("Image should not be null");var s=Cu();e(s,t),n({imageIdInCache:s,undoGroupId:(0,yu.b)(),newImagePixelSize:{x:o.width,y:o.height},telemetry:r})}else a(t)},[e,i,n,a])}(p,o,h);return[_,h,b]}(a,i,r,d,o),_=m[0],h=m[1],b=m[2],g=(0,t.useCallback)(function(e,t){h(function(n){var a;if(!(0,Rr.l_)(n)&&!t)return n;if((0,Rr.l_)(n)){var i=n[e];if(!i&&!t||t&&i&&(0,Rr.r9)(i)===(0,Rr.r9)(t))return n}return wu(wu({},n),((a={})[e]=t,a))})},[h]);return n().createElement($n.Z.Provider,{value:{image:_,isExpectingThumbnailThenFullImage:void 0!==r,setImage:b,setImageLayer:g,offscreenRenderer:f,setOffscreenRenderer:p}},l)});function Lu(e){return null!==e&&void 0!==e.main}var ku=I(2187),Mu=function(){return Mu=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mu.apply(this,arguments)};function Pu(e,t){return e&&t?(0,ot.CN)(e,t):e===t}var Tu=function(e){var a=e.onLinkClicked,i=e.children,r=(0,t.useCallback)(function(e){if(!a)throw new Error("Must provide onLinkClicked function in ImageEditor");a(e)},[a]);return n().createElement(Gd.G.Provider,{value:{onLinkClicked:r}},i)},Uu=n().memo(function(e){var a=e.image,i=e.localization,r=e.telemetryCallback,o=e.serializedState,s=e.onComponentError,c=e.defaultEdits,d=e.initialEdits,l=e.initialUiState,u=e.children,f=e.onDecideEnabledSaveTypes,p=e.sessionFullImageSize,m=e.onResetEditsConfirmationDialog,_=e.ariaConfig,h=e.aspectRatiosDisplayedInOrder,b=e.texturePatchAlgorithmsByRole,g=e.onRequestResizedImage,v=e.onAcceptResizedImage,y=e.onCancelResizeOperation,S=e.onLinkClicked,D=function(e,n){return zl(e,(0,t.useCallback)(function(e,t){n({id:"SessionFullImageSizeIgnored",message:"Change to sessionFullImageSize prop was ignored. sessionFullImageSize is for initial state only. Old value: (".concat(null==e?void 0:e.x,", ").concat(null==e?void 0:e.y,"), New value: (").concat(null==t?void 0:t.x,", ").concat(null==t?void 0:t.y,")")})},[n]),Pu)}(p,s),I=!!D,x=(0,t.useMemo)(function(){return function(e,t){if(!e)return Mu(Mu({},(0,ku.W)()),{sourceImageKind:"NoImage"});if(Lu(e)){if("NoImage"===e.sourceImageKind&&e.main)throw new Error("Image kind should not be NoImage when an image exists");if("Thumbnail"===e.sourceImageKind&&!t)throw new Error("Session full image size must be defined when image kind is Thumbnail");if(!e.main&&"NoImage"!==e.sourceImageKind)throw new Error("Image kind should be NoImage when no image exists");return e}if(t)throw new Error("sessionFullImageSize exists but received ImageEditorSingleImage instead of a ImageEditorLayerGroupWithImageKind. If you expect to use thumbnail then a full image, you must pass in a ImageEditorLayerGroupWithImageKind");return Mu(Mu({},(0,ku.W)()),{main:e,sourceImageKind:"FullSize"})}(a,I)},[I,a]),C=zl(d,(0,t.useCallback)(function(){s({id:"InitialEditsIgnored",message:"Change to initialEdits prop was ignored. initialEdits is for initial state only. For subsequent changes use the setEdits method, or the reset method"})},[s])),O=zl(l,(0,t.useCallback)(function(){s({id:"InitialUiStateIgnored",message:"Change to initialUiState prop was ignored. initialUiState is for initial state only. For subsequent changes use the setUiState method"})},[s])),w=(0,t.useContext)(q.u),E=w.experimental_enableInPaintingDevUi,A=w.enableBackground,L=w.experimental_enableStylizer,k=A||E||L;return n().createElement(Or.PH,{onError:s},n().createElement(ul,{telemetryCallback:r},n().createElement(sl,{localization:i},n().createElement(Ql,{serializedState:o,defaultEdits:c,initialEdits:C,initialUiState:O,aspectRatiosList:h},n().createElement(iu,{ariaConfig:_},n().createElement(gu,null,n().createElement(ra,{onResetEditsConfirmationDialog:m},n().createElement(tu,{onDecideEnabledSaveTypes:f},n().createElement(vu.K,null,n().createElement(hu.t,{texturePatchAlgorithmsByRole:b},n().createElement(Tu,{onLinkClicked:S},n().createElement(Iu,{onRequestResizedImage:g,onAcceptResizedImage:v,onCancelResizeOperation:y},n().createElement(xu,null,n().createElement(Au,{image:x,sessionFullImageSize:D},k?n().createElement(_u,null,u):n().createElement(n().Fragment,null,u),n().createElement(rl,null))))))))))))),n().createElement(fl,null)))});function Fu(e,t){return void 0===t&&(t=18),n().createElement("svg",{viewBox:"0 0 ".concat(t," ").concat(t)},n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:Hu(e,t)}))}function Hu(e,t){var n=e>1,a=n?t:t*e,i=n?t/e:t,r={left:(t-a)/2,top:(t-i)/2,width:a,height:i};return Ru({left:r.left+1.5,top:r.top+1.5,width:a-3,height:i-3},1.5)+Ru(r,3)}function Ru(e,t){var n=e.left,a=e.top+t,i=t,r=.5*t,o=e.width-2*t,s=e.height-2*t;return"M".concat(n," ").concat(a,"v").concat(s,"c0 ").concat(r," ").concat(r," ").concat(i," ").concat(i," ").concat(i,"h").concat(o,"c").concat(r," 0 ").concat(i," -").concat(r," ").concat(i," -").concat(i,"v-").concat(s,"c0 -").concat(r," -").concat(r," -").concat(i," -").concat(i," -").concat(i,"h-").concat(o,"c-").concat(r," 0 -").concat(i," ").concat(r," -").concat(i," ").concat(i,"z")}Uu.displayName="ImageEditorContext";var Nu=Fu(.5),Bu=Fu(2),ju=Fu(5/7),Vu=Fu(1.4),zu=Fu(2/3),Gu=Fu(1.5),Ku=Fu(3/4),Wu=Fu(4/3),qu=Fu(.8),Qu=Fu(5/4),Yu=Fu(9/16),Ju=Fu(16/9),Xu=Fu(1),Zu=n().createElement("svg",{viewBox:"0 0 20 20"},n().createElement("path",{d:"M19.2502 11C19.6298 11 19.9436 11.2822 19.9933 11.6482L20.0002 11.75V16.75C20.0002 18.483 18.6437 19.8992 16.9346 19.9949L16.7502 20L12.0823 20.0002C12.6186 19.6147 13.0556 19.0997 13.3475 18.5011L16.7502 18.5C17.6683 18.5 18.4213 17.7929 18.4944 16.8935L18.5002 16.75V11.75C18.5002 11.3358 18.8359 11 19.2502 11ZM9.75015 7C11.5451 7 13.0002 8.45507 13.0002 10.25V16.75C13.0002 18.5449 11.5451 20 9.75015 20H3.25015C1.45523 20 0.0001508 18.5449 0.0001508 16.75V10.25C0.0001508 8.45507 1.45523 7 3.25015 7H9.75015ZM5.71776 15.3534L5.61627 15.4445L2.66355 18.3993C2.84693 18.4645 3.04439 18.5 3.25015 18.5H9.75015C9.95591 18.5 10.1534 18.4645 10.3368 18.3993L7.38403 15.4445C6.96097 15.0215 6.31009 14.9651 5.82627 15.2753L5.71776 15.3534ZM9.75015 8.5H3.25015C2.28365 8.5 1.50015 9.2835 1.50015 10.25V16.75C1.50015 16.9558 1.53566 17.1532 1.60089 17.3366L4.55561 14.3839C5.5848 13.3547 7.22681 13.3118 8.30707 14.2552L8.44469 14.3839L11.3994 17.3366C11.4646 17.1532 11.5002 16.9558 11.5002 16.75V10.25C11.5002 9.2835 10.7166 8.5 9.75015 8.5ZM9.00015 10C9.55243 10 10.0002 10.4477 10.0002 11C10.0002 11.5523 9.55243 12 9.00015 12C8.44787 12 8.00015 11.5523 8.00015 11C8.00015 10.4477 8.44787 10 9.00015 10ZM16.7502 0C18.4832 0 19.8994 1.35645 19.995 3.06558L20.0002 3.25V8.25C20.0002 8.66421 19.6644 9 19.2502 9C18.8705 9 18.5567 8.71785 18.507 8.35177L18.5002 8.25V3.25C18.5002 2.33183 17.793 1.57881 16.8937 1.5058L16.7502 1.5H11.7502C11.3359 1.5 11.0002 1.16421 11.0002 0.75C11.0002 0.370304 11.2823 0.0565091 11.6484 0.00684667L11.7502 0H16.7502ZM8.25015 0C8.66436 0 9.00015 0.335786 9.00015 0.75C9.00015 1.1297 8.718 1.44349 8.35192 1.49315L8.25015 1.5H3.25015C2.33198 1.5 1.57896 2.20711 1.50595 3.10647L1.50015 3.25L1.50011 6.65214C0.901018 6.94409 0.385711 7.38126 0 7.91785L0.0001508 3.25C0.0001508 1.51697 1.35661 0.100754 3.06573 0.00514483L3.25015 0H8.25015Z"})),$u=n().createElement("svg",{viewBox:"0 0 18 18"},n().createElement("path",{d:"M14.75 0C16.5449 0 18 1.45507 18 3.25V14.75C18 16.5449 16.5449 18 14.75 18H3.25C1.45507 18 0 16.5449 0 14.75V3.25C0 1.45507 1.45507 0 3.25 0H14.75ZM15.3305 16.4014L9.52467 10.7148C9.25962 10.4553 8.85013 10.4316 8.55879 10.644L8.4752 10.7148L2.66845 16.4011C2.8504 16.4651 3.04613 16.5 3.25 16.5H14.75C14.9535 16.5 15.1489 16.4653 15.3305 16.4014L9.52467 10.7148L15.3305 16.4014ZM14.75 1.5H3.25C2.2835 1.5 1.5 2.2835 1.5 3.25V14.75C1.5 14.9584 1.53643 15.1583 1.60326 15.3437L7.42578 9.64299C8.25887 8.82729 9.56746 8.7885 10.4458 9.52658L10.5742 9.64312L16.3964 15.3447C16.4634 15.159 16.5 14.9588 16.5 14.75V3.25C16.5 2.2835 15.7165 1.5 14.75 1.5ZM12.2521 3.5C13.4959 3.5 14.5042 4.50831 14.5042 5.75212C14.5042 6.99592 13.4959 8.00423 12.2521 8.00423C11.0083 8.00423 10 6.99592 10 5.75212C10 4.50831 11.0083 3.5 12.2521 3.5ZM12.2521 5C11.8367 5 11.5 5.33673 11.5 5.75212C11.5 6.1675 11.8367 6.50423 12.2521 6.50423C12.6675 6.50423 13.0042 6.1675 13.0042 5.75212C13.0042 5.33673 12.6675 5 12.2521 5Z"})),ef=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M7.99685 13.7862C8.2423 13.7862 8.4465 13.9629 8.4888 14.1958L8.4969 14.2856V15.5005C8.4969 15.7764 8.273 16 7.99685 16C7.75139 16 7.54724 15.8234 7.50491 15.5903L7.49685 15.5005V14.2856C7.49685 14.0098 7.72071 13.7862 7.99685 13.7862ZM12.7337 12.0179L12.803 12.0756L13.663 12.9348C13.8582 13.1298 13.8582 13.446 13.663 13.6411C13.4894 13.8144 13.22 13.8337 13.0251 13.6989L12.9559 13.6411L12.0958 12.782C11.9006 12.587 11.9006 12.2707 12.0958 12.0756C12.2694 11.9023 12.5388 11.883 12.7337 12.0179ZM3.89746 12.0756C4.07103 12.249 4.09031 12.5181 3.95532 12.7128L3.89746 12.782L3.03745 13.6411C2.84219 13.8361 2.5256 13.8361 2.33034 13.6411C2.15678 13.4677 2.13749 13.1986 2.27249 13.0039L2.33034 12.9348L3.19035 12.0756C3.38562 11.8806 3.7022 11.8806 3.89746 12.0756ZM8.0072 3.51284C10.4866 3.51284 12.4965 5.52061 12.4965 7.99731C12.4965 10.4741 10.4866 12.4818 8.0072 12.4818C5.52781 12.4818 3.51787 10.4741 3.51787 7.99731C3.51787 5.52061 5.52781 3.51284 8.0072 3.51284ZM15.4999 7.51538C15.776 7.51538 15.9999 7.739 15.9999 8.01483C15.9999 8.26007 15.823 8.46395 15.5898 8.5063L15.4999 8.51429H14.2836C14.0075 8.51429 13.7836 8.29073 13.7836 8.01483C13.7836 7.76965 13.9605 7.56572 14.1938 7.52343L14.2836 7.51538H15.4999ZM1.71624 7.49206C1.99238 7.49206 2.21624 7.71567 2.21624 7.99151C2.21624 8.23669 2.03936 8.44067 1.80612 8.48293L1.71624 8.49102H0.5C0.22386 8.49102 0 8.26736 0 7.99151C0 7.74631 0.17688 7.54239 0.41012 7.5001L0.5 7.49206H1.71624ZM2.9682 2.30115L3.03745 2.35893L3.89746 3.21803C4.09272 3.41307 4.09272 3.72931 3.89746 3.92436C3.72389 4.09774 3.45447 4.117 3.2596 3.98216L3.19035 3.92436L2.33034 3.06528C2.13508 2.87023 2.13508 2.55399 2.33034 2.35893C2.50391 2.18556 2.77333 2.16629 2.9682 2.30115ZM13.663 2.35893C13.8365 2.53232 13.8558 2.80146 13.7208 2.99611L13.663 3.06528L12.803 3.92436C12.6077 4.11941 12.2911 4.11941 12.0958 3.92436C11.9223 3.75099 11.903 3.48185 12.038 3.28719L12.0958 3.21803L12.9559 2.35893C13.1511 2.16388 13.4677 2.16388 13.663 2.35893ZM8.0001 0C8.2456 0 8.4498 0.176689 8.4921 0.409688L8.5001 0.499461V1.71439C8.5001 1.99023 8.2763 2.21385 8.0001 2.21385C7.75468 2.21385 7.55054 2.03717 7.5082 1.80417L7.50014 1.71439V0.499461C7.50014 0.223619 7.724 0 8.0001 0Z"})),tf=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M15.2353 0.76375C14.2155 -0.254592 12.5621 -0.254582 11.5424 0.76377L10.5071 1.79773L10.1574 1.44848C9.57382 0.865754 8.62779 0.865754 8.04425 1.44848L7.4607 2.0312C6.87718 2.61393 6.87717 3.55871 7.4607 4.14144L7.81043 4.49069L1.48156 10.8109C1.20135 11.0907 1.04392 11.4703 1.04392 11.8661V12.3649L0.0831169 14.6114C-0.271229 15.4399 0.571603 16.2745 1.3982 15.9136L3.63826 14.9357H4.11779C4.51407 14.9357 4.89413 14.7785 5.17435 14.4986L11.5032 8.17842L11.8552 8.52998C12.4387 9.11262 13.3847 9.11262 13.9683 8.52998L14.5518 7.94721C15.1354 7.36448 15.1354 6.41969 14.5518 5.83697L14.1999 5.48547L15.2353 4.45148C16.2549 3.43314 16.2549 1.78209 15.2353 0.76375ZM8.51483 5.19411L10.7989 7.47503L4.46997 13.7952C4.37657 13.8885 4.24989 13.941 4.11779 13.941H3.53415C3.46549 13.941 3.39756 13.9551 3.33465 13.9825L0.999194 15.0021L2.00003 12.6621C2.02644 12.6003 2.04006 12.5338 2.04006 12.4667V11.8661C2.04006 11.7341 2.09253 11.6076 2.18594 11.5143L8.51483 5.19411Z"})),nf=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M9.9462 0.239097C11.3059 0.578692 12.5937 1.28004 13.6569 2.34315C16.781 5.46734 16.781 10.5327 13.6569 13.6569C10.5327 16.7811 5.46734 16.7811 2.34314 13.6569C-0.781049 10.5327 -0.781048 5.46734 2.34315 2.34315C3.98115 0.705139 6.15275 -0.074067 8.29843 0.00553347C8.39082 0.00896099 8.48317 0.0139849 8.57543 0.0205977C9.03652 0.0536426 9.49532 0.126492 9.9462 0.239097ZM12.9497 12.9498C15.6834 10.2161 15.6834 5.78393 12.9497 3.05026C12.6157 2.71617 12.2562 2.42292 11.8776 2.17049L12.3536 2.64645C12.5488 2.84171 12.5488 3.15829 12.3536 3.35356C12.1583 3.54882 11.8417 3.54882 11.6464 3.35355L9.44226 1.14937C8.87302 1.03008 8.29181 0.982245 7.71296 1.00585L9.35355 2.64645C9.54881 2.84171 9.54881 3.15829 9.35355 3.35355C9.15829 3.54882 8.84171 3.54882 8.64645 3.35355L6.46284 1.16994C6.05435 1.26147 5.65247 1.38997 5.26255 1.55544L7.35355 3.64645C7.54882 3.84171 7.54882 4.15829 7.35355 4.35356C7.15829 4.54882 6.84171 4.54882 6.64645 4.35355L4.33014 2.03725C4.01204 2.2334 3.70624 2.45737 3.41621 2.70915L5.35354 4.64645C5.54881 4.84171 5.54881 5.15829 5.35355 5.35355C5.15829 5.54882 4.84171 5.54882 4.64644 5.35356L2.70911 3.41626C2.45734 3.70627 2.23338 4.01206 2.03725 4.33014L4.35355 6.64645C4.54882 6.84171 4.54882 7.15829 4.35355 7.35356C4.15829 7.54882 3.84171 7.54882 3.64645 7.35356L1.55544 5.26255C1.38997 5.65247 1.26147 6.05435 1.16994 6.46284L3.35355 8.64645C3.54882 8.84171 3.54882 9.15829 3.35355 9.35356C3.15829 9.54882 2.84171 9.54882 2.64645 9.35356L1.00585 7.71296C0.982241 8.29181 1.03008 8.87302 1.14936 9.44226L3.35355 11.6464C3.54882 11.8417 3.54882 12.1583 3.35355 12.3536C3.15829 12.5488 2.84171 12.5488 2.64645 12.3536L2.17048 11.8776C2.42291 12.2562 2.71617 12.6157 3.05025 12.9498C5.78392 15.6834 10.2161 15.6834 12.9497 12.9498Z"})),af=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M9.5001 10.0001C9.2239 10.0001 9.0001 10.224 9.0001 10.5001C9.0001 10.7762 9.2239 11.0001 9.5001 11.0001H12.5001C12.7762 11.0001 13.0001 10.7762 13.0001 10.5001C13.0001 10.224 12.7762 10.0001 12.5001 10.0001H9.5001ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM8 15C6.247 15 4.6445 14.3556 3.41645 13.2908L13.2908 3.41645C14.3556 4.6445 15 6.247 15 8C15 11.866 11.866 15 8 15ZM3.50003 5.00005C3.50003 4.7239 3.72389 4.50004 4.00004 4.50004H5.00005V3.50003C5.00005 3.22389 5.22391 3.00003 5.50005 3.00003C5.7762 3.00003 6.00006 3.22389 6.00006 3.50003V4.50004H7.00006C7.27621 4.50004 7.50007 4.7239 7.50007 5.00005C7.50007 5.27619 7.27621 5.50005 7.00006 5.50005H6.00006V6.50006C6.00006 6.7762 5.7762 7.00006 5.50005 7.00006C5.22391 7.00006 5.00005 6.7762 5.00005 6.50006V5.50005H4.00004C3.72389 5.50005 3.50003 5.27619 3.50003 5.00005Z"})),rf=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M16 8C16 3.58172 12.4183 -1.56562e-07 8 -3.49691e-07C3.5817 -5.42821e-07 -1.56562e-07 3.58172 -3.49691e-07 8C-5.42821e-07 12.4183 3.5817 16 8 16C12.4183 16 16 12.4183 16 8ZM15 8C15 11.6979 12.1326 14.726 8.5 14.9824L8.5 1.01758C12.1326 1.27396 15 4.30212 15 8Z"})),of=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M7.64645 0.146453C7.84171 -0.0488175 8.1583 -0.0488175 8.3536 0.146453C8.8853 0.678212 10.1584 2.20981 11.2998 4.04882C12.4297 5.86917 13.5 8.0985 13.5 10C13.5 11.8438 12.972 13.3521 11.9905 14.4037C11.0058 15.4587 9.6148 16 8 16C6.38524 16 4.99415 15.4587 4.00947 14.4037C3.02801 13.3521 2.5 11.8438 2.5 10C2.5 8.0985 3.5703 5.86917 4.70018 4.04882C5.84163 2.20981 7.11469 0.678212 7.64645 0.146453Z"})),sf=n().createElement("svg",{viewBox:"0 0 20 20"},n().createElement("path",{d:"M2.5 0C1.11929 0 0 1.11929 0 2.5V17.5C0 18.8807 1.11929 20 2.5 20H17.5C18.8807 20 20 18.8807 20 17.5V2.5C20 1.11929 18.8807 0 17.5 0H2.5ZM10 18.5C5.30558 18.5 1.5 14.6944 1.5 10C1.5 5.30558 5.30558 1.5 10 1.5C14.6944 1.5 18.5 5.30558 18.5 10C18.5 14.6944 14.6944 18.5 10 18.5Z"})),cf=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M2.34315 2.34315C5.46734 -0.781049 10.5327 -0.781049 13.6569 2.34315C14.72 3.40625 15.4213 4.69413 15.7609 6.0538L13.3536 3.64645C13.1583 3.45118 12.8417 3.45118 12.6464 3.64645C12.4512 3.84171 12.4512 4.15829 12.6464 4.35355L15.9945 7.70157C16.0131 8.20286 15.9848 8.70555 15.9096 9.20253L13.3536 6.64645C13.1583 6.45118 12.8417 6.45118 12.6464 6.64645C12.4512 6.84171 12.4512 7.15829 12.6464 7.35355L15.6474 10.3545C15.5283 10.7423 15.3791 11.123 15.1997 11.4926L12.3536 8.64645C12.1583 8.45119 11.8417 8.45119 11.6464 8.64645C11.4512 8.84171 11.4512 9.15829 11.6464 9.35355L14.6871 12.3942C14.4819 12.7056 14.2528 13.0059 13.9996 13.2924L11.3536 10.6464C11.1583 10.4512 10.8417 10.4512 10.6465 10.6465C10.4512 10.8417 10.4512 11.1583 10.6465 11.3536L13.2925 13.9995C13.006 14.2527 12.7057 14.4819 12.3942 14.6871L9.35355 11.6464C9.15829 11.4512 8.84171 11.4512 8.64645 11.6464C8.45118 11.8417 8.45118 12.1583 8.64645 12.3536L11.4926 15.1997C11.123 15.3791 10.7424 15.5283 10.3545 15.6474L7.35355 12.6464C7.15829 12.4512 6.84171 12.4512 6.64645 12.6464C6.45118 12.8417 6.45118 13.1583 6.64645 13.3536L9.20253 15.9096C8.70555 15.9848 8.20286 16.0131 7.70157 15.9945L4.35355 12.6464C4.15829 12.4512 3.84171 12.4512 3.64645 12.6464C3.45118 12.8417 3.45118 13.1583 3.64645 13.3536L6.0538 15.7609C4.69413 15.4213 3.40625 14.72 2.34315 13.6569C-0.781049 10.5327 -0.781049 5.46734 2.34315 2.34315Z"})),df=n().createElement("svg",{viewBox:"0 0 16 16"},n().createElement("path",{d:"M8.5 5C8.5 4.72386 8.2761 4.5 8 4.5C7.72386 4.5 7.5 4.72386 7.5 5V10.063C6.63739 10.285 6 11.0681 6 12C6 13.1046 6.89543 14 8 14C9.1046 14 10 13.1046 10 12C10 11.0681 9.3626 10.285 8.5 10.063V5Z"}),n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 3C5 1.34315 6.34315 0 8 0C9.6569 0 11 1.34315 11 3L10.9999 9.3541C11.6219 10.0589 12 10.9857 12 12C12 14.2091 10.2091 16 8 16C5.79086 16 4 14.2091 4 12C4 10.9857 4.37808 10.0589 5.00008 9.3541L5 3ZM10 3C10 1.89543 9.1046 1 8 1C6.89543 1 6 1.89543 6 3L6.00008 9.7546L5.85719 9.9004C5.32642 10.442 5 11.1824 5 12C5 13.6568 6.34315 15 8 15C9.6569 15 11 13.6568 11 12C11 11.1824 10.6736 10.442 10.1428 9.9004L9.9999 9.7546L10 3Z"})),lf=n().createElement("svg",{viewBox:"0 0 17 17"},n().createElement("path",{d:"M0.772726 15.197C0.500211 15.197 0.247849 15.0534 0.108562 14.8192C-0.0307244 14.585 -0.0363398 14.2947 0.0937875 14.0552L6.53315 2.2068C6.70191 1.89625 7.05994 1.73979 7.40252 1.82687C7.74499 1.91395 7.98485 2.22234 7.98485 2.57578V14.4243C7.98485 14.851 7.63887 15.197 7.21212 15.197H0.772726Z"}),n().createElement("path",{d:"M16.8914 14.8192C16.7521 15.0534 16.4998 15.197 16.2273 15.197H9.78786C9.36111 15.197 9.01514 14.851 9.01514 14.4243V2.57578C9.01514 2.22234 9.25499 1.91395 9.59746 1.82687C9.94004 1.73979 10.2981 1.89625 10.4668 2.2068L16.9062 14.0552C17.0364 14.2947 17.0307 14.585 16.8914 14.8192ZM10.5606 5.61584V13.6516H14.9278L10.5606 5.61584Z"})),uf=n().createElement("svg",{viewBox:"0 0 17 17"},n().createElement("path",{d:"M14.8192 0.108562C15.0534 0.247849 15.197 0.500211 15.197 0.772726V7.21212C15.197 7.63887 14.851 7.98485 14.4243 7.98485H2.57578C2.22234 7.98485 1.91395 7.74499 1.82687 7.40252C1.73979 7.05994 1.89625 6.70191 2.2068 6.53315L14.0552 0.0937875C14.2947 -0.0363398 14.585 -0.0307244 14.8192 0.108562ZM5.61584 6.43939H13.6516V2.07217L5.61584 6.43939Z"}),n().createElement("path",{d:"M15.197 16.2273C15.197 16.4998 15.0534 16.7521 14.8192 16.8914C14.585 17.0307 14.2947 17.0364 14.0552 16.9062L2.2068 10.4668C1.89625 10.2981 1.73979 9.94004 1.82687 9.59746C1.91395 9.25499 2.22234 9.01514 2.57578 9.01514H14.4243C14.851 9.01514 15.197 9.36111 15.197 9.78786V16.2273Z"})),ff=n().createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.38561 17.6144C2.69008 16.4943 0 13.0613 0 9C0 4.02944 4.02944 0 9 0C13.0613 0 16.4943 2.69008 17.6144 6.38561C21.3099 7.5057 24 10.9387 24 15C24 19.9706 19.9706 24 15 24C10.9387 24 7.5057 21.3099 6.38561 17.6144ZM6.04394 15.895C6.01488 15.6006 6 15.302 6 15C6 10.0294 10.0294 6 15 6C15.302 6 15.6006 6.01488 15.895 6.04394C14.7478 3.37164 12.0925 1.5 9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 12.0925 3.37164 14.7478 6.04394 15.895ZM17.9561 8.10504C17.9571 8.11555 17.9581 8.12606 17.9591 8.13658C17.9862 8.42074 18 8.70876 18 9C18 13.9706 13.9706 18 9 18C8.69798 18 8.39942 17.9851 8.10504 17.9561C9.25223 20.6284 11.9075 22.5 15 22.5C19.1421 22.5 22.5 19.1421 22.5 15C22.5 11.9075 20.6284 9.25223 17.9561 8.10504Z"})),pf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M345 1792q-69 0-131-28t-110-75-76-110-28-132V601q0-69 28-131t75-110 110-76 132-28h1358q69 0 131 28t110 75 76 110 28 132v846q0 69-28 131t-75 110-110 76-132 28H345zm1351-128q46 0 87-17t71-48 48-72 18-87V608q0-46-17-87t-48-71-72-48-87-18H352q-46 0-87 17t-71 48-48 72-18 87v832q0 46 17 87t48 71 72 48 87 18h1344zM512 808q-15 8-31 16t-33 8q-26 0-45-19t-19-45q0-17 9-33t26-24l128-64q14-7 29-7 27 0 45 18t19 46v640q0 26-19 45t-45 19q-26 0-45-19t-19-45V808zm896 0q-15 8-31 16t-33 8q-26 0-45-19t-19-45q0-17 9-33t26-24l128-64q14-7 29-7 27 0 45 18t19 46v640q0 26-19 45t-45 19q-26 0-45-19t-19-45V808zm-512 24q0-26 19-45t45-19q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45zm0 384q0-26 19-45t45-19q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45z"})),mf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M251 1792q-50 0-95-20t-80-55-55-80-21-96V507q0-50 20-95t55-80 80-55 96-21h1546q50 0 95 20t80 55 55 80 21 96v1034q0 50-20 95t-55 80-80 55-96 21H251zm1541-128q27 0 50-10t40-27 28-41 10-50V512q0-26-10-49t-27-41-41-28-50-10H256q-27 0-50 10t-40 27-28 41-10 50v1024q0 27 10 50t27 41 40 27 51 10h1536zM256 832V704q0-39 15-74t41-61 62-42 74-15h128q26 0 45 19t19 45q0 26-19 45t-45 19H448q-21 0-34 7t-20 21-9 31-2 37q0 16 1 32t1 32q0 20-2 37t-9 30-20 21-34 8q-26 0-45-19t-19-45zm1152-256q0-26 19-45t45-19h128q39 0 74 15t61 41 42 62 15 74v128q0 26-19 45t-45 19q-26 0-45-19t-19-45V704q0-21-7-34t-21-19-31-9-37-3q-16 0-32 1t-32 1q-20 0-37-2t-30-9-21-20-8-34zm-960 960q-39 0-74-15t-61-41-42-62-15-74v-128q0-26 19-45t45-19q26 0 45 19t19 45v128q0 21 7 34t21 20 31 9 37 2q16 0 32-1t32-1q19 0 36 2t31 9 21 20 8 34q0 26-19 45t-45 19H448zm1024 0q-26 0-45-19t-19-45q0-26 19-45t45-19h128q21 0 34-7t19-21 9-31 3-37q0-16-1-32t-1-32q0-19 2-36t9-31 20-21 34-8q26 0 45 19t19 45v128q0 39-15 74t-41 61-62 42-74 15h-128z"})),_f=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M640 1755L19 1133l90-90 531 530L1939 275l90 90L640 1755z"})),hf=n().createElement("svg",{viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M2.50488 16.2451C2.50488 15.9033 2.62695 15.6104 2.87109 15.3662C3.11523 15.1221 3.4082 15 3.75 15C4.0918 15 4.38477 15.1221 4.62891 15.3662L11.25 21.9873L25.3711 7.86621C25.6152 7.62207 25.9082 7.5 26.25 7.5C26.4258 7.5 26.5869 7.53418 26.7334 7.60254C26.8896 7.66113 27.0215 7.74902 27.1289 7.86621C27.2461 7.97363 27.3389 8.10547 27.4072 8.26172C27.4756 8.4082 27.5098 8.56934 27.5098 8.74512C27.5098 9.08691 27.3828 9.38477 27.1289 9.63867L12.1289 24.6387C11.8848 24.8828 11.5918 25.0049 11.25 25.0049C10.9082 25.0049 10.6152 24.8828 10.3711 24.6387L2.87109 17.1387C2.62695 16.8945 2.50488 16.5967 2.50488 16.2451Z"})),bf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M2048 1088H250l787 787-90 90L6 1024 947 83l90 90-787 787h1798v128z"})),gf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M2042 1024l-941 941-90-90 787-787H0V960h1798l-787-787 90-90 941 941z"})),vf=n().createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M10.7481 1.00122L18.3019 1.00173L18.4021 1.01565L18.5009 1.04325L18.562 1.06918C18.6411 1.10407 18.715 1.1546 18.7799 1.21953L18.8206 1.26357L18.8812 1.34505L18.9183 1.41008L18.957 1.50039L18.9762 1.56452L18.9898 1.62846L18.9991 1.72165L18.9996 9.25511C18.9996 9.66933 18.6638 10.0051 18.2496 10.0051C17.8699 10.0051 17.5561 9.72296 17.5065 9.35688L17.4996 9.25511L17.4991 3.55922L3.55911 17.5042L9.24963 17.5051C9.62933 17.5051 9.94313 17.7873 9.99279 18.1533L9.99963 18.2551C9.99963 18.6348 9.71748 18.9486 9.35141 18.9983L9.24963 19.0051L1.71378 19.0043L1.68479 19.0015C1.61873 18.9969 1.55602 18.983 1.49674 18.9619L1.40661 18.923L1.38942 18.9125C1.18522 18.8021 1.03877 18.5991 1.00535 18.3597L0.998108 18.2551V10.7512C0.998108 10.337 1.33389 10.0012 1.74811 10.0012C2.1278 10.0012 2.4416 10.2834 2.49126 10.6495L2.49811 10.7512V16.4432L16.4381 2.50022L10.7481 2.50122C10.3684 2.50122 10.0546 2.21907 10.005 1.85299L9.99811 1.75122C9.99811 1.37152 10.2803 1.05773 10.6463 1.00807L10.7481 1.00122Z"})),yf=n().createElement("svg",{viewBox:"0 0 14 24",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M6.04545 3.50454V20.4955L1.64659 15.6446C1.2835 15.2442 0.67931 15.2279 0.297105 15.6083C-0.0851011 15.9887 -0.100593 16.6217 0.262502 17.0221L6.30795 23.6887C6.48817 23.8875 6.73835 24 7 24C7.26165 24 7.51183 23.8875 7.69204 23.6887L13.7375 17.0221C14.1006 16.6217 14.0851 15.9887 13.7029 15.6083C13.3207 15.2279 12.7165 15.2442 12.3534 15.6446L7.95454 20.4955V3.50454L12.3534 8.35542C12.7165 8.75582 13.3207 8.77205 13.7029 8.39167C14.0851 8.01128 14.1006 7.37832 13.7375 6.97792L7.69346 0.31281C7.51947 0.120177 7.27313 0 7 0C6.72687 0 6.48053 0.120177 6.30654 0.31281L0.262502 6.97792C-0.100593 7.37832 -0.0851011 8.01128 0.297105 8.39167C0.67931 8.77205 1.2835 8.75582 1.64659 8.35542L6.04545 3.50454Z"})),Sf=n().createElement("svg",{viewBox:"0 0 8 9",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M4 9C3.72386 9 3.5 8.77614 3.5 8.5L3.5 1.70711L0.853554 4.35355C0.658292 4.54882 0.341709 4.54882 0.146447 4.35355C-0.0488153 4.15829 -0.0488153 3.84171 0.146447 3.64645L3.64645 0.146446C3.84171 -0.0488161 4.15829 -0.0488161 4.35355 0.146446L7.85355 3.64645C8.04882 3.84171 8.04882 4.15829 7.85355 4.35355C7.65829 4.54882 7.34171 4.54882 7.14645 4.35355L4.5 1.70711L4.5 8.5C4.5 8.77614 4.27614 9 4 9Z"})),Df=n().createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"m6.907 6.68 2.734-2.73a6.66 6.66 0 1 1 9.42 9.42l-8.338 8.338a1 1 0 0 1-1.415-1.415l8.339-8.336A4.66 4.66 0 0 0 11.229 5.2l-.174.166-3.641 3.633H12a1 1 0 0 1 .993.884L13 10a1 1 0 0 1-.883.993l-.117.006-7.06-.001-.095-.01-.112-.024-.131-.047-.082-.04-.102-.064a.996.996 0 0 1-.125-.107l-.092-.105-.074-.114-.046-.093-.038-.105-.016-.058-.016-.081-.007-.062L4 10V3.002a1 1 0 0 1 1.993-.116L6 3.002v4.584l3.641-3.635L6.907 6.68Z"})),If=n().createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M18 7.586 14.36 3.951a6.66 6.66 0 1 0-9.42 9.42l8.339 8.337a1 1 0 0 0 1.414-1.415l-8.339-8.336A4.66 4.66 0 0 1 12.771 5.2l.174.166 3.64 3.633H12a1 1 0 0 0-.993.884L11 10a1 1 0 0 0 .883.993l.117.006h7a1 1 0 0 0 .993-.883L20 10V3.002a1 1 0 0 0-1.993-.116L18 3.002v4.584L14.36 3.951 18 7.586Z"})),xf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M960 640q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19zm0 512q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19zM704 896q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19zm256 0q26 0 45 19t19 45q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19zm320 64q0 26-19 45t-45 19q-26 0-45-19t-19-45q0-26 19-45t45-19q26 0 45 19t19 45zm640 512q0 93-35 174t-96 142-142 96-175 36q-89 0-171-34t-146-97l-195-195-195 195q-63 63-145 97t-172 34q-93 0-174-35t-143-96-96-142-35-175q0-90 34-172t97-145l195-195-195-195q-63-63-97-145T0 448q0-93 35-174t96-142 142-96T448 0q89 0 171 34t146 97l195 195 195-195q63-63 145-97t172-34q93 0 174 35t143 96 96 142 35 175q0 90-34 172t-97 145l-195 195 195 195q63 63 97 145t34 172zM1050 417l453 453 195-196q46-47 70-103t24-123q0-66-25-124t-68-102-102-69-125-25q-66 0-122 24t-104 70l-196 195zM417 870l453-453-196-195q-47-46-103-70t-123-24q-66 0-124 25t-102 68-69 102-25 125q0 66 24 122t70 104l195 196zm453 633l-453-453-195 196q-46 47-70 103t-24 123q0 66 25 124t68 102 102 69 125 25q66 0 122-24t104-70l196-195zM507 960l453 453 453-453-453-453-453 453zm1285 512q0-66-24-122t-70-104l-195-196-453 453 196 195q47 46 103 70t123 24q66 0 124-25t102-68 69-102 25-125z"})),Cf=n().createElement("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M192 64h6l389 35q50 5 120 11t154 16 175 21 185 25 184 30 169 34 145 37 107 42q17 9 34 20t30 25 22 32 8 39q0 29-14 52t-38 40q-34 26-98 48t-143 42-166 36-169 28-151 22-112 15q-55 7-124 16t-142 20-140 27-120 35l-2 1q39 14 91 26t112 23 121 18 123 16 116 12 98 9q38 3 93 9t118 14 129 19 127 26 109 31 80 37q23 16 39 37t16 50q0 29-16 51t-39 37q-28 19-74 34t-103 29-117 23-119 19-108 14-83 10q-59 7-129 16t-143 23-140 32-124 42l-20 10q-14 7-30 16t-26 19-12 20q0 5 4 12t10 14 11 13 9 9q27 26 71 52t94 49 99 41 85 30l337 104q20 6 33 23t13 39q0 26-19 44t-45 19q-7 0-33-7t-62-18-77-24-79-25-67-21-41-13q-34-10-82-27t-101-41-103-53-92-64-66-73-26-83q0-43 25-78t68-65 99-51 118-39 125-29 121-20 105-14 76-9q59-7 124-14t131-18 130-24 120-34q-61-22-131-37t-142-27-144-18-137-14q-42-3-106-9t-139-15-154-21-150-27-129-33-90-41q-22-15-36-36t-15-49q0-32 18-54t44-38q30-18 78-34t105-29 119-24 121-21 110-15 86-12q80-10 181-23t205-31 202-42 172-58l-5-2q-61-28-154-52t-202-44-228-38-231-30-210-23-168-16l-389-35q-25-2-41-21t-17-43q0-27 19-45t45-19z"})),Of=n().createElement("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M1728 1152q-26 0-45 19t-19 45v613l-147-146q-19-19-45-19t-45 19-19 45q0 26 19 45l256 256q19 19 45 19t45-19l256-256q19-19 19-45t-19-45-45-19q-26 0-45 19l-147 146v-613q0-26-19-45t-45-19zM192 64h6l389 35q50 5 120 11t154 16 175 21 185 25 184 30 169 34 145 37 107 42q17 9 34 20t30 25 22 32 8 39q0 29-14 52t-38 40q-34 26-97 48t-143 42-166 36-170 28-151 22-112 15q-55 7-124 16t-142 20-140 27-120 35l-2 1q48 17 99 27t102 20q105 18 210 30t211 22 211 23 210 32q58 11 117 25t113 38q-23-6-46-6-46 0-87 20t-69 59q-105-20-209-35t-212-24q-43-4-107-10t-138-15-154-20-150-27-129-33-90-41q-22-14-36-36t-15-49q0-32 18-54t44-38q31-18 79-34t105-29 118-24 120-21 110-15 87-12q80-10 181-23t205-31 202-42 172-58l-5-2q-61-28-153-52t-202-44-228-38-231-30-211-23-168-16l-389-35q-25-2-41-21t-17-43q0-27 19-45t45-19zm1344 1248q-81 14-161 24t-161 21q-30 4-81 10t-114 17-128 23-125 31-104 38-65 46l-4 6q-2 3-3 7 0 5 4 12t10 14 11 13 9 9q27 26 71 52t94 49 99 41 85 30l337 104q20 6 33 23t13 39q0 26-19 44t-45 19q-7 0-33-7t-62-18-77-24-79-25-67-21-41-13q-35-11-83-28t-100-41-103-53-93-63-66-74-25-82q0-58 44-102t113-76 155-55 167-36 151-23 107-13q85-10 169-21t170-28q-6 32-5 65t2 66z"})),wf=n().createElement("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M192 64h6l389 35q49 5 119 11t154 16 176 21 186 26 184 29 169 34 144 37 107 42q17 9 34 20t30 25 22 31 8 40q0 29-14 52t-38 40q-34 26-97 48t-143 42-166 36-170 28-151 22-112 15q-55 7-124 16t-142 20-140 27-120 35l-2 1q48 17 99 27t102 20q94 17 189 28t191 20 190 20 191 25l-113 113q-54-7-135-15t-175-17-193-22-188-28-162-38-114-48q-21-14-36-36t-15-49q0-32 18-54t44-38q31-18 79-34t105-29 118-24 120-21 110-15 87-12q80-10 181-23t205-31 202-42 172-58l-5-2q-60-28-152-52t-202-44-228-38-231-30-212-23-168-16l-389-35q-25-2-41-21t-17-43q0-27 19-45t45-19zm1088 1156q2 70 48 123-36 5-98 12t-135 18-152 24-148 32-122 42-76 51l-4 6q-2 3-3 7 0 5 4 12t10 14 11 13 9 9q27 26 71 52t94 49 99 41 85 30l337 104q20 6 33 23t13 39q0 26-19 44t-45 19q-7 0-33-7t-62-18-77-24-79-25-67-21-41-13q-34-10-82-27t-101-41-103-53-92-64-66-73-26-83q0-47 28-84t77-67 111-52 133-39 139-28 134-20 114-14 81-11zm448-324q26 0 45 19l256 256q19 19 19 45t-19 45-45 19q-26 0-45-19l-147-146v714l147-146q19-19 45-19t45 19 19 45q0 26-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19q26 0 45 19l147 146v-714l-147 146q-19 19-45 19t-45-19-19-45q0-26 19-45l256-256q19-19 45-19z"})),Ef=n().createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M0.5 14.3242C0.364583 14.3242 0.247396 14.2747 0.148438 14.1758C0.0494792 14.0768 0 13.9596 0 13.8242C0 13.6888 0.0494792 13.5716 0.148438 13.4727C0.247396 13.3737 0.364583 13.3242 0.5 13.3242H4.24219C4.38281 13.3242 4.51302 13.2982 4.63281 13.2461C4.7526 13.194 4.85677 13.1237 4.94531 13.0352C5.03385 12.9466 5.10677 12.8398 5.16406 12.7148C5.22135 12.5898 5.2474 12.457 5.24219 12.3164C5.24219 12.0768 5.16146 11.8633 5 11.6758L3.24219 9.62891C3.08594 9.44661 2.96615 9.24609 2.88281 9.02734C2.79948 8.80859 2.75781 8.57682 2.75781 8.33203C2.75781 8.1862 2.77344 8.04297 2.80469 7.90234C2.83594 7.76172 2.88281 7.6237 2.94531 7.48828C3.11198 7.12891 3.35677 6.84505 3.67969 6.63672C4.0026 6.42839 4.36198 6.32422 4.75781 6.32422H8.69531C8.83594 6.32422 8.96615 6.29818 9.08594 6.24609C9.20573 6.19401 9.3125 6.1237 9.40625 6.03516C9.5 5.94661 9.57292 5.83984 9.625 5.71484C9.67708 5.58984 9.70312 5.45964 9.70312 5.32422C9.70312 5.17839 9.66927 5.03255 9.60156 4.88672C9.53385 4.74089 9.44792 4.59505 9.34375 4.44922C9.23958 4.30339 9.1276 4.14974 9.00781 3.98828C8.88802 3.82682 8.77604 3.66016 8.67188 3.48828C8.56771 3.31641 8.48177 3.13411 8.41406 2.94141C8.34635 2.7487 8.3099 2.54297 8.30469 2.32422C8.30469 2.04297 8.35677 1.78255 8.46094 1.54297C8.5651 1.30339 8.70573 1.09245 8.88281 0.910156C9.0599 0.727865 9.27083 0.584635 9.51562 0.480469C9.76042 0.376302 10.0234 0.324219 10.3047 0.324219H13C13.1354 0.324219 13.2526 0.373698 13.3516 0.472656C13.4505 0.571615 13.5 0.688802 13.5 0.824219C13.5 0.959635 13.4505 1.07682 13.3516 1.17578C13.2526 1.27474 13.1354 1.32422 13 1.32422H10.3047C10.1693 1.32422 10.0417 1.35026 9.92188 1.40234C9.80208 1.45443 9.69531 1.52474 9.60156 1.61328C9.50781 1.70182 9.4349 1.80859 9.38281 1.93359C9.33073 2.05859 9.30208 2.1888 9.29688 2.32422C9.29688 2.47005 9.33073 2.61589 9.39844 2.76172C9.46615 2.90755 9.55469 3.05599 9.66406 3.20703C9.77344 3.35807 9.88542 3.51172 10 3.66797C10.1146 3.82422 10.2266 3.99089 10.3359 4.16797C10.4453 4.34505 10.5312 4.52734 10.5938 4.71484C10.6562 4.90234 10.6927 5.10547 10.7031 5.32422C10.7031 5.65755 10.6224 5.97266 10.4609 6.26953C10.2839 6.59766 10.0391 6.85547 9.72656 7.04297C9.41406 7.23047 9.07031 7.32422 8.69531 7.32422H4.75781C4.61719 7.32422 4.48698 7.35026 4.36719 7.40234C4.2474 7.45443 4.14323 7.52474 4.05469 7.61328C3.96615 7.70182 3.89323 7.80859 3.83594 7.93359C3.77865 8.05859 3.7526 8.1888 3.75781 8.32422C3.75781 8.56901 3.83854 8.78516 4 8.97266L5.75781 11.0195C5.91406 11.2018 6.03385 11.4023 6.11719 11.6211C6.20052 11.8398 6.24219 12.0716 6.24219 12.3164C6.24219 12.5924 6.1901 12.8529 6.08594 13.0977C5.98177 13.3424 5.84115 13.556 5.66406 13.7383C5.48698 13.9206 5.27604 14.0638 5.03125 14.168C4.78646 14.2721 4.52344 14.3242 4.24219 14.3242H0.5Z"})),Af=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M0 1024q0-142 36-273t103-244 160-207 207-160T751 37t273-37q131 0 256 32t240 96h-496q-124 0-238 32t-214 90-181 140-140 181-91 214-32 239q0 124 32 238t90 214 140 181 181 140 214 91 239 32v-128h677q-141 125-314 190t-363 66q-142 0-273-36t-245-103-207-160-159-207-103-245-37-273zm1024-640V256h677q34 29 64 61t58 67h-799zm0 256V512h887q18 31 33 63t30 65h-950zm0 256V768h992q8 32 14 64t10 64H1024zm0 256v-128h1024q0 32-2 64t-6 64H1024zm0 256v-128h992q-9 32-19 64t-23 64h-950zm0 256v-128h887q-20 34-41 66t-47 62h-799z"})),Lf=n().createElement("svg",{viewBox:"0 0 20 16",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M3.99988 12.938V15.059L3.05851 16H0.938512L3.99988 12.938ZM20.0015 10.435V12.557L16.5595 16H15.9935L15.9939 14.443L20.0015 10.435ZM6.74988 10H13.2446C14.1628 10 14.9158 10.7071 14.9888 11.6065L14.9946 11.75V16H13.4946V11.75C13.4946 11.6317 13.4124 11.5325 13.3019 11.5066L13.2446 11.5H6.74988C6.63154 11.5 6.5324 11.5822 6.50648 11.6927L6.49988 11.75V16H4.99988V11.75C4.99988 10.8318 5.70699 10.0788 6.60636 10.0058L6.74988 10ZM6.02118 6.41576C6.08088 6.99451 6.26398 7.53665 6.54372 8.01544L-0.000488281 14.56V12.438L6.02118 6.41576ZM20.0015 5.932V8.055L15.9939 12.065L15.9946 11.75L15.9896 11.5825C15.9623 11.128 15.8246 10.7033 15.6029 10.3348L20.0015 5.932ZM10.0565 0L-0.000488281 10.06V7.939L7.93551 0H10.0565ZM20.0015 1.432V3.555L14.3346 9.22449C14.0672 9.10893 13.7779 9.03459 13.4746 9.00948L13.2446 9L12.6456 9.00052C12.9874 8.69891 13.2772 8.33982 13.4999 7.93837L20.0015 1.432ZM9.99988 3.00046C11.6567 3.00046 12.9999 4.34361 12.9999 6.00046C12.9999 7.65732 11.6567 9.00046 9.99988 9.00046C8.34303 9.00046 6.99988 7.65732 6.99988 6.00046C6.99988 4.34361 8.34303 3.00046 9.99988 3.00046ZM9.99988 4.50046C9.17146 4.50046 8.49988 5.17203 8.49988 6.00046C8.49988 6.82889 9.17146 7.50046 9.99988 7.50046C10.8283 7.50046 11.4999 6.82889 11.4999 6.00046C11.4999 5.17203 10.8283 4.50046 9.99988 4.50046ZM5.55851 0L-0.000488281 5.56V3.438L3.43751 0H5.55851ZM19.0565 0L13.9091 5.14895C13.7923 4.61022 13.5669 4.11194 13.2571 3.67816L16.9345 0H19.0565ZM14.5585 0L12.0148 2.54427C11.5362 2.26463 10.9942 2.08157 10.4157 2.02181L12.4365 0H14.5585Z"})),kf=n().createElement("svg",{viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M5.65874 1.47732L6.00702 0.406519C6.03616 0.323987 6.0902 0.25252 6.16169 0.201967C6.23319 0.151415 6.31861 0.124268 6.4062 0.124268C6.49378 0.124268 6.57921 0.151415 6.6507 0.201967C6.7222 0.25252 6.77624 0.323987 6.80538 0.406519L7.15365 1.47732C7.25979 1.80058 7.43932 2.09492 7.67821 2.33734C7.91709 2.57975 8.20885 2.76367 8.53068 2.87471L9.6023 3.22272C9.68489 3.25184 9.75642 3.30584 9.80701 3.37728C9.8576 3.44872 9.88477 3.53408 9.88477 3.62159C9.88477 3.70911 9.8576 3.79447 9.80701 3.86591C9.75642 3.93735 9.68489 3.99135 9.6023 4.02047L8.53068 4.36848C8.25557 4.46015 8.00175 4.60491 7.78338 4.794C7.74269 4.82923 7.70323 4.866 7.66509 4.90425C7.46453 5.10542 7.30514 5.34299 7.19511 5.60359C7.17193 5.65849 7.15094 5.71441 7.13222 5.77122L6.78394 6.84202C6.75768 6.91642 6.71118 6.98182 6.6499 7.03102C6.6432 7.0364 6.63632 7.04159 6.62927 7.04657C6.55778 7.09713 6.47235 7.12427 6.38477 7.12427C6.29718 7.12427 6.21176 7.09713 6.14026 7.04657C6.06877 6.99602 6.01473 6.92455 5.98559 6.84202L5.63731 5.77122C5.52901 5.44568 5.34622 5.14986 5.10345 4.90728C4.86069 4.6647 4.56464 4.48205 4.23885 4.37383L3.16723 4.02582C3.08464 3.99671 3.01312 3.94271 2.96253 3.87127C2.91193 3.79983 2.88477 3.71446 2.88477 3.62695C2.88477 3.53943 2.91193 3.45407 2.96253 3.38263C3.01312 3.31119 3.08464 3.25719 3.16723 3.22808L3.18867 3.22272L4.26028 2.87471C4.58608 2.76649 4.88212 2.58384 5.12488 2.34126C5.36765 2.09868 5.55044 1.80286 5.65874 1.47732Z"}),n().createElement("path",{d:"M9.82776 2.23224L10.7894 1.27055C10.9847 1.07532 11.3012 1.07532 11.4964 1.27055L15.7385 5.51259C15.9337 5.70782 15.9337 6.02436 15.7385 6.21959L9.37372 12.5844L6.02828 9.23892C5.96666 9.27271 5.90199 9.30138 5.83488 9.32448L5.8273 9.32709L5.09005 9.56709C5.05458 9.57892 5.02052 9.59435 4.9884 9.61306L8.66671 13.2914L6.98009 14.978C6.78485 15.1732 6.46832 15.1732 6.27308 14.978L2.03105 10.736C1.85979 10.5647 1.83876 10.3001 1.96795 10.1059L1.90497 9.91239C1.88561 9.85368 1.85638 9.79872 1.81856 9.74987L1.81706 9.74794C1.80379 9.7307 1.78889 9.7138 1.77351 9.69841C1.71305 9.63783 1.63947 9.59208 1.55852 9.56466L1.20899 9.45088C0.741246 10.0396 0.779598 10.8985 1.32404 11.443L5.56608 15.685C5.87904 15.998 6.2959 16.1437 6.70563 16.1222H13.3851C13.6612 16.1222 13.885 15.8984 13.885 15.6223C13.885 15.3462 13.6612 15.1223 13.3851 15.1223H8.24975L16.4455 6.9266C17.0312 6.34089 17.0312 5.39128 16.4455 4.80558L12.2035 0.563544C11.6178 -0.0221585 10.6681 -0.0221577 10.0824 0.563545L8.78931 1.85667L9.30583 2.02482H9.3405L9.53769 2.09481C9.63932 2.13089 9.73644 2.17703 9.82776 2.23224Z"}),n().createElement("path",{d:"M1.10184 7.83745L1.86728 7.58887C2.09999 7.51157 2.31145 7.3811 2.48485 7.20783C2.65825 7.03456 2.78882 6.82326 2.86618 6.59073L3.11495 5.82588C3.13576 5.76692 3.17436 5.71588 3.22543 5.67977C3.2765 5.64366 3.33751 5.62427 3.40007 5.62427C3.46263 5.62427 3.52365 5.64366 3.57472 5.67977C3.62579 5.71588 3.66439 5.76692 3.6852 5.82588L3.93397 6.59073C4.00978 6.82163 4.13802 7.03188 4.30865 7.20503C4.47928 7.37819 4.68769 7.50956 4.91756 7.58887L5.683 7.83745C5.742 7.85824 5.79309 7.89682 5.82922 7.94784C5.86536 7.99887 5.88477 8.05985 5.88477 8.12236C5.88477 8.18487 5.86536 8.24584 5.82922 8.29687C5.79309 8.3479 5.742 8.38647 5.683 8.40727L4.91756 8.65584C4.68444 8.73353 4.47272 8.86458 4.29928 9.03854C4.12585 9.21251 3.99551 9.42457 3.91866 9.65781L3.66989 10.4227C3.64908 10.4816 3.61048 10.5327 3.55941 10.5688C3.50834 10.6049 3.44733 10.6243 3.38477 10.6243C3.32221 10.6243 3.26119 10.6049 3.21012 10.5688C3.15905 10.5327 3.12045 10.4816 3.09964 10.4227L2.85087 9.65781C2.77351 9.42528 2.64294 9.21398 2.46954 9.04071C2.29614 8.86744 2.08468 8.73697 1.85197 8.65967L1.08653 8.41109C1.02753 8.3903 0.976445 8.35172 0.940309 8.3007C0.904172 8.24967 0.884766 8.18869 0.884766 8.12618C0.884766 8.06367 0.904172 8.0027 0.940309 7.95167C0.976445 7.90064 1.02753 7.86207 1.08653 7.84127L1.10184 7.83745Z"})),Mf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M285 1536q-33 0-61-13t-50-35-34-51-12-62q0-60 39-105l692-809q32-37 74-57t91-20q99 0 165 77l692 809q39 45 39 105 0 33-12 62t-33 51-50 35-62 13H285z"})),Pf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M128 673q0-33 12-62t33-51 50-35 62-13h1478q33 0 61 13t50 35 34 51 12 62q0 60-39 105l-692 809q-32 37-74 57t-91 20q-49 0-91-20t-74-57L167 778q-39-45-39-105z"})),Tf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M10 768q0-51 19-98t56-83l362-362q29-29 65-47V64q0-26 19-45t45-19q21 0 34 8t20 22 9 31 2 35v29q0 14-1 25 48 2 91 21t78 54l272 271q36 36 55 83t20 98q0 51-19 98t-56 84l-362 362q-36 36-83 55t-98 20q-51 0-98-19t-83-56L85 949q-36-36-55-83t-20-98zm241 1024q-50 0-95-20t-80-55-55-80-21-96v-451l128 128v318q0 27 10 50t27 41 40 27 51 10h1536q27 0 50-10t40-27 28-41 10-50V512q0-26-10-49t-27-41-41-28-50-10l-598-1-128-127h731q50 0 95 20t80 55 55 80 21 96v1034q0 50-20 95t-55 80-80 55-96 21H251zm771-1152q-11-32-32-53L719 315q-33-33-79-36v169q0 26-19 45t-45 19q-26 0-45-19t-19-45V341L213 640h809zm-484 527q25 0 48-9t42-28l362-362H138q0 53 38 91l271 271q37 37 91 37zm486 113q0-33 7-65t20-64 29-61 34-57q20-30 41-59t45-57q8-10 21-15t27-6q13 0 26 5t22 16q23 27 44 56t42 60q18 27 34 56t28 61 20 64 8 66q0 48-15 94t-45 82-71 58-93 22q-51 0-92-22t-71-58-45-82-16-94zm320 0q0-28-9-57t-24-57-31-54-32-49q-15 22-32 48t-31 55-23 57-10 57q0 21 6 43t18 41 30 31 42 13q24 0 42-12t30-31 18-41 6-44z"})),Uf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M960 192V64q0-26 19-45t45-19q26 0 45 19t19 45v128q0 26-19 45t-45 19q-26 0-45-19t-19-45zM512 448q0 26-19 45t-45 19q-26 0-45-19L275 365q-19-19-19-45t19-45 45-19q26 0 45 19l128 128q19 19 19 45zm1216-192q26 0 45 19t19 45q0 26-19 45l-128 128q-19 19-45 19t-45-19-19-45q0-26 19-45l128-128q19-19 45-19zm-192 768v10q0 104-41 195t-112 160-163 107-196 40q-106 0-199-40t-163-109-110-163-40-200q0-106 40-199t109-163 163-110 200-40q106 0 199 40t163 109 110 163 40 200zm-512 384h8q78 0 146-31t120-84 80-122 30-147q0-77-29-146t-81-123-119-84-147-31h-8v768zM192 960q26 0 45 19t19 45q0 26-19 45t-45 19H64q-26 0-45-19t-19-45q0-26 19-45t45-19h128zm1792 0q26 0 45 19t19 45q0 26-19 45t-45 19h-128q-26 0-45-19t-19-45q0-26 19-45t45-19h128zM448 1536q26 0 45 19t19 45q0 26-19 45l-128 128q-19 19-45 19t-45-19-19-45q0-26 19-45l128-128q19-19 45-19zm1344 192q0 26-19 45t-45 19q-26 0-45-19l-128-128q-19-19-19-45t19-45 45-19q26 0 45 19l128 128q19 19 19 45zm-704 128v128q0 26-19 45t-45 19q-26 0-45-19t-19-45v-128q0-26 19-45t45-19q26 0 45 19t19 45z"})),Ff=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M319 640q-21 0-32-22t-22-54-23-66-39-61q-27-27-62-40t-66-23-53-20-22-34q0-22 21-33t53-20 67-23 61-41q26-27 39-62t22-66 21-53 34-22q19 0 29 15t17 38 16 52 25 57 41 52 68 38q3 1 19 6t33 11 32 10 16 5q25 10 25 36 0 23-22 34t-53 21-67 23-60 39q-28 28-41 63t-22 67-21 52-34 21zm1537-384q40 0 75 15t61 41 41 61 15 75v1152q0 40-15 75t-41 61-61 41-75 15H192q-40 0-75-15t-61-41-41-61-15-75V483q31 10 63 19t55 32v1q2 2 6 8t4 8v1049q0 26 19 45t45 19h320v-192q0-40 15-75t41-61 61-41 75-15h640q40 0 75 15t61 41 41 61 15 75v192h320q26 0 45-19t19-45V448q0-26-19-45t-45-19H755q13-29 13-64 0-17-3-33t-10-31h1101zm-448 1216q0-26-19-45t-45-19H704q-26 0-45 19t-19 45v192h768v-192zm-64-640q0 66-25 124t-68 102-102 69-125 25q-66 0-124-25t-102-68-69-102-25-125q0-66 25-124t68-102 102-69 125-25q66 0 124 25t102 68 69 102 25 125zm-512 0q0 40 15 75t41 61 61 41 75 15q40 0 75-15t61-41 41-61 15-75q0-40-15-75t-41-61-61-41-75-15q-40 0-75 15t-61 41-41 61-15 75zM623 938q6 3 10 8t5 13q0 14-13 20t-31 13-40 14-37 24q-15 15-23 36t-14 39-14 32-19 14q-12 0-19-13t-13-31-14-40-24-37q-16-16-37-24t-39-14-32-13-13-20q0-12 13-19t32-13 39-14 36-23q13-13 21-34t16-40 14-34 19-14q11 0 16 9t10 23 10 31 14 34 25 31 42 23q2 1 11 4t20 6 20 6 9 3z"})),Hf=n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},n().createElement("path",{d:"M1920 1544q0 75-30 143t-82 120-120 82-144 31H504q-75 0-143-30t-120-82-82-120-31-144v-520q0-27 10-50t27-40 41-28 50-10h256V640H256q-27 0-50-10t-41-27-27-40-10-51V256q0-27 10-50t27-40 41-28 50-10h256q26 0 49 10t41 27 28 41 10 50v256h256V256q0-27 10-50t27-40 41-28 50-10h520q75 0 143 30t120 82 82 120 31 144v1040zM1792 507q0-50-20-95t-55-80-80-55-96-21h-133v256q0 55-38 91-39 37-90 37h-256v256q0 55-38 91-39 37-90 37H640v256q0 55-38 91-39 37-90 37H256v128q0 51 20 97t54 82 79 56 98 21h1034q50 0 95-20t80-55 55-80 21-96V507zM256 256v256h256V256H256zm1024 0h-256v256h256V256zM896 896V640H640v256h256zm-384 128H256v256h256v-256z"})),Rf=n().createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M6.5 8C6.5 7.86458 6.54948 7.7474 6.64844 7.64844L12.7969 1.5H8C7.86458 1.5 7.7474 1.45052 7.64844 1.35156C7.54948 1.2526 7.5 1.13542 7.5 1C7.5 0.864583 7.54948 0.747396 7.64844 0.648438C7.7474 0.549479 7.86458 0.5 8 0.5H14C14.1354 0.5 14.2526 0.549479 14.3516 0.648438C14.4505 0.747396 14.5 0.864583 14.5 1V7C14.5 7.13542 14.4505 7.2526 14.3516 7.35156C14.2526 7.45052 14.1354 7.5 14 7.5C13.8646 7.5 13.7474 7.45052 13.6484 7.35156C13.5495 7.2526 13.5 7.13542 13.5 7V2.21094L7.35156 8.35156C7.29948 8.39844 7.24479 8.4349 7.1875 8.46094C7.13542 8.48698 7.07292 8.5 7 8.5C6.86458 8.5 6.7474 8.45052 6.64844 8.35156C6.54948 8.2526 6.5 8.13542 6.5 8ZM3.4375 14.5C3.04688 14.5 2.67188 14.4219 2.3125 14.2656C1.95833 14.1042 1.64583 13.8906 1.375 13.625C1.10938 13.3542 0.895833 13.0417 0.734375 12.6875C0.578125 12.3281 0.5 11.9531 0.5 11.5625V4.4375C0.5 4.04688 0.578125 3.67448 0.734375 3.32031C0.895833 2.96094 1.10938 2.64844 1.375 2.38281C1.64583 2.11198 1.95833 1.89844 2.3125 1.74219C2.67188 1.58073 3.04688 1.5 3.4375 1.5H6C6.13542 1.5 6.2526 1.54948 6.35156 1.64844C6.45052 1.7474 6.5 1.86458 6.5 2C6.5 2.13542 6.45052 2.2526 6.35156 2.35156C6.2526 2.45052 6.13542 2.5 6 2.5H3.46094C3.20052 2.5 2.95052 2.55469 2.71094 2.66406C2.47656 2.76823 2.26823 2.91146 2.08594 3.09375C1.90885 3.27083 1.76562 3.47917 1.65625 3.71875C1.55208 3.95312 1.5 4.20052 1.5 4.46094V11.5391C1.5 11.7995 1.55208 12.0495 1.65625 12.2891C1.76562 12.5234 1.90885 12.7318 2.08594 12.9141C2.26823 13.0911 2.47656 13.2344 2.71094 13.3438C2.95052 13.4479 3.20052 13.5 3.46094 13.5H10.5391C10.8099 13.5 11.0625 13.4453 11.2969 13.3359C11.5365 13.2266 11.7448 13.0807 11.9219 12.8984C12.099 12.7161 12.2396 12.5052 12.3438 12.2656C12.4479 12.0208 12.5 11.7656 12.5 11.5V9C12.5 8.86458 12.5495 8.7474 12.6484 8.64844C12.7474 8.54948 12.8646 8.5 13 8.5C13.1354 8.5 13.2526 8.54948 13.3516 8.64844C13.4505 8.7474 13.5 8.86458 13.5 9V11.5625C13.5 11.9531 13.4193 12.3281 13.2578 12.6875C13.1016 13.0417 12.888 13.3542 12.6172 13.625C12.3516 13.8906 12.0391 14.1042 11.6797 14.2656C11.3255 14.4219 10.9531 14.5 10.5625 14.5H3.4375Z"})),Nf=n().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"7.5"}),n().createElement("path",{d:"M6.99805 8V3.99805C6.99805 3.86133 7.02344 3.73242 7.07422 3.61133C7.12891 3.49023 7.20117 3.38477 7.29102 3.29492C7.38477 3.20508 7.49219 3.13477 7.61328 3.08398C7.73438 3.0293 7.86328 3.00195 8 3.00195C8.13672 3.00195 8.26562 3.0293 8.38672 3.08398C8.50781 3.13477 8.61328 3.20508 8.70312 3.29492C8.79688 3.38477 8.86914 3.49023 8.91992 3.61133C8.97461 3.73242 9.00195 3.86133 9.00195 3.99805V8C9.00195 8.13672 8.97461 8.26562 8.91992 8.38672C8.86914 8.50781 8.79688 8.61523 8.70312 8.70898C8.61328 8.79883 8.50781 8.87109 8.38672 8.92578C8.26562 8.97656 8.13672 9.00195 8 9.00195C7.86328 9.00195 7.73438 8.97656 7.61328 8.92578C7.49219 8.87109 7.38477 8.79883 7.29102 8.70898C7.20117 8.61523 7.12891 8.50781 7.07422 8.38672C7.02344 8.26562 6.99805 8.13672 6.99805 8ZM6.75195 12.002C6.75195 11.8301 6.78516 11.668 6.85156 11.5156C6.91797 11.3633 7.00781 11.2305 7.12109 11.1172C7.23438 11.0039 7.36523 10.9141 7.51367 10.8477C7.66602 10.7812 7.82812 10.748 8 10.748C8.17188 10.748 8.33203 10.7812 8.48047 10.8477C8.63281 10.9141 8.76562 11.0039 8.87891 11.1172C8.99219 11.2305 9.08203 11.3633 9.14844 11.5156C9.21484 11.668 9.24805 11.8301 9.24805 12.002C9.24805 12.1738 9.21484 12.3359 9.14844 12.4883C9.08203 12.6367 8.99219 12.7676 8.87891 12.8809C8.76562 12.9941 8.63281 13.084 8.48047 13.1504C8.32812 13.2168 8.16797 13.25 8 13.25C7.82812 13.25 7.66602 13.2168 7.51367 13.1504C7.36523 13.084 7.23438 12.9941 7.12109 12.8809C7.00781 12.7676 6.91797 12.6367 6.85156 12.4883C6.78516 12.3359 6.75195 12.1738 6.75195 12.002Z"})),Bf=I(4187),jf=!1;function Vf(){var e;jf||((0,a.registerIcons)({icons:(e={},e[Bf.Ps]=Nu,e[Bf.sB]=Bu,e[Bf.Tp]=ju,e[Bf.F$]=Vu,e[Bf._f]=zu,e[Bf.KU]=Gu,e[Bf.jj]=Ku,e[Bf.P0]=Wu,e[Bf.rs]=qu,e[Bf.tI]=Qu,e[Bf.Ke]=Yu,e[Bf.Uc]=Ju,e[Bf.F_]=Zu,e[Bf.X2]=$u,e[Bf.vK]=Xu,e["Brightness-Havana"]=ef,e["Highlights-Havana"]=nf,e["Exposure-Havana"]=af,e["Contrast-Havana"]=rf,e["Saturation-Havana"]=tf,e["Shadows-Havana"]=cf,e["Tint-Havana"]=of,e["Vignette-Havana"]=sf,e["Temperature-Havana"]=df,e["FlipHorizontal-Havana"]=lf,e["FlipVertical-Havana"]=uf,e["ImageFilter-Havana"]=ff,e["FitPageRoundedEdge-Havana"]=mf,e["ActualSizeRoundedEdge-Havana"]=pf,e["ActiveFilterCheckmark-Havana"]=_f,e["ActiveBackgroundCheckmark-Havana"]=hf,e["Back-Havana"]=bf,e["Forward-Havana"]=gf,e["ArrowMaximize-Havana"]=vf,e["SmallArrowMaximize-Havana"]=yf,e["SmallSingleArrow-Havana"]=Sf,e["freehandNoArrowIcon-Havana"]=Cf,e["freehandSingleArrowIcon-Havana"]=Of,e["freehandDoubleArrowIcon-Havana"]=wf,e["lineStyleIcon-Havana"]=Ef,e["UndoIcon-Havana"]=Df,e["RedoIcon-Havana"]=If,e["RetouchIcon-Havana"]=xf,e["BlurIcon-Havana"]=Af,e["VideoBackgroundIcon-Havana"]=Lf,e["SparklyEraseIcon-Havana"]=kf,e["CaretSolidUpIcon-Havana"]=Mf,e["CaretSolidDownIcon-Havana"]=Pf,e["ColorIcon-Havana"]=Tf,e["LightIcon-Havana"]=Uf,e["VideoPersonSparkle-Havana"]=Ff,e["ResolutionIcon-Havana"]=Hf,e["DownloadModel-Havana"]=Rf,e["ImportantBadgeIcon-Havana"]=Nf,e)}),jf=!0)}var zf=[Me.I8,Me.lm,Me.Xc,Me.Y4,Me.qO,Me.NF,Me.co,Me.Nr,Me.dp,Me.vs,Me.qQ],Gf={position:"absolute",top:-1,width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden"},Kf=n().memo(function(e){var t=e.message;return n().createElement(n().Fragment,null,n().createElement("div",{role:"status","aria-live":"assertive","aria-atomic":"true",style:Gf},t))}),Wf=n().memo(function(e){var a=e.cropWidth,i=e.cropHeight,r=e.aspectRatio,o=e.cropTopLeftCornerFromImageOrigin,s=e.panViewTopLeftCornerFromCropOrigin,c=e.currentZoom,d=e.ariaAnnouncementScenario,l=e.ariaAnnouncementMessage,u=e.setAriaAnnouncement,f=e.setAriaAnnouncementScenario;return function(e,n,a,i,r,o){var s=$e(a,i,r);(0,t.useEffect)(function(){"CropImageDimension"===(null==o?void 0:o.type)&&(o.cropDimension.width===a&&o.cropDimension.height===i||e(s),n(void 0))},[s,a,i,r,e,n,o])}(u,f,a,i,r,d),function(e,n,a,i){var r=(0,t.useContext)(y.x).strings;(0,t.useEffect)(function(){if("CropImageMove"===(null==i?void 0:i.type)){var t=(0,ot.CN)(a,i.cropTopLeftCornerFromImageOrigin),o=a.x.toString(),s=a.y.toString();e(t?(0,A.J)(r.crop_rectangleCannotMoveInCurrentDirectionAriaLive,o,s):(0,A.J)(r.crop_rectanglePositionAriaLive,o,s)),n(void 0)}},[i,a,e,n,r])}(u,f,o,d),function(e,n,a,i){var r=(0,t.useContext)(y.x).strings;(0,t.useEffect)(function(){if("Zoom"===(null==i?void 0:i.type)){var t=Math.round(100*i.zoom),o=Math.round(100*a);if(t!==o){var s=(0,A.J)(r.editor_zoomPercentAriaLive,o.toString());e(s)}n(void 0)}},[i,a,r,e,n])}(u,f,c,d),function(e,n,a,i){var r=(0,t.useContext)(y.x).strings;(0,t.useEffect)(function(){if("PanView"===(null==i?void 0:i.type)){var t=a.x.toString(),o=a.y.toString();e((0,A.J)(r.nonCrop_panViewPositionAriaLive,t,o)),n(void 0)}},[i,a,e,n,r])}(u,f,s,d),n().createElement(Kf,{message:l})}),qf={setAriaAnnouncement:J.r9,setAriaAnnouncementScenario:J.Ac},Qf=(0,g.Ng)(function(e){var t=e.ariaAnnouncement,n=t.ariaAnnouncementScenario,a=t.ariaAnnouncementMessage,i=(0,dr.M)(e);return{cropWidth:(0,Be.Po)(e),cropHeight:(0,Be.M1)(e),aspectRatio:ue(e),cropTopLeftCornerFromImageOrigin:st(e),currentZoom:(0,at.j)(e),ariaAnnouncementScenario:n,ariaAnnouncementMessage:a,panViewTopLeftCornerFromCropOrigin:i}},qf)(Wf),Yf=function(e){var t=e.enableAdjustments,a=e.experimental_enableSharpness,i=e.enableFilters,r=e.enableAutoEnhance,o=e.enableMarkup,s=e.enabledRetouchModes,c=e.experimental_enableInPaintingDevUi,d=e.enableUndoRedo,l=e.children,u=e.enableMarkupText,f=e.enableBackground,p=e.experimental_enableAIRelighting,m=e.disableWebGL2Support,_=e.experimental_enableStylizer,h=e.experimental_enableStylizerDevUi,b=e.experimental_enableResize,g=e.experimental_enableResizeUndoRedo;return n().createElement(q.u.Provider,{value:{enableAdjustments:!!t,experimental_enableSharpness:!!a,enableFilters:!!i,enableAutoEnhance:!!r,enableMarkup:!!o,enabledRetouchModes:null!=s?s:[],experimental_enableInPaintingDevUi:!!c,enableUndoRedo:!!d,enableMarkupText:!!u,enableBackground:!!f,experimental_enableAIRelighting:!!p,disableWebGL2Support:!!m,experimental_enableStylizer:!!_,experimental_enableStylizerDevUi:!!h,experimental_enableResize:!!b,experimental_enableResizeUndoRedo:!!g}},l)};function Jf(){return I.e(793).then(I.bind(I,793))}var Xf=I(1443),Zf=(0,g.Ng)(function(e){return{activeEditorActivity:e.uiState.activeEditorActivity,activeEditorActivityInputType:e.uiState.activeEditorActivityInputType}})(function(e){var a=e.activeEditorActivity,i=e.activeEditorActivityInputType,r=(0,t.useRef)(a),o=(0,t.useContext)(k.b).logEditorActivityEvent,s=(0,t.useContext)(q.u).enabledRetouchModes;return(0,t.useLayoutEffect)(function(){var e,t=window.requestAnimationFrame(function(){e=setTimeout(function(){var e=(0,Xf.o2)(a);e&&o({editorActivityName:a,previousEditorActivityName:r.current,loadTimeInMs:e,inputType:i}),r.current=a})});return function(){clearTimeout(e),window.cancelAnimationFrame(t)}},[a,i,o,s]),n().createElement(n().Fragment,null)}),$f=I(8492),ep=I(4907);function tp(e){var t=new Set;return e.forEach(function(e){var n;return t.add(null!==(n=e.groupId)&&void 0!==n?n:e.sequence)}),t.size}function np(e){return tp(e.redoStack.concat(e.undoStack))}function ap(e,t){var n=(0,ep.e)(e).sort(function(e,t){return e.sequence-t.sequence}),a=n[n.length-1-(null!=t?t:0)];return{sequence:null==a?void 0:a.sequence,id:null==a?void 0:a.id,sequentialDuplicateAction:null==a?void 0:a.sequentialDuplicateAction,groupId:null==a?void 0:a.groupId}}function ip(e){var t=ap(e),n=t.groupId;return void 0!==n?function(e,t){return(0,ep.e)(e).filter(function(e){return e.groupId===t})}(e,n):[t]}var rp=I(4698),op=I(8638),sp=function(){function e(e,t,n){this.stackOverrideDisableUndo=!1,this.stackOverrideDisableRedo=!1,this.maxStackSize=e,this.undoRedoStacks=[],this.undoRedoDispatcher=t,this.onChange=new op.J,this.onUndo=new op.J,this.onRedo=new op.J,this.logUndoRedoEvent=n,this.stackOverrideDisableUndoSet=new Set,this.stackOverrideDisableRedoSet=new Set}return e.prototype.undoItem=function(e){var t;this.undoRedoDispatcher.undo({timestamp:e.sequence,id:e.id}),this.onUndo.notifyListeners(e.id),null===(t=this.logUndoRedoEvent)||void 0===t||t.call(this,{undoRedoItemId:e.id,actionType:"Undo",currentStackSize:this.totalStackSize(),telemetryId:e.telemetryId})},e.prototype.undo=function(){var e=this;this.canUndo()&&ip(this.undoRedoStacks.map(function(e){return e.undoStack})).sort(function(e,t){return t.sequence-e.sequence}).forEach(function(t){e.undoItem(t)})},e.prototype.canUndo=function(){return!this.stackOverrideDisableUndo&&this.hasUndoItems()},e.prototype.hasUndoItems=function(){return this.undoRedoStacks.some(function(e){return e.undoStack.length>0})},e.prototype.setDisableUndoOverride=function(e){var t=e.disabled,n=e.id;t?this.stackOverrideDisableUndoSet.add(n):this.stackOverrideDisableUndoSet.delete(n),this.stackOverrideDisableUndo=this.stackOverrideDisableUndoSet.size>0,this.onChange.notifyListeners()},e.prototype.setDisableRedoOverride=function(e){var t=e.disabled,n=e.id;t?this.stackOverrideDisableRedoSet.add(n):this.stackOverrideDisableRedoSet.delete(n),this.stackOverrideDisableRedo=this.stackOverrideDisableRedoSet.size>0,this.onChange.notifyListeners()},e.prototype.redoItem=function(e){var t;this.undoRedoDispatcher.redo({timestamp:e.sequence,id:e.id}),this.onRedo.notifyListeners(e.id),null===(t=this.logUndoRedoEvent)||void 0===t||t.call(this,{undoRedoItemId:e.id,actionType:"Redo",currentStackSize:this.totalStackSize(),telemetryId:e.telemetryId})},e.prototype.redo=function(){var e=this;this.canRedo()&&ip(this.undoRedoStacks.map(function(e){return e.redoStack})).sort(function(e,t){return t.sequence-e.sequence}).forEach(function(t){e.redoItem(t)})},e.prototype.canRedo=function(){return!this.stackOverrideDisableRedo&&this.hasRedoItems()},e.prototype.hasRedoItems=function(){return this.undoRedoStacks.some(function(e){return e.redoStack.length>0})},e.prototype.registerOrNotifyStackChanged=function(e){var t=this.getStackIndex(e.id);if(t>=0){var n=np(this.undoRedoStacks[t])<np(e);this.undoRedoStacks[t]=e,n&&this.undoRedoDispatcher.clearRedoStacks()}else this.undoRedoStacks.push(e);this.onChange.notifyListeners();var a=this.undoRedoStacks.map(function(e){return e.undoStack}),i=ap(a),r=ap(a,1),o=this.getDuplicateSequenceRange(i,r);o&&this.undoRedoDispatcher.collapseStackItems(o);var s=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],this.verifyMaxSizeAndGetCleanupSequence(),!0);this.undoRedoDispatcher.removeStackItems(s),function(e){for(var t=e.length-1;t>0;t--)if(e[t].sequence<e[t-1].sequence)throw new Error("The undo redo stack contains sequences that are out of order")}(e.undoStack)},e.prototype.getStackIndex=function(e){return this.undoRedoStacks.findIndex(function(t){return t.id===e})},e.prototype.totalStackSize=function(){return tp((0,ep.e)(this.undoRedoStacks.map(function(e){return e.undoStack.concat(e.redoStack)})))},e.prototype.verifyMaxSizeAndGetCleanupSequence=function(){var e=[];if(this.totalStackSize()>=this.maxStackSize){for(var t=(0,rp.$1)(this.undoRedoStacks[0].undoStack),n=0;n<=this.undoRedoStacks.length-2;n++){var a=(0,rp.$1)(this.undoRedoStacks[n].undoStack),i=(0,rp.$1)(this.undoRedoStacks[n+1].undoStack);t=a&&i?a.sequence<i.sequence?a:i:null!=a?a:i}t&&e.push(t.sequence)}return e},e.prototype.getDuplicateSequenceRange=function(e,t){if(e.sequence&&t.sequence&&e.id===t.id&&e.sequentialDuplicateAction===t.sequentialDuplicateAction)switch(e.sequentialDuplicateAction){case Qr.Z.KeepLast:return{start:t.sequence,end:e.sequence};case Qr.Z.KeepAll:}},e}(),cp={undo:$f.vN,redo:$f.XS,clearRedoStacks:$f.r,removeStackItems:$f.X0,collapseStackItems:$f.QL},dp=(0,g.Ng)(null,cp)(function(e){var a=e.undo,i=e.redo,r=e.clearRedoStacks,o=e.removeStackItems,s=e.collapseStackItems,c=e.children,d=(0,t.useContext)(k.b).logUndoRedoEvent,l=(0,t.useMemo)(function(){return new sp(100,{undo:a,redo:i,clearRedoStacks:r,removeStackItems:o,collapseStackItems:s},d)},[r,s,d,i,o,a]);return n().createElement(Ua.t.Provider,{value:{combinedUndoRedoCoordinator:l}},c)}),lp=function(e){var n=e.undoRedoStack,a=e.disableUndoRedoOverride,i=(0,t.useContext)(Ua.t).combinedUndoRedoCoordinator;return(0,t.useEffect)(function(){null==i||i.registerOrNotifyStackChanged(n),a&&(null==i||i.setDisableUndoOverride(a),null==i||i.setDisableRedoOverride(a))},[n,i,a]),null},up=(0,X.Rz)([function(e){return e.colorAdjustments.disableUndoRedoOverride}],function(e){return{disabled:!!e,id:Me.lm}}),fp=(0,g.Ng)(function(e){return{undoRedoStack:e.colorAdjustments.undoRedoStack,disableUndoRedoOverride:up(e)}})(lp),pp=(0,g.Ng)(function(e){return{undoRedoStack:e.filters.undoRedoStack}})(lp),mp=(0,g.Ng)(function(e){return{undoRedoStack:e.autoEnhance.undoRedoStack}})(lp),_p=(0,X.Rz)([At.gu],function(e){return{disabled:e,id:Me.Y4}}),hp=(0,g.Ng)(function(e){return{undoRedoStack:e.markup.undoRedoStack,disableUndoRedoOverride:_p(e)}})(lp),bp=(0,g.Ng)(function(e){return{undoRedoStack:e.transformTools.undoRedoStack}})(lp),gp=(0,g.Ng)(function(e){return{undoRedoStack:e.relight.undoRedoStack}})(lp),vp=function(e){var n,a,i,r,o=e.htmlElementForKeyboardControl,s=(0,t.useContext)(q.u).enableUndoRedo;return n=(0,t.useContext)(Ua.t).combinedUndoRedoCoordinator,a=o,i=s,r=[{code:"KeyZ",keyCode:or.bC.Z,handler:function(e){e&&(null==n||n.undo())},ctrlKey:!0,shiftKey:!1},{code:"KeyY",keyCode:or.bC.Y,handler:function(e){e&&(null==n||n.redo())},ctrlKey:!0,shiftKey:!1}],ir(a,i?r:[]),null},yp=(0,g.Ng)(function(e){return{undoRedoStack:e.texturePatch.undoRedoStack}})(lp),Sp=I(8914),Dp=I(4826),Ip=I(6318),xp=I(8322),Cp=I(8240),Op=I(5510),wp=I(3193);function Ep(e,t,n){var a={};return e.forEach(function(e){var i;Object.assign(a,((i={})[t[e.key]]=(0,A.J)(n,"{0}",e.locString),i))}),a}var Ap=function(){return Ap=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ap.apply(this,arguments)},Lp=I(4967),kp=I.n(Lp),Mp={setAriaAnnouncement:J.r9},Pp=(0,g.Ng)(null,Mp)(function(e){var n=e.setAriaAnnouncement,a=(0,t.useContext)(Ua.t).combinedUndoRedoCoordinator,i=(0,t.useContext)(y.x).strings,r=(0,t.useMemo)(function(){return function(e){var t;return Ap(Ap(Ap({},function(e){return Ep([{key:W.F.Brightness,locString:e.adjustment_brightness},{key:W.F.Contrast,locString:e.adjustment_contrast},{key:W.F.Exposure,locString:e.adjustment_exposure},{key:W.F.Highlights,locString:e.adjustment_highlights},{key:W.F.Saturation,locString:e.adjustment_saturation},{key:W.F.Shadows,locString:e.adjustment_shadows},{key:W.F.Temperature,locString:e.adjustment_temperature},{key:W.F.Tint,locString:e.adjustment_tint},{key:W.F.Vignette,locString:e.adjustment_vignette}],wp.w,e.undoRedo_colorAdjustmentsAriaLive)}(e)),function(e){var t=[{key:"Original",locString:e.filter_nameOriginal},{key:"Punch",locString:e.filter_namePunch},{key:"Golden",locString:e.filter_nameGolden},{key:"Radiate",locString:e.filter_nameRadiate},{key:"Warm Contrast",locString:e.filter_nameWarmContrast},{key:"Calm",locString:e.filter_nameCalm},{key:"Cool Light",locString:e.filter_nameCoolLight},{key:"Vivid Cool",locString:e.filter_nameVividCool},{key:"Dramatic Cool",locString:e.filter_nameDramaticCool},{key:"BW",locString:e.filter_nameBw},{key:"BW Cool",locString:e.filter_nameBwCool},{key:"BW Warm",locString:e.filter_nameBwWarm},{key:"BW High Contrast",locString:e.filter_nameBwHighContrast},{key:"Burn",locString:e.filter_nameBurn},{key:"Film",locString:e.filter_nameFilm},{key:"Vintage",locString:e.filter_nameVintage}],n={customFilter:(0,A.J)(e.undoRedo_filterAriaLive,"{0}","")};return Object.assign(n,Ep(t,Jr,e.undoRedo_filterAriaLive)),n}(e)),((t={}).autoEnhance=e.undoRedo_autoEnhanceAriaLive,t[Ip.I.inkContent]=e.undoRedo_markupInkContentAriaLive,t[Ip.I.textContent]=e.undoRedo_markupInkContentAriaLive,t[Ip.I.eraseContent]=e.undoRedo_markupEraseContentAriaLive,t[Ip.I.clearAllMarkupContent]=e.undoRedo_markupClearAllMarkupContentAriaLive,t[Cp.p.zoomToCrop]=e.undoRedo_transformCropAriaLive,t[Cp.p.pinchToCrop]=e.undoRedo_transformCropAriaLive,t[Cp.p.cropWithCropHandles]=e.undoRedo_transformCropAriaLive,t[Cp.p.mirrorImageX]=e.undoRedo_transformMirrorImageAriaLive,t[Cp.p.mirrorImageY]=e.undoRedo_transformMirrorImageAriaLive,t[Cp.p.rotateCropBy90]=e.undoRedo_transformRotationAriaLive,t[Cp.p.rotateWithRotationBar]=e.undoRedo_transformRotationAriaLive,t[Cp.p.setAspectRatio]=e.undoRedo_transformAspectRatioAriaLive,t[xp.B.spotFix]=e.undoRedo_spotFixAriaLive,t[xp.B.blur]=e.undoRedo_blurAriaLive,t[xp.B.maskBrush]=e.undoRedo_maskBrushAriaLive,t[Dp.h]=e.undoRedo_imageBackgroundAriaLive,t[Sp.L]=e.undoRedo_focalPointAriaLive,t.superResolutionPreview=e.undoRedo_previewSuperResolutionAriaLive,t.superResolutionApplied=e.undoRedo_appliedSuperResolutionAriaLive,t[Op.h]=void 0,t))}(i)},[i]),o=(0,t.useCallback)(function(e,t){var a=r[e];a&&n((0,A.J)(a,"Undo"===t?i.toolbar_undo:i.toolbar_redo))},[i.toolbar_redo,i.toolbar_undo,n,r]);return(0,t.useEffect)(function(){var e=kp()(function(e){return o(e,"Undo")},500,{leading:!0,trailing:!1}),t=kp()(function(e){return o(e,"Redo")},500);return null==a||a.onUndo.addListener(e),null==a||a.onRedo.addListener(t),function(){null==a||a.onUndo.removeListener(e),null==a||a.onRedo.removeListener(t)}},[a,o]),null}),Tp=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},Up=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Fp(e,t){return Tp(this,void 0,void 0,function(){var n=this;return Up(this,function(a){return[2,Promise.all(t.map(function(t){return Tp(n,void 0,void 0,function(){var n;return Up(this,function(a){switch(a.label){case 0:return[4,e.get(t.idValue)];case 1:if(!(n=a.sent().payload))throw new Error("Could not find texture patch in cache.");return[2,{id:n.id,parts:n.parts.map(function(e){return e.serialize()}),imageId:n.imageId}]}})})}))]})})}var Hp=function(){return Hp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hp.apply(this,arguments)},Rp=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};function Np(e,t,n,a,i,r,o,s,c,d,l,u){return f=this,void 0,m=function(){var f,p,m;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(_){switch(_.label){case 0:return f=void 0,u?(p=Rp(Rp([],r.texturePatchInfos,!0),r.removedTexturePatchInfos,!0),[4,Fp(u,p)]):[3,2];case 1:f=_.sent(),_.label=2;case 2:return m=ln(e,t,n,a,i,r,o,s,c,d,l),[2,Hp(Hp({},m),{texturePatch:Hp(Hp({},m.texturePatch),{texturePatches:f})})]}})},new((p=void 0)||(p=Promise))(function(e,t){function n(e){try{i(m.next(e))}catch(e){t(e)}}function a(e){try{i(m.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof p?i:new p(function(e){e(i)})).then(n,a)}i((m=m.apply(f,[])).next())});var f,p,m}var Bp=I(9739),jp=function(){return jp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jp.apply(this,arguments)},Vp=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},zp=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Gp={getEdits:function(){return Vp(void 0,void 0,void 0,function(){return zp(this,function(e){throw new Error("not implemented")})})},resetEdits:function(){throw new Error("not implemented")},setEdits:function(){throw new Error("not implemented")},hasEdits:function(){throw new Error("not implemented")},hasFocalPointEditsOnly:function(){throw new Error("not implemented")},getEditsAsExifOrientation:function(){throw new Error("not implemented")},setImageWasReplaced:function(){throw new Error("not implemented")}},Kp={resetEdits:Ne.Cj,setEdits:Ne.x2,setImageWasReplaced:wn,replaceImage:Ne.gP},Wp=(0,g.Ng)(function(e){var t=e.colorAdjustments,n=e.filters,a=e.autoEnhance,i=e.markup,r={imageMatrix:(0,oi.T)(e),cropMatrix:e.transformTools.cropInteraction.uvToWorld,originalImageSize:e.transformTools.image.originalPixelSize,aspectRatio:e.transformTools.cropInteraction.aspectRatio,shouldInvertOriginalAspectRatio:e.transformTools.cropInteraction.shouldInvertOriginalAspectRatio,undoRedoStack:e.transformTools.undoRedoStack},o=e.texturePatch,s=e.imageBackground,c=e.relight,d=e.focalPoint,l=e.imageWasReplaced,u=e.resize;return{transformOperationProps:r,colorAdjustmentProps:t,filterProps:n,autoEnhanceProps:a,markupProps:i,texturePatchProps:o,aspectRatiosList:e.transformTools.cropInteraction.aspectRatiosList,imageBackgroundProps:s,relightProps:c,focalPointProps:d,imageWasReplacedProps:l,resizeProps:u}},Kp)(function(e){var n=this,a=e.transformOperationProps,i=e.colorAdjustmentProps,r=e.filterProps,o=e.autoEnhanceProps,s=e.markupProps,c=e.texturePatchProps,d=e.imageBackgroundProps,l=e.relightProps,u=e.focalPointProps,f=e.imageWasReplacedProps,p=e.resizeProps,m=e.aspectRatiosList,_=e.resetEdits,h=e.setEdits,b=e.setImageWasReplaced,g=e.onEditsChanged,v=e.setTexturePatchCache,y=e.getTexturePatchCache,S=e.forwardedRef,D=(0,t.useMemo)(function(){return ln(a,i,r,o,s,c,d,l,u,f,p)},[a,i,r,o,s,c,d,l,u,f,p]),I=(0,Or.Dj)();(0,t.useEffect)(function(){g&&g()},[D,g]);var x=(0,t.useCallback)(function(e){var t=bl(e,m),a=t.isValid,i=t.message;a?Vp(n,void 0,void 0,function(){return zp(this,function(t){switch(t.label){case 0:return[4,null==v?void 0:v(e.texturePatch.texturePatches)];case 1:return t.sent(),h(e),[2]}})}):I({id:"SetEditsIgnored",message:"ValidationError: ".concat(i)})},[m,v,h,I]),C=sa(_);return(0,t.useImperativeHandle)(S,function(){return{getEdits:function(e){return Vp(n,void 0,void 0,function(){var t;return zp(this,function(n){return e?(t=null==y?void 0:y(),[2,Np(a,i,r,o,s,c,d,l,u,f,p,t)]):[2,ln(a,i,r,o,s,c,d,l,u,f,p)]})})},resetEdits:function(){C(f.imageToResetTo,!1)},setEdits:x,hasEdits:function(){return on(ln(a,i,r,o,s,c,d,l,u,f,p))},hasFocalPointEditsOnly:function(){return en((e=ln(a,i,r,o,s,c,d,l,u,f,p)).focalPoint)&&!rn(e.transforms)&&!Zt(e.adjustments,e.filters,e.autoEnhance,e.markup,e.texturePatch,e.imageBackground,e.relight,e.imageWasReplaced,e.resize);var e},getEditsAsExifOrientation:function(e){return function(e,t){return void 0===t&&(t=Bp.Hf),Zt(e.adjustments,e.filters,e.autoEnhance,e.markup,e.texturePatch,e.imageBackground,e.relight,e.imageWasReplaced,e.resize)?void 0:function(e,t,n,a){if(void 0===a&&(a=Bp.Hf),e&&t&&n){var i=(0,tn.D)(e),r=(0,rt.qq)(t),o=(0,rt.qq)((0,rt.GM)(i));if(!(0,it.rt)(o,r,10))return;var s=(0,rt.vX)(i);if(Math.abs(n.x-s.x)>.1||Math.abs(n.y-s.y)>.1)return;var c=(0,Bp.lY)(e);if(!c)return;return(0,Bp.To)(a,c)}}(e.transforms.imageTransform,e.transforms.cropRectangle,e.transforms.originalImageSize,t)}(ln(a,i,r,o,s,c,d,l,u,f,p),e)},setImageWasReplaced:b}},[x,b,y,a,i,r,o,s,c,d,l,u,f,p,C]),null}),qp=(0,t.forwardRef)(function(e,t){return n().createElement(Wp,jp({},e,{forwardedRef:t}))}),Qp=function(){return Qp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qp.apply(this,arguments)},Yp={getUiState:function(){},resetUiState:function(){},setUiState:function(){},addUserFacingMessage:function(){},getMaskingUiState:function(){}},Jp={setUiState:Ce.QP,resetUiState:Ce.Cc,addUserFacingMessage:Ce.ys},Xp=(0,g.Ng)(function(e){return{uiState:e.uiState,maskingUiState:e.maskingUi}},Jp)(function(e){var n=e.uiState,a=e.resetUiState,i=e.setUiState,r=e.onUiStateChanged,o=e.addUserFacingMessage,s=e.forwardedRef,c=e.maskingUiState,d=(0,t.useRef)(n),l=(0,t.useRef)(c);return(0,t.useEffect)(function(){d.current=n,r&&r()},[n,r]),(0,t.useEffect)(function(){l.current=c},[c]),(0,t.useImperativeHandle)(s,function(){return{getUiState:function(){return Qp({},d.current)},resetUiState:a,setUiState:i,addUserFacingMessage:o,getMaskingUiState:function(){return Qp({},l.current)}}},[a,i,o]),null}),Zp=(0,t.forwardRef)(function(e,t){return n().createElement(Xp,Qp({},e,{forwardedRef:t}))}),$p=I(5451),em=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},tm=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function nm(){var e=this,n=(0,t.useContext)($n.Z),a=n.image,i=n.offscreenRenderer,r=function(e){var n=(0,Or.Dj)();return(0,t.useCallback)(function(){return!(0,$p.r)(e)&&(n({id:"SaveFailed",message:"Full size image has not loaded."}),!0)},[n,e])}(a);return{getEditedImage:(0,t.useCallback)(function(t){return void 0===t&&(t=a),em(e,void 0,void 0,function(){return tm(this,function(e){return r()?[2,null]:i?[2,i.getEditedImage(t)]:[2,null]})})},[r,a,i]),getEditedImageBytes:(0,t.useCallback)(function(t){return void 0===t&&(t=a),em(e,void 0,void 0,function(){return tm(this,function(e){return r()?[2,null]:i?[2,i.getEditedImageBytes(t)]:[2,null]})})},[r,a,i]),getImageLayerBytes:(0,t.useCallback)(function(t){return em(e,void 0,void 0,function(){return tm(this,function(e){return i?[2,i.getImageLayerBytes(t)]:[2,null]})})},[i]),getImageRegionLayerBytes:(0,t.useCallback)(function(e,t){return i?i.getImageRegionLayerBytes(e,t):null},[i])}}var am=function(){return am=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},am.apply(this,arguments)},im={zoomIn:function(){},zoomOut:function(){}},rm={handleZoomDeltaChange:Re.D_},om=(0,g.Ng)(function(e){var t=!e.transformTools.cropInteraction.enableZoomToCrop&&!e.transformTools.view.enableZoomToView;return{zoomInDisabled:t||va(e),zoomOutDisabled:t||Sa(e)}},rm)(function(e){var n=e.forwardedRef,a=e.handleZoomDeltaChange,i=e.zoomInDisabled,r=e.zoomOutDisabled;return(0,t.useImperativeHandle)(n,function(){return{zoomIn:function(){i||a(-pa.JQ)},zoomOut:function(){r||a(pa.JQ)}}},[i,r,a]),null}),sm=(0,t.forwardRef)(function(e,t){return n().createElement(om,am({},e,{forwardedRef:t}))}),cm=I(1870);function dm(e,t,n,a){var i=e.length/a/t;return{x:t+n.left+n.right,y:i+n.top+n.bottom}}var lm={top:0,left:0,right:0,bottom:0},um=function(){return um=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},um.apply(this,arguments)},fm=(0,t.forwardRef)(function(e,a){var i=e.onEditsChanged,r=e.onUiStateChanged,o=e.setTexturePatchCache,s=e.getTexturePatchCache,c=function(e){var n=nm(),a=n.getEditedImage,i=n.getEditedImageBytes,r=n.getImageLayerBytes,o=n.getImageRegionLayerBytes,s=(0,t.useRef)(Gp),c=(0,t.useRef)(Yp),d=(0,t.useRef)(im),l=(0,t.useContext)($n.Z),u=l.setImage,f=l.setImageLayer,p=(0,t.useContext)(q.u).experimental_enableResizeUndoRedo;return(0,t.useImperativeHandle)(e,function(){return{getEdits:function(e){return s.current.getEdits(e)},setEdits:function(e){return s.current.setEdits(e)},resetEdits:function(){s.current.resetEdits()},hasEdits:function(){return s.current.hasEdits()},hasFocalPointEditsOnly:function(){return s.current.hasFocalPointEditsOnly()},getEditsAsExifOrientation:function(e){return s.current.getEditsAsExifOrientation(e)},experimental_bakeEditsWithFrame:function(e){return n=function(){var t;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(n){switch(n.label){case 0:return[4,i()];case 1:return(t=n.sent())&&(s.current.resetEdits(),r=lm,(a=e).top===r.top&&a.left===r.left&&a.right===r.right&&a.bottom===r.bottom||(t=function(e,t){var n=function(e,t,n,a,i){void 0===i&&(i=0);var r=dm(e,t,n,a),o=r.x,s=r.y,c=new Uint8ClampedArray(o*s*a);if(0!==i&&c.fill(i),o<1||s<1)throw new Error("Invalid frame size for pixels bytes");for(var d=Math.max(0,-n.top),l=Math.max(0,-n.left),u=Math.max(0,n.top),f=Math.max(0,n.left),p=Math.max(0,n.bottom),m=Math.max(0,n.right),_=t*a,h=o*a,b=c.length-p*h-m*a,g=(o-f-m)*a,v=d*_+l*a,y=u*h+f*a,S=_,D=g+(m+f)*a;y<b;){var I=e.subarray(v,v+g);c.set(I,y),y+=D,v+=S}return c}(e.bytes,e.width,t,(0,cm.x)(e.format)),a=dm(e.bytes,e.width,t,(0,cm.x)(e.format));return{bytes:n,width:a.x,height:a.y,format:e.format,id:"imageWithFrame_"+(0,yu.b)().toString()}}(t,e)),u(um(um({},(0,ku.W)()),{main:t,sourceImageKind:"FullSize"}),{editType:"BakeEditsWithFrame"})),[2]}var a,r})},new((t=void 0)||(t=Promise))(function(e,a){function i(e){try{o(n.next(e))}catch(e){a(e)}}function r(e){try{o(n.throw(e))}catch(e){a(e)}}function o(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t(function(e){e(a)})).then(i,r)}o((n=n.apply(void 0,[])).next())});var t,n},experimental_setImageLayer:f,getEditedImage:a,getEditedImageBytes:i,getImageLayerBytes:r,getImageRegionLayerBytes:o,getUiState:function(){return c.current.getUiState()},setUiState:function(e){return c.current.setUiState(e)},getMaskingUiState:function(){return c.current.getMaskingUiState()},resetUiState:function(){return c.current.resetUiState()},addUserFacingMessage:function(e){return c.current.addUserFacingMessage(e)},zoomIn:function(){return d.current.zoomIn()},zoomOut:function(){return d.current.zoomOut()},replaceImageAndResetEdits:function(e,t){p?u(e,t):(s.current.resetEdits(),u(e,t),s.current.setImageWasReplaced(!0))},setImageWasReplaced:function(e){s.current.setImageWasReplaced(e)}}},[a,i,r,o,u,f,p]),{editOperationsRef:s,editUiStateRef:c,editViewingRef:d}}(a),d=c.editOperationsRef,l=c.editUiStateRef,u=c.editViewingRef;return n().createElement(n().Fragment,null,n().createElement(qp,{ref:d,setTexturePatchCache:o,getTexturePatchCache:s,onEditsChanged:i}),n().createElement(sm,{ref:u}),n().createElement(Zp,{ref:l,onUiStateChanged:r}))});fm.displayName="ImageEditorRefContainer";var pm=I(4937),mm={spotFix:pm.d,magicErase:pm.d,backgroundSegmentation:null,stylizer:null,objectSegmentation:null,depth:null},_m=I(553),hm=(0,g.Ng)(function(e){return{undoRedoStack:e.imageBackground.undoRedoStack}})(lp),bm=(0,g.Ng)(function(e){return{undoRedoStack:e.focalPoint.undoRedoStack}})(lp),gm=I(5011);function vm(e){switch(e){case"FullSize":return qd.MainImage;case"Thumbnail":return qd.Thumbnail;case"Resized":return qd.ResizedImage;case"NoImage":throw new Error("getTelemetryComponentFromImageKind: Image kind must not be NoImage");default:throw new s.x(e)}}var ym=function(){return ym=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ym.apply(this,arguments)},Sm=n().createContext({}),Dm=function(){function e(){this._listeners=[]}return e.prototype.addListener=function(e){this._listeners.push(e)},e.prototype.removeListener=function(e){this._listeners=this._listeners.filter(function(t){return t!==e})},e.prototype.notifyListeners=function(){this._listeners.forEach(function(e){e()})},e}(),Im=function(){function e(e){void 0===e&&(e=[]),this._effects=[],this._effectNameToOrder=new Map,this.onChange=new Dm,this._effects=e}return e.prototype.getUniformFormatter=function(e){var t=this;return function(n){var a=t._effectNameToOrder.get(e.getName());if(void 0===a)throw new Error("All effects need to be registered with an order");return n.split("@").join("_"+a)}},e.prototype.getOrderForEffectName=function(e){var t=this._effectNameToOrder.get(e);if(void 0===t)throw new Error("No order defined for : "+e);return t},e.prototype.sortEffects=function(){var e=this;this._effects.sort(function(t,n){return e.getOrderForEffectName(t.getName())-e.getOrderForEffectName(n.getName())})},e.prototype.getShaderProgramName=function(){return this._effects.reduce(function(e,t){return e+" "+t.getName()},"image")},e.prototype.getUniformNames=function(){var e=this,t=[];return this._effects.forEach(function(n){t=t.concat(n.getUniformNames(e.getUniformFormatter(n)))}),t},e.prototype.getSamplerNames=function(){var e=this,t=[];return this._effects.forEach(function(n){n.getSamplerNames&&(t=t.concat(n.getSamplerNames(e.getUniformFormatter(n))))}),t},e.prototype.getEffects=function(){return this._effects},e.prototype.effectOrderExists=function(e){return Array.from(this._effectNameToOrder.values()).includes(e)},e.prototype.registerEffect=function(e,t){if(this.unRegisterEffect(e),this.effectOrderExists(t))throw new Error("Order already exists: ".concat(t,". Each registered effect must have a unique order."));this._effects.push(e),this._effectNameToOrder.set(e.getName(),t),this.sortEffects(),this.onChange.notifyListeners()},e.prototype.unRegisterEffect=function(e){var t=this._effects.length;this._effects=this._effects.filter(function(t){return t.getName()!==e.getName()}),this._effects.length!==t&&(this._effectNameToOrder.delete(e.getName()),this.onChange.notifyListeners())},e.prototype.getHeaderCode=function(){var e=this,t=this._effects.reduce(function(t,n){return n.getFunctions(e.getUniformFormatter(n)).forEach(function(e){t[e]=""}),t},{});return"// functions -- \n"+Object.keys(t).join("\n\n")+this._effects.reduce(function(t,n){return t+n.getHeaderCode(e.getUniformFormatter(n))},"// shader effects -- \n")},e.prototype.getBodyCode=function(){var e=this;return this._effects.reduce(function(t,n){return t+n.getShaderFunctionBody(e.getUniformFormatter(n))},"// shader effects -- \n")},e.prototype.onBeforeBabylonRender=function(e){var t=this;this._effects.forEach(function(n){n.onBeforeBabylonRender(e,t.getUniformFormatter(n))})},e}(),xm="\n#ifndef HSV2RGB\n#define HSV2RGB\nvec3  hsv2rgb( in vec3 c )\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n#endif\n",Cm="\n#ifndef RGB2HSV\n#define RGB2HSV\nvec3 rgb2hsv(in vec3 c) {\n    float high = max(c.r, max(c.g, c.b));\n    float d = high - min(c.r, min(c.g, c.b));\n    return vec3(d == 0. ? 0. :\n        (\n            high == c.r ? mod((c.g - c.b)/d, 6.) :\n            high == c.g ? (c.b - c.r)/d + 2. :\n            (c.r - c.g)/d + 4.\n        )/6.,\n        high <= 0. ? 0. : d/high,\n        high);\n}\n#endif\n",Om="\n#ifndef GAMMALINEARSPACE\n#define GAMMALINEARSPACE\n\nconst float LinearEncodePowerApprox = 2.2;\nconst float GammaEncodePowerApprox = 1.0 / LinearEncodePowerApprox;\n\nvec3 toLinearSpace(vec3 color)\n{\n    return pow(color, vec3(LinearEncodePowerApprox));\n}\n\nvec3 toGammaSpace(vec3 color)\n{\n    return pow(color, vec3(GammaEncodePowerApprox));\n}\n#endif\n",wm=I(2891),Em=I(8277),Am=I(3785),Lm="position",km=I(9051),Mm=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},Pm=[Ur.k.colorOverride,Ur.k.colorOverrideLevel,Ur.k.renderTargetSize,Ur.k.mainTextureSampler,Ur.k.singleTileMainTextureSampler,Ur.k.singleTilePreSharpenTextureSampler,Ur.k.singleTileTempTextureSampler,Ur.k.singleTileBackgroundTextureSampler,Ur.k.screenPixelPos,Ur.k.transform,Ur.k.transformInverse,Ur.k.uv,Ur.k.singleTileTextureUvTransform,Ur.k.overlayTextureSampler,Ur.k.overlayTextureAlpha,Ur.k.backgroundMaskTextureSampler,Ur.k.eraseMaskTextureSampler,Ur.k.depthMapTextureSampler,Ur.k.isRenderingForExport,Ur.k.originalTextureSampler,Ur.k.subTexturePixelSize,Ur.k.fullTexturePixelSize,Ur.k.objectSegmentationPreviewTextureSampler,Ur.k.sharpness],Tm=[Lm],Um=[Ur.k.mainTextureSampler,Ur.k.singleTileMainTextureSampler,Ur.k.singleTilePreSharpenTextureSampler,Ur.k.singleTileTempTextureSampler,Ur.k.singleTileBackgroundTextureSampler,Ur.k.overlayTextureSampler,Ur.k.backgroundMaskTextureSampler,Ur.k.eraseMaskTextureSampler,Ur.k.depthMapTextureSampler,Ur.k.originalTextureSampler,Ur.k.objectSegmentationPreviewTextureSampler],Fm=function(e,t){var n=Ur.k.uv,a=Ur.k.singleTileTextureUvTransform,i=Ur.k.screenPixelPos,r=Ur.k.mainTextureSampler,o=Ur.k.singleTileMainTextureSampler,s=Ur.k.singleTilePreSharpenTextureSampler,c=Ur.k.singleTileTempTextureSampler,d=Ur.k.colorOverrideLevel,l=Ur.k.colorOverride,u=Ur.k.transform,f=Ur.k.transformInverse,p=Ur.k.renderTargetSize,m=Ur.k.isRenderingForExport,_=Ur.k.subTexturePixelSize,h=Ur.k.fullTexturePixelSize,b=Ur.k.sharpness;return"\n    #ifdef GL_ES\n    precision highp float;\n    #endif\n    varying highp vec2 ".concat(i,";\n    uniform vec4 ").concat(l,";\n    uniform float ").concat(d,";\n    uniform mat3 ").concat(u,";\n    uniform mat3 ").concat(f,";\n    uniform vec2 ").concat(p,";\n    uniform float ").concat(m,";\n    uniform vec2 ").concat(_,";\n    uniform vec2 ").concat(h,";\n    varying vec3 uvPosition;\n    uniform mat3 ").concat(a,";\n\n    ").concat(e,"\n\n    ").concat(wm.N.reduce(function(e,t){return e+"\n  #ifdef ".concat((0,Em.T)(t),"\n    uniform sampler2D ").concat((0,Am.X)(t),";\n  #endif\n  ")},""),"\n\n    #ifdef ").concat((0,Em.T)("singleTilePreSharpen"),"\n      uniform float ").concat(b,";\n    #endif\n\n\n    ").concat(Om,"\n\n    // when using a mat3 to transform 2D points, the z coordinate should always be 1.0\n    #define Z_COORDINATE_2D 1.0\n\n      vec4 sampleTextureOrSampleFakeMipMaps(sampler2D sampler, vec2 uv){\n        #ifdef ").concat(km.v$,"  \n          vec3 originOffset = vec3(0.,0.,Z_COORDINATE_2D) * ").concat(f,";\n            vec3 pixelOffset = vec3(0.5,0.5,Z_COORDINATE_2D);\n            if(").concat(m,"==1.0){\n              pixelOffset = vec3(0.,0.,Z_COORDINATE_2D);\n            }\n            vec3 uvOffset3 = pixelOffset * ").concat(f,";\n            uvOffset3 -= originOffset;\n            vec2 uvOffset = uvOffset3.xy;\n            vec2 diagonalOffset = vec2(uvOffset.x,-uvOffset.y);\n            return 0.2 * (  texture2D(sampler,uv)\n                              + texture2D(sampler,uv - uvOffset) \n                              + texture2D(sampler,uv + uvOffset)\n                              + texture2D(sampler,uv + diagonalOffset)\n                              + texture2D(sampler,uv - diagonalOffset)\n                              );\n        #else\n          return texture2D(sampler,uv);\n        #endif\n      }\n\n    vec4 getTextureColor(vec2 uv){\n      #ifdef ").concat((0,Em.T)("main"),"\n          vec4 mainColor = sampleTextureOrSampleFakeMipMaps(").concat(r,", uv);\n      #elif ").concat((0,Em.T)("singleTileMain"),"\n        vec3 uvInSingleTileTexture =  vec3(uv.x,uv.y,Z_COORDINATE_2D) * ").concat(a,";\n        vec4 mainColor = texture2D(").concat(o,", uvInSingleTileTexture.xy);\n      #elif ").concat((0,Em.T)("singleTileTemp"),"\n        vec3 uvInSingleTileTexture =  vec3(uv.x,uv.y,Z_COORDINATE_2D) * ").concat(a,";\n        vec4 mainColor = texture2D(").concat(c,", uvInSingleTileTexture.xy);\n      #else\n        vec4 mainColor = ").concat(l,";\n      #endif\n\n      #ifdef ").concat((0,Em.T)("singleTilePreSharpen"),"\n        vec3 uvInSingleTileTexture2 =  vec3(uv.x,uv.y,Z_COORDINATE_2D) * ").concat(a,";\n        vec4 preSharpenColor = texture2D(").concat(s,", uvInSingleTileTexture2.xy);\n        if(").concat(b," > 0.5)\n        {\n          mainColor.rgb = mainColor.rgb * 2.0 - preSharpenColor.rgb;//subtract the blurred image from the original image\n        }\n        else if (").concat(b," < 0.5)\n        {\n          mainColor.rgb = preSharpenColor.rgb;//add the blurred image to the original image\n        }\n      #endif\n\n      return mainColor;\n    }\n\n    void main(void) {\n\n        float finalAlphaMultiply = 1.;\n        float overlayTextureAlphaOverride = 1.;\n        vec3 ").concat(n," = uvPosition;\n        \n        #ifdef ").concat(km.DO,"\n          gl_FragColor = vec4(0.);\n          vec4 mainTextureColor = vec4(0.);\n        #else\n          gl_FragColor = getTextureColor(").concat(n,".xy);\n          vec4 mainTextureColor = gl_FragColor;\n          gl_FragColor = mix(gl_FragColor,").concat(l,",").concat(d,");\n        #endif\n\n        // effect 'body' code is inserted here.\n        // effect can can modify the above variables.\n        ").concat(t,"\n\n        gl_FragColor.a *= finalAlphaMultiply;\n    }\n  ")};function Hm(e,t){return void 0===t&&(t=e.getShaderProgramName()),{name:t,attributeNames:Tm,uniformNames:Mm(Mm([],e.getUniformNames(),!0),Pm,!0),samplerNames:Mm(Mm([],e.getSamplerNames(),!0),Um,!0),vertexShader:(n=Ur.k.screenPixelPos,a=Ur.k.renderTargetSize,i=Ur.k.transform,r=Ur.k.transformInverse,o=Lm,"\n    #ifdef GL_ES\n    precision highp float;\n    #endif\n\n    attribute vec4 ".concat(o,";\n    varying highp vec2 ").concat(n,";\n    uniform vec2 ").concat(a,";\n    uniform mat3 ").concat(i,";\n    uniform mat3 ").concat(r,";\n    varying vec3 uvPosition;\n\n    void main(void) {\n      vec3 pos = vec3(").concat(o,".x* 0.5 + 0.5, ").concat(o,".y* 0.5 + 0.5, 1.0) * ").concat(i,";\n\n      ").concat(n," = pos.xy;\n      uvPosition = vec3(").concat(n,".x, ").concat(n,".y,1.0) * ").concat(r,";\n\n      //convert to GL coordinates.\n      pos.x = (pos.x / ").concat(a,".x) * 2.0 - 1.0;\n      pos.y = (-pos.y /").concat(a,".y) * 2.0 + 1.0;\n\n      gl_Position = vec4(pos.x,pos.y,0.0,1.0);\n    }\n  ")),fragmentShader:Fm(e.getHeaderCode(),e.getBodyCode())};var n,a,i,r,o}var Rm,Nm=function(){return(0,t.useMemo)(function(){return new Im},[])},Bm=I(1908);function jm(e){var n=(0,t.useContext)(Bm.A).renderList,a=(0,t.useRef)(function(){n.requestRender()});(0,t.useLayoutEffect)(function(){a.current()},e)}!function(e){e[e.main=0]="main",e[e.singleTileMain=1]="singleTileMain",e[e.singleTileTemp=2]="singleTileTemp",e[e.singleTileBackground=3]="singleTileBackground",e[e.lut=4]="lut",e[e.overlay=5]="overlay",e[e.backgroundMask=6]="backgroundMask",e[e.original=7]="original",e[e.eraseMask=8]="eraseMask",e[e.depth=9]="depth",e[e.singleTilePreSharpen=10]="singleTilePreSharpen",e[e.objectSegmentationPreview=11]="objectSegmentationPreview"}(Rm||(Rm={}));var Vm=function(){return Vm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vm.apply(this,arguments)},zm={disposalCondition:"whenSourceIdChanges",shouldDisposeWhenSourceIsNull:!0};function Gm(e,n,a,i,r,o){var s;void 0===i&&(i=!1),void 0===o&&(o={});var c=(0,t.useRef)(void 0),d=(0,pd.V)();return function(e,n,a,i,r){void 0===i&&(i=!1);var o=(0,Or.Dj)();!function(e,n,a){var i=n?(0,Rr.r9)(n):null,r=(0,t.useRef)(e);r.current=e,(0,t.useLayoutEffect)(function(){r.current()},[i,a])}((0,t.useCallback)(function(){e&&(null==a||a.getTexture(e,r,n,i,o))},[e,n,a,o,i,r]),e,a)}(e,n,a,i,(0,t.useCallback)(function(e){c.current=e,null==r||r({x:e.width,y:e.height}),d()},[r,d])),function(e,n,a,i,r){var o,s,c=function(e,n,a){return(0,t.useCallback)(function(){e&&(null==n||n.releaseTexture(e.id),a())},[n,e,a])}(n,a,r);o=c,(s=(0,t.useRef)(o)).current=o,(0,t.useEffect)(function(){return function(){s.current()}},[]);var d,l,u,f=function(e,t,n){var a=Vm(Vm({},zm),n),i=a.disposalCondition,r=a.shouldDisposeWhenSourceIsNull;return"whenSourceIdChanges"===i&&function(e,t){return!!e&&(null==t?void 0:t.id)!==(0,Rr.r9)(e)}(e,t)||r&&null===e}(e,n,i);d=f,l=c,u=(0,t.useRef)(d),!0===d&&!1===u.current&&l(),u.current=d,function(e,n){var a=(0,t.useRef)(e);a.current&&a.current.id!==(null==e?void 0:e.id)&&(null==n||n.releaseTexture(a.current.id)),a.current=e}(n,a)}(e,c.current,a,o,function(){c.current=void 0}),(null===(s=c.current)||void 0===s?void 0:s.texture)||null}var Km=I(4376),Wm=I(4409),qm=I(7422);function Qm(e){return{x:e[0],y:e[1],z:e[2],w:e[3]}}var Ym=I(5966),Jm=I(8156),Xm=function(){return Xm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xm.apply(this,arguments)},Zm=Xm(Xm({},(0,Jm.C)(!0)),{singleTileMain:!1,singleTilePreSharpen:!1,singleTileTemp:!1,singleTileBackground:!1});function $m(e){return Zm[e]}var e_=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};function t_(e,t,n,a,i,r,o,s,c,d){void 0===s&&(s=!1);var l=null==i?void 0:i.main,u=(0,Ym.A)(null==l?void 0:l.orientation,e);if(l&&0!==l.parts.length)l.parts.forEach(function(e,f){var p=(0,it.XG)((0,it.cQ)(e.rect.left/l.width,e.rect.top/l.height),(0,it.W3)(e.rect.width/l.width,e.rect.height/l.height)),m=(0,it.XG)(u,p);if(!e.texture)throw new Error("texture part is missing texture");n_(m,p,t,s,{x:l.width,y:l.height},n,a,function(e,t){var n=(0,ku.W)();return wm.N.forEach(function(a){var i,r=null==t?void 0:t[a];if(r){var o=$m(a)?e:0;n[a]=(null===(i=r.parts[o])||void 0===i?void 0:i.texture)||null}}),n}(f,i),r,o,c,null==d?void 0:d.map(function(e){var t=e.id,n=e.textures.parts[f].texture;if(!n)throw new Error("Texture does not exist");return{id:t,texture:n}}))});else{var f=(0,it.yz)(),p=l?{x:l.width,y:l.height}:ot.Id;n_(u,f,t,s,p,n,a,void 0,r,o)}}var n_=function(e,t,n,a,i,r,o,s,c,d,l,u){var f,p;if((null==o?void 0:o.effect.isReady())&&o&&c&&d&&(0,it.fh)(e)){var m=o.effect;d.applyEffectWrapper(o),l?m.setFloat2(Ur.k.renderTargetSize,l.width,l.height):m.setFloat2(Ur.k.renderTargetSize,(null===(f=c.getRenderingCanvas())||void 0===f?void 0:f.width)||0,(null===(p=c.getRenderingCanvas())||void 0===p?void 0:p.height)||0),m.setMatrix3x3(Ur.k.transform,new Float32Array(e_(e_([],e,!0),[0,0,1],!1))),m.setMatrix3x3(Ur.k.transformInverse,new Float32Array(e_(e_([],(0,it.iE)(e),!0),[0,0,1],!1))),m.setFloat(Ur.k.isRenderingForExport,a?1:0),m.setMatrix3x3(Ur.k.singleTileTextureUvTransform,new Float32Array(e_(e_([],t,!0),[0,0,1],!1)));var _=null==s?void 0:s.main;if(s&&_){!function(e,t){wm.N.forEach(function(n){var a=t[n];if(a){var i=(0,Am.X)(n);e.effect.setTexture(i,a)}})}(o,s),m.setFloat(Ur.k.colorOverrideLevel,0);var h=_.getSize();m.setFloat2(Ur.k.subTexturePixelSize,h.width,h.height),m.setFloat2(Ur.k.fullTexturePixelSize,i.x,i.y)}else{var b=r||gm.vL;m.setVector4(Ur.k.colorOverride,Qm(b)),m.setFloat(Ur.k.colorOverrideLevel,1)}null==u||u.forEach(function(e){var t=e.id,n=e.texture;m.setTexture(t,n)}),n.onBeforeBabylonRender(m),(null==s?void 0:s.overlay)||m.setFloat(Ur.k.overlayTextureAlpha,0),d.render(o,l)}};function a_(e){var n=(0,t.useState)(void 0),a=n[0],i=n[1],r=(0,t.useContext)(Wm.M).effectWrapperManager,o=(0,t.useRef)(!0);o.current=!0,(0,t.useLayoutEffect)(function(){return function(){o.current=!1}},[]);var s=(0,t.useRef)(e.fragmentShader);return s.current=e.fragmentShader,(0,t.useLayoutEffect)(function(){r&&r.getEffectWrapper(e).then(function(e){e.effect.rawFragmentSourceCode===s.current&&o.current&&i(e)},function(e){throw new Error(e)})},[e,r]),a}function i_(e,n){var a=(0,t.useContext)(Bm.A).renderList;(0,t.useLayoutEffect)(function(){if(a){var t=(0,yu.b)();return a.register(t,e,n),function(){a.unregister(t)}}},[a,e,n]),(0,t.useLayoutEffect)(function(){a&&a.requestRender()},[a])}var r_=(0,ku.W)(),o_=function(e){var n,a,i,r,o=e.zIndex,s=e.color,c=e.transform,d=e.textureLayers,l=void 0===d?r_:d,u=(0,t.useContext)(Wm.M),f=u.engine,p=u.effectRenderer,m=(0,t.useContext)(Sm).registry;if(!m)throw new Error("effect registry not found on ImageEffectContext.Provider");n=m,a=(0,pd.V)(),i=(0,t.useRef)(),r=(0,t.useCallback)(function(){i.current=window.setTimeout(function(){void 0!==i.current&&a()},0)},[a]),(0,t.useEffect)(function(){return n.onChange.addListener(r),function(){n.onChange.removeListener(r),void 0!==i.current&&(clearTimeout(i.current),i.current=void 0)}},[n,r]);var _=function(e){var n=e.getShaderProgramName();return(0,t.useMemo)(function(){return Hm(e,n)},[e,n])}(m),h=function(e,n,a,i,r,o,s){var c=(0,t.useRef)(e);return c.current=e,(0,t.useCallback)(function(){t_(c.current,n,a,i,r,o,s)},[n,a,i,r,o,s])}(c,m,s,a_(_),l,f,p);return i_(h,o),jm(c),null},s_=I(9142),c_=function(){return c_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c_.apply(this,arguments)},d_=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},l_=I(9845),u_=function(){return u_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u_.apply(this,arguments)},f_=function(e){var a=e.children,i=e.image,r=e.onMainTextureLoaded,o=e.onOverlayTextureLoaded,s=e.dynamicLayers,c=(0,t.useContext)(Wm.M),d=c.engine,l=c.textureManager,u=c.onTextureLoaded,f=(0,t.useContext)($n.Z).isExpectingThumbnailThenFullImage,p=Nm(),m=function(e,n,a,i,r,o,s){var c=(0,t.useCallback)(function(e){null==s||s(),null==r||r({sizeInPixels:e,shouldChangeOriginalSizeAndResetTransformsOnSizeChange:!i,exifOrientation:(0,Km._)(n)})},[s,r,i,n]),d=(0,t.useCallback)(function(e){null==s||s(),null==o||o()},[o,s]),l=Gm(n.main,Rm.main,e,!!a.main,c,{disposalCondition:"whenNewTextureLoads"}),u=Gm(n.singleTileMain,Rm.singleTileMain,e,!!a.singleTileMain,s),f=Gm(n.singleTilePreSharpen,Rm.singleTilePreSharpen,e,!!a.singleTilePreSharpen,s),p=Gm(n.singleTileTemp,Rm.singleTileTemp,e,!!a.singleTileTemp,s),m=Gm(n.singleTileBackground,Rm.singleTileBackground,e,!!a.singleTileBackground,s),_=Gm(n.original,Rm.original,e,!!a.original,s,{disposalCondition:"whenNewTextureLoads"}),h=Gm(n.overlay,Rm.overlay,e,!!a.overlay,d),b=Gm(n.backgroundMask,Rm.backgroundMask,e,!!a.backgroundMask,s),g=Gm(n.eraseMask,Rm.eraseMask,e,!!a.eraseMask,s),v=Gm(n.depth,Rm.depth,e,!!a.depth,s),y=Gm(n.objectSegmentationPreview,Rm.objectSegmentationPreview,e,!!a.objectSegmentationPreview,s),S=(0,t.useMemo)(function(){return{main:l,singleTileMain:u,singleTilePreSharpen:f,singleTileTemp:p,singleTileBackground:m,overlay:h,backgroundMask:b,eraseMask:g,depth:v,original:_,objectSegmentationPreview:y}},[l,u,f,p,m,h,b,g,v,_,y]);return jm([S]),S}(l,i,(0,qm.W)(d),f,r,o,u);return function(e,n,a,i,r){var o=(0,t.useState)([]),s=o[0],c=o[1],d=(0,t.useRef)([]),l=(0,t.useRef)(new Set),u=(0,pd.V)(),f=(0,Or.Dj)(),p=(0,t.useCallback)(function(e){d.current.push(e),l.current.delete(e.id),c(function(t){return d_(d_([],t,!0),[{id:e.id,texture:e.texture}],!1)}),null==r||r(),u()},[r,u]),m=(0,t.useCallback)(function(t,n){t&&(null==e||e.getTexture(t,p,n,i,f))},[e,p,i,f]),_=(0,t.useCallback)(function(t){null==e||e.releaseTexture(t)},[e]);(0,t.useEffect)(function(){a&&n&&a.forEach(function(e){var t=e.layerId,a=e.format;if(d.current.every(function(e){return e.id!==t})&&!l.current.has(t)){var i=(0,s_.y)(n);if(!i)return null;var r={width:i.x,height:i.y,orientation:(0,Km._)(n),id:t,format:a},o=i.x*i.y*(0,cm.x)(a),s=c_(c_({},r),{bytes:new Uint8ClampedArray(o)});l.current.add(t),m(s,0)}})},[a,n,m]),(0,t.useEffect)(function(){a?(d.current=d.current.filter(function(e){return!!a.find(function(t){return t.layerId===e.id})||(_(e.id),!1)}),c(d.current)):(d.current.forEach(function(e){_(e.id)}),d.current=[],c([]))},[_,a]),jm([s])}(l,i,s,(0,l_.t)(d),u),n().createElement(Sm.Provider,{value:{registry:p}},a,n().createElement(o_,u_({textureLayers:m},e)))},p_=I(786),m_=n().lazy(function(){return I.e(381).then(I.bind(I,6381))}),__=function(e){var a=e.image,i=e.isApplyingTexturePatchesPromiseRef;return n().createElement(t.Suspense,{fallback:null},n().createElement(m_,{image:a,isApplyingTexturePatchesPromiseRef:i}))},h_=n().lazy(function(){return I.e(201).then(I.bind(I,6201))}),b_=function(e){var a=e.image,i=e.isApplyingTexturePatchesPromiseRef;return n().createElement(t.Suspense,{fallback:null},n().createElement(h_,{image:a,isApplyingTexturePatchesPromiseRef:i}))},g_=function(){return g_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g_.apply(this,arguments)};function v_(e){return t=this,void 0,a=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){return[2,new Promise(function(t,n){var a=new Image;a.onload=function(){t(a)},a.onerror=function(e){n(e)},a.decoding=a.decoding||"auto",a.crossOrigin="Anonymous",a.src=e})]})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())});var t,n,a}var y_=function(){return y_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y_.apply(this,arguments)};function S_(e){return t=this,void 0,a=function(){var t;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(n){switch(n.label){case 0:return t=null,e instanceof HTMLImageElement?[4,v_(e.src)]:[3,2];case 1:return t=n.sent(),[3,3];case 2:(0,Rr.ny)(e)&&(t=y_({},e)),n.label=3;case 3:if(null===t)throw new Error("Unsupported image type");return t.id="".concat(t.id,"-copy"),[2,t]}})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())});var t,n,a}var D_,I_=function(){return I_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I_.apply(this,arguments)},x_={onMainTextureLoaded:Re.Jw,onOverlayTextureLoaded:Ce.IO},C_=(0,g.Ng)(function(e,t){var n=t.children;return{transform:(0,Ao.h)(e),enableTexturePatching:e.uiState.activeEditorActivity===Me.Nr||e.uiState.activeEditorActivity===Me.vs||e.uiState.activeEditorActivity===Me.NF||e.uiState.activeEditorActivity===Me.qO||e.uiState.activeEditorActivity===Me.co||e.texturePatch.texturePatchInfos.length>0||e.texturePatch.removedTexturePatchInfos.length>0,dynamicLayers:e.dynamicLayers.layers,children:n}},x_)(function(e){return(0,t.forwardRef)(function(a,i){var r=a.enableTexturePatching,o=a.disableTexturePatchIndexedDbStorage,s=(0,t.useRef)(null);return n().createElement(n().Fragment,null,n().createElement(p_.YB,{shouldCreateSessionCache:r,disableTexturePatchIndexedDbStorage:o},r&&n().createElement(__,{image:a.image,isApplyingTexturePatchesPromiseRef:s}),r&&n().createElement(b_,{image:a.image,isApplyingTexturePatchesPromiseRef:s}),n().createElement(e,g_({},a,{ref:i}))))})}(function(e){return(0,t.forwardRef)(function(a,i){var r;r=a.image,(0,t.useLayoutEffect)(function(){if((0,Rr.YG)(r)){var e=vm((0,Rr.M3)(r));performance.clearMarks(e),performance.mark(e)}},[r]);var o=function(e){var n=(0,t.useContext)(k.b).logPageLoadTimeEvent,a=(0,t.useRef)({x:0,y:0}),i=(0,t.useContext)($n.Z).image;return(0,t.useCallback)(function(t){if(e&&e(t),a.current!==t.sizeInPixels){var r=vm((0,Rr.M3)(i)),o=window.requestAnimationFrame(function(){setTimeout(function(){n({pageLoadTimeMs:al(r),component:r})})});return a.current=t.sizeInPixels,function(){window.cancelAnimationFrame(o)}}},[e,i,n])}(a.onMainTextureLoaded);return n().createElement(e,ym({},a,{onMainTextureLoaded:o,ref:i}))})}((D_=f_,(0,t.forwardRef)(function(e,a){var i=this,r=e.setImageLayer,o=e.image,s=e.onMainTextureLoaded,c=(0,t.useCallback)(function(e){s&&s(e);var t,n,a,c=(0,Rr.YG)(o);c&&r&&(t=i,void 0,a=function(){var e;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){switch(t.label){case 0:return[4,S_(c)];case 1:return e=t.sent(),r("original",e),[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())}))},[o,s,r]);return n().createElement(D_,I_({},e,{onMainTextureLoaded:c,ref:a}))}))))),O_=function(){return O_=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O_.apply(this,arguments)},w_=(0,t.memo)(function(e){var a,i,r=e.markupContentItems,o=e.setAriaAnnouncement,s=e.removeMarkupContent,c=e.setShouldUpdateImageOverlay,d=e.shouldCleanupMarkup,l=e.disabled,u=(0,t.useContext)(go.B_).Canvas,f=r.length>0;a=!l,i=(0,t.useContext)($n.Z).setImageLayer,(0,t.useEffect)(function(){a&&i("overlay",null)},[a,i]),function(e,n,a){(0,t.useEffect)(function(){a&&e(n)},[a,n,e])}(c,f,!l),function(e,n){var a=(0,t.useContext)(go.B_).setCanvasMethods;(0,t.useEffect)(function(){!e&&n&&a(go.BU)},[e,a,n])}(f,d);var p=function(e,n,a){var i=(0,t.useRef)(e),r=(0,t.useContext)(go.B_).localizationStrings,o=(0,t.useCallback)(function(e){var t,o,s,c=(t=r,o=e.length,s=i.current.length,(0,A.J)(t.markup_removedInkStrokesAriaLive,o.toString(),s.toString()));n(e),a(c)},[r,i,n,a]);return i.current=e,o}(r,s,o);return l?null:n().createElement(u,O_({},e,{removeMarkupContent:p}))}),E_=I(3883);function A_(e){return Math.max(1.5,Math.ceil(.2*e))}function L_(e){var t=e<12?3:2;return Math.max(e/2+t,4)}var k_='<path d="M2.61668 8.01447L2.95461 7.67687L4.80895 5.82223L4.81034 5.82084L6.148 4.48324V4.803C6.148 5.44733 6.6703 5.96967 7.3146 5.96967C7.959 5.96967 8.4813 5.44733 8.4813 4.803V1.75556C8.4813 1.74038 8.481 1.72526 8.4805 1.71018C8.4921 1.3982 8.3785 1.08066 8.1396 0.841709C7.9006 0.602758 7.5831 0.489234 7.2711 0.500811C7.256 0.500271 7.2409 0.5 7.2257 0.5H4.14777C3.50344 0.5 2.9811 1.02233 2.9811 1.66667C2.9811 2.311 3.50344 2.83333 4.14777 2.83333H4.49803L0.966869 6.36445C0.685479 6.62925 0.522129 6.9496 0.502069 7.28601C0.482019 7.62218 0.608909 7.93241 0.828849 8.15235C1.04879 8.3723 1.35902 8.49919 1.69519 8.47915C2.03157 8.4591 2.35189 8.29579 2.61668 8.01447Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>',M_='<path d="M4.4835 7.16661L5.82698 5.8229L5.82702 5.82287L5.82972 5.82017L7.1667 4.48324V4.803C7.1667 5.44733 7.689 5.96966 8.3333 5.96966C8.9777 5.96966 9.5 5.44733 9.5 4.803V1.75555C9.5 1.74038 9.4997 1.72526 9.4992 1.71018C9.5108 1.3982 9.3972 1.08066 9.1583 0.841709C8.9193 0.602756 8.6018 0.489233 8.2898 0.50081C8.2747 0.500271 8.2596 0.5 8.2444 0.5H5.16647C4.52214 0.5 3.99981 1.02233 3.99981 1.66667C3.99981 2.311 4.52214 2.83333 5.16647 2.83333H5.51674L2.83333 5.5167V5.15776C2.83333 4.51343 2.311 3.9911 1.66667 3.9911C1.02234 3.9911 0.5 4.51343 0.5 5.15776V8.24438C0.5 8.25955 0.50027 8.27468 0.50081 8.28975C0.48923 8.60174 0.60276 8.91928 0.84171 9.15823C1.08066 9.39718 1.3982 9.51071 1.71019 9.49913C1.72527 9.49967 1.74039 9.49994 1.75556 9.49994H4.8219C5.46623 9.49994 5.98857 8.9776 5.98857 8.33327C5.98857 7.68894 5.46623 7.16661 4.8219 7.16661H4.4835Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>',P_=window.btoa("<svg width='48' height='47' viewBox='0 0 48 47' fill='none' xmlns='http://www.w3.org/2000/svg'>\n<g filter='url(#filter0_dd)'>\n  <circle cx='24' cy='20' r='16' fill='white' fill-opacity='0.8'/>\n</g>\n<defs>\n  <filter id='filter0_dd' x='0.8' y='2.38419e-07' width='46.4' height='46.4' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'>\n    <feFlood flood-opacity='0' result='BackgroundImageFix'/>\n    <feColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/>\n    <feOffset dy='3.2'/>\n    <feGaussianBlur stdDeviation='3.6'/>\n    <feColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.13 0'/>\n    <feBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/>\n    <feColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/>\n    <feOffset dy='0.6'/>\n    <feGaussianBlur stdDeviation='0.9'/>\n    <feColorMatrix type='matrix' values='0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0'/>\n    <feBlend mode='normal' in2='effect1_dropShadow' result='effect2_dropShadow'/>\n    <feBlend mode='normal' in='SourceGraphic' in2='effect2_dropShadow' result='shape'/>\n  </filter>\n</defs>\n</svg>"),T_=(0,X.Rz)([At.SA,At.di,At.hI],function(e,t,n){var a=Eo(t,n).inkBrush,i=a.thicknessInCssPixels,r=a.htmlColor,o=a.strokeShape,s=I(4830),c=I(5605);switch(e){case Xo.Mu:return function(e,t,n){var a=L_(t);return"url(data:image/svg+xml;base64,".concat(window.btoa(function(e,t,n,a){var i=A_(t),r=2*t+30;return"\n    <svg\n      height='".concat(r,"'\n      width='").concat(r,"'\n      xmlns='http://www.w3.org/2000/svg'\n      viewBox='0 0 ").concat(r," ").concat(r,"'\n    >\n      <circle\n        cx='50%'\n        cy='50%'\n        r='").concat(t,"'\n        stroke='white'\n        stroke-width='").concat(i,"'\n        fill='").concat(e,"'\n        shape-rendering='geometricPrecision'\n      />\n      '").concat(function(e,t,n,a,i){var r=e/2+n+t+1,o=e/2;switch(i){case E_.x.NoArrow:return;case E_.x.SingleArrow:return function(e,t){return"\n    <svg x='".concat(e,"' y='").concat(t,'\' width="9" height="9" viewBox="0 0 9 9" fill="black" xmlns="http://www.w3.org/2000/svg">\n    ').concat(k_,"\n    </svg>")}(r,o);case E_.x.DoubleArrow:return function(e,t){return"\n    <svg x='".concat(e,"' y='").concat(t,'\' width="10" height="10" viewBox="0 0 10 10" fill="black" xmlns="http://www.w3.org/2000/svg">\n    ').concat(M_,"\n    </svg>")}(r,o)}}(r,i,t,0,a),"'\n      </svg>")}(e,a,0,n)),") ").concat(a+15," ").concat(a+15)}(r,i,o.arrowMode)+", url(".concat(s.default,"), crosshair");case Xo.cw:return function(e,t){var n=Math.max(10,t),a=n/2,i=n/5;return"url(data:image/svg+xml;base64,".concat(window.btoa(function(e,t){var n=Math.min(.1*t,1.5),a=t/2,i=t;return"<svg\n      height='".concat(i,"'\n      width='").concat(a,"'\n      xmlns='http://www.w3.org/2000/svg'\n      viewBox='0 0 ").concat(a," ").concat(i,"'\n    >\n      <rect\n        height='").concat(i,"'\n        width='").concat(a,"'\n        cx='50%'\n        cy='50%'\n        stroke='white'\n        stroke-width='").concat(n,"'\n        fill='").concat(e,"'\n      />\n    </svg>")}(e,n)),") ").concat(a-i," ").concat(a)}(r,i)+", url(".concat(s.default,"), crosshair");case Xo.d9:return"url(data:image/svg+xml;base64,".concat(P_,") 24 20, url(").concat(c.default,"), default");case Xo.Vm:default:return"default"}}),U_={removeMarkupContent:Yt.Gp,setActiveMarkupToolType:Ce.uZ,setAriaAnnouncement:J.r9,setShouldUpdateImageOverlay:Ce.cb,setStrokeShapeTipVisibilityState:Ce.Oo,setMarkupCursorScreenPosition:Ce.D4,moveMarkupCursorScreenPositionBy:Ce.Rh,setIsKeyboardInputActive:Ce.iy,addMarkupContent:Yt.kS,updateMarkupContent:Ms.L,setShowInkStylePicker:Ce.IE,setLinePreviewCoords:Ce.tl,setActiveMarkupContentId:Yt.py,setMarkupTextSelection:Yt.gU,setMarkupTextStyleAttributes:Yt.iM},F_=(0,g.Ng)(function(e){var t=e.transformTools,n=t.view,a=n.viewportPixelSize,i=n.viewportCssSize,r=t.image.originalPixelSize,o=t.device.pixelRatio;return{cropViewTransform:td(e),imageViewTransform:(0,Ao.h)(e),originalImagePixelSize:r,cssToPhysicalPixelRatio:o,width:a.x,height:a.y,cssWidth:i.width,cssHeight:i.height,markupContentItems:e.markup.markupContentItems,shouldCleanupMarkup:void 0!==e.uiState.nextEditorActivity&&e.uiState.activeEditorActivity===Me.Y4,activeMarkupToolType:e.uiState.markupUiState.activeMarkupToolType,previousActiveMarkupToolType:e.uiState.markupUiState.previousActiveMarkupToolType,activeInkBrush:e.uiState.markupUiState.inkBrushes[e.uiState.markupUiState.activeInkBrushId],cursor:T_(e),hidden:e.uiState.activeEditorActivity!==Me.Y4,disabled:e.uiState.activeEditorActivity!==Me.Y4&&(0===e.markup.markupContentItems.length&&0===e.markup.undoRedoStack.redoStack.length||!e.uiState.waitingForMarkupOverlayTexture),isKeyboardInputActive:e.uiState.markupUiState.isKeyboardInputActive,cursorScreenPos:e.uiState.markupUiState.markupCursorScreenPosition,linePreviewCoords:e.uiState.markupUiState.linePreviewCoords,markupTextStyleAttributes:e.markup.markupTextStyleAttributes,activeMarkupContentId:e.markup.activeMarkupContentId}},U_)(w_),H_=(0,t.memo)(function(e){var a=e.showGapBetweenToolbarAndStylePicker,i=void 0!==a&&a,r=e.showStylePickerInFullWidth,o=void 0!==r&&r,s=e.dialogType,c=e.stylePickerPopUpPositionSource,d=e.showMarkupToolbar,l=void 0===d||d,u=e.isEditorFocused,f=(0,t.useContext)(q.u).enableMarkup,p=(0,t.useContext)(go.B_),m=p.markupToolbarStyles,_=(0,p.getMarkupToolbarPosition)(m);return f?n().createElement(n().Fragment,null,n().createElement(F_,{isEditorFocused:u}),l&&"Inline"!==_?n().createElement(Ot,{match:Me.Y4},n().createElement(Qo,{key:"".concat(_,"InkConnect"),showGapBetweenToolbarAndStylePicker:i,showStylePickerInFullWidth:o,dialogType:s,stylePickerPopUpPositionSource:c})):null):null}),R_=n().memo(function(e){var n=e.handleSizeCss,a=e.handleHitAreaSizeCss,i=e.setCropHandleSizeCss;return(0,t.useLayoutEffect)(function(){i({handleSizeCss:n,handleHitAreaSizeCss:a})},[i,n,a]),null}),N_={setCropHandleSizeCss:Re.qq},B_=(0,g.Ng)(void 0,N_)(R_),j_=function(){function e(e,t,n){void 0===n&&(n=void 0),this._name=e,this._defineIdentifierName=t,this._shaderInputProvider=n}return e.prototype.getName=function(){return this._name},e.prototype.getUniformNames=function(e){return[]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return"\n#define ".concat(this._defineIdentifierName)},e.prototype.getShaderFunctionBody=function(e){return""},e.prototype.onBeforeBabylonRender=function(e,t){var n;null===(n=this._shaderInputProvider)||void 0===n||n.onBeforeBabylonRender(e,t)},e}(),V_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),z_=function(e){function t(){return e.call(this,"MainImageShader",(0,Em.T)("main"))||this}return V_(t,e),t}(j_),G_=null,K_=null;function W_(){G_=new Im;var e=new z_;G_.registerEffect(e,0),K_=Hm(G_)}function q_(){if(G_||W_(),!G_)throw new Error("imageEffectRegistry is not initialized");return G_}var Q_=I(7799),Y_=I(2327),J_=I(6038),X_="NoiseBlurShader",Z_="uBlurRadius@",$_="uInvertMask@",eh=function(){function e(e,t,n){void 0===n&&(n=!0),this._blurRadiusInTexturePixels=1,this._shouldInvertMask=!1,this._isWebGL2=!1,this._sourceLayerName=e,this._maskLayerName=t,this._isWebGL2=n}return e.prototype.getMaskLayerName=function(){return this._maskLayerName},e.prototype.setBlurRadiusInTexturePixels=function(e){this._blurRadiusInTexturePixels=e},e.prototype.setShouldInvertMask=function(e){this._shouldInvertMask=e},e.prototype.getName=function(){return X_+this._sourceLayerName+this._maskLayerName?"_".concat(this._maskLayerName):""},e.prototype.getUniformNames=function(e){return[e(Z_),e($_)]},e.prototype.getFunctions=function(){var e,t,n=void 0===this._maskLayerName;return[Om,(e=!!this._maskLayerName&&(0,J_.S)(this._maskLayerName,this._isWebGL2),t=n,void 0===t&&(t=!1),"\n#define NUM_SAMPLES 32\n#define GOLDEN_ANGLE_IN_RADIANS 2.39996\n\n".concat("\n#ifndef RANDOM_FLOAT_FROM_VECTOR_2\n#define RANDOM_FLOAT_FROM_VECTOR_2\nfloat randomFloatFromVector2(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n#endif\n","\n\nvec2 getBlurUv(float blurRadius, vec2 textureSizeInPixels){\n    return vec2( blurRadius / textureSizeInPixels.x , blurRadius / textureSizeInPixels.y );\n}\n\nvec2 getNormalizedSpiralOffsetAtSampleIndex(int sampleIndex,float randomInitialAngle){\n    float normalizedRadius = float(sampleIndex)/float(NUM_SAMPLES-1);\n    normalizedRadius = pow(normalizedRadius,0.5);//take the square root to make the samples approximate equal amounts of area. ie, more samples at larger radii.\n    float theta = float(sampleIndex)*GOLDEN_ANGLE_IN_RADIANS + randomInitialAngle;\n    vec2 normalizedOffset = normalizedRadius*vec2(cos(theta),sin(theta));\n    return normalizedOffset;\n}\n\nvec4 sampleWithNoiseBlur( sampler2D sampler,").concat(t?"":"sampler2D maskSampler,"," vec2 uvMain,vec2 uvMask, float blurRadiusInPixels, vec2 maskTextureSizeInPixels,vec2 mainTextureSizeInPixels, float invertMask){\n\n    vec2 blurUvMask = getBlurUv(blurRadiusInPixels,maskTextureSizeInPixels);\n    vec2 blurUvMain = getBlurUv(blurRadiusInPixels,mainTextureSizeInPixels);\n\n    vec4 result = vec4(0.);\n    float randomAngle = 2.*3.141992*randomFloatFromVector2(uvMain);\n    \n    float maskValues[NUM_SAMPLES];\n    float sumOfMaskValues = 0.;\n    for(int i=0;i<NUM_SAMPLES;i++){\n        vec2 normalizedOffset = getNormalizedSpiralOffsetAtSampleIndex(i,randomAngle);\n        vec2 uvMask2 = uvMask + blurUvMask*normalizedOffset;\n        float maskValue = ").concat(t?"1.0":"texture2D(maskSampler,uvMask2).".concat(e?"r":"a"),";\n        maskValue = mix(maskValue,1.-maskValue,invertMask);\n        maskValues[i] = maskValue;\n        sumOfMaskValues += maskValue;\n    }\n\n    float averageMaskValue = sumOfMaskValues / float(NUM_SAMPLES);\n\n    // Decrease the blur radius as the mask gets closer to 0.\n    // This helps to the foreground from bleeding into the blurred background.\n    blurUvMain *= averageMaskValue;\n    blurUvMask *= averageMaskValue;\n\n    float sumOfWeights = 0.;\n    vec4 originalColor = texture2D(sampler,uvMain);\n    float maskValue = maskValues[0];\n    float weight = maskValue * originalColor.a;\n    result.rgb = toLinearSpace(originalColor.rgb * weight);\n    sumOfWeights += weight;\n\n    for(int i=1;i<NUM_SAMPLES;i++){\n        vec2 normalizedOffset = getNormalizedSpiralOffsetAtSampleIndex(i,randomAngle);\n        vec2 uvMain2 = uvMain + blurUvMain*normalizedOffset;\n        vec4 sampledColor = texture2D(sampler,uvMain2);\n        float maskValue = maskValues[i];\n        float weight = maskValue * sampledColor.a;\n        sampledColor.rgb = toLinearSpace(sampledColor.rgb);\n        result += sampledColor * weight;\n        sumOfWeights += weight;\n    }\n\n    if(sumOfWeights<0.1){\n        //if the weights are too low, just return the original pixel.\n        return originalColor;\n    }\n        \n    result /= float(sumOfWeights);\n    result.rgb = mix(originalColor.rgb,toGammaSpace(result.rgb),maskValue);\n    result.a = originalColor.a;\n\n    return result;\n}\n"))]},e.prototype.getHeaderCode=function(e){return e(" //".concat(X_,"\n    //disable main texture sampling because this effect overrides it.\n    #define ").concat(km.DO,"\n    ").concat(this._maskLayerName?(0,Y_.A)(this._maskLayerName):"","\n    ").concat((0,Y_.A)(this._sourceLayerName),"\n    uniform float ").concat(e(Z_),";\n    uniform float ").concat(e($_),";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=$m(this._sourceLayerName);return e("//".concat(X_,"\n      {             \n          vec2 sourceTextureUv = ").concat(t?"".concat(Ur.k.uv,".xy"):"(vec3(".concat(Ur.k.uv,".x,").concat(Ur.k.uv,".y,1.0) * ").concat(Ur.k.singleTileTextureUvTransform,").xy"),";\n          \n          vec2 sourceTextureSizeInPixels = ").concat("".concat(t?Ur.k.subTexturePixelSize:Ur.k.fullTexturePixelSize),";\n          \n          gl_FragColor = sampleWithNoiseBlur(                                                                         \n            ").concat((0,Am.X)(this._sourceLayerName),",\n            ").concat(this._maskLayerName?(0,Am.X)(this._maskLayerName)+",":"","\n            sourceTextureUv,\n            ").concat(Ur.k.uv,".xy,\n            ").concat(e(Z_),",\n            ").concat(Ur.k.subTexturePixelSize,",\n            sourceTextureSizeInPixels,\n            ").concat(e($_),"\n            );\n\n          mainTextureColor = gl_FragColor;\n      }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(Z_),this._blurRadiusInTexturePixels),e.setFloat(t($_),this._shouldInvertMask?1:0)},e}(),th=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),nh=function(e){function t(){return e.call(this,"SingleTileMainImageShader",(0,Em.T)("singleTileMain"))||this}return th(t,e),t}(j_),ah=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ih=function(e){function t(){return e.call(this,"SingleTileTempShader",(0,Em.T)("singleTileTemp"))||this}return ah(t,e),t}(j_),rh=function(){function e(e,t,n){this._imageEffectRegistry=new Im,this._blurShader=new eh(t,n,e),this._imageEffectRegistry.registerEffect(function(e){switch(e){case"main":return new z_;case"singleTileMain":return new nh;case"singleTileTemp":return new ih;default:throw new Error("Unhandled source layer name: ".concat(e))}}(t),0),this._imageEffectRegistry.registerEffect(this._blurShader,1)}return e.prototype.getShaderProgramSource=function(){return Hm(this._imageEffectRegistry)},e.prototype.getImageEffectRegistry=function(){return this._imageEffectRegistry},e.prototype.setBlurRadiusInTexturePixels=function(e){this._blurShader.setBlurRadiusInTexturePixels(e)},e.prototype.getBlurMaskLayerName=function(){return this._blurShader.getMaskLayerName()},e}(),oh=I(4459);function sh(e,t){var n=e.x/e.y;return{x:Math.min(t,Math.floor(n*t)),y:Math.min(t,Math.floor(t/n))}}function ch(e){var t=e.getCaps().maxTextureSize;return Math.min(4096,"number"==typeof t&&t||2048)}var dh=I(2827),lh=function(){return lh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lh.apply(this,arguments)};function uh(e){var n=(0,t.useContext)(Wm.M),a=n.engine,i=n.textureManager,r=n.effectRenderer,o=n.effectWrapperManager,s=(0,t.useContext)(Bm.A).renderList,c=(0,t.useContext)($n.Z).setImageLayer,d=(0,t.useRef)(null);(0,t.useEffect)(function(){d.current=null,c(e,null)},[e,c]);var l=(0,t.useCallback)(function(){s.requestRender()},[s]);return(0,t.useCallback)(function(t,n,s,u){if(!a)throw new Error("No engine");if(!i)throw new Error("No texture manager");if(!r)throw new Error("No effect renderer");if(!o)throw new Error("No effect wrapper manager");if(!t)throw new Error("No existing main texture");var f=ch(a),p=sh({x:t.width,y:t.height},f),m=d.current||a.createRenderTargetTexture({width:p.x,height:p.y},{generateMipMaps:!1});if(function(e,t,n,a,i,r,o,s){var c=ch(t),d=sh({x:e.width,y:e.height},c);s||((s=(0,ku.W)()).main=lh(lh({},e),{orientation:Bp.Hf})),function(e,t,n,a,i,r,o,s,c){void 0===s&&(s=!0),void 0===c&&(c=gm.vL);var d=r.x,l=r.y;t_((0,dh.p)((0,it.W3)(d,l),it.Rl,l/2),a,c,n,i,e,t,s,o)}(t,n,r,o,s,d,i,!0)}(t,a,r,0,m,n,s,u),null===d.current){d.current=m;var _=new oh.Al(m.texture);_.wrapU=oh.JM.TEXTURE_CLAMP_ADDRESSMODE,_.wrapV=oh.JM.TEXTURE_CLAMP_ADDRESSMODE;var h={texture:_,dispose:function(){m.dispose()}},b={top:0,left:0,width:p.x,height:p.y},g={width:b.width,height:b.height,orientation:Bp.Hf,parts:[{texture:h.texture,rect:b}]},v={width:b.width,height:b.height,id:"renderedTexture_"+(0,rd.b)().toString(),texture:g,dispose:h.dispose};c(e,v)}l()},[a,i,r,o,c,e,l])}var fh=function(){return fh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fh.apply(this,arguments)};function ph(e,n,a,i){var r=(0,t.useContext)(Wm.M),o=r.engine,s=r.textureManager,c=r.effectRenderer,d=r.effectWrapperManager,l=(0,t.useContext)($n.Z).image,u=i.getBlurMaskLayerName(),f=void 0!==u,p=l&&(0,Rr.l_)(l)?l.main:null,m=l&&u&&(0,Rr.l_)(l)?l[u]:null,_=l&&(0,Rr.l_)(l)?l[e]:null,h=p&&(null==s?void 0:s.getAlreadyLoadedTexture(p)),b=m&&(null==s?void 0:s.getAlreadyLoadedTexture(m)),g=_&&(null==s?void 0:s.getAlreadyLoadedTexture(_)),v=uh(n);return(0,t.useCallback)(function(t){if(!o)throw new Error("No engine");if(!s)throw new Error("No TextureManager");if(!c)throw new Error("No effect renderer");if(!d)throw new Error("No effect wrapper manager");if(!h)throw new Error("No existing main texture");if(f&&!b)throw new Error("No existing mask texture");i.setBlurRadiusInTexturePixels(t);var n=(0,ku.W)();n[e]=g||null,n.backgroundMask=b||null,n.main=fh(fh({},h),{orientation:Bp.Hf}),v(h,a,i.getImageEffectRegistry(),n)},[e,o,s,c,d,h,b,g,v,a,i,f])}var mh=I(1284);function _h(){var e=(0,t.useContext)($n.Z).image,n=e&&(0,Rr.l_)(e)?e.main:null,a=(0,t.useContext)(Wm.M).textureManager,i=n&&(null==a?void 0:a.getAlreadyLoadedTexture(n));if(i)return i.parts.length>1}function hh(){var e=_h();return(0,t.useMemo)(function(){return{pass1SourceLayer:e?"singleTileMain":"main",pass1TargetLayer:"singleTileTemp",pass2SourceLayer:"singleTileTemp",pass2TargetLayer:"singleTileBackground"}},[e])}var bh=n().memo(function(e){var n=e.mainTextureContentHash,a=e.maskTextureContentHash,i=e.blurRadius,r=e.sharpness;return function(e,n,a,i,r,o,s,c,d,l,u,f){var p=_h(),m=function(e){var n=q_(),a=(0,t.useRef)(void 0),i=(0,t.useContext)(Wm.M).textureManager,r=(0,t.useContext)($n.Z).image,o=r&&(0,Rr.l_)(r)?r.main:null;a.current=o&&(null==i?void 0:i.getAlreadyLoadedTexture(o));var s=uh("singleTileMain");return(0,t.useCallback)(function(){if(!e)throw new Error("No effect wrapper");if(!a.current)throw new Error("No existing main texture");s(a.current,e,n)},[s,e,n])}(l),_=function(e,n,a,i){var r=hh(),o=r.pass1SourceLayer,s=r.pass1TargetLayer,c=r.pass2SourceLayer,d=r.pass2TargetLayer,l=ph(o,s,e,n),u=(0,t.useRef)(l);u.current=l;var f=ph(c,d,a,i),p=(0,t.useRef)(f);p.current=f;var m,_,h,b=(0,t.useRef)(0),g=(0,t.useCallback)(function(){f(.7*b.current)},[f]);return m=c,_=g,h=(0,mh.H)(m),(0,t.useEffect)(function(){h&&_()},[h,_]),(0,t.useMemo)(function(){return kp()(function(e){b.current=e,window.requestAnimationFrame(function(){u.current(.3*e),p.current(.7*e)})},100,{trailing:!0})},[])}(o,s,c,d),h=function(e,n){var a=ph(_h()?"singleTileMain":"main","singleTilePreSharpen",e,n),i=(0,t.useRef)(a);return i.current=a,(0,t.useMemo)(function(){return kp()(function(e){var t=2*(e-.5),n=8*Math.abs(t);t<0&&(n*=.5),window.requestAnimationFrame(function(){i.current(n)})},100,{trailing:!0})},[])}(u,f),b=(0,t.useContext)($n.Z).image,g=b&&(0,Rr.l_)(b)?b.main:null,v=(0,mh.H)("main"),y=(0,mh.H)("singleTileMain"),S=(0,t.useRef)(""),D=(0,t.useRef)(""),I=(0,t.useRef)(E.pS);(0,t.useEffect)(function(){if(n&&g&&v){var t="".concat(g.id,"_").concat(e),o="".concat(g.id,"_").concat(e,"_").concat(r,"_").concat(a),s=p&&y||!p&&v,c=o!==D.current&&s&&a>0,d=p&&S.current!==t,l=i!==I.current&&i!==E.pS&&s;(d||c||l)&&(d&&(S.current=t),c&&(D.current=o),l&&(I.current=i),setTimeout(function(){d&&m(),c&&_(a),l&&h(i)},0))}},[g,e,m,v,r,_,n,a,i,p,y,h])}(n,e.enabled,i,r,a,e.blurPass1EffectWrapper,e.blurPass1EffectRegistry,e.blurPass2EffectWrapper,e.blurPass2EffectRegistry,e.mainImageEffectWrapper,e.preSharpenEffectWrapper,e.preSharpenEffectRegistry),null}),gh=function(){return gh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gh.apply(this,arguments)},vh=n().memo(function(e){var a=hh(),i=a.pass1SourceLayer,r=a.pass2SourceLayer,o="backgroundMask",s=(0,Q_.h)(),c=(0,t.useMemo)(function(){return new rh(s,i,o)},[i,o,s]),d=a_(c.getShaderProgramSource()),l=(0,t.useMemo)(function(){return new rh(s,r,o)},[r,o,s]),u=a_(l.getShaderProgramSource()),f=a_(function(){if(K_||W_(),!K_)throw new Error("shaderSource is not initialized");return K_}()),p=(0,t.useMemo)(function(){return new rh(s,i)},[i,s]),m=a_(p.getShaderProgramSource());return d&&u&&f&&m?n().createElement(bh,gh({blurPass1EffectWrapper:d,blurPass1EffectRegistry:c,blurPass2EffectWrapper:u,blurPass2EffectRegistry:l,mainImageEffectWrapper:f,preSharpenEffectWrapper:m,preSharpenEffectRegistry:p},e)):null}),yh=function(){return yh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yh.apply(this,arguments)},Sh=n().memo(function(e){var a=(0,t.useContext)(Wm.M).textureManager,i=(0,t.useContext)($n.Z).image,r=i&&(0,Rr.l_)(i)?i.main:null,o=i&&(0,Rr.l_)(i)?i.backgroundMask:null,s=r&&(null==a?void 0:a.getAlreadyLoadedTexture(r)),c=o&&(null==a?void 0:a.getAlreadyLoadedTexture(o)),d=(0,t.useRef)(!1),l=e.enabled&&s&&c,u=e.enabled&&s&&e.sharpness!==E.pS;return d.current||l||u?(d.current=!0,n().createElement(vh,yh({},e))):null}),Dh=I(4393),Ih=(0,X.Rz)([Dh.p9,function(e,t){return t}],function(e,t){return e.reduce(function(e,n){return(0,Jt.n)(n.algorithmParameters.layerToPatch,t)&&(e+=n.idValue.toString()+"_"),e},"")}),xh=I(8708),Ch=(0,X.Rz)([un._w,de.NC,un.BA],function(e,t,n){var a,i,r;return"BlurredBackground"===n.type?(a=e.blurLevel,i=Math.max(t.x,t.y),r=(0,H.W4)(xh.y2,xh.h1,a),Math.max(xh.gR,xh.zh*i)*r):0}),Oh=(0,g.Ng)(function(e){var t=(0,At._o)(e)===Me.NF,n="BlurredBackground"===(0,un.BA)(e).type,a=e.colorAdjustments.baseAdjustments.sharpness!==E.pS;return{mainTextureContentHash:Ih(e,"main"),maskTextureContentHash:Ih(e,"backgroundMask"),blurRadius:Ch(e),sharpness:e.colorAdjustments.baseAdjustments.sharpness,enabled:n||a||t}},{})(Sh);function wh(e){return(0,t.useMemo)(function(){var t=Hn(e),n=gm.Qf;return t&&(n=[t[0],t[1],t[2],1]),n},[e])}var Eh=function(){return Eh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Eh.apply(this,arguments)},Ah=function(){function e(e){this.cache={},this.engine=e}return e.prototype.getEffectWrapper=function(e){var t=e.name;if(this.cache[t])return this.cache[t].effectWrapperPromise;var n=new oh.$G(Eh({engine:this.engine},e)),a=new Promise(function(e,t){n.effect.onError=function(e,n){t(n)},n.effect.executeWhenCompiled(function(){e(n)})});return this.cache[t]={effectWrapper:n,effectWrapperPromise:a},a},e}(),Lh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),kh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lh(t,e),Object.defineProperty(t.prototype,"needPOTTextures",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(oh.DB),Mh=function(){function e(e,t,n){var a=this;this.getTexture=function(e,t,n,i,r,o){void 0===i&&(i=!1);var s=a.getTextureId(e);if(!(e instanceof HTMLImageElement)||e.complete&&e.currentSrc){var c=a._loadableTexturesMap.has(s)&&a._loadableTexturesMap.get(s);if(c)return c.refCount++,void(c.isLoaded?c.texture&&t({height:c.loadedHeight,width:c.loadedWidth,id:c.id,texture:c.texture}):c.onReadyCallbacksList.push(t));var d=[t],l=a._missingTextureIdToTextureLoadedCallbacksMap.get(s);l&&(d.push.apply(d,l),a._missingTextureIdToTextureLoadedCallbacksMap.delete(s));var u=a._loadableTexturesMap;u.set(s,{id:s,isLoaded:!1,onReadyCallbacksList:d,refCount:1}),(0,Rr.F8)(e)&&a._disposableTexturesMap.set(s,e.dispose),a._textureLoadFn(e,function(e,t,n){var a=u.get(s);if(a){var i={id:s,isLoaded:!0,onReadyCallbacksList:a.onReadyCallbacksList,refCount:a.refCount,texture:e,loadedHeight:n,loadedWidth:t};u.set(s,i),i.onReadyCallbacksList.forEach(function(a){a&&a({id:s,height:n,width:t,texture:e})})}},function(e){r(e)},n,i,o)}else r({id:"ImageNotLoaded",message:"The image ".concat(s," is not yet loaded")})},this.dispose=function(){a._loadableTexturesMap.forEach(function(e){a._disposeTextureById(e.id)}),a._loadableTexturesMap.clear()},this.decrementTextureRefCount=function(e){var t=a._loadableTexturesMap.get(e);t&&(t.refCount<=1?a.releaseTexture(e):t.refCount--)},this.releaseTexture=function(e){a._disposeTextureById(e)},this.getTextureBytes=function(e,t){return a._getTextureBytes(a.getAlreadyLoadedTextureOrThrow(e),t)},this.getTextureSize=function(e){var t=a.getAlreadyLoadedTextureOrThrow(e);return{x:t.width,y:t.height}},this.registerTextureLoadedCallback=function(e,t){var n=a._loadableTexturesMap.get(e);if(n)n&&n.onReadyCallbacksList.push(t),n.isLoaded&&t({id:e,height:n.loadedHeight,width:n.loadedWidth,texture:n.texture});else{var i=a._missingTextureIdToTextureLoadedCallbacksMap.get(e);i?i.push(t):a._missingTextureIdToTextureLoadedCallbacksMap.set(e,[t])}},this.unRegisterTextureLoadedCallback=function(e,t){var n=a._loadableTexturesMap.get(e);n&&(n.onReadyCallbacksList=n.onReadyCallbacksList.filter(function(e){return e!==t}));var i=a._missingTextureIdToTextureLoadedCallbacksMap.get(e);i&&a._missingTextureIdToTextureLoadedCallbacksMap.set(e,i.filter(function(e){return e!==t}))},this._disposeTextureById=function(e){var t;a._disposableTexturesMap.has(e)&&(null===(t=a._disposableTexturesMap.get(e))||void 0===t||t(),a._disposableTexturesMap.delete(e));var n=a._loadableTexturesMap.get(e);(null==n?void 0:n.isLoaded)&&(a._textureUnloadFn(n.texture),a._loadableTexturesMap.delete(e))},this._textureLoadFn=e,this._textureUnloadFn=t,this._getTextureBytes=n,this._loadableTexturesMap=new Map,this._disposableTexturesMap=new Map,this._missingTextureIdToTextureLoadedCallbacksMap=new Map}return e.prototype.getAlreadyLoadedTexture=function(e){var t="string"==typeof e?e:(0,Rr.r9)(e);return this._getTexture(t)},e.prototype.getAlreadyLoadedTextureOrThrow=function(e){var t=this.getAlreadyLoadedTexture(e);if(!t)throw new Error("texture not found for "+e);return t},e.prototype.getTextureId=function(e){var t=(0,Rr.r9)(e);if(""===t)throw new Error("Image id cannot be empty");return t},e.prototype._getTexture=function(e){var t=this._loadableTexturesMap.has(e)&&this._loadableTexturesMap.get(e);if(t&&t.isLoaded)return t.texture},e}();function Ph(e,t){if(t<=0)throw new RangeError("Invalid max Size");for(var n=[],a=0,i=0;i<e.height;){for(;a<e.width;)n.push({left:e.left+a,top:e.top+i,width:Math.min(e.width-a,t),height:Math.min(e.height-i,t)}),a+=t;a=0,i+=t}return n}var Th=I(4295);function Uh(e,t){return(0,Rr.r9)(e)+"".concat(t.left,"_").concat(t.top,"_").concat(t.width,"_").concat(t.height)}var Fh=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},Hh=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};var Rh=I(7197);function Nh(e){switch(e){case oh.JM.TEXTUREFORMAT_RGBA:return _m.A.RGBA;case oh.JM.TEXTUREFORMAT_RGB:return _m.A.RGB;case oh.JM.TEXTUREFORMAT_RED:return _m.A.A}throw new Error("babylonJsFormat unsupported")}var Bh=I(8008),jh=I(3534);function Vh(e,t,n){if(!(0,Se.yR)({top:t.y,left:t.x,width:e.width,height:e.height},{top:0,left:0,width:n.width,height:n.height}))throw new RangeError("Src of "+e.width+"x"+e.height+" at ("+t.x+","+t.y+") is not within dst "+n.width+"x"+n.height+" to be copied.");if(!(0,Rr.mR)(e.width,e.height,e.format,e.bytes)||!(0,Rr.mR)(n.width,n.height,n.format,n.bytes))throw Error("Byte array does not have a valid length.");for(var a=e.bytes,i=n.bytes,r=(0,cm.x)(e.format),o=e.width*r,s=(n.width-e.width)*r,c=0,d=(t.y*n.width+t.x)*r,l=e.bytes.byteLength;c<l;)i.set(a.subarray(c,c+o),d),c+=o,d+=o+s}function zh(e,t,n){var a,i;if(0===e.parts.length)throw new Error("BabylonMultiTexture has no parts");var r=null===(i=null===(a=e.parts[0].texture)||void 0===a?void 0:a.getInternalTexture())||void 0===i?void 0:i.format;if(void 0===r)throw new Error("Could not get format from first texture part");var o=Nh(r),s=(0,cm.x)(o),c=new Uint8ClampedArray(t.width*t.height*s);return e.parts.forEach(function(e){!function(e,t,n,a,i){var r=(0,Se.kR)(t,e.rect);if(r&&(0,Bh.I)(r)){var o=(0,jh.w)(r,e.rect),s=e.texture;if(!s)throw new Error("texture part texture is missing");var c=function(e,t,n){if(!t)throw new Error("engine not available!");if(!t._gl)throw new Error("gl not available!");var a=e.getInternalTexture();if(!a)throw new Error("could not get internal texture!");var i=n.left,r=n.top,o=n.width,s=n.height,c=(0,cm.x)(_m.A.RGBA),d=new Uint8Array(o*s*c);return t._readTexturePixelsSync(a,o,s,void 0,void 0,d,void 0,void 0,i,r),function(e,t,n,a){var i=Nh(t),r=(0,cm.x)(_m.A.RGBA),o=(0,cm.x)(i);if(i!==_m.A.RGBA){for(var s=new Uint8ClampedArray(n*a*o),c=0;c<e.length;c+=r)for(var d=0;d<o;d++)s[c/r+d]=e[c+d];return s}return e}(new Uint8ClampedArray(d.buffer,d.byteOffset,d.byteLength),a.format,o,s)}(s,n,o),d=r.left-t.left,l=r.top-t.top;Vh({bytes:c,width:o.width,height:o.height,format:i,id:"src-copyRectangleInMultiTextureFromTexturePartToBytes"},{x:d,y:l},{bytes:a,width:t.width,height:t.height,format:i,id:"dest-copyRectangleInMultiTextureFromTexturePartToBytes"})}}(e,t,n,c,o)}),{bytes:c,format:o}}var Gh=n().memo(function(e){var a=e.children,i=e.width,r=e.height,o=e.cssWidth,s=e.cssHeight,c=e.tabIndex,d=e.onPointerDown,l=e.onPointerMove,u=e.onPointerUp,f=e.onWheel,p=e.onTouchDown,m=e.onTouchMove,_=e.onTouchUp,h=e.onDoubleTap,b=e.onUnmount,g=e.cssToPhysicalPixelRatio,v=e.color,y=e.isAnimating,S=e.title,D=(0,t.useState)(null),I=D[0],x=D[1],C=(0,t.useState)(0),O=C[0],w=C[1],E=function(e){var n=(0,t.useContext)(q.u).disableWebGL2Support,a=(0,t.useRef)(),i=(0,t.useRef)(),r=(0,t.useRef)();return(0,t.useLayoutEffect)(function(){if(e){var t=new kh(e,!1,{alpha:!0,antialias:!1,stencil:!1,depth:!1,disableWebGL2Support:n,xrCompatible:!1}),o=new oh.U5(t);t.setAlphaMode(oh.JM.ALPHA_COMBINE),t.setViewport({x:0,y:0,width:1,height:1}),a.current=t,i.current=o,r.current=new Ah(t)}return function(){var e;null===(e=a.current)||void 0===e||e.dispose(),a.current=void 0,i.current=void 0,r.current=void 0}},[e,n]),[a.current,i.current,r.current]}(I),A=E[0],L=E[1],M=E[2];!function(e){var n=(0,t.useContext)(k.b).logWarningEvent;(0,t.useEffect)(function(){if(e){var t=e.onContextLostObservable.add(function(){n({id:"WebGlContextLost",message:"WebGL context was lost on a WebGL canvas."})});return function(){e.onContextLostObservable.remove(t)}}},[e,n])}(A),(0,Qe.R)({htmlElement:I,cssToPhysicalPixelRatio:g,onPointerDown:d,onPointerMove:l,onPointerUp:u,onUnmount:b}),(0,Ke.s)(I),(0,qe.O)(g,I,f),(0,Ye.y)(g,I,p,m,_,h);var P=function(e){var n=e?ch(e):void 0,a=(0,t.useMemo)(function(){if(e)return new Mh(function(t,n,a,i,r,o){void 0===r&&(r=!0),void 0===o&&(o=oh.JM.TEXTURE_DEFAULT_ANISOTROPIC_FILTERING_LEVEL);var s=ch(e);r=!!(0,l_.t)(e)&&r;var c=function(){return a({id:"CreateTextureFailed",message:"loadTexture failed to create a texture"})};(function(e,t,n,a,i,r){return Fh(this,void 0,void 0,function(){var o,s,c,d,l,u=this;return Hh(this,function(f){switch(f.label){case 0:if((0,Rr.F8)(e))return[2,e.texture];o={top:0,left:0,width:e.width,height:e.height},s=[],f.label=1;case 1:return f.trys.push([1,3,,4]),c=Ph(o,i),d=function(i){return Fh(u,void 0,void 0,function(){var o,s,c,d;return Hh(this,function(l){switch(l.label){case 0:return[4,Nr()];case 1:if(l.sent(),!(o=function(e,t){var n;if((0,Rr.F8)(e))throw Error("Error: Cannot extract subImage from image of type ImageFromBabylonMultiTexture");return(0,Rr.BK)(e)?e.renderCanvas(e.canvasMethods.getHTMLCanvas,{x:e.width,y:e.height},t,null!==(n=e.orientation)&&void 0!==n?n:Bp.Hf):t.width===e.width&&t.height===e.height&&0===t.left&&0===t.top?e:(0,Rr.ny)(e)?function(e,t){if(!(0,Rr.mR)(e.width,e.height,e.format,e.bytes))throw Error("Error: Could not extract subImage from invalid ImageBytes array");var n=(0,Th.R)(e,e.width,t);return{bytes:n.bytes,format:n.format,width:t.width,height:t.height,id:Uh(e,t)}}(e,t):function(e,t){var n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.id=Uh(e,t);var a=n.getContext("2d");if(a)return a.drawImage(e,t.left,t.top,t.width,t.height,0,0,t.width,t.height),n}(e,t)}(e,i)))throw new Error("Failed to create sub texture");return s=function(e,t,n,a){return(0,Rr.ny)(e)?function(e,t,n,a){if(!function(e,t,n){return function(e,t,n){return Math.min(n/e,n/t)}(e,t,ch(n))<1}(e.width,e.height,n)){var i=function(e){switch(e){case _m.A.RGBA:return oh.JM.TEXTUREFORMAT_RGBA;case _m.A.RGB:return oh.JM.TEXTUREFORMAT_RGB;case _m.A.A:return oh.JM.TEXTUREFORMAT_RED}}(e.format),r=new Uint8Array(e.bytes.buffer,e.bytes.byteOffset,e.bytes.byteLength);return n.createRawTexture(r,e.width,e.height,i,t,!1,oh.JM.TEXTURE_TRILINEAR_SAMPLINGMODE,null,oh.JM.TEXTURETYPE_UNSIGNED_BYTE)}a({id:"ImageTooBig",message:"The supplied image size of"+" ".concat(e.width,"x").concat(e.height," ")+"exceeds max texture size of ".concat(ch(n))})}(e,t,n,a):e instanceof HTMLImageElement?function(e,t,n,a){var i=void 0;if(i=n.createTexture(null,!t,!1,null,void 0,null,function(e){a({id:"CreateTextureFailed",message:"Babylon engine.createTexture failed with message: ".concat(e)})},e)){if(i.width!==e.width||i.height!==e.height)throw new Error("Babylon engine.createTexture created a texture with the wrong size");return i.format=oh.JM.TEXTUREFORMAT_RGBA,i}a({id:"CreateTextureFailed",message:"failed to get canvas from imageElement"})}(e,t,n,a):e instanceof HTMLCanvasElement?function(e,t,n,a){var i,r=function(e){var t=e.width,n=e.height,a=document.createElement("canvas");a.width=t,a.height=n;var i=a.getContext("2d");if(i)return i.scale(1,-1),i.drawImage(e,0,0,t,n,0,0,e.width,-1*e.height),a}(e);if(r){var o=null!==(i=new oh.vj(r,{generateMipMaps:t,engine:n,samplingMode:oh.JM.TEXTURE_TRILINEAR_SAMPLINGMODE}).getInternalTexture())&&void 0!==i?i:void 0;return o?o.format=oh.JM.TEXTUREFORMAT_RGBA:a({id:"CreateTextureFailed",message:"Failed to create HtmlElementTexture"}),o}a({id:"CreateTextureFailed",message:"Failed to flip canvas"})}(e,t,n,a):void 0}(o,t,n,r),s?((c=new oh.Al(null))._texture=s,c.wrapR=oh.JM.TEXTURE_CLAMP_ADDRESSMODE,c.wrapU=oh.JM.TEXTURE_CLAMP_ADDRESSMODE,c.wrapV=oh.JM.TEXTURE_CLAMP_ADDRESSMODE,c.anisotropicFilteringLevel=a,(0,Rr.BK)(e)&&(d=e.canvasMethods.restoreHTMLCanvas)&&d(),[2,{texture:c,rect:i}]):[2]}})})},[4,Cr(c,d).promise];case 2:return s=f.sent().filter(function(e){return!!e}),[3,4];case 3:return l=f.sent(),r({id:"CreateTextureFailed",message:l instanceof Error?l.message:"sub texture extraction failed."}),[3,4];case 4:return[2,{width:e.width,height:e.height,parts:s,orientation:(0,Km.A)(e)}]}})})})(t,r,e,o,s,a).then(function(e){e?(0,Rh.M)(t)?n(e,e.height,e.width):n(e,e.width,e.height):c()}).catch(function(){c()})},function(e){e.parts.forEach(function(e){var t;null===(t=e.texture)||void 0===t||t.dispose()})},function(t,n){return zh(t,n,e)})},[e]);return function(e){var n=(0,t.useContext)(k.b).logMaxTextureSizeEvent;(0,t.useEffect)(function(){e&&n({value:e})},[n,e])}(n),(0,t.useEffect)(function(){return function(){return null==a?void 0:a.dispose()}},[a]),a}(A),T=(0,t.useCallback)(function(){w(function(e){return e+1})},[]),U=(0,t.useMemo)(function(){return{canvasContextIsValid:!0,canvas:I||void 0,textureManager:P,engine:A,effectRenderer:L,effectWrapperManager:M,onTextureLoaded:T,numTexturesLoaded:O}},[I,P,A,L,M,T,O]),F=e.cursor||"default";i_((0,t.useCallback)(function(){A&&v&&A.clear({r:v[0],g:v[1],b:v[2],a:v[3]},!0,!0)},[A,v]),-1);var H=(0,t.useContext)(Bm.A).renderList;return(0,t.useLayoutEffect)(function(){I&&(I.width=i,I.height=r,H.renderNow())},[i,r,I,H]),n().createElement(Wm.M.Provider,{value:U},n().createElement("canvas",{"data-test-id":y?"canvas-animating":"canvas-idle",tabIndex:c,"aria-hidden":void 0===c||c<0,ref:x,style:{cursor:F,width:o,height:s,touchAction:"none",display:"block",position:"absolute",outline:"none"},title:S}),a)}),Kh=I(1165),Wh={handlePointerMove:Ne.Kd,handlePointerDown:Ne.fy,handlePointerUp:Ne.UI,handleMouseWheel:Re.vc,handleTouchDown:Re.Lm,handleTouchMove:Re.qb,handleTouchUp:Re.fz,handleDoubleTap:Re.eY,handleCleanup:Re.j6,handleFrameTick:Re.pl,abortCurrentMode:Re.zs,setAriaAnnouncementScenario:J.Ac,handleZoomDeltaChange:Re.D_},qh=(0,g.Ng)(function(e){var t=e.transformTools,n=t.animations,a=n.needsFrameTick,i=n.image.animatedMatrix,r=t.device.pixelRatio,o=t.view,s=o.viewportPixelSize,c=o.viewportCssSize,d=e.uiState.activeEditorActivity,l=(0,oi.T)(e),u=(0,oi.b)(e),f=i||l,p=(0,at.j)(e);return{imageTransformValues:f,imagePixelSize:u,canvasPixelSize:s,canvasCssSize:c,isPointerInImage:(0,Kh.u)(e),isPointerOverCropHandle:lt(e),cursorStyle:(0,nt.g)(e),cssToPhysicalPixelRatio:r,needsFrameTick:a,currentZoom:p,activeEditorActivity:d}},Wh)(function(e){var a=e.handlePointerDown,i=e.handlePointerMove,r=e.handlePointerUp,o=e.handleMouseWheel,s=e.handleTouchDown,c=e.handleTouchMove,d=e.handleTouchUp,l=e.handleDoubleTap,u=e.handleCleanup,f=e.handleFrameTick,p=e.abortCurrentMode,m=e.setAriaAnnouncementScenario,_=e.handleZoomDeltaChange,h=e.cssToPhysicalPixelRatio,g=e.needsFrameTick,v=e.canvasPixelSize,S=e.canvasCssSize,D=e.isPointerInImage,I=e.isPointerOverCropHandle,x=e.cursorStyle,C=e.backgroundColor,O=e.currentZoom,w=e.children,E=e.animationSpeedMultiplier,A=e.activeEditorActivity,L=(0,t.useContext)(y.x).strings,k=wh((0,b.D)().palette.neutralLighterAlt),M=(0,t.useMemo)(function(){if(A===Me.I8){if(I)return L.crop_cornerTooltip;if(D)return L.crop_rectangleTooltip}},[A,D,I,L]),P=(0,t.useCallback)(function(e){o(e),m({type:"Zoom",zoom:O})},[o,m,O]);(0,t.useEffect)(function(){var e=0,t=null!=E?E:1;t<=0&&(console.warn("animationSpeedMultiplier ignored. Value must be > 0."),t=1);var n=function(){e=window.requestAnimationFrame(n),f((new Date).getTime()*t)};if(g)return e=window.requestAnimationFrame(n),function(){window.cancelAnimationFrame(e)}},[g,f,E]);var T=Ia(O,m,_),U=T.zoomIn,F=T.zoomOut;return(0,t.useEffect)(function(){var e=function(e){"Esc"!==e.key&&"Escape"!==e.key||p(),e.ctrlKey&&("+"===e.key||"="===e.key||e.keyCode===or.ES||e.keyCode===or.Ks?(e.preventDefault(),U()):"-"!==e.key&&e.keyCode!==or.bB||(e.preventDefault(),F()))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[p,U,F]),n().createElement(Bm.X,null,n().createElement(Gh,{width:v.x,height:v.y,color:C||k,cssWidth:S.width,cssHeight:S.height,title:M,cursor:x,onPointerDown:a,onPointerMove:i,onPointerUp:r,onWheel:P,onTouchDown:s,onTouchMove:c,onTouchUp:d,onDoubleTap:l,onUnmount:u,cssToPhysicalPixelRatio:h,isAnimating:g},w))});function Qh(e,t,n,a){if(void 0===n&&(n={left:0,top:0,width:t.x,height:t.y}),e){var i=e({x:n.width,y:n.height},function(e,t,n){return(0,it.XG)((0,it.cQ)(-t.left,-t.top),(0,it.W3)(e.x,e.y),(0,it.iE)((0,Bp.zb)(n)))}(t,n,a));return i&&(i.id=(0,yu.b)().toString()),null!=i?i:void 0}}var Yh=function(){return Yh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yh.apply(this,arguments)};function Jh(e,t){void 0===t&&(t=void 0);var n=(0,s_.y)(e);if(!n)return null;var a={width:n.x,height:n.y,orientation:(0,Km._)(e),id:"markupOverlay"+(0,yu.b)().toString()};if(!t){var i=_m.A.RGBA,r=n.x*n.y*(0,cm.x)(i);return Yh(Yh({},a),{bytes:new Uint8ClampedArray(r),format:i})}return t.getHTMLCanvas?Yh(Yh({},a),{canvasMethods:t,renderCanvas:Qh}):null}var Xh=n().memo(function(e){var n=e.shouldSetMarkupOverlay,a=e.shouldSetEmptyMarkupOverlay,i=e.currentContentHash,r=e.setWaitingForMarkupOverlayTexture,o=(0,t.useContext)($n.Z),s=o.image,c=o.setImageLayer,d=(0,t.useContext)(go.B_),l=d.canvasMethods,u=d.wetCanvasIsReady,f=d.setCanvasMethods,p=(0,t.useRef)(function(){throw new Error("generateMarkupOverlayImage function is empty")}),m=(0,t.useRef)(i),_=(0,t.useCallback)(function(){r(!0),u&&(p.current(),f(go.BU))},[f,r,u]);return(0,t.useEffect)(function(){p.current=function(){if(!(l.getHTMLCanvas&&l.restoreHTMLCanvas&&s))throw new Error("canvasMethods missing in generateMarkupOverlayImage");c("overlay",Jh(s,l))}},[l,s,c]),(0,t.useEffect)(function(){m.current!==i&&(n?_():a&&""===i&&s&&c("overlay",Jh(s)),m.current=i)},[s,u,f,n,a,r,_,i,c]),(0,t.useEffect)(function(){var e=(0,Rr.l_)(s)&&s.overlay;n&&!e&&_()},[u,s,f,r,n,_]),null}),Zh={setWaitingForMarkupOverlayTexture:Ce.id},$h=(0,g.Ng)(function(e){var t=e.uiState.activeEditorActivity===Me.Y4,n=e.markup.markupContentItems.length>0,a=e.markup.undoRedoStack.redoStack.length>0,i=n||a,r=i&&!t&&!!(0,de.Qi)(e),o=i&&t&&void 0!==e.uiState.nextEditorActivity,s=e.markup.markupContentItems.map(function(e){return"".concat(e.id)}).join("_"),c=!t;return{originalImagePixelSize:e.transformTools.image.originalPixelSize,shouldSetMarkupOverlay:r||o,currentContentHash:s,shouldSetEmptyMarkupOverlay:c}},Zh)(Xh),eb=(0,t.createContext)({textures:{},urlsById:{},loadUrls:function(){}}),tb=function(){return tb=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tb.apply(this,arguments)},nb=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},ab=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ib=(0,t.memo)(function(e){var a=e.filters,i=e.children,r=function(e,n){var a=(0,t.useContext)(q.u).enableFilters,i=(0,Or.Dj)(),r=(0,t.useState)({}),o=r[0],s=r[1],c=(0,t.useCallback)(function(){Jf().then(function(e){var t=e.defaultLutUrlDictionary;s(t)}).catch(function(e){return i({id:"CodeSplitFailed",message:"Failed to load LUT data URLs"})})},[i]),d=function(e,n,a,i){var r=this,o=(0,t.useState)({}),s=o[0],c=o[1],d=(0,Or.Dj)(),l=(0,t.useCallback)(function(e){return nb(r,void 0,void 0,function(){var t;return ab(this,function(a){switch(a.label){case 0:return[4,v_(e)];case 1:return t=a.sent(),[2,new Promise(function(a,i){n&&n.getTexture(t,function(t){a(tb(tb({},t),{url:e}))},Rm.lut,!1,function(e){var t={id:"CreateLutThumbnailTextureFailed",message:"LutThumbnailTexture: "+e.message};d(t),i()},1)})]}})})},[d,n]),u=(0,t.useCallback)(function(e){return null==n?void 0:n.decrementTextureRefCount(e)},[n]);return(0,t.useEffect)(function(){if(e&&a.length>0){var t=!0,n=[],o=Cr(a,function(e){return nb(r,void 0,void 0,function(){var a;return ab(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),zt(e)&&i[e.lutUrlId]?[4,l(i[e.lutUrlId])]:[3,2];case 1:if(a=r.sent(),t)return n.push(a.id),[2,a];u(a.id),r.label=2;case 2:return[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}})})}),s=o.promise,d=o.cancel;return s.then(function(e){if(t){var n={};e.forEach(function(e){return e&&(n[e.url]=e.texture)}),c(n)}},function(){}),function(){d(),t=!1,n.forEach(function(e){return u(e)}),n=[],c({})}}},[a,e,l,u,i]),s}(a,e,n,o);return(0,t.useMemo)(function(){return{textures:d,urlsById:o,loadUrls:c}},[d,o,c])}((0,t.useContext)(Wm.M).textureManager,a);return n().createElement(eb.Provider,{value:r},i)}),rb=(0,g.Ng)(function(e){return{filters:e.filters.availableFilters}})(ib),ob=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},sb=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},cb=function(e,t){e.width=t.x,e.height=t.y};function db(e,t,n,a){n(),lb(e,t),a.renderNow()}var lb=function(e,t){e.width=t.x,e.height=t.y};function ub(e,t,n,a){return ob(this,void 0,void 0,function(){var i,r,o,s,c;return sb(this,function(d){switch(d.label){case 0:return i=[null,function(){}],n&&e?(o=function(){},s=new Promise(function(e){return o=e}),c=function(e){r=e,o()},n.getTexture(e,c,t,!0,a),[4,s]):[3,2];case 1:d.sent(),r&&r.texture&&(i=[r.texture,function(){r&&n.decrementTextureRefCount(r.id)}]),d.label=2;case 2:return[2,i]}})})}function fb(e,t,n){return ob(this,void 0,void 0,function(){var a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S,D;return sb(this,function(I){switch(I.label){case 0:return a=(0,ku.W)(),i=[],e.main?[4,ub(e.main,Rm.main,t,n)]:[3,2];case 1:r=I.sent(),o=r[0],s=r[1],o&&(a.main=o,i.push(s)),I.label=2;case 2:return e.overlay?[4,ub(e.overlay,Rm.overlay,t,n)]:[3,4];case 3:c=I.sent(),d=c[0],l=c[1],d&&(a.overlay=d,i.push(l)),I.label=4;case 4:return e.singleTileBackground?[4,ub(e.singleTileBackground,Rm.singleTileBackground,t,n)]:[3,6];case 5:u=I.sent(),f=u[0],p=u[1],f&&(a.singleTileBackground=f,i.push(p)),I.label=6;case 6:return e.backgroundMask?[4,ub(e.backgroundMask,Rm.backgroundMask,t,n)]:[3,8];case 7:m=I.sent(),_=m[0],h=m[1],_&&(a.backgroundMask=_,i.push(h)),I.label=8;case 8:return e.eraseMask?[4,ub(e.eraseMask,Rm.eraseMask,t,n)]:[3,10];case 9:b=I.sent(),g=b[0],v=b[1],g&&(a.eraseMask=g,i.push(v)),I.label=10;case 10:return e.objectSegmentationPreview?[4,ub(e.objectSegmentationPreview,Rm.objectSegmentationPreview,t,n)]:[3,12];case 11:y=I.sent(),S=y[0],D=y[1],S&&(a.objectSegmentationPreview=S,i.push(D)),I.label=12;case 12:return[2,[a,function(){i.forEach(function(e){return e()})}]]}})})}function pb(e){return t=this,void 0,a=function(){var t,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S,D;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(I){switch(I.label){case 0:return t=e.image,n=e.renderList,a=e.canvas,i=e.renderImage,r=e.textureManager,o=e.customEdits,s=e.errorCallback,c=e.engine,d=e.waitForRenderingToBeReady,l=e.setEffectLevels,u=e.restoreOverlayCanvas,f=e.cropTransformValues,p=e.imageTransformValues,[4,fb(t,r,s)];case 1:return m=I.sent(),_=m[0],h=m[1],null==u||u(),a&&(null==_?void 0:_.main)?(o&&(f=(0,rt.qq)(o.cropRectangle),p=(0,tn.D)(o.imageTransform)),[4,d(_,l)]):[2,null];case 2:return I.sent(),b={x:a.width,y:a.height},g=(0,rt.GM)(f),cb(a,{x:g.width,y:g.height}),c&&(v=function(e,t,n,a){var i=n.getRenderWidth(),r=n.getRenderHeight(),o=(0,rt.GM)(e),s=o.width,c=o.height;(0,cs.F)(s)&&(0,cs.F)(c)||a({id:"InvalidInput",message:"Expected integer input values for getTransformsToFitOutputImageInCanvas(). Received cropRectangle values of (width: ".concat(s,", height: ").concat(c,").")});var d=Math.min(i/s,r/c);return d<1?(a({id:"ImageTooBig",message:"Output image was resized because it exceeds max canvas drawing buffer size (width: ".concat(i,", height: ").concat(r,"), use getEditedImageBytes to get the full image data")}),{scaledCropTransform:(0,it.XG)((0,it.W3)(d),e),scaledImageTransform:(0,it.XG)((0,it.W3)(d),t)}):void 0}(f,p,c,s),v&&(f=v.scaledCropTransform,p=v.scaledImageTransform,g=(0,rt.GM)(f),cb(a,{x:g.width,y:g.height}))),y=(0,it.XG)((0,it.cQ)(-g.left,-g.top),p),S=(0,it.XG)((0,it.cQ)(-g.left,-g.top),f),i(y,_,S,l),D=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return null==n||n.drawImage(e,0,0),t}(a),db(a,b,h,n),D||s({id:"CreateEditedImageFailed",message:"Could not create edited image in HTMLCanvasElement format."}),[2,D]}})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())});var t,n,a}function mb(e){return t=this,void 0,a=function(){var t,n,a;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(i){switch(i.label){case 0:return t=e.getRenderWidth(),n=e.getRenderHeight(),[4,e.readPixels(0,0,t,n,!0)];case 1:return a=i.sent(),[2,(0,Rr.tt)(t,n,_m.A.RGBA,new Uint8ClampedArray(a.buffer))]}})},new((n=void 0)||(n=Promise))(function(e,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n(function(e){e(a)})).then(r,o)}s((a=a.apply(t,[])).next())});var t,n,a}var _b=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},hb=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function bb(e){return _b(this,void 0,void 0,function(){var t,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S,D=this;return hb(this,function(I){switch(I.label){case 0:return t=e.image,n=e.renderList,a=e.canvas,i=e.renderImage,r=e.textureManager,o=e.customEdits,s=e.errorCallback,c=e.engine,d=e.waitForRenderingToBeReady,l=e.setEffectLevels,u=e.restoreOverlayCanvas,f=e.cropTransformValues,p=e.imageTransformValues,[4,fb(t,r,s)];case 1:return m=I.sent(),_=m[0],h=m[1],null==u||u(),a&&(null==_?void 0:_.main)&&c?(o&&(f=(0,rt.qq)(o.cropRectangle),p=(0,tn.D)(o.imageTransform)),[4,d(_,l)]):[2,null];case 2:I.sent(),b={x:a.width,y:a.height},g=function(e,t){var n=(0,it.St)(e),a=(0,rt.FN)(t).y;return(0,dh.p)(n,it.Rl,a)}(p,f),v=(0,rt.GM)(f),y=Ph(v,2048),S=(0,Rr.tt)(v.width,v.height,_m.A.RGBA);try{return y.forEach(function(e){return _b(D,void 0,void 0,function(){var t,n,r,o,s;return hb(this,function(d){switch(d.label){case 0:return cb(a,{x:e.width,y:e.height}),t=(0,it.cQ)(-e.left,-e.top),n=(0,it.XG)(t,g),r=(0,it.XG)(t,f),i(n,_,r,l),[4,mb(c)];case 1:if(!(o=d.sent()))throw new Error("Error: Could not create edited image in ImageBytes format.");return(s=(0,Se.iz)(e,-v.top,-v.left)).top=v.height-s.top-s.height,Vh(o,{x:s.left,y:s.top},S),[2]}})})}),db(a,b,h,n),[2,S]}catch(e){return s({id:"CreateEditedImageFailed",message:e instanceof Error?e.message:"unknown error"}),db(a,b,h,n),[2,null]}return[2]}})})}var gb=I(7740),vb=function(){return vb=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vb.apply(this,arguments)},yb=function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})},Sb=function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Db=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},Ib="VignetteShader",xb="uCropTransformInverse@",Cb="uLevel@",Ob=function(){function e(){this._transform=(0,it.yz)(),this._level=0}return e.prototype.setTransform=function(e){this._transform=e},e.prototype.getTransform=function(){return this._transform},e.prototype.setLevel=function(e){this._level=e},e.prototype.getName=function(){return Ib},e.prototype.getUniformNames=function(e){return[e(xb),e(Cb)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n          //".concat(Ib,"---\n          uniform mat3 ").concat(xb,";\n          uniform float ").concat(Cb,";\n        "))},e.prototype.getShaderFunctionBody=function(e){return e("\n        //".concat(Ib,"---\n        vec3 normalizedPos@ = vec3(").concat(Ur.k.screenPixelPos,".x, ").concat(Ur.k.screenPixelPos,".y,1.0) * ").concat(xb,";\n\n        float shouldMix@ = step(0.0, normalizedPos@.x) * step(0.0, normalizedPos@.y) * step(0.0, 1.0 - normalizedPos@.x) * step(0.0, 1.0 - normalizedPos@.y);\n        float dist@ = distance(normalizedPos@.xy, vec2(0.5));\n        float vignetteSize@ = 0.5;\n        float gradient@ = smoothstep(0.8, vignetteSize@ * 0.799, dist@ * (abs(").concat(Cb," * 0.525) + vignetteSize@));\n        vec3 color@ = gl_FragColor.rgb;\n\n        // white\n        if(").concat(Cb,"< 0.) {\n          color@ = mix(vec3(1.), gl_FragColor.rgb, gradient@);\n        }\n\n        // black\n        if(").concat(Cb,"> 0.) {\n          color@ = mix(vec3(0.), gl_FragColor.rgb, gradient@);\n        }\n\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, color@, shouldMix@);\n      "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setMatrix3x3(t(xb),new Float32Array(Db(Db([],(0,it.iE)(this._transform),!0),[0,0,1],!1))),e.setFloat(t(Cb),this._level)},e}(),wb=I(8055),Eb=I(9758),Ab=(0,t.forwardRef)(function(e,n){var a=(0,t.useContext)(Wm.M),i=a.canvasContextIsValid,r=a.canvas,o=a.engine,s=a.effectRenderer,c=a.textureManager;if(!i)throw new SyntaxError("Invalid BabylonCanvasComponentContext.  The BabylonOffscreenImageRenderConnectImpl component must be used within an BabylonCanvas component");var d=(0,t.useContext)(Sm).registry;if(!d)throw new SyntaxError("Invalid ImageEffectContext.  The BabylonOffscreenImageRenderConnect component must be used within an BabylonImage component");var l=(0,t.useContext)(eb),u=(0,t.useRef)(l);u.current=l;var f=(0,t.useRef)(void 0),p=function(e){var n=(0,t.useContext)(Sm).registry;if(!n)throw new SyntaxError("Invalid ImageEffectContext.  The BabylonOffscreenImageRenderConnect component must be used within an BabylonImage component");var a=(0,t.useContext)(Wm.M).effectWrapperManager,i=function(){var e,n,a,i,r=(0,t.useContext)(q.u).enableFilters,o=(0,t.useContext)(eb),s=o.textures,c=o.urlsById,d=o.loadUrls,l=!r||0!==Object.keys(s).length&&0!==Object.keys(c).length;return e=l,n=l?void 0:d,a=(0,t.useRef)(function(){}),i=(0,t.useState)(function(){return new Promise(function(e){return a.current=e})})[0],(0,t.useEffect)(function(){e&&a.current()},[e]),(0,t.useCallback)(function(){return n&&n(),i},[n,i])}(),r=function(){var e=(0,t.useContext)(Sm).registry,n=(0,t.useRef)(e);return n.current=e,(0,t.useCallback)(function(e){if(void 0!==e)return!0;if(n.current)return void 0!==(t=Pr(n.current))&&0!==t.getLevel();var t;throw new Error("effectRegistryRef.current not set in getHasLuts")},[])}();return(0,t.useCallback)(function(t,o){return new Promise(function(s,c){var d=r(o),l=Hm(n);if(d&&!Pr(n)){var u=new Mr;n.registerEffect(u,6)}if(null!==t.overlay&&!(0,wb.v)(n)){var f=new Eb.y;n.registerEffect(f,23)}var p=null==a?void 0:a.getEffectWrapper(l);if(!p)return c("missing effect wrapper promise!");p.then(function(t){if(e.current=t,!d)return s();i().then(s,c)},c)})},[i,n,r,a,e])}(f);if(!Wn().getState().transformTools)throw new Error("Invalid redux store in BabylonOffscreenImageRenderConnect, must contain ITransformToolsState");return function(e,n,a,i,r,o){var s=this,c=(0,t.useContext)(k.b),d=c.logFailedToGetEditedImageEvent,l=c.logSuperResolutionAppliedEvent,u=(0,t.useContext)(Bm.A).renderList,f=(0,t.useContext)(go.B_).canvasMethods,p=(0,t.useContext)($n.Z).image,m=(0,t.useRef)(p);m.current=p;var _=(0,t.useContext)(qc).resizedImageWithStatus.image,h=(0,t.useRef)(_);h.current=_;var b=(0,Or.Dj)(),g=Wn(),v=(0,t.useCallback)(function(e,t){if(e){var n=Jh(e,f);if(n)return vb(vb({},e),{overlay:n})}return e},[f]);(0,t.useImperativeHandle)(r,function(){var t={renderList:u,canvas:e,textureManager:n,renderImage:a,engine:o,waitForRenderingToBeReady:i};return{getEditedImageBytes:function(e,n,a){return yb(s,void 0,void 0,function(){var i,r,s,c,u,p,m,_,y;return Sb(this,function(S){switch(S.label){case 0:return i=null,o?(null===(y=h.current)||void 0===y?void 0:y.main)&&(0,Rr.ny)(h.current.main)?(i=h.current.main,l({scenario:"export",isIntentional:!1}),[3,3]):[3,1]:[3,3];case 1:return r=g.getState(),s=r.transformTools,c=s.cropInteraction.uvToWorld,u=s.image,p=u._preciseUvToWorld,m=u.originalPixelSize,_=v(e,m),[4,bb(vb(vb({},t),{image:_,cropTransformValues:c,imageTransformValues:p,customEdits:n,errorCallback:b,setEffectLevels:a,restoreOverlayCanvas:f.restoreHTMLCanvas}))];case 2:i=S.sent(),S.label=3;case 3:return i?i.id=(0,gb.g)():d(),[2,i]}})})},getEditedImage:function(n,a,i){return yb(s,void 0,void 0,function(){var r,o,s,c,l,u,p,m,_;return Sb(this,function(y){switch(y.label){case 0:return r=null,e?(null===(_=h.current)||void 0===_?void 0:_.main)&&(0,Rr.ny)(h.current.main)?(r=null,b({id:"GetEditedImageFailed",message:"Cannot call getEditedImage when there is a resized image. Must use getEditedImageBytes instead."}),[3,3]):[3,1]:[3,3];case 1:return o=g.getState(),s=o.transformTools,c=s.cropInteraction.uvToWorld,l=s.image,u=l._preciseUvToWorld,p=l.originalPixelSize,m=v(n,p),[4,pb(vb(vb({},t),{image:m,cropTransformValues:c,imageTransformValues:u,customEdits:a,errorCallback:b,setEffectLevels:i,restoreOverlayCanvas:f.restoreHTMLCanvas}))];case 2:r=y.sent(),y.label=3;case 3:return r||d(),[2,r]}})})},getImageLayerBytes:function(e){var t=m.current;if(!t)throw new Error("texture not found in getImageLayerBytes");var a=t[e],i=a&&(null==n?void 0:n.getAlreadyLoadedTexture(a));if(!i)return Promise.resolve(null);if(!o)throw new Error("engine not defined");var r=i.width,s=i.height,c=zh(i,{top:0,left:0,width:r,height:s},o),d=c.bytes,l=c.format;return Promise.resolve({bytes:d,width:r,height:s,orientation:void 0,format:l,id:(0,gb.g)()})},getImageRegionLayerBytes:function(e,t){var a=m.current;if(!a)throw new Error("texture not found in getImageLayerBytes");var i=a[e],r=i&&(null==n?void 0:n.getAlreadyLoadedTexture(i));if(!r)return null;if(!o)throw new Error("engine not defined");var s=zh(r,t,o),c=s.bytes,d=s.format;return{bytes:c,width:t.width,height:t.height,format:d,id:(0,gb.g)()}}}},[u,e,n,a,o,i,g,v,b,f,d,l])}(r,c,(0,t.useCallback)(function(e,t,n,a){var i,r,c,l=void 0,p=(i=n,r=void 0,(c=d.getEffects().find(function(e){return e.getName()===Ib}))&&i&&(r=c.getTransform(),c.setTransform(i)),function(){c&&r&&c.setTransform(r)}),m=(0,Tr.G)(d,t.overlay?1:0);if(a&&(l=a(d,{lutTextures:u.current.textures,lutUrlsById:u.current.urlsById})),!f.current)throw new Error("missing effectWrapper!");null==o||o.clear({r:1,g:1,b:1,a:0},!0,!1),t_(e,d,gm.jw,f.current,t,o,s,!0),l&&l(),p(),m()},[d,o,s]),p,n,o),null});function Lb(e){var t=e.toString();return t.includes(".")?t:t+"."}var kb="CIRCLE_CURSOR_SHADER_NAME",Mb="uCursorScreenPos@",Pb="uRotationInRadians@",Tb="uCursorRadius@",Ub=Lb(16),Fb=function(){function e(){this._cursorScreenPosition={x:0,y:0},this._animTimeMilliseconds=0,this._cursorRadiusInScreenPixels=20}return e.prototype.setCursorScreenPosition=function(e){this._cursorScreenPosition=e},e.prototype.setAnimTimeMilliseconds=function(e){this._animTimeMilliseconds=e},e.prototype.setCursorRadiusInScreenPixels=function(e){this._cursorRadiusInScreenPixels=e},e.prototype.getName=function(){return kb},e.prototype.getUniformNames=function(e){return[e(Mb),e(Pb),e(Tb)]},e.prototype.getFunctions=function(e){return["\n#ifndef SMOOTH_BUMP\n#define SMOOTH_BUMP\nfloat smoothBump(float x1,float x2, float x3, float x4,float x){\n  return mix(smoothstep(x1,x2,x),1. - smoothstep(x3,x4,x),step(x3,x));\n}\n#endif\n"]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(kb,"\n        uniform vec2 ").concat(Mb,";\n        uniform float ").concat(Pb,";\n        uniform float ").concat(Tb,";\n        "))},e.prototype.getShaderFunctionBody=function(e){return e("\n            //".concat(kb,"\n            {\n              float distance@ = distance(").concat(Mb,", ").concat(Ur.k.screenPixelPos,");                \n              float alpha@ = smoothBump(").concat(Tb,"-1.0,").concat(Tb,",").concat(Tb," + ").concat(Lb(1),",").concat(Tb," + ").concat(Lb(1),"+1.0, distance@);\n\n              if(alpha@ > 0.){\n                vec2 offset@ = normalize(").concat(Ur.k.screenPixelPos," - ").concat(Mb,"); \n                float theta@ = atan(offset@.y, offset@.x) + ").concat(Pb,";\n                float arcLenth@ = ").concat(Tb,"*theta@;\n                float numDashesInCircle@ = ").concat(Ub,";\n                float dashLength@ = 2. * ").concat(Math.PI," * ").concat(Tb," / numDashesInCircle@;\n                float lineAlt@ = mod(arcLenth@, dashLength@ * 2.);\n                float bumpVal@ = smoothBump(dashLength@ * 0.5 - 0.5,dashLength@ * 0.5 + 0.5,dashLength@ * 1.5 - 0.5,dashLength@ * 1.5 + 0.5,  lineAlt@);\n                vec4 color1@ = vec4(1., 1., 1., 1.);\n                vec4 color2@ = vec4(0., 0., 0., 1.);\n                gl_FragColor =  mix(gl_FragColor,mix(color1@,color2@, bumpVal@), alpha@);\n              }\n            }\n        "))},e.prototype.getRotationInRadians=function(){return-2*Math.PI*(this._animTimeMilliseconds%5e3)/5e3},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat2(t(Mb),this._cursorScreenPosition.x,this._cursorScreenPosition.y),e.setFloat(t(Pb),this.getRotationInRadians()),e.setFloat(t(Tb),this._cursorRadiusInScreenPixels)},e}();function Hb(e,n,a){void 0===a&&(a=!0);var i=(0,t.useContext)(Sm).registry;if(!i)throw new Error("effectRegistry missing in useRegisterShaderEffect");var r=(0,t.useRef)(),o=(0,t.useCallback)(function(){r.current&&(i.unRegisterEffect(r.current),r.current=void 0)},[i]);a?r.current!==e&&(o(),i.registerEffect(e,n),r.current=e):o(),(0,t.useLayoutEffect)(function(){return function(){o()}},[o])}var Rb=function(e){var n=e.cursorScreenPosition,a=e.enabled,i=e.cursorRadiusInScreenPixels,r=e.order,o=e.disableAnimation,s=(0,t.useMemo)(function(){return new Fb},[]);s.setCursorScreenPosition(n);var c=(0,t.useState)(0),d=c[0],l=c[1];return(0,t.useEffect)(function(){if(!o&&a){var e=setInterval(function(){l((new Date).getTime())},100);return function(){clearInterval(e)}}},[o,a,l]),s.setAnimTimeMilliseconds(d),s.setCursorRadiusInScreenPixels(i),jm([n.x,n.y,d,i]),Hb(s,r,a),null},Nb=function(){return Nb=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nb.apply(this,arguments)},Bb=n().memo(function(e){var t=Nm();return n().createElement(Sm.Provider,{value:{registry:t}},e.children,n().createElement(o_,Nb({},e)))}),jb=(0,t.memo)(function(e){var a,i,r=e.cursorScreenPosition,o=e.cursorContainerSizeInScreenPixels,s=e.cursorRadiusInScreenPixels,c=e.visible,d=e.pointerIsDown,l=e.disableAnimation,u=(0,Jo.B)(),f=(a={width:o,height:o},i=r,(0,t.useMemo)(function(){return i?(0,rt.qq)(function(e,t){return{left:e.x-t.width/2,top:e.y-t.height/2,width:t.width,height:t.height}}(i,a)):void 0},[i,a]));return f&&r?n().createElement(Bb,{key:u,transform:f,color:gm.Qf,zIndex:2},n().createElement(Rb,{cursorScreenPosition:r,cursorRadiusInScreenPixels:s,enabled:c&&!d,disableAnimation:l,order:0})):null}),Vb=I(9578),zb=I(6600),Gb=I(3324),Kb=(0,X.Rz)([at.j,zb.XU],function(e,t){return(0,Gb.Y)(t,e)}),Wb=(0,g.Ng)(function(e){var t=Kb(e),n=2*(t+1);return{cursorScreenPosition:(0,zb.OZ)(e),cursorContainerSizeInScreenPixels:n,visible:(0,Vb.D)(e),cursorRadiusInScreenPixels:t,pointerIsDown:(0,de.On)(e)}})(jb),qb=function(e){var t=e.canvasPixelSize,a=e.pointerPos,i=e.visible,r=wh((0,b.D)().palette.neutralPrimary);if(!a)return null;var o=n().createElement(n().Fragment,null),s=n().createElement(n().Fragment,null);if(i){var c={left:0,top:a.y,width:t.x,height:1};o=n().createElement(Bb,{zIndex:2,color:r,transform:(0,rt.qq)(c)});var d={left:a.x,top:0,width:1,height:t.y};s=n().createElement(Bb,{zIndex:2,color:r,transform:(0,rt.qq)(d)})}return n().createElement(n().Fragment,null,o,s)},Qb=(0,g.Ng)(function(e){var t=e.transformTools.view.viewportPixelSize,n=(0,ic.TG)(e);return{canvasPixelSize:t,pointerPos:(0,zb.OZ)(e),visible:"selectingRectangle"===n}},{})(qb),Yb=I(4891),Jb=I(2293),Xb=I(9381),Zb="RectangleSoftnessShader",$b="uSoftness@",eg="uAspectRatio@",tg=function(){function e(){this._softness=0,this._aspectRatio=1}return e.prototype.setSoftness=function(e){this._softness=e},e.prototype.setAspectRatio=function(e){this._aspectRatio=e},e.prototype.getName=function(){return Zb},e.prototype.getUniformNames=function(e){return[e($b),e(eg)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(Zb,"---\n        uniform float ").concat($b,";\n        uniform float ").concat(eg,";\n        "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.uv;return e("\n    // ".concat(Zb,"---\n    {\n      float softnessAlpha = 1.;\n      vec2 size = vec2(1.0, 1.0 / ").concat(eg,");\n      float offset = min(size.x, size.y) * 0.5 * ").concat($b,";\n      vec2 pos = ").concat(t,".xy * size;\n      float distanceFromOffset = 0.;\n      float T = offset;\n      float L = offset;\n      float B = size.y - offset;\n      float R = size.x - offset;\n      if (pos.x < L) {\n        if (pos.y < T) {\n          vec2 TL = vec2(L, T);\n          distanceFromOffset = distance(TL, pos);\n        } else if (pos.y > B) {\n          vec2 BL = vec2(L, B);\n          distanceFromOffset = distance(BL, pos);\n        } else {\n          distanceFromOffset = L - pos.x;\n        }\n      } else if (pos.x > R) {\n        if (pos.y < T) {\n          vec2 TR = vec2(R, T);\n          distanceFromOffset = distance(TR, pos);\n        } else if (pos.y > B) {\n          vec2 BR = vec2(R, B);\n          distanceFromOffset = distance(BR, pos);\n        } else {\n          distanceFromOffset = pos.x - R;\n        }\n      } else {\n        if (pos.y < T) {\n          distanceFromOffset = T - pos.y;\n        } else if (pos.y > B) {\n          distanceFromOffset = pos.y - B;\n        }\n      }\n      softnessAlpha = 1. - smoothstep(0.,offset,distanceFromOffset);\n      gl_FragColor.a *= softnessAlpha;\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t($b),this._softness),e.setFloat(t(eg),this._aspectRatio)},e}(),ng=(0,t.memo)(function(e){var n=e.softness,a=e.aspectRatio,i=e.order,r=(0,t.useMemo)(function(){return new tg},[]);return r.setSoftness(n),r.setAspectRatio(a),jm([n,a]),Hb(r,i,0!==n),null}),ag=(0,t.memo)(function(e){var t=e.imageUvToView,a=e.selectedUvPositions,i=e.isVisible,r=e.softness;if(!i)return null;var o=(0,Jb.J)(a,t);if(!o)return null;var s=o.width/o.height,c=(0,Yb.h)(a,t);return c?n().createElement(Bb,{key:"MaskingRectangleSelection",transform:(0,it.XG)(t,c),color:Xb.fK,zIndex:2},n().createElement(ng,{softness:r,aspectRatio:s,order:0})):null}),ig=I(8666),rg=(0,g.Ng)(function(e){var t=(0,ou.c)(e),n=(0,ic.TG)(e);return{selectedUvPositions:(0,ic.qv)(e),imageUvToView:t,isVisible:"selectingRectangle"===n,softness:(0,ig.yr)(e)}},{})(ag),og=I(797);function sg(e){return function(e){for(var t=e.length,n=new Uint8ClampedArray(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n}(window.atob(e))}var cg=I(9191),dg=function(){return dg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},dg.apply(this,arguments)},lg=(0,t.forwardRef)(function(e,n){var a=(0,og.B)();return(0,t.useImperativeHandle)(n,function(){return{getTexturePatchCache:function(){return a},deserializeTexturePatches:function(e){return void 0,void 0,n=function(){var t,n,i,r;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(o){switch(o.label){case 0:if(!a)throw new Error("Texture patch cache not initialized");t=0,n=e,o.label=1;case 1:return t<n.length?(i=n[t],r=i.parts.map(function(e){var t=e.updatedSubPixelsDataUri,n=e.originalSubPixelsDataUri,a=e.updatedFormat,i=e.originalFormat,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["updatedSubPixelsDataUri","originalSubPixelsDataUri","updatedFormat","originalFormat"]),o=sg(t),s=sg(n);return(0,cg.Y)(dg({updatedSubPixels:{bytes:o,format:a},originalSubPixels:{bytes:s,format:i}},r))}),[4,a.add({id:i.id,parts:r,imageId:i.imageId})]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})},new((t=void 0)||(t=Promise))(function(e,a){function i(e){try{o(n.next(e))}catch(e){a(e)}}function r(e){try{o(n.throw(e))}catch(e){a(e)}}function o(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t(function(e){e(a)})).then(i,r)}o((n=n.apply(undefined,[])).next())});var t,n}}},[a]),null}),ug="\nvec4 threeColorGradientAt(vec4 color1,vec4 color2,vec4 color3,vec3 stops,float t){\n    float t1 = stops[0];\n    float t2 = stops[1];\n    float t3 = stops[2];\n    t = clamp(t,0.,1.);\n    float w1 = 1.0 - smoothstep(t1, t2, t);\n    float w2 = min(smoothstep(t1, t2, t),smoothstep(t3, t2,t));\n    float w3 = smoothstep(t2,t3, t);\n    return w1 * color1 + w2 * color2 + w3 * color3;\n  }\n",fg=I(401),pg=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},mg="AnimatingBorderShader",_g="uInnerRectangleTransformInverse@",hg="uColor1@",bg="uColor2@",gg="uColor3@",vg="uStops@",yg="uRotationOffset@",Sg=[{color:(0,fg.i)("#98ECFE",1),stopPercent:.35},{color:(0,fg.i)("#0093F9",1),stopPercent:.7},{color:(0,fg.i)("#003D92",1),stopPercent:.9}],Dg=[Sg[0].stopPercent,Sg[1].stopPercent,Sg[2].stopPercent],Ig=function(){function e(){this._transform=(0,it.yz)(),this._rotationOffset=0}return e.prototype.setTransform=function(e){this._transform=e},e.prototype.setRotationOffset=function(e){this._rotationOffset=e},e.prototype.getName=function(){return mg},e.prototype.getUniformNames=function(e){return[e(_g),e(hg),e(bg),e(gg),e(vg),e(yg)]},e.prototype.getFunctions=function(e){return[ug]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(mg,"---\n        uniform mat3 ").concat(_g,";\n        uniform vec4 ").concat(hg,";\n        uniform vec4 ").concat(bg,";\n        uniform vec4 ").concat(gg,";\n        uniform vec3 ").concat(vg,";\n        uniform float ").concat(yg,";\n        "))},e.prototype.getShaderFunctionBody=function(e){return e("\n            //".concat(mg,"---\n            {\n              \n              vec3 normalizedPos = vec3(").concat(Ur.k.screenPixelPos,".x,").concat(Ur.k.screenPixelPos,".y,1.0) * ").concat(_g,";\n\n              float isOutsideInnerRectangle = 1. - step(0.0, normalizedPos.x) * step(0.0, normalizedPos.y) * step(0.0, 1.0 - normalizedPos.x) * step(0.0, 1.0 - normalizedPos.y);\n              \n              float x = mix(-1.,1.,").concat(Ur.k.uv,".x);\n              float y = mix(-1.,1.,").concat(Ur.k.uv,".y);\n              float PI = 3.141592;\n              float angle = atan(x,y);\n              float normalizedAngle = (angle + PI) / (2.0 * PI);\n\n              float speedMultiplier = 0.5;//decrease speed by half because there are two gradients per full rotation.              \n              //makes two gradients, that are mirrors of each other, so that there is no seam.\n              float t = abs(mix(-1.,1.,mod(normalizedAngle + ").concat(yg,"*speedMultiplier, 1.0)));\n              \n              vec4 gradientColor = threeColorGradientAt(").concat(hg,",").concat(bg,",").concat(gg,",").concat(vg,",t); \n              gl_FragColor = mix(vec4(gl_FragColor.r,gl_FragColor.g,gl_FragColor.b,0.), gradientColor, isOutsideInnerRectangle);\n            }\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat4.apply(e,pg([t(hg)],Sg[0].color,!1)),e.setFloat4.apply(e,pg([t(bg)],Sg[1].color,!1)),e.setFloat4.apply(e,pg([t(gg)],Sg[2].color,!1)),e.setFloat3.apply(e,pg([t(vg)],Dg,!1)),e.setFloat(t(yg),this._rotationOffset),e.setMatrix3x3(t(_g),new Float32Array(pg(pg([],(0,it.iE)(this._transform),!0),[0,0,1],!1)))},e}(),xg=function(e){var n=e.transform,a=e.order,i=(0,t.useMemo)(function(){return new Ig},[]);return i.setTransform(n),jm(n),Hb(i,a),function(e){var n=(0,t.useContext)(Bm.A).renderList;(0,t.useEffect)(function(){if(n){var t=0,a=setInterval(function(){t+=.10714285714285714,e.setRotationOffset(t),n.requestRender()},75);return function(){clearInterval(a)}}},[e,n])}(i),null},Cg=(0,t.memo)(function(e){var t=e.innerRectangleTransform,a=e.outerRectangleTransform;return n().createElement(Bb,{transform:a,zIndex:4},n().createElement(xg,{transform:t,order:0}))}),Og=(0,g.Ng)(function(e){var t=td(e),n=e.transformTools.device.pixelRatio,a=Math.round(5*n),i=e.transformTools.view.viewportPixelSize,r={top:a,left:a,width:i.x-2*a,height:i.y-2*a},o=(0,rt.GM)(t),s=(0,Se.kR)(r,o),c=s?(0,rt.qq)(s):t;return{innerRectangleTransform:c,outerRectangleTransform:(0,it.Oj)(c,a)}})(Cg),wg=(0,t.memo)(function(e){return e.hasFullImageTexturePatchRequest?n().createElement(Og,null):null}),Eg=I(1626),Ag=(0,X.Rz)([Dh.tq],function(e){return e.some(function(e){return e.maskParameters.maskType===Eg.D.FullImageMask&&(0,Jt.n)(e.algorithmParameters.layerToPatch,"backgroundMask")})}),Lg=(0,g.Ng)(function(e){return{hasFullImageTexturePatchRequest:Ag(e)}})(wg),kg=I(8028),Mg=(0,t.memo)(function(e){var t=e.allTexturePatchRequests,a=(0,Sc.z)(),i=(0,kg.M)(t);return!a&&i?n().createElement(Og,null):null}),Pg=(0,g.Ng)(function(e){return{allTexturePatchRequests:(0,su.N)(e)}})(Mg),Tg="CirclePlaceHolderShader",Ug=function(){function e(){}return e.prototype.getName=function(){return Tg},e.prototype.getUniformNames=function(e){return[]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return""},e.prototype.getShaderFunctionBody=function(e){return e("\n      //".concat(Tg," ---\n      {\n        vec2 uvCenter = vec2(0.5,0.5);\n        float distanceFromCenter = length(").concat(Ur.k.uv,".xy - uvCenter);\n        finalAlphaMultiply =  1. - smoothstep(0.48,0.5,distanceFromCenter);\n      }  \n      "))},e.prototype.onBeforeBabylonRender=function(e,t){},e}(),Fg=function(e){var n=e.enabled,a=void 0===n||n,i=e.order;return Hb((0,t.useMemo)(function(){return new Ug},[]),i,!!a),null},Hg=[.929,.922,.914,.8],Rg=[.784,.776,.769,.8],Ng=(0,t.memo)(function(e){var a=e.allTexturePatchRequests,i=e.imageUvToView,r=e.disabled,o=function(e,n){void 0===n&&(n=Hg);var a=function(e,n,a,i,r,o){void 0===o&&(o=100);var s=(0,t.useState)(n),c=s[0],d=s[1];return(0,t.useEffect)(function(){if(e){var t=Date.now(),r=setInterval(function(){var e=Date.now()-t;if(e<i)d(n);else{var r=.5+.5*Math.sin((e-i)*Math.PI*2/2e3);d(function(e,t,n){return[(0,H.Ec)(e[0],t[0],n),(0,H.Ec)(e[1],t[1],n),(0,H.Ec)(e[2],t[2],n),(0,H.Ec)(e[3],t[3],n)]}(n,a,r))}},o);return function(){clearInterval(r)}}d(n)},[e,n,a,i,2e3,o]),c}(e,Hg,Rg,3e3);return e?a:n}(0!==a.length);return!(0,t.useContext)($n.Z).image||r?null:n().createElement(n().Fragment,null,a.map(function(e){var t=e.maskParameters,a=t.maskType===Eg.D.RectangleMask||t.maskType===Eg.D.CircleMask?t.rectUvToImageUv:void 0;return void 0!==a?n().createElement(Bb,{key:e.idValue,transform:(0,it.XG)(i,a),color:o,zIndex:2},t.maskType===Eg.D.CircleMask&&n().createElement(Fg,{order:0})):null}))}),Bg=(0,g.Ng)(function(e){var t=e.uiState.activeEditorActivity===Me.NF&&!(0,un.yi)(e),n=(0,ou.c)(e);return{allTexturePatchRequests:(0,su.N)(e),imageUvToView:n,disabled:t}})(Ng),jg=I(6102),Vg=(0,X.Rz)([de.t7,de.Qg],function(e,t){return(0,jg.Te)(e,t)}),zg=(0,X.Rz)([function(e){return(0,_e.ic)(e.transformTools.animations.gridLineVisibility,e.transformTools.animations.currentTime,jg.B$)},function(e){return(0,_e.ic)(e.transformTools.animations.dismissGridLineVisibility,e.transformTools.animations.currentTime,jg.UV)},de.Px,de.jO,de.un,de.Qg],function(e,t,n,a,i,r){return(0,jg.Um)(n,a,i,e,t,r)}),Gg=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},Kg="CropHandleShapeShader",Wg="uShadowSize@",qg="uCropTransformInverse@",Qg="uHandleTransformInverse@",Yg=function(){function e(){this._shadowSize=3,this._cropTransform=(0,it.yz)(),this._handleTransform=(0,it.yz)()}return e.prototype.setShadowSize=function(e){this._shadowSize=e},e.prototype.setCropTransform=function(e){this._cropTransform=e},e.prototype.setHandleTransform=function(e){this._handleTransform=e},e.prototype.getName=function(){return Kg},e.prototype.getUniformNames=function(e){return[e(Wg),e(qg),e(Qg)]},e.prototype.getFunctions=function(){return["\nfloat inTransform(mat3 posToUv, vec2 pixelPos){\n  vec3 uv = vec3(pixelPos, 1.) * posToUv;\n  if(uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.) {\n    return 0.;\n  }\n  return 1.;\n}\n","\nfloat handleShape(in vec2 pixelPos, mat3 handleTransform, mat3 cropTransform) {\n  float inCrop = inTransform(cropTransform, pixelPos);\n  float inHandleRect = inTransform(handleTransform, pixelPos);\n  return clamp(inHandleRect - inCrop, 0., 1.);\n}\n","\nfloat shadowLevel(vec2 shadowPos, mat3 handleTransform, mat3 cropTransform) {\n  #define shadowSamples 15\n  float angle = 0.;\n  float total = 0.;\n  float fSamples = float(shadowSamples);\n\n  for(int i = 0; i < shadowSamples; i++) {\n    float normalizedRadius = sqrt(float(i + 1) / fSamples);\n    float r = 5. * normalizedRadius;\n    vec2 sampleDir = vec2(cos(angle), sin(angle));\n    total += handleShape(shadowPos + sampleDir * r, handleTransform, cropTransform);\n    angle += 2.39996;\n  }\n\n  return total / fSamples;\n}\n","\nvec4 cropHandle(in vec4 handleColor, in vec2 pixelPos, mat3 handleTransform, mat3 cropTransform, float shadowSize) {\n  vec4 fragColor = vec4(0.);\n  vec2 shadowOffset = vec2(0., 3.);\n  vec4 shadowColor = vec4(vec3(0.), 0.33);\n\n  float inHandle = handleShape(pixelPos, handleTransform, cropTransform);\n  if(inHandle >= 1. ) { //if we are in the shape, no need to calculate the shadow.\n      return mix(fragColor, handleColor, handleColor.a);\n  } else {\n    vec2 shadowPos = pixelPos - shadowOffset;\n    float shadowBlend = shadowLevel(shadowPos, handleTransform, cropTransform);\n    return mix(fragColor, shadowColor, shadowBlend);\n  }\n}\n"]},e.prototype.getHeaderCode=function(e){return e("//".concat(Kg,"---\n        uniform float ").concat(Wg,";\n        uniform mat3 ").concat(qg,";\n        uniform mat3 ").concat(Qg,";\n    "))},e.prototype.getShaderFunctionBody=function(e){return e("//".concat(Kg,"---\n        gl_FragColor = cropHandle(gl_FragColor,").concat(Ur.k.screenPixelPos,".xy,").concat(Qg,",").concat(qg,",").concat(Wg,");\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(Wg),this._shadowSize),e.setMatrix3x3(t(qg),new Float32Array(Gg(Gg([],(0,it.iE)(this._cropTransform),!0),[0,0,1],!1))),e.setMatrix3x3(t(Qg),new Float32Array(Gg(Gg([],(0,it.iE)(this._handleTransform),!0),[0,0,1],!1)))},e}(),Jg=function(e){var n=e.visible,a=e.shadowSize,i=e.cropTransform,r=e.handleTransform,o=e.order,s=(0,t.useMemo)(function(){return new Yg},[]);return s.setShadowSize(a),s.setCropTransform(i),s.setHandleTransform(r),jm([n]),Hb(s,o,n),null},Xg=I(7002),Zg="u_FillColor",$g="a_VerticesData",e0={name:"VertexListRender",attributeNames:[$g],uniformNames:[Zg],vertexShader:"\n  attribute vec2 ".concat($g,";\n  void main(void) {\n      gl_Position = vec4(").concat($g,".xy, 0., 1.);\n  }"),fragmentShader:"\n  uniform vec4 ".concat(Zg,";\n  void main(void) {\n      gl_FragColor = ").concat(Zg,";\n  }")},t0=function(e){var n=e.transform,a=e.canvasSize,i=e.zIndex,r=wh((0,b.D)().palette.neutralDark),o=function(e,n,a){var i=(0,t.useState)(),r=i[0],o=i[1],s=(0,t.useState)(),c=s[0],d=s[1],l=(0,t.useMemo)(function(){return new Float32Array(8)},[4]),u=(0,t.useContext)(Wm.M).engine,f=a_(e0);return(0,t.useEffect)(function(){var e,t=new Float32Array(8);if(u&&f){var n=((e={}).a_VerticesData=new oh.zc(u,t,$g,!0,!1,2,!1),e);if(u.webGLVersion>=2){var a=u.recordVertexArrayObject(n,null,f.effect);return u.bindVertexArrayObject(a,null),d(a),o(n),function(){u.releaseVertexArrayObject(a),n.a_VerticesData.dispose()}}return u.bindBuffers(n,null,f.effect),o(n),function(){n.a_VerticesData.dispose()}}},[u,f,4]),[(0,t.useCallback)(function(e){l.set(e)},[l]),(0,t.useCallback)(function(){if(u&&f&&r&&l){var t=f.effect;u.enableEffect(t),r.a_VerticesData.update(l),c?u.bindVertexArrayObject(c,null):u.bindBuffers(r,null,f.effect),t.setFloat4.apply(t,function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([Zg],a,!1)),u.drawArraysType(e,0,4)}},[u,f,l,e,4,r,c,a])]}(oh.JM.MATERIAL_LineLoopDrawMode,0,r),s=o[0],c=o[1],d=(0,t.useMemo)(function(){return(0,it.XG)((0,it.cQ)(-1,1),(0,it.W3)(2/a.x,-2/a.y),(0,it.Oj)(n,.5))},[n,a]);return jm(d),(0,t.useLayoutEffect)(function(){var e=(0,it.ti)(d).reduce(function(e,t){return e.push(t.x,t.y),e},[]);s(e)},[a,d,s]),i_(c,i),null},n0=function(e){var t=e.cropTransform,a=e.handlePos,i=e.cropHandlePhysicalPixelSize,r=e.zIndex,o=e.cssToPhysicalPixelRatio,s=e.canvasSize,c=e.visible,d=e.isFocused,l=wh((0,b.D)().palette.neutralDark),u=3*(o=o||1),f=function(e,t,n,a){var i=(0,Xg.xU)(e),r=(0,it.Xv)(a),o=(0,it.OG)(a),s=t,c=t,d=(0,ot.dR)((0,it.tq)(a)),l=(0,ot.dR)((0,it.JH)(a)),u=3*t+2;d<u&&(s=Math.round((d-2)/3),s=Math.max(s,n)),l<u&&(c=Math.round((l-2)/3),c=Math.max(c,n));var f=(0,ot.wp)((0,it.So)(a,i),(0,ot.Tf)((0,ot.f1)(r,(0,H.Ec)(n,s-n,i.x)),(0,ot.f1)(o,(0,H.Ec)(n,c-n,i.y)))),p=(0,it.eo)(a);return(0,tn.D)({x:f.x,y:f.y,width:s,height:c,rotation:p})}(a,i,Math.round(3*o),t),p=(0,it.Oj)(f,2*u),m=(0,it.Oj)(f,Math.round(4*o));return n().createElement(n().Fragment,null,n().createElement(Bb,{zIndex:r,color:l,transform:p},n().createElement(Jg,{shadowSize:u,visible:c,cropTransform:t,handleTransform:f,order:0})),d&&n().createElement(t0,{canvasSize:s,transform:m,zIndex:r+1}))},a0="a_lineData",i0="u_lineAlpha",r0={name:"GridLines",attributeNames:[a0],uniformNames:[i0],vertexShader:"\n  attribute vec3 ".concat(a0,";\n  varying float distanceFromBeginningOfTheLine;\n  varying vec2 vPos;\n  void main(void) {\n      vPos =  ").concat(a0,".xy;\n      distanceFromBeginningOfTheLine = ").concat(a0,".z;\n      gl_Position = vec4(").concat(a0,".xy, 0., 1.);\n  }"),fragmentShader:"\n  varying vec2 vPos;\n  varying float distanceFromBeginningOfTheLine;\n  uniform float ".concat(i0,";\n  void main(void){\n      float lineAlt = step(mod(distanceFromBeginningOfTheLine, ").concat(8,".0 * 2.0), ").concat(8,".0);\n      vec3 currentLineCurrentPixelColor = mix(vec3(1.0,1.0,1.0), vec3(0.8,0.8,0.8), lineAlt);\n      vec4 targetColorWithAlpha = vec4(currentLineCurrentPixelColor, ").concat(i0," * ").concat(.75,");\n      gl_FragColor = targetColorWithAlpha;\n  }")},o0=function(e){var n=e.linesCount,a=e.cropRect,i=e.alpha,r=e.canvasSize,o=(0,t.useContext)(Wm.M).engine,s=a_(r0),c=(0,t.useState)(),d=c[0],l=c[1],u=(0,t.useState)(),f=u[0],p=u[1],m=2*n,_=(0,t.useMemo)(function(){return(0,Se.Of)(a,r.x,r.y)},[a,r]),h=(0,t.useMemo)(function(){return new Float32Array(6*m)},[m]);return(0,t.useLayoutEffect)(function(){for(var e=_.width/(n+1),t=_.height/(n+1),i=0;i<n;i++){var r=6*i*2,o=e*(i+1),s=t*(i+1);h[r+0]=_.left+o,h[r+1]=_.top,h[r+2]=0,h[r+3]=_.left+o,h[r+4]=_.top-_.height,h[r+5]=a.height,h[r+6]=_.left,h[r+7]=_.top-s,h[r+8]=0,h[r+9]=_.left+_.width,h[r+10]=_.top-s,h[r+11]=a.width}},[_,a,n,h]),(0,t.useLayoutEffect)(function(){var e,t=void 0,n=void 0,a=new Float32Array(6*m);return o&&s&&((e={}).a_lineData=new oh.zc(o,a,a0,!0,!1,3,!1),t=e,o.webGLVersion>=2?(n=o.recordVertexArrayObject(t,null,s.effect),o.bindVertexArrayObject(n,null)):o.bindBuffers(t,null,s.effect),l(t),p(n)),function(){n&&(null==o||o.releaseVertexArrayObject(n)),t&&t.a_lineData.dispose()}},[o,s,n,m]),i_((0,t.useCallback)(function(){o&&s&&d&&h&&(o.enableEffect(s.effect),d.a_lineData.update(h),f?o.bindVertexArrayObject(f,null):o.bindBuffers(d,null,s.effect),s.effect.setFloat(i0,i),o.drawArraysType(oh.JM.MATERIAL_LineListDrawMode,0,2*m))},[d,o,h,s,i,f,m]),Number.MAX_VALUE),jm(Object.values(a)),null},s0={setCssToPhysicalPixelRatio:Re.II,setCropHandleSizeCss:Re.qq},c0=(0,g.Ng)(function(e){var t=e.transformTools,n=t.device.pixelRatio,a=t.view.viewportPixelSize,i=t.cropInteraction,r=i.mode,o=i.focusedHandleIndex,s=i.isKeyboardFocused,c=t.cropUiDisplay.handleSizeCss,d=t.pointer.movePos,l=t.image.loadedPixelSize;return{cropTransform:td(e),canvasPixelSize:a,numCropGridLines:Vg(e),cropGridLinesVisibilityValue:zg(e),cropUiMode:r,cropHandlePhysicalPixelSize:(0,Xg.Cq)(c,n),cssToPhysicalPixelRatio:n,pointerPos:d,focusedHandle:o,isKeyboardFocused:s,visible:!!l}},s0)(function(e){var a=e.cropHandlePhysicalPixelSize,i=e.canvasPixelSize,r=e.cropTransform,o=e.cropUiMode,s=e.numCropGridLines,c=e.cropGridLinesVisibilityValue,d=e.pointerPos,l=e.focusedHandle,u=e.isKeyboardFocused,f=e.visible,p=e.cssToPhysicalPixelRatio,m=o!==ct.I.draggingView&&o!==ct.I.selectingFirstCorner&&o!==ct.I.selectingSecondCorner,_=(0,t.useMemo)(function(){return(0,rt.GM)(r)},[r]),h=function(e){var n=(0,t.useState)(!1),a=n[0],i=n[1],r=(0,t.useRef)(e);return r.current=e,(0,t.useLayoutEffect)(function(){if(e){var t=window.requestAnimationFrame(function(){setTimeout(function(){i(r.current)})});return function(){window.cancelAnimationFrame(t)}}},[e]),e&&a}(f);return h?n().createElement(n().Fragment,null,[je.Q.TopLeft,je.Q.TopCenter,je.Q.TopRight,je.Q.SideLeft,je.Q.SideRight,je.Q.BottomLeft,je.Q.BottomCenter,je.Q.BottomRight].map(function(e){var t="cropHandle"+e;return n().createElement(n0,{key:t,handlePos:e,isFocused:e===l&&u,cropHandlePhysicalPixelSize:a,cropTransform:r,canvasSize:i,zIndex:3,cssToPhysicalPixelRatio:p,visible:m})}),o!==ct.I.selectingFirstCorner&&n().createElement(t0,{canvasSize:i,transform:r,zIndex:2}),n().createElement(qb,{canvasPixelSize:i,pointerPos:d,visible:o===ct.I.selectingFirstCorner}),n().createElement(o0,{cropRect:_,linesCount:s,alpha:c,canvasSize:i})):null}),d0=function(){function e(e,t){this._levelUniformName=e,this._mapNormalizedToShaderValue=t,this._level=0}return e.prototype.onBeforeBabylonRender=function(e){e.setFloat(this._levelUniformName,this._mapNormalizedToShaderValue(this._level))},e.prototype.setLevel=function(e){this._level=e},e.prototype.getLevel=function(){return this._level},e}(),l0=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u0=function(e){function t(t,n,a){var i=e.call(this,t,n,a)||this;return i.name=t,i.defineIdentifierName=n,i.shaderInputProvider=a,i}return l0(t,e),t.prototype.getLevel=function(){return this.shaderInputProvider.getLevel()},t.prototype.setLevel=function(e){return this.shaderInputProvider.setLevel(e)},t}(j_),f0=function(e,n,a){var i=e.levelUniformName,r=e.mapNormalizedToShaderValue,o=e.defName,s=(0,t.useMemo)(function(){return new d0(i,r)},[i,r]),c=(0,t.useMemo)(function(){return new u0(e.defName,o,s)},[o,s,e]);s.setLevel((0,Qc.q)(a,0,1)),jm([a]),Hb(c,n,a!==E.pS)},p0=[.04,1,4],m0={defName:"BRIGHTNESS",levelUniformName:"uBrightnessLevel",mapNormalizedToShaderValue:function(e){return(0,me.a)(p0,e)}},_0=function(){return m0},h0=(0,g.Ng)(function(e){return{level:e.colorAdjustments.baseAdjustments.brightness}})(function(e){var t=e.level,n=e.order,a=_0();return f0(a,n,t),null}),b0=(0,g.Ng)(function(e){return{devicePixelRatio:e.transformTools.device.pixelRatio}})(function(e){var n=e.devicePixelRatio,a=e.checkerboardSize,i=e.lightCheckerColor,r=e.darkCheckerColor,o=e.order,s=(0,t.useMemo)(function(){return new Hr},[]);return s.setDevicePixelRatio(n),s.setCheckerboardSize(a),s.setLightCheckerColor(i),s.setDarkCheckerColor(r),jm([n,a,i,r]),Hb(s,o),null}),g0=function(){function e(e,t,n){this._negativeVectorUniformName=e,this._neutralVectorUniformName=t,this._positiveVectorUniformName=n,this._negativeVector=[0,0,0,0],this._neutralVector=[0,0,0,0],this._positiveVector=[0,0,0,0]}return e.prototype.onBeforeBabylonRender=function(e){e.setVector4(this._negativeVectorUniformName,Qm(this._negativeVector)),e.setVector4(this._neutralVectorUniformName,Qm(this._neutralVector)),e.setVector4(this._positiveVectorUniformName,Qm(this._positiveVector))},e.prototype.setData=function(e,t,n){this._negativeVector=e,this._neutralVector=t,this._positiveVector=n},e}();function v0(e,t){return{r:e.r-t.r,g:e.g-t.g,b:e.b-t.b,a:e.a-t.a}}var y0=x0(0);function S0(e,t,n,a){e=(0,Qc.q)(e,0,360),t=(0,Qc.q)(t,-100,100),n=(0,Qc.q)(n,-100,100),a=(0,Qc.q)(a,-100,100);var i,r=function(e,t){var n=e,a=D0(t);return(a*=.5)<0&&(a*=-1,n=(e+180)%360),[n,a]}(e,t),o=r[0],s=r[1],c=function(e){return 50+.25*D0(e)}(a),d=function(e,t,n){var a,i,r,o=(0,Qc.q)(e,0,359),s=(0,Qc.q)(t/100,0,1),c=(0,Qc.q)(n/100,0,1);if(0===s)a=c,i=c,r=c;else{o/=60;var d=Math.floor(o),l=o-d,u=c*(1-s),f=c*(1-s*l),p=c*(1-s*(1-l));switch(d){case 0:a=c,i=p,r=u;break;case 1:a=f,i=c,r=u;break;case 2:a=u,i=c,r=p;break;case 3:a=u,i=f,r=c;break;case 4:a=p,i=u,r=c;break;default:a=c,i=u,r=f}}return{r:a,g:i,b:r,a:1}}(o,s,c);return(d={r:2*(i=d).r,g:2*i.g,b:2*i.b,a:2*i.a}).a=function(e){return 1+.01*e}(n),d}function D0(e){return Math.sign(e)*e*e/100}function I0(e,t){var n,a;return a=t,{r:(n=S0(e.hue,e.density,e.saturation,e.value)).r*a.r,g:n.g*a.g,b:n.b*a.b,a:n.a*a.a}}function x0(e){return{hue:30,density:0,saturation:0,value:e}}function C0(e){return[e.r,e.g,e.b,e.a]}var O0=function(){return O0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O0.apply(this,arguments)},w0=[-65,0,100],E0={negativeVectorUniformName:"vCameraColorCurveNegative",neutralVectorUniformName:"vCameraColorCurveNeutral",positiveVectorUniformName:"vCameraColorCurvePositive"},A0=O0(O0({defName:"COLORCURVES"},E0),{createColorCurveVectors:function(e,t,n){return a=(0,H.Ec)(-100,100,e),i=(0,me.a)(w0,t),r=(0,H.Ec)(-100,100,n),o=S0(30,0,0,a),s=I0(x0(i),o),c=I0(y0,o),d=I0(x0(r),o),l=v0(s,c),u=c,{negativeVector:C0(v0(c,d)),neutralVector:C0(u),positiveVector:C0(l)};var a,i,r,o,s,c,d,l,u},getUniformNames:function(){return Object.values(E0)}}),L0=function(){return A0},k0=n().memo(function(e){var n,a=e.exposureNormalizedSliderLevel,i=e.highlightsNormalizedSliderLevel,r=e.shadowsNormalizedSliderLevel,o=e.order,s=L0(),c=(n=s,(0,t.useMemo)(function(){var e=new g0(n.negativeVectorUniformName,n.neutralVectorUniformName,n.positiveVectorUniformName);return[e,new j_(n.defName,n.defName,e)]},[n])),d=c[0],l=c[1],u=s.createColorCurveVectors(a,i,r),f=u.negativeVector,p=u.neutralVector,m=u.positiveVector;return d.setData(f,p,m),jm([a,i,r]),Hb(l,o,a!==E.pS||i!==E.pS||r!==E.pS),null}),M0=(0,g.Ng)(function(e){return{exposureNormalizedSliderLevel:e.colorAdjustments.baseAdjustments.exposure,highlightsNormalizedSliderLevel:e.colorAdjustments.baseAdjustments.highlights,shadowsNormalizedSliderLevel:e.colorAdjustments.baseAdjustments.shadows}})(k0),P0={defName:"CONTRAST",highLevelValuesUniformName:"uContrastHighValues",lowLevelValuesUniformName:"uContrastLowValues",mapNormalizedToShaderValue:(0,H.lv)(-1,1),getContrastValues:function(e){return{lowLevelValues:{x:2*e,y:1-e,z:0},highLevelValues:{x:2*-e,y:1+3*e,z:-e}}}},T0=function(){return P0},U0=n().memo(function(e){var n=e.level,a=e.order,i=T0(),r=(0,t.useMemo)(function(){var e=T0(),t=new F0(e.lowLevelValuesUniformName,e.highLevelValuesUniformName);return[t,new j_(e.defName,e.defName,t)]},[]),o=r[0],s=r[1],c=i.getContrastValues(i.mapNormalizedToShaderValue(n)),d=c.highLevelValues,l=c.lowLevelValues;return o.setLevels(d,l),jm([n]),Hb(s,a,n!==E.pS),null}),F0=function(){function e(e,t){this._lowLevelValuesUniformName=e,this._highLevelValuesUniformName=t,this._lowLevelValues={x:0,y:0,z:0},this._highLevelValues={x:0,y:0,z:0}}return e.prototype.onBeforeBabylonRender=function(e){e.setVector3(this._lowLevelValuesUniformName,this._lowLevelValues),e.setVector3(this._highLevelValuesUniformName,this._highLevelValues)},e.prototype.setLevels=function(e,t){this._lowLevelValues=e,this._highLevelValues=t},e}(),H0=(0,g.Ng)(function(e){return{level:e.colorAdjustments.baseAdjustments.contrast}})(U0),R0=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},N0="CropMaskShader",B0="uCropTransformInverse@",j0="uOutsideVisibility@",V0=function(){function e(){this._transform=(0,it.yz)(),this._outsideVisibility=.3}return e.prototype.setTransform=function(e){this._transform=e},e.prototype.setOutsideLightness=function(e){this._outsideVisibility=e},e.prototype.getName=function(){return N0},e.prototype.getUniformNames=function(e){return[e(B0),e(j0)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(N0,"---\n        uniform mat3 ").concat(B0,";\n        uniform float ").concat(j0,";\n        "))},e.prototype.getShaderFunctionBody=function(e){return e("\n            //".concat(N0,"---\n            vec3 normalizedPos@ = vec3(").concat(Ur.k.screenPixelPos,".x,").concat(Ur.k.screenPixelPos,".y,1.0) * ").concat(B0,";\n\n            float isOutsideCropRegion = 1. - step(0.0, normalizedPos@.x) * step(0.0, normalizedPos@.y) * step(0.0, 1.0 - normalizedPos@.x) * step(0.0, 1.0 - normalizedPos@.y);\n            \n            float applyCropMask = mix(isOutsideCropRegion, 0., ").concat(Ur.k.isRenderingForExport,");\n\n            finalAlphaMultiply = mix(finalAlphaMultiply, ").concat(j0,", applyCropMask);\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setMatrix3x3(t(B0),new Float32Array(R0(R0([],(0,it.iE)(this._transform),!0),[0,0,1],!1))),e.setFloat(t(j0),this._outsideVisibility)},e}(),z0=I(180),G0=(0,X.Rz)([function(e){return(0,_e.ic)(e.transformTools.animations.outsideCropVisibility,e.transformTools.animations.currentTime,z0.ID)},function(e){return(0,_e.ic)(e.transformTools.animations.dismissOutsideCropVisibility,e.transformTools.animations.currentTime,z0.TL)},de.On,de.Qg,At._o],function(e,t,n,a,i){return(0,z0.iY)(n,e,t,a,i)}),K0=(0,g.Ng)(function(e){return{transform:td(e),outsideVisibilityValue:G0(e),isImageCropped:nd(e)}})(function(e){var n=e.transform,a=e.outsideVisibilityValue,i=e.isImageCropped,r=e.order,o=(0,t.useMemo)(function(){return new V0},[]);return o.setTransform(n),o.setOutsideLightness(a),jm(function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([a],n,!0)),Hb(o,r,i),null}),W0=(0,g.Ng)(function(e){var t=e.filters.activeFilter;return{level:e.filters.filterLevel,activeFilter:t}})(function(e){var n=e.level,a=e.activeFilter,i=e.disabled,r=e.order,o=(0,t.useContext)(eb),s=o.textures,c=o.urlsById,d=o.loadUrls,l=(0,t.useMemo)(function(){return new Mr},[]),u=zt(a);0===Object.keys(c).length&&u&&0!==n&&d();var f=c[a.lutUrlId],p=u&&f?s[f]:void 0,m=p?p.parts[0].texture:void 0,_=m&&!i?n:0;return l.setLevel(_),u&&a.config&&l.setConfiguration(a.config),l.setTexture(m),jm([_,a,m]),Hb(l,r,0!==_),null}),q0={defName:"SATURATION",levelUniformName:"uSaturationLevel",mapNormalizedToShaderValue:(0,H.lv)(-1,1)},Q0=function(){return q0},Y0=n().memo(function(e){var t=e.saturationNormalizedSliderLevel,n=e.order,a=Q0();return f0(a,n,t),null}),J0=(0,g.Ng)(function(e){return{saturationNormalizedSliderLevel:e.colorAdjustments.baseAdjustments.saturation}})(Y0),X0={mapNormalizedToShaderValue:(0,H.lv)(-.7,.7)},Z0=(0,g.Ng)(function(e){return{transform:td(e),level:e.colorAdjustments.baseAdjustments.vignette}})(function(e){var n=e.transform,a=e.level,i=e.order,r=(0,t.useMemo)(function(){return new Ob},[]),o=X0.mapNormalizedToShaderValue;return r.setTransform(n),r.setLevel(o(a)),jm(function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([a],n,!0)),Hb(r,i,a!==E.pS),null}),$0=.003256,e1=6502.078125,t1=[3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252],n1=function(e,t,n){return{r:t1[0]*e+t1[1]*t+t1[2]*n,g:t1[3]*e+t1[4]*t+t1[5]*n,b:t1[6]*e+t1[7]*t+t1[8]*n}},a1=[{u:.18006,v:.26352,slope:-.24341,recipTemp:0},{u:.18066,v:.26589,slope:-.25479,recipTemp:1e-5},{u:.18133,v:.26846,slope:-.26876,recipTemp:2e-5},{u:.18208,v:.27119,slope:-.28539,recipTemp:1/33333},{u:.18293,v:.27407,slope:-.3047,recipTemp:4e-5},{u:.18388,v:.27709,slope:-.32675,recipTemp:5e-5},{u:.18494,v:.28021,slope:-.35156,recipTemp:1/16667},{u:.18611,v:.28342,slope:-.37915,recipTemp:1/14286},{u:.1874,v:.28668,slope:-.40955,recipTemp:8e-5},{u:.1888,v:.28997,slope:-.44278,recipTemp:1/11111},{u:.19032,v:.29326,slope:-.47888,recipTemp:1e-4},{u:.19462,v:.30141,slope:-.58204,recipTemp:1/8e3},{u:.19962,v:.30921,slope:-.70471,recipTemp:1/6667},{u:.20525,v:.31647,slope:-.84901,recipTemp:1/5714},{u:.21142,v:.32312,slope:-1.0182,recipTemp:2e-4},{u:.21807,v:.32909,slope:-1.2168,recipTemp:1/4444},{u:.22511,v:.33439,slope:-1.4512,recipTemp:1/4e3},{u:.23247,v:.33904,slope:-1.7298,recipTemp:1/3636},{u:.2401,v:.34308,slope:-2.0637,recipTemp:1/3333},{u:.24792,v:.34655,slope:-2.4681,recipTemp:1/3077},{u:.25591,v:.34951,slope:-2.9641,recipTemp:1/2857},{u:.264,v:.352,slope:-3.5814,recipTemp:1/2677},{u:.27218,v:.35407,slope:-4.3633,recipTemp:4e-4},{u:.28039,v:.35577,slope:-5.3762,recipTemp:1/2353},{u:.28863,v:.35714,slope:-6.7262,recipTemp:1/2222},{u:.29685,v:.35823,slope:-8.5955,recipTemp:1/2105},{u:.30505,v:.35907,slope:-11.324,recipTemp:5e-4},{u:.3132,v:.35968,slope:-15.628,recipTemp:1/1905},{u:.32129,v:.36011,slope:-23.325,recipTemp:1/1818},{u:.32931,v:.36038,slope:-40.77,recipTemp:1/1739},{u:.33724,v:.36051,slope:-116.45,recipTemp:1/1667}],i1=function(e,t){var n,a,i,r,o,s=function(e,t){for(var n=1/e,a=1;a<a1.length&&!(n<a1[a].recipTemp);a++);a===a1.length&&a--;var i=a1[a-1],r=a1[a],o=(0,H.W4)(i.recipTemp,r.recipTemp,n),s=i.slope/Math.sqrt(1+i.slope*i.slope),c=r.slope/Math.sqrt(1+r.slope*r.slope),d=(0,H.Ec)(s,c,o),l=(0,H.Ec)(i.u,r.u,o),u=(0,H.Ec)(i.v,r.v,o),f=t/Math.sqrt(1+d*d),p=l+f,m=u+d*f;if(m>-.1*p+.4){var _=(-.1*p+.4-m)/(-.1*(p-l)+u-m);p=(0,H.Ec)(p,l,_),m=(0,H.Ec)(m,u,_)}return{y:1,u:p,v:m}}(e,t);return n=s.y,a=s.u,i=s.v,r=0,o=0,n>=1e-7&&(r=6*a*n/(4*i),o=n*(6*(4-a)-60*i)/(12*i)),[r,n,o]},r1={defName:"WHITE_BALANCE",mapSliderValueToTint:function(e){return e=(0,H.Ec)(-1,1,e),[$0,1.25*e/100+$0]},whiteBalanceGainUniformName:"uWhiteBalanceGain",mapSliderValueToKelvinTemperature:function(e){var t=e1;return(e=(0,H.Ec)(-1,1,e))>0?t=(0,H.Ec)(e1,1e4,e):e<0&&(t=(0,H.Ec)(e1,4e3,-e)),[t,6502.078125]},mapTemperatureAndTintToRBGains:function(e,t,n,a){var i=(0,Qc.q)(e,1667,Number.MAX_VALUE),r=i1(i,n),o=i1(t,a),s=n1.apply(void 0,r),c=n1.apply(void 0,o);return[c.r/c.g/(s.r/s.g),c.b/c.g/(s.b/s.g)]}},o1=function(){return r1},s1=function(){function e(e){this._whiteBalanceGainUniformName=e,this._whiteBalanceGainVector={r:1,g:1,b:1}}return e.prototype.onBeforeBabylonRender=function(e){e.setColor3(this._whiteBalanceGainUniformName,this._whiteBalanceGainVector)},e.prototype.setGains=function(e,t){this._whiteBalanceGainVector={r:e,g:1,b:t}},e}(),c1=n().memo(function(e){var n=e.tintLevel,a=e.temperatureLevel,i=e.order,r=o1(),o=r.mapSliderValueToTint,s=r.mapSliderValueToKelvinTemperature,c=r.mapTemperatureAndTintToRBGains,d=r.whiteBalanceGainUniformName,l=r.defName,u=s(a),f=u[0],p=u[1],m=o(n),_=c(f,p,m[0],m[1]),h=_[0],b=_[1],g=function(e,n){return(0,t.useMemo)(function(){var t=new s1(e);return[t,new j_(n,n,t)]},[e,n])}(d,l),v=g[0],y=g[1];return v.setGains(h,b),jm([n,a]),Hb(y,i,n!==E.pS||a!==E.pS),null}),d1=(0,g.Ng)(function(e){return{tintLevel:e.colorAdjustments.baseAdjustments.tint,temperatureLevel:e.colorAdjustments.baseAdjustments.temperature}})(c1),l1="uZoomLevel@",u1=function(){function e(){this._zoomLevel=1}return e.prototype.setZoomLevel=function(e){this._zoomLevel=e},e.prototype.getName=function(){return"ZoomToPixelsShader"},e.prototype.getUniformNames=function(e){return[e(l1)]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return e(" //ZoomToPixels effect---\n    uniform float ".concat(l1,";"))},e.prototype.getShaderFunctionBody=function(e){return e("//ZoomToPixels effect---\n        if(".concat(Ur.k.isRenderingForExport," == 0.){\n            vec2 screenTranslationInPixels@ = (vec3(0.0,0.0,1.0) * ").concat(Ur.k.transform,").xy;\n            vec2 zoomVec2@ = vec2(").concat(l1,");\n            vec2 pixelPosOffset@ = mod(screenTranslationInPixels@, zoomVec2@);\n            vec2 pixelPosRounded@ = floor((").concat(Ur.k.screenPixelPos,"- pixelPosOffset@)/zoomVec2@ )*").concat(l1," + 0.5*zoomVec2@;\n            vec3 uv@ = vec3(pixelPosRounded@.x + pixelPosOffset@.x, pixelPosRounded@.y + pixelPosOffset@.y,1.0) * ").concat(Ur.k.transformInverse,";\n            gl_FragColor = getTextureColor(uv@.xy);\n            mainTextureColor = gl_FragColor;\n\n            // Texture may not be set so use the color override to show that instead (these are set in ShadersBase.ts)\n            gl_FragColor = mix(gl_FragColor,").concat(Ur.k.colorOverride,",").concat(Ur.k.colorOverrideLevel,");\n\n            //modify the uv so that subsequent effect code will use this uv value when sampling textures.\n            ").concat(Ur.k.uv,".xy = uv@.xy;\n        }\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(l1),this._zoomLevel)},e}(),f1=n().memo(function(e){var n=e.zoomLevel,a=e.order,i=(e.originalImageSize,(0,t.useMemo)(function(){return new u1},[]));return i.setZoomLevel(n),jm([n]),Hb(i,a,n>1),null});f1.displayName="ZoomToPixelsEffect";var p1=(0,g.Ng)(function(e){return{zoomLevel:(0,at.j)(e),originalImageSize:e.transformTools.image.originalPixelSize}})(f1),m1=o1(),_1=_0(),h1=Q0(),b1=T0(),g1=L0(),v1=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([m1.whiteBalanceGainUniformName,_1.levelUniformName,h1.levelUniformName,b1.highLevelValuesUniformName,b1.lowLevelValuesUniformName],g1.getUniformNames(),!0),y1="\n#ifdef ".concat(m1.defName,"\n  uniform vec3 ").concat(m1.whiteBalanceGainUniformName,";\n#endif\n#ifdef ").concat(_1.defName,"\n  uniform float ").concat(_1.levelUniformName,";\n#endif\n#ifdef ").concat(h1.defName,"\n  uniform float ").concat(h1.levelUniformName,";\n  const float SATURATION_RED_K = 9437.0 / 32768.0;\n  const float SATURATION_GREEN_K = 1.0 - SATURATION_RED_K;\n#endif\n#ifdef ").concat(b1.defName,"\n  uniform vec3 ").concat(b1.lowLevelValuesUniformName,";\n  uniform vec3 ").concat(b1.highLevelValuesUniformName,";\n\n  float TransformChannelContrast(in float channelLevel, in vec3 low, in vec3 high) {\n    vec3 levels = mix(low, high, step(channelLevel, 0.5));\n    return ((levels.x * channelLevel + levels.y) * channelLevel) + levels.z;\n  }\n#endif\n#ifdef ").concat(g1.defName,"\n  uniform vec4 ").concat(g1.negativeVectorUniformName,";\n  uniform vec4 ").concat(g1.neutralVectorUniformName,";\n  uniform vec4 ").concat(g1.positiveVectorUniformName,";\n#endif\n\n  struct Adjustments {\n    #ifdef ").concat(m1.defName,"\n      vec3 whiteBalanceGain;\n    #endif\n    #ifdef ").concat(_1.defName,"\n      float brightness;\n    #endif\n    #ifdef ").concat(h1.defName,"\n      float saturation;\n    #endif\n    #ifdef ").concat(b1.defName,"\n      vec3 contrastLowLevels;\n      vec3 contrastHighLevels;\n    #endif\n    #ifdef ").concat(g1.defName,"\n      vec4 colorCurvesNeutralVector;\n      vec4 colorCurvesPositiveVector;\n      vec4 colorCurvesNegativeVector;\n    #endif\n    float dummy; //structs cannot be empty, so add a dummy member in case none of the above are defined.\n  };\n\n  ").concat(Cm,"\n  ").concat(xm,"\n  ").concat(Om,"\n  ").concat("\n#ifndef GETLUMINANCE\n#define GETLUMINANCE\n\nconst vec3 LuminanceEncodeApprox = vec3(0.2126, 0.7152, 0.0722);\nfloat getLuminance(vec3 color)\n{\n    return clamp(dot(color, LuminanceEncodeApprox), 0., 1.);\n}\n#endif\n","\n\n  vec4 ApplyAdjustments(in Adjustments adj, in vec4 c) {\n    vec4 result = c.rgba;\n\n    #ifdef ").concat(m1.defName,"\n      // Apply White Balance (Gamma Space)\n      result.rgb *= adj.whiteBalanceGain.rgb;\n    #endif\n\n    result.rgb = toLinearSpace(result.rgb);\n\n    #ifdef ").concat(_1.defName,"\n      // Apply Brightness (Linear Space)\n      result.rgb *= adj.brightness;\n    #endif\n\n    #ifdef ").concat(h1.defName,"\n      // Apply Saturation (Linear Space)\n      float saturatedR = result.r + (result.r - result.g) * SATURATION_GREEN_K * adj.saturation;\n      float saturatedG = result.g + (result.g - result.r) * SATURATION_RED_K   * adj.saturation;\n      float saturatedB = result.b + (result.b - SATURATION_RED_K * result.r - SATURATION_GREEN_K * result.g) * adj.saturation;\n      result.rgb = clamp(vec3(saturatedR, saturatedG, saturatedB), vec3(0.0), vec3(1.0));\n    #endif\n\n    result.rgb = toGammaSpace(result.rgb);\n\n    #ifdef ").concat(g1.defName,"\n      // Apply Color Curves (Gamma Space)\n      // https://github.com/BabylonJS/Babylon.js/blob/6adcf34c72f322949fe04b9ccbe3fc5faf7206a1/src/Shaders/ShadersInclude/imageProcessingFunctions.fx\n      float luma = getLuminance(result.rgb);\n      vec2 curveMix = clamp(vec2(luma * 3.0 - 1.5, luma * -3.0 + 1.5), vec2(0.0), vec2(1.0));\n      vec4 colorCurve = adj.colorCurvesNeutralVector + curveMix.x * adj.colorCurvesPositiveVector - curveMix.y * adj.colorCurvesNegativeVector;\n      result.rgb *= colorCurve.rgb;\n      result.rgb = mix(vec3(luma), result.rgb, colorCurve.a);\n    #endif\n\n    result = clamp(result, 0.0, 1.0);\n\n    #ifdef ").concat(b1.defName,"\n      // Apply Contrast (Gamma Space)\n      // Assumption: Value is clamped. Otherwise high contrast levels cause strange colors with high brightness/exposure\n      result.r = TransformChannelContrast(result.r, adj.contrastLowLevels, adj.contrastHighLevels);\n      result.g = TransformChannelContrast(result.g, adj.contrastLowLevels, adj.contrastHighLevels);\n      result.b = TransformChannelContrast(result.b, adj.contrastLowLevels, adj.contrastHighLevels);\n    #endif\n\n    result = clamp(result, 0.0, 1.0);\n    return result;\n  }\n"),S1="\n  Adjustments adj;\n\n  #ifdef ".concat(m1.defName,"\n    adj.whiteBalanceGain = ").concat(m1.whiteBalanceGainUniformName,";\n  #endif\n\n  #ifdef ").concat(_1.defName,"\n    adj.brightness = ").concat(_1.levelUniformName,";\n  #endif\n\n  #ifdef ").concat(h1.defName,"\n    adj.saturation = ").concat(h1.levelUniformName,";\n  #endif\n\n  #ifdef ").concat(b1.defName,"\n    adj.contrastLowLevels = ").concat(b1.lowLevelValuesUniformName,";\n    adj.contrastHighLevels = ").concat(b1.highLevelValuesUniformName,";\n  #endif\n\n  #ifdef ").concat(g1.defName,"\n    adj.colorCurvesNeutralVector = ").concat(g1.neutralVectorUniformName,";\n    adj.colorCurvesPositiveVector = ").concat(g1.positiveVectorUniformName,";\n    adj.colorCurvesNegativeVector = ").concat(g1.negativeVectorUniformName,";\n  #endif\n\n  gl_FragColor = ApplyAdjustments(adj, gl_FragColor);\n"),D1=function(){function e(){}return e.prototype.getName=function(){return"AdjustmentsShader"},e.prototype.getUniformNames=function(e){return v1},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return y1},e.prototype.getShaderFunctionBody=function(e){return S1},e.prototype.onBeforeBabylonRender=function(e,t){},e}(),I1=(0,g.Ng)(function(e){return{enabled:!Ht(e.colorAdjustments,(0,Rt.MK)(e.colorAdjustments.adjustmentsByDynamicLayer))}})(function(e){var a=e.children,i=e.enabled,r=e.order;return Hb((0,t.useMemo)(function(){return new D1},[]),r,i),i?n().createElement(n().Fragment,null,a):null}),x1="uCursorScreenPos@",C1="uCursorRadius@",O1=Lb(20),w1=Lb(60),E1=function(){function e(){this._cursorScreenPosition={x:0,y:0},this._cursorRadiusInScreenPixels=20}return e.prototype.setCursorScreenPosition=function(e){this._cursorScreenPosition=e},e.prototype.setCursorRadiusInScreenPixels=function(e){this._cursorRadiusInScreenPixels=e},e.prototype.getName=function(){return"REMOVE_MARKUP_NEAR_CURSOR_SHADER_NAME"},e.prototype.getUniformNames=function(e){return[e(x1),e(C1)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n        //RemoveMarkupNearCursorShader effect---\n        uniform vec2 ".concat(x1,";\n        uniform float ").concat(C1,";\n    "))},e.prototype.getShaderFunctionBody=function(e){return e("\n        // RemoveMarkupNearCursorShader effect---\n          float distance@ = distance(".concat(x1,", ").concat(Ur.k.screenPixelPos,");\n          overlayTextureAlphaOverride = \n              smoothstep(").concat(C1," + ").concat(O1,",\n                         ").concat(C1," + ").concat(w1,", \n                         distance@);\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat2(t(x1),this._cursorScreenPosition.x,this._cursorScreenPosition.y),e.setFloat(t(C1),this._cursorRadiusInScreenPixels)},e}(),A1=(0,g.Ng)(function(e){return{cursorScreenPosition:(0,zb.OZ)(e),enabled:(0,Vb.D)(e),cursorRadiusInScreenPixels:(0,zb.XU)(e)}})(function(e){var n=e.cursorScreenPosition,a=e.enabled,i=e.cursorRadiusInScreenPixels,r=e.order,o=(0,t.useMemo)(function(){return new E1},[]);return o.setCursorScreenPosition(n),o.setCursorRadiusInScreenPixels(i),jm([n.x,n.y,i]),Hb(o,r,a),null}),L1="DarkeningShader",k1=function(){function e(){}return e.prototype.getName=function(){return L1},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return""},e.prototype.getUniformNames=function(e){return[]},e.prototype.getShaderFunctionBody=function(e){return e("\n    //".concat(L1,"\n    if(").concat(Ur.k.isRenderingForExport," == 0.){\n      vec4 result = gl_FragColor.rgba;\n      result.rgb *= 0.5;\n      gl_FragColor =result;\n    }\n  "))},e.prototype.onBeforeBabylonRender=function(e,t){},e}(),M1=(0,g.Ng)(function(e){return{enabled:e.brushCursor.radiusIsChanging}})(function(e){var n=e.enabled,a=e.order;return Hb((0,t.useMemo)(function(){return new k1},[]),a,n),null}),P1=function(){function e(){this._level=.5,this._contrastStretchingParams={alpha:1,beta:0}}return e.prototype.setContrastStretchingParams=function(e){this._contrastStretchingParams=e},e.prototype.setLevel=function(e){this._level=e},e.prototype.getName=function(){return"AutoEnhanceShader"},e.prototype.getUniformNames=function(e){return[e("uLevel@"),e("uContrastStretchingParams@"),e("uEnhanceAlgorithm@"),e("uEqualizationCoefficient@")]},e.prototype.getFunctions=function(e){return[Cm,xm]},e.prototype.getHeaderCode=function(e){return e("\n          //AutoEnhance effect---\n          uniform float uLevel@;\n          uniform vec2 uContrastStretchingParams@;\n          uniform int uEnhanceAlgorithm@;\n          uniform float uEqualizationCoefficient@;\n          ")},e.prototype.getShaderFunctionBody=function(e){return e("\n    {\n        //AutoEnhance effect---  \n        vec3 hsv = rgb2hsv(gl_FragColor.rgb);\n        float origGrey = hsv[2];\n        \n        float enhancedGrey_CS = (origGrey * uContrastStretchingParams@.x) + uContrastStretchingParams@.y;\n        enhancedGrey_CS = min(enhancedGrey_CS, 1.0);\n\n        // Increase Saturation a bit\n        hsv[1] = min(1.0, hsv[1] * 1.07);\n\n        vec3 enhancedRGB_CS = hsv2rgb(vec3(hsv[0], hsv[1], enhancedGrey_CS));\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, enhancedRGB_CS, uLevel@);\n    }\n      ")},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t("uLevel@"),this._level),e.setFloat2(t("uContrastStretchingParams@"),this._contrastStretchingParams.alpha,this._contrastStretchingParams.beta)},e}(),T1=(0,g.Ng)(function(e){var t=e.autoEnhance,n=t.isAutoEnhanceOn,a=t.contrastStretchingParams,i=t.level;return{level:n?i:0,contrastStretchingParams:a}})(function(e){var n=e.level,a=e.contrastStretchingParams,i=e.order,r=(0,t.useMemo)(function(){return new P1},[]);return r.setContrastStretchingParams(a),r.setLevel(n),jm([a,n]),Hb(r,i,0!==n),null}),U1=function(e){var n=e.alpha,a=e.order,i=(0,t.useMemo)(function(){return new Eb.y},[]);return i.setOverlayAlpha(n),jm([n]),Hb(i,a,n>0),null},F1=(0,t.memo)(function(e){var t=e.disable,a=e.order,i=t?0:1;return n().createElement(U1,{alpha:i,order:a})}),H1=(0,g.Ng)(function(e){var t=e.uiState,n=t.waitingForActiveEditorActivityToComplete,a=t.activeEditorActivity,i=e.markup.markupContentItems.length>0,r=n&&a===Me.Y4,o=Pn(e);return{disable:r||!i||o}})(F1),R1=I(8114),N1=I(6527),B1="uMaskLevel@",j1=function(){function e(e){this._maskLevel=0,this._isWebGL2=!1,this._isWebGL2=e}return e.prototype.setMaskLevel=function(e){this._maskLevel=e},e.prototype.getMaskLevel=function(){return this._maskLevel},e.prototype.getName=function(){return"SecondaryMaskShader"},e.prototype.getUniformNames=function(e){return[e(B1)]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return e(" //SecondaryMask effect---\n    ".concat((0,Y_.A)("backgroundMask"),"\n    uniform float ").concat(e(B1),";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=e(B1),n=(0,N1.B)("backgroundMask");return e("//SecondaryMask effect---\n    \n    ".concat((0,R1.J)("backgroundMask",!!this._isWebGL2),"\n    {\n      float maskLevel = ").concat(t," * ").concat(n,";\n              \n      if(").concat(t," >= 0.)\n      {\n        //positive mask\n        gl_FragColor = mix( gl_FragColor, mainTextureColor, 1. - maskLevel );\n      }\n      else\n      {\n        //negative / inverted mask.\n        gl_FragColor = mix( gl_FragColor, mainTextureColor, -maskLevel );\n      }\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(B1),this._maskLevel)},e}(),V1=(0,g.Ng)(function(e){return{maskLevel:e.colorAdjustments.maskLevel}})(function(e){var n=e.maskLevel,a=e.order,i=(0,Q_.h)(),r=(0,t.useMemo)(function(){return new j1(i)},[i]);return r.setMaskLevel(n),jm([n]),Hb(r,a,0!==n),null}),z1=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};function G1(e,t,n){return e+((0,J_.S)(t,!!n)?"":".a")}var K1=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},W1="MaskLayerVisualizationShader",q1="MagicEraseMaskLayerVisualizationShader",Q1="ObjectSegmentationPreviewMaskLayerVisualizationShader",Y1="uInvertMask@",J1="uCropTransformInverse@",X1="uColor1@",Z1="uColor2@",$1="uColor3@",ev="uStops@",tv="uStripeWidth@",nv="uStripePixelOffset@",av="uMaskOpacity@",iv=function(){function e(e,t){this._maskVisualizationGradient=Xb.aO,this._shouldInvertMask=!1,this._transform=(0,it.yz)(),this._stripePixelOffset=0,this._stripeWidth=18,this._maskOpacity=1,this._isWebGL2=!1,this._maskLayerName=e,this._isWebGL2=t}return e.prototype.setColorGradient=function(e){this._maskVisualizationGradient=e},e.prototype.setCropTransform=function(e){this._transform=e},e.prototype.setShouldInvertMask=function(e){this._shouldInvertMask=e},e.prototype.setStripeWidth=function(e){this._stripeWidth=e},e.prototype.setStripePixelOffset=function(e){this._stripePixelOffset=e},e.prototype.setMaskOpacity=function(e){this._maskOpacity=e},e.prototype.getName=function(){switch(this._maskLayerName){case"backgroundMask":return W1;case"eraseMask":return q1;case"objectSegmentationPreview":return Q1;default:throw new Error("Invalid mask layer name")}},e.prototype.getUniformNames=function(e){return[e(Y1),e(J1),e(X1),e(Z1),e($1),e(ev),e(tv),e(nv),e(av)]},e.prototype.getFunctions=function(e){return[ug,"\n#define SQUARE_ROOT_OF_TWO 1.41421356237;\nfloat getNormalizedDiagonalPosition(vec2 uv){\n  vec2 diagonalDirection = normalize(vec2(1.,1.));\n  return 1. - dot(diagonalDirection,uv) / SQUARE_ROOT_OF_TWO;\n}\n","\nvec4 getStripeColor(vec2 pixelPos ,float pixelOffset,float stripeWidth,vec4 color1,vec4 color2,vec2 direction ){\n    float stripeDistance = dot(pixelPos,direction) + pixelOffset;\n    float inStripe = step(1., min(stripeWidth,mod(stripeDistance,stripeWidth*2.)) / stripeWidth );\n    return mix( color1, color2 , inStripe);\n}\n"]},e.prototype.getHeaderCode=function(e){var t="";switch(this._maskLayerName){case"backgroundMask":t="\n        //".concat(W1,"---\n        ").concat((0,Y_.A)("backgroundMask"),"\n      ");break;case"eraseMask":t="\n        //".concat(q1,"---\n        ").concat((0,Y_.A)("eraseMask"),"\n      ");break;case"objectSegmentationPreview":t="\n        //".concat(Q1,"---\n        ").concat((0,Y_.A)("objectSegmentationPreview"),"\n        ");break;default:throw new Error("Invalid mask layer name")}return e(" \n    ".concat(t,"\n    uniform float ").concat(Y1,";\n    uniform mat3 ").concat(J1,";\n    uniform vec4 ").concat(X1,";\n    uniform vec4 ").concat(Z1,";\n    uniform vec4 ").concat($1,";\n    uniform vec3 ").concat(ev,";\n    uniform float ").concat(tv,";\n    uniform float ").concat(nv,";\n    uniform float ").concat(av,";     \n    "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.screenPixelPos,n=Ur.k.isRenderingForExport,a=(0,R1.J)(this._maskLayerName,!!this._isWebGL2),i=G1((0,N1.B)(this._maskLayerName),this._maskLayerName,!!this._isWebGL2);return e("\n    //".concat(this.getName(),"---\n    ").concat(a,"\n    {\n      vec3 uvPositionInImage = vec3(").concat(t,".x,").concat(t,".y,1.0) * ").concat(J1,";\n\n      float sumOfMaskAlphas =  ").concat(X1,".a + ").concat(Z1,".a + ").concat($1,".a; \n    \n      if(sumOfMaskAlphas > 0. && ").concat(n," == 0.)\n      {\n        float fadeInBegin = 0.0;\n        float fadeInEnd = 1.0;\n        \n        float revealAlpha = smoothstep(fadeInBegin, fadeInEnd,  ").concat(av,");\n    \n        float t = getNormalizedDiagonalPosition(uvPositionInImage.xy);\n        vec4 maskColor = threeColorGradientAt(").concat(X1,",").concat(Z1,",").concat($1,",").concat(ev,",t);\n\n        vec4 stripeColor1 = vec4(0.,0.,0.,0.2);\n        vec4 stripeColor2 = vec4(1.,1.,1.,0.2);\n        vec2 stripeDirection = vec2(1.,1.);\n        vec4 stripeColor = getStripeColor(").concat(t,".xy,").concat(nv,",").concat(tv,",stripeColor1,stripeColor2,stripeDirection);\n        maskColor.rgb = mix(maskColor.rgb,stripeColor.rgb,stripeColor.a);\n\n        float maskTextureValue = ").concat(i,";\n        float blendParam = mix(maskTextureValue,1.-maskTextureValue,").concat(Y1,") * maskColor.a * revealAlpha;\n        gl_FragColor.rgb = mix( gl_FragColor.rgb, maskColor.rgb, blendParam );\n      }\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setMatrix3x3(t("uCropTransformInverse@"),new Float32Array(K1(K1([],(0,it.iE)(this._transform),!0),[0,0,1],!1)));var n=this._maskVisualizationGradient;e.setFloat4.apply(e,K1([t(X1)],n[0].color,!1)),e.setFloat4.apply(e,K1([t(Z1)],n[1].color,!1)),e.setFloat4.apply(e,K1([t($1)],n[2].color,!1));var a=[n[0].stopPercent,n[1].stopPercent,n[2].stopPercent];e.setFloat3.apply(e,K1([t(ev)],a,!1)),e.setFloat(t(tv),this._stripeWidth),e.setFloat(t(nv),this._stripePixelOffset),e.setFloat(t(Y1),this._shouldInvertMask?1:0),e.setFloat(t(av),this._maskOpacity)},e}(),rv=(0,t.memo)(function(e){var n,a,i,r,o=e.enabled,s=e.shouldInvertMask,c=e.order,d=e.maskVisualizationGradient,l=e.cropUvToWorld,u=e.stripeWidthInPhysicalPixels,f=e.maskOpacity,p=e.disableStripeAnimation,m=e.maskLayerName,_=e.hasMaskedArea,h=(0,Q_.h)(),b=new iv(m,h);b.setColorGradient(d),b.setShouldInvertMask(s),b.setCropTransform(l),b.setStripeWidth(u),b.setMaskOpacity(f),a=(n=d)[0].stopPercent,i=n[1].stopPercent,r=n[2].stopPercent,jm(z1(z1(z1(z1([],n[0].color,!0),n[0].color,!0),n[0].color,!0),[a,i,r],!1)),jm(function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([s,u,f],l,!0));var g=(0,mh.H)(m),v=o&&g;return Hb(b,c,v),function(e,n){var a=(0,t.useContext)(Bm.A).renderList;(0,t.useEffect)(function(){if(a&&n){var t=0,i=setInterval(function(){t--,e.setStripePixelOffset(t),a.requestRender()},75);return function(){clearInterval(i)}}},[e,a,n])}(b,!p&&v&&_&&f>0),null}),ov=(0,X.Rz)([su.N],function(e){return e.some(function(e){return e.maskParameters.maskType===Eg.D.FromLayer})}),sv=(0,g.Ng)(function(e,t){var n,a=(0,ic.et)(e).maskParameters,i=ov(e),r=td(e),o=e.transformTools.device.pixelRatio,s=(0,ic.j6)(e),c=t.maskLayerName;return{enabled:!("eraseMask"===(n=c)||"backgroundMask"===n)||s===c,showPlaceholderAnimation:i,shouldInvertMask:a.maskType===Eg.D.FromLayer&&a.shouldInvertMask,maskVisualizationGradient:Xb.aO,cropUvToWorld:r,stripeWidthInPhysicalPixels:Math.ceil(Xb.aL*o),maskOpacity:(0,ic.e8)(e),hasMaskedArea:(0,Ic.G)(e.texturePatch.texturePatchInfos,c)}})(rv),cv=function(){function e(e){this._isWebGL2=e}return e.prototype.getName=function(){return"ViewOriginalShader"},e.prototype.getUniformNames=function(e){return[]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return e(" //ViewOriginal effect---\n    ".concat((0,Y_.A)("original"),"\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.isRenderingForExport,n=(0,N1.B)("original"),a=!this._isWebGL2;return e("//ViewOriginal effect---\n        ".concat((0,R1.J)("original",this._isWebGL2,a),"\n        if (").concat(t," == 0.) {\n          gl_FragColor = ").concat(n,";\n        }\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){},e}(),dv=n().memo(function(e){var n=e.enabled,a=e.order,i=(0,Q_.h)();return Hb((0,t.useMemo)(function(){return new cv(i)},[i]),a,n),null});dv.displayName="ViewOriginalEffect";var lv=(0,g.Ng)(function(e){return{enabled:Pn(e)}})(dv),uv=I(6083),fv=1e7,pv=n().memo(function(e){var n=e.isAutoEnhanceOn,a=e.setAutoEnhanceParameters,i=function(){var e=(0,t.useContext)(Wm.M),n=e.textureManager,a=e.engine;return(0,t.useCallback)(function(e,t){var i=null==n?void 0:n.getAlreadyLoadedTexture(e);if(!i)throw new Error("useGetPixelBytes: texture not found for "+e);if(!a)throw new Error("engine not defined");return zh(i,t,a)},[a,n])}(),r=(0,t.useContext)($n.Z).image,o=(0,mh.H)("main");return(0,t.useEffect)(function(){if(n&&o){var e=function(e,t,n){var a=null==e?void 0:e.main;if(!a)throw Error("Main image is null");var i=(0,uv.T)(e);if(void 0===i)throw new Error("No oriented size for image");var r={width:i.x,height:i.y,top:0,left:0};return(0,Rr.ny)(a)?{bytes:a.bytes,format:a.format}:t(a,r)}(r,i),t=e.format===_m.A.RGBA?4:3,s=e.bytes.byteLength/t,c=function(e,t){var n=(0,cm.x)(e.format),a=e.bytes;if(n<3)throw new Error("calculateHistogram only supports RGB and RGBA formats");var i=n;t>fv&&(i*=Math.ceil(t/fv));for(var r=new Array(256).fill(0),o=0;o+2<a.length;o+=i)r[Math.max(a[o],a[o+1],a[o+2])]++;return r}(e,s),d=function(e,t,n){var a=function(e,t,n){for(var a=0,i=e.length,r=.011*n,o=0,s=0;s<e.length;s++)if((o+=e[s])>r){a=s;break}for(o=0,s=e.length-1;s>=0;s--)if((o+=e[s])>r){i=s;break}return{lowThreshold:a,highThreshold:i}}(e,0,n),i=a.lowThreshold,r=a.highThreshold-i,o=255/(r=Math.max(r,1));return{alpha:o,beta:-o*i/384}}(c,0,s),l=d.alpha,u=d.beta;a({alpha:l,beta:u})}},[n,r,i,a,o]),null}),mv={setAutoEnhanceParameters:mo},_v=(0,g.Ng)(function(e){return{isAutoEnhanceOn:e.autoEnhance.isAutoEnhanceOn}},mv)(pv),hv="ReplaceBackgroundMaskWithColorShader",bv="uHasColor@",gv="uColor@",vv=function(){function e(e){this._isWebGL2=!1,this._isWebGL2=e}return e.prototype.setColor=function(e){this._color=e},e.prototype.getName=function(){return hv},e.prototype.getUniformNames=function(e){return[e(bv),e(gv)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(hv,"\n        ").concat((0,Y_.A)("backgroundMask"),"\n        uniform float ").concat(bv,";\n        uniform vec4 ").concat(gv,";\n        "))},e.prototype.getShaderFunctionBody=function(e){var t=G1((0,N1.B)("backgroundMask"),"backgroundMask",!!this._isWebGL2);return"\n            //".concat(hv,"\n            ").concat((0,R1.J)("backgroundMask",!!this._isWebGL2),"\n            {\n              float colorWeight = ").concat(t,";\n              gl_FragColor = mix(gl_FragColor, ").concat(e(gv),", colorWeight);\n            }\n        ")},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(bv),void 0===this._color?0:1),e.setFloat4.apply(e,function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([t(gv)],this._color||gm.Qf,!1))},e}(),yv=(0,X.Rz)([At._o,ic.to,ic.e8],function(e,t,n){var a=t.maskType,i=n>0;return(e===Me.Nr||e===Me.vs||e===Me.NF)&&a===Eg.D.FromLayer&&i}),Sv=(0,X.Rz)([Pn,yv,At._o,un.BA,un.jG,un._S],function(e,t,n,a,i,r){if(!e&&!t){if(n!==Me.NF)return function(e){var t=void 0;return"ColorRGBABackground"===(null==e?void 0:e.type)?t=e.color:"TransparentBackground"===(null==e?void 0:e.type)&&(t=gm.BG),t}(a);var o=void 0;return"ColorRGBABackground"===i&&"ColorRGBABackground"===r.ColorRGBABackground.type?o=r.ColorRGBABackground.color:"TransparentBackground"===i&&(o=gm.BG),o}}),Dv=(0,g.Ng)(function(e){return{color:Sv(e)}})(function(e){var n=e.color,a=e.order,i=(0,Q_.h)(),r=(0,t.useMemo)(function(){return new vv(i)},[i]);r.setColor(n);var o=function(e){return e||[null,null,null,null]}(n);return jm(o),Hb(r,a,!!n),null}),Iv="AIRelightingShader",xv="uLightPosition@",Cv="uLightColor@",Ov=function(){function e(){this._lightPosition=.5,this._lightColor={x:1,y:1,z:1,w:1}}return e.prototype.setLightPosition=function(e){this._lightPosition=e},e.prototype.setLightColor=function(e){this._lightColor={x:e[0],y:e[1],z:e[2],w:e[3]}},e.prototype.getName=function(){return Iv},e.prototype.getUniformNames=function(e){return[e(xv),e(Cv)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n    //".concat(Iv,"---\n    #ifndef ").concat((0,Em.T)("depth"),"\n        #define ").concat((0,Em.T)("depth"),"\n    #endif\n    uniform float ").concat(xv,";\n    uniform vec4 ").concat(Cv,";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.fullTexturePixelSize,n=Ur.k.depthMapTextureSampler,a=Ur.k.uv,i=Ur.k.singleTileTextureUvTransform;return e("\n    //".concat(this.getName(),"---\n    {\n      float pixelDepth = 1. - texture2D(").concat(n,", ").concat(a,".xy).r;\n      \n      // Estimate the normal of this pixel based on OpenGL derivatives\n      float dzdx = dFdx(pixelDepth);\n      float dzdy = dFdy(pixelDepth);\n      vec3 normal = normalize(vec3(-dzdx, -dzdy, 1.));\n\n      // TODO Most of this matrix math could be done outside the shader for better performance!\n      // Now that I have a normal, perform a lighting calculation with a hardcoded light source\n      float imgHeight = ").concat(t,".y;\n      float imgWidth = ").concat(t,".x;\n      float nearPlane = 0.1;\n      float farPlane = 100.;\n      float cameraFov = radians(60.);\n\n      // Light position in world space\n      float lightPosX = -0.1 + (-0.5 + ").concat(xv,");\n      float lightPosY = 0.1;\n      float lightPosZ = -0.1;\n\n      vec3 lightPos_worldSpace = vec3(lightPosX, lightPosY, lightPosZ);\n\n      vec3 lightColor = ").concat(Cv,".rgb;\n\n      // Compute inverse projection matrix from our fake camera\n      float f = 1. / tan(cameraFov / 2.);\n      float n = nearPlane - farPlane;\n      float aspect = imgWidth / imgHeight;\n\n      mat4 proj = mat4(0.);\n      proj[0][0] = f / aspect;\n      proj[1][1] = f;\n      proj[2][2] = (nearPlane + farPlane) / n;\n      proj[2][3] = -1.0;\n      proj[3][2] = (2.0 * nearPlane * farPlane) / n;\n      \n      // Calculate the determinant of the projection matrix\n      float det = determinant(proj);\n      \n      mat4 invProj = det == 0. ? mat4(1.) : inverse(proj);\n\n      // Get the pixel's assumed position in world space      \n      vec3 uvInSingleTileTexture =  vec3(uv.x,uv.y,Z_COORDINATE_2D) * ").concat(i,";\n\n      vec4 pixelPos_clipSpace = vec4(uvInSingleTileTexture.xy * 2. - 1., pixelDepth, 1.);\n      vec4 pixelPos_worldSpace = invProj * pixelPos_clipSpace;\n      pixelPos_worldSpace /= pixelPos_worldSpace.w;\n\n      vec3 lightDir_worldSpace = normalize(lightPos_worldSpace.xyz - pixelPos_worldSpace.xyz);\n\n      float diffuseAmt = max(dot(normal, lightDir_worldSpace.xyz), 0.0);\n\n      float ambientAmt = 0.1;\n      vec3 ambientColor = ambientAmt * gl_FragColor.rgb;\n      vec3 diffuseColor = diffuseAmt * lightColor * gl_FragColor.rgb;\n      gl_FragColor.rgb = ambientAmt + diffuseColor;\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(xv),this._lightPosition),e.setVector4(t(Cv),this._lightColor)},e}(),wv=(0,t.memo)(function(e){var t=e.enabled,n=e.order,a=e.lightPosition,i=e.lightColor,r=new Ov;r.setLightPosition(a),r.setLightColor(i),jm([a,i]);var o=(0,mh.H)("depth");return Hb(r,n,t&&o),null}),Ev=(0,g.Ng)(function(e){return{enabled:e.relight.isLightApplied,lightPosition:e.relight.lightPosition,lightColor:e.relight.lightColor}})(wv);function Av(e){return"BlurredBackground"===e.type&&e.blurLevel>0}var Lv=(0,X.Rz)([un.BA,yv],function(e,t){return Av(e)&&!t}),kv="SingleTileBackgroundRgbLayerVisualizationShader",Mv="uIsVisible@",Pv=function(){function e(e){this._isVisible=!1,this._isWebGL2=!1,this._isWebGL2=e}return e.prototype.setIsVisible=function(e){this._isVisible=e},e.prototype.getName=function(){return kv},e.prototype.getUniformNames=function(e){return[e(Mv)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n    //".concat(kv,"---\n    ").concat((0,Y_.A)("singleTileBackground"),"\n    ").concat((0,Y_.A)("backgroundMask"),"\n    uniform float ").concat(e(Mv),";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.isRenderingForExport,n=Ur.k.singleTileTextureUvTransform,a=Ur.k.uv,i=G1((0,N1.B)("backgroundMask"),"backgroundMask",!!this._isWebGL2);return e("\n    //".concat(kv,"---\n    ").concat((0,R1.J)("backgroundMask",!!this._isWebGL2),"\n    {\n      float maskValue = ").concat(i,";\n      vec3 uvInSingleTileTexture =  vec3(").concat(a,".x,").concat(a,".y,1.0) * ").concat(n,";\n      vec4 backgroundTextureValue = texture2D(").concat((0,Am.X)("singleTileBackground"),", uvInSingleTileTexture.xy);\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, backgroundTextureValue.rgb, ").concat(t," * maskValue);\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, backgroundTextureValue.rgb, (1.0 - ").concat(t,") * ").concat(e(Mv)," * maskValue );\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(t(Mv),this._isVisible?1:0)},e}(),Tv=(0,t.memo)(function(e){var n=e.enabled,a=e.isVisible,i=e.order,r=(0,Q_.h)(),o=(0,t.useMemo)(function(){return new Pv(r)},[r]),s=(0,mh.H)("singleTileBackground");return o.setIsVisible(a&&s),jm([a]),Hb(o,i,n),null}),Uv=(0,g.Ng)(function(e){return{enabled:Av((0,un.BA)(e)),isVisible:Lv(e)}})(Tv),Fv=function(e){var n=e.order;return Hb((0,t.useMemo)(function(){return new z_},[]),n),null},Hv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rv=function(e){function t(){return e.call(this,"FakeMipMapEffectShader",km.v$)||this}return Hv(t,e),t}(j_),Nv=n().memo(function(e){var n=e.zoomLevel,a=e.order,i=(0,t.useMemo)(function(){return new Rv},[]),r=(0,t.useContext)(Wm.M).engine;return Hb(i,a,!(0,l_.t)(r)&&n<.3333333333333333),null});Nv.displayName="FakeMipMapsEffect";var Bv=(0,g.Ng)(function(e){return{zoomLevel:(0,at.j)(e)}})(Nv),jv="SHARPNESS_SHADER_NAME",Vv=function(){function e(){this._sharpness=0}return e.prototype.setSharpness=function(e){this._sharpness=e},e.prototype.getName=function(){return jv},e.prototype.getUniformNames=function(e){return[]},e.prototype.getFunctions=function(){return[]},e.prototype.getHeaderCode=function(e){return e(" //".concat(jv,"---\n    ").concat((0,Y_.A)("singleTilePreSharpen"),"\n    "))},e.prototype.getShaderFunctionBody=function(e){return""},e.prototype.onBeforeBabylonRender=function(e,t){e.setFloat(Ur.k.sharpness,this._sharpness)},e}(),zv=n().memo(function(e){var n=e.sharpness,a=e.order,i=(0,t.useMemo)(function(){return new Vv},[]);return Hb(i,a,(0,mh.H)("singleTilePreSharpen")&&n!==E.pS),i.setSharpness(n),jm([n]),null});zv.displayName="SharpnessEffect";var Gv=(0,g.Ng)(function(e){return{sharpness:e.colorAdjustments.baseAdjustments.sharpness}})(zv),Kv=function(){return Kv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Kv.apply(this,arguments)},Wv=n().memo(function(e){var a=e.disableMaskLayerVisualizationStripeAnimation,i=e.checkerBoardEffectVisualProps,r=(0,t.useContext)(q.u),o=r.enableAdjustments,s=r.enableFilters,c=r.enabledRetouchModes,d=r.enableAutoEnhance,l=r.enableBackground,u=r.enableMarkup,f=r.experimental_enableInPaintingDevUi,p=r.experimental_enableSharpness,m=r.experimental_enableAIRelighting;return n().createElement(n().Fragment,null,n().createElement(Fv,{order:0}),n().createElement(p1,{order:1}),n().createElement(Bv,{order:2}),o&&p&&n().createElement(Gv,{order:3}),l&&n().createElement(Uv,{order:4}),m&&n().createElement(Ev,{order:5}),s&&n().createElement(W0,{order:6}),o&&n().createElement(n().Fragment,null,n().createElement(I1,{order:12},n().createElement(d1,{order:7}),n().createElement(h0,{order:8}),n().createElement(H0,{order:9}),n().createElement(M0,{order:10}),n().createElement(J0,{order:11}))),c.length>0&&n().createElement(n().Fragment,null,n().createElement(A1,{order:13}),n().createElement(M1,{order:14})),l&&n().createElement(Dv,{order:15}),o&&n().createElement(Z0,{order:16}),d&&n().createElement(n().Fragment,null,n().createElement(_v,null),n().createElement(T1,{order:17})),f&&n().createElement(V1,{order:18}),n().createElement(lv,{order:19}),n().createElement(b0,Kv({order:20},i)),l&&n().createElement(sv,{disableStripeAnimation:a,maskLayerName:"backgroundMask",order:21}),c.length>0&&n().createElement(sv,{disableStripeAnimation:a,maskLayerName:"eraseMask",order:22}),f&&n().createElement(sv,{disableStripeAnimation:!0,maskLayerName:"objectSegmentationPreview",order:25}),u&&n().createElement(H1,{order:23}),n().createElement(K0,{order:24}))}),qv=I(5444),Qv=(0,t.memo)(function(e){return e.hasStylizerTexturePatchRequest?n().createElement(Og,null):null}),Yv=(0,X.Rz)([su.N],function(e){return e.some(function(e){return"main"===e.algorithmParameters.layerToPatch})}),Jv=(0,g.Ng)(function(e){return{hasStylizerTexturePatchRequest:Yv(e)}})(Qv),Xv=I(1042),Zv=(0,t.memo)(function(e){var t=e.allTexturePatchRequests;return(0,Xv.j)(t,"objectSegmentation")?n().createElement(Og,null):null}),$v=(0,g.Ng)(function(e){return{allTexturePatchRequests:(0,su.N)(e)}})(Zv),e3=I(4556),t3=n().memo(function(e){var n,a,i,r,o,s,c,d,l,u=e.mainLayerContentHash;return n=e.enabled,a="main",i=u,r=(0,t.useContext)(Wm.M).textureManager,o=(0,t.useContext)($n.Z).image,s=(0,e3.C)(),c=o&&(0,Rr.l_)(o)?o.main:null,d=(0,mh.H)(a),l=(0,t.useRef)(""),(0,t.useEffect)(function(){if(n&&d&&c&&o&&r){var e="".concat(c.id,"_").concat(i);l.current!==e&&(s.notifyContentHashChanged(a,i,o,r),l.current=e)}},[s,n,a,i,o,c,d,r]),null}),n3=(0,g.Ng)(function(e){return{mainLayerContentHash:Ih(e,"main"),enabled:(0,de.H1)(e)}})(t3),a3=(0,t.memo)(function(){return"loading"===(0,t.useContext)(qc).resizedImageWithStatus.status?n().createElement(Og,null):null}),i3=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},r3="UV_REVEAL_SHADER_NAME",o3="uMaxU@",s3="uViewToUvTransform@",c3=function(){function e(){this._maxU=1,this._viewToUvTransform=new Float32Array(9)}return e.prototype.setMaxU=function(e){this._maxU=e},e.prototype.setUvToViewTransform=function(e){this._viewToUvTransform=new Float32Array(i3(i3([],(0,it.iE)(e),!0),[0,0,1],!1))},e.prototype.getName=function(){return r3},e.prototype.getUniformNames=function(e){return[e(o3),e(s3)]},e.prototype.getFunctions=function(e){return[]},e.prototype.getHeaderCode=function(e){return e("\n    // ".concat(r3,"\n    uniform float ").concat(o3,";\n    uniform mat3 ").concat(s3,";\n    "))},e.prototype.getShaderFunctionBody=function(e){var t=Ur.k.screenPixelPos;return e("\n    // ".concat(r3,"\n    {\n      vec3 uvPos = vec3(").concat(t,".x,").concat(t,".y,1.0) * ").concat(s3,";\n      if(uvPos.x < ").concat(o3,")\n      {\n        discard;\n      }\n    }\n    "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setMatrix3x3(t(s3),this._viewToUvTransform),e.setFloat(t(o3),this._maxU)},e}(),d3=function(e){var n=e.maxU,a=e.uvToView,i=e.order,r=(0,t.useMemo)(function(){return new c3},[]);return r.setMaxU(n),r.setUvToViewTransform(a),jm(function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([n],a,!0)),Hb(r,i),null},l3=(0,t.memo)(function(e){var a=e.viewCropTransform,i=e.zIndex,r=(0,t.useContext)(qc),o=r.resizedImageWithStatus,s=r.revealPosViewSpace,c=(0,it.J)(a,{x:s,y:0}).x,d=null==o?void 0:o.image;if(!d||!d.main||"loaded"!==o.status)return null;var l=(0,rt.GM)(a).width,u={x:d.main.width,y:d.main.height},f=l/u.x;return n().createElement(f_,{image:d,transform:a,zIndex:i},n().createElement(Fv,{order:0}),n().createElement(f1,{zoomLevel:f,originalImageSize:u,order:1}),n().createElement(d3,{order:2,maxU:c,uvToView:a}))}),u3=(0,g.Ng)(function(e){return{viewCropTransform:td(e)}},{})(l3),f3="ROUNDED_RECTANGLE_SHADER_NAME",p3="uRectParams@",m3="uRectColor@",_3="uBorderColor@",h3="uBorderThickness@",b3="uCornerRadius@",g3=function(){function e(){this._posX=0,this._posY=0,this._width=44,this._height=105,this._cornerRadius=7,this._color=[0,0,0,0],this._borderColor=[0,0,0,0],this._borderThickness=2}return e.prototype.setRectangle=function(e){this._posX=e.left,this._posY=e.top,this._width=e.width,this._height=e.height},e.prototype.setColor=function(e){this._color=e},e.prototype.setBorderColor=function(e){this._borderColor=e},e.prototype.setBorderThickness=function(e){this._borderThickness=e},e.prototype.getName=function(){return f3},e.prototype.getFunctions=function(e){return["\n#ifndef ROUNDED_BOX_SDF\n#define ROUNDED_BOX_SDF\nfloat roundedBoxSDF(vec2 centerPosition, vec2 size, float radius) {\n    return length(max(abs(centerPosition) - size + radius, 0.0)) - radius;\n}\n#endif\n"]},e.prototype.getHeaderCode=function(e){return e("\n        //".concat(f3,"\n\t\t\t\t").concat((0,Y_.A)("main"),"\n        uniform vec4 ").concat(p3,";\n        uniform vec4 ").concat(m3,";\n        uniform vec4 ").concat(_3,";\n        uniform float ").concat(b3,";\n        uniform float ").concat(h3,";\n        "))},e.prototype.getUniformNames=function(e){return[e(p3),e(m3),e(_3),e(b3),e(h3)]},e.prototype.getShaderFunctionBody=function(e){return e("\n        //".concat(f3,"\n        {\n            vec2 pixelCoord = gl_FragCoord.xy;\n            vec2 rectCenter = ").concat(p3,".xy;\n            vec2 rectSize = ").concat(p3,".zw/2.0;\n            float insideAntiAlias = -0.5;\n            float outsideAntiAlias = 0.5;\n            float insideAntiAliasBorder = ").concat(h3," - 0.5;\n            float outsideAntiAliasBorder = ").concat(h3," + 0.5;\n            vec4 borderColorTransparent = vec4(").concat(_3,".xyz, 0.);\n            \n            float distanceToRect = roundedBoxSDF(pixelCoord - rectCenter, rectSize, ").concat(b3,");\n            \n            if (distanceToRect < insideAntiAlias) { // inside the rectangle\n                gl_FragColor = ").concat(m3,";\n            } else if (distanceToRect < outsideAntiAlias){ // anti-aliasing between the rectangle and the border\n                gl_FragColor = mix(").concat(m3,", ").concat(_3,", smoothstep(insideAntiAlias, outsideAntiAlias, distanceToRect));\n            } else if (distanceToRect < insideAntiAliasBorder) { // border\n                gl_FragColor = ").concat(_3,";\n            } else if (distanceToRect < outsideAntiAliasBorder) { // anti-aliasing between the border and the outside\n                gl_FragColor = mix(").concat(_3,", borderColorTransparent, smoothstep(insideAntiAliasBorder, outsideAntiAliasBorder, distanceToRect));\n            } else { // outside the block but inside the container rectangle\n                discard;\n                // disable the line above and enable the line below to see/test the container rectangle\n\t\t\t\t\t\t\t\t// gl_FragColor = vec4(1.,0.,0.,1.);\n            }\n        }\n        "))},e.prototype.onBeforeBabylonRender=function(e,t){e.setVector4(t(p3),{x:this._posX,y:this._posY,z:this._width,w:this._height}),e.setVector4(t(m3),Qm(this._color)),e.setVector4(t(_3),Qm(this._borderColor)),e.setFloat(t(b3),this._cornerRadius),e.setFloat(t(h3),this._borderThickness)},e}(),v3=(0,g.Ng)(function(e){return{zoomLevel:(0,at.j)(e)}})(function(e){var n=e.zIndex,a=e.rectangle,i=e.color,r=e.borderColor,o=e.borderThickness,s=(0,t.useMemo)(function(){return new g3},[]);return s.setRectangle(a),s.setColor(i),s.setBorderColor(r),s.setBorderThickness(o),jm([a.left,a.top,a.width,a.height,i,r]),Hb(s,n,!0),null}),y3=function(){return y3=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y3.apply(this,arguments)},S3=[.459,.459,.459,.7],D3=S3,I3=(0,t.memo)(function(e){var a=e.zIndex,i=e.canvasPixelSize,r=e.devicePixelRatio,o=(0,b.D)(),s=(0,fg.i)(o.palette.white,.9),c=s,d=Jc(r),l=d.lineThickness,u=d.borderThickness,f=d.blockWidth,p=d.blockHeight,m=d.blockContainerWidth,_=d.blockContainerHeight,h=function(e,n,a){var i=function(e,n,a){var i=(0,t.useState)(void 0),r=i[0],o=i[1];return(0,t.useEffect)(function(){var t,i=new Blob([e],{type:"image/svg+xml"});t=URL.createObjectURL(i);var r=new Image(n,a);return r.src=t,o(r),function(){t&&URL.revokeObjectURL(t)}},[e,n,a]),r}((0,t.useMemo)(function(){return(0,A.J)('\n<svg width="20" height="23" viewBox="0 0 20 23" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.7067 0.252598L19.6942 5.42157C20.0486 5.72754 20.0811 6.20627 19.7915 6.54393L19.695 6.64068L13.7075 11.8213C13.3178 12.1585 12.6852 12.1591 12.2947 11.8226C11.9397 11.5167 11.9068 11.0376 12.1965 10.6997L12.2932 10.6029L16.578 6.89655L0.999014 6.89731C0.493246 6.89731 0.0752726 6.57283 0.00911131 6.15184L0 6.03481C0 5.59816 0.375829 5.23729 0.863454 5.18018L0.999014 5.17231L16.5807 5.17155L12.294 1.4724C11.9393 1.1662 11.9071 0.687045 12.1972 0.349382L12.2939 0.252644C12.6486 -0.0535773 13.2036 -0.0814305 13.5947 0.169097L13.7067 0.252598ZM19.9909 16.8465L20 16.9635C20 17.4002 19.6242 17.761 19.1366 17.8181L19.001 17.826L3.42174 17.825L7.7124 21.5273C8.06725 21.8334 8.09962 22.3126 7.80964 22.6504L7.71293 22.7471C7.35848 23.0535 6.80346 23.0815 6.41224 22.8311L6.30015 22.7477L0.306071 17.5769C-0.0487516 17.2709 -0.0812262 16.7917 0.208794 16.454L0.305485 16.3572L6.29957 11.1779C6.68954 10.8409 7.32208 10.8407 7.7124 11.1773C8.06725 11.4834 8.09962 11.9626 7.80964 12.3004L7.71293 12.3971L3.42707 16.1L19.001 16.101C19.5068 16.101 19.9247 16.4254 19.9909 16.8465Z" fill="{0}"/>\n</svg>\n',e.palette.neutralPrimary)},[e.palette.neutralPrimary]),n,a);return function(e){var n=(0,Or.Dj)(),a=(0,t.useState)(void 0),i=a[0],r=a[1];return(0,t.useEffect)(function(){if(void 0!==e){var t=!0;return e.decode().then(function(){t&&r(e)}).catch(function(a){t&&n({id:"ImageNotLoaded",message:"Error decoding image "+e.src})}),function(){t=!1}}},[n,e]),i}(i)}(o,d.exchangeIconWidth,d.exchangeIconHeight),g=(0,t.useMemo)(function(){if(h)return(0,Rr.n7)(h,"FullSize")},[h]),v=(0,t.useContext)(qc),y=v.revealPosViewSpace;if(!Yc(v.resizedImageWithStatus.status))return null;var S=y,D=i.y/2-_/2,I=i.y/2+_/2,x={left:S-l/2,top:0,width:l,height:D},C=y3(y3({},x),{left:x.left+l}),O=y3(y3({},x),{left:x.left-l}),w={left:S-l/2,top:I,width:l,height:i.y-I},E=y3(y3({},w),{left:w.left+l}),L=y3(y3({},w),{left:w.left-l}),k={left:S-m/2,top:D,width:m,height:_},M={left:S,top:i.y/2,width:f,height:p},P=h&&{left:S-h.width/2,top:i.y/2-h.height/2,width:h.width,height:h.height};return n().createElement(n().Fragment,null,n().createElement(Bb,{zIndex:a,color:gm.BG,transform:(0,rt.qq)(k)},n().createElement(v3,{zIndex:a+1,rectangle:M,color:s,borderColor:S3,borderThickness:u})),n().createElement(Bb,{zIndex:a+2,color:c,transform:(0,rt.qq)(x)}),n().createElement(Bb,{zIndex:a+2,color:D3,transform:(0,rt.qq)(O)}),n().createElement(Bb,{zIndex:a+2,color:D3,transform:(0,rt.qq)(C)}),n().createElement(Bb,{zIndex:a+2,color:c,transform:(0,rt.qq)(w)}),n().createElement(Bb,{zIndex:a+2,color:D3,transform:(0,rt.qq)(L)}),n().createElement(Bb,{zIndex:a+2,color:D3,transform:(0,rt.qq)(E)}),g&&P&&n().createElement(f_,{image:g,zIndex:a+3,transform:(0,rt.qq)(P)},n().createElement(Fv,{order:0})))}),x3=(0,g.Ng)(function(e){var t=e.transformTools;return{canvasPixelSize:t.view.viewportPixelSize,devicePixelRatio:t.device.pixelRatio}},{})(I3),C3=(0,t.memo)(function(e){var a=e.zIndex,i=e.originalImagePixelSize,r=e.devicePixelRatio,o=e.resizeFactor,s=(0,t.useContext)(qc),c=s.revealPosViewSpace,d=s.resizedImageWithStatus,l=mt(i.width,i.height).imageDimension,u=mt(i.width*o,i.height*o).imageDimension;if("loaded"!==d.status)return null;var f=c/r;return n().createElement(n().Fragment,null,n().createElement(re,{style:{bottom:8,left:f,transform:"translateX(calc(-100% - 5px))",width:"max-content",zIndex:a},visible:!0},l),n().createElement(re,{style:{bottom:8,left:f,transform:"translateX(5px)",width:"max-content",zIndex:a},visible:!0},u))}),O3=(0,g.Ng)(function(e){return{originalImagePixelSize:(0,Be.W9)(e),devicePixelRatio:e.transformTools.device.pixelRatio,resizeFactor:e.resize.resizeFactor}},{})(C3),w3=function(){return w3=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w3.apply(this,arguments)},E3=(0,t.memo)(function(e){var a=e.animationSettings,i=e.texturePatchCacheMethodsRef,r=e.isEditorFocused,o=e.cropHandleSizeCss,s=void 0===o?qv.WS:o,c=e.cropHandleHitAreaSizeCss,d=void 0===c?qv.Bc:c,l=e.editorCanvasBackgroundColor,u=e.markupProps,f=e.showBackgroundSegmentationAnimatingBorder,p=void 0===f||f,m=e.checkerBoardEffectVisualProps,_=(0,t.useContext)($n.Z),h=_.image,b=_.setOffscreenRenderer,g=_.setImageLayer;return n().createElement(qh,{animationSpeedMultiplier:null==a?void 0:a.animationSpeedMultiplier,backgroundColor:l},n().createElement(Ot,{match:Me.I8},n().createElement(B_,{handleSizeCss:s,handleHitAreaSizeCss:d}),n().createElement(c0,null)),n().createElement(C_,{image:h,setImageLayer:g,color:gm.Qf,zIndex:1},n().createElement(lg,{ref:i}),n().createElement(rb,null,n().createElement(Ab,{ref:b}),n().createElement(Wv,{disableMaskLayerVisualizationStripeAnimation:null==a?void 0:a.disableMaskLayerVisualizationStripes,checkerBoardEffectVisualProps:m}))),n().createElement(Ot,{match:Me.qO},n().createElement(Wb,{disableAnimation:null==a?void 0:a.disableCircleBrushCursorRotation}),n().createElement(Bg,null),n().createElement(Pg,null)),n().createElement(Ot,{match:[Me.NF,Me.Nr,Me.vs]},n().createElement(Bg,null),p&&n().createElement(Lg,null),n().createElement(Wb,{disableAnimation:null==a?void 0:a.disableCircleBrushCursorRotation})),n().createElement(Ot,{match:[Me.Nr,Me.vs]},n().createElement(rg,null),n().createElement(Qb,null),n().createElement($v,null)),n().createElement(Ot,{match:[Me.vs]},n().createElement(Jv,null)),n().createElement(Ot,{match:[Me.qQ]},n().createElement(a3,null),n().createElement(u3,{zIndex:3}),n().createElement(x3,{zIndex:4}),n().createElement(O3,{zIndex:4})),n().createElement(H_,w3({isEditorFocused:r},u)),n().createElement($h,null),n().createElement(Oh,null),n().createElement(n3,null))}),A3=(0,t.memo)(E3),L3=I(3629),k3=function(){},M3=function(e){var t=e.isOnline,a=e.msaStatus,i=e.onMSALogin,r=e.onMSALogout,o=e.onMSABlocked,s=e.onMSABanned,c=e.hostError,d=e.onDismissHostError,l=e.children;return n().createElement(L3.E.Provider,{value:{isOnline:t,msaStatus:null!=a?a:"SignedOut",onMSALogin:null!=i?i:k3,onMSALogout:null!=r?r:k3,onMSABlocked:null!=o?o:k3,onMSABanned:null!=s?s:k3,onDismissHostError:null!=d?d:k3,hostError:c}},l)},P3=I(1519),T3=function(e){var t=e.children,a=e.doesImageContainFaces,i=e.imageCreationExtensionState,r=e.stylizerPivotTeachingTipState,o=e.onDownloadImageCreationExtension,s=e.onStylizerPivotTeachingTipDismissed,c=e.setStylizerPivotTeachingTipState;return n().createElement(P3.U.Provider,{value:{imageCreationExtensionState:null!=i?i:"Unavailable",onDownloadImageCreationExtension:null!=o?o:function(){},doesImageContainFaces:null!=a?a:void 0,stylizerPivotTeachingTipState:r||"alreadyShown",onStylizerPivotTeachingTipDismissed:s||function(){},setStylizerPivotTeachingTipState:c||function(){}}},t)},U3=(0,g.Ng)(function(e){return{undoRedoStack:e.imageWasReplaced.undoRedoStack}})(lp),F3=(0,g.Ng)(function(e){return{undoRedoStack:e.resize.undoRedoStack,disableUndoRedoOverride:void 0}})(lp),H3=function(){return H3=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H3.apply(this,arguments)};Vf();var R3=(0,t.forwardRef)(function(e,a){var i=e.image,r=e.componentSize,o=e.onSave,s=e.onMSALogin,c=e.onMSALogout,d=e.onMSABlocked,l=e.onMSABanned,u=e.onDownloadImageCreationExtension,f=e.onLinkClicked,p=e.onRenderSaveMenu,m=e.localization,_=e.telemetryCallback,h=e.onError,g=e.onClose,v=e.onEditsChanged,y=e.onUiStateChanged,S=e.onResetEditsConfirmationDialog,D=e.defaultEdits,I=e.initialEdits,x=e.initialUiState,C=e.pivotKeyOrder,O=e.serializedState,w=e.layout,E=e.customCommandBarButtons,A=e.enableAdjustments,L=e.experimental_enableSharpness,k=e.enableFilters,M=e.enableAutoEnhance,P=e.enabledRetouchModes,T=e.experimental_enableInPaintingDevUi,U=e.enableUndoRedo,F=e.enableBackground,H=e.experimental_enableAIRelighting,R=e.enableFocalPoint,N=e.experimental_enableStylizer,B=e.experimental_enableStylizerDevUi,j=e.experimental_enableResize,V=e.experimental_enableResizeUndoRedo,z=e.disableWebGL2Support,G=e.cssToPhysicalPixelRatio,K=e.onDecideEnabledSaveTypes,W=e.sessionFullImageSize,q=e.animationSettings,Q=e.children,Y=e.enableMarkupText,J=e.aspectRatiosDisplayedInOrder,X=e.texturePatchAlgorithmOverrides,Z=e.isCopyToClipboardVisible,$=void 0!==Z&&Z,ee=e.isOnline,te=e.msaStatus,ne=e.doesImageContainFaces,ae=e.imageCreationExtensionState,ie=e.hostError,re=e.onDismissHostError,oe=e.stylizerPivotTeachingTipState,se=e.setStylizerPivotTeachingTipState,ce=e.onStylizerPivotTeachingTipDismissed,de=e.onRequestResizedImage,le=e.onCancelResizeOperation;(0,t.useEffect)(function(){performance.mark(qd.Editor)},[]);var ue,fe,pe,me,_e=(0,b.D)(),he=(0,t.useState)(!1),be=he[0],ge=he[1],ve=(0,t.useContext)(go.B_).enableMarkup,ye=function(){var e=this,n=(0,t.useState)(null),a=n[0],i=n[1],r=(0,t.useCallback)(function(t){return n=e,void 0,r=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(e){switch(e.label){case 0:return t&&a?[4,a.deserializeTexturePatches(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},new((i=void 0)||(i=Promise))(function(e,t){function a(e){try{s(r.next(e))}catch(e){t(e)}}function o(e){try{s(r.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(a,o)}s((r=r.apply(n,[])).next())});var n,i,r},[a]);return{setTexturePatchCacheMethods:i,setTexturePatchCache:r,getTexturePatchCache:(0,t.useCallback)(function(){return null==a?void 0:a.getTexturePatchCache()},[a])}}(),Se=ye.setTexturePatchCacheMethods,De=ye.setTexturePatchCache,Ie=ye.getTexturePatchCache;!function(e,n,a){var i=this;(0,t.useLayoutEffect)(function(){var t,r,o;n()&&(t=i,void 0,o=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){switch(t.label){case 0:return[4,e(null==a?void 0:a.texturePatch.texturePatches)];case 1:return t.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(e,n){function a(e){try{s(o.next(e))}catch(e){n(e)}}function i(e){try{s(o.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,i)}s((o=o.apply(t,[])).next())}))},[n,null==a?void 0:a.texturePatch.texturePatches,e])}(De,Ie,I),ue=!0,fe=null!=k&&k,pe=ve,me=(0,t.useContext)(go.B_).scriptsToLoadJSBundles,(0,t.useEffect)(function(){fe&&fe===ue&&Jf()},[fe,ue]),(0,t.useEffect)(function(){pe&&pe===ue&&me.forEach(function(e){e()})},[pe,ue,me]);var xe=(0,t.useMemo)(function(){return function(e,t,n,a,i,r,o,s,c,d,l){var u=[];return(null!=l?l:zf).forEach(function(l){switch(l){case Me.I8:u.push({itemIcon:"Crop",itemKey:Me.I8,localizationKey:"pivot_crop",ariaDescriptionLocalizationKey:"pivot_cropAriaDescription"});break;case Me.lm:e&&u.push({itemIcon:"Equalizer",itemKey:Me.lm,localizationKey:"pivot_adjustment",ariaDescriptionLocalizationKey:"pivot_adjustmentAriaDescription"});break;case Me.Xc:t&&u.push({itemIcon:"ImageFilter-Havana",itemKey:Me.Xc,localizationKey:"pivot_filter",ariaDescriptionLocalizationKey:"pivot_filterAriaDescription"});break;case Me.Y4:n&&u.push({itemIcon:"Brush",itemKey:Me.Y4,localizationKey:"pivot_markup",ariaDescriptionLocalizationKey:"pivot_markupAriaDescription"});break;case Me.qO:a&&a.length>0&&u.push({itemIcon:"SparklyEraseIcon-Havana",itemKey:Me.qO,localizationKey:a.includes(Pl.I.MagicErase)?"pivot_erase":"pivot_retouch",ariaDescriptionLocalizationKey:"pivot_retouchAriaDescription",isAIBadgeEnabled:!0});break;case Me.NF:r&&u.push({itemIcon:"AutoEnhanceOn",itemKey:Me.NF,localizationKey:"pivot_background",ariaDescriptionLocalizationKey:"pivot_backgroundAriaDescription",isAIBadgeEnabled:!0});break;case Me.co:o&&u.push({itemIcon:"Sunny",itemKey:Me.co,localizationKey:"pivot_relight",ariaDescriptionLocalizationKey:"pivot_relightAriaDescription"});break;case Me.Nr:i&&u.push({itemIcon:"Brush",itemKey:Me.Nr,localizationKey:"pivot_inpaint"});break;case Me.dp:s&&u.push({itemIcon:"FocalPoint",itemKey:Me.dp,localizationKey:"pivot_focalpoint",ariaDescriptionLocalizationKey:"pivot_focalpointAriaDescription"});break;case Me.vs:c&&u.push({itemIcon:"VideoPersonSparkle-Havana",itemKey:Me.vs,localizationKey:"pivot_stylizer",ariaDescriptionLocalizationKey:"pivot_stylizerAriaDescription"});break;case Me.qQ:d&&u.push({itemIcon:"ResolutionIcon-Havana",itemKey:Me.qQ,localizationKey:"pivot_resize",ariaDescriptionLocalizationKey:"pivot_resizeAriaDescription"});break;default:throw new Error("Unknown pivot item key in pivotKeyOrder: ".concat(l))}}),u}(A,k,ve,P,T,F,H,R,N,j,C)},[A,k,ve,P,T,F,H,R,N,j,C]);(null==x?void 0:x.activeEditorActivity)&&function(e,t){for(var n=0;n<e.length;n++)if(e[n].itemKey===t)return;throw new Error("ActiveEditorActivity is not enabled: ".concat(t))}(xe,x.activeEditorActivity);var Ce=_e.semanticColors.bodyBackground,Oe=(0,t.useCallback)(function(){ge(!0)},[ge]),we=(0,t.useCallback)(function(){ge(!1)},[ge]),Ee=(0,t.useRef)(Nc()),Ae={layout:w,componentSize:r,onSave:o,onRenderSaveMenu:p,onClose:g,pivotItems:xe,isEditorFocused:be,onEditsChanged:v,onUiStateChanged:y,cssToPhysicalPixelRatio:G,animationSettings:q,customCommandBarButtons:E,texturePatchCacheMethodsRef:Se,isCopyToClipboardVisible:$,canvasContainerPortalNodeRef:Ee},Le=(0,t.useMemo)(function(){return{spotFix:(null==X?void 0:X.spotFix)||mm.spotFix,magicErase:(null==X?void 0:X.magicErase)||mm.magicErase,backgroundSegmentation:(null==X?void 0:X.backgroundSegmentation)||mm.backgroundSegmentation,stylizer:(null==X?void 0:X.stylizer)||mm.stylizer,depth:(null==X?void 0:X.depth)||mm.depth,objectSegmentation:(null==X?void 0:X.objectSegmentation)||mm.objectSegmentation}},[X]);!function(e){(0,t.useEffect)(function(){var t=function(e){return Lu(e)?e.main:e}(e);if(t&&function(e){return!!e.bytes}(t)&&t.format!==_m.A.RGBA)throw new Error("main image layer does not support any format other than RGBA")},[e])}(i);var ke=(0,t.useCallback)(function(e,t){var n;if(!a||!function(e){return void 0!==e.current}(a))throw new Error("imageEditorMethodsRef is not initialized");null===(n=a.current)||void 0===n||n.replaceImageAndResetEdits(e,{editType:"SuperResolution",resizeFactor:t})},[a]);return n().createElement("div",{onFocus:Oe,onBlur:we,style:{width:r.width,height:r.height,backgroundColor:Ce}},n().createElement(Yf,{enableAdjustments:A,experimental_enableSharpness:L,enableFilters:k,enableAutoEnhance:!!M,enableMarkup:ve,enabledRetouchModes:P,experimental_enableInPaintingDevUi:T,enableUndoRedo:U,enableMarkupText:Y,enableBackground:F,experimental_enableAIRelighting:H,disableWebGL2Support:z,experimental_enableStylizer:N,experimental_enableStylizerDevUi:B,experimental_enableResize:j,experimental_enableResizeUndoRedo:V},n().createElement(M3,{isOnline:!!ee,msaStatus:te,onMSALogin:s,onMSALogout:c,onMSABlocked:d,onMSABanned:l,hostError:ie,onDismissHostError:re},n().createElement(T3,{doesImageContainFaces:ne,imageCreationExtensionState:ae,stylizerPivotTeachingTipState:oe,onDownloadImageCreationExtension:u,setStylizerPivotTeachingTipState:se,onStylizerPivotTeachingTipDismissed:ce},n().createElement(Uu,{image:i,localization:m,telemetryCallback:_,onComponentError:h,defaultEdits:D,initialEdits:I,initialUiState:x,serializedState:O,sessionFullImageSize:W,onDecideEnabledSaveTypes:K,onResetEditsConfirmationDialog:S,ariaConfig:w.getAriaConfig?w.getAriaConfig():void 0,aspectRatiosDisplayedInOrder:J,texturePatchAlgorithmsByRole:Le,onRequestResizedImage:de,onAcceptResizedImage:ke,onCancelResizeOperation:le,onLinkClicked:f},n().createElement(dp,null,n().createElement(Pp,null),n().createElement(vp,{htmlElementForKeyboardControl:document.body}),n().createElement(bp,null),n().createElement(fp,null),n().createElement(pp,null),n().createElement(mp,null),n().createElement(hp,null),n().createElement(yp,null),n().createElement(hm,null),n().createElement(U3,null),n().createElement(gp,null),n().createElement(bm,null),n().createElement(F3,null),Ee.current&&n().createElement(Hc,{node:Ee.current},n().createElement(A3,H3({},Ae,w.getCanvasContainerProps(_e)))),w.reactNode(Ae),n().createElement(fm,{onEditsChanged:v,onUiStateChanged:y,ref:a,setTexturePatchCache:De,getTexturePatchCache:Ie}),Q),n().createElement(Zf,null),n().createElement(Qf,null))))))});R3.displayName="ImageEditor";var N3=(0,t.createContext)({fabricCanvas:null,setFabricCanvas:function(e){}}),B3=(0,t.createContext)({fabric:null,loadFabric:function(){}}),j3=function(e){var a=e.children,i=function(){var e=(0,t.useState)(null),n=e[0],a=e[1],i=(0,t.useRef)(null),r=(0,t.useContext)(B3).fabric,o=(0,t.useCallback)(function(e){var t;if(r)if(e){var n=new r.Canvas(e,{enableRetinaScaling:!1,stopContextMenu:!0,enablePointerEvents:!0,selection:!1});i.current=n,n.renderOnAddRemove=!1,a(n);var o=n.getElement().parentElement;o&&(o.style.position="absolute")}else null===(t=i.current)||void 0===t||t.dispose(),i.current=null,a(null)},[r]);return[n,o]}(),r=i[0],o=i[1];return n().createElement(N3.Provider,{value:{fabricCanvas:r,setFabricCanvas:o}},a)},V3=(0,t.createContext)({wetInkCanvas:void 0,setWetInkCanvas:function(e){}}),z3=function(e){var a=e.children,i=(0,t.useState)(),r=i[0],o=i[1];return n().createElement(V3.Provider,{value:{wetInkCanvas:r,setWetInkCanvas:o}},a)};function G3(e,t,n){var a=(0,rt.GM)(n);t.clipPath=new e.Rect(a)}var K3=I(7830);function W3(e,t,n){if((0,Se._N)(e,n)){var a=(0,it.ti)((0,rt.qq)(n)),i=a[0],r=a[1],o=a[2],s=a[3],c=[{lineStart:i,lineEnd:r},{lineStart:r,lineEnd:o},{lineStart:o,lineEnd:s},{lineStart:s,lineEnd:i}],d=Math.min.apply(Math,c.map(function(n){var a,i=n.lineStart,r=n.lineEnd;return null!==(a=(0,K3.A)(e,t,i,r))&&void 0!==a?a:1}));return{x:e.x+(t.x-e.x)*d,y:e.y+(t.y-e.y)*d}}}var q3=I(3440);function Q3(e){return 5===e.button||32==(32&e.buttons)}function Y3(e,t){return(0,it.XG)((0,it.iE)(t),(0,it.Ls)((0,it.Vt)(e.calcTransformMatrix())))}function J3(e,t,n){var a=e.util.qrDecompose(n),i=new e.Point(a.translateX,a.translateY);t.flipX=!1,t.flipY=!1,t.set(a),t.setPositionByOrigin(i,"center","center"),t.setCoords()}function X3(e,t,n){if(t.id){var a=(0,it.TI)((0,it.XG)(n,t.fabricToViewTransform));t.updateFabricToViewTransform=function(){t.fabricToViewTransform=Y3(t,n)},J3(e,t,a)}}var Z3=function(){return Z3=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Z3.apply(this,arguments)};function $3(e,t,n,a,i){a&&t.getObjects().forEach(function(t){X3(e,t,a)}),n&&t.setDimensions({width:n.x,height:n.y},{backstoreOnly:!0}),i?G3(e,t,i):a&&G3(e,t,a),t.renderAll()}function e2(e,t){for(var n=0,a=e.getObjects();n<a.length;n++){var i=a[n];if(i&&i.id&&t.has(i.id)&&(t.delete(i.id),e.remove(i)),t.size<1)break}e.requestRenderAll()}function t2(e,t,n,a){var i=function(e,t,n,a){var i=(0,it.XG)(t,n);return e.util.multiplyTransformMatrices((0,it.TI)(i),a)}(e,t,n,a.calcTransformMatrix());J3(e,a,i),a.fabricToViewTransform=Y3(a,t)}function n2(e,t){t.add(e),t.requestRenderAll()}var a2="MARKUP_HIGHLIGHTER_CURSOR",i2=function(){return i2=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i2.apply(this,arguments)},r2="MARKUP_PEN_CURSOR";function o2(e){var t=new Set;return e.forEach(function(e){if(!e.id)throw new Error("there is no id for : ".concat(e));t.add(e.id)}),t}var s2=function(){return s2=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s2.apply(this,arguments)},c2=function(){return c2=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c2.apply(this,arguments)},d2=function(){return d2=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d2.apply(this,arguments)},l2=function(){return l2=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l2.apply(this,arguments)},u2=(0,t.memo)(function(e){var a,i,r,o=e.cropViewTransform,c=e.imageViewTransform,d=e.width,l=e.height,u=e.cssWidth,f=e.cssHeight,p=e.styles,m=e.activeMarkupToolType,_=e.previousActiveMarkupToolType,h=e.markupContentItems,b=e.pointerIdToCaptureWhenEraserBrushIsCreated,g=e.setActiveMarkupToolType,v=e.removeMarkupContent,y=e.convertToFabricContent,S=e.setPointerIdToCaptureWhenEraserBrushIsCreated,D=e.cursorScreenPos,I=e.activeInkBrush,x=e.isKeyboardInputActive,C=e.linePreviewCoords,O=e.cssToPhysicalPixelRatio,w=e.addMarkupContent,E=e.updateMarkupContent,A=e.activeMarkupContentId,L=e.setActiveMarkupContentId,k=e.setMarkupTextSelection,M=e.markupTextStyleAttributes,P=e.setMarkupTextStyleAttributes,T=(0,t.useContext)(N3).setFabricCanvas;return a=(0,t.useContext)(B3).loadFabric,(0,t.useLayoutEffect)(function(){a()},[a]),i=(0,t.useContext)(N3).fabricCanvas,r=(0,t.useContext)(go.B_).setWetCanvasIsReady,(0,t.useEffect)(function(){return i&&r(!0),function(){r(!1)}},[i,r]),function(e,n,a,i,r){var o=(0,t.useContext)(N3).fabricCanvas,s=(0,t.useContext)(B3).fabric;(0,t.useLayoutEffect)(function(){(null==o?void 0:o.getContext())&&(null==o||o.setDimensions({width:e,height:n},{backstoreOnly:!0}),null==o||o.setDimensions({width:a,height:i},{cssOnly:!0}),null==o||o.renderAll())},[e,n,a,i,o]),(0,t.useEffect)(function(){s&&(null==o?void 0:o.getContext())&&(G3(s,o,r),o.renderAll())},[r,s,o])}(d,l,u,f,o),function(e,n,a,i,r,o,s,c,d){var l=(0,t.useContext)(N3).fabricCanvas,u=(0,t.useContext)(B3).fabric,f=(0,t.useContext)(go.B_).localizationStrings,p=(0,t.useRef)(e),m=(0,t.useRef)(c);(0,t.useEffect)(function(){p.current=e,m.current=c},[e,c]),(0,t.useEffect)(function(){if(c!==e&&l&&u){l.isDrawingMode=function(e){switch(e){case Xo.d9:case Xo.cw:case Xo.Mu:return!0;case Xo.Vm:default:return!1}}(p.current);var t=(0,rt.GM)(n);e===Xo.d9&&(l.freeDrawingBrush=new(function(e){return e.util.createClass(e.PencilBrush,{color:"rgb(255, 255, 255)",opacity:0,width:32,initialize:function(e,t,n,a,i,r){this.canvas=e,this.width=t,this._points=[],this.bounds=n,this.removeMarkupContent=a,this.onPointerEvent=i,r&&(this.canvas.upperCanvasEl.setPointerCapture(r),this.canvas.upperCanvasEl.dispatchEvent(new Event("pointerdown")))},_render:function(){},_finalizeAndAddPath:function(){this._resetShadow(),this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this.previousPoint=null},getIdsAtBrushLocation:function(t){var n=[],a=this.width/2,i=this.canvas.getObjects(),r=function(e,t,n){void 0===n&&(n=Math.asin(1.5/t));for(var a=[],i=0;i<2*Math.PI;i+=n)a.push({x:e.x+t*Math.cos(i),y:e.y+t*Math.sin(i)});return a}(t,a),o=new e.Circle({radius:a,top:t.y-a,left:t.x-a,fill:"rgba(255,0,255,0)"});o.setCoords();for(var s=0,c=i;s<c.length;s++){var d=c[s];d&&d.visible&&(d.isContainedWithinObject(o)||d.intersectsWithObject(o)&&this.objectCollidesWithPoints(d,r))&&n.push(d.id)}return n},objectCollidesWithPoints:function(e,t){for(var n=0,a=t;n<a.length;n++){var i=a[n];if(!this.canvas.isTargetTransparent(e,i.x,i.y))return!0}return!1},getPointsToEraseBetween:function(e,t){var n=(0,Se._N)(e,this.bounds),a=(0,Se._N)(t,this.bounds);if(n){if(a)return[t,e];var i=W3(e,t,this.bounds);if(i)return[i,e]}else if(a){var r=W3(t,e,this.bounds);if(r)return[t,r]}},erase:function(e){var t=this;if((0,Se._N)(e,this.bounds)&&this.eraseIdsFromCanvas(this.getIdsAtBrushLocation(e)),this.previousPoint){var n=this.getPointsToEraseBetween(e,this.previousPoint);n&&window.requestAnimationFrame(function(){t.eraseIdsFromCanvas(t.getIdsBetweenPoints(n[0],n[1]))})}},getIdsBetweenPoints:function(t,n){var a=[],i=Math.hypot(n.x-t.x,n.y-t.y);if(i>this.width){var r=Math.atan2(n.y-t.y,n.x-t.x),o=(0,ot.sF)((0,ot.wp)(n,t)),s={x:-1*o.y*this.width/2,y:o.x*this.width/2},c=new e.Rect({width:i,height:this.width,left:t.x-s.x,top:t.y-s.y,angle:180*r/Math.PI,fill:"rgba(255,255,0,0)"});c.setCoords();for(var d=[],l=0,u=this.canvas.getObjects();l<u.length;l++)if((_=u[l])&&_.id&&_.visible){if(_.isContainedWithinObject(c)){a.push(_.id);continue}if(_.intersectsWithObject(c)){d.push(_);continue}}if(d.length>0)for(var f=function(e,t,n,a){void 0===a&&(a=1);for(var i=[],r=(0,ot.dR)((0,ot.wp)(e,t)),o=(0,ot.sF)((0,ot.wp)(t,e)),s=-1*o.y*n/2,c=o.x*n/2,d=0;d<r;d+=a)i.push({x:e.x+d*o.x+s,y:e.y+d*o.y+c}),i.push({x:e.x+d*o.x-s,y:e.y+d*o.y-c});return i}(t,n,this.width),p=0,m=d;p<m.length;p++){var _;(_=m[p]).id&&this.objectCollidesWithPoints(_,f)&&a.push(_.id)}}return a},eraseIdsFromCanvas:function(e){e.length>0&&this.removeMarkupContent(e)},onMouseDown:function(e,t){this.onPointerEvent(t.e),this.canvas._isMainEvent(t.e)&&(this.previousPoint=e,this.erase(e))},onMouseMove:function(e,t){if(this.onPointerEvent(t.e),this.canvas._isMainEvent(t.e)&&(!this.limitedToCanvasSize||!this._isOutSideCanvas(e))){var n=t.e;if(!(0,q3.$F)(n)&&!Q3(t.e))return this._finalizeAndAddPath(),void(this.canvas._isCurrentlyDrawing=!1);this._captureDrawingPath(e)&&this._points.length>1&&(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this._render()):this.erase(e),this.previousPoint=e)}},onMouseUp:function(e){return this.onPointerEvent(e.e),!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}})}(u))(l,32,t,a,function(e){Q3(e)&&"pointerup"===e.type&&(null==s||s(void 0),m.current&&i(m.current))},d),l.freeDrawingCursor="inherit",l.defaultCursor="inherit")}},[n,l,e,a,u,c,i,s,d,f,o,r])}(m,o,v,g,c,O,S,_,b),function(e,n){var a=(0,t.useContext)(N3).fabricCanvas,i=(0,t.useRef)(null),r=(0,t.useContext)(B3).fabric;(0,t.useLayoutEffect)(function(){i.current=new Set},[a]),(0,t.useLayoutEffect)(function(){if((null==a?void 0:a.getContext())&&i.current&&r){for(var t=[],o=new Set(i.current),s=0,c=e;s<c.length;s++){var d=c[s];o.delete(d.id),i.current.has(d.id)||(t.push(d),i.current.add(d.id))}for(var l=0,u=Array.from(o);l<u.length;l++){var f=u[l];i.current.delete(f)}!function(e,t,n,a){var i=function(e){e.forEach(function(e){t.add(e)}),t.requestRenderAll()};a?i(n.map(a)):e.util.enlivenObjects(n,i,"fabric")}(r,a,t,n),e2(a,o)}},[n,r,a,e])}(h,y),function(e){var n=(0,t.useContext)(N3).fabricCanvas,a=(0,t.useContext)(B3).fabric;(0,t.useLayoutEffect)(function(){n&&a&&n.getObjects().forEach(function(t){X3(a,t,e)})},[a,n,e])}(c),function(e,n){var a=(0,t.useContext)(N3).fabricCanvas,i=(0,t.useContext)(go.B_).setCanvasMethods,r=(0,t.useContext)(B3).fabric,o=(0,t.useRef)(a);a&&(o.current=a);var s=(0,t.useRef)(void 0);(0,t.useEffect)(function(){return i(function(e){return Z3(Z3({},e),{getHTMLCanvas:function(e,t){if(o.current&&r){var n=o.current.getElement();if(o.current.discardActiveObject(),n)return(e||t)&&(s.current={x:o.current.getWidth(),y:o.current.getHeight()},$3(r,o.current,e,t),n=o.current.getElement()),n}return null}})}),function(){o.current=null}},[r,i]),(0,t.useEffect)(function(){return i(function(t){return Z3(Z3({},t),{restoreHTMLCanvas:function(){o.current&&r&&o.current.getElement()&&$3(r,o.current,s.current,e,n)}})}),function(){o.current=null}},[n,r,e,i])}(c,o),function(e,n,a,i,r){var o=(0,t.useContext)(N3).fabricCanvas,c=(0,t.useContext)(B3).fabric;(0,t.useEffect)(function(){if((null==o?void 0:o.getContext())&&c&&a){var t=function(e,t,n){switch(n.inkType){case Mo.p.Highlighter:return function(e,t,n){var a=Math.min(.1*n.thicknessInCssPixels,1),i=n.thicknessInCssPixels/2,r=n.thicknessInCssPixels,o=new e.Rect({left:t.x-i/2,top:t.y-r/2,width:i,height:r,fill:n.htmlColor,stroke:"white",strokeWidth:a}),s=new e.Group([o]);return s.id=(0,yu.b)(),s.name=a2,s}(e,t,n);case Mo.p.Pen:return function(e,t,n){var a=new e.Group,i=L_(n.thicknessInCssPixels),r=A_(i),o=i+r,s=2*o,c=new e.Circle({radius:i,left:t.x-o+1,top:t.y-o+1,fill:n.htmlColor,stroke:"white",strokeWidth:r});if(a.addWithUpdate(c),c.left&&c.top){var d={stroke:"white",fill:"black",left:c.left+s,top:c.top+o,strokeLineCap:"round",strokeLineJoin:"round"};if(n.strokeShape.arrowMode===E_.x.SingleArrow){var l=new e.Path(k_,i2({},d));a.add(l)}if(n.strokeShape.arrowMode===E_.x.DoubleArrow){var u=new e.Path(M_,i2({},d));a.add(u)}}return a.id=(0,yu.b)(),a.name=r2,a}(e,t,n);default:throw new s.x(n.inkType)}}(c,e,n);return t?(t2(c,r,(0,it.XG)((0,it.iE)(r),(0,it.W3)(i)),t),n2(t,o),function(){e2(o,o2([t]))}):void 0}},[n,i,e,c,o,r,a])}(D,I,x,O,c),function(e,n,a,i,r){var o=(0,t.useContext)(N3).fabricCanvas,c=(0,t.useContext)(B3).fabric;(0,t.useEffect)(function(){if((null==o?void 0:o.getContext())&&c&&e){var t=function(e,t,n){switch(t.inkType){case Mo.p.Highlighter:return function(e,t,n){if(n.startPoint&&n.endPoint){var a=new e.Group,i=t.thicknessInCssPixels/2,r=new e.Polygon(function(e,t,n){var a,i=e,r=t,o=n/2,s=i.x-r.x,c=i.y-r.y;return r.y>i.y&&(i=(a=[r,i])[0],r=a[1]),s>0&&c<0||s<0&&c>=0?[{x:r.x-o,y:r.y-n},{x:r.x+o,y:r.y-n},{x:r.x+o,y:r.y+n},{x:i.x+o,y:i.y+n},{x:i.x-o,y:i.y+n},{x:i.x-o,y:i.y-n}]:[{x:r.x-o,y:r.y-n},{x:r.x+o,y:r.y-n},{x:i.x+o,y:i.y-n},{x:i.x+o,y:i.y+n},{x:i.x-o,y:i.y+n},{x:r.x-o,y:r.y+n}]}(n.startPoint,n.endPoint,i),{fill:t.htmlColor,opacity:.5});return a.addWithUpdate(r),a.id=(0,yu.b)(),a}}(e,t,n);case Mo.p.Pen:return function(e,t,n){if(n.startPoint&&n.endPoint){var a=t.thicknessInCssPixels,i=n.startPoint,r=n.endPoint,o=a/2,s=(0,ot.Gl)(i,r),c=(0,ot.bp)(i,r);if(void 0!==c){var d={originX:"center",originY:"center",opacity:1,fill:t.htmlColor,strokeWidth:0,radius:o,angle:90+c},l=new e.Circle(s2(s2({},d),{left:i.x,top:i.y})),u=new e.Rect({left:i.x,top:i.y,width:a,height:s,fill:t.htmlColor,angle:c,originX:"center",strokeWidth:0,opacity:1}),f=new e.Circle(s2(s2({},d),{left:r.x,top:r.y,startAngle:270,endAngle:90})),p=new e.Group([l,u,f]);return p.id=(0,yu.b)(),p}}}(e,t,n);default:throw new s.x(t.inkType)}}(c,n,a);return t?(t2(c,r,(0,it.XG)((0,it.iE)(r),(0,it.W3)(i)),t),n2(t,o),function(){e2(o,o2([t]))}):void 0}},[n,i,c,o,r,e,a])}(x,I,C,O,c),function(e){var n=(0,t.useContext)(N3).fabricCanvas;(0,t.useEffect)(function(){if(null==n?void 0:n.getContext()){var t=function(){!function(e,t){var n=function(e,t){var n=e.getObjects().filter(function(e){return e.name===t});if(n.length>0)return n[0]}(e,function(e){switch(e){case Mo.p.Highlighter:return a2;case Mo.p.Pen:return r2;default:throw new s.x(e)}}(t.inkType));n&&e.bringToFront(n)}(n,e)};return n.on("object:added",t),function(){n.off("object:added",t)}}},[e,n])}(I),function(e){var n=(0,t.useContext)(N3).fabricCanvas,a=(0,t.useContext)(B3).fabric;(0,t.useEffect)(function(){if(n&&a){var t=new Map(n.getObjects("textbox").map(function(e){return[e.id,e]})),i=new Map(e.filter(function(e){return e.id&&e.contentType===zo.A.TextContent}).map(function(e){return[e.id,e]}));null==t||t.forEach(function(e){var t=i.get(e.id),a=null==t?void 0:t.drawingAttributes,r=e.toObject();a&&!(0,pl.v)(a,r,5)&&(e.set(a),n.requestRenderAll())})}},[e,a,n])}(h),function(e){var n=(0,t.useContext)(N3).fabricCanvas;(0,t.useEffect)(function(){var t=function(t){var n,a;if("textbox"===(null===(a=null===(n=t.selected)||void 0===n?void 0:n[0])||void 0===a?void 0:a.type)){var i=t.selected[0]._unwrappedTextLines.reduce(function(e,t,n){var a;return c2(c2({},e),((a={})[n]={selectionStart:0,selectionEnd:t.length},a))},{});e(i)}else e(void 0)},a=function(t){var n=t.target;if("textbox"===(null==n?void 0:n.type)){var a=n,i=a.selectionStart,r=a.selectionEnd;if(void 0===i||void 0===r)return void e(void 0);for(var o={},s=i;s<=r;s++){var c=n.get2DCursorLocation(s,!0),d=c.lineIndex,l=c.charIndex;void 0===o[d]&&(o[d]={selectionStart:l,selectionEnd:l}),o[d].selectionEnd=l}e(o)}else e(void 0)};return null==n||n.on("text:selection:changed",a),null==n||n.on("selection:updated",t),null==n||n.on("selection:cleared",t),null==n||n.on("selection:created",t),function(){null==n||n.off("text:selection:changed",a),null==n||n.off("selection:updated",t),null==n||n.off("selection:cleared",t),null==n||n.off("selection:created",t)}},[n,e])}(k),function(e){var n=(0,t.useContext)(N3).fabricCanvas;(0,t.useEffect)(function(){var t=function(){var t;e(null===(t=null==n?void 0:n.getActiveObject())||void 0===t?void 0:t.id)};return null==n||n.on("selection:created",t),null==n||n.on("selection:updated",t),null==n||n.on("selection:cleared",t),function(){null==n||n.off("selection:created",t),null==n||n.off("selection:updated",t),null==n||n.off("selection:cleared",t)}},[n,e])}(L),function(e,n,a){var i=(0,t.useContext)(N3).fabricCanvas,r=(0,t.useContext)(go.B_).localizationStrings,o=(0,t.useRef)(!1);(0,t.useEffect)(function(){if(i&&a===Xo.Vm){i.defaultCursor="Text";var t=function(t){if(t.target||o.current)o.current=!1;else if(t.absolutePointer){var a=t.absolutePointer,i=a.x,s=a.y;e({text:r.markup_textboxDefaultContent,contentType:zo.A.TextContent,invertedPhysicalImageTransformDuringContentSerialization:(0,it.iE)(n),initialPosition:{positionType:"AtLocation",left:i,top:s}})}},s=function(){o.current=!0};return i.on("selection:cleared",s),i.on("mouse:up",t),function(){i.off("mouse:up",t),i.off("selection:cleared",s)}}},[i,e,n,r,a])}(w,c,m),function(e){var n=(0,t.useContext)(N3).fabricCanvas;(0,t.useEffect)(function(){var t=function(t){"textbox"===t.type&&void 0!==t.id&&e([t.id])},a=function(e){e.target&&"text"in e.target&&!e.target.text&&t(e.target)};function i(e){var a=null==n?void 0:n.getActiveObject();"Delete"===e.key&&a&&"isEditing"in a&&!a.isEditing&&t(a)}return null==n||n.on("before:selection:cleared",a),document.addEventListener("keydown",i),function(){null==n||n.off("before:selection:cleared",a),document.removeEventListener("keydown",i)}},[n,e])}(v),function(e){var n=(0,t.useContext)(N3).fabricCanvas;(0,t.useEffect)(function(){function t(){var e;"textbox"===(null===(e=null==n?void 0:n.getActiveObject())||void 0===e?void 0:e.type)&&(null==n||n.discardActiveObject(),null==n||n.requestRenderAll())}function a(e){"Escape"===e.key&&t()}if("Text"===e)return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)};t()},[n,e])}(m),function(e,n,a,i,r){var o=(0,t.useContext)(N3).fabricCanvas,s=(0,t.useContext)(B3).fabric;(0,t.useEffect)(function(){if(s){var t=null==o?void 0:o.getObjects("textbox").find(function(e){return e.id===r});if(t instanceof s.Textbox){var c=t.styles,d=e.find(function(e){return e.id===t.id&&e.contentType===zo.A.TextContent});if(d&&(Object.isExtensible(c)||t.set("styles",JSON.parse(JSON.stringify(c))),i&&d.drawingAttributes)){Object.entries(i).forEach(function(e){var n,a,i,r=e[0],o=e[1];t.isEditing&&t.selectionStart!==t.selectionEnd?t.setSelectionStyles(((n={})[r]=o,n)):t.setSelectionStyles(((a={})[r]=o,a),0,null===(i=t.text)||void 0===i?void 0:i.length)});var l=t.styles;n(d2(d2({},d),{drawingAttributes:d2(d2({},d.drawingAttributes),{styles:l})})),null==a||a(void 0)}null==o||o.requestRenderAll()}}},[o,i,e,n,a,s,r])}(h,E,P,M,A),n().createElement("canvas",{ref:T,style:l2({},p)})});function f2(e,t){e.output=t}function p2(e,t,n){f2(e,t),f2(t,n)}function m2(e,t,n,a){f2(e,t),p2(t,n,a)}function _2(e,t,n,a,i){p2(e,t,n),p2(n,a,i)}const h2=.5;function b2(e){return{x:e.offsetX,y:e.offsetY,pressure:e.pressure,tiltX:e.tiltX,tiltY:e.tiltY,timestamp:e.timeStamp}}function g2(e){return{x:e.offsetX,y:e.offsetY,pressure:h2,tiltX:e.tiltX,tiltY:e.tiltY,timestamp:e.timeStamp}}class v2{onPointerDown(e){this.output.beginStroke(g2(e))}onPointerMove(e){this.output.addPoint(g2(e))}onPointerUp(e){this.output.endStroke(g2(e))}}class y2{onPointerDown(e){this.output.beginStroke(b2(e))}onPointerMove(e){this.output.addPoint(b2(e))}onPointerUp(e){this.output.endStroke(b2(e))}}function S2(){return-1===navigator.userAgent.indexOf("Firefox")?new y2:new v2}class D2{beginStroke(e){this.lastPoint=e,this.output.beginStroke(e)}addPoint(e){this.lastPoint=e,this.output.addPoint(e)}endStroke(e){this.lastPoint=e,this.output.endStroke(e)}}class I2{beginStroke(e){this.output.beginStroke(e),this.point=e}addPoint(e){this.point.x===e.x&&this.point.y===e.y||(this.output.addPoint(e),this.point=e)}endStroke(e){this.output.endStroke(e)}}class x2{beginStroke(e){this.out1={x:e.x,y:e.y},this.out2=this.out1,this.output.beginStroke(e)}addPoint(e){this.output.addPoint(this.filter(e))}endStroke(e){this.output.endStroke(this.filter(e))}filter(e){const t={x:C2(e.x,this.out1.x,this.out2.x),y:C2(e.y,this.out1.y,this.out2.y)};return this.out2=this.out1,this.out1=t,{x:t.x,y:t.y,pressure:e.pressure,tiltX:e.tiltX,tiltY:e.tiltY,timestamp:e.timestamp}}}function C2(e,t,n){return.16999999999999993*e+1.33*t+-.5*n}class O2{constructor(){this.lastPressure=h2}beginStroke(e){this.output.beginStroke(e),this.lastPressure=e.pressure}addPoint(e){this.output.addPoint(e),this.lastPressure=e.pressure}endStroke(e){this.output.endStroke(0===e.pressure?{x:e.x,y:e.y,pressure:this.lastPressure,tiltX:e.tiltX,tiltY:e.tiltY,timestamp:e.timestamp}:e)}}class w2{constructor(e){this.deduper=new I2,this.endStrokePressure=new O2,this.jitter=new x2,e?(this.preJitterLastPointExtractor=new D2,m2(this.deduper,this.endStrokePressure,this.preJitterLastPointExtractor,this.jitter)):p2(this.deduper,this.endStrokePressure,this.jitter)}beginStroke(e){f2(this.jitter,this.output),this.deduper.beginStroke(e)}addPoint(e){this.deduper.addPoint(e)}endStroke(e){this.deduper.endStroke(e)}}function E2(e,t,n,a){const i=(e+t)/2,r=(t+n)/2,o=(n+a)/2,s=(i+r)/2,c=(r+o)/2;return[e,i,s,(s+c)/2,c,o,a]}function A2(e,t,n,a){return[(n-e)/6+t,(t-a)/6+n]}class L2{constructor(){this.began=!1}beginStroke(e){this.output.beginStroke(e),this.cp=[e,e,e,e],this.began=!0}addPoint(e){const[t,n]=this.push(e);this.began?this.began=!1:this.output.addSegment(t,n,this.cp[2])}endStroke(e){this.addPoint(e);const[t,n]=this.push(e);this.output.endStroke(t,n,this.cp[2])}push(e){return this.cp.shift(),this.cp.push(e),function(e,t,n,a){const[i,r]=A2(e.x,t.x,n.x,a.x),[o,s]=A2(e.y,t.y,n.y,a.y),[c,d]=k2(t.pressure,n.pressure),[l,u]=k2(t.tiltX,n.tiltX),[f,p]=k2(t.tiltY,n.tiltY),[m,_]=k2(t.timestamp,n.timestamp);return[{x:i,y:o,pressure:c,tiltX:l,tiltY:f,timestamp:m},{x:r,y:s,pressure:d,tiltX:u,tiltY:p,timestamp:_}]}(this.cp[0],this.cp[1],this.cp[2],this.cp[3])}}function k2(e,t){const n=(t-e)/3;return[e+n,t-n]}class M2{constructor(){this.deduperJitterTransform=new w2(!1),this.fitter=new L2,f2(this.deduperJitterTransform,this.fitter)}beginStroke(e){f2(this.fitter,this.output),this.deduperJitterTransform.beginStroke(e)}addPoint(e){this.deduperJitterTransform.addPoint(e)}endStroke(e){this.deduperJitterTransform.endStroke(e)}}function P2(e,t){return e.x*t.x+e.y*t.y}function T2(e,t){return{x:e.x-t.x,y:e.y-t.y}}function U2(e,t){const n=T2(e,t);return P2(n,n)}class F2{constructor(e){this.flatness=e*e}beginStroke(e){this.output.beginStroke(e),this.beginPoint=e}addSegment(e,t,n){H2(this.beginPoint,e,t,n,this.flatness,this.output),this.output.addPoint(n),this.beginPoint=n}endStroke(e,t,n){H2(this.beginPoint,e,t,n,this.flatness,this.output),this.output.endStroke(n)}}function H2(e,t,n,a,i,r){const[o,s,c,d,l,u,f]=function(e,t,n,a){const[i,r,o,s,c,d,l]=E2(e.x,t.x,n.x,a.x),[u,f,p,m,_,h,b]=E2(e.y,t.y,n.y,a.y),[g,v,y,S,D,I,x]=E2(e.pressure,t.pressure,n.pressure,a.pressure),[C,O,w,E,A,L,k]=E2(e.tiltX,t.tiltX,n.tiltX,a.tiltX),[M,P,T,U,F,H,R]=E2(e.tiltY,t.tiltY,n.tiltY,a.tiltY),[N,B,j,V,z,G,K]=E2(e.timestamp,t.timestamp,n.timestamp,a.timestamp);return[{x:i,y:u,pressure:g,tiltX:C,tiltY:M,timestamp:N},{x:r,y:f,pressure:v,tiltX:O,tiltY:P,timestamp:B},{x:o,y:p,pressure:y,tiltX:w,tiltY:T,timestamp:j},{x:s,y:m,pressure:S,tiltX:E,tiltY:U,timestamp:V},{x:c,y:_,pressure:D,tiltX:A,tiltY:F,timestamp:z},{x:d,y:h,pressure:I,tiltX:L,tiltY:H,timestamp:G},{x:l,y:b,pressure:x,tiltX:k,tiltY:R,timestamp:K}]}(e,t,n,a);(function(e,t,n){const a=U2(t,e);if(0===a)return U2(n,e);const i=(n.x-t.x)*(t.y-e.y)-(t.x-e.x)*(n.y-t.y);return i*i/a})(o,f,d)<=i||(H2(o,s,c,d,i,r),r.addPoint(d),H2(d,l,u,f,i,r))}class R2{constructor(e){this.bezierStrokePath=new M2,this.flattener=new F2(e),f2(this.bezierStrokePath,this.flattener)}beginStroke(e){f2(this.flattener,this.output),this.bezierStrokePath.beginStroke(e)}addPoint(e){this.bezierStrokePath.addPoint(e)}endStroke(e){this.bezierStrokePath.endStroke(e)}}class N2{constructor(e){this.pointerToStroke=S2(),this.strokeSmoothener=new R2(e),f2(this.pointerToStroke,this.strokeSmoothener)}onPointerDown(e){f2(this.strokeSmoothener,this.output),this.pointerToStroke.onPointerDown(e)}onPointerMove(e){this.pointerToStroke.onPointerMove(e)}onPointerUp(e){this.pointerToStroke.onPointerUp(e)}}class B2{constructor(e){this.onPointerDown=e=>{this.output.onPointerDown(e)},this.onTouchStart=e=>{this.output.onTouchStart(e)},this.element=e}activate(){this.element.addEventListener("pointerdown",this.onPointerDown,!0),this.element.addEventListener("touchstart",this.onTouchStart,!0)}deactivate(){this.element.removeEventListener("pointerdown",this.onPointerDown,!0),this.element.removeEventListener("touchstart",this.onTouchStart,!0)}}class j2{constructor(){this.active=!1}onMouseDown(e){this.output.onMouseDown(e),this.active=!0}onMouseMove(e){this.active&&this.output.onMouseMove(e)}onMouseUp(e){this.active=!1,this.output.onMouseUp(e)}}class V2{constructor(e){this.onMouseDown=e=>{this.output.onMouseDown(e)},this.onMouseMove=e=>{this.output.onMouseMove(e)},this.onMouseUp=e=>{this.output.onMouseUp(e)},this.element=e}activate(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseup",this.onMouseUp)}deactivate(){this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mouseup",this.onMouseUp)}}function z2(e){e.preventDefault()}function G2(e){e.preventDefault(),e.stopPropagation()}class K2{onMouseDown(e){this.output.onMouseDown(e),G2(e)}onMouseMove(e){this.output.onMouseMove(e),G2(e)}onMouseUp(e){this.output.onMouseUp(e),G2(e)}}class W2{constructor(e){p2(this.head=new V2(e),new K2,this.tail=new j2)}activate(){this.head.activate()}deactivate(){this.head.deactivate()}set output(e){this.tail.output=e}}function q2(e){return{offsetX:e.offsetX,offsetY:e.offsetY,pressure:.5,tiltX:0,tiltY:0,timeStamp:e.timeStamp,pointerType:"mouse"}}class Q2{onMouseDown(e){this.output.onPointerDown(q2(e))}onMouseMove(e){this.output.onPointerMove(q2(e))}onMouseUp(e){this.output.onPointerUp(q2(e))}}class Y2{constructor(e){this.element=e}onPointerDown(e){try{this.element.setPointerCapture(e.pointerId)}finally{this.output.onPointerDown(e)}}onPointerMove(e){this.output.onPointerMove(e)}onPointerUp(e){this.output.onPointerUp(e)}}class J2{constructor(e){this.onPointerDown=e=>{this.output.onPointerDown(e)},this.onPointerMove=e=>{this.output.onPointerMove(e)},this.onPointerUp=e=>{this.output.onPointerUp(e)},this.element=e}activate(){this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointermove",this.onPointerMove),this.element.addEventListener("pointerup",this.onPointerUp)}deactivate(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.element.removeEventListener("pointermove",this.onPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp)}}class X2{constructor(e){this.element=e}activate(){this.element.addEventListener("touchmove",z2)}deactivate(){this.element.removeEventListener("touchmove",z2)}}class Z2{onPointerDown(e){this.output.onPointerDown(e),G2(e)}onPointerMove(e){this.output.onPointerMove(e),G2(e)}onPointerUp(e){this.output.onPointerUp(e),G2(e)}}var $2=function(){function e(e,t){this.activePointerId=void 0,this.setMarkupCursorScreenPosition=e,this.setIsKeyboardInputActive=t}return e.prototype.onPointerDown=function(e){void 0===this.activePointerId&&(this.activePointerId=e.pointerId,this.output.onPointerDown(e))},e.prototype.onPointerMove=function(e){this.setIsKeyboardInputActive(!1),this.setMarkupCursorScreenPosition({x:e.offsetX,y:e.offsetY}),this.activePointerId===e.pointerId&&this.output.onPointerMove(e)},e.prototype.onPointerUp=function(e){this.activePointerId===e.pointerId&&(this.output.onPointerUp(e),this.activePointerId=void 0)},e}();class ey{onPointerDown(e){this.output.onPointerDown(e)}onPointerMove(e){(function(e){if("getCoalescedEvents"in e){const t=e.getCoalescedEvents();if(t.length>=1)return t}return[e]})(e).forEach(e=>{this.output.onPointerMove(e)})}onPointerUp(e){this.output.onPointerUp(e)}}var ty=function(){function e(e,t,n){_2(this.head=new J2(e),new Y2(e),new Z2,new $2(t,n),this.tail=new ey),this.preventDefaultOnTouchMove=new X2(e)}return e.prototype.activate=function(){var e;this.head.activate(),null===(e=this.preventDefaultOnTouchMove)||void 0===e||e.activate()},e.prototype.deactivate=function(){var e;this.head.deactivate(),null===(e=this.preventDefaultOnTouchMove)||void 0===e||e.deactivate()},Object.defineProperty(e.prototype,"output",{set:function(e){this.tail.output=e},enumerable:!1,configurable:!0}),e}();class ny{constructor(){this.wasPenDown=!1}onPointerDown(e){this.wasPenDown=function(e){return"pen"===e.pointerType}(e)}onTouchStart(e){this.wasPenDown&&G2(e)}}class ay{constructor(){this.activeIdentifier=-1}onTouchStart(e,t){-1===this.activeIdentifier&&(this.activeIdentifier=t.identifier,this.output.onTouchStart(e,t))}onTouchMove(e,t){this.activeIdentifier===t.identifier&&this.output.onTouchMove(e,t)}onTouchEnd(e,t){this.activeIdentifier===t.identifier&&(this.output.onTouchEnd(e,t),this.activeIdentifier=-1)}}class iy{onTouchStart(e){for(let t=0;t<e.changedTouches.length;t+=1)this.output.onTouchStart(e,e.changedTouches[t])}onTouchMove(e){for(let t=0;t<e.changedTouches.length;t+=1)this.output.onTouchMove(e,e.changedTouches[t])}onTouchEnd(e){for(let t=0;t<e.changedTouches.length;t+=1)this.output.onTouchEnd(e,e.changedTouches[t])}}class ry{constructor(e){this.onTouchStart=e=>{this.output.onTouchStart(e)},this.onTouchMove=e=>{this.output.onTouchMove(e)},this.onTouchEnd=e=>{this.output.onTouchEnd(e)},this.element=e}activate(){this.element.addEventListener("touchstart",this.onTouchStart),this.element.addEventListener("touchmove",this.onTouchMove),this.element.addEventListener("touchend",this.onTouchEnd)}deactivate(){this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchmove",this.onTouchMove),this.element.removeEventListener("touchend",this.onTouchEnd)}}class oy{onTouchStart(e){this.output.onTouchStart(e),G2(e)}onTouchMove(e){this.output.onTouchMove(e),G2(e)}onTouchEnd(e){this.output.onTouchEnd(e),G2(e)}}class sy{constructor(e){m2(this.head=new ry(e),new oy,new iy,this.tail=new ay)}activate(){this.head.activate()}deactivate(){this.head.deactivate()}set output(e){this.tail.output=e}}function cy(e){return 180*e/Math.PI}function dy(e,t){const n=t.target.getBoundingClientRect();return{offsetX:t.clientX-n.left,offsetY:t.clientY-n.top,pressure:t.force,tiltX:cy(Math.atan(Math.cos(t.azimuthAngle)/Math.tan(t.altitudeAngle))),tiltY:cy(Math.atan(Math.sin(t.azimuthAngle)/Math.tan(t.altitudeAngle))),timeStamp:e.timeStamp,pointerType:"touch"}}class ly{onTouchStart(e,t){this.output.onPointerDown(dy(e,t))}onTouchMove(e,t){this.output.onPointerMove(dy(e,t))}onTouchEnd(e,t){this.output.onPointerUp(dy(e,t))}}const uy={type:0},fy={width:4,height:4,color:{r:0,g:0,b:0,a:1},effect:uy,tip:"ellipse",rasterOperation:"copy"};function py(e){return{width:e.width,height:e.height,color:e.color,effect:e.effect,tip:e.tip,rasterOperation:e.rasterOperation}}class my{constructor(e){this.attributes=py(void 0!==e?e:fy)}setWidth(e){return this.attributes.width=e,this}setHeight(e){return this.attributes.height=e,this}setColor(e){return this.attributes.color=e,this}setEffect(e){return this.attributes.effect=e,this}setTip(e){return this.attributes.tip=e,this}setRasterOperation(e){return this.attributes.rasterOperation=e,this}build(){return py(this.attributes)}}class _y{constructor(){this.offsetX=0,this.offsetY=0}setDrawingAttributes(e){this.output.setDrawingAttributes(1===e.effect.type?new my(e).setEffect({type:1,pattern:e.effect.pattern,offsetX:this.offsetX,offsetY:this.offsetY}).build():e)}beginStroke(e){this.output.beginStroke(e),this.begin=e}addPoint(e){this.output.addPoint(e)}endStroke(e){this.output.endStroke(e);const t=e.x-this.begin.x,n=e.y-this.begin.y,a=t>0?48:-48;this.offsetX+=t+a,this.offsetY+=n+a,this.offsetX%=540,this.offsetY%=540}}class hy{constructor(e=fy){this.offset=new _y,this.setDrawingAttributes(e)}setDrawingAttributes(e){this.attributes=e}beginStroke(e){f2(this.offset,this.output),this.out=1===this.attributes.effect.type?this.offset:this.output,this.out.setDrawingAttributes(this.attributes),this.out.beginStroke(e)}addPoint(e){this.out.addPoint(e)}endStroke(e){this.out.endStroke(e)}}function by(e){return 5===e.button||32==(32&e.buttons)}var gy=I(4220);function vy(e){return function(e){var t=0===e.pressure,n="mouse"===e.pointerType||""===e.pointerType;return t&&n}(e)?function(e,t){return new PointerEvent(e.type,{pressure:.5,clientX:e.offsetX,clientY:e.offsetY,altKey:e.altKey,bubbles:e.bubbles,button:e.button,buttons:e.buttons,cancelable:e.cancelable,composed:e.composed,ctrlKey:e.ctrlKey,detail:e.detail,height:e.height,isPrimary:e.isPrimary,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,pointerId:e.pointerId,pointerType:e.pointerType,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,tangentialPressure:e.tangentialPressure,tiltX:e.tiltX,tiltY:e.tiltY,twist:e.twist,width:e.width})}(e):e}var yy=function(){function e(e,t,n,a,i,r){this.wetCanvas=e,this.wetInkDryer=t,this.inkRenderer=n,this.activeInkBrush=a,this.wetStrokeCollector=i,this.onPointerEvent=r,this.ignoreStroke=!1,this.drawingBounds=Se.hs,this.makeStrokeStraightTimer=void 0}return e.prototype.getShouldIgnoreStrokeOnPointerDown=function(e){if(!(0,q3.q$)(e))return!0;var t={x:e.offsetX,y:e.offsetY};return!(0,Se._N)(t,this.drawingBounds)},e.prototype.forceInkRendererToLineMode=function(e){this.inkRenderer.setIncrementalRender(!e&&function(e){switch(e.inkType){case Mo.p.Highlighter:return!1;case Mo.p.Pen:return e.strokeShape.lineMode!==gy.y.StraightLine;default:throw new s.x(e.inkType)}}(this.activeInkBrush)),this.inkRenderer.setIsLineMode(e||this.activeInkBrush.strokeShape.lineMode===gy.y.StraightLine)},e.prototype.onPointerDown=function(e){var t,n=vy(e);if(null===(t=this.onPointerEvent)||void 0===t||t.call(this,n),(by(n)||function(e){return 2===e.button||2==(2&e.buttons)}(n))&&this.wetInkDryer.dryAllStrokes(),this.ignoreStroke=this.getShouldIgnoreStrokeOnPointerDown(n),!this.ignoreStroke){try{this.wetCanvas.setPointerCapture(n.pointerId)}catch(e){}this.forceInkRendererToLineMode(n.shiftKey),this.output.onPointerDown(n)}},e.prototype.onPointerMove=function(e){var t,n=this,a={x:e.offsetX,y:e.offsetY};this.prevPointerMovePos&&!(0,ot.CN)(a,this.prevPointerMovePos)&&(this.makeStrokeStraightTimer&&window.clearTimeout(this.makeStrokeStraightTimer),this.makeStrokeStraightTimer=window.setTimeout(function(){n.wetStrokeCollector.makeCurrentStrokeStraight(),n.forceInkRendererToLineMode(!0)},1e3)),this.prevPointerMovePos=a;var i=vy(e);null===(t=this.onPointerEvent)||void 0===t||t.call(this,i),this.ignoreStroke||(this.forceInkRendererToLineMode(i.shiftKey||this.inkRenderer.getIsLineMode()),this.output.onPointerMove(i))},e.prototype.onPointerUp=function(e){var t;this.makeStrokeStraightTimer&&window.clearTimeout(this.makeStrokeStraightTimer);var n=vy(e);if(null===(t=this.onPointerEvent)||void 0===t||t.call(this,n),this.ignoreStroke)this.ignoreStroke=!1;else{this.forceInkRendererToLineMode(n.shiftKey),this.output.onPointerUp(n);try{this.wetCanvas.releasePointerCapture(n.pointerId)}catch(e){}}},e.prototype.setDrawingBounds=function(e){this.drawingBounds=e},e}(),Sy=function(){function e(e){var t=this;this.onPointerOut=function(e){t.output.onPointerOut(e)},this.element=e}return e.prototype.activate=function(){this.element.addEventListener("pointerout",this.onPointerOut)},e.prototype.deactivate=function(){this.element.removeEventListener("pointerout",this.onPointerOut)},e}(),Dy=function(){function e(){}return e.prototype.onPointerDown=function(e){this.output.onPointerDown(e),this.lastStrokeInProgressEvent=e},e.prototype.onPointerMove=function(e){this.output.onPointerMove(e),this.lastStrokeInProgressEvent=e},e.prototype.onPointerUp=function(e){this.output.onPointerUp(e),this.lastStrokeInProgressEvent=void 0},e.prototype.getLastStrokeInProgressEvent=function(){return this.lastStrokeInProgressEvent},e}(),Iy=function(){function e(e,t,n){void 0===t&&(t=250),void 0===n&&(n=5),this.onLongPressPointerEvent=e,this.longPressMinimalDurationMs=t,this.longPressMaxDistanceCssPixels=n}return e.prototype.onPointerDown=function(e){this.resetLongPress(),this.pointerDownEventData=e,this.longPressTimerId=this.startLongPressTimer(),this.output.onPointerDown(e)},e.prototype.onPointerMove=function(e){this.pointerDownEventData&&!(0,ot.Nz)({x:e.x,y:e.y},{x:this.pointerDownEventData.x,y:this.pointerDownEventData.y},this.longPressMaxDistanceCssPixels)&&this.resetLongPress(),this.output.onPointerMove(e)},e.prototype.onPointerUp=function(e){this.pointerDownEventData&&this.resetLongPress(),this.output.onPointerUp(e)},e.prototype.resetLongPress=function(){this.pointerDownEventData=void 0,this.longPressTimerId&&(clearTimeout(this.longPressTimerId),this.longPressTimerId=void 0)},e.prototype.startLongPressTimer=function(){var e=this;return window.setTimeout(function(){e.pointerDownEventData&&e.onLongPressPointerEvent(e.pointerDownEventData)},this.longPressMinimalDurationMs)},e}(),xy=function(){function e(){}return e.prototype.onPointerDown=function(e){this.output.onPointerDown(e)},e.prototype.onPointerMove=function(e){this.output.onPointerMove(e)},e.prototype.onPointerUp=function(e){this.output.onPointerUp(e)},e}(),Cy=function(){function e(e,t,n,a,i,r,o,s,c,d,l,u,f,p,m){if(r?p2(this.drawer=new N2(o),this.injector=new hy,n):m2(this.drawer=S2(),new I2,this.injector=new hy,n),void 0!==window.PointerEvent){var _=new ty(e,d,l),h=new yy(i,a,s,c,n,u),b=new Dy;_2(this.input=_,this.pointerEventTransform=h,b,f?new Iy(f,p,m):new xy,this.drawer),f2(this.inputPointerUpOnPointerOut=new Sy(e),function(e,t){return{onPointerOut:function(n){var a=t.getLastStrokeInProgressEvent();a&&e.head.onPointerUp(a)}}}(_,b))}else if(void 0!==window.TouchEvent){var g=new sy(e);p2(g,new ly,this.drawer),this.input=g}else{var v=new W2(e);p2(v,new Q2,this.drawer),this.input=v}f2(this.preventTouchStartOnStylusDown=new B2(t),new ny)}return e.prototype.activate=function(){var e;this.input.activate(),null===(e=this.inputPointerUpOnPointerOut)||void 0===e||e.activate(),this.activateStylus()},e.prototype.deactivate=function(){var e;this.deactivateStylus(),null===(e=this.inputPointerUpOnPointerOut)||void 0===e||e.deactivate(),this.input.deactivate()},e.prototype.activateStylus=function(){this.preventTouchStartOnStylusDown.activate()},e.prototype.deactivateStylus=function(){this.preventTouchStartOnStylusDown.deactivate()},e.prototype.setDrawingAttributes=function(e){this.injector.setDrawingAttributes(e)},e.prototype.setDrawingBounds=function(e){var t;null===(t=this.pointerEventTransform)||void 0===t||t.setDrawingBounds(e)},e}();class Oy{constructor(e){this.isLoopActive=!1,this.animationCallback=()=>{this.delegate(),this.isLoopActive&&window.requestAnimationFrame(this.animationCallback)},this.delegate=e}onStrokeBegin(){this.isLoopActive=!0,window.requestAnimationFrame(this.animationCallback)}onStrokeEnd(){this.isLoopActive=!1}}function wy(e){throw e}class Ey{constructor(e){this.context=e}beginPath(){this.context.beginPath()}arc(e,t,n,a,i,r){this.context.arc(e,t,n,a,i,r)}circularArc(e,t,n,a,i,r,o,s,c){let d=Math.atan2(t-a,e-n),l=Math.atan2(o-a,r-n);d=d<0?2*Math.PI+d:d,l=l<0?2*Math.PI+l:l,this.arc(n,a,i,d,l,c)}lineTo(e,t){this.context.lineTo(e,t)}moveTo(e,t){this.context.moveTo(e,t)}closePath(){this.context.closePath()}}class Ay{toCSSColor(e){return function(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}(e)}}function Ly(e,t,n=1e-6){return function(e,t=1e-6){return-t<=e&&e<=t}(e-t,n)}function ky(e){return 1.5*e+.25}class My{constructor(e,t,n){this.incomingTangent1={x:Number.NaN,y:Number.NaN},this.incomingTangent2={x:Number.NaN,y:Number.NaN},this.outgoingTangent1={x:Number.NaN,y:Number.NaN},this.outgoingTangent2={x:Number.NaN,y:Number.NaN},this.center={x:e,y:t},this.radius=n}}class Py{constructor(e,t){this.stroke=[],this.builder=e,this.tipRadius=t.width/2}beginStroke(e){this.builder.beginPath(),this.stroke=[],this.addPoint(e)}addPoint(e){const t=new My(e.x,e.y,this.tipRadius*ky(e.pressure));this.stroke.push(t)}endStroke(e){this.addPoint(e),function(e){for(let t=1;t<e.length;t++){const n=e[t-1],a=e[t],i=n.center.x,r=n.center.y,o=n.radius,s=a.center.x,c=a.center.y,d=a.radius,l=i-s,u=r-c,f=Math.sqrt(l*l+u*u),p=Math.abs(d-o);if(p>f)continue;const m=1/f,_=p*m;let h=Math.sqrt(1-_*_),b=l*m,g=u*m;o>d&&(h=-h,b=-b,g=-g);const v=b*_,y=g*_,S=b*h,D=g*h,I=v+D,x=y-S,C=v-D,O=y+S;n.outgoingTangent1.x=i+o*I,n.outgoingTangent1.y=r+o*x,n.outgoingTangent2.x=i+o*C,n.outgoingTangent2.y=r+o*O,a.incomingTangent1.x=s+d*I,a.incomingTangent1.y=c+d*x,a.incomingTangent2.x=s+d*C,a.incomingTangent2.y=c+d*O}}(this.stroke),function(e,t){let n=0;for(let a=0;a<t.length;a++)(a===t.length-1||isNaN(t[a].outgoingTangent1.x))&&(Ty(e,t,n,a),n=a+1)}(this.builder,this.stroke),this.builder.closePath()}}function Ty(e,t,n,a){if(n===a){const a=t[n];return e.moveTo(a.center.x-a.radius,a.center.y),e.circularArc(a.center.x-a.radius,a.center.y,a.center.x,a.center.y,a.radius,a.center.x+a.radius,a.center.y,!1,!0),void e.circularArc(a.center.x+a.radius,a.center.y,a.center.x,a.center.y,a.radius,a.center.x-a.radius,a.center.y,!1,!0)}let i=t[n];e.moveTo(i.outgoingTangent1.x,i.outgoingTangent1.y);let r,o=i;i=t[n+1];for(let s=n+1;s<a;s++){r=t[s+1];const n=Uy(o.outgoingTangent1,i.incomingTangent1,i.outgoingTangent1,r.incomingTangent1);void 0!==n?e.lineTo(n.x,n.y):(e.lineTo(i.incomingTangent1.x,i.incomingTangent1.y),e.circularArc(i.incomingTangent1.x,i.incomingTangent1.y,i.center.x,i.center.y,i.radius,i.outgoingTangent1.x,i.outgoingTangent1.y,!1,!0)),o=i,i=r}const s=i.radius>t[a-1].radius;e.lineTo(i.incomingTangent1.x,i.incomingTangent1.y),e.circularArc(i.incomingTangent1.x,i.incomingTangent1.y,i.center.x,i.center.y,i.radius,i.incomingTangent2.x,i.incomingTangent2.y,s,!0),o=i,i=t[a-1];for(let s=a-1;s>n;s--){r=t[s-1];const n=Uy(o.incomingTangent2,i.outgoingTangent2,i.incomingTangent2,r.outgoingTangent2);void 0!==n?e.lineTo(n.x,n.y):(e.lineTo(i.outgoingTangent2.x,i.outgoingTangent2.y),e.circularArc(i.outgoingTangent2.x,i.outgoingTangent2.y,i.center.x,i.center.y,i.radius,i.incomingTangent2.x,i.incomingTangent2.y,!1,!0)),o=i,i=r}const c=i.radius>t[n+1].radius;e.lineTo(i.outgoingTangent2.x,i.outgoingTangent2.y),e.circularArc(i.outgoingTangent2.x,i.outgoingTangent2.y,i.center.x,i.center.y,i.radius,i.outgoingTangent1.x,i.outgoingTangent1.y,c,!0)}function Uy(e,t,n,a){if((a.x-n.x)*(t.y-e.y)-(t.x-e.x)*(a.y-n.y)>0)return;const i=t.y-e.y,r=e.x-t.x,o=i*e.x+r*e.y,s=a.y-n.y,c=n.x-a.x,d=s*n.x+c*n.y,l=i*c-s*r;if(function(e,t=1e-6){return e<-t||t<e}(l)){const u=1/l,f=(c*o-r*d)*u,p=(i*d-s*o)*u;if(Fy(f,p,e,t)&&Fy(f,p,n,a))return{x:f,y:p}}}function Fy(e,t,n,a){return(Math.min(n.x,a.x)<e||Ly(Math.min(n.x,a.x),e))&&(Math.max(n.x,a.x)>e||Ly(Math.max(n.x,a.x),e))&&(Math.min(n.y,a.y)<t||Ly(Math.min(n.y,a.y),t))&&(Math.max(n.y,a.y)>t||Ly(Math.max(n.y,a.y),t))}const Hy=2*Math.PI;function Ry(e,t,n){e.arc(t.x,t.y,n,0,Hy)}function Ny(e,t,n,a){const i=t.x-n,r=t.x+n,o=t.y-a,s=t.y+a;e.moveTo(i,o),e.lineTo(r,o),e.lineTo(r,s),e.lineTo(i,s),e.lineTo(i,o)}function By(e,t){e.moveTo(t.p1.x,t.p1.y),e.lineTo(t.p2.x,t.p2.y),e.lineTo(t.p3.x,t.p3.y),e.lineTo(t.p4.x,t.p4.y),e.lineTo(t.p1.x,t.p1.y)}class jy{constructor(e,t){this.quad={p1:{x:0,y:0},p2:{x:0,y:0},p3:{x:0,y:0},p4:{x:0,y:0}},this.builder=e,this.tipRadius=t.width/2}beginStroke(e){this.builder.beginPath(),this.updateRadius(e),Ry(this.builder,e,this.radius),this.lastPoint=e}addPoint(e){this.updateRadius(e),function(e,t,n,a,i){const r=n.x-e.x,o=n.y-e.y,s=Math.sqrt(r*r+o*o);if(s<=Math.abs(a-t))return!1;const c=r/s,d=-o/s,l=(a-t)/s,u=Math.sqrt(1-l*l),f=d*u+c*l,p=c*u-d*l,m=d*u-c*l,_=c*u+d*l;return i.p1.x=e.x-f*t,i.p1.y=e.y-p*t,i.p2.x=n.x-f*a,i.p2.y=n.y-p*a,i.p3.x=n.x+m*a,i.p3.y=n.y+_*a,i.p4.x=e.x+m*t,i.p4.y=e.y+_*t,!0}(e,this.radius,this.lastPoint,this.lastRadius,this.quad)&&(By(this.builder,this.quad),Ry(this.builder,e,this.radius)),this.lastPoint=e}endStroke(e){this.addPoint(e),this.builder.closePath()}updateRadius(e){this.lastRadius=this.radius,this.radius=this.tipRadius*ky(e.pressure)}}class Vy{constructor(e){this.builder=e}beginStroke(e){this.builder.beginPath(),this.builder.moveTo(e.x,e.y)}addPoint(e){this.builder.lineTo(e.x,e.y)}endStroke(e){this.addPoint(e)}}function zy(e,t,n,a,i,r,o){const s=e.x-t,c=e.y-n,d=e.x+t,l=e.y+n,u=a.x-i,f=a.y-r,p=a.x+i,m=a.y+r;if(u>=s&&f>=c&&p<=d&&m<=l||s>=u&&c>=f&&d<=p&&l<=m)return!1;const _=a.x-e.x>0?1:-1,h=a.y-e.y>0?1:-1;return o.p1.x=e.x-h*t,o.p1.y=e.y+_*n,o.p2.x=e.x+h*t,o.p2.y=e.y-_*n,o.p3.x=a.x+h*i,o.p3.y=a.y-_*r,o.p4.x=a.x-h*i,o.p4.y=a.y+_*r,!0}class Gy{constructor(e,t,n,a){this.center={x:e,y:t},this.halfWidth=n,this.halfHeight=a}}class Ky{constructor(e,t){this.stroke=[],this.quads=[],this.builder=e,this.tipWidth=t.width/2,this.tipHeight=t.height/2}beginStroke(e){this.builder.beginPath(),this.stroke=[],this.quads=[],this.addPoint(e)}addPoint(e){const t=ky(e.pressure),n=new Gy(e.x,e.y,this.tipWidth*t,this.tipHeight*t),a=this.stroke.length;a>0&&function(e,t,n){const a={p1:{x:0,y:0},p2:{x:0,y:0},p3:{x:0,y:0},p4:{x:0,y:0}};zy(e.center,e.halfWidth,e.halfHeight,t.center,t.halfWidth,t.halfHeight,a)&&n.push(a)}(this.stroke[a-1],n,this.quads),this.stroke.push(n)}endStroke(e){this.addPoint(e),function(e,t,n){if(Wy(e,t[0]),0!==n.length){e.moveTo(n[0].p1.x,n[0].p1.y);for(let t=0;t<n.length;t++)e.lineTo(n[t].p2.x,n[t].p2.y),e.lineTo(n[t].p3.x,n[t].p3.y);for(let t=n.length-1;t>=0;t--)e.lineTo(n[t].p4.x,n[t].p4.y),e.lineTo(n[t].p1.x,n[t].p1.y);t.length>2&&Wy(e,t[t.length-2]),Wy(e,t[t.length-1])}}(this.builder,this.stroke,this.quads),this.builder.closePath()}}function Wy(e,t){Ny(e,t.center,t.halfWidth,t.halfHeight)}class qy{constructor(e,t){this.quad={p1:{x:0,y:0},p2:{x:0,y:0},p3:{x:0,y:0},p4:{x:0,y:0}},this.builder=e,this.tipHalfWidth=t.width/2,this.tipHalfHeight=t.height/2}beginStroke(e){this.builder.beginPath(),this.updateSize(e),Ny(this.builder,e,this.halfWidth,this.halfHeight),this.lastPoint=e}addPoint(e){this.updateSize(e),zy(e,this.halfWidth,this.halfHeight,this.lastPoint,this.lastHalfWidth,this.lastHalfHeight,this.quad)&&(By(this.builder,this.quad),Ny(this.builder,e,this.halfWidth,this.halfHeight)),this.lastPoint=e}endStroke(e){this.addPoint(e),this.builder.closePath()}updateSize(e){this.lastHalfWidth=this.halfWidth,this.lastHalfHeight=this.halfHeight;const t=ky(e.pressure);this.halfWidth=this.tipHalfWidth*t,this.halfHeight=this.tipHalfHeight*t}}class Qy{constructor(e,t,n=new Ay){this.renderMode=0,this.context=e,this.canvasPathBuilder=new Ey(e),this.effectResolver=t,this.colorResolver=n}setDrawingAttributes(e){this.attributes=e}beginStroke(e){this.pathBuilder=this.makeNewPathBuilder(),this.pathBuilder.beginStroke(e),this.beginPoint=e}addPoint(e){this.pathBuilder.addPoint(e)}endStroke(e){this.pathBuilder.endStroke(e),this.context.save(),function(e,t,n,a,i){e.lineWidth=t.height;const r=function(e,t,n,a,i){if(1===t.effect.type){const a=t.effect,r=n.toCanvasImageSource(a);if(void 0!==r){const n=e.createPattern(r,"repeat");if(null!==n){const r=.5;return e.scale(r,r),e.lineWidth=t.width/r,e.translate(i.x-a.offsetX,i.y-a.offsetY),n}}}return a.toCSSColor(t.color,t)}(e,t,n,a,i);switch(e.strokeStyle=r,e.fillStyle=r,t.tip){case"ellipse":e.lineCap="round",e.lineJoin="round";break;case"rectangle":e.lineCap="butt",e.lineJoin="miter";break;default:wy(t.tip)}switch(t.rasterOperation){case"copy":e.globalCompositeOperation="source-over";break;case"mask":e.globalCompositeOperation="darken";break;default:wy(t.rasterOperation)}}(this.context,this.attributes,this.effectResolver,this.colorResolver,this.beginPoint),2===this.renderMode?this.context.stroke():this.context.fill(),this.context.restore()}makeNewPathBuilder(){switch(this.renderMode){case 0:return"ellipse"===this.attributes.tip?new jy(this.canvasPathBuilder,this.attributes):new qy(this.canvasPathBuilder,this.attributes);case 1:return"ellipse"===this.attributes.tip?new Py(this.canvasPathBuilder,this.attributes):new Ky(this.canvasPathBuilder,this.attributes);case 2:return new Vy(this.canvasPathBuilder);default:wy(this.renderMode)}}}class Yy{toCanvasImageSource(){}toSVGImageElement(){}}const Jy={alpha:!0,desynchronized:!1};function Xy(e){return function(e,t){const n=e.getContext("2d",t);if(null===n)throw new Error("Could not get 2D context from canvas.");return n}(e,Jy)}var Zy=function(){function e(e,t){var n,a=this;this.strokeBeginEndListener={onStrokeBegin:function(){a.renderLoop.onStrokeBegin()},onStrokeEnd:function(){a.renderLoop.onStrokeEnd()}},this.isIncrementalRender=!0,this.render=function(){a.isIncrementalRender||a.clear(),a.store.streamWetStroke(a.wetRenderer,a.isIncrementalRender)},this.store=t,this.wetCanvasContext=Xy(e),this.wetRenderer=(n=this.wetCanvasContext,new Qy(n,new Yy)),this.renderLoop=new Oy(this.render)}return e.prototype.clear=function(){var e;(e=this.wetCanvasContext).save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},e.prototype.setIncrementalRender=function(e){this.isIncrementalRender=e},e.prototype.onStrokeBegin=function(){this.strokeBeginEndListener.onStrokeBegin()},e.prototype.onStrokeEnd=function(){this.strokeBeginEndListener.onStrokeEnd()},e.prototype.setIsLineMode=function(e){this.store.setIsLineMode(e)},e.prototype.getIsLineMode=function(){return this.store.getIsLineMode()},e}();function $y(){}class e6{constructor(){this.baseId=0}generate(){return this.baseId+=1}setBaseId(e){this.baseId=e}}class t6{constructor(){this.id=0,this.drawingAttributes=fy,this.points=[]}streamChannels(e){this.points.forEach(t=>{e.addPoint(t),e.addPressure(function(e){return e.pressure}(t)),e.addTilt(t),e.addTimestamp(function(e){return e.timestamp}(t))})}streamPoints(e){this.points.forEach(t=>{e.add(t)})}streamPath(e){n6(this,e,0)}stream(e){a6(this,e,0)}add(e){this.points.push(e)}}function n6(e,t,n){if(n+2>e.points.length)return n;t.beginStroke(e.points[n]);for(let a=n+1;a<e.points.length-1;a+=1)t.addPoint(e.points[a]);return t.endStroke(e.points[e.points.length-1]),e.points.length-1}function a6(e,t,n){return t.setDrawingAttributes(e.drawingAttributes),n6(e,t,n)}class i6{constructor(e){this.idGenerator=new e6,this.currentStroke=new t6,this.isLineMode=!1,this.inputStrokes=[],this.newPointsIndex=0,this.noop={add:$y},this.output=this.noop,this.beginEndSink=e}setDrawingAttributes(e){this.currentStroke.drawingAttributes=e}beginStroke(e){this.newPointsIndex=0,this.currentStroke.id=this.idGenerator.generate(),this.beginEndSink.onStrokeBegin(),this.output=this.currentStroke,this.output.add(this.isLineMode?this.getConstantPressurePoint(e):e)}addPoint(e){this.isLineMode&&1===this.currentStroke.points.length?this.output.add(this.getConstantPressurePoint(e)):this.isLineMode&&this.currentStroke.points.length>1?this.currentStroke.points[this.currentStroke.points.length-1]=this.getConstantPressurePoint(e):this.output.add(e)}endStroke(e){this.output!==this.noop&&(this.isLineMode&&this.currentStroke.points.length>1?this.currentStroke.points[this.currentStroke.points.length-1]=this.getConstantPressurePoint(e):this.output.add(e),this.inputStrokes.push([this.currentStroke,this.newPointsIndex]),this.cancel())}makeCurrentStrokeStraight(){const e=this.currentStroke.points.length;e>=2&&(this.linePressure=this.getAveragePressureAcrossStroke(this.currentStroke),0===this.linePressure&&(this.linePressure=h2),this.currentStroke.points.splice(1,e-2),this.currentStroke.points[0]=this.getConstantPressurePoint(this.currentStroke.points[0]),this.currentStroke.points[1]=this.getConstantPressurePoint(this.currentStroke.points[1]))}cancel(){this.output!==this.noop&&(this.output=this.noop,this.linePressure=void 0,this.currentStroke=new t6,this.beginEndSink.onStrokeEnd())}streamCollectedStrokes(e){this.inputStrokes.forEach(t=>{e.add(t[0]),t[1]=t[0].points.length-1})}streamCollectedStrokesNewPoints(e){this.inputStrokes.forEach(t=>{t[1]=a6(t[0],e,t[1])})}resetCollectedStrokes(){this.inputStrokes=[]}streamCurrentStroke(e){this.newPointsIndex=a6(this.currentStroke,e,0)}streamCurrentStrokeNewPoints(e){this.newPointsIndex=a6(this.currentStroke,e,this.newPointsIndex)}getAveragePressureAcrossStroke(e){let t=0;for(let n=0;n<e.points.length;n+=1)t+=e.points[n].pressure;return 0===t||0===e.points.length?0:t/e.points.length}getConstantPressurePoint(e){return void 0===this.linePressure&&(this.linePressure=0===e.pressure?h2:e.pressure),{x:e.x,y:e.y,pressure:this.linePressure,tiltX:e.tiltX,tiltY:e.tiltY,timestamp:e.timestamp}}}var r6=function(){function e(){var e=this;this.collectedWetStrokesSink=null,this.wetStrokeCollector=new i6({onStrokeBegin:function(){e.wetInkDryer.onStrokeBegin()},onStrokeEnd:function(){e.wetInkDryer.onStrokeEnd()}})}return e.prototype.streamWetStroke=function(e,t){t?(this.wetStrokeCollector.streamCurrentStrokeNewPoints(e),this.wetStrokeCollector.streamCollectedStrokesNewPoints(e)):(this.wetStrokeCollector.streamCurrentStroke(e),this.wetStrokeCollector.streamCollectedStrokes({add:function(t){t.stream(e)}}))},e.prototype.setCollectedWetStrokesSink=function(e){this.collectedWetStrokesSink=e},e.prototype.clearCollectedWetStrokesSink=function(){this.collectedWetStrokesSink=null},e.prototype.setInkDryer=function(e){this.wetInkDryer=e,this.initializeDryStrokesCallback()},e.prototype.initializeDryStrokesCallback=function(){var e=this;this.wetInkDryer.setTask(function(){e.wetStrokeCollector.streamCollectedStrokes({add:function(t){var n;null===(n=e.collectedWetStrokesSink)||void 0===n||n.add(t)}}),e.wetStrokeCollector.resetCollectedStrokes()})},e.prototype.dryAllStrokes=function(){this.wetInkDryer.dryAllStrokes()},e.prototype.getWetStrokeCollector=function(){return this.wetStrokeCollector},e.prototype.setIsLineMode=function(e){this.wetStrokeCollector.isLineMode=e},e.prototype.getIsLineMode=function(){return this.wetStrokeCollector.isLineMode},e}(),o6=function(){function e(e,t){var n=this;this.task=function(){},this.executeTask=function(){n.task(),n.renderer.clear(),n.resetPendingTask()},this.renderer=e,this.idleTimeToDryInkInMs=t}return e.prototype.setTask=function(e){this.task=e},e.prototype.onStrokeBegin=function(){this.renderer.onStrokeBegin(),void 0!==this.timeoutTask&&this.resetPendingTask()},e.prototype.onStrokeEnd=function(){this.renderer.onStrokeEnd(),this.timeoutTask=window.setTimeout(this.executeTask,this.idleTimeToDryInkInMs)},e.prototype.dryAllStrokes=function(){this.executeTask(),this.resetPendingTask()},e.prototype.resetPendingTask=function(){window.clearTimeout(this.timeoutTask)},e}();function s6(e,t){var n=(0,ae.n)(e);if(!n)throw new Error("A valid color must be provided: ".concat(e));return{r:n.r,g:n.g,b:n.b,a:t}}function c6(e){var t=new my,n=e.inkType,a=e.htmlColor,i=e.thicknessInCssPixels;switch(n){case Mo.p.Highlighter:var r=s6(a,.5);t.setTip("rectangle").setWidth(i/2).setHeight(i).setColor(r).setRasterOperation("copy");break;case Mo.p.Pen:r=s6(a,1),t.setTip("ellipse").setWidth(i).setHeight(i).setColor(r).setRasterOperation("copy");break;default:throw new s.x(n)}return t.build()}function d6(e){var t=Xy(e),n=e.width/(e.clientWidth||1),a=e.height/(e.clientHeight||1);t.setTransform(1,0,0,1,0,0),t.scale(n,a)}var l6=function(){function e(e,t,n,a,i,r,o,s,c,d,l,u){this.wetCanvas=e,d6(e),this.store=new r6,this.renderer=new Zy(this.wetCanvas,this.store);var f=new o6(this.renderer,a);this.store.setInkDryer(f),this.pipeline=new Cy(this.wetCanvas,t,this.store.getWetStrokeCollector(),f,this.wetCanvas,i,r,this.renderer,n,o,s,c,d,l,u)}return e.prototype.startPipeline=function(){this.pipeline.activate(),this.enableCanvasPointerEvents()},e.prototype.stopPipeline=function(){this.disableCanvasPointerEvents(),this.renderer.clear(),this.pipeline.deactivate()},e.prototype.enableCanvasPointerEvents=function(){this.wetCanvas.style.pointerEvents="auto"},e.prototype.disableCanvasPointerEvents=function(){this.wetCanvas.style.pointerEvents="none"},e.prototype.updateInkAttributes=function(e){var t=c6(e);this.pipeline.setDrawingAttributes(t)},e.prototype.setCollectedWetStrokesSink=function(e){this.store.setCollectedWetStrokesSink(e)},e.prototype.clearCollectedWetStrokesSink=function(){this.store.clearCollectedWetStrokesSink()},e.prototype.onCanvasDimensionsUpdated=function(e){d6(e)},e.prototype.dryAllStrokes=function(){this.store.dryAllStrokes()},e.prototype.setDrawingBounds=function(e){this.pipeline.setDrawingBounds(e)},e.prototype.getLineMode=function(){return this.store.getIsLineMode()?gy.y.StraightLine:gy.y.FreeHand},e}();function u6(e,t){return{x:t.x,y:t.y,pressure:h2,tiltX:0,tiltY:0,timestamp:e.timeStamp}}var f6=function(){return f6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f6.apply(this,arguments)},p6=function(){return p6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p6.apply(this,arguments)},m6=(0,t.memo)(function(e){var a=e.cropViewTransform,i=e.cssToPhysicalPixelRatio,r=e.imageViewTransform,o=e.width,s=e.height,c=e.cssWidth,d=e.cssHeight,l=e.styles,u=e.setActiveMarkupToolType,f=e.activeMarkupToolType,p=e.previousActiveMarkupToolType,m=e.setPointerIdToCaptureWhenEraserBrushIsCreated,_=e.activeInkBrush,h=e.setStrokeShapeTipVisibilityState,b=e.setMarkupCursorScreenPosition,g=e.moveMarkupCursorScreenPositionBy,v=e.addMarkupContent,y=e.cursorScreenPos,S=e.setIsKeyboardInputActive,D=e.setShowInkStylePicker,I=e.linePreviewCoords,x=e.setLinePreviewCoords,C=e.isEditorFocused,O=e.isKeyboardInputActive,w=e.onLongPressAtStrokeStartPointerEvent,E=e.longPressMinimalDurationMs,A=e.longPressMaxDistanceCssPixels,L=e.onPointerEvent,k=(0,t.useContext)(V3),M=k.wetInkCanvas,P=k.setWetInkCanvas,T=(0,t.useRef)(),U=(0,t.useState)(null),F=U[0],H=U[1],R=(0,t.useState)(null),N=R[0],B=R[1];return(0,Ke.s)(N),(0,t.useEffect)(function(){if(N&&F){var e=function(e,t,n,a,i,r,o,s,c){return new l6(e,t,n,0,!0,.5,a,i,r,o,s,c)}(N,F,_,b,S,function(e){"pointerdown"===e.type&&(h("alreadyShown"),by(e)&&(m(e.pointerId),u(Xo.d9))),null==L||L(e)},w,E,A);e.startPipeline(),P(e)}return function(){var e;null===(e=T.current)||void 0===e||e.stopPipeline(),P(void 0)}},[_,N,u,b,m,h,S,P,F,w,E,A,L,p,f]),T.current=M,function(e,n,a,i){var r=(0,t.useCallback)(function(){if(e){var t=(null==n?void 0:n.clientWidth)||0,r=(null==n?void 0:n.clientHeight)||0;e.style.width="".concat(t,"px"),e.style.height="".concat(r,"px"),function(e,t){if(e){e.restore(),e.save(),e.beginPath();var n=(0,it.ti)(t),a=n[0],i=n[1],r=n[2],o=n[3];e.moveTo(a.x,a.y),e.lineTo(i.x,i.y),e.lineTo(r.x,r.y),e.lineTo(o.x,o.y),e.clip()}}(e.getContext("2d"),i),null==a||a.onCanvasDimensionsUpdated(e)}},[e,i,n,a]);(0,Ri.w)(n,r)}(N,F,M,a),function(e,n,a){(0,t.useEffect)(function(){var t=(0,rt.GM)((0,it.XG)((0,it.W3)(1/a),n));null==e||e.setDrawingBounds(t)},[n,a,e])}(M,a,i),function(e,n,a){(0,t.useEffect)(function(){a&&n||e({})},[e,a,n])}(x,O,C),function(e,n,a,i,r,o,s,c,d){var l=(0,t.useState)(!1),u=l[0],f=l[1],p=(0,t.useContext)(go.B_).enableMarkupKeyboarding,m=(0,t.useCallback)(function(e){var t,a=null!==(t=c.startPoint)&&void 0!==t?t:{x:n.x,y:n.y},i=(0,ot.Tf)(n,f6({x:0,y:0},e));d({startPoint:a,endPoint:i})},[n,d,c.startPoint]),_=(0,t.useCallback)(function(e){if(e&&c.startPoint&&c.endPoint){var t=new t6,n=u6(e,c.startPoint);t.points.push(n);var a=u6(e,c.endPoint);return t.points.push(a),t}},[c]),h=(0,t.useCallback)(function(e){var t=_(e);t&&a({points:t.points,drawingAttributes:c6(o),arrowMode:o.strokeShape.arrowMode||E_.x.NoArrow,contentType:zo.A.InkContent,invertedPhysicalImageTransformDuringContentSerialization:(0,it.XG)((0,it.iE)(i),(0,it.W3)(r))}),d({})},[o,a,d,_,r,i]),b=(0,t.useMemo)(function(){return[{code:"KeyD",keyCode:or.bC.D,handler:function(t,n){t?(s(!1),e({x:1}),u&&m({x:1})):u&&h(n)},ctrlKey:!1,shiftKey:!1},{code:"KeyA",keyCode:or.bC.A,handler:function(t,n){t?(s(!1),e({x:-1}),u&&m({x:-1})):u&&h(n)},ctrlKey:!1,shiftKey:!1},{code:"KeyS",keyCode:or.bC.S,handler:function(t,n){t?(s(!1),e({y:1}),u&&m({y:1})):u&&h(n)},ctrlKey:!1,shiftKey:!1},{code:"KeyW",keyCode:or.bC.W,handler:function(t,n){t?(s(!1),e({y:-1}),u&&m({y:-1})):u&&h(n)},ctrlKey:!1,shiftKey:!1},{code:"ArrowRight",keyCode:or.bC.ArrowRight,handler:function(t,n){t?(s(!1),e({x:1}),u&&m({x:1})):u&&h(n)},ctrlKey:!0,shiftKey:!1},{code:"ArrowLeft",keyCode:or.bC.ArrowLeft,handler:function(t,n){t?(s(!1),e({x:-1}),u&&m({x:-1})):u&&h(n)},ctrlKey:!0,shiftKey:!1},{code:"ArrowDown",keyCode:or.bC.ArrowDown,handler:function(t,n){t?(s(!1),e({y:1}),u&&m({y:1})):u&&h(n)},ctrlKey:!0,shiftKey:!1},{code:"ArrowUp",keyCode:or.bC.ArrowUp,handler:function(t,n){t?(s(!1),e({y:-1}),u&&m({y:-1})):u&&h(n)},ctrlKey:!0,shiftKey:!1},{code:"KeyD",keyCode:or.bC.D,handler:function(t){t&&(s(!1),e({x:1}),m({x:1}))},ctrlKey:!1,shiftKey:!0},{code:"KeyA",keyCode:or.bC.A,handler:function(t){t&&(s(!1),e({x:-1}),m({x:-1}))},ctrlKey:!1,shiftKey:!0},{code:"KeyS",keyCode:or.bC.S,handler:function(t){t&&(s(!1),e({y:1}),m({y:1}))},ctrlKey:!1,shiftKey:!0},{code:"KeyW",keyCode:or.bC.W,handler:function(t){t&&(s(!1),e({y:-1}),m({y:-1}))},ctrlKey:!1,shiftKey:!0},{code:"ArrowRight",keyCode:or.bC.ArrowRight,handler:function(t){t&&(s(!1),e({x:1}),m({x:1}))},ctrlKey:!0,shiftKey:!0},{code:"ArrowLeft",keyCode:or.bC.ArrowLeft,handler:function(t){t&&(s(!1),e({x:-1}),m({x:-1}))},ctrlKey:!0,shiftKey:!0},{code:"ArrowDown",keyCode:or.bC.ArrowDown,handler:function(t){t&&(s(!1),e({y:1}),m({y:1}))},ctrlKey:!0,shiftKey:!0},{code:"ArrowUp",keyCode:or.bC.ArrowUp,handler:function(t){t&&(s(!1),e({y:-1}),m({y:-1}))},ctrlKey:!0,shiftKey:!0},{code:"ShiftLeft",keyCode:or.bC.Shift,handler:function(e,t){e||h(t)},ctrlKey:!1,shiftKey:!1},{code:"ShiftLeft",keyCode:or.bC.Shift,handler:function(e,t){e||h(t)},ctrlKey:!0,shiftKey:!1},{code:"Space",keyCode:or.XG,handler:function(e){f(e)},ctrlKey:!1,shiftKey:!1},{code:"Space",keyCode:or.XG,handler:function(e){f(e)},ctrlKey:!0,shiftKey:!1}]},[s,e,m,h,u]);ir(window,p?b:[],!0)}(g,y,v,r,i,_,D,I,x),n().createElement("div",{ref:H,style:{width:c,height:d,position:"absolute",top:0,left:0}},n().createElement("canvas",{ref:B,width:o,height:s,style:p6({touchAction:"none",pointerEvents:"none",position:"absolute",top:0,left:0},l)}))}),_6=function(){return _6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_6.apply(this,arguments)},h6=function(){return h6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h6.apply(this,arguments)};function b6(e,t){if((null==e?void 0:e.contentType)===zo.A.TextContent){if(t&&"text"in t&&"string"==typeof t.text&&"styles"in t){var n=function(e){return(0,it.XG)(e.fabricToViewTransform,(0,it.iE)((0,it.Ls)((0,it.Vt)(e.calcTransformMatrix()))))}(t);return h6(h6({},e),{text:t.text,drawingAttributes:h6(h6({},t.toObject()),{styles:t.styles}),invertedPhysicalImageTransformDuringContentSerialization:n})}throw new Error("Fabric Textbox not found")}throw new Error("Unhandled Fabric Object type:"+(null==t?void 0:t.type))}var g6,v6=function(){return v6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},v6.apply(this,arguments)},y6={bottomLeft:"bl",bottomRight:"br",middleBottom:"mb",middleLeft:"ml",middleRight:"mr",middleTop:"mt",topLeft:"tl",topRight:"tr",rotationHandle:"mtr"};function S6(e,t){var n=e.textLines.length-1,a=e._measureWord([" "],0,0);return e.textLines.reduce(function(n,a,i){return n+e._measureWord(t.util.string.graphemeSplit(a),i,n+a.length)},0)+n*a}class D6{constructor(e,t,n){this.arrowLength=e*Math.cos(t/2),this.arrowWidth=e*Math.sin(t/2),this.directionThreshold=n}getArrowhead(e){const t=this.getDirection();if(null===t)return null;const n=Math.sqrt(P2(t,t)),a={x:t.x/n,y:t.y/n},i=-a.y,r=a.x,o=Object.assign(Object.assign({},e),{pressure:this.getPressure()});return{vertex:o,left:{x:o.x-this.arrowLength*a.x+this.arrowWidth*i,y:o.y-this.arrowLength*a.y+this.arrowWidth*r,pressure:o.pressure,tiltX:o.tiltX,tiltY:o.tiltY,timestamp:o.timestamp},right:{x:o.x-this.arrowLength*a.x-this.arrowWidth*i,y:o.y-this.arrowLength*a.y-this.arrowWidth*r,pressure:o.pressure,tiltX:o.tiltX,tiltY:o.tiltY,timestamp:o.timestamp}}}}class I6 extends D6{constructor(e,t,n){super(e,t,n),this.candidatePoints=[]}addPoint(e){if(0===this.candidatePoints.length)this.candidatePoints.push(e);else{for(;this.candidatePoints.length>0&&Math.sqrt(U2(this.candidatePoints[0],e))>this.directionThreshold;)this.nearestPointFartherThanThreshold=this.candidatePoints[0],this.candidatePoints.shift();this.candidatePoints.push(e)}}getDirection(){return void 0===this.nearestPointFartherThanThreshold?null:T2(this.candidatePoints[this.candidatePoints.length-1],this.nearestPointFartherThanThreshold)}getPressure(){return Math.max(...Array.from(this.candidatePoints).map(e=>e.pressure),this.nearestPointFartherThanThreshold.pressure)}}class x6 extends D6{constructor(e,t,n){super(e,t,n),this.pressure=h2,this.nextPoints=[]}addPoint(e){0===this.nextPoints.length?(this.nextPoints.push(e),this.pressure=e.pressure):1===this.nextPoints.length&&(this.pressure=Math.max(this.pressure,e.pressure),Math.sqrt(U2(this.nextPoints[0],e))>this.directionThreshold&&this.nextPoints.push(e))}getDirection(){return this.nextPoints.length<=1?null:T2(this.nextPoints[0],this.nextPoints[1])}getPressure(){return this.pressure}}class C6 extends D6{constructor(){super(...arguments),this.initialPoint=null,this.psudoStartPoint=null,this.psudoEndPoint=null}addPoint(e){null!==this.initialPoint&&null!==this.psudoEndPoint&&null!==this.psudoStartPoint||(this.initialPoint=this.psudoStartPoint=this.psudoEndPoint=e),((e.x-this.initialPoint.x)*(this.psudoEndPoint.x-this.psudoStartPoint.x)<0||(e.y-this.initialPoint.y)*(this.psudoEndPoint.y-this.psudoStartPoint.y)<0)&&([this.psudoStartPoint,this.psudoEndPoint]=[this.psudoEndPoint,this.psudoStartPoint]),(Math.abs(e.x-this.initialPoint.x)>Math.abs(this.psudoEndPoint.x-this.initialPoint.x)||Math.abs(e.y-this.initialPoint.y)>Math.abs(this.psudoEndPoint.y-this.initialPoint.y))&&(this.psudoEndPoint=e)}getDirection(){return null===this.initialPoint||null===this.psudoEndPoint||null===this.psudoStartPoint||Math.sqrt(U2(this.psudoEndPoint,this.psudoStartPoint))<this.directionThreshold?null:T2(this.psudoEndPoint,this.psudoStartPoint)}getStartPoint(){return this.psudoStartPoint}getEndPoint(){return this.psudoEndPoint}}class O6 extends C6{getArrowhead(){const e=this.getStartPoint();return e?super.getArrowhead(e):null}getPressure(){var e,t;return null!==(t=null===(e=this.getStartPoint())||void 0===e?void 0:e.pressure)&&void 0!==t?t:h2}getDirection(){const e=super.getDirection();return e?{x:-1*(t=e).x,y:-1*t.y}:null;var t}}class w6 extends C6{getArrowhead(e){const t=this.getEndPoint();return t?super.getArrowhead(t):null}getPressure(){var e,t;return null!==(t=null===(e=this.getEndPoint())||void 0===e?void 0:e.pressure)&&void 0!==t?t:h2}}class E6{constructor(e,t,n,a,i){this.strokeLengthThreshold=n,this.isStraightLine=i,this.startArrowAdder=new x6(e,t,a),this.startArrowAdderForStraightLine=new O6(e,t,a),this.endArrowAdder=i?new w6(e,t,a):new I6(e,t,a),this.pendingPoints=[],this.strokeLength=0}beginStroke(e){this.prevPoint=e,this.endArrowAdder.addPoint(e),this.isStraightLine?this.startArrowAdderForStraightLine.addPoint(e):this.startArrowAdder.addPoint(e),this.pendingPoints.push(e)}addPoint(e){this.strokeLength+=Math.sqrt(U2(e,this.prevPoint)),this.isStraightLine?this.startArrowAdderForStraightLine.addPoint(e):this.startArrowAdder.addPoint(e),null!==this.startArrowAdder.getDirection()&&this.strokeLength>this.strokeLengthThreshold?this.validateAndAddStartArrowhead(!this.isStraightLine):this.pendingPoints.push(e),this.endArrowAdder.addPoint(e),0===this.pendingPoints.length&&this.output.addPoint(e),this.prevPoint=e}endStroke(e){if(this.strokeLength+=Math.sqrt(U2(e,this.prevPoint)),this.isStraightLine?(this.startArrowAdderForStraightLine.addPoint(e),this.addStartArrowheadForStraightLine(this.strokeLength>this.strokeLengthThreshold)):(this.startArrowAdder.addPoint(e),this.validateAndAddStartArrowhead(this.strokeLength>this.strokeLengthThreshold)),this.endArrowAdder.addPoint(e),this.strokeLength>this.strokeLengthThreshold){const t=this.endArrowAdder.getArrowhead(e);null!==t&&(this.output.addPoint(t.vertex),this.output.addPoint(t.left),this.output.addPoint(t.vertex),this.output.addPoint(t.right),this.output.addPoint(t.vertex))}this.output.endStroke(e)}validateAndAddStartArrowhead(e){0!==this.pendingPoints.length&&(this.pendingPoints.forEach((t,n)=>{if(0===n){this.output.beginStroke(t);const n=this.startArrowAdder.getArrowhead(t);null!==n&&e&&(this.output.addPoint(n.vertex),this.output.addPoint(n.left),this.output.addPoint(n.vertex),this.output.addPoint(n.right),this.output.addPoint(n.vertex))}else this.output.addPoint(t)}),this.pendingPoints=[])}addStartArrowheadForStraightLine(e){this.pendingPoints.forEach(e=>{this.output.addPoint(e)}),this.pendingPoints=[];const t=this.startArrowAdderForStraightLine.getArrowhead();null!==t&&e&&(this.output.addPoint(t.vertex),this.output.addPoint(t.left),this.output.addPoint(t.vertex),this.output.addPoint(t.right),this.output.addPoint(t.vertex))}}class A6{constructor(e,t,n,a,i){this.strokeLengthThreshold=n,this.endArrowAdder=i?new w6(e,t,a):new I6(e,t,a),this.strokeLength=0}beginStroke(e){this.prevPoint=e,this.endArrowAdder.addPoint(e),this.output.beginStroke(e)}addPoint(e){this.strokeLength+=Math.sqrt(U2(e,this.prevPoint)),this.endArrowAdder.addPoint(e),this.prevPoint=e,this.output.addPoint(e)}endStroke(e){if(this.strokeLength+=Math.sqrt(U2(e,this.prevPoint)),this.endArrowAdder.addPoint(e),this.strokeLength>this.strokeLengthThreshold){const t=this.endArrowAdder.getArrowhead(e);null!==t&&(this.output.addPoint(t.vertex),this.output.addPoint(t.left),this.output.addPoint(t.vertex),this.output.addPoint(t.right),this.output.addPoint(t.vertex))}this.output.endStroke(e)}}!function(e){e[e.NoArrow=0]="NoArrow",e[e.InkSingleArrow=1]="InkSingleArrow",e[e.InkDoubleArrow=2]="InkDoubleArrow"}(g6||(g6={}));const L6=3*Math.sqrt(2),k6=Math.PI/2;class M6{constructor(e=1){this.path="",this.precision=e}beginPath(){this.path=""}arc(e,t,n){const a=this.format(n),i=this.format(t),r=this.format(e-n),o=this.format(e+n);this.path+=`M${r},${i}`,this.path+=`A${a},${a} 0 0,1 ${o},${i}`,this.path+=`A${a},${a} 0 0,1 ${r},${i}`}circularArc(e,t,n,a,i,r,o,s,c){this.path+=`A${this.format(i)},${this.format(i)} 0 ${s?1:0} ${c?0:1} ${this.format(r)},${this.format(o)}`}lineTo(e,t){this.path+=`L${this.format(e)},${this.format(t)}`}moveTo(e,t){this.path+=`M${this.format(e)},${this.format(t)}`}closePath(){}getPath(){return this.path}format(e){return t=e,n=this.precision,`${parseFloat(t.toFixed(n))}`;var t,n}}var P6=function(){return P6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},P6.apply(this,arguments)};function T6(e,t,n){for(var a=Number.POSITIVE_INFINITY,i=e,r=0,o=t;r<o.length;r++){var s=o[r];if(s!==e){var c=U2(s,e);c<a&&(a=c,i=P6(P6({},e),{x:s.x,y:s.y}))}}return a<n?i:e}var U6=function(){function e(e,t,n,a){void 0===a&&(a=1),this.attributes=e,this.svgPathBuilder=new M6(a),this.snappingPoints=this.getMarkupContentStartAndEndPoints(t),this.lineMode=n}return e.prototype.beginStroke=function(e){this.output="ellipse"===this.attributes.tip?new Py(this.svgPathBuilder,this.attributes):new qy(this.svgPathBuilder,this.attributes),this.output.beginStroke(this.lineMode===gy.y.StraightLine?T6(e,this.snappingPoints,25):e)},e.prototype.addPoint=function(e){this.output.addPoint(e)},e.prototype.endStroke=function(e){this.output.endStroke(this.lineMode===gy.y.StraightLine?T6(e,this.snappingPoints,25):e)},e.prototype.getSvgAttributes=function(){var e=new Ay;return{path:this.svgPathBuilder.getPath(),fill:e.toCSSColor(this.attributes.color)}},e.prototype.getMarkupContentStartAndEndPoints=function(e){for(var t=[],n=0,a=e;n<a.length;n++){var i=a[n];if(i.contentType===zo.A.InkContent){var r=i.points;t.push(r[0]),t.push(r[r.length-1])}}return t},e}(),F6=function(){return F6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F6.apply(this,arguments)},H6=function(){return H6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H6.apply(this,arguments)};var R6=function(){return R6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},R6.apply(this,arguments)},N6=(0,t.memo)(function(e){var a=(0,t.useContext)(B3).fabric,i=(0,t.useContext)(V3).wetInkCanvas,r=null==i?void 0:i.getLineMode(),o=(0,t.useContext)(go.B_),c=o.showWetCanvas,d=o.enableMarkupKeyboarding,l=(0,t.useMemo)(function(){if(a)return function(e,t,n,a,i){return void 0===i&&(i=gy.y.FreeHand),function(r){return function(e,t,n,a,i,r){switch(t.contentType){case zo.A.InkContent:return function(e,t,n,a,i){var r=function(e,t,n){var a=e.points,i=e.drawingAttributes,r=e.arrowMode,o=F6(F6({},i),{effect:uy}),c=function(e,t){var n=new t6;return n.points=e,n.drawingAttributes=t,n}(a,o),d=i.width,l=new U6(o,t,n);if(r===E_.x.NoArrow)c.streamPath(l);else{var u=function(e,t,n){var a,i,r,o,s;const c=t*(null!==(a=null==n?void 0:n.arrowSize)&&void 0!==a?a:L6),d=null!==(i=null==n?void 0:n.arrowAngle)&&void 0!==i?i:k6,l=null!==(r=null==n?void 0:n.directionThreshold)&&void 0!==r?r:5,u=null!==(o=null==n?void 0:n.strokeLengthThreshold)&&void 0!==o?o:25,f=null!==(s=null==n?void 0:n.isStraightLine)&&void 0!==s&&s;if(d<0||d>=Math.PI)return null;switch(e){case g6.InkSingleArrow:return new A6(c,d,u,l,f);case g6.InkDoubleArrow:return new E6(c,d,u,l,f);case g6.NoArrow:default:return null}}(function(e){switch(e){case E_.x.NoArrow:return g6.NoArrow;case E_.x.SingleArrow:return g6.InkSingleArrow;case E_.x.DoubleArrow:return g6.InkDoubleArrow;default:throw new s.x(e)}}(r),d,{strokeLengthThreshold:0});if(null===u)throw new Error("Arrow head transformer should not be null");f2(u,l),c.streamPath(u)}return l.getSvgAttributes()}(t,a,i),o=function(e,t,n){var a=t.path;return new e.Path(a,H6({},n))}(e,r,{selectable:!1,hoverCursor:"default",fill:r.fill,id:t.id});return t2(e,n,t.invertedPhysicalImageTransformDuringContentSerialization,o),o}(e,t,a,i,r);case zo.A.TextContent:return function(e,t,n,a){var i=new(function(e){return e.util.createClass(e.Textbox,{initialize:function(e,t){var n=this;this.callSuper("initialize",e,t),this.dashedBorderBackgroundCssColor=null==t?void 0:t.dashedBorderBackgroundCssColor,this.hoverBorderCssColor=null==t?void 0:t.hoverBorderCssColor;var a=null==t?void 0:t.controlsVisibility;a&&Object.entries(y6).forEach(function(e){var t,i=e[0],r=e[1],o=null===(t=a[i])||void 0===t||t;n.setControlVisible(r,o)}),this.addMouseListeners(),this.addEditingListeners()},getBorderScaleFactor:function(){return void 0===this.borderScaleFactor?1:this.borderScaleFactor},drawBorders:function(e,t){return this.borderDashArray&&this.dashedBorderBackgroundCssColor&&this.renderDashedBorderBackgroundColor(e),this.callSuper("drawBorders",e,t)},addMouseListeners:function(){var e=this;this.on("mouseover",function(){var t,n;(null===(n=null===(t=e.canvas)||void 0===t?void 0:t.getActiveObject())||void 0===n?void 0:n.id)!==e.id&&e.drawHoverBorders()}),this.on("mousedown",function(){var t;null===(t=e.canvas)||void 0===t||t.requestRenderAll()}),this.on("mouseout",function(){var t;null===(t=e.canvas)||void 0===t||t.requestRenderAll()}),this.on("selected",function(){e.hoverCursor="text"}),this.on("deselected",function(){e.hoverCursor=void 0})},addEditingListeners:function(){var e=this;this.on("editing:entered",function(){e.hasControls=!0})},drawControls:function(e){var t=this.getBorderScaleFactor(),n=e.arc;e.arc=function(a,i,r,o,s,c){e.lineWidth=t,n.call(e,a,i,r,o,s,c)};var a=this.callSuper("drawControls",e);return e.arc=n,a},toObject:function(e){return this.callSuper("toObject",function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}(["hoverBorderCssColor","borderColor","editingBorderColor","dashedBorderBackgroundCssColor","borderScaleFactor","borderDashArray","cornerStyle","cornerColor","cornerStrokeColor","transparentCorners","controlsVisibility","width"],e||[],!0))},fire:function(e,t){return(null==t?void 0:t.target)?this.callSuper("fire",e,t):this.callSuper("fire",e,v6(v6({},t),{target:this}))},renderDashedBorderBackgroundColor:function(e){var t=this.getBorderScaleFactor(),n=this.getScaledWidth()+t,a=this.getScaledHeight()+t;e.save(),e.strokeStyle=this.dashedBorderBackgroundCssColor||"#000",e.strokeRect(-.5*n,-.5*a,n,a),e.restore()},drawHoverBorders:function(){var e,t=null===(e=this.canvas)||void 0===e?void 0:e.getContext();if(t){var n=this.getBoundingRect(),a=n.left,i=n.top,r=n.width,o=n.height;t.save(),t.strokeStyle=this.hoverBorderCssColor||"#000",t.lineWidth=3,t.beginPath(),t.rect(a,i,r,o),t.stroke(),t.restore()}}})}(e))(t.text,function(e){return e.drawingAttributes?_6(_6({},e.drawingAttributes),{id:e.id}):{fill:Os.e9,borderColor:"#000",editingBorderColor:"#000",dashedBorderBackgroundCssColor:"#fff",borderScaleFactor:2,borderDashArray:[5,5],cornerStyle:"circle",transparentCorners:!1,cornerColor:"#fff",cornerStrokeColor:"#000",hasControls:!0,controlsVisibility:{middleBottom:!1,middleTop:!1},fontSize:36,hoverBorderCssColor:"#0fb7ff",id:e.id}}(t));return["changed","modified"].forEach(function(e){i.on(e,function(e){var a,i;null===(i=null===(a=e.target)||void 0===a?void 0:a.updateFabricToViewTransform)||void 0===i||i.call(a),n(b6(t,e.target))})}),i.on("added",function(i){var r,o=i.target,s=null==o?void 0:o.canvas,c=t.initialPosition.positionType;if(s){if(s.setActiveObject(o),!t.drawingAttributes){switch(c){case"CenteredOnCanvas":s.centerObject(o);break;case"AtLocation":o.setPositionByOrigin(new e.Point(t.initialPosition.left||0,t.initialPosition.top||0),"left","top"),o.setCoords();break;default:throw new Error("Unexpected creationType:"+c)}o.set({width:S6(o,e)}),o.enterEditing(),o.selectAll(),null===(r=o.hiddenTextarea)||void 0===r||r.focus()}t2(e,a,t.invertedPhysicalImageTransformDuringContentSerialization,o),o.updateFabricToViewTransform=function(){o.fabricToViewTransform=Y3(o,a)},n(b6(t,o),!1)}}),i.on("removed",function(){i.off()}),i}(e,t,n,a);default:throw new Error("To be implemented for ".concat(t.contentType))}}(e,r,a,t,n,i)}}(a,e.imageViewTransform,e.markupContentItems,e.updateMarkupContent,r)},[a,e.imageViewTransform,e.markupContentItems,r,e.updateMarkupContent]),u=(0,t.useState)(void 0),f=u[0],p=u[1],m=d&&(0,Mo.B)(e.activeMarkupToolType)&&e.isKeyboardInputActive;return n().createElement("div",{style:{cursor:m?"none":e.cursor,display:e.hidden?"none":void 0}},n().createElement(u2,R6({},e,{convertToFabricContent:l,pointerIdToCaptureWhenEraserBrushIsCreated:f,setPointerIdToCaptureWhenEraserBrushIsCreated:p})),c&&n().createElement(m6,R6({},e,{setPointerIdToCaptureWhenEraserBrushIsCreated:p})))}),B6=(0,t.memo)(function(e){var n=e.inkBrush;return function(e,n){(0,t.useLayoutEffect)(function(){e&&e.updateInkAttributes(n)},[e,n])}((0,t.useContext)(V3).wetInkCanvas,n),null}),j6=function(){return j6=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},j6.apply(this,arguments)},V6=(0,t.memo)(function(e){var a=e.imageViewTransform,i=e.cssToPhysicalPixelRatio,r=e.addInkContent,o=e.inkBrush,s=e.shouldOmitInkContent,c=(0,t.useContext)(V3).wetInkCanvas,d=(0,t.useContext)(B3).fabric;return function(e,n){(0,t.useEffect)(function(){return e&&e.setCollectedWetStrokesSink({add:function(e){n(e)}}),function(){null==e||e.clearCollectedWetStrokesSink()}},[e,n])}(c,(0,t.useCallback)(function(e){if(d){var t=e;(!s||!s(t))&&r(j6(j6({},t),{arrowMode:o.strokeShape.arrowMode||E_.x.NoArrow,contentType:zo.A.InkContent,invertedPhysicalImageTransformDuringContentSerialization:(0,it.XG)((0,it.iE)(a),(0,it.W3)(i))}))}},[r,i,d,a,o.strokeShape,s])),n().createElement(B6,j6({},e))}),z6={Pen:{cssThicknesses:[1,2,4,6,8,12],minSliderValue:1},Highlighter:{cssThicknesses:[8,12,16,24,28,32],minSliderValue:1}},G6=function(e){var a=e.children,i=(0,t.useState)(null),r=i[0],o=i[1],s=(0,Or.Dj)(),c=(0,t.useCallback)(function(){Promise.all([I.e(170),I.e(703)]).then(I.t.bind(I,5170,23)).then(function(e){o(e.default.fabric)}).catch(function(e){return s({id:"CodeSplitFailed",message:"Failed to load Fabric package"})})},[s]);return n().createElement(B3.Provider,{value:{fabric:r,loadFabric:c}},a)};function K6(){return Promise.all([I.e(170),I.e(703)]).then(I.t.bind(I,5170,23))}var W6={markup_markupToolbarPenTooltip:"",markup_markupToolbarPenAriaLabel:"",markup_markupToolbarPenAriaDescription:"",markup_markupToolbarEraserTooltip:"",markup_markupToolbarEraserAriaLabel:"",markup_markupToolbarEraserAriaDescription:"",markup_markupToolbarHighlighterTooltip:"",markup_markupToolbarHighlighterAriaLabel:"",markup_markupToolbarHighlighterAriaDescription:"",markup_markupToolbarClearAllMarkupTooltip:"",markup_markupToolbarClearAllMarkupAriaLabel:"",markup_markupToolbarThickness:"",markup_clearAllMarkupDialogCloseButtonAriaLabel:"",markup_clearAllMarkupDialogTitle:"",markup_clearAllMarkupDialogSubText:"",markup_clearAllMarkupDialogConfirmButtonText:"",markup_clearAllMarkupDialogConfirmButtonAriaLabel:"",markup_clearAllMarkupDialogCancelButtonText:"",markup_clearAllMarkupDialogCancelButtonAriaLabel:"",markup_markupToolbarBrushFormatString:"",markup_markupToolbarBrushFormatWithArrowModeString:"",markup_markupToolbarTooltipChangeInkProperties:"",markup_inkThicknessSliderHeaderLabel:"",markup_inkThicknessSliderAriaLabel:"",markup_addedInkStrokeAriaLive:"",markup_removedInkStrokesAriaLive:"",markup_clearedAllMarkupAriaLive:"",markup_inkPenThicknessSliderAriaLabel:"",markup_inkHighlighterThicknessSliderAriaLabel:"",markup_inkThicknessSliderTitle:"",markup_markupToolbarAriaLandmark:"",markup_colorDarkYellow:"",markup_colorLightOrange:"",markup_colorOrange:"",markup_colorRed:"",markup_colorDarkPurple:"",markup_colorPurple:"",markup_colorMagenta:"",markup_colorDarkRed:"",markup_colorLightBlue:"",markup_colorBlue:"",markup_colorDarkBlue:"",markup_colorLightGreen:"",markup_colorGreen:"",markup_colorLightGray:"",markup_colorGray:"",markup_colorBlack:"",markup_colorTableAriaLabel:"",markup_noArrowButtonText:"",markup_straightNoArrowButtonTooltip:"",markup_straightNoArrowButtonAriaLabel:"",markup_singleArrowButtonText:"",markup_straightSingleArrowButtonTooltip:"",markup_straightSingleArrowButtonAriaLabel:"",markup_doubleArrowButtonText:"",markup_straightDoubleArrowButtonTooltip:"",markup_straightDoubleArrowButtonAriaLabel:"",markup_freehandNoArrowButtonTooltip:"",markup_freehandNoArrowButtonAriaLabel:"",markup_freehandSingleArrowButtonTooltip:"",markup_freehandSingleArrowButtonAriaLabel:"",markup_freehandDoubleArrowButtonTooltip:"",markup_freehandDoubleArrowButtonAriaLabel:"",markup_markupToolbarNoArrowTip:"",markup_markupToolbarSingleArrowTip:"",markup_markupToolbarDoubleArrowTip:"",markup_strokeShapeCalloutHeaderText:"",markup_strokeShapeCalloutMainText:"",markup_strokeShapeToastText:"",markup_freehandLine:"",markup_straightLine:"",markup_textboxDefaultContent:"",markup_textBoxInvalidInputTypeErrorMessage:"",markup_textBoxInvalidInputRangeErrorMessage:"",markup_panelLabel:""};function q6(e){var t;return null!==(t=null==e?void 0:e.markupToolbarPosition)&&void 0!==t?t:"Bottom"}var Q6=function(e){var a=e.enableMarkup,i=void 0===a||a,r=e.inkConfigurations,o=void 0===r?z6:r,s=e.localizationStrings,c=void 0===s?W6:s,d=e.getMarkupToolbarPosition,l=void 0===d?q6:d,u=e.initialMarkupToolsConfigurations,f=void 0===u?Vl.s:u,p=e.markupToolbarStyles,m=void 0===p?void 0:p,_=e.enableArrowhead,h=void 0!==_&&_,b=e.enableStraightLineMarkup,g=void 0!==b&&b,v=e.onClearAllMarkupConfirmationDialog,y=void 0===v?void 0:v,S=e.isStrokeShapeCalloutEnabled,D=void 0===S?g:S,I=e.enableMarkupKeyboarding,x=void 0!==I&&I,C=e.children,O=(0,t.useState)(go.BU),w=O[0],E=O[1],A=(0,t.useState)(!1),L=A[0],k=A[1],M=(0,t.useState)(!0),P=M[0],T=M[1],U=Kl(f);return n().createElement(go.B_.Provider,{value:{enableMarkup:i,Canvas:N6,canvasMethods:w,setCanvasMethods:E,InkCanvasInteraction:V6,inkConfigurations:o,getMarkupToolbarPosition:l,localizationStrings:c,scriptsToLoadJSBundles:[K6],markupToolsConfigurations:U,markupToolbarStyles:m,enableArrowhead:h,enableStraightLineMarkup:g,showWetCanvas:P,setShowWetCanvas:T,wetCanvasIsReady:L,setWetCanvasIsReady:k,onClearAllMarkupConfirmationDialog:y,isStrokeShapeCalloutEnabled:D,enableMarkupKeyboarding:x}},n().createElement(z3,null,n().createElement(G6,null,n().createElement(j3,null,C))))},Y6=I(2207),J6=I(9773),X6=I(2910),Z6=I(8819),$6=I(9676);function e7(){return $6._SPKillSwitch.isActivated("206fa16f-84fe-4d43-9d7f-55f3523ad796")}function t7(){return $6._SPKillSwitch.isActivated("96aaa9ce-24cc-4048-8433-e18f6aff7aaf")}const n7=JSON.parse('{"K8b":"","AzJ":"","pVE":"","oXO":"","V2t":"","oct":"","shn":"","N84":"","KjL":"","xe4":"","MlP":"","wyN":"","bCn":"","l1$":"?","d0h":"","tP7":"","knW":"","C6T":"","NKu":"","pnZ":"{0}: {1}{2}: {3}{4}","Xhp":"{0}: {1}{2}: {3}{4}  {5}","_GC":"","xRU":"","FnW":"","uTJ":"{0}{1} {2}","Vpi":" {0} ( {1} )","itZ":"","jHp":"","Um_":"","YpF":"","Wrr":"","trl":"","sEv":"","rSO":"","EIc":"","Ci4":"","NF7":"","oTl":"","ZsY":"","qr9":"","r5d":"","qUv":"","L0Y":"","GIz":"","TPG":"","Vu_":"","ZUF":"","opz":"","kqk":"","Kgk":"","dHW":"","lhO":"","W59":"","lYM":"","$MK":"","q8t":"","tgf":"","ZDb":"","TVn":"","qM2":"","_l_":"","ZY5":"","B3j":"","yWX":"","d_o":"","g6$":"","wXF":"","N$F":" Shift ","HJ1":"","$yE":"","Luw":"","hKx":"","Ml5":"","Igh":" {0}  {1} ","lYo":"","YPD":"","ZRA":"","xeW":"","$qL":"","BiZ":"","ilV":"","qej":"","mA9":"","Go7":"","HWc":"","UhG":"","VG0":"","NKY":"","WMj":"","BiS":"{0}  {1}","$3G":"{0}  {1}","IOh":"{0}{1}","_kR":"{0}","DXS":"","cr_":"{0}  {1}","pYP":"","bXz":"","HHc":"","B5o":"","JUN":"","kNC":"","Lwh":"","qXc":"","E8n":"{0} : {1}","tg5":"{0} x {1} ","fos":" Enter ","hSt":" {0}","BsR":"","$93":"","Vfu":"","bPZ":"","CnP":"","Gvu":"","lSx":"","ViR":"","CJ4":" {0} ","Qq_":"","RA0":"","cAm":"","rjE":"","D0F":"","xqz":" {0}  {1}","a38":" {0}  {1}","EoZ":" {0}  {1}","XtO":" {0}  {1}","yYZ":"","QVJ":"","L$y":"","SPc":" {0}  {1} ","j5Y":" {0}  {1} ","R9w":"","dUA":"","RP":"","DFv":"{0} ","ZzB":"{0} x {1}","HRu":"{0} x {1} ","_AD":" {0}  {1} ","Zl1":"{2}  {3} ;  {0}  {1} ","dlI":"","MB$":"","YX6":"","ufY":"{0} {1}","Qau":"","RWW":"","ThW":"","pvf":"","PHs":"","VGj":"","ipD":"","wzs":"","pvx":"","c5Q":"","eTk":"","F_1":"","kj6":"","dDu":"","Oi$":"","sum":"","Ifh":"","Uz1":"","Ddi":"","xs7":"","k76":" {0} ","ykZ":" {0}  {1}","drg":"{0} ","G1y":"{0}  {1} ","yz$":"","EQZ":" {0} ","U_g":"","Kzb":"{0} {1}  {2}","p":"{0} ","N17":"{0}  {1}","Mez":"","_ty":"","wPm":"","$_c":"","sv4":"","VCL":"","xCZ":"","Yey":" {0}  {1} ","ycM":"","c38":"","wXe":"","Waw":"","xsz":"","eQC":"","M9I":"","aQM":"","GmK":"","Ag9":"","qap":"","hPr":"","R3D":"","$oR":"","nhX":"","b_k":"","zcO":"","vAc":"","wYc":"","E4X":" AI ","goL":"","YQv":" AI ","$vc":" AI ","sv3":" 90 ","yKQ":"","yr8":" 90 ","erC":" 90 ","jqB":"","wvb":" 90 ","aJ0":"","YSf":"","tbe":"","IJZ":"","iIh":"","me0":"","ucv":"","m6g":"","JjF":"","BO_":"","pIr":"","jY7":"","FSP":"","O2F":"","nOM":"","Zd":"","h1r":"","ujb":"","sAE":"","tii":" .png ","ofd":"","Yto":"","s9O":"","sOd":"","BiX":"","guW":"","nre":"","HX4":"?","nev":"","vQJ":"","tEZ":"","SpL":"","UiI":"","rYu":"","j5p":"","L3F":"","ZbN":"","wQi":"","NTp":"","Sn0":"","EF0":"","hUm":"","kRU":"","Jb1":"","en0":"","AA5":"","FXt":"","dgb":"","oTX":"(Ctrl + Z)","jlc":"","WqA":" (Ctrl + Y)","eZY":"{0} {1} ","ckQ":"{0} ","IqI":"{0} {1} ","gyw":"{0} ","fsJ":"{0} ","LqG":"{0} ","uM":" {0} ","fc9":" {0} ","Ywk":"{0} ","C1n":"{0} ","iuL":"{0} ","N$1":"{0} ","crX":"{0} ","MRI":"{0} ","Z9W":"{0} ","BFc":"{0} ","_2x":"{0} ","AGV":" ","Sfb":"","wSX":"","g5U":"","Bcx":"","ek_":"","VYV":"","eHL":" {0}","_SN":"","ngU":"","uOC":"","jz1":"","wEw":"","OnG":"","Wup":"","L7O":"","cAU":"","L7M":"","WX_":"","D1n":"","TFX":"","k1i":"","XKQ":"","onB":"...","$Pm":"","SGR":"","wgb":"","$hL":"","Hgn":"","NLt":"","AKO":"","BhP":"","ZHu":"","FEi":"","WWA":"","X8v":"","Mt5":"","FFp":" {0}","dDQ":" ","MO5":"!","V71":"...","bxc":"","AXG":"","hsY":" Enter ","kRE":"...","gXb":"!","PMK":"","u9V":" Enter ","Tb8":"","hcw":"","vPs":" Enter ","DgS":"","H_X":"","_45":"","Vxe":" Enter ","AGM":"","IlL":"","fu$":" {0} {1} {2} {3} {4} {5}","RpU":" {0} {1} {2} {3} {4} {5}","_Xt":" ","PLg":"","csb":" Enter ","PYd":"","mxb":"","$nw":"","rCL":"","CHh":"","xbb":"","A2q":"","jkr":"","EgG":"","YLP":"","PdZ":"","zxx":"","pOz":" {0}","MkJ":"","yck":"","wWd":"","zCJ":" {0}","eLY":"","RYS":"","yA5":"","rvd":" Enter ","tzA":" Enter ","R2$":"","xu2":"","QbE":"","i5f":"","f40":"","cNF":"","A82":"","tve":"","dKZ":"","BYz":"","L3b":" Enter  {0}","GCm":"","TRK":"","dO":"","RYD":"","gPu":"","zdS":"","l3y":" {0}%  {1}% ","sn7":"","s7Z":"","OXN":"{0}:{1}","IEv":" {0}  {1} ","PcN":"","a7b":" AI ","ujh":"","wH_":"","grj":"","uPq":"","znM":"{0} / 70 ","yar":"","NOm":" AI  - %HL%%HL%","_I5":" %HL%Microsoft %HL%%HL%%HL%","HPu":" Internet ","XuH":" Internet","wUq":"","vIv":"Microsoft ","SRU":" AI  Microsoft ","Eus":"Microsoft  AI %HL%%HL%","kkm":" Microsoft ","pf1":"%HL%%HL%","Adj":" MSA ","Nan":" Microsoft ","w_3":"%HL%%HL% ","vSO":" MSA ","XRL":"","vPB":" MSA ","qmJ":"Microsoft ","mlM":"","hrk":"","$q$":"","lfN":"","hdP":"","zzg":"","N$G":" AI ","ctu":"","IjZ":"","zvq":" AI ","s93":" AI Microsoft Store AI ","YiC":"","GcF":" AI ","k3G":" AI ","Srl":" AI ","XK6":"","KvY":" AI ","CPE":" AI ","dDh":" AI ","zYH":"","UvZ":"","tAh":" AI ","G0u":"AI ","EGp":" AI ","Owv":" AI ","ICQ":"","roX":"","uN8":"","q8T":"","jb":"","gK$":"","sM0":"Microsoft  AI %HL%%HL%","qKW":"","zwB":"","$2_":"","vl_":"","Mfd":"","xVU":"/","GND":"","$ap":"","uS$":"","QkW":"","JEz":"","moz":"","Pom":"","K9K":"","P_8":"","ZRc":"","GCW":"","eXj":"","XHp":"","$Bi":"","s1B":"","JZs":"","ciI":"","oAY":"","uj$":"","ms4":" {0} ","k$3":" {0} ","rmo":" {0} ","AVs":"{0}  {1} ","xNq":"{0} ","qRt":" {0} ","ZOG":"","T4Y":"","wZR":"","SFL":"","OGO":"","WaF":"","BX$":"","U_o":"{0}x","bWK":"{0}x. {2}  {1}","J1V":"1 ","JuZ":":","C74":":","BSU":"","D7H":" AI ","vtW":"","NUX":"","Rew":"","qtL":"","lhT":"","uKi":"","Hes":" 1  {0} {1} ","GsQ":"","K$v":"","Pie":" 1  {0} {1} ","d$O":"","DfC":"?","axL":"","f_7":"","BCQ":"","Gau":"","FKk":"","gLP":"","erH":"...","MT6":" {0} {1} ","sLo":"","clG":"","Rt_":"","I50":" {0}","W7d":"","bIQ":"","jbO":"","zMq":"?","Vo2":""}');var a7={markup_markupToolbarPenTooltip:n7.K8b,markup_markupToolbarPenAriaLabel:n7.AzJ,markup_markupToolbarPenAriaDescription:n7.pVE,markup_markupToolbarEraserTooltip:n7.oXO,markup_markupToolbarEraserAriaLabel:n7.V2t,markup_markupToolbarEraserAriaDescription:n7.oct,markup_markupToolbarHighlighterTooltip:n7.shn,markup_markupToolbarHighlighterAriaLabel:n7.N84,markup_markupToolbarHighlighterAriaDescription:n7.KjL,markup_markupToolbarClearAllMarkupTooltip:n7.xe4,markup_markupToolbarClearAllMarkupAriaLabel:n7.MlP,markup_markupToolbarThickness:n7.wyN,markup_clearAllMarkupDialogCloseButtonAriaLabel:n7.bCn,markup_clearAllMarkupDialogTitle:n7.l1$,markup_clearAllMarkupDialogSubText:n7.d0h,markup_clearAllMarkupDialogConfirmButtonText:n7.tP7,markup_clearAllMarkupDialogConfirmButtonAriaLabel:n7.knW,markup_clearAllMarkupDialogCancelButtonText:n7.C6T,markup_clearAllMarkupDialogCancelButtonAriaLabel:n7.NKu,markup_markupToolbarBrushFormatString:n7.pnZ,markup_markupToolbarBrushFormatWithArrowModeString:n7.Xhp,markup_markupToolbarTooltipChangeInkProperties:n7._GC,markup_inkThicknessSliderHeaderLabel:n7.xRU,markup_inkThicknessSliderAriaLabel:n7.FnW,markup_addedInkStrokeAriaLive:n7.uTJ,markup_removedInkStrokesAriaLive:n7.Vpi,markup_clearedAllMarkupAriaLive:n7.itZ,markup_inkPenThicknessSliderAriaLabel:n7.jHp,markup_inkHighlighterThicknessSliderAriaLabel:n7.Um_,markup_inkThicknessSliderTitle:n7.YpF,markup_markupToolbarAriaLandmark:n7.Wrr,markup_colorDarkYellow:n7.trl,markup_colorLightOrange:n7.sEv,markup_colorOrange:n7.rSO,markup_colorRed:n7.EIc,markup_colorDarkPurple:n7.Ci4,markup_colorPurple:n7.NF7,markup_colorMagenta:n7.oTl,markup_colorDarkRed:n7.ZsY,markup_colorLightBlue:n7.qr9,markup_colorBlue:n7.r5d,markup_colorDarkBlue:n7.qUv,markup_colorLightGreen:n7.L0Y,markup_colorGreen:n7.GIz,markup_colorLightGray:n7.TPG,markup_colorGray:n7.Vu_,markup_colorBlack:n7.ZUF,markup_colorTableAriaLabel:n7.opz,markup_noArrowButtonText:n7.kqk,markup_straightNoArrowButtonTooltip:n7.Kgk,markup_straightNoArrowButtonAriaLabel:n7.dHW,markup_singleArrowButtonText:n7.lhO,markup_straightSingleArrowButtonTooltip:n7.W59,markup_straightSingleArrowButtonAriaLabel:n7.lYM,markup_doubleArrowButtonText:n7.$MK,markup_straightDoubleArrowButtonTooltip:n7.q8t,markup_straightDoubleArrowButtonAriaLabel:n7.tgf,markup_freehandNoArrowButtonTooltip:n7.ZDb,markup_freehandNoArrowButtonAriaLabel:n7.TVn,markup_freehandSingleArrowButtonTooltip:n7.qM2,markup_freehandSingleArrowButtonAriaLabel:n7._l_,markup_freehandDoubleArrowButtonTooltip:n7.ZY5,markup_freehandDoubleArrowButtonAriaLabel:n7.B3j,markup_markupToolbarNoArrowTip:n7.yWX,markup_markupToolbarSingleArrowTip:n7.d_o,markup_markupToolbarDoubleArrowTip:n7.g6$,markup_strokeShapeCalloutHeaderText:n7.wXF,markup_strokeShapeCalloutMainText:n7.N$F,markup_strokeShapeToastText:n7.HJ1,markup_freehandLine:n7.$yE,markup_straightLine:n7.Luw,markup_textboxDefaultContent:n7.hKx,markup_textBoxInvalidInputTypeErrorMessage:n7.Ml5,markup_textBoxInvalidInputRangeErrorMessage:n7.Igh,markup_panelLabel:n7.lYo},i7={strings:{adjustment_light:n7.YPD,adjustment_color:n7.ZRA,adjustment_lightAriaLandmark:n7.xeW,adjustment_colorAriaLandmark:n7.$qL,adjustment_brightness:n7.BiZ,adjustment_exposure:n7.ilV,adjustment_contrast:n7.qej,adjustment_highlights:n7.mA9,adjustment_shadows:n7.Go7,adjustment_saturation:n7.HWc,adjustment_temperature:n7.UhG,adjustment_tint:n7.VG0,adjustment_vignette:n7.NKY,adjustment_sharpness:n7.WMj,adjustment_mobileChangedAriaLive:n7.BiS,adjustment_sliderChangedAriaLive:n7.$3G,adjustment_sliderAriaLabelFormatString:n7.IOh,adjustment_sliderTooltip:n7._kR,adjustment_tileMobileTooltip:n7.DXS,adjustment_tileMobileAriaLabel:n7.cr_,adjustment_panelLabel:n7.pYP,aspectRatio_listTitle:n7.bXz,aspectRatio_freeform:n7.HHc,aspectRatio_freeformAriaLabel:n7.B5o,aspectRatio_original:n7.JUN,aspectRatio_originalAriaLabel:n7.kNC,aspectRatio_square:n7.Lwh,aspectRatio_squareAriaLabel:n7.qXc,aspectRatio_ratioLabelFormatString:n7.E8n,aspectRatio_ratioAriaLabelFormatString:n7.tg5,aspectRatio_tooltip:n7.fos,aspectRatio_changedAriaLive:n7.hSt,flip_portrait:n7.BsR,flip_portraitAriaLabel:n7.$93,flip_landscape:n7.Vfu,flip_landscapeAriaLabel:n7.bPZ,aspectRatio_panelLabel:n7.CnP,aspectRatio_landscapePanelLabel:n7.Gvu,aspectRatio_portraitPanelLabel:n7.lSx,autoEnhance_name:n7.ViR,autoEnhance_appliedAriaLive:n7.CJ4,autoEnhance_removedAriaLive:n7.Qq_,autoEnhance_intensitySliderHeader:n7.RA0,autoEnhance_intensitySliderAriaLabel:n7.cAm,autoEnhance_appliedTooltip:n7.rjE,autoEnhance_notAppliedTooltip:n7.D0F,crop_topLeftCornerAriaLabel:n7.xqz,crop_topRightCornerAriaLabel:n7.a38,crop_bottomLeftCornerAriaLabel:n7.EoZ,crop_bottomRightCornerAriaLabel:n7.XtO,crop_cornerTooltip:n7.yYZ,crop_rectangleAriaLabel:n7.QVJ,crop_rectangleTooltip:n7.L$y,crop_rectanglePositionAriaLive:n7.SPc,crop_rectangleCannotMoveInCurrentDirectionAriaLive:n7.j5Y,crop_panelLabel:n7.R9w,editor_viewingOriginal:n7.dUA,editor_viewingOriginalAriaLive:n7.RP,editor_zoomPercentAriaLive:n7.DFv,editor_imageDimensionLabelFormatString:n7.ZzB,editor_imageDimensionAriaLabelFormatString:n7.HRu,editor_imageDimensionAriaLive:n7._AD,editor_imageDimensionWithAspectRatioAriaLive:n7.Zl1,editor_title:n7.dlI,filter_listTitle:n7.MB$,filter_intensitySliderHeader:n7.YX6,filter_intensitySliderAriaLabelFormatString:n7.ufY,filter_nameOriginal:n7.Qau,filter_nameBurn:n7.RWW,filter_nameBw:n7.ThW,filter_nameBwAriaLabel:n7.pvf,filter_nameBwCool:n7.PHs,filter_nameBwCoolAriaLabel:n7.VGj,filter_nameBwHighContrast:n7.ipD,filter_nameBwHighContrastAriaLabel:n7.wzs,filter_nameBwWarm:n7.pvx,filter_nameBwWarmAriaLabel:n7.c5Q,filter_nameCoolLight:n7.eTk,filter_nameCalm:n7.F_1,filter_nameDramaticCool:n7.kj6,filter_nameFilm:n7.dDu,filter_nameGolden:n7.Oi$,filter_namePunch:n7.sum,filter_nameRadiate:n7.Ifh,filter_nameVintage:n7.Uz1,filter_nameVividCool:n7.Ddi,filter_nameWarmContrast:n7.xs7,filter_changedAriaLive:n7.k76,filter_changedAriaLiveWithIntensity:n7.ykZ,filter_mobileChangedAriaLive:n7.drg,filter_mobileChangedAriaLiveWithIntensity:n7.G1y,filter_filtersAriaLandmark:n7.yz$,filter_sliderTooltip:n7.EQZ,filter_tileMobileTooltip:n7.U_g,filter_tileAriaLabel:n7.Kzb,filter_tileAriaLabelWhenOriginalFilterIsSelected:n7.p,filter_activeTileAriaLabel:n7.N17,filter_activeOriginalFilterAriaLabel:n7.Mez,filter_showAllButtonText:n7._ty,filter_hideButtonText:n7.wPm,footer_done:n7.$_c,nonCrop_imageTooltip:n7.sv4,nonCrop_imageAriaLabelWithEdits:n7.VCL,nonCrop_imageAriaLabelWithoutEdits:n7.xCZ,nonCrop_panViewPositionAriaLive:n7.Yey,nonCrop_imagePanAriaLabel:n7.ycM,pivot_crop:n7.c38,pivot_adjustment:n7.wXe,pivot_filter:n7.Waw,pivot_markup:n7.xsz,pivot_retouch:n7.eQC,pivot_erase:n7.M9I,pivot_inpaint:n7.aQM,pivot_background:n7.GmK,pivot_relight:n7.Ag9,pivot_focalpoint:n7.qap,pivot_stylizer:n7.hPr,pivot_resize:n7.R3D,pivot_cropAriaDescription:n7.$oR,pivot_adjustmentAriaDescription:n7.nhX,pivot_filterAriaDescription:n7.b_k,pivot_markupAriaDescription:n7.zcO,pivot_retouchAriaDescription:n7.vAc,pivot_backgroundAriaDescription:n7.wYc,pivot_relightAriaDescription:n7.E4X,pivot_focalpointAriaDescription:n7.goL,pivot_stylizerAriaDescription:n7.YQv,pivot_resizeAriaDescription:n7.$vc,rotate_left90:n7.sv3,rotate_left90AriaLabel:n7.yKQ,rotate_left90FinishedAriaLive:n7.yr8,rotate_right90:n7.erC,rotate_right90AriaLabel:n7.jqB,rotate_right90FinishedAriaLive:n7.wvb,rotate_sliderAriaLabel:n7.aJ0,rotate_degree:n7.YSf,rotate_sliderTooltip:n7.tbe,flip_horizontal:n7.IJZ,flip_horizontalAriaLabel:n7.iIh,flip_horizontalFinishedAriaLive:n7.me0,flip_vertical:n7.ucv,flip_verticalAriaLabel:n7.m6g,flip_verticalFinishedAriaLive:n7.JjF,toolbar_imageSaveMenu:n7.BO_,toolbar_imageSaveMenuTooltip:n7.pIr,toolbar_imageSave:n7.jY7,toolbar_imageSaveAriaLabel:n7.FSP,toolbar_saveMenuSplitButtonAriaLabel:n7.O2F,toolbar_imageSaveTooltip:n7.nOM,toolbar_imageSaveTransparencyWarningTooltip:n7.Zd,toolbar_imageSaveAsCopy:n7.h1r,toolbar_imageSaveAsCopyAriaLabel:n7.ujb,toolbar_imageSaveAsCopyTooltip:n7.sAE,toolbar_imageSaveAsCopyTransparencyTooltip:n7.tii,toolbar_imageCopyToClipboard:n7.ofd,toolbar_imageCopyToClipboardAriaLabel:n7.Yto,toolbar_imageCopyToClipboardTooltip:n7.s9O,toolbar_imageReset:n7.sOd,toolbar_imageResetTooltip:n7.BiX,toolbar_imageResetAriaLabel:n7.guW,toolbar_imageResetFinishedAriaLive:n7.nre,toolbar_resetConfirmDialogContentTitle:n7.HX4,toolbar_resetConfirmDialogContentSubText:n7.nev,toolbar_resetConfirmDialogCloseButtonAriaLabel:n7.vQJ,toolbar_resetConfirmDialogConfirmText:n7.tEZ,toolbar_resetConfirmDialogConfirmAriaLabel:n7.SpL,toolbar_resetConfirmDialogCancelText:n7.UiI,toolbar_resetConfirmDialogCancelAriaLabel:n7.rYu,toolbar_zoomLevelAriaLabel:n7.j5p,toolbar_zoomInTooltip:n7.L3F,toolbar_zoomInAriaLabel:n7.ZbN,toolbar_zoomOutTooltip:n7.wQi,toolbar_zoomOutAriaLabel:n7.NTp,toolbar_done:n7.Sn0,toolbar_doneAriaLabel:n7.EF0,toolbar_doneTooltip:n7.hUm,toolbar_cancel:n7.kRU,toolbar_cancelAriaLabel:n7.Jb1,toolbar_cancelTooltip:n7.en0,toolbar_fitToViewTooltip:n7.AA5,toolbar_viewActualSizeTooltip:n7.FXt,toolbar_undo:n7.dgb,toolbar_undoAriaLabel:n7.oTX,toolbar_redo:n7.jlc,toolbar_redoAriaLabel:n7.WqA,undoRedo_colorAdjustmentsAriaLive:n7.eZY,undoRedo_autoEnhanceAriaLive:n7.ckQ,undoRedo_filterAriaLive:n7.IqI,undoRedo_markupInkContentAriaLive:n7.gyw,undoRedo_markupEraseContentAriaLive:n7.fsJ,undoRedo_markupClearAllMarkupContentAriaLive:n7.LqG,undoRedo_transformCropAriaLive:n7.uM,undoRedo_transformAspectRatioAriaLive:n7.fc9,undoRedo_transformMirrorImageAriaLive:n7.Ywk,undoRedo_transformRotationAriaLive:n7.C1n,undoRedo_spotFixAriaLive:n7.iuL,undoRedo_maskBrushAriaLive:n7.N$1,undoRedo_blurAriaLive:n7.crX,undoRedo_imageBackgroundAriaLive:n7.MRI,undoRedo_focalPointAriaLive:n7.Z9W,undoRedo_previewSuperResolutionAriaLive:n7.BFc,undoRedo_appliedSuperResolutionAriaLive:n7._2x,spotFix_toastText:n7.AGV,spotFix_calloutHeaderText:n7.Sfb,spotFix_calloutMainText:n7.wSX,spotFix_header:n7.g5U,spotFix_sizeSliderTooltip:n7.Bcx,spotFix_sizeSliderHeader:n7.ek_,spotFix_sizeSliderAriaLabel:n7.VYV,spotFix_sizeChangedAriaAnnouncement:n7.eHL,magicErase_GenerativeEraseLabel:n7._SN,magicErase_autoApplyLabel:n7.ngU,magicErase_autoApplyToggleOn:n7.uOC,magicErase_autoApplyToggleOff:n7.jz1,magicErase_autoApplyToggleAriaLabel:n7.wEw,magicErase_autoApplyToggleAriaDescriptionWhenOn:n7.OnG,magicErase_autoApplyToggleAriaDescriptionWhenOff:n7.Wup,magicErase_maskBrushPickerAddToSelectionAriaLabel:n7.L7O,magicErase_maskBrushPickerAddToSelectionAriaDescription:n7.cAU,magicErase_maskBrushPickerRemoveFromSelectionAriaLabel:n7.L7M,magicErase_maskBrushPickerRemoveFromSelectionAriaDescription:n7.WX_,magicErase_maskBrushPickerEraseText:n7.D1n,magicErase_maskBrushPickerEraseAriaDescription:n7.TFX,magicErase_maskBrushPickerClearText:n7.k1i,magicErase_maskBrushPickerClearAriaDescription:n7.XKQ,magicErase_notificationMagicEraseStillProcessing:n7.onB,magicErase_notificationMagicEraseProcessingCompleted:n7.$Pm,magicErase_toastDismissButtonAriaLabel:n7.SGR,magicErase_notificationMagicEraseProcessingFailed:n7.wgb,magicErase_canvasAriaLabelWithNoPreviousEraseOperation:n7.$hL,magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOn:n7.Hgn,magicErase_canvasAriaLabelWithUnappliedBrushedMasksToggleOff:n7.NLt,magicErase_canvasAriaLabelWithAppliedBrushedMasks:n7.AKO,background_resetButtonText:n7.BhP,background_resetButtonAriaLabel:n7.ZHu,background_resetButtonTooltip:n7.FEi,background_resetButtonAriaDescription:n7.WWA,background_blurIntensitySliderLabel:n7.X8v,background_blurIntensitySliderArialLabel:n7.Mt5,background_blurIntensitySliderChangedAriaAnnouncementFormat:n7.FFp,background_blurIntensitySliderTitle:n7.dDQ,background_notificationBackgroundSegmentationCompleted:n7.MO5,background_notificationBackgroundSegmentationProcessing:n7.V71,background_ariaAnnounceSegmentationProcessing:n7.bxc,background_backgroundSegmentationFailed:n7.AXG,background_backgroundSegmentationFailedDismissButtonAriaLabel:n7.hsY,background_notificationBackgroundBlurProcessing:n7.kRE,background_ariaAnnounceSegmentationCompletion:n7.gXb,background_segmentationCompleteToastDismissButtonAriaLabel:n7.PMK,background_segmentationCompleteToastDismissButtonAriaDescription:n7.u9V,background_blurTitleText:n7.Tb8,background_blurTitleAriaLabelWhenOptionIsSelected:n7.hcw,background_blurTitleAriaLabelWhenOptionIsNotSelected:n7.vPs,background_blurTitleTooltip:n7.DgS,background_removeTitleText:n7.H_X,background_removeTitleAriaLabelWhenOptionIsSelected:n7._45,background_removeTitleAriaLabelWhenOptionIsNotSelected:n7.Vxe,background_removeTitleTooltip:n7.AGM,background_replaceTitleText:n7.IlL,background_replaceColorPickerAriaLabel:n7.fu$,background_replaceColorPickerChangedAriaAnnouncementFormat:n7.RpU,background_replaceColorPickerSliderAriaLabel:n7._Xt,background_replaceTitleAriaLabelWhenOptionIsSelected:n7.PLg,background_replaceTitleAriaLabelWhenOptionIsNotSelected:n7.csb,background_replaceTitleTooltip:n7.PYd,background_ariaAnnounceAppliedReset:n7.mxb,background_canvasAriaLabelWhenNoBackgroundOption:n7.$nw,background_canvasAriaLabelWhenBackgroundOptionApplied:n7.rCL,premium_previewFeatureLabel:n7.CHh,maskBrushPicker_addToSelection:n7.xbb,maskBrushPicker_addToSelectionAriaLabel:n7.A2q,maskBrushPicker_addToSelectionAriaDescription:n7.jkr,maskBrushPicker_removeFromSelection:n7.EgG,maskBrushPicker_removeFromSelectionAriaLabel:n7.YLP,maskBrushPicker_removeFromSelectionAriaDescription:n7.PdZ,maskBrushPicker_size:n7.zxx,maskBrushPicker_sizeChangedAriaAnnouncement:n7.pOz,maskBrushPicker_sizeAriaLabel:n7.MkJ,maskBrushPicker_sizeAriaDescription:n7.yck,maskBrushPicker_softness:n7.wWd,maskBrushPicker_ariaAnnounceSoftnessChanged:n7.zCJ,maskBrushPicker_softnessAriaLabel:n7.eLY,maskBrushPicker_softnessAriaDescription:n7.RYS,maskBrushPicker_title:n7.yA5,maskBrushPicker_showSelectionToggleAriaLabelWhenOn:n7.rvd,maskBrushPicker_showSelectionToggleAriaLabelWhenOff:n7.tzA,maskBrushPicker_showSelectionToggleOn:n7.R2$,maskBrushPicker_showSelectionToggleOff:n7.xu2,maskBrushPicker_showSelectionToggleTooltip:n7.QbE,maskBrushPicker_ariaAnnounceShowSelectionIsOff:n7.i5f,maskBrushPicker_ariaAnnounceShowSelectionIsOn:n7.f40,maskBrushPicker_ariaAnnounceAreaPainted:n7.cNF,maskBrushPicker_ariaAnnounceAreaErased:n7.A82,maskBrushPicker_ariaAnnounceAdditiveBrushSelected:n7.tve,maskBrushPicker_ariaAnnounceSubtractiveBrushSelected:n7.dKZ,maskBrushPicker_additiveOrSubtractiveToggleAriaLabel:n7.BYz,maskBrushPicker_additiveOrSubtractiveToggleAriaDescription:n7.L3b,colorPicker_redLabel:n7.GCm,colorPicker_greenLabel:n7.TRK,colorPicker_blueLabel:n7.dO,colorPicker_hexLabel:n7.RYD,focalPoint_handleAriaLabel:n7.gPu,focalPoint_handleDescription:n7.zdS,focalPoint_positionFormatString:n7.l3y,focalPoint_previewTitle:n7.sn7,focalPoint_previewDescription:n7.s7Z,focalPoint_previewAspectRatioFormatString:n7.OXN,focalPoint_previewImageAltFormatString:n7.IEv,magicErase_calloutHeaderText:n7.PcN,magicErase_calloutMainText:n7.a7b,magicErase_calloutSendFeedbackLinkText:n7.ujh,stylizerTextPrompt_title:n7.wH_,stylizerTextPrompt_placeholder:n7.grj,stylizerTextPrompt_example:n7.uPq,stylizerTextPrompt_wordsCount:n7.znM,stylizerTeachingTip_title:n7.yar,stylizerTeachingTip_mainTextWithSendFeedbackLink:n7.NOm,stylizerTeachingTip_MicrosoftServicesAgreementAndThirdPartyLinks:n7._I5,networkOffline_title:n7.HPu,networkOffline_description:n7.XuH,networkOfflineImage_alt:n7.wUq,msaSignedOut_title:n7.vIv,msaSignedOut_description:n7.SRU,msaSignedOut_learnMore:n7.Eus,msaBlocked_title:n7.kkm,msaBlocked_description:n7.pf1,msaBlockedImage_alt:n7.Adj,msaBanned_title:n7.Nan,msaBanned_description:n7.w_3,msaBannedImage_alt:n7.vSO,loginButton_title:n7.XRL,loginImage_alt:n7.vPB,loginButton_ariaAnnouncement:n7.qmJ,stylizerTextPrompt_buttonAriaLabel:n7.mlM,restyleDropdown_allLabel:n7.hrk,restyleDropdown_backgroundOnlyLabel:n7.$q$,restyleDropdown_foregroundOnlyLabel:n7.lfN,restyleDropdown_ariaLabel:n7.hdP,creativitySlider_calloutHeaderText:n7.zzg,creativitySlider_calloutMainText:n7.N$G,creativitySlider_calloutButtonAriaLabel:n7.ctu,creativitySlider_label:n7.IjZ,downloadModel_title:n7.zvq,downloadModel_description:n7.s93,downloadModel_button:n7.YiC,downloadModel_buttonAriaLabel:n7.GcF,downloadModel_imageAlt:n7.k3G,initializeModel_title:n7.Srl,initializeModel_description:n7.XK6,initializeModel_imageAlt:n7.KvY,stylizer_modelFailureDescription:n7.CPE,stylizer_modelFailureImageAlt:n7.dDh,stylizer_modelFailureTitle:n7.zYH,foregroundDisabledAlert_title:n7.UvZ,foregroundDisabledAlert_description:n7.tAh,faceDetectionTeachingTip_title:n7.G0u,faceDetectionTeachingTip_mainText:n7.EGp,faceDetectionTeachingTip_LearnMoreLinkText:n7.Owv,faceDetectionTeachingTip_DismissLinkText:n7.ICQ,contentWarning_title:n7.roX,contentWarning_description:n7.uN8,stylizer_titleBarTeachingTipTitle:n7.q8T,stylizer_titleBarTeachingTipDescription:n7.jb,stylizer_titleBarTeachingTipButtonText:n7.gK$,stylizer_msaSignedInReminderWithLearnMoreLink:n7.sM0,stylizer_genericErrorTitle:n7.qKW,stylizer_genericErrorDescription:n7.zwB,stylizer_harmfulInputTitle:n7.$2_,stylizer_harmfulInputDescription:n7.vl_,stylizer_harmfulOutputTitle:n7.Mfd,stylizer_harmfulOutputDescription:n7.xVU,stylizer_notificationDismissButtonAriaLabel:n7.GND,stylizer_presetsNameFantasy:n7.$ap,stylizer_presetsNameAnime:n7.uS$,stylizer_presetsNameCyberpunk:n7.QkW,stylizer_presetsNameSurrealism:n7.JEz,stylizer_presetsNameImpressionist:n7.moz,stylizer_presetsNameRenaissance:n7.Pom,stylizer_presetsNameWatercolor:n7.K9K,stylizer_presetsNamePapercraft:n7.P_8,stylizer_presetsNamePixelArt:n7.ZRc,stylizer_presetsPromptFantasy:n7.GCW,stylizer_presetsPromptAnime:n7.eXj,stylizer_presetsPromptSurrealism:n7.XHp,stylizer_presetsPromptImpressionist:n7.$Bi,stylizer_presetsPromptCyberpunk:n7.s1B,stylizer_presetsPromptRenaissance:n7.JZs,stylizer_presetsPromptWatercolor:n7.ciI,stylizer_presetsPromptPapercraft:n7.oAY,stylizer_presetsPromptPixelArt:n7.uj$,stylizer_presetPromptProcessing:n7.ms4,stylizer_presetPromptProcessed:n7.k$3,stylizer_presetsChangedAriaLive:n7.rmo,stylizer_presetsTileAriaLabel:n7.AVs,stylizer_presetsTileAriaLabelWhenNoneSelected:n7.xNq,stylizer_presetsActiveTileAriaLabel:n7.qRt,stylizer_presetsGroupAriaLabel:n7.ZOG,notification_dismissButtonAriaLabel:n7.T4Y,resize_upscaleSliderAriaLabel:n7.wZR,resize_upscaleSliderTooltip:n7.SFL,resize_scaleLabel:n7.OGO,resize_scaleTeachingTipTitle:n7.WaF,resize_scaleTeachingTipMainText:n7.BX$,resize_upscaleSliderResizeFactorLabel:n7.U_o,resize_upscaleSliderAriaValueText:n7.bWK,resize_upscaleSlider1xAriaValueText:n7.J1V,resize_currentImageLabel:n7.JuZ,resize_newImageLabel:n7.C74,resize_teachingTipTitle:n7.BSU,resize_teachingTipMainText:n7.D7H,resize_teachingTipSendFeedbackLink:n7.vtW,resize_learnMoreLink:n7.NUX,resize_applyButton:n7.Rew,resize_applyButtonAriaLabel:n7.qtL,resize_cancelButton:n7.lhT,resize_cancelButtonAriaLabel:n7.uKi,resize_cancelAriaLive:n7.Hes,resize_discardButton:n7.GsQ,resize_discardButtonAriaLabel:n7.K$v,resize_discardAriaLive:n7.Pie,resize_imageTooBigWarning:n7.d$O,resize_applyUpscaleConfirmDialogContentTitle:n7.DfC,resize_applyUpscaleConfirmDialogContentSubText:n7.axL,resize_applyUpscaleConfirmDialogCloseButtonAriaLabel:n7.f_7,resize_applyUpscaleConfirmDialogConfirmText:n7.BCQ,resize_applyUpscaleConfirmDialogConfirmAriaLabel:n7.Gau,resize_applyUpscaleConfirmDialogCancelText:n7.FKk,resize_applyUpscaleConfirmDialogCancelAriaLabel:n7.gLP,resize_notificationUpscaleInProgress:n7.erH,resize_notificationUpscaleSuccessfullyCompletedFormatString:n7.MT6,resize_notificationUpscaleFailed:n7.sLo,resize_splitterAriaLabel:n7.clG,resize_splitterTooltip:n7.Rt_,resize_splitterMovedAriaLive:n7.I50,resize_splitterCannotMoveFurtherAriaLive:n7.W7d}},r7=I(5952),o7=I(5491);function s7(){return!$6._SPKillSwitch.isActivated("d2ceafeb-2bfc-4ef9-91fa-6da02f8d497b")&&$6._SPFlight.isEnabled(61540)}function c7(e,n,a,i){var r=(0,o7.useFullImageSrc)(e,n,a,J6.DefaultImageHelper.getDefaultImage,s7()?i:a.cacheBuster);return function(e){var n=this,a=(0,t.useState)(null),i=a[0],r=a[1],o=(0,t.useCallback)(function(e){var t,a,i;t=n,i=function(){var t;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(n){switch(n.label){case 0:return e?[4,v_(e)]:[3,2];case 1:t=n.sent(),r(t),n.label=2;case 2:return[2]}})},new((a=void 0)||(a=Promise))(function(e,n){function r(e){try{s(i.next(e))}catch(e){n(e)}}function o(e){try{s(i.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(r,o)}s((i=i.apply(t,[])).next())})},[]);return(0,t.useEffect)(function(){o(e)},[o,e]),[i,o]}((s7()?i:a.cacheBuster)?r||"":a.imageUrl)}var d7=I(9110),l7=I(8926);function u7(e){var n=e.onClose,a=e.isCloseDialogHidden,i=e.setIsCloseDialogHidden,r={subText:n7.Vo2,title:n7.zMq};return t.createElement(d7.Dialog,{hidden:a,dialogContentProps:r},t.createElement("div",{className:"a_a_28d07396"},t.createElement("div",{className:"b_a_28d07396"},t.createElement(l7.PrimaryButton,{text:n7.jbO,onClick:function(){return i(!0)},"aria-label":n7.jbO,styles:{root:{marginRight:"8px"}}}),t.createElement(l7.DefaultButton,{text:n7.bIQ,onClick:n,"aria-label":n7.bIQ}))))}D.loadStyles(".a_a_28d07396{text-align:center}.b_a_28d07396{display:flex;justify-content:right}",!0);var f7,p7=Bf.sB,m7=(0,e.__assign)((0,e.__assign)({},Ce.xp),{activeEditorActivity:Me.dp});function _7(n){var a=this,i="AdvancedEditor",r="EditImage",o=c7(n.callerId,n.serviceScope,n.imageData,s7()?n.cacheBuster:void 0),s=o[0],c=o[1],d=t.useState(!0),l=d[0],u=d[1];t.useEffect(function(){return function(){c("")}},[c]),function(e,n){void 0===e&&(e=33.3),void 0===n&&(n=!1);var a=t.useReducer(function(e){return e+1},0,function(){return 0})[1];t.useEffect(function(){if(!n){var t=(0,X6.throttle)(function(){a()},e);return window.addEventListener("resize",t),function(){t.cancel(),window.removeEventListener("resize",t)}}},[a,e,n])}(500);var f={errorModuleName:"Image ".concat(i," for ").concat(n.callerId," Failure"),logFailure:n.serviceScope.consume(r7._EditModeCustomerPromiseHandler.serviceKey).logFailure},p=new Y6._QosMonitorShareFailureWithCP("".concat(i,".").concat(r),!1,[f]),m=t.useRef(null),_={width:window.innerWidth-100<2e3?window.innerWidth-100:2e3,height:window.innerHeight-100<1e3?window.innerHeight-100:1e3},h=nl,b=function(e){return!0===e.enableFocalPoint},g=void 0,v=void 0,y=void 0;if(b(n)&&(n.showFocalPointOnly&&(v=m7,g=[Me.dp]),y=n.initialFocalPointPosition),(0,J6.isControlHostCommunicatorForCoAuthEnabled)()){var S=t.useMemo(function(){return n.serviceScope.consume(J6.ControlHostCommunicatorEdit.serviceKey)},[]);t.useLayoutEffect(function(){n.isOpen?S.notifyNonDataChangingEdit():S.notifyNonDataChangingEditEnded()},[n.isOpen]),t.useLayoutEffect(function(){return S.on("disposed",n.handleClose),S.notifyNonDataChangingEditEnded},[])}var D=t.useCallback(function(t,o){return(0,e.__awaiter)(a,void 0,void 0,function(){var a,s,c,d,l,u,f,_,h,g,v;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return a=J6.ExtensionHelper.getExtension(t),s=a?"image/".concat("jpg"===a?"jpeg":a):void 0,Y6._EngagementLogger.logEvent("AdvancedEditor.SaveButton.Click"),c=void 0,d=void 0,[4,null===(f=m.current)||void 0===f?void 0:f.getEdits(!1)];case 1:return c=e.sent(),d=null==c?void 0:c.focalPoint.focalPointUvPositionOnEditedImage,b(n)&&(null===(_=m.current)||void 0===_?void 0:_.hasFocalPointEditsOnly())&&o===xa.SaveAsOriginal?(n.handleSaveWithFP(void 0,void 0,void 0,o===xa.SaveAsOriginal,!0,d),[3,4]):[3,2];case 2:return[4,null===(h=m.current)||void 0===h?void 0:h.getEditedImage()];case 3:if(l=e.sent())try{l.toBlob(function(e){var t;if(e)b(n)?n.handleSaveWithFP(e,l.width,l.height,o===xa.SaveAsOriginal,!1,d):n.handleSave(e,l.width,l.height,o===xa.SaveAsOriginal),p.writeSuccess();else{var a=Error("Blob was not defined");p.writeUnexpectedFailure("".concat(i,".").concat(r,".BlobUndefinedFailure"),a),t7()||null===(t=n.handleError)||void 0===t||t.call(n,a)}},s)}catch(e){u=Error("Error in canvas.toblob: ".concat(e)),p.writeUnexpectedFailure("".concat(i,".").concat(r,".CanvasToBlobFailure"),u),t7()||null===(g=n.handleError)||void 0===g||g.call(n,u)}else u=Error("Canvas was not defined"),p.writeUnexpectedFailure("".concat(i,".").concat(r,".CanvasFailure"),u),t7()||null===(v=n.handleError)||void 0===v||v.call(n,u);e.label=4;case 4:return n.handleClose(),[2]}})})},[]),I=t.useCallback(function(e){var t,a=Error("Message: ".concat(e.message));p.writeUnexpectedFailure("".concat(i,".").concat(r,".").concat(e.id),a),t7()||null===(t=n.handleError)||void 0===t||t.call(n,a)},[]),x=t.useCallback(function(){u(!0),p.writeSuccess(),Y6._EngagementLogger.logEvent("AdvancedEditor.CloseButton.Click"),$6._SPKillSwitch.isActivated("9c9a5baf-09a9-47c9-9a59-7f0b75aab5b4")?n.handleClose():n.handleClose(!0)},[]);function C(){var t;return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,null===(t=m.current)||void 0===t?void 0:t.getEdits(!1)];case 1:return(n=e.sent())&&(function(e){return Object.keys(e).some(function(t){var n=e[t];return"number"!=typeof n&&(null==n?void 0:n.undoRedoStack)&&n.undoRedoStack.undoStack.length>0})}(n)?u(!1):x()),[2]}})})}var O=h.getTheme(!0,!1),w=a7,E="Bottom",A=t.useMemo(function(){return h.getMarkupToolbarStyles(O,E,!0,!0)},[E,h.getMarkupToolbarStyles,O]),L=t.useMemo(function(){return n.allowedAspectRatios},[]),k={onDismiss:C},M=(null==L?void 0:L[0])&&(null==s?void 0:s.width)&&(null==s?void 0:s.height)?{aspectRatio:L[0],imageTransform:{x:0,y:0,width:s.width,height:s.height,rotation:0},cropRectangle:{left:0,top:0,width:s.width,height:s.height},initialFocalPointUvPosition:y}:{initialFocalPointUvPosition:y};return t.createElement(t.Fragment,null,t.createElement(u7,{isCloseDialogHidden:l,setIsCloseDialogHidden:u,onClose:x}),t.createElement(Z6.Modal,{isOpen:n.isOpen,popupProps:k},t.createElement(Q6,{enableMarkup:!n.disableMarkup,localizationStrings:w,markupToolbarStyles:A,enableArrowhead:!0},t.createElement(R3,{ref:m,componentSize:_,image:s,onSave:function(e){return D(n.imageData.imageUrl,e)},onClose:C,onError:I,localization:i7,enableAdjustments:!0,enableFilters:!0,enableAutoEnhance:!1,enableUndoRedo:!0,enableFocalPoint:n.enableFocalPoint,layout:h,"data-automation-id":"advancedImageEditor",aspectRatiosDisplayedInOrder:!e7()&&M?L:void 0,defaultEdits:e7()?void 0:M,initialUiState:v,pivotKeyOrder:g}))))}(0,D.loadStyles)([{rawString:".canvas_container_7a68377b{position:relative;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"}]),Vf();var h7=((f7={})[Me.I8]={top:30,left:30,right:30,bottom:30},f7),b7=(0,t.forwardRef)(function(e,a){var i=e.componentSize,r=e.cropHandleSize,o=e.cssToPhysicalPixelRatio,s=e.onEditsChanged,c=(0,b.D)(),d=c.semanticColors.bodyBackground,l=(0,t.useContext)($n.Z),u=l.image,f=l.setOffscreenRenderer,p=l.setImageLayer,m=function(e){var n=nm(),a=n.getEditedImage,i=n.getEditedImageBytes,r=n.getImageLayerBytes,o=n.getImageRegionLayerBytes,s=(0,t.useRef)(Gp);return(0,t.useImperativeHandle)(e,function(){return{getEdits:function(e){return s.current.getEdits(e)},setEdits:function(e){return s.current.setEdits(e)},resetEdits:function(){s.current.resetEdits()},hasEdits:function(){return s.current.hasEdits()},hasFocalPointEditsOnly:function(){return s.current.hasFocalPointEditsOnly()},getEditsAsExifOrientation:function(e){return s.current.getEditsAsExifOrientation(e)},experimental_bakeEditsWithFrame:function(e){throw new Error("not implemented.")},getEditedImage:a,getEditedImageBytes:i,getImageLayerBytes:r,getImageRegionLayerBytes:o,replaceImageAndResetEdits:function(){throw new Error("not implemented.")},setImageWasReplaced:function(){throw new Error("not implemented.")},replaceImage:function(){throw new Error("not implemented.")}}},[a,i,r,o]),{editOperationsRef:s}}(a).editOperationsRef;return n().createElement("div",{style:{width:i.width,height:i.height,backgroundColor:d}},n().createElement("div",{className:"canvas_container_7a68377b",role:"main"},n().createElement(It,{canvasSize:i,cssToPhysicalPixelRatio:o},n().createElement(qh,{backgroundColor:Hn(c.semanticColors.bodyBackground)},n().createElement(B_,{handleSizeCss:r.handleCssSize,handleHitAreaSizeCss:r.hitAreaCssSize}),n().createElement(c0,null),n().createElement(C_,{image:u,setImageLayer:p,color:gm.Qf,zIndex:1},n().createElement(Ab,{ref:f}),n().createElement(Fv,{order:0}),n().createElement(p1,{order:1}),n().createElement(K0,{order:2})))),n().createElement(ft,null)),n().createElement(qp,{ref:m,onEditsChanged:s}),n().createElement(_r,{cssPixelMarginByActivity:h7}),n().createElement(Qf,null))});b7.displayName="ImageCropper";var g7={setAspectRatio:Re.fd},v7=(0,g.Ng)(function(e){return{aspectRatio:e.transformTools.cropInteraction.aspectRatio}},g7)(function(e){return(0,t.useEffect)(function(){var t=new Map([[16/9,ei.CA],[4/3,ei.$f],[2/3,ei.ao],[1.5,ei.$X],[1,ei.by],[9/16,ei.vc],[0,ei.hO]]).get(e.aspectRatioNumber);if(t){var n=Y6._LogSource.create("AdvancedCropper");Y6._TraceLogger.logVerbose(n,"AdvancedCropperConnector AspectRatio: ".concat(e.aspectRatioNumber)),e.setAspectRatio(t)}},[e]),n().createElement(n().Fragment,null)}),y7=Y6._LogSource.create("AdvancedCropper"),S7={handleCssSize:28,hitAreaCssSize:50};function D7(n){var a=this,i=(0,e.__assign)({},n),r=i.componentSize,o=i.onCropComplete,s=c7(n.callerId,n.serviceScope,n.imageData,s7()?n.cacheBuster:void 0),c=s[0],d=s[1];t.useEffect(function(){return function(){d("")}},[d]);var l=t.useRef(null),u=t.useCallback(function(t){return(0,e.__awaiter)(a,void 0,void 0,function(){var n,a,i,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=J6.ExtensionHelper.getExtension(t),a=n?"image/".concat("jpg"===n?"jpeg":n):void 0,[4,null===(r=l.current)||void 0===r?void 0:r.getEditedImage()];case 1:if(i=e.sent())try{i.toBlob(function(e){if(!e)throw Error("Canvas to blob failed, no blob");var t={width:i.width,height:i.height};o(t,e)},a)}catch(e){Y6._TraceLogger.logError(Y6._LogSource.create("AdvancedCropper"),e)}else Y6._TraceLogger.logError(Y6._LogSource.create("AdvancedCropper"),Error("No canvas found when getting edited image"));return[2]}})})},[]),f=function(t){return(0,e.__awaiter)(a,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return Y6._EngagementLogger.logEvent("AdvancedCropper.Save.Click"),[4,u(t).catch(function(e){Y6._TraceLogger.logError(Y6._LogSource.create("AdvancedCropper"),e)}).then(function(){Y6._TraceLogger.logVerbose(y7,"Successfully cropped image")})];case 1:return e.sent(),[2]}})})},p=function(e){var t=e.target||document.activeElement,a=n.workingAreaRef&&n.workingAreaRef.current;a?a.contains(t)||f(n.imageData.imageUrl):Y6._TraceLogger.logError(Y6._LogSource.create("AdvancedImageEditor"),Error("No host found when checking workingAreaRef.current"))},m=function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f(n.imageData.imageUrl))};return t.useEffect(function(){return document.addEventListener("click",p),document.addEventListener("keydown",m),function(){document.removeEventListener("click",p),document.removeEventListener("keydown",m)}},[]),t.createElement(t.Fragment,null,t.createElement(Uu,{image:c,onComponentError:function(){Y6._TraceLogger.logError(Y6._LogSource.create("AdvancedCropper"),Error("Component error in AdvancedCropper"))},localization:i7},t.createElement(v7,{aspectRatioNumber:n.aspectRatio?n.aspectRatio:0}),t.createElement(b7,{componentSize:r,cropHandleSize:S7,ref:l})))}})(),x})())})();